(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./sdk/superboard/ZegoSuperBoardManager.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@protobufjs/aspromise/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@protobufjs/aspromise/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = asPromise;

/**
 * Callback as used by {@link util.asPromise}.
 * @typedef asPromiseCallback
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {...*} params Additional arguments
 * @returns {undefined}
 */

/**
 * Returns a promise from a node-style callback function.
 * @memberof util
 * @param {asPromiseCallback} fn Function to call
 * @param {*} ctx Function context
 * @param {...*} params Function arguments
 * @returns {Promise<*>} Promisified function
 */
function asPromise(fn, ctx/*, varargs */) {
    var params  = new Array(arguments.length - 1),
        offset  = 0,
        index   = 2,
        pending = true;
    while (index < arguments.length)
        params[offset++] = arguments[index++];
    return new Promise(function executor(resolve, reject) {
        params[offset] = function callback(err/*, varargs */) {
            if (pending) {
                pending = false;
                if (err)
                    reject(err);
                else {
                    var params = new Array(arguments.length - 1),
                        offset = 0;
                    while (offset < params.length)
                        params[offset++] = arguments[offset];
                    resolve.apply(null, params);
                }
            }
        };
        try {
            fn.apply(ctx || null, params);
        } catch (err) {
            if (pending) {
                pending = false;
                reject(err);
            }
        }
    });
}


/***/ }),

/***/ "./node_modules/@protobufjs/base64/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@protobufjs/base64/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal base64 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var base64 = exports;

/**
 * Calculates the byte length of a base64 encoded string.
 * @param {string} string Base64 encoded string
 * @returns {number} Byte length
 */
base64.length = function length(string) {
    var p = string.length;
    if (!p)
        return 0;
    var n = 0;
    while (--p % 4 > 1 && string.charAt(p) === "=")
        ++n;
    return Math.ceil(string.length * 3) / 4 - n;
};

// Base64 encoding table
var b64 = new Array(64);

// Base64 decoding table
var s64 = new Array(123);

// 65..90, 97..122, 48..57, 43, 47
for (var i = 0; i < 64;)
    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;

/**
 * Encodes a buffer to a base64 encoded string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} Base64 encoded string
 */
base64.encode = function encode(buffer, start, end) {
    var parts = null,
        chunk = [];
    var i = 0, // output index
        j = 0, // goto index
        t;     // temporary
    while (start < end) {
        var b = buffer[start++];
        switch (j) {
            case 0:
                chunk[i++] = b64[b >> 2];
                t = (b & 3) << 4;
                j = 1;
                break;
            case 1:
                chunk[i++] = b64[t | b >> 4];
                t = (b & 15) << 2;
                j = 2;
                break;
            case 2:
                chunk[i++] = b64[t | b >> 6];
                chunk[i++] = b64[b & 63];
                j = 0;
                break;
        }
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (j) {
        chunk[i++] = b64[t];
        chunk[i++] = 61;
        if (j === 1)
            chunk[i++] = 61;
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

var invalidEncoding = "invalid encoding";

/**
 * Decodes a base64 encoded string to a buffer.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Number of bytes written
 * @throws {Error} If encoding is invalid
 */
base64.decode = function decode(string, buffer, offset) {
    var start = offset;
    var j = 0, // goto index
        t;     // temporary
    for (var i = 0; i < string.length;) {
        var c = string.charCodeAt(i++);
        if (c === 61 && j > 1)
            break;
        if ((c = s64[c]) === undefined)
            throw Error(invalidEncoding);
        switch (j) {
            case 0:
                t = c;
                j = 1;
                break;
            case 1:
                buffer[offset++] = t << 2 | (c & 48) >> 4;
                t = c;
                j = 2;
                break;
            case 2:
                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;
                t = c;
                j = 3;
                break;
            case 3:
                buffer[offset++] = (t & 3) << 6 | c;
                j = 0;
                break;
        }
    }
    if (j === 1)
        throw Error(invalidEncoding);
    return offset - start;
};

/**
 * Tests if the specified string appears to be base64 encoded.
 * @param {string} string String to test
 * @returns {boolean} `true` if probably base64 encoded, otherwise false
 */
base64.test = function test(string) {
    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);
};


/***/ }),

/***/ "./node_modules/@protobufjs/eventemitter/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@protobufjs/eventemitter/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = EventEmitter;

/**
 * Constructs a new event emitter instance.
 * @classdesc A minimal event emitter.
 * @memberof util
 * @constructor
 */
function EventEmitter() {

    /**
     * Registered listeners.
     * @type {Object.<string,*>}
     * @private
     */
    this._listeners = {};
}

/**
 * Registers an event listener.
 * @param {string} evt Event name
 * @param {function} fn Listener
 * @param {*} [ctx] Listener context
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.on = function on(evt, fn, ctx) {
    (this._listeners[evt] || (this._listeners[evt] = [])).push({
        fn  : fn,
        ctx : ctx || this
    });
    return this;
};

/**
 * Removes an event listener or any matching listeners if arguments are omitted.
 * @param {string} [evt] Event name. Removes all listeners if omitted.
 * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.off = function off(evt, fn) {
    if (evt === undefined)
        this._listeners = {};
    else {
        if (fn === undefined)
            this._listeners[evt] = [];
        else {
            var listeners = this._listeners[evt];
            for (var i = 0; i < listeners.length;)
                if (listeners[i].fn === fn)
                    listeners.splice(i, 1);
                else
                    ++i;
        }
    }
    return this;
};

/**
 * Emits an event by calling its listeners with the specified arguments.
 * @param {string} evt Event name
 * @param {...*} args Arguments
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.emit = function emit(evt) {
    var listeners = this._listeners[evt];
    if (listeners) {
        var args = [],
            i = 1;
        for (; i < arguments.length;)
            args.push(arguments[i++]);
        for (i = 0; i < listeners.length;)
            listeners[i].fn.apply(listeners[i++].ctx, args);
    }
    return this;
};


/***/ }),

/***/ "./node_modules/@protobufjs/float/index.js":
/*!*************************************************!*\
  !*** ./node_modules/@protobufjs/float/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = factory(factory);

/**
 * Reads / writes floats / doubles from / to buffers.
 * @name util.float
 * @namespace
 */

/**
 * Writes a 32 bit float to a buffer using little endian byte order.
 * @name util.float.writeFloatLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 32 bit float to a buffer using big endian byte order.
 * @name util.float.writeFloatBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 32 bit float from a buffer using little endian byte order.
 * @name util.float.readFloatLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 32 bit float from a buffer using big endian byte order.
 * @name util.float.readFloatBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Writes a 64 bit double to a buffer using little endian byte order.
 * @name util.float.writeDoubleLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 64 bit double to a buffer using big endian byte order.
 * @name util.float.writeDoubleBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 64 bit double from a buffer using little endian byte order.
 * @name util.float.readDoubleLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 64 bit double from a buffer using big endian byte order.
 * @name util.float.readDoubleBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

// Factory function for the purpose of node-based testing in modified global environments
function factory(exports) {

    // float: typed array
    if (typeof Float32Array !== "undefined") (function() {

        var f32 = new Float32Array([ -0 ]),
            f8b = new Uint8Array(f32.buffer),
            le  = f8b[3] === 128;

        function writeFloat_f32_cpy(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
        }

        function writeFloat_f32_rev(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[3];
            buf[pos + 1] = f8b[2];
            buf[pos + 2] = f8b[1];
            buf[pos + 3] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;
        /* istanbul ignore next */
        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;

        function readFloat_f32_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            return f32[0];
        }

        function readFloat_f32_rev(buf, pos) {
            f8b[3] = buf[pos    ];
            f8b[2] = buf[pos + 1];
            f8b[1] = buf[pos + 2];
            f8b[0] = buf[pos + 3];
            return f32[0];
        }

        /* istanbul ignore next */
        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;
        /* istanbul ignore next */
        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;

    // float: ieee754
    })(); else (function() {

        function writeFloat_ieee754(writeUint, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0)
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);
            else if (isNaN(val))
                writeUint(2143289344, buf, pos);
            else if (val > 3.4028234663852886e+38) // +-Infinity
                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);
            else if (val < 1.1754943508222875e-38) // denormal
                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);
            else {
                var exponent = Math.floor(Math.log(val) / Math.LN2),
                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;
                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);
            }
        }

        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);
        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);

        function readFloat_ieee754(readUint, buf, pos) {
            var uint = readUint(buf, pos),
                sign = (uint >> 31) * 2 + 1,
                exponent = uint >>> 23 & 255,
                mantissa = uint & 8388607;
            return exponent === 255
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 1.401298464324817e-45 * mantissa
                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);
        }

        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);
        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);

    })();

    // double: typed array
    if (typeof Float64Array !== "undefined") (function() {

        var f64 = new Float64Array([-0]),
            f8b = new Uint8Array(f64.buffer),
            le  = f8b[7] === 128;

        function writeDouble_f64_cpy(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
            buf[pos + 4] = f8b[4];
            buf[pos + 5] = f8b[5];
            buf[pos + 6] = f8b[6];
            buf[pos + 7] = f8b[7];
        }

        function writeDouble_f64_rev(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[7];
            buf[pos + 1] = f8b[6];
            buf[pos + 2] = f8b[5];
            buf[pos + 3] = f8b[4];
            buf[pos + 4] = f8b[3];
            buf[pos + 5] = f8b[2];
            buf[pos + 6] = f8b[1];
            buf[pos + 7] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;
        /* istanbul ignore next */
        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;

        function readDouble_f64_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            f8b[4] = buf[pos + 4];
            f8b[5] = buf[pos + 5];
            f8b[6] = buf[pos + 6];
            f8b[7] = buf[pos + 7];
            return f64[0];
        }

        function readDouble_f64_rev(buf, pos) {
            f8b[7] = buf[pos    ];
            f8b[6] = buf[pos + 1];
            f8b[5] = buf[pos + 2];
            f8b[4] = buf[pos + 3];
            f8b[3] = buf[pos + 4];
            f8b[2] = buf[pos + 5];
            f8b[1] = buf[pos + 6];
            f8b[0] = buf[pos + 7];
            return f64[0];
        }

        /* istanbul ignore next */
        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;
        /* istanbul ignore next */
        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;

    // double: ieee754
    })(); else (function() {

        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0) {
                writeUint(0, buf, pos + off0);
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);
            } else if (isNaN(val)) {
                writeUint(0, buf, pos + off0);
                writeUint(2146959360, buf, pos + off1);
            } else if (val > 1.7976931348623157e+308) { // +-Infinity
                writeUint(0, buf, pos + off0);
                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);
            } else {
                var mantissa;
                if (val < 2.2250738585072014e-308) { // denormal
                    mantissa = val / 5e-324;
                    writeUint(mantissa >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);
                } else {
                    var exponent = Math.floor(Math.log(val) / Math.LN2);
                    if (exponent === 1024)
                        exponent = 1023;
                    mantissa = val * Math.pow(2, -exponent);
                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);
                }
            }
        }

        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);
        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);

        function readDouble_ieee754(readUint, off0, off1, buf, pos) {
            var lo = readUint(buf, pos + off0),
                hi = readUint(buf, pos + off1);
            var sign = (hi >> 31) * 2 + 1,
                exponent = hi >>> 20 & 2047,
                mantissa = 4294967296 * (hi & 1048575) + lo;
            return exponent === 2047
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 5e-324 * mantissa
                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);
        }

        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);
        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);

    })();

    return exports;
}

// uint helpers

function writeUintLE(val, buf, pos) {
    buf[pos    ] =  val        & 255;
    buf[pos + 1] =  val >>> 8  & 255;
    buf[pos + 2] =  val >>> 16 & 255;
    buf[pos + 3] =  val >>> 24;
}

function writeUintBE(val, buf, pos) {
    buf[pos    ] =  val >>> 24;
    buf[pos + 1] =  val >>> 16 & 255;
    buf[pos + 2] =  val >>> 8  & 255;
    buf[pos + 3] =  val        & 255;
}

function readUintLE(buf, pos) {
    return (buf[pos    ]
          | buf[pos + 1] << 8
          | buf[pos + 2] << 16
          | buf[pos + 3] << 24) >>> 0;
}

function readUintBE(buf, pos) {
    return (buf[pos    ] << 24
          | buf[pos + 1] << 16
          | buf[pos + 2] << 8
          | buf[pos + 3]) >>> 0;
}


/***/ }),

/***/ "./node_modules/@protobufjs/inquire/index.js":
/*!***************************************************!*\
  !*** ./node_modules/@protobufjs/inquire/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = inquire;

/**
 * Requires a module only if available.
 * @memberof util
 * @param {string} moduleName Module to require
 * @returns {?Object} Required module if available and not empty, otherwise `null`
 */
function inquire(moduleName) {
    try {
        var mod = eval("quire".replace(/^/,"re"))(moduleName); // eslint-disable-line no-eval
        if (mod && (mod.length || Object.keys(mod).length))
            return mod;
    } catch (e) {} // eslint-disable-line no-empty
    return null;
}


/***/ }),

/***/ "./node_modules/@protobufjs/pool/index.js":
/*!************************************************!*\
  !*** ./node_modules/@protobufjs/pool/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = pool;

/**
 * An allocator as used by {@link util.pool}.
 * @typedef PoolAllocator
 * @type {function}
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */

/**
 * A slicer as used by {@link util.pool}.
 * @typedef PoolSlicer
 * @type {function}
 * @param {number} start Start offset
 * @param {number} end End offset
 * @returns {Uint8Array} Buffer slice
 * @this {Uint8Array}
 */

/**
 * A general purpose buffer pool.
 * @memberof util
 * @function
 * @param {PoolAllocator} alloc Allocator
 * @param {PoolSlicer} slice Slicer
 * @param {number} [size=8192] Slab size
 * @returns {PoolAllocator} Pooled allocator
 */
function pool(alloc, slice, size) {
    var SIZE   = size || 8192;
    var MAX    = SIZE >>> 1;
    var slab   = null;
    var offset = SIZE;
    return function pool_alloc(size) {
        if (size < 1 || size > MAX)
            return alloc(size);
        if (offset + size > SIZE) {
            slab = alloc(SIZE);
            offset = 0;
        }
        var buf = slice.call(slab, offset, offset += size);
        if (offset & 7) // align to 32 bit
            offset = (offset | 7) + 1;
        return buf;
    };
}


/***/ }),

/***/ "./node_modules/@protobufjs/utf8/index.js":
/*!************************************************!*\
  !*** ./node_modules/@protobufjs/utf8/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal UTF8 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var utf8 = exports;

/**
 * Calculates the UTF8 byte length of a string.
 * @param {string} string String
 * @returns {number} Byte length
 */
utf8.length = function utf8_length(string) {
    var len = 0,
        c = 0;
    for (var i = 0; i < string.length; ++i) {
        c = string.charCodeAt(i);
        if (c < 128)
            len += 1;
        else if (c < 2048)
            len += 2;
        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {
            ++i;
            len += 4;
        } else
            len += 3;
    }
    return len;
};

/**
 * Reads UTF8 bytes as a string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} String read
 */
utf8.read = function utf8_read(buffer, start, end) {
    var len = end - start;
    if (len < 1)
        return "";
    var parts = null,
        chunk = [],
        i = 0, // char offset
        t;     // temporary
    while (start < end) {
        t = buffer[start++];
        if (t < 128)
            chunk[i++] = t;
        else if (t > 191 && t < 224)
            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;
        else if (t > 239 && t < 365) {
            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;
            chunk[i++] = 0xD800 + (t >> 10);
            chunk[i++] = 0xDC00 + (t & 1023);
        } else
            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

/**
 * Writes a string as UTF8 bytes.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Bytes written
 */
utf8.write = function utf8_write(string, buffer, offset) {
    var start = offset,
        c1, // character 1
        c2; // character 2
    for (var i = 0; i < string.length; ++i) {
        c1 = string.charCodeAt(i);
        if (c1 < 128) {
            buffer[offset++] = c1;
        } else if (c1 < 2048) {
            buffer[offset++] = c1 >> 6       | 192;
            buffer[offset++] = c1       & 63 | 128;
        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {
            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);
            ++i;
            buffer[offset++] = c1 >> 18      | 240;
            buffer[offset++] = c1 >> 12 & 63 | 128;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        } else {
            buffer[offset++] = c1 >> 12      | 224;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        }
    }
    return offset - start;
};


/***/ }),

/***/ "./node_modules/axios/index.js":
/*!*************************************!*\
  !*** ./node_modules/axios/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./lib/axios */ "./node_modules/axios/lib/axios.js");

/***/ }),

/***/ "./node_modules/axios/lib/adapters/xhr.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/adapters/xhr.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var settle = __webpack_require__(/*! ./../core/settle */ "./node_modules/axios/lib/core/settle.js");
var buildURL = __webpack_require__(/*! ./../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var buildFullPath = __webpack_require__(/*! ../core/buildFullPath */ "./node_modules/axios/lib/core/buildFullPath.js");
var parseHeaders = __webpack_require__(/*! ./../helpers/parseHeaders */ "./node_modules/axios/lib/helpers/parseHeaders.js");
var isURLSameOrigin = __webpack_require__(/*! ./../helpers/isURLSameOrigin */ "./node_modules/axios/lib/helpers/isURLSameOrigin.js");
var createError = __webpack_require__(/*! ../core/createError */ "./node_modules/axios/lib/core/createError.js");

module.exports = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    var requestData = config.data;
    var requestHeaders = config.headers;

    if (utils.isFormData(requestData)) {
      delete requestHeaders['Content-Type']; // Let the browser set it
    }

    var request = new XMLHttpRequest();

    // HTTP basic authentication
    if (config.auth) {
      var username = config.auth.username || '';
      var password = config.auth.password || '';
      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);
    }

    var fullPath = buildFullPath(config.baseURL, config.url);
    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);

    // Set the request timeout in MS
    request.timeout = config.timeout;

    // Listen for ready state
    request.onreadystatechange = function handleLoad() {
      if (!request || request.readyState !== 4) {
        return;
      }

      // The request errored out and we didn't get a response, this will be
      // handled by onerror instead
      // With one exception: request that using file: protocol, most browsers
      // will return status as 0 even though it's a successful request
      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {
        return;
      }

      // Prepare the response
      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;
      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;
      var response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config: config,
        request: request
      };

      settle(resolve, reject, response);

      // Clean up request
      request = null;
    };

    // Handle browser request cancellation (as opposed to a manual cancellation)
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }

      reject(createError('Request aborted', config, 'ECONNABORTED', request));

      // Clean up request
      request = null;
    };

    // Handle low level network errors
    request.onerror = function handleError() {
      // Real errors are hidden from us by the browser
      // onerror should only fire if it's a network error
      reject(createError('Network Error', config, null, request));

      // Clean up request
      request = null;
    };

    // Handle timeout
    request.ontimeout = function handleTimeout() {
      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';
      if (config.timeoutErrorMessage) {
        timeoutErrorMessage = config.timeoutErrorMessage;
      }
      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',
        request));

      // Clean up request
      request = null;
    };

    // Add xsrf header
    // This is only done if running in a standard browser environment.
    // Specifically not if we're in a web worker, or react-native.
    if (utils.isStandardBrowserEnv()) {
      var cookies = __webpack_require__(/*! ./../helpers/cookies */ "./node_modules/axios/lib/helpers/cookies.js");

      // Add xsrf header
      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?
        cookies.read(config.xsrfCookieName) :
        undefined;

      if (xsrfValue) {
        requestHeaders[config.xsrfHeaderName] = xsrfValue;
      }
    }

    // Add headers to the request
    if ('setRequestHeader' in request) {
      utils.forEach(requestHeaders, function setRequestHeader(val, key) {
        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {
          // Remove Content-Type if data is undefined
          delete requestHeaders[key];
        } else {
          // Otherwise add header to the request
          request.setRequestHeader(key, val);
        }
      });
    }

    // Add withCredentials to request if needed
    if (!utils.isUndefined(config.withCredentials)) {
      request.withCredentials = !!config.withCredentials;
    }

    // Add responseType to request if needed
    if (config.responseType) {
      try {
        request.responseType = config.responseType;
      } catch (e) {
        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.
        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.
        if (config.responseType !== 'json') {
          throw e;
        }
      }
    }

    // Handle progress if needed
    if (typeof config.onDownloadProgress === 'function') {
      request.addEventListener('progress', config.onDownloadProgress);
    }

    // Not all browsers support upload events
    if (typeof config.onUploadProgress === 'function' && request.upload) {
      request.upload.addEventListener('progress', config.onUploadProgress);
    }

    if (config.cancelToken) {
      // Handle cancellation
      config.cancelToken.promise.then(function onCanceled(cancel) {
        if (!request) {
          return;
        }

        request.abort();
        reject(cancel);
        // Clean up request
        request = null;
      });
    }

    if (requestData === undefined) {
      requestData = null;
    }

    // Send the request
    request.send(requestData);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/axios.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/axios.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");
var Axios = __webpack_require__(/*! ./core/Axios */ "./node_modules/axios/lib/core/Axios.js");
var mergeConfig = __webpack_require__(/*! ./core/mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");
var defaults = __webpack_require__(/*! ./defaults */ "./node_modules/axios/lib/defaults.js");

/**
 * Create an instance of Axios
 *
 * @param {Object} defaultConfig The default config for the instance
 * @return {Axios} A new instance of Axios
 */
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance = bind(Axios.prototype.request, context);

  // Copy axios.prototype to instance
  utils.extend(instance, Axios.prototype, context);

  // Copy context to instance
  utils.extend(instance, context);

  return instance;
}

// Create the default instance to be exported
var axios = createInstance(defaults);

// Expose Axios class to allow class inheritance
axios.Axios = Axios;

// Factory for creating new instances
axios.create = function create(instanceConfig) {
  return createInstance(mergeConfig(axios.defaults, instanceConfig));
};

// Expose Cancel & CancelToken
axios.Cancel = __webpack_require__(/*! ./cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");
axios.CancelToken = __webpack_require__(/*! ./cancel/CancelToken */ "./node_modules/axios/lib/cancel/CancelToken.js");
axios.isCancel = __webpack_require__(/*! ./cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");

// Expose all/spread
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = __webpack_require__(/*! ./helpers/spread */ "./node_modules/axios/lib/helpers/spread.js");

module.exports = axios;

// Allow use of default import syntax in TypeScript
module.exports.default = axios;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/Cancel.js":
/*!*************************************************!*\
  !*** ./node_modules/axios/lib/cancel/Cancel.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A `Cancel` is an object that is thrown when an operation is canceled.
 *
 * @class
 * @param {string=} message The message.
 */
function Cancel(message) {
  this.message = message;
}

Cancel.prototype.toString = function toString() {
  return 'Cancel' + (this.message ? ': ' + this.message : '');
};

Cancel.prototype.__CANCEL__ = true;

module.exports = Cancel;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/CancelToken.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/cancel/CancelToken.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Cancel = __webpack_require__(/*! ./Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

/**
 * A `CancelToken` is an object that can be used to request cancellation of an operation.
 *
 * @class
 * @param {Function} executor The executor function.
 */
function CancelToken(executor) {
  if (typeof executor !== 'function') {
    throw new TypeError('executor must be a function.');
  }

  var resolvePromise;
  this.promise = new Promise(function promiseExecutor(resolve) {
    resolvePromise = resolve;
  });

  var token = this;
  executor(function cancel(message) {
    if (token.reason) {
      // Cancellation has already been requested
      return;
    }

    token.reason = new Cancel(message);
    resolvePromise(token.reason);
  });
}

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
CancelToken.prototype.throwIfRequested = function throwIfRequested() {
  if (this.reason) {
    throw this.reason;
  }
};

/**
 * Returns an object that contains a new `CancelToken` and a function that, when called,
 * cancels the `CancelToken`.
 */
CancelToken.source = function source() {
  var cancel;
  var token = new CancelToken(function executor(c) {
    cancel = c;
  });
  return {
    token: token,
    cancel: cancel
  };
};

module.exports = CancelToken;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/isCancel.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/cancel/isCancel.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function isCancel(value) {
  return !!(value && value.__CANCEL__);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/Axios.js":
/*!**********************************************!*\
  !*** ./node_modules/axios/lib/core/Axios.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var buildURL = __webpack_require__(/*! ../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var InterceptorManager = __webpack_require__(/*! ./InterceptorManager */ "./node_modules/axios/lib/core/InterceptorManager.js");
var dispatchRequest = __webpack_require__(/*! ./dispatchRequest */ "./node_modules/axios/lib/core/dispatchRequest.js");
var mergeConfig = __webpack_require__(/*! ./mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");

/**
 * Create a new instance of Axios
 *
 * @param {Object} instanceConfig The default config for the instance
 */
function Axios(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}

/**
 * Dispatch a request
 *
 * @param {Object} config The config specific for this request (merged with this.defaults)
 */
Axios.prototype.request = function request(config) {
  /*eslint no-param-reassign:0*/
  // Allow for axios('example/url'[, config]) a la fetch API
  if (typeof config === 'string') {
    config = arguments[1] || {};
    config.url = arguments[0];
  } else {
    config = config || {};
  }

  config = mergeConfig(this.defaults, config);

  // Set config.method
  if (config.method) {
    config.method = config.method.toLowerCase();
  } else if (this.defaults.method) {
    config.method = this.defaults.method.toLowerCase();
  } else {
    config.method = 'get';
  }

  // Hook up interceptors middleware
  var chain = [dispatchRequest, undefined];
  var promise = Promise.resolve(config);

  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    chain.unshift(interceptor.fulfilled, interceptor.rejected);
  });

  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    chain.push(interceptor.fulfilled, interceptor.rejected);
  });

  while (chain.length) {
    promise = promise.then(chain.shift(), chain.shift());
  }

  return promise;
};

Axios.prototype.getUri = function getUri(config) {
  config = mergeConfig(this.defaults, config);
  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, '');
};

// Provide aliases for supported request methods
utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url
    }));
  };
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, data, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url,
      data: data
    }));
  };
});

module.exports = Axios;


/***/ }),

/***/ "./node_modules/axios/lib/core/InterceptorManager.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/core/InterceptorManager.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function InterceptorManager() {
  this.handlers = [];
}

/**
 * Add a new interceptor to the stack
 *
 * @param {Function} fulfilled The function to handle `then` for a `Promise`
 * @param {Function} rejected The function to handle `reject` for a `Promise`
 *
 * @return {Number} An ID used to remove interceptor later
 */
InterceptorManager.prototype.use = function use(fulfilled, rejected) {
  this.handlers.push({
    fulfilled: fulfilled,
    rejected: rejected
  });
  return this.handlers.length - 1;
};

/**
 * Remove an interceptor from the stack
 *
 * @param {Number} id The ID that was returned by `use`
 */
InterceptorManager.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};

/**
 * Iterate over all the registered interceptors
 *
 * This method is particularly useful for skipping over any
 * interceptors that may have become `null` calling `eject`.
 *
 * @param {Function} fn The function to call for each interceptor
 */
InterceptorManager.prototype.forEach = function forEach(fn) {
  utils.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};

module.exports = InterceptorManager;


/***/ }),

/***/ "./node_modules/axios/lib/core/buildFullPath.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/buildFullPath.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isAbsoluteURL = __webpack_require__(/*! ../helpers/isAbsoluteURL */ "./node_modules/axios/lib/helpers/isAbsoluteURL.js");
var combineURLs = __webpack_require__(/*! ../helpers/combineURLs */ "./node_modules/axios/lib/helpers/combineURLs.js");

/**
 * Creates a new URL by combining the baseURL with the requestedURL,
 * only when the requestedURL is not already an absolute URL.
 * If the requestURL is absolute, this function returns the requestedURL untouched.
 *
 * @param {string} baseURL The base URL
 * @param {string} requestedURL Absolute or relative URL to combine
 * @returns {string} The combined full path
 */
module.exports = function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/createError.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/createError.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var enhanceError = __webpack_require__(/*! ./enhanceError */ "./node_modules/axios/lib/core/enhanceError.js");

/**
 * Create an Error with the specified message, config, error code, request and response.
 *
 * @param {string} message The error message.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The created error.
 */
module.exports = function createError(message, config, code, request, response) {
  var error = new Error(message);
  return enhanceError(error, config, code, request, response);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/dispatchRequest.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/core/dispatchRequest.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var transformData = __webpack_require__(/*! ./transformData */ "./node_modules/axios/lib/core/transformData.js");
var isCancel = __webpack_require__(/*! ../cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");
var defaults = __webpack_require__(/*! ../defaults */ "./node_modules/axios/lib/defaults.js");

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
}

/**
 * Dispatch a request to the server using the configured adapter.
 *
 * @param {object} config The config that is to be used for the request
 * @returns {Promise} The Promise to be fulfilled
 */
module.exports = function dispatchRequest(config) {
  throwIfCancellationRequested(config);

  // Ensure headers exist
  config.headers = config.headers || {};

  // Transform request data
  config.data = transformData(
    config.data,
    config.headers,
    config.transformRequest
  );

  // Flatten headers
  config.headers = utils.merge(
    config.headers.common || {},
    config.headers[config.method] || {},
    config.headers
  );

  utils.forEach(
    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],
    function cleanHeaderConfig(method) {
      delete config.headers[method];
    }
  );

  var adapter = config.adapter || defaults.adapter;

  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);

    // Transform response data
    response.data = transformData(
      response.data,
      response.headers,
      config.transformResponse
    );

    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);

      // Transform response data
      if (reason && reason.response) {
        reason.response.data = transformData(
          reason.response.data,
          reason.response.headers,
          config.transformResponse
        );
      }
    }

    return Promise.reject(reason);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/core/enhanceError.js":
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/core/enhanceError.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Update an Error with the specified config, error code, and response.
 *
 * @param {Error} error The error to update.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The error.
 */
module.exports = function enhanceError(error, config, code, request, response) {
  error.config = config;
  if (code) {
    error.code = code;
  }

  error.request = request;
  error.response = response;
  error.isAxiosError = true;

  error.toJSON = function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code
    };
  };
  return error;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/mergeConfig.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/mergeConfig.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Config-specific merge-function which creates a new config-object
 * by merging two configuration objects together.
 *
 * @param {Object} config1
 * @param {Object} config2
 * @returns {Object} New object resulting from merging config2 to config1
 */
module.exports = function mergeConfig(config1, config2) {
  // eslint-disable-next-line no-param-reassign
  config2 = config2 || {};
  var config = {};

  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];
  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];
  var defaultToConfig2Keys = [
    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',
    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',
    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',
    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',
    'httpsAgent', 'cancelToken', 'socketPath'
  ];

  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    }
  });

  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {
    if (utils.isObject(config2[prop])) {
      config[prop] = utils.deepMerge(config1[prop], config2[prop]);
    } else if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (utils.isObject(config1[prop])) {
      config[prop] = utils.deepMerge(config1[prop]);
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  var axiosKeys = valueFromConfig2Keys
    .concat(mergeDeepPropertiesKeys)
    .concat(defaultToConfig2Keys);

  var otherKeys = Object
    .keys(config2)
    .filter(function filterAxiosKeys(key) {
      return axiosKeys.indexOf(key) === -1;
    });

  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  return config;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/settle.js":
/*!***********************************************!*\
  !*** ./node_modules/axios/lib/core/settle.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var createError = __webpack_require__(/*! ./createError */ "./node_modules/axios/lib/core/createError.js");

/**
 * Resolve or reject a Promise based on response status.
 *
 * @param {Function} resolve A function that resolves the promise.
 * @param {Function} reject A function that rejects the promise.
 * @param {object} response The response.
 */
module.exports = function settle(resolve, reject, response) {
  var validateStatus = response.config.validateStatus;
  if (!validateStatus || validateStatus(response.status)) {
    resolve(response);
  } else {
    reject(createError(
      'Request failed with status code ' + response.status,
      response.config,
      null,
      response.request,
      response
    ));
  }
};


/***/ }),

/***/ "./node_modules/axios/lib/core/transformData.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/transformData.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Transform the data for a request or a response
 *
 * @param {Object|String} data The data to be transformed
 * @param {Array} headers The headers for the request or response
 * @param {Array|Function} fns A single function or Array of functions
 * @returns {*} The resulting transformed data
 */
module.exports = function transformData(data, headers, fns) {
  /*eslint no-param-reassign:0*/
  utils.forEach(fns, function transform(fn) {
    data = fn(data, headers);
  });

  return data;
};


/***/ }),

/***/ "./node_modules/axios/lib/defaults.js":
/*!********************************************!*\
  !*** ./node_modules/axios/lib/defaults.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var normalizeHeaderName = __webpack_require__(/*! ./helpers/normalizeHeaderName */ "./node_modules/axios/lib/helpers/normalizeHeaderName.js");

var DEFAULT_CONTENT_TYPE = {
  'Content-Type': 'application/x-www-form-urlencoded'
};

function setContentTypeIfUnset(headers, value) {
  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {
    headers['Content-Type'] = value;
  }
}

function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== 'undefined') {
    // For browsers use XHR adapter
    adapter = __webpack_require__(/*! ./adapters/xhr */ "./node_modules/axios/lib/adapters/xhr.js");
  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    // For node use HTTP adapter
    adapter = __webpack_require__(/*! ./adapters/http */ "./node_modules/axios/lib/adapters/xhr.js");
  }
  return adapter;
}

var defaults = {
  adapter: getDefaultAdapter(),

  transformRequest: [function transformRequest(data, headers) {
    normalizeHeaderName(headers, 'Accept');
    normalizeHeaderName(headers, 'Content-Type');
    if (utils.isFormData(data) ||
      utils.isArrayBuffer(data) ||
      utils.isBuffer(data) ||
      utils.isStream(data) ||
      utils.isFile(data) ||
      utils.isBlob(data)
    ) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');
      return data.toString();
    }
    if (utils.isObject(data)) {
      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');
      return JSON.stringify(data);
    }
    return data;
  }],

  transformResponse: [function transformResponse(data) {
    /*eslint no-param-reassign:0*/
    if (typeof data === 'string') {
      try {
        data = JSON.parse(data);
      } catch (e) { /* Ignore */ }
    }
    return data;
  }],

  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,

  xsrfCookieName: 'XSRF-TOKEN',
  xsrfHeaderName: 'X-XSRF-TOKEN',

  maxContentLength: -1,

  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  }
};

defaults.headers = {
  common: {
    'Accept': 'application/json, text/plain, */*'
  }
};

utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});

module.exports = defaults;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node-libs-browser/node_modules/process/browser.js */ "./node_modules/node-libs-browser/node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/axios/lib/helpers/bind.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/helpers/bind.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function bind(fn, thisArg) {
  return function wrap() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/buildURL.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/buildURL.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function encode(val) {
  return encodeURIComponent(val).
    replace(/%40/gi, '@').
    replace(/%3A/gi, ':').
    replace(/%24/g, '$').
    replace(/%2C/gi, ',').
    replace(/%20/g, '+').
    replace(/%5B/gi, '[').
    replace(/%5D/gi, ']');
}

/**
 * Build a URL by appending params to the end
 *
 * @param {string} url The base of the url (e.g., http://www.google.com)
 * @param {object} [params] The params to be appended
 * @returns {string} The formatted url
 */
module.exports = function buildURL(url, params, paramsSerializer) {
  /*eslint no-param-reassign:0*/
  if (!params) {
    return url;
  }

  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];

    utils.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === 'undefined') {
        return;
      }

      if (utils.isArray(val)) {
        key = key + '[]';
      } else {
        val = [val];
      }

      utils.forEach(val, function parseValue(v) {
        if (utils.isDate(v)) {
          v = v.toISOString();
        } else if (utils.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode(key) + '=' + encode(v));
      });
    });

    serializedParams = parts.join('&');
  }

  if (serializedParams) {
    var hashmarkIndex = url.indexOf('#');
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }

    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
  }

  return url;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/combineURLs.js":
/*!*******************************************************!*\
  !*** ./node_modules/axios/lib/helpers/combineURLs.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Creates a new URL by combining the specified URLs
 *
 * @param {string} baseURL The base URL
 * @param {string} relativeURL The relative URL
 * @returns {string} The combined URL
 */
module.exports = function combineURLs(baseURL, relativeURL) {
  return relativeURL
    ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '')
    : baseURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/cookies.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/helpers/cookies.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs support document.cookie
    (function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + '=' + encodeURIComponent(value));

          if (utils.isNumber(expires)) {
            cookie.push('expires=' + new Date(expires).toGMTString());
          }

          if (utils.isString(path)) {
            cookie.push('path=' + path);
          }

          if (utils.isString(domain)) {
            cookie.push('domain=' + domain);
          }

          if (secure === true) {
            cookie.push('secure');
          }

          document.cookie = cookie.join('; ');
        },

        read: function read(name) {
          var match = document.cookie.match(new RegExp('(^|;\\s*)(' + name + ')=([^;]*)'));
          return (match ? decodeURIComponent(match[3]) : null);
        },

        remove: function remove(name) {
          this.write(name, '', Date.now() - 86400000);
        }
      };
    })() :

  // Non standard browser env (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return {
        write: function write() {},
        read: function read() { return null; },
        remove: function remove() {}
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isAbsoluteURL.js":
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Determines whether the specified URL is absolute
 *
 * @param {string} url The URL to test
 * @returns {boolean} True if the specified URL is absolute, otherwise false
 */
module.exports = function isAbsoluteURL(url) {
  // A URL is considered absolute if it begins with "<scheme>://" or "//" (protocol-relative URL).
  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed
  // by any combination of letters, digits, plus, period, or hyphen.
  return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isURLSameOrigin.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
    (function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement('a');
      var originURL;

      /**
    * Parse a URL to discover it's components
    *
    * @param {String} url The URL to be parsed
    * @returns {Object}
    */
      function resolveURL(url) {
        var href = url;

        if (msie) {
        // IE needs attribute set twice to normalize properties
          urlParsingNode.setAttribute('href', href);
          href = urlParsingNode.href;
        }

        urlParsingNode.setAttribute('href', href);

        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, '') : '',
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?
            urlParsingNode.pathname :
            '/' + urlParsingNode.pathname
        };
      }

      originURL = resolveURL(window.location.href);

      /**
    * Determine if a URL shares the same origin as the current location
    *
    * @param {String} requestURL The URL to test
    * @returns {boolean} True if URL shares the same origin, otherwise false
    */
      return function isURLSameOrigin(requestURL) {
        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;
        return (parsed.protocol === originURL.protocol &&
            parsed.host === originURL.host);
      };
    })() :

  // Non standard browser envs (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/normalizeHeaderName.js":
/*!***************************************************************!*\
  !*** ./node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

module.exports = function normalizeHeaderName(headers, normalizedName) {
  utils.forEach(headers, function processHeader(value, name) {
    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name];
    }
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/parseHeaders.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/parseHeaders.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

// Headers whose duplicates are ignored by node
// c.f. https://nodejs.org/api/http.html#http_message_headers
var ignoreDuplicateOf = [
  'age', 'authorization', 'content-length', 'content-type', 'etag',
  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',
  'last-modified', 'location', 'max-forwards', 'proxy-authorization',
  'referer', 'retry-after', 'user-agent'
];

/**
 * Parse headers into an object
 *
 * ```
 * Date: Wed, 27 Aug 2014 08:58:49 GMT
 * Content-Type: application/json
 * Connection: keep-alive
 * Transfer-Encoding: chunked
 * ```
 *
 * @param {String} headers Headers needing to be parsed
 * @returns {Object} Headers parsed into an object
 */
module.exports = function parseHeaders(headers) {
  var parsed = {};
  var key;
  var val;
  var i;

  if (!headers) { return parsed; }

  utils.forEach(headers.split('\n'), function parser(line) {
    i = line.indexOf(':');
    key = utils.trim(line.substr(0, i)).toLowerCase();
    val = utils.trim(line.substr(i + 1));

    if (key) {
      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
        return;
      }
      if (key === 'set-cookie') {
        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
      } else {
        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;
      }
    }
  });

  return parsed;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/spread.js":
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/helpers/spread.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Syntactic sugar for invoking a function and expanding an array for arguments.
 *
 * Common use case would be to use `Function.prototype.apply`.
 *
 *  ```js
 *  function f(x, y, z) {}
 *  var args = [1, 2, 3];
 *  f.apply(null, args);
 *  ```
 *
 * With `spread` this example can be re-written.
 *
 *  ```js
 *  spread(function(x, y, z) {})([1, 2, 3]);
 *  ```
 *
 * @param {Function} callback
 * @returns {Function}
 */
module.exports = function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/utils.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/utils.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");

/*global toString:true*/

// utils is a library of generic helper functions non-specific to axios

var toString = Object.prototype.toString;

/**
 * Determine if a value is an Array
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Array, otherwise false
 */
function isArray(val) {
  return toString.call(val) === '[object Array]';
}

/**
 * Determine if a value is undefined
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if the value is undefined, otherwise false
 */
function isUndefined(val) {
  return typeof val === 'undefined';
}

/**
 * Determine if a value is a Buffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Buffer, otherwise false
 */
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)
    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);
}

/**
 * Determine if a value is an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an ArrayBuffer, otherwise false
 */
function isArrayBuffer(val) {
  return toString.call(val) === '[object ArrayBuffer]';
}

/**
 * Determine if a value is a FormData
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an FormData, otherwise false
 */
function isFormData(val) {
  return (typeof FormData !== 'undefined') && (val instanceof FormData);
}

/**
 * Determine if a value is a view on an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
 */
function isArrayBufferView(val) {
  var result;
  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {
    result = ArrayBuffer.isView(val);
  } else {
    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);
  }
  return result;
}

/**
 * Determine if a value is a String
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a String, otherwise false
 */
function isString(val) {
  return typeof val === 'string';
}

/**
 * Determine if a value is a Number
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Number, otherwise false
 */
function isNumber(val) {
  return typeof val === 'number';
}

/**
 * Determine if a value is an Object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Object, otherwise false
 */
function isObject(val) {
  return val !== null && typeof val === 'object';
}

/**
 * Determine if a value is a Date
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Date, otherwise false
 */
function isDate(val) {
  return toString.call(val) === '[object Date]';
}

/**
 * Determine if a value is a File
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a File, otherwise false
 */
function isFile(val) {
  return toString.call(val) === '[object File]';
}

/**
 * Determine if a value is a Blob
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Blob, otherwise false
 */
function isBlob(val) {
  return toString.call(val) === '[object Blob]';
}

/**
 * Determine if a value is a Function
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Function, otherwise false
 */
function isFunction(val) {
  return toString.call(val) === '[object Function]';
}

/**
 * Determine if a value is a Stream
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Stream, otherwise false
 */
function isStream(val) {
  return isObject(val) && isFunction(val.pipe);
}

/**
 * Determine if a value is a URLSearchParams object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a URLSearchParams object, otherwise false
 */
function isURLSearchParams(val) {
  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;
}

/**
 * Trim excess whitespace off the beginning and end of a string
 *
 * @param {String} str The String to trim
 * @returns {String} The String freed of excess whitespace
 */
function trim(str) {
  return str.replace(/^\s*/, '').replace(/\s*$/, '');
}

/**
 * Determine if we're running in a standard browser environment
 *
 * This allows axios to run in a web worker, and react-native.
 * Both environments support XMLHttpRequest, but not fully standard globals.
 *
 * web workers:
 *  typeof window -> undefined
 *  typeof document -> undefined
 *
 * react-native:
 *  navigator.product -> 'ReactNative'
 * nativescript
 *  navigator.product -> 'NativeScript' or 'NS'
 */
function isStandardBrowserEnv() {
  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||
                                           navigator.product === 'NativeScript' ||
                                           navigator.product === 'NS')) {
    return false;
  }
  return (
    typeof window !== 'undefined' &&
    typeof document !== 'undefined'
  );
}

/**
 * Iterate over an Array or an Object invoking a function for each item.
 *
 * If `obj` is an Array callback will be called passing
 * the value, index, and complete array for each item.
 *
 * If 'obj' is an Object callback will be called passing
 * the value, key, and complete object for each property.
 *
 * @param {Object|Array} obj The object to iterate
 * @param {Function} fn The callback to invoke for each item
 */
function forEach(obj, fn) {
  // Don't bother if no value provided
  if (obj === null || typeof obj === 'undefined') {
    return;
  }

  // Force an array if not already something iterable
  if (typeof obj !== 'object') {
    /*eslint no-param-reassign:0*/
    obj = [obj];
  }

  if (isArray(obj)) {
    // Iterate over array values
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    // Iterate over object keys
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}

/**
 * Accepts varargs expecting each argument to be an object, then
 * immutably merges the properties of each object and returns result.
 *
 * When multiple objects contain the same key the later object in
 * the arguments list will take precedence.
 *
 * Example:
 *
 * ```js
 * var result = merge({foo: 123}, {foo: 456});
 * console.log(result.foo); // outputs 456
 * ```
 *
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function merge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = merge(result[key], val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Function equal to merge with the difference being that no reference
 * to original objects is kept.
 *
 * @see merge
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function deepMerge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = deepMerge(result[key], val);
    } else if (typeof val === 'object') {
      result[key] = deepMerge({}, val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Extends object a by mutably adding to it the properties of object b.
 *
 * @param {Object} a The object to be extended
 * @param {Object} b The object to copy properties from
 * @param {Object} thisArg The object to bind function to
 * @return {Object} The resulting value of object a
 */
function extend(a, b, thisArg) {
  forEach(b, function assignValue(val, key) {
    if (thisArg && typeof val === 'function') {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}

module.exports = {
  isArray: isArray,
  isArrayBuffer: isArrayBuffer,
  isBuffer: isBuffer,
  isFormData: isFormData,
  isArrayBufferView: isArrayBufferView,
  isString: isString,
  isNumber: isNumber,
  isObject: isObject,
  isUndefined: isUndefined,
  isDate: isDate,
  isFile: isFile,
  isBlob: isBlob,
  isFunction: isFunction,
  isStream: isStream,
  isURLSearchParams: isURLSearchParams,
  isStandardBrowserEnv: isStandardBrowserEnv,
  forEach: forEach,
  merge: merge,
  deepMerge: deepMerge,
  extend: extend,
  trim: trim
};


/***/ }),

/***/ "./node_modules/charenc/charenc.js":
/*!*****************************************!*\
  !*** ./node_modules/charenc/charenc.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var charenc = {
  // UTF-8 encoding
  utf8: {
    // Convert a string to a byte array
    stringToBytes: function(str) {
      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));
    },

    // Convert a byte array to a string
    bytesToString: function(bytes) {
      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));
    }
  },

  // Binary encoding
  bin: {
    // Convert a string to a byte array
    stringToBytes: function(str) {
      for (var bytes = [], i = 0; i < str.length; i++)
        bytes.push(str.charCodeAt(i) & 0xFF);
      return bytes;
    },

    // Convert a byte array to a string
    bytesToString: function(bytes) {
      for (var str = [], i = 0; i < bytes.length; i++)
        str.push(String.fromCharCode(bytes[i]));
      return str.join('');
    }
  }
};

module.exports = charenc;


/***/ }),

/***/ "./node_modules/core-js/internals/a-callable.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/a-callable.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");

var TypeError = global.TypeError;

// `Assert: IsCallable(argument) is true`
module.exports = function (argument) {
  if (isCallable(argument)) return argument;
  throw TypeError(tryToString(argument) + ' is not a function');
};


/***/ }),

/***/ "./node_modules/core-js/internals/a-constructor.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/a-constructor.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");

var TypeError = global.TypeError;

// `Assert: IsConstructor(argument) is true`
module.exports = function (argument) {
  if (isConstructor(argument)) return argument;
  throw TypeError(tryToString(argument) + ' is not a constructor');
};


/***/ }),

/***/ "./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var String = global.String;
var TypeError = global.TypeError;

module.exports = function (argument) {
  if (typeof argument == 'object' || isCallable(argument)) return argument;
  throw TypeError("Can't set " + String(argument) + ' as a prototype');
};


/***/ }),

/***/ "./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "./node_modules/core-js/internals/advance-string-index.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/advance-string-index.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").charAt;

// `AdvanceStringIndex` abstract operation
// https://tc39.es/ecma262/#sec-advancestringindex
module.exports = function (S, index, unicode) {
  return index + (unicode ? charAt(S, index).length : 1);
};


/***/ }),

/***/ "./node_modules/core-js/internals/an-instance.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/an-instance.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");

var TypeError = global.TypeError;

module.exports = function (it, Prototype) {
  if (isPrototypeOf(Prototype, it)) return it;
  throw TypeError('Incorrect invocation');
};


/***/ }),

/***/ "./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/an-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var String = global.String;
var TypeError = global.TypeError;

// `Assert: Type(argument) is Object`
module.exports = function (argument) {
  if (isObject(argument)) return argument;
  throw TypeError(String(argument) + ' is not an object');
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-buffer-native.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/array-buffer-native.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// eslint-disable-next-line es/no-typed-arrays -- safe
module.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';


/***/ }),

/***/ "./node_modules/core-js/internals/array-buffer-non-extensible.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/array-buffer-non-extensible.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = fails(function () {
  if (typeof ArrayBuffer == 'function') {
    var buffer = new ArrayBuffer(8);
    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe
    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });
  }
});


/***/ }),

/***/ "./node_modules/core-js/internals/array-buffer-view-core.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/array-buffer-view-core.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_ARRAY_BUFFER = __webpack_require__(/*! ../internals/array-buffer-native */ "./node_modules/core-js/internals/array-buffer-native.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");

var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = global.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var TypeError = global.TypeError;

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
var TYPED_ARRAY_CONSTRUCTOR = uid('TYPED_ARRAY_CONSTRUCTOR');
// Fixing native typed arrays in Opera Presto crashes the browser, see #595
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQUIRED = false;
var NAME, Constructor, Prototype;

var TypedArrayConstructorsList = {
  Int8Array: 1,
  Uint8Array: 1,
  Uint8ClampedArray: 1,
  Int16Array: 2,
  Uint16Array: 2,
  Int32Array: 4,
  Uint32Array: 4,
  Float32Array: 4,
  Float64Array: 8
};

var BigIntArrayConstructorsList = {
  BigInt64Array: 8,
  BigUint64Array: 8
};

var isView = function isView(it) {
  if (!isObject(it)) return false;
  var klass = classof(it);
  return klass === 'DataView'
    || hasOwn(TypedArrayConstructorsList, klass)
    || hasOwn(BigIntArrayConstructorsList, klass);
};

var isTypedArray = function (it) {
  if (!isObject(it)) return false;
  var klass = classof(it);
  return hasOwn(TypedArrayConstructorsList, klass)
    || hasOwn(BigIntArrayConstructorsList, klass);
};

var aTypedArray = function (it) {
  if (isTypedArray(it)) return it;
  throw TypeError('Target is not a typed array');
};

var aTypedArrayConstructor = function (C) {
  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;
  throw TypeError(tryToString(C) + ' is not a typed array constructor');
};

var exportTypedArrayMethod = function (KEY, property, forced, options) {
  if (!DESCRIPTORS) return;
  if (forced) for (var ARRAY in TypedArrayConstructorsList) {
    var TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {
      delete TypedArrayConstructor.prototype[KEY];
    } catch (error) {
      // old WebKit bug - some methods are non-configurable
      try {
        TypedArrayConstructor.prototype[KEY] = property;
      } catch (error2) { /* empty */ }
    }
  }
  if (!TypedArrayPrototype[KEY] || forced) {
    redefine(TypedArrayPrototype, KEY, forced ? property
      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);
  }
};

var exportTypedArrayStaticMethod = function (KEY, property, forced) {
  var ARRAY, TypedArrayConstructor;
  if (!DESCRIPTORS) return;
  if (setPrototypeOf) {
    if (forced) for (ARRAY in TypedArrayConstructorsList) {
      TypedArrayConstructor = global[ARRAY];
      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {
        delete TypedArrayConstructor[KEY];
      } catch (error) { /* empty */ }
    }
    if (!TypedArray[KEY] || forced) {
      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable
      try {
        return redefine(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);
      } catch (error) { /* empty */ }
    } else return;
  }
  for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
      redefine(TypedArrayConstructor, KEY, property);
    }
  }
};

for (NAME in TypedArrayConstructorsList) {
  Constructor = global[NAME];
  Prototype = Constructor && Constructor.prototype;
  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);
  else NATIVE_ARRAY_BUFFER_VIEWS = false;
}

for (NAME in BigIntArrayConstructorsList) {
  Constructor = global[NAME];
  Prototype = Constructor && Constructor.prototype;
  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);
}

// WebKit bug - typed arrays constructors prototype is Object.prototype
if (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {
  // eslint-disable-next-line no-shadow -- safe
  TypedArray = function TypedArray() {
    throw TypeError('Incorrect invocation');
  };
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);
  }
}

if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
  TypedArrayPrototype = TypedArray.prototype;
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);
  }
}

// WebKit bug - one more object in Uint8ClampedArray prototype chain
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}

if (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {
  TYPED_ARRAY_TAG_REQUIRED = true;
  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {
    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
  } });
  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {
    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);
  }
}

module.exports = {
  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
  TYPED_ARRAY_CONSTRUCTOR: TYPED_ARRAY_CONSTRUCTOR,
  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,
  aTypedArray: aTypedArray,
  aTypedArrayConstructor: aTypedArrayConstructor,
  exportTypedArrayMethod: exportTypedArrayMethod,
  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
  isView: isView,
  isTypedArray: isTypedArray,
  TypedArray: TypedArray,
  TypedArrayPrototype: TypedArrayPrototype
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-buffer.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/array-buffer.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var NATIVE_ARRAY_BUFFER = __webpack_require__(/*! ../internals/array-buffer-native */ "./node_modules/core-js/internals/array-buffer-native.js");
var FunctionName = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var redefineAll = __webpack_require__(/*! ../internals/redefine-all */ "./node_modules/core-js/internals/redefine-all.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toIndex = __webpack_require__(/*! ../internals/to-index */ "./node_modules/core-js/internals/to-index.js");
var IEEE754 = __webpack_require__(/*! ../internals/ieee754 */ "./node_modules/core-js/internals/ieee754.js");
var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var getOwnPropertyNames = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js").f;
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var arrayFill = __webpack_require__(/*! ../internals/array-fill */ "./node_modules/core-js/internals/array-fill.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice-simple */ "./node_modules/core-js/internals/array-slice-simple.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length';
var WRONG_INDEX = 'Wrong index';
var NativeArrayBuffer = global[ARRAY_BUFFER];
var $ArrayBuffer = NativeArrayBuffer;
var ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];
var $DataView = global[DATA_VIEW];
var DataViewPrototype = $DataView && $DataView[PROTOTYPE];
var ObjectPrototype = Object.prototype;
var Array = global.Array;
var RangeError = global.RangeError;
var fill = uncurryThis(arrayFill);
var reverse = uncurryThis([].reverse);

var packIEEE754 = IEEE754.pack;
var unpackIEEE754 = IEEE754.unpack;

var packInt8 = function (number) {
  return [number & 0xFF];
};

var packInt16 = function (number) {
  return [number & 0xFF, number >> 8 & 0xFF];
};

var packInt32 = function (number) {
  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];
};

var unpackInt32 = function (buffer) {
  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];
};

var packFloat32 = function (number) {
  return packIEEE754(number, 23, 4);
};

var packFloat64 = function (number) {
  return packIEEE754(number, 52, 8);
};

var addGetter = function (Constructor, key) {
  defineProperty(Constructor[PROTOTYPE], key, { get: function () { return getInternalState(this)[key]; } });
};

var get = function (view, count, index, isLittleEndian) {
  var intIndex = toIndex(index);
  var store = getInternalState(view);
  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);
  var bytes = getInternalState(store.buffer).bytes;
  var start = intIndex + store.byteOffset;
  var pack = arraySlice(bytes, start, start + count);
  return isLittleEndian ? pack : reverse(pack);
};

var set = function (view, count, index, conversion, value, isLittleEndian) {
  var intIndex = toIndex(index);
  var store = getInternalState(view);
  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);
  var bytes = getInternalState(store.buffer).bytes;
  var start = intIndex + store.byteOffset;
  var pack = conversion(+value);
  for (var i = 0; i < count; i++) bytes[start + i] = pack[isLittleEndian ? i : count - i - 1];
};

if (!NATIVE_ARRAY_BUFFER) {
  $ArrayBuffer = function ArrayBuffer(length) {
    anInstance(this, ArrayBufferPrototype);
    var byteLength = toIndex(length);
    setInternalState(this, {
      bytes: fill(Array(byteLength), 0),
      byteLength: byteLength
    });
    if (!DESCRIPTORS) this.byteLength = byteLength;
  };

  ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];

  $DataView = function DataView(buffer, byteOffset, byteLength) {
    anInstance(this, DataViewPrototype);
    anInstance(buffer, ArrayBufferPrototype);
    var bufferLength = getInternalState(buffer).byteLength;
    var offset = toIntegerOrInfinity(byteOffset);
    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset');
    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);
    setInternalState(this, {
      buffer: buffer,
      byteLength: byteLength,
      byteOffset: offset
    });
    if (!DESCRIPTORS) {
      this.buffer = buffer;
      this.byteLength = byteLength;
      this.byteOffset = offset;
    }
  };

  DataViewPrototype = $DataView[PROTOTYPE];

  if (DESCRIPTORS) {
    addGetter($ArrayBuffer, 'byteLength');
    addGetter($DataView, 'buffer');
    addGetter($DataView, 'byteLength');
    addGetter($DataView, 'byteOffset');
  }

  redefineAll(DataViewPrototype, {
    getInt8: function getInt8(byteOffset) {
      return get(this, 1, byteOffset)[0] << 24 >> 24;
    },
    getUint8: function getUint8(byteOffset) {
      return get(this, 1, byteOffset)[0];
    },
    getInt16: function getInt16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);
      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
    },
    getUint16: function getUint16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);
      return bytes[1] << 8 | bytes[0];
    },
    getInt32: function getInt32(byteOffset /* , littleEndian */) {
      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined));
    },
    getUint32: function getUint32(byteOffset /* , littleEndian */) {
      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined)) >>> 0;
    },
    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 23);
    },
    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 52);
    },
    setInt8: function setInt8(byteOffset, value) {
      set(this, 1, byteOffset, packInt8, value);
    },
    setUint8: function setUint8(byteOffset, value) {
      set(this, 1, byteOffset, packInt8, value);
    },
    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {
      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : undefined);
    }
  });
} else {
  var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;
  /* eslint-disable no-new -- required for testing */
  if (!fails(function () {
    NativeArrayBuffer(1);
  }) || !fails(function () {
    new NativeArrayBuffer(-1);
  }) || fails(function () {
    new NativeArrayBuffer();
    new NativeArrayBuffer(1.5);
    new NativeArrayBuffer(NaN);
    return INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;
  })) {
  /* eslint-enable no-new -- required for testing */
    $ArrayBuffer = function ArrayBuffer(length) {
      anInstance(this, ArrayBufferPrototype);
      return new NativeArrayBuffer(toIndex(length));
    };

    $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;

    for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {
      if (!((key = keys[j++]) in $ArrayBuffer)) {
        createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);
      }
    }

    ArrayBufferPrototype.constructor = $ArrayBuffer;
  } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {
    createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);
  }

  // WebKit bug - the same parent prototype for typed arrays and data view
  if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {
    setPrototypeOf(DataViewPrototype, ObjectPrototype);
  }

  // iOS Safari 7.x bug
  var testView = new $DataView(new $ArrayBuffer(2));
  var $setInt8 = uncurryThis(DataViewPrototype.setInt8);
  testView.setInt8(0, 2147483648);
  testView.setInt8(1, 2147483649);
  if (testView.getInt8(0) || !testView.getInt8(1)) redefineAll(DataViewPrototype, {
    setInt8: function setInt8(byteOffset, value) {
      $setInt8(this, byteOffset, value << 24 >> 24);
    },
    setUint8: function setUint8(byteOffset, value) {
      $setInt8(this, byteOffset, value << 24 >> 24);
    }
  }, { unsafe: true });
}

setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);

module.exports = {
  ArrayBuffer: $ArrayBuffer,
  DataView: $DataView
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-copy-within.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/array-copy-within.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

var min = Math.min;

// `Array.prototype.copyWithin` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.copywithin
// eslint-disable-next-line es/no-array-prototype-copywithin -- safe
module.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var to = toAbsoluteIndex(target, len);
  var from = toAbsoluteIndex(start, len);
  var end = arguments.length > 2 ? arguments[2] : undefined;
  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
  var inc = 1;
  if (from < to && to < from + count) {
    inc = -1;
    from += count - 1;
    to += count - 1;
  }
  while (count-- > 0) {
    if (from in O) O[to] = O[from];
    else delete O[to];
    to += inc;
    from += inc;
  } return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-fill.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/array-fill.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

// `Array.prototype.fill` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.fill
module.exports = function fill(value /* , start = 0, end = @length */) {
  var O = toObject(this);
  var length = lengthOfArrayLike(O);
  var argumentsLength = arguments.length;
  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);
  var end = argumentsLength > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
  while (endPos > index) O[index++] = value;
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-for-each.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-for-each.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $forEach = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").forEach;
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var STRICT_METHOD = arrayMethodIsStrict('forEach');

// `Array.prototype.forEach` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.foreach
module.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {
  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
} : [].forEach;


/***/ }),

/***/ "./node_modules/core-js/internals/array-from-constructor-and-list.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/array-from-constructor-and-list.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

module.exports = function (Constructor, list) {
  var index = 0;
  var length = lengthOfArrayLike(list);
  var result = new Constructor(length);
  while (length > index) result[index] = list[index++];
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-from.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/array-from.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var callWithSafeIterationClosing = __webpack_require__(/*! ../internals/call-with-safe-iteration-closing */ "./node_modules/core-js/internals/call-with-safe-iteration-closing.js");
var isArrayIteratorMethod = __webpack_require__(/*! ../internals/is-array-iterator-method */ "./node_modules/core-js/internals/is-array-iterator-method.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");

var Array = global.Array;

// `Array.from` method implementation
// https://tc39.es/ecma262/#sec-array.from
module.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
  var O = toObject(arrayLike);
  var IS_CONSTRUCTOR = isConstructor(this);
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);
  var iteratorMethod = getIteratorMethod(O);
  var index = 0;
  var length, result, step, iterator, next, value;
  // if the target is not iterable or it's an array with the default iterator - use a simple case
  if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {
    iterator = getIterator(O, iteratorMethod);
    next = iterator.next;
    result = IS_CONSTRUCTOR ? new this() : [];
    for (;!(step = call(next, iterator)).done; index++) {
      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;
      createProperty(result, index, value);
    }
  } else {
    length = lengthOfArrayLike(O);
    result = IS_CONSTRUCTOR ? new this(length) : Array(length);
    for (;length > index; index++) {
      value = mapping ? mapfn(O[index], index) : O[index];
      createProperty(result, index, value);
    }
  }
  result.length = index;
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-includes.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = lengthOfArrayLike(O);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare -- NaN check
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/array-iteration.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");

var push = uncurryThis([].push);

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var IS_FILTER_REJECT = TYPE == 7;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that);
    var length = lengthOfArrayLike(self);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push(target, value);      // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push(target, value);      // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-last-index-of.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/array-last-index-of.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-array-prototype-lastindexof -- safe */
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var min = Math.min;
var $lastIndexOf = [].lastIndexOf;
var NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;
var STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');
var FORCED = NEGATIVE_ZERO || !STRICT_METHOD;

// `Array.prototype.lastIndexOf` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.lastindexof
module.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {
  // convert -0 to +0
  if (NEGATIVE_ZERO) return apply($lastIndexOf, this, arguments) || 0;
  var O = toIndexedObject(this);
  var length = lengthOfArrayLike(O);
  var index = length - 1;
  if (arguments.length > 1) index = min(index, toIntegerOrInfinity(arguments[1]));
  if (index < 0) index = length + index;
  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;
  return -1;
} : $lastIndexOf;


/***/ }),

/***/ "./node_modules/core-js/internals/array-method-has-species-support.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/internals/array-method-has-species-support.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");

var SPECIES = wellKnownSymbol('species');

module.exports = function (METHOD_NAME) {
  // We can't use this feature detection in V8 since it causes
  // deoptimization and serious performance degradation
  // https://github.com/zloirock/core-js/issues/677
  return V8_VERSION >= 51 || !fails(function () {
    var array = [];
    var constructor = array.constructor = {};
    constructor[SPECIES] = function () {
      return { foo: 1 };
    };
    return array[METHOD_NAME](Boolean).foo !== 1;
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-method-is-strict.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/array-method-is-strict.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = function (METHOD_NAME, argument) {
  var method = [][METHOD_NAME];
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing
    method.call(null, argument || function () { throw 1; }, 1);
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-reduce.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/array-reduce.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");

var TypeError = global.TypeError;

// `Array.prototype.{ reduce, reduceRight }` methods implementation
var createMethod = function (IS_RIGHT) {
  return function (that, callbackfn, argumentsLength, memo) {
    aCallable(callbackfn);
    var O = toObject(that);
    var self = IndexedObject(O);
    var length = lengthOfArrayLike(O);
    var index = IS_RIGHT ? length - 1 : 0;
    var i = IS_RIGHT ? -1 : 1;
    if (argumentsLength < 2) while (true) {
      if (index in self) {
        memo = self[index];
        index += i;
        break;
      }
      index += i;
      if (IS_RIGHT ? index < 0 : length <= index) {
        throw TypeError('Reduce of empty array with no initial value');
      }
    }
    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {
      memo = callbackfn(memo, self[index], index, O);
    }
    return memo;
  };
};

module.exports = {
  // `Array.prototype.reduce` method
  // https://tc39.es/ecma262/#sec-array.prototype.reduce
  left: createMethod(false),
  // `Array.prototype.reduceRight` method
  // https://tc39.es/ecma262/#sec-array.prototype.reduceright
  right: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-slice-simple.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/array-slice-simple.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");

var Array = global.Array;
var max = Math.max;

module.exports = function (O, start, end) {
  var length = lengthOfArrayLike(O);
  var k = toAbsoluteIndex(start, length);
  var fin = toAbsoluteIndex(end === undefined ? length : end, length);
  var result = Array(max(fin - k, 0));
  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);
  result.length = n;
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-slice.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/array-slice.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

module.exports = uncurryThis([].slice);


/***/ }),

/***/ "./node_modules/core-js/internals/array-sort.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/array-sort.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var arraySlice = __webpack_require__(/*! ../internals/array-slice-simple */ "./node_modules/core-js/internals/array-slice-simple.js");

var floor = Math.floor;

var mergeSort = function (array, comparefn) {
  var length = array.length;
  var middle = floor(length / 2);
  return length < 8 ? insertionSort(array, comparefn) : merge(
    array,
    mergeSort(arraySlice(array, 0, middle), comparefn),
    mergeSort(arraySlice(array, middle), comparefn),
    comparefn
  );
};

var insertionSort = function (array, comparefn) {
  var length = array.length;
  var i = 1;
  var element, j;

  while (i < length) {
    j = i;
    element = array[i];
    while (j && comparefn(array[j - 1], element) > 0) {
      array[j] = array[--j];
    }
    if (j !== i++) array[j] = element;
  } return array;
};

var merge = function (array, left, right, comparefn) {
  var llength = left.length;
  var rlength = right.length;
  var lindex = 0;
  var rindex = 0;

  while (lindex < llength || rindex < rlength) {
    array[lindex + rindex] = (lindex < llength && rindex < rlength)
      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]
      : lindex < llength ? left[lindex++] : right[rindex++];
  } return array;
};

module.exports = mergeSort;


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');
var Array = global.Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/array-species-create.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var arraySpeciesConstructor = __webpack_require__(/*! ../internals/array-species-constructor */ "./node_modules/core-js/internals/array-species-constructor.js");

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/call-with-safe-iteration-closing.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/internals/call-with-safe-iteration-closing.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var iteratorClose = __webpack_require__(/*! ../internals/iterator-close */ "./node_modules/core-js/internals/iterator-close.js");

// call something on iterator step with safe closing on error
module.exports = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  } catch (error) {
    iteratorClose(iterator, 'throw', error);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/check-correctness-of-iteration.js":
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/internals/check-correctness-of-iteration.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;

try {
  var called = 0;
  var iteratorWithReturn = {
    next: function () {
      return { done: !!called++ };
    },
    'return': function () {
      SAFE_CLOSING = true;
    }
  };
  iteratorWithReturn[ITERATOR] = function () {
    return this;
  };
  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing
  Array.from(iteratorWithReturn, function () { throw 2; });
} catch (error) { /* empty */ }

module.exports = function (exec, SKIP_CLOSING) {
  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
  var ITERATION_SUPPORT = false;
  try {
    var object = {};
    object[ITERATOR] = function () {
      return {
        next: function () {
          return { done: ITERATION_SUPPORT = true };
        }
      };
    };
    exec(object);
  } catch (error) { /* empty */ }
  return ITERATION_SUPPORT;
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/classof-raw.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);

module.exports = function (it) {
  return stringSlice(toString(it), 8, -1);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/classof.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var Object = global.Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/collection-delete-all.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/collection-delete-all.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

// https://github.com/tc39/collection-methods
module.exports = function deleteAll(/* ...elements */) {
  var collection = anObject(this);
  var remover = aCallable(collection['delete']);
  var allDeleted = true;
  var wasDeleted;
  for (var k = 0, len = arguments.length; k < len; k++) {
    wasDeleted = call(remover, collection, arguments[k]);
    allDeleted = allDeleted && wasDeleted;
  }
  return !!allDeleted;
};


/***/ }),

/***/ "./node_modules/core-js/internals/collection-strong.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/collection-strong.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var redefineAll = __webpack_require__(/*! ../internals/redefine-all */ "./node_modules/core-js/internals/redefine-all.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");
var defineIterator = __webpack_require__(/*! ../internals/define-iterator */ "./node_modules/core-js/internals/define-iterator.js");
var setSpecies = __webpack_require__(/*! ../internals/set-species */ "./node_modules/core-js/internals/set-species.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fastKey = __webpack_require__(/*! ../internals/internal-metadata */ "./node_modules/core-js/internals/internal-metadata.js").fastKey;
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;

module.exports = {
  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
    var Constructor = wrapper(function (that, iterable) {
      anInstance(that, Prototype);
      setInternalState(that, {
        type: CONSTRUCTOR_NAME,
        index: create(null),
        first: undefined,
        last: undefined,
        size: 0
      });
      if (!DESCRIPTORS) that.size = 0;
      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });
    });

    var Prototype = Constructor.prototype;

    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);

    var define = function (that, key, value) {
      var state = getInternalState(that);
      var entry = getEntry(that, key);
      var previous, index;
      // change existing entry
      if (entry) {
        entry.value = value;
      // create new entry
      } else {
        state.last = entry = {
          index: index = fastKey(key, true),
          key: key,
          value: value,
          previous: previous = state.last,
          next: undefined,
          removed: false
        };
        if (!state.first) state.first = entry;
        if (previous) previous.next = entry;
        if (DESCRIPTORS) state.size++;
        else that.size++;
        // add to index
        if (index !== 'F') state.index[index] = entry;
      } return that;
    };

    var getEntry = function (that, key) {
      var state = getInternalState(that);
      // fast case
      var index = fastKey(key);
      var entry;
      if (index !== 'F') return state.index[index];
      // frozen object case
      for (entry = state.first; entry; entry = entry.next) {
        if (entry.key == key) return entry;
      }
    };

    redefineAll(Prototype, {
      // `{ Map, Set }.prototype.clear()` methods
      // https://tc39.es/ecma262/#sec-map.prototype.clear
      // https://tc39.es/ecma262/#sec-set.prototype.clear
      clear: function clear() {
        var that = this;
        var state = getInternalState(that);
        var data = state.index;
        var entry = state.first;
        while (entry) {
          entry.removed = true;
          if (entry.previous) entry.previous = entry.previous.next = undefined;
          delete data[entry.index];
          entry = entry.next;
        }
        state.first = state.last = undefined;
        if (DESCRIPTORS) state.size = 0;
        else that.size = 0;
      },
      // `{ Map, Set }.prototype.delete(key)` methods
      // https://tc39.es/ecma262/#sec-map.prototype.delete
      // https://tc39.es/ecma262/#sec-set.prototype.delete
      'delete': function (key) {
        var that = this;
        var state = getInternalState(that);
        var entry = getEntry(that, key);
        if (entry) {
          var next = entry.next;
          var prev = entry.previous;
          delete state.index[entry.index];
          entry.removed = true;
          if (prev) prev.next = next;
          if (next) next.previous = prev;
          if (state.first == entry) state.first = next;
          if (state.last == entry) state.last = prev;
          if (DESCRIPTORS) state.size--;
          else that.size--;
        } return !!entry;
      },
      // `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods
      // https://tc39.es/ecma262/#sec-map.prototype.foreach
      // https://tc39.es/ecma262/#sec-set.prototype.foreach
      forEach: function forEach(callbackfn /* , that = undefined */) {
        var state = getInternalState(this);
        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
        var entry;
        while (entry = entry ? entry.next : state.first) {
          boundFunction(entry.value, entry.key, this);
          // revert to the last existing entry
          while (entry && entry.removed) entry = entry.previous;
        }
      },
      // `{ Map, Set}.prototype.has(key)` methods
      // https://tc39.es/ecma262/#sec-map.prototype.has
      // https://tc39.es/ecma262/#sec-set.prototype.has
      has: function has(key) {
        return !!getEntry(this, key);
      }
    });

    redefineAll(Prototype, IS_MAP ? {
      // `Map.prototype.get(key)` method
      // https://tc39.es/ecma262/#sec-map.prototype.get
      get: function get(key) {
        var entry = getEntry(this, key);
        return entry && entry.value;
      },
      // `Map.prototype.set(key, value)` method
      // https://tc39.es/ecma262/#sec-map.prototype.set
      set: function set(key, value) {
        return define(this, key === 0 ? 0 : key, value);
      }
    } : {
      // `Set.prototype.add(value)` method
      // https://tc39.es/ecma262/#sec-set.prototype.add
      add: function add(value) {
        return define(this, value = value === 0 ? 0 : value, value);
      }
    });
    if (DESCRIPTORS) defineProperty(Prototype, 'size', {
      get: function () {
        return getInternalState(this).size;
      }
    });
    return Constructor;
  },
  setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {
    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';
    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);
    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);
    // `{ Map, Set }.prototype.{ keys, values, entries, @@iterator }()` methods
    // https://tc39.es/ecma262/#sec-map.prototype.entries
    // https://tc39.es/ecma262/#sec-map.prototype.keys
    // https://tc39.es/ecma262/#sec-map.prototype.values
    // https://tc39.es/ecma262/#sec-map.prototype-@@iterator
    // https://tc39.es/ecma262/#sec-set.prototype.entries
    // https://tc39.es/ecma262/#sec-set.prototype.keys
    // https://tc39.es/ecma262/#sec-set.prototype.values
    // https://tc39.es/ecma262/#sec-set.prototype-@@iterator
    defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {
      setInternalState(this, {
        type: ITERATOR_NAME,
        target: iterated,
        state: getInternalCollectionState(iterated),
        kind: kind,
        last: undefined
      });
    }, function () {
      var state = getInternalIteratorState(this);
      var kind = state.kind;
      var entry = state.last;
      // revert to the last existing entry
      while (entry && entry.removed) entry = entry.previous;
      // get next entry
      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {
        // or finish the iteration
        state.target = undefined;
        return { value: undefined, done: true };
      }
      // return step by kind
      if (kind == 'keys') return { value: entry.key, done: false };
      if (kind == 'values') return { value: entry.value, done: false };
      return { value: [entry.key, entry.value], done: false };
    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);

    // `{ Map, Set }.prototype[@@species]` accessors
    // https://tc39.es/ecma262/#sec-get-map-@@species
    // https://tc39.es/ecma262/#sec-get-set-@@species
    setSpecies(CONSTRUCTOR_NAME);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/collection.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/collection.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var InternalMetadataModule = __webpack_require__(/*! ../internals/internal-metadata */ "./node_modules/core-js/internals/internal-metadata.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var checkCorrectnessOfIteration = __webpack_require__(/*! ../internals/check-correctness-of-iteration */ "./node_modules/core-js/internals/check-correctness-of-iteration.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var inheritIfRequired = __webpack_require__(/*! ../internals/inherit-if-required */ "./node_modules/core-js/internals/inherit-if-required.js");

module.exports = function (CONSTRUCTOR_NAME, wrapper, common) {
  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;
  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;
  var ADDER = IS_MAP ? 'set' : 'add';
  var NativeConstructor = global[CONSTRUCTOR_NAME];
  var NativePrototype = NativeConstructor && NativeConstructor.prototype;
  var Constructor = NativeConstructor;
  var exported = {};

  var fixMethod = function (KEY) {
    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);
    redefine(NativePrototype, KEY,
      KEY == 'add' ? function add(value) {
        uncurriedNativeMethod(this, value === 0 ? 0 : value);
        return this;
      } : KEY == 'delete' ? function (key) {
        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
      } : KEY == 'get' ? function get(key) {
        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);
      } : KEY == 'has' ? function has(key) {
        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
      } : function set(key, value) {
        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);
        return this;
      }
    );
  };

  var REPLACE = isForced(
    CONSTRUCTOR_NAME,
    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {
      new NativeConstructor().entries().next();
    }))
  );

  if (REPLACE) {
    // create collection constructor
    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);
    InternalMetadataModule.enable();
  } else if (isForced(CONSTRUCTOR_NAME, true)) {
    var instance = new Constructor();
    // early implementations not supports chaining
    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false
    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });
    // most early implementations doesn't supports iterables, most modern - not close it correctly
    // eslint-disable-next-line no-new -- required for testing
    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });
    // for early implementations -0 and +0 not the same
    var BUGGY_ZERO = !IS_WEAK && fails(function () {
      // V8 ~ Chromium 42- fails only with 5+ elements
      var $instance = new NativeConstructor();
      var index = 5;
      while (index--) $instance[ADDER](index, index);
      return !$instance.has(-0);
    });

    if (!ACCEPT_ITERABLES) {
      Constructor = wrapper(function (dummy, iterable) {
        anInstance(dummy, NativePrototype);
        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);
        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });
        return that;
      });
      Constructor.prototype = NativePrototype;
      NativePrototype.constructor = Constructor;
    }

    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
      fixMethod('delete');
      fixMethod('has');
      IS_MAP && fixMethod('get');
    }

    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);

    // weak collections should not contains .clear method
    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;
  }

  exported[CONSTRUCTOR_NAME] = Constructor;
  $({ global: true, forced: Constructor != NativeConstructor }, exported);

  setToStringTag(Constructor, CONSTRUCTOR_NAME);

  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);

  return Constructor;
};


/***/ }),

/***/ "./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var ownKeys = __webpack_require__(/*! ../internals/own-keys */ "./node_modules/core-js/internals/own-keys.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

module.exports = function (target, source, exceptions) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/correct-is-regexp-logic.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/correct-is-regexp-logic.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var MATCH = wellKnownSymbol('match');

module.exports = function (METHOD_NAME) {
  var regexp = /./;
  try {
    '/./'[METHOD_NAME](regexp);
  } catch (error1) {
    try {
      regexp[MATCH] = false;
      return '/./'[METHOD_NAME](regexp);
    } catch (error2) { /* empty */ }
  } return false;
};


/***/ }),

/***/ "./node_modules/core-js/internals/correct-prototype-getter.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/correct-prototype-getter.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = !fails(function () {
  function F() { /* empty */ }
  F.prototype.constructor = null;
  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing
  return Object.getPrototypeOf(new F()) !== F.prototype;
});


/***/ }),

/***/ "./node_modules/core-js/internals/create-html.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/create-html.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");

var quot = /"/g;
var replace = uncurryThis(''.replace);

// `CreateHTML` abstract operation
// https://tc39.es/ecma262/#sec-createhtml
module.exports = function (string, tag, attribute, value) {
  var S = toString(requireObjectCoercible(string));
  var p1 = '<' + tag;
  if (attribute !== '') p1 += ' ' + attribute + '="' + replace(toString(value), quot, '&quot;') + '"';
  return p1 + '>' + S + '</' + tag + '>';
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-iterator-constructor.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-iterator-constructor.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IteratorPrototype = __webpack_require__(/*! ../internals/iterators-core */ "./node_modules/core-js/internals/iterators-core.js").IteratorPrototype;
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");

var returnThis = function () { return this; };

module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators[TO_STRING_TAG] = returnThis;
  return IteratorConstructor;
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-non-enumerable-property.js":
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-property.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/create-property.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");

module.exports = function (object, key, value) {
  var propertyKey = toPropertyKey(key);
  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
  else object[propertyKey] = value;
};


/***/ }),

/***/ "./node_modules/core-js/internals/date-to-iso-string.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/date-to-iso-string.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var padStart = __webpack_require__(/*! ../internals/string-pad */ "./node_modules/core-js/internals/string-pad.js").start;

var RangeError = global.RangeError;
var abs = Math.abs;
var DatePrototype = Date.prototype;
var n$DateToISOString = DatePrototype.toISOString;
var getTime = uncurryThis(DatePrototype.getTime);
var getUTCDate = uncurryThis(DatePrototype.getUTCDate);
var getUTCFullYear = uncurryThis(DatePrototype.getUTCFullYear);
var getUTCHours = uncurryThis(DatePrototype.getUTCHours);
var getUTCMilliseconds = uncurryThis(DatePrototype.getUTCMilliseconds);
var getUTCMinutes = uncurryThis(DatePrototype.getUTCMinutes);
var getUTCMonth = uncurryThis(DatePrototype.getUTCMonth);
var getUTCSeconds = uncurryThis(DatePrototype.getUTCSeconds);

// `Date.prototype.toISOString` method implementation
// https://tc39.es/ecma262/#sec-date.prototype.toisostring
// PhantomJS / old WebKit fails here:
module.exports = (fails(function () {
  return n$DateToISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';
}) || !fails(function () {
  n$DateToISOString.call(new Date(NaN));
})) ? function toISOString() {
  if (!isFinite(getTime(this))) throw RangeError('Invalid time value');
  var date = this;
  var year = getUTCFullYear(date);
  var milliseconds = getUTCMilliseconds(date);
  var sign = year < 0 ? '-' : year > 9999 ? '+' : '';
  return sign + padStart(abs(year), sign ? 6 : 4, 0) +
    '-' + padStart(getUTCMonth(date) + 1, 2, 0) +
    '-' + padStart(getUTCDate(date), 2, 0) +
    'T' + padStart(getUTCHours(date), 2, 0) +
    ':' + padStart(getUTCMinutes(date), 2, 0) +
    ':' + padStart(getUTCSeconds(date), 2, 0) +
    '.' + padStart(milliseconds, 3, 0) +
    'Z';
} : n$DateToISOString;


/***/ }),

/***/ "./node_modules/core-js/internals/define-iterator.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/define-iterator.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var FunctionName = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var createIteratorConstructor = __webpack_require__(/*! ../internals/create-iterator-constructor */ "./node_modules/core-js/internals/create-iterator-constructor.js");
var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var IteratorsCore = __webpack_require__(/*! ../internals/iterators-core */ "./node_modules/core-js/internals/iterators-core.js");

var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () { return this; };

module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];
    switch (KIND) {
      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };
      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };
      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };
    } return function () { return new IteratorConstructor(this); };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR]
    || IterablePrototype['@@iterator']
    || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY;

  // fix native
  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
        if (setPrototypeOf) {
          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
          redefine(CurrentIteratorPrototype, ITERATOR, returnThis);
        }
      }
      // Set @@toStringTag to native iterators
      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
    }
  }

  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF
  if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
    } else {
      INCORRECT_VALUES_NAME = true;
      defaultIterator = function values() { return call(nativeIterator, this); };
    }
  }

  // export additional methods
  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        redefine(IterablePrototype, KEY, methods[KEY]);
      }
    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
  }

  // define iterator
  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    redefine(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
  }
  Iterators[NAME] = defaultIterator;

  return methods;
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-well-known-symbol.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/define-well-known-symbol.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var path = __webpack_require__(/*! ../internals/path */ "./node_modules/core-js/internals/path.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var wrappedWellKnownSymbolModule = __webpack_require__(/*! ../internals/well-known-symbol-wrapped */ "./node_modules/core-js/internals/well-known-symbol-wrapped.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;

module.exports = function (NAME) {
  var Symbol = path.Symbol || (path.Symbol = {});
  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {
    value: wrappedWellKnownSymbolModule.f(NAME)
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/descriptors.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// Detect IE8's incomplete defineProperty implementation
module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/document-create-element.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var document = global.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),

/***/ "./node_modules/core-js/internals/dom-iterables.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/dom-iterables.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};


/***/ }),

/***/ "./node_modules/core-js/internals/dom-token-list-prototype.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/dom-token-list-prototype.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");

var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;

module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;


/***/ }),

/***/ "./node_modules/core-js/internals/engine-ff-version.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-ff-version.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

var firefox = userAgent.match(/firefox\/(\d+)/i);

module.exports = !!firefox && +firefox[1];


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-browser.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-browser.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = typeof window == 'object';


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-ie-or-edge.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-ie-or-edge.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var UA = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

module.exports = /MSIE|Trident/.test(UA);


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-ios-pebble.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-ios-pebble.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = /ipad|iphone|ipod/i.test(userAgent) && global.Pebble !== undefined;


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-ios.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-ios.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-node.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-node.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = classof(global.process) == 'process';


/***/ }),

/***/ "./node_modules/core-js/internals/engine-is-webos-webkit.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-is-webos-webkit.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

module.exports = /web0s(?!.*chrome)/i.test(userAgent);


/***/ }),

/***/ "./node_modules/core-js/internals/engine-user-agent.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-user-agent.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('navigator', 'userAgent') || '';


/***/ }),

/***/ "./node_modules/core-js/internals/engine-v8-version.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-v8-version.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  // in old Chrome, versions of V8 isn't V8 = Chrome / 10
  // but their correct versions are not interesting for us
  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}

// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`
// so check `userAgent` even if `.v8` exists, but 0
if (!version && userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = +match[1];
  }
}

module.exports = version;


/***/ }),

/***/ "./node_modules/core-js/internals/engine-webkit-version.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/engine-webkit-version.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

var webkit = userAgent.match(/AppleWebKit\/(\d+)\./);

module.exports = !!webkit && +webkit[1];


/***/ }),

/***/ "./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),

/***/ "./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/export.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");
var copyConstructorProperties = __webpack_require__(/*! ../internals/copy-constructor-properties */ "./node_modules/core-js/internals/copy-constructor-properties.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");

/*
  options.target      - name of the target object
  options.global      - target is the global object
  options.stat        - export as static methods of target
  options.proto       - export as prototype methods of target
  options.real        - real prototype method for the `pure` version
  options.forced      - export even if the native feature is available
  options.bind        - bind methods to the target, required for the `pure` version
  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe      - use the simple assignment of property instead of delete + defineProperty
  options.sham        - add a flag to not completely full polyfills
  options.enumerable  - export as enumerable property
  options.noTargetGet - prevent calling a getter on target
  options.name        - the .name of the function if it does not match the key
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = global;
  } else if (STATIC) {
    target = global[TARGET] || setGlobal(TARGET, {});
  } else {
    target = (global[TARGET] || {}).prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.noTargetGet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty == typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    // extend global
    redefine(target, key, sourceProperty, options);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/internals/fails.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove from `core-js@4` since it's moved to entry points
__webpack_require__(/*! ../modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var regexpExec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");

var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;

module.exports = function (KEY, exec, FORCED, SHAM) {
  var SYMBOL = wellKnownSymbol(KEY);

  var DELEGATES_TO_SYMBOL = !fails(function () {
    // String methods call symbol-named RegEp methods
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) != 7;
  });

  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
    // Symbol-named RegExp methods call .exec
    var execCalled = false;
    var re = /a/;

    if (KEY === 'split') {
      // We can't use real regex here since it causes deoptimization
      // and serious performance degradation in V8
      // https://github.com/zloirock/core-js/issues/306
      re = {};
      // RegExp[@@split] doesn't call the regex's exec method, but first creates
      // a new one. We need to return the patched regex when creating the new one.
      re.constructor = {};
      re.constructor[SPECIES] = function () { return re; };
      re.flags = '';
      re[SYMBOL] = /./[SYMBOL];
    }

    re.exec = function () { execCalled = true; return null; };

    re[SYMBOL]('');
    return !execCalled;
  });

  if (
    !DELEGATES_TO_SYMBOL ||
    !DELEGATES_TO_EXEC ||
    FORCED
  ) {
    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);
    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
      var uncurriedNativeMethod = uncurryThis(nativeMethod);
      var $exec = regexp.exec;
      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
          // The native String method already delegates to @@method (this
          // polyfilled function), leasing to infinite recursion.
          // We avoid it by directly calling the native @@method method.
          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };
        }
        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };
      }
      return { done: false };
    });

    redefine(String.prototype, KEY, methods[0]);
    redefine(RegExpPrototype, SYMBOL, methods[1]);
  }

  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};


/***/ }),

/***/ "./node_modules/core-js/internals/freezing.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/freezing.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing
  return Object.isExtensible(Object.preventExtensions({}));
});


/***/ }),

/***/ "./node_modules/core-js/internals/function-apply.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/function-apply.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var bind = FunctionPrototype.bind;
var call = FunctionPrototype.call;

// eslint-disable-next-line es/no-reflect -- safe
module.exports = typeof Reflect == 'object' && Reflect.apply || (bind ? call.bind(apply) : function () {
  return call.apply(apply, arguments);
});


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : bind ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-bind.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/function-bind.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");

var Function = global.Function;
var concat = uncurryThis([].concat);
var join = uncurryThis([].join);
var factories = {};

var construct = function (C, argsLength, args) {
  if (!hasOwn(factories, argsLength)) {
    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';
    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');
  } return factories[argsLength](C, args);
};

// `Function.prototype.bind` method implementation
// https://tc39.es/ecma262/#sec-function.prototype.bind
module.exports = Function.bind || function bind(that /* , ...args */) {
  var F = aCallable(this);
  var Prototype = F.prototype;
  var partArgs = arraySlice(arguments, 1);
  var boundFunction = function bound(/* args... */) {
    var args = concat(partArgs, arraySlice(arguments));
    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);
  };
  if (isObject(Prototype)) boundFunction.prototype = Prototype;
  return boundFunction;
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-call.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/function-call.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var call = Function.prototype.call;

module.exports = call.bind ? call.bind(call) : function () {
  return call.apply(call, arguments);
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-name.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/function-name.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");

var FunctionPrototype = Function.prototype;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;

var EXISTS = hasOwn(FunctionPrototype, 'name');
// additional protection from minified / mangled / dropped function names
var PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));

module.exports = {
  EXISTS: EXISTS,
  PROPER: PROPER,
  CONFIGURABLE: CONFIGURABLE
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-uncurry-this.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/function-uncurry-this.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var FunctionPrototype = Function.prototype;
var bind = FunctionPrototype.bind;
var call = FunctionPrototype.call;
var uncurryThis = bind && bind.bind(call, call);

module.exports = bind ? function (fn) {
  return fn && uncurryThis(fn);
} : function (fn) {
  return fn && function () {
    return call.apply(fn, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-built-in.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var aFunction = function (argument) {
  return isCallable(argument) ? argument : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-iterator-method.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/get-iterator-method.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (it != undefined) return getMethod(it, ITERATOR)
    || getMethod(it, '@@iterator')
    || Iterators[classof(it)];
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-iterator.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-iterator.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");

var TypeError = global.TypeError;

module.exports = function (argument, usingIterator) {
  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));
  throw TypeError(tryToString(argument) + ' is not iterable');
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-map-iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/get-map-iterator.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");

module.exports = function (it) {
  // eslint-disable-next-line es/no-map -- safe
  return call(Map.prototype.entries, it);
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-method.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/get-method.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");

// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
module.exports = function (V, P) {
  var func = V[P];
  return func == null ? undefined : aCallable(func);
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-substitution.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/get-substitution.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");

var floor = Math.floor;
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;

// `GetSubstitution` abstract operation
// https://tc39.es/ecma262/#sec-getsubstitution
module.exports = function (matched, str, position, captures, namedCaptures, replacement) {
  var tailPos = position + matched.length;
  var m = captures.length;
  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
  if (namedCaptures !== undefined) {
    namedCaptures = toObject(namedCaptures);
    symbols = SUBSTITUTION_SYMBOLS;
  }
  return replace(replacement, symbols, function (match, ch) {
    var capture;
    switch (charAt(ch, 0)) {
      case '$': return '$';
      case '&': return matched;
      case '`': return stringSlice(str, 0, position);
      case "'": return stringSlice(str, tailPos);
      case '<':
        capture = namedCaptures[stringSlice(ch, 1, -1)];
        break;
      default: // \d\d?
        var n = +ch;
        if (n === 0) return match;
        if (n > m) {
          var f = floor(n / 10);
          if (f === 0) return match;
          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);
          return match;
        }
        capture = captures[n - 1];
    }
    return capture === undefined ? '' : capture;
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/global.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var check = function (it) {
  return it && it.Math == Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line es/no-global-this -- safe
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  // eslint-disable-next-line no-restricted-globals -- safe
  check(typeof self == 'object' && self) ||
  check(typeof global == 'object' && global) ||
  // eslint-disable-next-line no-new-func -- fallback
  (function () { return this; })() || Function('return this')();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/core-js/internals/has-own-property.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/has-own-property.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");

var hasOwnProperty = uncurryThis({}.hasOwnProperty);

// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
module.exports = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty(toObject(it), key);
};


/***/ }),

/***/ "./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),

/***/ "./node_modules/core-js/internals/host-report-errors.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/host-report-errors.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = function (a, b) {
  var console = global.console;
  if (console && console.error) {
    arguments.length == 1 ? console.error(a) : console.error(a, b);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/html.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var createElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");

// Thank's IE8 for his funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/ieee754.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/ieee754.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// IEEE754 conversions based on https://github.com/feross/ieee754
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

var Array = global.Array;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;

var pack = function (number, mantissaLength, bytes) {
  var buffer = Array(bytes);
  var exponentLength = bytes * 8 - mantissaLength - 1;
  var eMax = (1 << exponentLength) - 1;
  var eBias = eMax >> 1;
  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;
  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;
  var index = 0;
  var exponent, mantissa, c;
  number = abs(number);
  // eslint-disable-next-line no-self-compare -- NaN check
  if (number != number || number === Infinity) {
    // eslint-disable-next-line no-self-compare -- NaN check
    mantissa = number != number ? 1 : 0;
    exponent = eMax;
  } else {
    exponent = floor(log(number) / LN2);
    c = pow(2, -exponent);
    if (number * c < 1) {
      exponent--;
      c *= 2;
    }
    if (exponent + eBias >= 1) {
      number += rt / c;
    } else {
      number += rt * pow(2, 1 - eBias);
    }
    if (number * c >= 2) {
      exponent++;
      c /= 2;
    }
    if (exponent + eBias >= eMax) {
      mantissa = 0;
      exponent = eMax;
    } else if (exponent + eBias >= 1) {
      mantissa = (number * c - 1) * pow(2, mantissaLength);
      exponent = exponent + eBias;
    } else {
      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);
      exponent = 0;
    }
  }
  while (mantissaLength >= 8) {
    buffer[index++] = mantissa & 255;
    mantissa /= 256;
    mantissaLength -= 8;
  }
  exponent = exponent << mantissaLength | mantissa;
  exponentLength += mantissaLength;
  while (exponentLength > 0) {
    buffer[index++] = exponent & 255;
    exponent /= 256;
    exponentLength -= 8;
  }
  buffer[--index] |= sign * 128;
  return buffer;
};

var unpack = function (buffer, mantissaLength) {
  var bytes = buffer.length;
  var exponentLength = bytes * 8 - mantissaLength - 1;
  var eMax = (1 << exponentLength) - 1;
  var eBias = eMax >> 1;
  var nBits = exponentLength - 7;
  var index = bytes - 1;
  var sign = buffer[index--];
  var exponent = sign & 127;
  var mantissa;
  sign >>= 7;
  while (nBits > 0) {
    exponent = exponent * 256 + buffer[index--];
    nBits -= 8;
  }
  mantissa = exponent & (1 << -nBits) - 1;
  exponent >>= -nBits;
  nBits += mantissaLength;
  while (nBits > 0) {
    mantissa = mantissa * 256 + buffer[index--];
    nBits -= 8;
  }
  if (exponent === 0) {
    exponent = 1 - eBias;
  } else if (exponent === eMax) {
    return mantissa ? NaN : sign ? -Infinity : Infinity;
  } else {
    mantissa = mantissa + pow(2, mantissaLength);
    exponent = exponent - eBias;
  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);
};

module.exports = {
  pack: pack,
  unpack: unpack
};


/***/ }),

/***/ "./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/indexed-object.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

var Object = global.Object;
var split = uncurryThis(''.split);

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) == 'String' ? split(it, '') : Object(it);
} : Object;


/***/ }),

/***/ "./node_modules/core-js/internals/inherit-if-required.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/inherit-if-required.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    isCallable(NewTarget = dummy.constructor) &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};


/***/ }),

/***/ "./node_modules/core-js/internals/inspect-source.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/inspect-source.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var store = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");

var functionToString = uncurryThis(Function.toString);

// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper
if (!isCallable(store.inspectSource)) {
  store.inspectSource = function (it) {
    return functionToString(it);
  };
}

module.exports = store.inspectSource;


/***/ }),

/***/ "./node_modules/core-js/internals/internal-metadata.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/internal-metadata.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");
var getOwnPropertyNamesExternalModule = __webpack_require__(/*! ../internals/object-get-own-property-names-external */ "./node_modules/core-js/internals/object-get-own-property-names-external.js");
var isExtensible = __webpack_require__(/*! ../internals/object-is-extensible */ "./node_modules/core-js/internals/object-is-extensible.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");
var FREEZING = __webpack_require__(/*! ../internals/freezing */ "./node_modules/core-js/internals/freezing.js");

var REQUIRED = false;
var METADATA = uid('meta');
var id = 0;

var setMetadata = function (it) {
  defineProperty(it, METADATA, { value: {
    objectID: 'O' + id++, // object ID
    weakData: {}          // weak collections IDs
  } });
};

var fastKey = function (it, create) {
  // return a primitive with prefix
  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if (!hasOwn(it, METADATA)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return 'F';
    // not necessary to add metadata
    if (!create) return 'E';
    // add missing metadata
    setMetadata(it);
  // return object ID
  } return it[METADATA].objectID;
};

var getWeakData = function (it, create) {
  if (!hasOwn(it, METADATA)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return true;
    // not necessary to add metadata
    if (!create) return false;
    // add missing metadata
    setMetadata(it);
  // return the store of weak collections IDs
  } return it[METADATA].weakData;
};

// add metadata on freeze-family methods calling
var onFreeze = function (it) {
  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);
  return it;
};

var enable = function () {
  meta.enable = function () { /* empty */ };
  REQUIRED = true;
  var getOwnPropertyNames = getOwnPropertyNamesModule.f;
  var splice = uncurryThis([].splice);
  var test = {};
  test[METADATA] = 1;

  // prevent exposing of metadata key
  if (getOwnPropertyNames(test).length) {
    getOwnPropertyNamesModule.f = function (it) {
      var result = getOwnPropertyNames(it);
      for (var i = 0, length = result.length; i < length; i++) {
        if (result[i] === METADATA) {
          splice(result, i, 1);
          break;
        }
      } return result;
    };

    $({ target: 'Object', stat: true, forced: true }, {
      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f
    });
  }
};

var meta = module.exports = {
  enable: enable,
  fastKey: fastKey,
  getWeakData: getWeakData,
  onFreeze: onFreeze
};

hiddenKeys[METADATA] = true;


/***/ }),

/***/ "./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/internal-state.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var NATIVE_WEAK_MAP = __webpack_require__(/*! ../internals/native-weak-map */ "./node_modules/core-js/internals/native-weak-map.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var shared = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP || shared.state) {
  var store = shared.state || (shared.state = new WeakMap());
  var wmget = uncurryThis(store.get);
  var wmhas = uncurryThis(store.has);
  var wmset = uncurryThis(store.set);
  set = function (it, metadata) {
    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    wmset(store, it, metadata);
    return metadata;
  };
  get = function (it) {
    return wmget(store, it) || {};
  };
  has = function (it) {
    return wmhas(store, it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return hasOwn(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return hasOwn(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-array-iterator-method.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/is-array-iterator-method.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/is-array.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) == 'Array';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-callable.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/is-callable.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
module.exports = function (argument) {
  return typeof argument == 'function';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-constructor.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/is-constructor.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");

var noop = function () { /* empty */ };
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, empty, argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),

/***/ "./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-forced.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value == POLYFILL ? true
    : value == NATIVE ? false
    : isCallable(detection) ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),

/***/ "./node_modules/core-js/internals/is-integral-number.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/is-integral-number.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var floor = Math.floor;

// `IsIntegralNumber` abstract operation
// https://tc39.es/ecma262/#sec-isintegralnumber
// eslint-disable-next-line es/no-number-isinteger -- safe
module.exports = Number.isInteger || function isInteger(it) {
  return !isObject(it) && isFinite(it) && floor(it) === it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");

module.exports = function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it);
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/is-pure.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),

/***/ "./node_modules/core-js/internals/is-regexp.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-regexp.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var MATCH = wellKnownSymbol('match');

// `IsRegExp` abstract operation
// https://tc39.es/ecma262/#sec-isregexp
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-symbol.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-symbol.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");

var Object = global.Object;

module.exports = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  var $Symbol = getBuiltIn('Symbol');
  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterate.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/iterate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");
var isArrayIteratorMethod = __webpack_require__(/*! ../internals/is-array-iterator-method */ "./node_modules/core-js/internals/is-array-iterator-method.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");
var iteratorClose = __webpack_require__(/*! ../internals/iterator-close */ "./node_modules/core-js/internals/iterator-close.js");

var TypeError = global.TypeError;

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var ResultPrototype = Result.prototype;

module.exports = function (iterable, unboundFunction, options) {
  var that = options && options.that;
  var AS_ENTRIES = !!(options && options.AS_ENTRIES);
  var IS_ITERATOR = !!(options && options.IS_ITERATOR);
  var INTERRUPTED = !!(options && options.INTERRUPTED);
  var fn = bind(unboundFunction, that);
  var iterator, iterFn, index, length, result, next, step;

  var stop = function (condition) {
    if (iterator) iteratorClose(iterator, 'normal', condition);
    return new Result(true, condition);
  };

  var callFn = function (value) {
    if (AS_ENTRIES) {
      anObject(value);
      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
    } return INTERRUPTED ? fn(value, stop) : fn(value);
  };

  if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (!iterFn) throw TypeError(tryToString(iterable) + ' is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
        result = callFn(iterable[index]);
        if (result && isPrototypeOf(ResultPrototype, result)) return result;
      } return new Result(false);
    }
    iterator = getIterator(iterable, iterFn);
  }

  next = iterator.next;
  while (!(step = call(next, iterator)).done) {
    try {
      result = callFn(step.value);
    } catch (error) {
      iteratorClose(iterator, 'throw', error);
    }
    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;
  } return new Result(false);
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterator-close.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/iterator-close.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");

module.exports = function (iterator, kind, value) {
  var innerResult, innerError;
  anObject(iterator);
  try {
    innerResult = getMethod(iterator, 'return');
    if (!innerResult) {
      if (kind === 'throw') throw value;
      return value;
    }
    innerResult = call(innerResult, iterator);
  } catch (error) {
    innerError = true;
    innerResult = error;
  }
  if (kind === 'throw') throw value;
  if (innerError) throw innerResult;
  anObject(innerResult);
  return value;
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterators-core.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/iterators-core.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;

// `%IteratorPrototype%` object
// https://tc39.es/ecma262/#sec-%iteratorprototype%-object
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;

/* eslint-disable es/no-array-prototype-keys -- safe */
if ([].keys) {
  arrayIterator = [].keys();
  // Safari 8 has buggy iterators w/o `next`
  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
  else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
  }
}

var NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {
  var test = {};
  // FF44- legacy iterators case
  return IteratorPrototype[ITERATOR].call(test) !== test;
});

if (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};
else if (IS_PURE) IteratorPrototype = create(IteratorPrototype);

// `%IteratorPrototype%[@@iterator]()` method
// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator
if (!isCallable(IteratorPrototype[ITERATOR])) {
  redefine(IteratorPrototype, ITERATOR, function () {
    return this;
  });
}

module.exports = {
  IteratorPrototype: IteratorPrototype,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterators.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/iterators.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),

/***/ "./node_modules/core-js/internals/length-of-array-like.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/length-of-array-like.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");

// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
module.exports = function (obj) {
  return toLength(obj.length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/microtask.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/microtask.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var getOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var macrotask = __webpack_require__(/*! ../internals/task */ "./node_modules/core-js/internals/task.js").set;
var IS_IOS = __webpack_require__(/*! ../internals/engine-is-ios */ "./node_modules/core-js/internals/engine-is-ios.js");
var IS_IOS_PEBBLE = __webpack_require__(/*! ../internals/engine-is-ios-pebble */ "./node_modules/core-js/internals/engine-is-ios-pebble.js");
var IS_WEBOS_WEBKIT = __webpack_require__(/*! ../internals/engine-is-webos-webkit */ "./node_modules/core-js/internals/engine-is-webos-webkit.js");
var IS_NODE = __webpack_require__(/*! ../internals/engine-is-node */ "./node_modules/core-js/internals/engine-is-node.js");

var MutationObserver = global.MutationObserver || global.WebKitMutationObserver;
var document = global.document;
var process = global.process;
var Promise = global.Promise;
// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`
var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');
var queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;

var flush, head, last, notify, toggle, node, promise, then;

// modern engines have queueMicrotask method
if (!queueMicrotask) {
  flush = function () {
    var parent, fn;
    if (IS_NODE && (parent = process.domain)) parent.exit();
    while (head) {
      fn = head.fn;
      head = head.next;
      try {
        fn();
      } catch (error) {
        if (head) notify();
        else last = undefined;
        throw error;
      }
    } last = undefined;
    if (parent) parent.enter();
  };

  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339
  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898
  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {
    toggle = true;
    node = document.createTextNode('');
    new MutationObserver(flush).observe(node, { characterData: true });
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {
    // Promise.resolve without an argument throws an error in LG WebOS 2
    promise = Promise.resolve(undefined);
    // workaround of WebKit ~ iOS Safari 10.1 bug
    promise.constructor = Promise;
    then = bind(promise.then, promise);
    notify = function () {
      then(flush);
    };
  // Node.js without promises
  } else if (IS_NODE) {
    notify = function () {
      process.nextTick(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    // strange IE + webpack dev server bug - use .bind(global)
    macrotask = bind(macrotask, global);
    notify = function () {
      macrotask(flush);
    };
  }
}

module.exports = queueMicrotask || function (fn) {
  var task = { fn: fn, next: undefined };
  if (last) last.next = task;
  if (!head) {
    head = task;
    notify();
  } last = task;
};


/***/ }),

/***/ "./node_modules/core-js/internals/native-promise-constructor.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/native-promise-constructor.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = global.Promise;


/***/ }),

/***/ "./node_modules/core-js/internals/native-symbol.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/native-symbol.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable es/no-symbol -- required for testing */
var V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  var symbol = Symbol();
  // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||
    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
    !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});


/***/ }),

/***/ "./node_modules/core-js/internals/native-url.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/native-url.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

var ITERATOR = wellKnownSymbol('iterator');

module.exports = !fails(function () {
  // eslint-disable-next-line unicorn/relative-url-style -- required for testing
  var url = new URL('b?a=1&b=2&c=3', 'http://a');
  var searchParams = url.searchParams;
  var result = '';
  url.pathname = 'c%20d';
  searchParams.forEach(function (value, key) {
    searchParams['delete']('b');
    result += key + value;
  });
  return (IS_PURE && !url.toJSON)
    || !searchParams.sort
    || url.href !== 'http://a/c%20d?a=1&c=3'
    || searchParams.get('c') !== '3'
    || String(new URLSearchParams('?a=1')) !== 'a=1'
    || !searchParams[ITERATOR]
    // throws in Edge
    || new URL('https://a@b').username !== 'a'
    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'
    // not punycoded in Edge
    || new URL('http://тест').host !== 'xn--e1aybc'
    // not escaped in Chrome 62-
    || new URL('http://a#б').hash !== '#%D0%B1'
    // fails in Chrome 66-
    || result !== 'a1c3'
    // throws in Safari
    || new URL('http://x', undefined).host !== 'x';
});


/***/ }),

/***/ "./node_modules/core-js/internals/native-weak-map.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/native-weak-map.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");

var WeakMap = global.WeakMap;

module.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));


/***/ }),

/***/ "./node_modules/core-js/internals/new-promise-capability.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/new-promise-capability.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");

var PromiseCapability = function (C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aCallable(resolve);
  this.reject = aCallable(reject);
};

// `NewPromiseCapability` abstract operation
// https://tc39.es/ecma262/#sec-newpromisecapability
module.exports.f = function (C) {
  return new PromiseCapability(C);
};


/***/ }),

/***/ "./node_modules/core-js/internals/not-a-regexp.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/not-a-regexp.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isRegExp = __webpack_require__(/*! ../internals/is-regexp */ "./node_modules/core-js/internals/is-regexp.js");

var TypeError = global.TypeError;

module.exports = function (it) {
  if (isRegExp(it)) {
    throw TypeError("The method doesn't accept regular expressions");
  } return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/number-parse-float.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/number-parse-float.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var trim = __webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim;
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var charAt = uncurryThis(''.charAt);
var n$ParseFloat = global.parseFloat;
var Symbol = global.Symbol;
var ITERATOR = Symbol && Symbol.iterator;
var FORCED = 1 / n$ParseFloat(whitespaces + '-0') !== -Infinity
  // MS Edge 18- broken with boxed symbols
  || (ITERATOR && !fails(function () { n$ParseFloat(Object(ITERATOR)); }));

// `parseFloat` method
// https://tc39.es/ecma262/#sec-parsefloat-string
module.exports = FORCED ? function parseFloat(string) {
  var trimmedString = trim(toString(string));
  var result = n$ParseFloat(trimmedString);
  return result === 0 && charAt(trimmedString, 0) == '-' ? -0 : result;
} : n$ParseFloat;


/***/ }),

/***/ "./node_modules/core-js/internals/number-parse-int.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/number-parse-int.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var trim = __webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim;
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var $parseInt = global.parseInt;
var Symbol = global.Symbol;
var ITERATOR = Symbol && Symbol.iterator;
var hex = /^[+-]?0x/i;
var exec = uncurryThis(hex.exec);
var FORCED = $parseInt(whitespaces + '08') !== 8 || $parseInt(whitespaces + '0x16') !== 22
  // MS Edge 18- broken with boxed symbols
  || (ITERATOR && !fails(function () { $parseInt(Object(ITERATOR)); }));

// `parseInt` method
// https://tc39.es/ecma262/#sec-parseint-string-radix
module.exports = FORCED ? function parseInt(string, radix) {
  var S = trim(toString(string));
  return $parseInt(S, (radix >>> 0) || (exec(hex, S) ? 16 : 10));
} : $parseInt;


/***/ }),

/***/ "./node_modules/core-js/internals/object-assign.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-assign.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");
var getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");
var propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");

// eslint-disable-next-line es/no-object-assign -- safe
var $assign = Object.assign;
// eslint-disable-next-line es/no-object-defineproperty -- required for testing
var defineProperty = Object.defineProperty;
var concat = uncurryThis([].concat);

// `Object.assign` method
// https://tc39.es/ecma262/#sec-object.assign
module.exports = !$assign || fails(function () {
  // should have correct order of operations (Edge bug)
  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {
    enumerable: true,
    get: function () {
      defineProperty(this, 'b', {
        value: 3,
        enumerable: false
      });
    }
  }), { b: 2 })).b !== 1) return true;
  // should work with symbols and should have deterministic property order (V8 bug)
  var A = {};
  var B = {};
  // eslint-disable-next-line es/no-symbol -- safe
  var symbol = Symbol();
  var alphabet = 'abcdefghijklmnopqrst';
  A[symbol] = 7;
  alphabet.split('').forEach(function (chr) { B[chr] = chr; });
  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`
  var T = toObject(target);
  var argumentsLength = arguments.length;
  var index = 1;
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  var propertyIsEnumerable = propertyIsEnumerableModule.f;
  while (argumentsLength > index) {
    var S = IndexedObject(arguments[index++]);
    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) {
      key = keys[j++];
      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];
    }
  } return T;
} : $assign;


/***/ }),

/***/ "./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var definePropertiesModule = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ "./node_modules/core-js/internals/v8-prototype-define-bug.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-property.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ "./node_modules/core-js/internals/v8-prototype-define-bug.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");

var TypeError = global.TypeError;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var $defineProperty = Object.defineProperty;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';

// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
    var current = $getOwnPropertyDescriptor(O, P);
    if (current && current[WRITABLE]) {
      O[P] = Attributes.value;
      Attributes = {
        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
        writable: false
      };
    }
  } return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPropertyKey(P);
  if (IE8_DOM_DEFINE) try {
    return $getOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-names-external.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-names-external.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable es/no-object-getownpropertynames -- safe */
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var $getOwnPropertyNames = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js").f;
var arraySlice = __webpack_require__(/*! ../internals/array-slice-simple */ "./node_modules/core-js/internals/array-slice-simple.js");

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return $getOwnPropertyNames(it);
  } catch (error) {
    return arraySlice(windowNames);
  }
};

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && classof(it) == 'Window'
    ? getWindowNames(it)
    : $getOwnPropertyNames(toIndexedObject(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
exports.f = Object.getOwnPropertySymbols;


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-prototype-of.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-prototype-of.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(/*! ../internals/correct-prototype-getter */ "./node_modules/core-js/internals/correct-prototype-getter.js");

var IE_PROTO = sharedKey('IE_PROTO');
var Object = global.Object;
var ObjectPrototype = Object.prototype;

// `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
module.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {
  var object = toObject(O);
  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];
  var constructor = object.constructor;
  if (isCallable(constructor) && object instanceof constructor) {
    return constructor.prototype;
  } return object instanceof Object ? ObjectPrototype : null;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-is-extensible.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/object-is-extensible.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(/*! ../internals/array-buffer-non-extensible */ "./node_modules/core-js/internals/array-buffer-non-extensible.js");

// eslint-disable-next-line es/no-object-isextensible -- safe
var $isExtensible = Object.isExtensible;
var FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });

// `Object.isExtensible` method
// https://tc39.es/ecma262/#sec-object.isextensible
module.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {
  if (!isObject(it)) return false;
  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;
  return $isExtensible ? $isExtensible(it) : true;
} : $isExtensible;


/***/ }),

/***/ "./node_modules/core-js/internals/object-is-prototype-of.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-is-prototype-of.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

module.exports = uncurryThis({}.isPrototypeOf);


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var indexOf = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf;
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

var push = uncurryThis([].push);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (hasOwn(O, key = names[i++])) {
    ~indexOf(result, key) || push(result, key);
  }
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $propertyIsEnumerable = {}.propertyIsEnumerable;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;


/***/ }),

/***/ "./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable no-proto -- safe */
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aPossiblePrototype = __webpack_require__(/*! ../internals/a-possible-prototype */ "./node_modules/core-js/internals/a-possible-prototype.js");

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);
    setter(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),

/***/ "./node_modules/core-js/internals/object-to-array.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/object-to-array.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var $propertyIsEnumerable = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js").f;

var propertyIsEnumerable = uncurryThis($propertyIsEnumerable);
var push = uncurryThis([].push);

// `Object.{ entries, values }` methods implementation
var createMethod = function (TO_ENTRIES) {
  return function (it) {
    var O = toIndexedObject(it);
    var keys = objectKeys(O);
    var length = keys.length;
    var i = 0;
    var result = [];
    var key;
    while (length > i) {
      key = keys[i++];
      if (!DESCRIPTORS || propertyIsEnumerable(O, key)) {
        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);
      }
    }
    return result;
  };
};

module.exports = {
  // `Object.entries` method
  // https://tc39.es/ecma262/#sec-object.entries
  entries: createMethod(true),
  // `Object.values` method
  // https://tc39.es/ecma262/#sec-object.values
  values: createMethod(false)
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/object-to-string.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};


/***/ }),

/***/ "./node_modules/core-js/internals/ordinary-to-primitive.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/ordinary-to-primitive.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var TypeError = global.TypeError;

// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
module.exports = function (input, pref) {
  var fn, val;
  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;
  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),

/***/ "./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/own-keys.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");
var getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

var concat = uncurryThis([].concat);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};


/***/ }),

/***/ "./node_modules/core-js/internals/path.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/path.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = global;


/***/ }),

/***/ "./node_modules/core-js/internals/perform.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/perform.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return { error: false, value: exec() };
  } catch (error) {
    return { error: true, value: error };
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/promise-resolve.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/promise-resolve.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var newPromiseCapability = __webpack_require__(/*! ../internals/new-promise-capability */ "./node_modules/core-js/internals/new-promise-capability.js");

module.exports = function (C, x) {
  anObject(C);
  if (isObject(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};


/***/ }),

/***/ "./node_modules/core-js/internals/queue.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/internals/queue.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var Queue = function () {
  this.head = null;
  this.tail = null;
};

Queue.prototype = {
  add: function (item) {
    var entry = { item: item, next: null };
    if (this.head) this.tail.next = entry;
    else this.head = entry;
    this.tail = entry;
  },
  get: function () {
    var entry = this.head;
    if (entry) {
      this.head = entry.next;
      if (this.tail === entry) this.tail = null;
      return entry.item;
    }
  }
};

module.exports = Queue;


/***/ }),

/***/ "./node_modules/core-js/internals/redefine-all.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/redefine-all.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");

module.exports = function (target, src, options) {
  for (var key in src) redefine(target, key, src[key], options);
  return target;
};


/***/ }),

/***/ "./node_modules/core-js/internals/redefine.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/redefine.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var CONFIGURABLE_FUNCTION_NAME = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").CONFIGURABLE;

var getInternalState = InternalStateModule.get;
var enforceInternalState = InternalStateModule.enforce;
var TEMPLATE = String(String).split('String');

(module.exports = function (O, key, value, options) {
  var unsafe = options ? !!options.unsafe : false;
  var simple = options ? !!options.enumerable : false;
  var noTargetGet = options ? !!options.noTargetGet : false;
  var name = options && options.name !== undefined ? options.name : key;
  var state;
  if (isCallable(value)) {
    if (String(name).slice(0, 7) === 'Symbol(') {
      name = '[' + String(name).replace(/^Symbol\(([^)]*)\)/, '$1') + ']';
    }
    if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {
      createNonEnumerableProperty(value, 'name', name);
    }
    state = enforceInternalState(value);
    if (!state.source) {
      state.source = TEMPLATE.join(typeof name == 'string' ? name : '');
    }
  }
  if (O === global) {
    if (simple) O[key] = value;
    else setGlobal(key, value);
    return;
  } else if (!unsafe) {
    delete O[key];
  } else if (!noTargetGet && O[key]) {
    simple = true;
  }
  if (simple) O[key] = value;
  else createNonEnumerableProperty(O, key, value);
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, 'toString', function toString() {
  return isCallable(this) && getInternalState(this).source || inspectSource(this);
});


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-exec-abstract.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-exec-abstract.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var regexpExec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");

var TypeError = global.TypeError;

// `RegExpExec` abstract operation
// https://tc39.es/ecma262/#sec-regexpexec
module.exports = function (R, S) {
  var exec = R.exec;
  if (isCallable(exec)) {
    var result = call(exec, R, S);
    if (result !== null) anObject(result);
    return result;
  }
  if (classof(R) === 'RegExp') return call(regexpExec, R, S);
  throw TypeError('RegExp#exec called on incompatible receiver');
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-exec.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-exec.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */
/* eslint-disable regexp/no-useless-quantifier -- testing */
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var regexpFlags = __webpack_require__(/*! ../internals/regexp-flags */ "./node_modules/core-js/internals/regexp-flags.js");
var stickyHelpers = __webpack_require__(/*! ../internals/regexp-sticky-helpers */ "./node_modules/core-js/internals/regexp-sticky-helpers.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var getInternalState = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js").get;
var UNSUPPORTED_DOT_ALL = __webpack_require__(/*! ../internals/regexp-unsupported-dot-all */ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js");
var UNSUPPORTED_NCG = __webpack_require__(/*! ../internals/regexp-unsupported-ncg */ "./node_modules/core-js/internals/regexp-unsupported-ncg.js");

var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  call(nativeExec, re1, 'a');
  call(nativeExec, re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;

if (PATCH) {
  patchedExec = function exec(string) {
    var re = this;
    var state = getInternalState(re);
    var str = toString(string);
    var raw = state.raw;
    var result, reCopy, lastIndex, match, i, object, group;

    if (raw) {
      raw.lastIndex = re.lastIndex;
      result = call(patchedExec, raw, str);
      re.lastIndex = raw.lastIndex;
      return result;
    }

    var groups = state.groups;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = call(regexpFlags, re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = replace(flags, 'y', '');
      if (indexOf(flags, 'g') === -1) {
        flags += 'g';
      }

      strCopy = stringSlice(str, re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = call(nativeExec, sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = stringSlice(match.input, charsAdded);
        match[0] = stringSlice(match[0], charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/
      call(nativeReplace, match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    if (match && groups) {
      match.groups = object = create(null);
      for (i = 0; i < groups.length; i++) {
        group = groups[i];
        object[group[0]] = match[group[1]];
      }
    }

    return match;
  };
}

module.exports = patchedExec;


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-flags.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-flags.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

// `RegExp.prototype.flags` getter implementation
// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-sticky-helpers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-sticky-helpers.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
var $RegExp = global.RegExp;

var UNSUPPORTED_Y = fails(function () {
  var re = $RegExp('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') != null;
});

// UC Browser bug
// https://github.com/zloirock/core-js/issues/1008
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
  return !$RegExp('a', 'y').sticky;
});

var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = $RegExp('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') != null;
});

module.exports = {
  BROKEN_CARET: BROKEN_CARET,
  MISSED_STICKY: MISSED_STICKY,
  UNSUPPORTED_Y: UNSUPPORTED_Y
};


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-unsupported-dot-all.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-unsupported-dot-all.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('.', 's');
  return !(re.dotAll && re.exec('\n') && re.flags === 's');
});


/***/ }),

/***/ "./node_modules/core-js/internals/regexp-unsupported-ncg.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/regexp-unsupported-ncg.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('(?<a>b)', 'g');
  return re.exec('b').groups.a !== 'b' ||
    'b'.replace(re, '$<a>c') !== 'bc';
});


/***/ }),

/***/ "./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

var TypeError = global.TypeError;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on " + it);
  return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/same-value-zero.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/same-value-zero.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// `SameValueZero` abstract operation
// https://tc39.es/ecma262/#sec-samevaluezero
module.exports = function (x, y) {
  // eslint-disable-next-line no-self-compare -- NaN check
  return x === y || x != x && y != y;
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-global.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/set-global.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

module.exports = function (key, value) {
  try {
    defineProperty(global, key, { value: value, configurable: true, writable: true });
  } catch (error) {
    global[key] = value;
  } return value;
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-species.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/set-species.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
  var defineProperty = definePropertyModule.f;

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineProperty(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-to-string-tag.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/set-to-string-tag.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (target, TAG, STATIC) {
  if (target && !STATIC) target = target.prototype;
  if (target && !hasOwn(target, TO_STRING_TAG)) {
    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/shared-key.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared-store.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/shared-store.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");

var SHARED = '__core-js_shared__';
var store = global[SHARED] || setGlobal(SHARED, {});

module.exports = store;


/***/ }),

/***/ "./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/shared.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var store = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.20.2',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: '© 2022 Denis Pushkarev (zloirock.ru)'
});


/***/ }),

/***/ "./node_modules/core-js/internals/species-constructor.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/species-constructor.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aConstructor = __webpack_require__(/*! ../internals/a-constructor */ "./node_modules/core-js/internals/a-constructor.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');

// `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor
module.exports = function (O, defaultConstructor) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aConstructor(S);
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-html-forced.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/string-html-forced.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// check the existence of a method, lowercase
// of a tag and escaping quotes in arguments
module.exports = function (METHOD_NAME) {
  return fails(function () {
    var test = ''[METHOD_NAME]('"');
    return test !== test.toLowerCase() || test.split('"').length > 3;
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/string-multibyte.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);

var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = toString(requireObjectCoercible($this));
    var position = toIntegerOrInfinity(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = charCodeAt(S, position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING
          ? charAt(S, position)
          : first
        : CONVERT_TO_STRING
          ? stringSlice(S, position, position + 2)
          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-pad-webkit-bug.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/string-pad-webkit-bug.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/zloirock/core-js/issues/280
var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");

module.exports = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent);


/***/ }),

/***/ "./node_modules/core-js/internals/string-pad.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/string-pad.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-string-pad-start-end
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var $repeat = __webpack_require__(/*! ../internals/string-repeat */ "./node_modules/core-js/internals/string-repeat.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var repeat = uncurryThis($repeat);
var stringSlice = uncurryThis(''.slice);
var ceil = Math.ceil;

// `String.prototype.{ padStart, padEnd }` methods implementation
var createMethod = function (IS_END) {
  return function ($this, maxLength, fillString) {
    var S = toString(requireObjectCoercible($this));
    var intMaxLength = toLength(maxLength);
    var stringLength = S.length;
    var fillStr = fillString === undefined ? ' ' : toString(fillString);
    var fillLen, stringFiller;
    if (intMaxLength <= stringLength || fillStr == '') return S;
    fillLen = intMaxLength - stringLength;
    stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));
    if (stringFiller.length > fillLen) stringFiller = stringSlice(stringFiller, 0, fillLen);
    return IS_END ? S + stringFiller : stringFiller + S;
  };
};

module.exports = {
  // `String.prototype.padStart` method
  // https://tc39.es/ecma262/#sec-string.prototype.padstart
  start: createMethod(false),
  // `String.prototype.padEnd` method
  // https://tc39.es/ecma262/#sec-string.prototype.padend
  end: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-punycode-to-ascii.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/string-punycode-to-ascii.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1
var base = 36;
var tMin = 1;
var tMax = 26;
var skew = 38;
var damp = 700;
var initialBias = 72;
var initialN = 128; // 0x80
var delimiter = '-'; // '\x2D'
var regexNonASCII = /[^\0-\u007E]/; // non-ASCII chars
var regexSeparators = /[.\u3002\uFF0E\uFF61]/g; // RFC 3490 separators
var OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';
var baseMinusTMin = base - tMin;

var RangeError = global.RangeError;
var exec = uncurryThis(regexSeparators.exec);
var floor = Math.floor;
var fromCharCode = String.fromCharCode;
var charCodeAt = uncurryThis(''.charCodeAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var split = uncurryThis(''.split);
var toLowerCase = uncurryThis(''.toLowerCase);

/**
 * Creates an array containing the numeric code points of each Unicode
 * character in the string. While JavaScript uses UCS-2 internally,
 * this function will convert a pair of surrogate halves (each of which
 * UCS-2 exposes as separate characters) into a single code point,
 * matching UTF-16.
 */
var ucs2decode = function (string) {
  var output = [];
  var counter = 0;
  var length = string.length;
  while (counter < length) {
    var value = charCodeAt(string, counter++);
    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
      // It's a high surrogate, and there is a next character.
      var extra = charCodeAt(string, counter++);
      if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.
        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
      } else {
        // It's an unmatched surrogate; only append this code unit, in case the
        // next code unit is the high surrogate of a surrogate pair.
        push(output, value);
        counter--;
      }
    } else {
      push(output, value);
    }
  }
  return output;
};

/**
 * Converts a digit/integer into a basic code point.
 */
var digitToBasic = function (digit) {
  //  0..25 map to ASCII a..z or A..Z
  // 26..35 map to ASCII 0..9
  return digit + 22 + 75 * (digit < 26);
};

/**
 * Bias adaptation function as per section 3.4 of RFC 3492.
 * https://tools.ietf.org/html/rfc3492#section-3.4
 */
var adapt = function (delta, numPoints, firstTime) {
  var k = 0;
  delta = firstTime ? floor(delta / damp) : delta >> 1;
  delta += floor(delta / numPoints);
  while (delta > baseMinusTMin * tMax >> 1) {
    delta = floor(delta / baseMinusTMin);
    k += base;
  }
  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
};

/**
 * Converts a string of Unicode symbols (e.g. a domain name label) to a
 * Punycode string of ASCII-only symbols.
 */
var encode = function (input) {
  var output = [];

  // Convert the input in UCS-2 to an array of Unicode code points.
  input = ucs2decode(input);

  // Cache the length.
  var inputLength = input.length;

  // Initialize the state.
  var n = initialN;
  var delta = 0;
  var bias = initialBias;
  var i, currentValue;

  // Handle the basic code points.
  for (i = 0; i < input.length; i++) {
    currentValue = input[i];
    if (currentValue < 0x80) {
      push(output, fromCharCode(currentValue));
    }
  }

  var basicLength = output.length; // number of basic code points.
  var handledCPCount = basicLength; // number of code points that have been handled;

  // Finish the basic string with a delimiter unless it's empty.
  if (basicLength) {
    push(output, delimiter);
  }

  // Main encoding loop:
  while (handledCPCount < inputLength) {
    // All non-basic code points < n have been handled already. Find the next larger one:
    var m = maxInt;
    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue >= n && currentValue < m) {
        m = currentValue;
      }
    }

    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.
    var handledCPCountPlusOne = handledCPCount + 1;
    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
      throw RangeError(OVERFLOW_ERROR);
    }

    delta += (m - n) * handledCPCountPlusOne;
    n = m;

    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue < n && ++delta > maxInt) {
        throw RangeError(OVERFLOW_ERROR);
      }
      if (currentValue == n) {
        // Represent delta as a generalized variable-length integer.
        var q = delta;
        var k = base;
        while (true) {
          var t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
          if (q < t) break;
          var qMinusT = q - t;
          var baseMinusT = base - t;
          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
          q = floor(qMinusT / baseMinusT);
          k += base;
        }

        push(output, fromCharCode(digitToBasic(q)));
        bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
        delta = 0;
        handledCPCount++;
      }
    }

    delta++;
    n++;
  }
  return join(output, '');
};

module.exports = function (input) {
  var encoded = [];
  var labels = split(replace(toLowerCase(input), regexSeparators, '\u002E'), '.');
  var i, label;
  for (i = 0; i < labels.length; i++) {
    label = labels[i];
    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);
  }
  return join(encoded, '.');
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-repeat.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/string-repeat.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var RangeError = global.RangeError;

// `String.prototype.repeat` method implementation
// https://tc39.es/ecma262/#sec-string.prototype.repeat
module.exports = function repeat(count) {
  var str = toString(requireObjectCoercible(this));
  var result = '';
  var n = toIntegerOrInfinity(count);
  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');
  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/string-trim.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var whitespaces = __webpack_require__(/*! ../internals/whitespaces */ "./node_modules/core-js/internals/whitespaces.js");

var replace = uncurryThis(''.replace);
var whitespace = '[' + whitespaces + ']';
var ltrim = RegExp('^' + whitespace + whitespace + '*');
var rtrim = RegExp(whitespace + whitespace + '*$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = replace(string, ltrim, '');
    if (TYPE & 2) string = replace(string, rtrim, '');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),

/***/ "./node_modules/core-js/internals/task.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/task.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");
var createElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var IS_IOS = __webpack_require__(/*! ../internals/engine-is-ios */ "./node_modules/core-js/internals/engine-is-ios.js");
var IS_NODE = __webpack_require__(/*! ../internals/engine-is-node */ "./node_modules/core-js/internals/engine-is-node.js");

var set = global.setImmediate;
var clear = global.clearImmediate;
var process = global.process;
var Dispatch = global.Dispatch;
var Function = global.Function;
var MessageChannel = global.MessageChannel;
var String = global.String;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var location, defer, channel, port;

try {
  // Deno throws a ReferenceError on `location` access without `--location` flag
  location = global.location;
} catch (error) { /* empty */ }

var run = function (id) {
  if (hasOwn(queue, id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};

var runner = function (id) {
  return function () {
    run(id);
  };
};

var listener = function (event) {
  run(event.data);
};

var post = function (id) {
  // old engines have not location.origin
  global.postMessage(String(id), location.protocol + '//' + location.host);
};

// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!set || !clear) {
  set = function setImmediate(fn) {
    var args = arraySlice(arguments, 1);
    queue[++counter] = function () {
      apply(isCallable(fn) ? fn : Function(fn), undefined, args);
    };
    defer(counter);
    return counter;
  };
  clear = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (IS_NODE) {
    defer = function (id) {
      process.nextTick(runner(id));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(runner(id));
    };
  // Browsers with MessageChannel, includes WebWorkers
  // except iOS - https://github.com/zloirock/core-js/issues/624
  } else if (MessageChannel && !IS_IOS) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = bind(port.postMessage, port);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (
    global.addEventListener &&
    isCallable(global.postMessage) &&
    !global.importScripts &&
    location && location.protocol !== 'file:' &&
    !fails(post)
  ) {
    defer = post;
    global.addEventListener('message', listener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in createElement('script')) {
    defer = function (id) {
      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(runner(id), 0);
    };
  }
}

module.exports = {
  set: set,
  clear: clear
};


/***/ }),

/***/ "./node_modules/core-js/internals/this-number-value.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/this-number-value.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

// `thisNumberValue` abstract operation
// https://tc39.es/ecma262/#sec-thisnumbervalue
module.exports = uncurryThis(1.0.valueOf);


/***/ }),

/***/ "./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toIntegerOrInfinity(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-index.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/to-index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");

var RangeError = global.RangeError;

// `ToIndex` abstract operation
// https://tc39.es/ecma262/#sec-toindex
module.exports = function (it) {
  if (it === undefined) return 0;
  var number = toIntegerOrInfinity(it);
  var length = toLength(number);
  if (number !== length) throw RangeError('Wrong length or index');
  return length;
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-integer-or-infinity.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/to-integer-or-infinity.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var ceil = Math.ceil;
var floor = Math.floor;

// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
module.exports = function (argument) {
  var number = +argument;
  // eslint-disable-next-line no-self-compare -- safe
  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-length.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
module.exports = function (argument) {
  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

var Object = global.Object;

// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
module.exports = function (argument) {
  return Object(requireObjectCoercible(argument));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-offset.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-offset.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toPositiveInteger = __webpack_require__(/*! ../internals/to-positive-integer */ "./node_modules/core-js/internals/to-positive-integer.js");

var RangeError = global.RangeError;

module.exports = function (it, BYTES) {
  var offset = toPositiveInteger(it);
  if (offset % BYTES) throw RangeError('Wrong offset');
  return offset;
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-positive-integer.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/to-positive-integer.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");

var RangeError = global.RangeError;

module.exports = function (it) {
  var result = toIntegerOrInfinity(it);
  if (result < 0) throw RangeError("The argument can't be less than 0");
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/to-primitive.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var ordinaryToPrimitive = __webpack_require__(/*! ../internals/ordinary-to-primitive */ "./node_modules/core-js/internals/ordinary-to-primitive.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TypeError = global.TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
module.exports = function (input, pref) {
  if (!isObject(input) || isSymbol(input)) return input;
  var exoticToPrim = getMethod(input, TO_PRIMITIVE);
  var result;
  if (exoticToPrim) {
    if (pref === undefined) pref = 'default';
    result = call(exoticToPrim, input, pref);
    if (!isObject(result) || isSymbol(result)) return result;
    throw TypeError("Can't convert object to primitive value");
  }
  if (pref === undefined) pref = 'number';
  return ordinaryToPrimitive(input, pref);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-property-key.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/to-property-key.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ "./node_modules/core-js/internals/to-primitive.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");

// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
module.exports = function (argument) {
  var key = toPrimitive(argument, 'string');
  return isSymbol(key) ? key : key + '';
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),

/***/ "./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-string.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");

var String = global.String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');
  return String(argument);
};


/***/ }),

/***/ "./node_modules/core-js/internals/try-to-string.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/try-to-string.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

var String = global.String;

module.exports = function (argument) {
  try {
    return String(argument);
  } catch (error) {
    return 'Object';
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/typed-array-constructor.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/typed-array-constructor.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(/*! ../internals/typed-array-constructors-require-wrappers */ "./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var ArrayBufferModule = __webpack_require__(/*! ../internals/array-buffer */ "./node_modules/core-js/internals/array-buffer.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var isIntegralNumber = __webpack_require__(/*! ../internals/is-integral-number */ "./node_modules/core-js/internals/is-integral-number.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toIndex = __webpack_require__(/*! ../internals/to-index */ "./node_modules/core-js/internals/to-index.js");
var toOffset = __webpack_require__(/*! ../internals/to-offset */ "./node_modules/core-js/internals/to-offset.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var getOwnPropertyNames = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js").f;
var typedArrayFrom = __webpack_require__(/*! ../internals/typed-array-from */ "./node_modules/core-js/internals/typed-array-from.js");
var forEach = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").forEach;
var setSpecies = __webpack_require__(/*! ../internals/set-species */ "./node_modules/core-js/internals/set-species.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var inheritIfRequired = __webpack_require__(/*! ../internals/inherit-if-required */ "./node_modules/core-js/internals/inherit-if-required.js");

var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var round = Math.round;
var RangeError = global.RangeError;
var ArrayBuffer = ArrayBufferModule.ArrayBuffer;
var ArrayBufferPrototype = ArrayBuffer.prototype;
var DataView = ArrayBufferModule.DataView;
var NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;
var TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;
var TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;
var TypedArray = ArrayBufferViewCore.TypedArray;
var TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var isTypedArray = ArrayBufferViewCore.isTypedArray;
var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
var WRONG_LENGTH = 'Wrong length';

var fromList = function (C, list) {
  aTypedArrayConstructor(C);
  var index = 0;
  var length = list.length;
  var result = new C(length);
  while (length > index) result[index] = list[index++];
  return result;
};

var addGetter = function (it, key) {
  nativeDefineProperty(it, key, { get: function () {
    return getInternalState(this)[key];
  } });
};

var isArrayBuffer = function (it) {
  var klass;
  return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) == 'ArrayBuffer' || klass == 'SharedArrayBuffer';
};

var isTypedArrayIndex = function (target, key) {
  return isTypedArray(target)
    && !isSymbol(key)
    && key in target
    && isIntegralNumber(+key)
    && key >= 0;
};

var wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {
  key = toPropertyKey(key);
  return isTypedArrayIndex(target, key)
    ? createPropertyDescriptor(2, target[key])
    : nativeGetOwnPropertyDescriptor(target, key);
};

var wrappedDefineProperty = function defineProperty(target, key, descriptor) {
  key = toPropertyKey(key);
  if (isTypedArrayIndex(target, key)
    && isObject(descriptor)
    && hasOwn(descriptor, 'value')
    && !hasOwn(descriptor, 'get')
    && !hasOwn(descriptor, 'set')
    // TODO: add validation descriptor w/o calling accessors
    && !descriptor.configurable
    && (!hasOwn(descriptor, 'writable') || descriptor.writable)
    && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)
  ) {
    target[key] = descriptor.value;
    return target;
  } return nativeDefineProperty(target, key, descriptor);
};

if (DESCRIPTORS) {
  if (!NATIVE_ARRAY_BUFFER_VIEWS) {
    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;
    definePropertyModule.f = wrappedDefineProperty;
    addGetter(TypedArrayPrototype, 'buffer');
    addGetter(TypedArrayPrototype, 'byteOffset');
    addGetter(TypedArrayPrototype, 'byteLength');
    addGetter(TypedArrayPrototype, 'length');
  }

  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {
    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,
    defineProperty: wrappedDefineProperty
  });

  module.exports = function (TYPE, wrapper, CLAMPED) {
    var BYTES = TYPE.match(/\d+$/)[0] / 8;
    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';
    var GETTER = 'get' + TYPE;
    var SETTER = 'set' + TYPE;
    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];
    var TypedArrayConstructor = NativeTypedArrayConstructor;
    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;
    var exported = {};

    var getter = function (that, index) {
      var data = getInternalState(that);
      return data.view[GETTER](index * BYTES + data.byteOffset, true);
    };

    var setter = function (that, index, value) {
      var data = getInternalState(that);
      if (CLAMPED) value = (value = round(value)) < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;
      data.view[SETTER](index * BYTES + data.byteOffset, value, true);
    };

    var addElement = function (that, index) {
      nativeDefineProperty(that, index, {
        get: function () {
          return getter(this, index);
        },
        set: function (value) {
          return setter(this, index, value);
        },
        enumerable: true
      });
    };

    if (!NATIVE_ARRAY_BUFFER_VIEWS) {
      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {
        anInstance(that, TypedArrayConstructorPrototype);
        var index = 0;
        var byteOffset = 0;
        var buffer, byteLength, length;
        if (!isObject(data)) {
          length = toIndex(data);
          byteLength = length * BYTES;
          buffer = new ArrayBuffer(byteLength);
        } else if (isArrayBuffer(data)) {
          buffer = data;
          byteOffset = toOffset(offset, BYTES);
          var $len = data.byteLength;
          if ($length === undefined) {
            if ($len % BYTES) throw RangeError(WRONG_LENGTH);
            byteLength = $len - byteOffset;
            if (byteLength < 0) throw RangeError(WRONG_LENGTH);
          } else {
            byteLength = toLength($length) * BYTES;
            if (byteLength + byteOffset > $len) throw RangeError(WRONG_LENGTH);
          }
          length = byteLength / BYTES;
        } else if (isTypedArray(data)) {
          return fromList(TypedArrayConstructor, data);
        } else {
          return call(typedArrayFrom, TypedArrayConstructor, data);
        }
        setInternalState(that, {
          buffer: buffer,
          byteOffset: byteOffset,
          byteLength: byteLength,
          length: length,
          view: new DataView(buffer)
        });
        while (index < length) addElement(that, index++);
      });

      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);
      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);
    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {
      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {
        anInstance(dummy, TypedArrayConstructorPrototype);
        return inheritIfRequired(function () {
          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));
          if (isArrayBuffer(data)) return $length !== undefined
            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)
            : typedArrayOffset !== undefined
              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))
              : new NativeTypedArrayConstructor(data);
          if (isTypedArray(data)) return fromList(TypedArrayConstructor, data);
          return call(typedArrayFrom, TypedArrayConstructor, data);
        }(), dummy, TypedArrayConstructor);
      });

      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);
      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {
        if (!(key in TypedArrayConstructor)) {
          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);
        }
      });
      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;
    }

    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);
    }

    createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_CONSTRUCTOR, TypedArrayConstructor);

    if (TYPED_ARRAY_TAG) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);
    }

    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;

    $({
      global: true, forced: TypedArrayConstructor != NativeTypedArrayConstructor, sham: !NATIVE_ARRAY_BUFFER_VIEWS
    }, exported);

    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {
      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);
    }

    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);
    }

    setSpecies(CONSTRUCTOR_NAME);
  };
} else module.exports = function () { /* empty */ };


/***/ }),

/***/ "./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable no-new -- required for testing */
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var checkCorrectnessOfIteration = __webpack_require__(/*! ../internals/check-correctness-of-iteration */ "./node_modules/core-js/internals/check-correctness-of-iteration.js");
var NATIVE_ARRAY_BUFFER_VIEWS = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS;

var ArrayBuffer = global.ArrayBuffer;
var Int8Array = global.Int8Array;

module.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {
  Int8Array(1);
}) || !fails(function () {
  new Int8Array(-1);
}) || !checkCorrectnessOfIteration(function (iterable) {
  new Int8Array();
  new Int8Array(null);
  new Int8Array(1.5);
  new Int8Array(iterable);
}, true) || fails(function () {
  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill
  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;
});


/***/ }),

/***/ "./node_modules/core-js/internals/typed-array-from-species-and-list.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/core-js/internals/typed-array-from-species-and-list.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var arrayFromConstructorAndList = __webpack_require__(/*! ../internals/array-from-constructor-and-list */ "./node_modules/core-js/internals/array-from-constructor-and-list.js");
var typedArraySpeciesConstructor = __webpack_require__(/*! ../internals/typed-array-species-constructor */ "./node_modules/core-js/internals/typed-array-species-constructor.js");

module.exports = function (instance, list) {
  return arrayFromConstructorAndList(typedArraySpeciesConstructor(instance), list);
};


/***/ }),

/***/ "./node_modules/core-js/internals/typed-array-from.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/typed-array-from.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aConstructor = __webpack_require__(/*! ../internals/a-constructor */ "./node_modules/core-js/internals/a-constructor.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");
var isArrayIteratorMethod = __webpack_require__(/*! ../internals/is-array-iterator-method */ "./node_modules/core-js/internals/is-array-iterator-method.js");
var aTypedArrayConstructor = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;

module.exports = function from(source /* , mapfn, thisArg */) {
  var C = aConstructor(this);
  var O = toObject(source);
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  var iteratorMethod = getIteratorMethod(O);
  var i, length, result, step, iterator, next;
  if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {
    iterator = getIterator(O, iteratorMethod);
    next = iterator.next;
    O = [];
    while (!(step = call(next, iterator)).done) {
      O.push(step.value);
    }
  }
  if (mapping && argumentsLength > 2) {
    mapfn = bind(mapfn, arguments[2]);
  }
  length = lengthOfArrayLike(O);
  result = new (aTypedArrayConstructor(C))(length);
  for (i = 0; length > i; i++) {
    result[i] = mapping ? mapfn(O[i], i) : O[i];
  }
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/typed-array-species-constructor.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/typed-array-species-constructor.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");

var TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;

// a part of `TypedArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#typedarray-species-create
module.exports = function (originalArray) {
  return aTypedArrayConstructor(speciesConstructor(originalArray, originalArray[TYPED_ARRAY_CONSTRUCTOR]));
};


/***/ }),

/***/ "./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/uid.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);

module.exports = function (key) {
  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};


/***/ }),

/***/ "./node_modules/core-js/internals/use-symbol-as-uid.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/use-symbol-as-uid.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable es/no-symbol -- required for testing */
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/native-symbol */ "./node_modules/core-js/internals/native-symbol.js");

module.exports = NATIVE_SYMBOL
  && !Symbol.sham
  && typeof Symbol.iterator == 'symbol';


/***/ }),

/***/ "./node_modules/core-js/internals/v8-prototype-define-bug.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/v8-prototype-define-bug.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
module.exports = DESCRIPTORS && fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(function () { /* empty */ }, 'prototype', {
    value: 42,
    writable: false
  }).prototype != 42;
});


/***/ }),

/***/ "./node_modules/core-js/internals/well-known-symbol-wrapped.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/well-known-symbol-wrapped.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

exports.f = wellKnownSymbol;


/***/ }),

/***/ "./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/native-symbol */ "./node_modules/core-js/internals/native-symbol.js");
var USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");

var WellKnownSymbolsStore = shared('wks');
var Symbol = global.Symbol;
var symbolFor = Symbol && Symbol['for'];
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {
    var description = 'Symbol.' + name;
    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {
      WellKnownSymbolsStore[name] = Symbol[name];
    } else if (USE_SYMBOL_AS_UID && symbolFor) {
      WellKnownSymbolsStore[name] = symbolFor(description);
    } else {
      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);
    }
  } return WellKnownSymbolsStore[name];
};


/***/ }),

/***/ "./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/whitespaces.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),

/***/ "./node_modules/core-js/modules/es.array-buffer.slice.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.array-buffer.slice.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var ArrayBufferModule = __webpack_require__(/*! ../internals/array-buffer */ "./node_modules/core-js/internals/array-buffer.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");

var ArrayBuffer = ArrayBufferModule.ArrayBuffer;
var DataView = ArrayBufferModule.DataView;
var DataViewPrototype = DataView.prototype;
var un$ArrayBufferSlice = uncurryThis(ArrayBuffer.prototype.slice);
var getUint8 = uncurryThis(DataViewPrototype.getUint8);
var setUint8 = uncurryThis(DataViewPrototype.setUint8);

var INCORRECT_SLICE = fails(function () {
  return !new ArrayBuffer(2).slice(1, undefined).byteLength;
});

// `ArrayBuffer.prototype.slice` method
// https://tc39.es/ecma262/#sec-arraybuffer.prototype.slice
$({ target: 'ArrayBuffer', proto: true, unsafe: true, forced: INCORRECT_SLICE }, {
  slice: function slice(start, end) {
    if (un$ArrayBufferSlice && end === undefined) {
      return un$ArrayBufferSlice(anObject(this), start); // FF fix
    }
    var length = anObject(this).byteLength;
    var first = toAbsoluteIndex(start, length);
    var fin = toAbsoluteIndex(end === undefined ? length : end, length);
    var result = new (speciesConstructor(this, ArrayBuffer))(toLength(fin - first));
    var viewSource = new DataView(this);
    var viewTarget = new DataView(result);
    var index = 0;
    while (first < fin) {
      setUint8(viewTarget, index++, getUint8(viewSource, first++));
    } return result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.concat.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.concat.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");

var IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;
var MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';
var TypeError = global.TypeError;

// We can't use this feature detection in V8 since it causes
// deoptimization and serious performance degradation
// https://github.com/zloirock/core-js/issues/679
var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {
  var array = [];
  array[IS_CONCAT_SPREADABLE] = false;
  return array.concat()[0] !== array;
});

var SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');

var isConcatSpreadable = function (O) {
  if (!isObject(O)) return false;
  var spreadable = O[IS_CONCAT_SPREADABLE];
  return spreadable !== undefined ? !!spreadable : isArray(O);
};

var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;

// `Array.prototype.concat` method
// https://tc39.es/ecma262/#sec-array.prototype.concat
// with adding support of @@isConcatSpreadable and @@species
$({ target: 'Array', proto: true, forced: FORCED }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  concat: function concat(arg) {
    var O = toObject(this);
    var A = arraySpeciesCreate(O, 0);
    var n = 0;
    var i, k, length, len, E;
    for (i = -1, length = arguments.length; i < length; i++) {
      E = i === -1 ? O : arguments[i];
      if (isConcatSpreadable(E)) {
        len = lengthOfArrayLike(E);
        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);
      } else {
        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
        createProperty(A, n++, E);
      }
    }
    A.length = n;
    return A;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.every.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.every.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $every = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").every;
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var STRICT_METHOD = arrayMethodIsStrict('every');

// `Array.prototype.every` method
// https://tc39.es/ecma262/#sec-array.prototype.every
$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {
  every: function every(callbackfn /* , thisArg */) {
    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.fill.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.fill.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var fill = __webpack_require__(/*! ../internals/array-fill */ "./node_modules/core-js/internals/array-fill.js");
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

// `Array.prototype.fill` method
// https://tc39.es/ecma262/#sec-array.prototype.fill
$({ target: 'Array', proto: true }, {
  fill: fill
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('fill');


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.filter.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.filter.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $filter = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").filter;
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');

// `Array.prototype.filter` method
// https://tc39.es/ecma262/#sec-array.prototype.filter
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  filter: function filter(callbackfn /* , thisArg */) {
    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.find-index.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.find-index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $findIndex = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").findIndex;
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

var FIND_INDEX = 'findIndex';
var SKIPS_HOLES = true;

// Shouldn't skip holes
if (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });

// `Array.prototype.findIndex` method
// https://tc39.es/ecma262/#sec-array.prototype.findindex
$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
  findIndex: function findIndex(callbackfn /* , that = undefined */) {
    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables(FIND_INDEX);


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.find.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.find.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $find = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").find;
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

var FIND = 'find';
var SKIPS_HOLES = true;

// Shouldn't skip holes
if (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });

// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables(FIND);


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.for-each.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.for-each.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var forEach = __webpack_require__(/*! ../internals/array-for-each */ "./node_modules/core-js/internals/array-for-each.js");

// `Array.prototype.forEach` method
// https://tc39.es/ecma262/#sec-array.prototype.foreach
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {
  forEach: forEach
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.from.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.from.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var from = __webpack_require__(/*! ../internals/array-from */ "./node_modules/core-js/internals/array-from.js");
var checkCorrectnessOfIteration = __webpack_require__(/*! ../internals/check-correctness-of-iteration */ "./node_modules/core-js/internals/check-correctness-of-iteration.js");

var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {
  // eslint-disable-next-line es/no-array-from -- required for testing
  Array.from(iterable);
});

// `Array.from` method
// https://tc39.es/ecma262/#sec-array.from
$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {
  from: from
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.includes.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.includes.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $includes = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").includes;
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");

// `Array.prototype.includes` method
// https://tc39.es/ecma262/#sec-array.prototype.includes
$({ target: 'Array', proto: true }, {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('includes');


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.index-of.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.index-of.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-array-prototype-indexof -- required for testing */
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var $IndexOf = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf;
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var un$IndexOf = uncurryThis([].indexOf);

var NEGATIVE_ZERO = !!un$IndexOf && 1 / un$IndexOf([1], 1, -0) < 0;
var STRICT_METHOD = arrayMethodIsStrict('indexOf');

// `Array.prototype.indexOf` method
// https://tc39.es/ecma262/#sec-array.prototype.indexof
$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {
  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {
    var fromIndex = arguments.length > 1 ? arguments[1] : undefined;
    return NEGATIVE_ZERO
      // convert -0 to +0
      ? un$IndexOf(this, searchElement, fromIndex) || 0
      : $IndexOf(this, searchElement, fromIndex);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.iterator.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.iterator.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var defineIterator = __webpack_require__(/*! ../internals/define-iterator */ "./node_modules/core-js/internals/define-iterator.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);

// `Array.prototype.entries` method
// https://tc39.es/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.es/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.es/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.es/ecma262/#sec-createarrayiterator
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject(iterated), // target
    index: 0,                          // next index
    kind: kind                         // kind
  });
// `%ArrayIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var kind = state.kind;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = undefined;
    return { value: undefined, done: true };
  }
  if (kind == 'keys') return { value: index, done: false };
  if (kind == 'values') return { value: target[index], done: false };
  return { value: [index, target[index]], done: false };
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.es/ecma262/#sec-createunmappedargumentsobject
// https://tc39.es/ecma262/#sec-createmappedargumentsobject
var values = Iterators.Arguments = Iterators.Array;

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');

// V8 ~ Chrome 45- bug
if (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {
  defineProperty(values, 'name', { value: 'values' });
} catch (error) { /* empty */ }


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.join.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.join.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var un$Join = uncurryThis([].join);

var ES3_STRINGS = IndexedObject != Object;
var STRICT_METHOD = arrayMethodIsStrict('join', ',');

// `Array.prototype.join` method
// https://tc39.es/ecma262/#sec-array.prototype.join
$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {
  join: function join(separator) {
    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.last-index-of.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.last-index-of.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var lastIndexOf = __webpack_require__(/*! ../internals/array-last-index-of */ "./node_modules/core-js/internals/array-last-index-of.js");

// `Array.prototype.lastIndexOf` method
// https://tc39.es/ecma262/#sec-array.prototype.lastindexof
// eslint-disable-next-line es/no-array-prototype-lastindexof -- required for testing
$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {
  lastIndexOf: lastIndexOf
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.map.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.map.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $map = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").map;
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');

// `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.reduce.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.reduce.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $reduce = __webpack_require__(/*! ../internals/array-reduce */ "./node_modules/core-js/internals/array-reduce.js").left;
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");
var CHROME_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");
var IS_NODE = __webpack_require__(/*! ../internals/engine-is-node */ "./node_modules/core-js/internals/engine-is-node.js");

var STRICT_METHOD = arrayMethodIsStrict('reduce');
// Chrome 80-82 has a critical bug
// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982
var CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;

// `Array.prototype.reduce` method
// https://tc39.es/ecma262/#sec-array.prototype.reduce
$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {
  reduce: function reduce(callbackfn /* , initialValue */) {
    var length = arguments.length;
    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.reverse.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.reverse.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");

var un$Reverse = uncurryThis([].reverse);
var test = [1, 2];

// `Array.prototype.reverse` method
// https://tc39.es/ecma262/#sec-array.prototype.reverse
// fix for Safari 12.0 bug
// https://bugs.webkit.org/show_bug.cgi?id=188794
$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {
  reverse: function reverse() {
    // eslint-disable-next-line no-self-assign -- dirty hack
    if (isArray(this)) this.length = this.length;
    return un$Reverse(this);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.slice.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.slice.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "./node_modules/core-js/internals/is-constructor.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");
var un$Slice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');

var SPECIES = wellKnownSymbol('species');
var Array = global.Array;
var max = Math.max;

// `Array.prototype.slice` method
// https://tc39.es/ecma262/#sec-array.prototype.slice
// fallback for not array-like ES3 strings and DOM objects
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  slice: function slice(start, end) {
    var O = toIndexedObject(this);
    var length = lengthOfArrayLike(O);
    var k = toAbsoluteIndex(start, length);
    var fin = toAbsoluteIndex(end === undefined ? length : end, length);
    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible
    var Constructor, result, n;
    if (isArray(O)) {
      Constructor = O.constructor;
      // cross-realm fallback
      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {
        Constructor = undefined;
      } else if (isObject(Constructor)) {
        Constructor = Constructor[SPECIES];
        if (Constructor === null) Constructor = undefined;
      }
      if (Constructor === Array || Constructor === undefined) {
        return un$Slice(O, k, fin);
      }
    }
    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));
    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);
    result.length = n;
    return result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.some.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.some.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $some = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").some;
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");

var STRICT_METHOD = arrayMethodIsStrict('some');

// `Array.prototype.some` method
// https://tc39.es/ecma262/#sec-array.prototype.some
$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {
  some: function some(callbackfn /* , thisArg */) {
    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.sort.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.sort.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var internalSort = __webpack_require__(/*! ../internals/array-sort */ "./node_modules/core-js/internals/array-sort.js");
var arrayMethodIsStrict = __webpack_require__(/*! ../internals/array-method-is-strict */ "./node_modules/core-js/internals/array-method-is-strict.js");
var FF = __webpack_require__(/*! ../internals/engine-ff-version */ "./node_modules/core-js/internals/engine-ff-version.js");
var IE_OR_EDGE = __webpack_require__(/*! ../internals/engine-is-ie-or-edge */ "./node_modules/core-js/internals/engine-is-ie-or-edge.js");
var V8 = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");
var WEBKIT = __webpack_require__(/*! ../internals/engine-webkit-version */ "./node_modules/core-js/internals/engine-webkit-version.js");

var test = [];
var un$Sort = uncurryThis(test.sort);
var push = uncurryThis(test.push);

// IE8-
var FAILS_ON_UNDEFINED = fails(function () {
  test.sort(undefined);
});
// V8 bug
var FAILS_ON_NULL = fails(function () {
  test.sort(null);
});
// Old WebKit
var STRICT_METHOD = arrayMethodIsStrict('sort');

var STABLE_SORT = !fails(function () {
  // feature detection can be too slow, so check engines versions
  if (V8) return V8 < 70;
  if (FF && FF > 3) return;
  if (IE_OR_EDGE) return true;
  if (WEBKIT) return WEBKIT < 603;

  var result = '';
  var code, chr, value, index;

  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)
  for (code = 65; code < 76; code++) {
    chr = String.fromCharCode(code);

    switch (code) {
      case 66: case 69: case 70: case 72: value = 3; break;
      case 68: case 71: value = 4; break;
      default: value = 2;
    }

    for (index = 0; index < 47; index++) {
      test.push({ k: chr + index, v: value });
    }
  }

  test.sort(function (a, b) { return b.v - a.v; });

  for (index = 0; index < test.length; index++) {
    chr = test[index].k.charAt(0);
    if (result.charAt(result.length - 1) !== chr) result += chr;
  }

  return result !== 'DGBEFHACIJK';
});

var FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;

var getSortCompare = function (comparefn) {
  return function (x, y) {
    if (y === undefined) return -1;
    if (x === undefined) return 1;
    if (comparefn !== undefined) return +comparefn(x, y) || 0;
    return toString(x) > toString(y) ? 1 : -1;
  };
};

// `Array.prototype.sort` method
// https://tc39.es/ecma262/#sec-array.prototype.sort
$({ target: 'Array', proto: true, forced: FORCED }, {
  sort: function sort(comparefn) {
    if (comparefn !== undefined) aCallable(comparefn);

    var array = toObject(this);

    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);

    var items = [];
    var arrayLength = lengthOfArrayLike(array);
    var itemsLength, index;

    for (index = 0; index < arrayLength; index++) {
      if (index in array) push(items, array[index]);
    }

    internalSort(items, getSortCompare(comparefn));

    itemsLength = items.length;
    index = 0;

    while (index < itemsLength) array[index] = items[index++];
    while (index < arrayLength) delete array[index++];

    return array;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.splice.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.splice.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var arraySpeciesCreate = __webpack_require__(/*! ../internals/array-species-create */ "./node_modules/core-js/internals/array-species-create.js");
var createProperty = __webpack_require__(/*! ../internals/create-property */ "./node_modules/core-js/internals/create-property.js");
var arrayMethodHasSpeciesSupport = __webpack_require__(/*! ../internals/array-method-has-species-support */ "./node_modules/core-js/internals/array-method-has-species-support.js");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');

var TypeError = global.TypeError;
var max = Math.max;
var min = Math.min;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;
var MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';

// `Array.prototype.splice` method
// https://tc39.es/ecma262/#sec-array.prototype.splice
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  splice: function splice(start, deleteCount /* , ...items */) {
    var O = toObject(this);
    var len = lengthOfArrayLike(O);
    var actualStart = toAbsoluteIndex(start, len);
    var argumentsLength = arguments.length;
    var insertCount, actualDeleteCount, A, k, from, to;
    if (argumentsLength === 0) {
      insertCount = actualDeleteCount = 0;
    } else if (argumentsLength === 1) {
      insertCount = 0;
      actualDeleteCount = len - actualStart;
    } else {
      insertCount = argumentsLength - 2;
      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);
    }
    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {
      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);
    }
    A = arraySpeciesCreate(O, actualDeleteCount);
    for (k = 0; k < actualDeleteCount; k++) {
      from = actualStart + k;
      if (from in O) createProperty(A, k, O[from]);
    }
    A.length = actualDeleteCount;
    if (insertCount < actualDeleteCount) {
      for (k = actualStart; k < len - actualDeleteCount; k++) {
        from = k + actualDeleteCount;
        to = k + insertCount;
        if (from in O) O[to] = O[from];
        else delete O[to];
      }
      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];
    } else if (insertCount > actualDeleteCount) {
      for (k = len - actualDeleteCount; k > actualStart; k--) {
        from = k + actualDeleteCount - 1;
        to = k + insertCount - 1;
        if (from in O) O[to] = O[from];
        else delete O[to];
      }
    }
    for (k = 0; k < insertCount; k++) {
      O[k + actualStart] = arguments[k + 2];
    }
    O.length = len - actualDeleteCount + insertCount;
    return A;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.data-view.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/es.data-view.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var ArrayBufferModule = __webpack_require__(/*! ../internals/array-buffer */ "./node_modules/core-js/internals/array-buffer.js");
var NATIVE_ARRAY_BUFFER = __webpack_require__(/*! ../internals/array-buffer-native */ "./node_modules/core-js/internals/array-buffer-native.js");

// `DataView` constructor
// https://tc39.es/ecma262/#sec-dataview-constructor
$({ global: true, forced: !NATIVE_ARRAY_BUFFER }, {
  DataView: ArrayBufferModule.DataView
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.date.now.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/es.date.now.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var Date = global.Date;
var getTime = uncurryThis(Date.prototype.getTime);

// `Date.now` method
// https://tc39.es/ecma262/#sec-date.now
$({ target: 'Date', stat: true }, {
  now: function now() {
    return getTime(new Date());
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.date.to-iso-string.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.date.to-iso-string.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var toISOString = __webpack_require__(/*! ../internals/date-to-iso-string */ "./node_modules/core-js/internals/date-to-iso-string.js");

// `Date.prototype.toISOString` method
// https://tc39.es/ecma262/#sec-date.prototype.toisostring
// PhantomJS / old WebKit has a broken implementations
$({ target: 'Date', proto: true, forced: Date.prototype.toISOString !== toISOString }, {
  toISOString: toISOString
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.date.to-string.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.date.to-string.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");

var DatePrototype = Date.prototype;
var INVALID_DATE = 'Invalid Date';
var TO_STRING = 'toString';
var un$DateToString = uncurryThis(DatePrototype[TO_STRING]);
var getTime = uncurryThis(DatePrototype.getTime);

// `Date.prototype.toString` method
// https://tc39.es/ecma262/#sec-date.prototype.tostring
if (String(new Date(NaN)) != INVALID_DATE) {
  redefine(DatePrototype, TO_STRING, function toString() {
    var value = getTime(this);
    // eslint-disable-next-line no-self-compare -- NaN check
    return value === value ? un$DateToString(this) : INVALID_DATE;
  });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.function.bind.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.function.bind.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var bind = __webpack_require__(/*! ../internals/function-bind */ "./node_modules/core-js/internals/function-bind.js");

// `Function.prototype.bind` method
// https://tc39.es/ecma262/#sec-function.prototype.bind
$({ target: 'Function', proto: true }, {
  bind: bind
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.function.name.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.function.name.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var FUNCTION_NAME_EXISTS = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").EXISTS;
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;

var FunctionPrototype = Function.prototype;
var functionToString = uncurryThis(FunctionPrototype.toString);
var nameRE = /function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/;
var regExpExec = uncurryThis(nameRE.exec);
var NAME = 'name';

// Function instances `.name` property
// https://tc39.es/ecma262/#sec-function-instances-name
if (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {
  defineProperty(FunctionPrototype, NAME, {
    configurable: true,
    get: function () {
      try {
        return regExpExec(nameRE, functionToString(this))[1];
      } catch (error) {
        return '';
      }
    }
  });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.map.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/modules/es.map.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var collection = __webpack_require__(/*! ../internals/collection */ "./node_modules/core-js/internals/collection.js");
var collectionStrong = __webpack_require__(/*! ../internals/collection-strong */ "./node_modules/core-js/internals/collection-strong.js");

// `Map` constructor
// https://tc39.es/ecma262/#sec-map-objects
collection('Map', function (init) {
  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };
}, collectionStrong);


/***/ }),

/***/ "./node_modules/core-js/modules/es.number.constructor.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.number.constructor.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var inheritIfRequired = __webpack_require__(/*! ../internals/inherit-if-required */ "./node_modules/core-js/internals/inherit-if-required.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");
var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ "./node_modules/core-js/internals/to-primitive.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var getOwnPropertyNames = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js").f;
var getOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var thisNumberValue = __webpack_require__(/*! ../internals/this-number-value */ "./node_modules/core-js/internals/this-number-value.js");
var trim = __webpack_require__(/*! ../internals/string-trim */ "./node_modules/core-js/internals/string-trim.js").trim;

var NUMBER = 'Number';
var NativeNumber = global[NUMBER];
var NumberPrototype = NativeNumber.prototype;
var TypeError = global.TypeError;
var arraySlice = uncurryThis(''.slice);
var charCodeAt = uncurryThis(''.charCodeAt);

// `ToNumeric` abstract operation
// https://tc39.es/ecma262/#sec-tonumeric
var toNumeric = function (value) {
  var primValue = toPrimitive(value, 'number');
  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);
};

// `ToNumber` abstract operation
// https://tc39.es/ecma262/#sec-tonumber
var toNumber = function (argument) {
  var it = toPrimitive(argument, 'number');
  var first, third, radix, maxCode, digits, length, index, code;
  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');
  if (typeof it == 'string' && it.length > 2) {
    it = trim(it);
    first = charCodeAt(it, 0);
    if (first === 43 || first === 45) {
      third = charCodeAt(it, 2);
      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix
    } else if (first === 48) {
      switch (charCodeAt(it, 1)) {
        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i
        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i
        default: return +it;
      }
      digits = arraySlice(it, 2);
      length = digits.length;
      for (index = 0; index < length; index++) {
        code = charCodeAt(digits, index);
        // parseInt parses a string to a first unavailable symbol
        // but ToNumber should return NaN if a string contains unavailable symbols
        if (code < 48 || code > maxCode) return NaN;
      } return parseInt(digits, radix);
    }
  } return +it;
};

// `Number` constructor
// https://tc39.es/ecma262/#sec-number-constructor
if (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {
  var NumberWrapper = function Number(value) {
    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));
    var dummy = this;
    // check on 1..constructor(foo) case
    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })
      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;
  };
  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (
    // ES3:
    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +
    // ES2015 (in case, if modules with ES2015 Number statics required before):
    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +
    // ESNext
    'fromString,range'
  ).split(','), j = 0, key; keys.length > j; j++) {
    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {
      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));
    }
  }
  NumberWrapper.prototype = NumberPrototype;
  NumberPrototype.constructor = NumberWrapper;
  redefine(global, NUMBER, NumberWrapper);
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.number.is-integer.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/es.number.is-integer.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var isIntegralNumber = __webpack_require__(/*! ../internals/is-integral-number */ "./node_modules/core-js/internals/is-integral-number.js");

// `Number.isInteger` method
// https://tc39.es/ecma262/#sec-number.isinteger
$({ target: 'Number', stat: true }, {
  isInteger: isIntegralNumber
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.number.is-safe-integer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/modules/es.number.is-safe-integer.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var isIntegralNumber = __webpack_require__(/*! ../internals/is-integral-number */ "./node_modules/core-js/internals/is-integral-number.js");

var abs = Math.abs;

// `Number.isSafeInteger` method
// https://tc39.es/ecma262/#sec-number.issafeinteger
$({ target: 'Number', stat: true }, {
  isSafeInteger: function isSafeInteger(number) {
    return isIntegralNumber(number) && abs(number) <= 0x1FFFFFFFFFFFFF;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.number.max-safe-integer.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.number.max-safe-integer.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");

// `Number.MAX_SAFE_INTEGER` constant
// https://tc39.es/ecma262/#sec-number.max_safe_integer
$({ target: 'Number', stat: true }, {
  MAX_SAFE_INTEGER: 0x1FFFFFFFFFFFFF
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.number.to-fixed.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.number.to-fixed.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var thisNumberValue = __webpack_require__(/*! ../internals/this-number-value */ "./node_modules/core-js/internals/this-number-value.js");
var $repeat = __webpack_require__(/*! ../internals/string-repeat */ "./node_modules/core-js/internals/string-repeat.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var RangeError = global.RangeError;
var String = global.String;
var floor = Math.floor;
var repeat = uncurryThis($repeat);
var stringSlice = uncurryThis(''.slice);
var un$ToFixed = uncurryThis(1.0.toFixed);

var pow = function (x, n, acc) {
  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);
};

var log = function (x) {
  var n = 0;
  var x2 = x;
  while (x2 >= 4096) {
    n += 12;
    x2 /= 4096;
  }
  while (x2 >= 2) {
    n += 1;
    x2 /= 2;
  } return n;
};

var multiply = function (data, n, c) {
  var index = -1;
  var c2 = c;
  while (++index < 6) {
    c2 += n * data[index];
    data[index] = c2 % 1e7;
    c2 = floor(c2 / 1e7);
  }
};

var divide = function (data, n) {
  var index = 6;
  var c = 0;
  while (--index >= 0) {
    c += data[index];
    data[index] = floor(c / n);
    c = (c % n) * 1e7;
  }
};

var dataToString = function (data) {
  var index = 6;
  var s = '';
  while (--index >= 0) {
    if (s !== '' || index === 0 || data[index] !== 0) {
      var t = String(data[index]);
      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;
    }
  } return s;
};

var FORCED = fails(function () {
  return un$ToFixed(0.00008, 3) !== '0.000' ||
    un$ToFixed(0.9, 0) !== '1' ||
    un$ToFixed(1.255, 2) !== '1.25' ||
    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';
}) || !fails(function () {
  // V8 ~ Android 4.3-
  un$ToFixed({});
});

// `Number.prototype.toFixed` method
// https://tc39.es/ecma262/#sec-number.prototype.tofixed
$({ target: 'Number', proto: true, forced: FORCED }, {
  toFixed: function toFixed(fractionDigits) {
    var number = thisNumberValue(this);
    var fractDigits = toIntegerOrInfinity(fractionDigits);
    var data = [0, 0, 0, 0, 0, 0];
    var sign = '';
    var result = '0';
    var e, z, j, k;

    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation
    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');
    // eslint-disable-next-line no-self-compare -- NaN check
    if (number != number) return 'NaN';
    if (number <= -1e21 || number >= 1e21) return String(number);
    if (number < 0) {
      sign = '-';
      number = -number;
    }
    if (number > 1e-21) {
      e = log(number * pow(2, 69, 1)) - 69;
      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);
      z *= 0x10000000000000;
      e = 52 - e;
      if (e > 0) {
        multiply(data, 0, z);
        j = fractDigits;
        while (j >= 7) {
          multiply(data, 1e7, 0);
          j -= 7;
        }
        multiply(data, pow(10, j, 1), 0);
        j = e - 1;
        while (j >= 23) {
          divide(data, 1 << 23);
          j -= 23;
        }
        divide(data, 1 << j);
        multiply(data, 1, 1);
        divide(data, 2);
        result = dataToString(data);
      } else {
        multiply(data, 0, z);
        multiply(data, 1 << -e, 0);
        result = dataToString(data) + repeat('0', fractDigits);
      }
    }
    if (fractDigits > 0) {
      k = result.length;
      result = sign + (k <= fractDigits
        ? '0.' + repeat('0', fractDigits - k) + result
        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));
    } else {
      result = sign + result;
    } return result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.assign.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.assign.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var assign = __webpack_require__(/*! ../internals/object-assign */ "./node_modules/core-js/internals/object-assign.js");

// `Object.assign` method
// https://tc39.es/ecma262/#sec-object.assign
// eslint-disable-next-line es/no-object-assign -- required for testing
$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {
  assign: assign
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.create.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.create.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {
  create: create
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.freeze.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.freeze.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var FREEZING = __webpack_require__(/*! ../internals/freezing */ "./node_modules/core-js/internals/freezing.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var onFreeze = __webpack_require__(/*! ../internals/internal-metadata */ "./node_modules/core-js/internals/internal-metadata.js").onFreeze;

// eslint-disable-next-line es/no-object-freeze -- safe
var $freeze = Object.freeze;
var FAILS_ON_PRIMITIVES = fails(function () { $freeze(1); });

// `Object.freeze` method
// https://tc39.es/ecma262/#sec-object.freeze
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {
  freeze: function freeze(it) {
    return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.keys.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.keys.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var nativeKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {
  keys: function keys(it) {
    return nativeKeys(toObject(it));
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.set-prototype-of.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.set-prototype-of.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
$({ target: 'Object', stat: true }, {
  setPrototypeOf: setPrototypeOf
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ "./node_modules/core-js/internals/to-string-tag-support.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var toString = __webpack_require__(/*! ../internals/object-to-string */ "./node_modules/core-js/internals/object-to-string.js");

// `Object.prototype.toString` method
// https://tc39.es/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  redefine(Object.prototype, 'toString', toString, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.values.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.values.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $values = __webpack_require__(/*! ../internals/object-to-array */ "./node_modules/core-js/internals/object-to-array.js").values;

// `Object.values` method
// https://tc39.es/ecma262/#sec-object.values
$({ target: 'Object', stat: true }, {
  values: function values(O) {
    return $values(O);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.parse-float.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.parse-float.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $parseFloat = __webpack_require__(/*! ../internals/number-parse-float */ "./node_modules/core-js/internals/number-parse-float.js");

// `parseFloat` method
// https://tc39.es/ecma262/#sec-parsefloat-string
$({ global: true, forced: parseFloat != $parseFloat }, {
  parseFloat: $parseFloat
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.parse-int.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/es.parse-int.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $parseInt = __webpack_require__(/*! ../internals/number-parse-int */ "./node_modules/core-js/internals/number-parse-int.js");

// `parseInt` method
// https://tc39.es/ecma262/#sec-parseint-string-radix
$({ global: true, forced: parseInt != $parseInt }, {
  parseInt: $parseInt
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.promise.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/es.promise.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var NativePromise = __webpack_require__(/*! ../internals/native-promise-constructor */ "./node_modules/core-js/internals/native-promise-constructor.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var redefineAll = __webpack_require__(/*! ../internals/redefine-all */ "./node_modules/core-js/internals/redefine-all.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var setSpecies = __webpack_require__(/*! ../internals/set-species */ "./node_modules/core-js/internals/set-species.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var inspectSource = __webpack_require__(/*! ../internals/inspect-source */ "./node_modules/core-js/internals/inspect-source.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");
var checkCorrectnessOfIteration = __webpack_require__(/*! ../internals/check-correctness-of-iteration */ "./node_modules/core-js/internals/check-correctness-of-iteration.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");
var task = __webpack_require__(/*! ../internals/task */ "./node_modules/core-js/internals/task.js").set;
var microtask = __webpack_require__(/*! ../internals/microtask */ "./node_modules/core-js/internals/microtask.js");
var promiseResolve = __webpack_require__(/*! ../internals/promise-resolve */ "./node_modules/core-js/internals/promise-resolve.js");
var hostReportErrors = __webpack_require__(/*! ../internals/host-report-errors */ "./node_modules/core-js/internals/host-report-errors.js");
var newPromiseCapabilityModule = __webpack_require__(/*! ../internals/new-promise-capability */ "./node_modules/core-js/internals/new-promise-capability.js");
var perform = __webpack_require__(/*! ../internals/perform */ "./node_modules/core-js/internals/perform.js");
var Queue = __webpack_require__(/*! ../internals/queue */ "./node_modules/core-js/internals/queue.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var IS_BROWSER = __webpack_require__(/*! ../internals/engine-is-browser */ "./node_modules/core-js/internals/engine-is-browser.js");
var IS_NODE = __webpack_require__(/*! ../internals/engine-is-node */ "./node_modules/core-js/internals/engine-is-node.js");
var V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");

var SPECIES = wellKnownSymbol('species');
var PROMISE = 'Promise';

var getInternalState = InternalStateModule.getterFor(PROMISE);
var setInternalState = InternalStateModule.set;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var NativePromisePrototype = NativePromise && NativePromise.prototype;
var PromiseConstructor = NativePromise;
var PromisePrototype = NativePromisePrototype;
var TypeError = global.TypeError;
var document = global.document;
var process = global.process;
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;

var DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);
var NATIVE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;
var SUBCLASSING = false;

var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;

var FORCED = isForced(PROMISE, function () {
  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);
  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor);
  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565
  // We can't detect it synchronously, so just check versions
  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;
  // We need Promise#finally in the pure version for preventing prototype pollution
  if (IS_PURE && !PromisePrototype['finally']) return true;
  // We can't use @@species feature detection in V8 since it causes
  // deoptimization and performance degradation
  // https://github.com/zloirock/core-js/issues/679
  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false;
  // Detect correctness of subclassing with @@species support
  var promise = new PromiseConstructor(function (resolve) { resolve(1); });
  var FakePromise = function (exec) {
    exec(function () { /* empty */ }, function () { /* empty */ });
  };
  var constructor = promise.constructor = {};
  constructor[SPECIES] = FakePromise;
  SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;
  if (!SUBCLASSING) return true;
  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test
  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;
});

var INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {
  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });
});

// helpers
var isThenable = function (it) {
  var then;
  return isObject(it) && isCallable(then = it.then) ? then : false;
};

var callReaction = function (reaction, state) {
  var value = state.value;
  var ok = state.state == FULFILLED;
  var handler = ok ? reaction.ok : reaction.fail;
  var resolve = reaction.resolve;
  var reject = reaction.reject;
  var domain = reaction.domain;
  var result, then, exited;
  try {
    if (handler) {
      if (!ok) {
        if (state.rejection === UNHANDLED) onHandleUnhandled(state);
        state.rejection = HANDLED;
      }
      if (handler === true) result = value;
      else {
        if (domain) domain.enter();
        result = handler(value); // can throw
        if (domain) {
          domain.exit();
          exited = true;
        }
      }
      if (result === reaction.promise) {
        reject(TypeError('Promise-chain cycle'));
      } else if (then = isThenable(result)) {
        call(then, result, resolve, reject);
      } else resolve(result);
    } else reject(value);
  } catch (error) {
    if (domain && !exited) domain.exit();
    reject(error);
  }
};

var notify = function (state, isReject) {
  if (state.notified) return;
  state.notified = true;
  microtask(function () {
    var reactions = state.reactions;
    var reaction;
    while (reaction = reactions.get()) {
      callReaction(reaction, state);
    }
    state.notified = false;
    if (isReject && !state.rejection) onUnhandled(state);
  });
};

var dispatchEvent = function (name, promise, reason) {
  var event, handler;
  if (DISPATCH_EVENT) {
    event = document.createEvent('Event');
    event.promise = promise;
    event.reason = reason;
    event.initEvent(name, false, true);
    global.dispatchEvent(event);
  } else event = { promise: promise, reason: reason };
  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);
  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);
};

var onUnhandled = function (state) {
  call(task, global, function () {
    var promise = state.facade;
    var value = state.value;
    var IS_UNHANDLED = isUnhandled(state);
    var result;
    if (IS_UNHANDLED) {
      result = perform(function () {
        if (IS_NODE) {
          process.emit('unhandledRejection', value, promise);
        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
      if (result.error) throw result.value;
    }
  });
};

var isUnhandled = function (state) {
  return state.rejection !== HANDLED && !state.parent;
};

var onHandleUnhandled = function (state) {
  call(task, global, function () {
    var promise = state.facade;
    if (IS_NODE) {
      process.emit('rejectionHandled', promise);
    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
  });
};

var bind = function (fn, state, unwrap) {
  return function (value) {
    fn(state, value, unwrap);
  };
};

var internalReject = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  state.value = value;
  state.state = REJECTED;
  notify(state, true);
};

var internalResolve = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  try {
    if (state.facade === value) throw TypeError("Promise can't be resolved itself");
    var then = isThenable(value);
    if (then) {
      microtask(function () {
        var wrapper = { done: false };
        try {
          call(then, value,
            bind(internalResolve, wrapper, state),
            bind(internalReject, wrapper, state)
          );
        } catch (error) {
          internalReject(wrapper, error, state);
        }
      });
    } else {
      state.value = value;
      state.state = FULFILLED;
      notify(state, false);
    }
  } catch (error) {
    internalReject({ done: false }, error, state);
  }
};

// constructor polyfill
if (FORCED) {
  // 25.4.3.1 Promise(executor)
  PromiseConstructor = function Promise(executor) {
    anInstance(this, PromisePrototype);
    aCallable(executor);
    call(Internal, this);
    var state = getInternalState(this);
    try {
      executor(bind(internalResolve, state), bind(internalReject, state));
    } catch (error) {
      internalReject(state, error);
    }
  };
  PromisePrototype = PromiseConstructor.prototype;
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  Internal = function Promise(executor) {
    setInternalState(this, {
      type: PROMISE,
      done: false,
      notified: false,
      parent: false,
      reactions: new Queue(),
      rejection: false,
      state: PENDING,
      value: undefined
    });
  };
  Internal.prototype = redefineAll(PromisePrototype, {
    // `Promise.prototype.then` method
    // https://tc39.es/ecma262/#sec-promise.prototype.then
    // eslint-disable-next-line unicorn/no-thenable -- safe
    then: function then(onFulfilled, onRejected) {
      var state = getInternalPromiseState(this);
      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
      state.parent = true;
      reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
      reaction.fail = isCallable(onRejected) && onRejected;
      reaction.domain = IS_NODE ? process.domain : undefined;
      if (state.state == PENDING) state.reactions.add(reaction);
      else microtask(function () {
        callReaction(reaction, state);
      });
      return reaction.promise;
    },
    // `Promise.prototype.catch` method
    // https://tc39.es/ecma262/#sec-promise.prototype.catch
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });
  OwnPromiseCapability = function () {
    var promise = new Internal();
    var state = getInternalState(promise);
    this.promise = promise;
    this.resolve = bind(internalResolve, state);
    this.reject = bind(internalReject, state);
  };
  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return C === PromiseConstructor || C === PromiseWrapper
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };

  if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {
    nativeThen = NativePromisePrototype.then;

    if (!SUBCLASSING) {
      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs
      redefine(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {
        var that = this;
        return new PromiseConstructor(function (resolve, reject) {
          call(nativeThen, that, resolve, reject);
        }).then(onFulfilled, onRejected);
      // https://github.com/zloirock/core-js/issues/640
      }, { unsafe: true });

      // makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`
      redefine(NativePromisePrototype, 'catch', PromisePrototype['catch'], { unsafe: true });
    }

    // make `.constructor === Promise` work for native promise-based APIs
    try {
      delete NativePromisePrototype.constructor;
    } catch (error) { /* empty */ }

    // make `instanceof Promise` work for native promise-based APIs
    if (setPrototypeOf) {
      setPrototypeOf(NativePromisePrototype, PromisePrototype);
    }
  }
}

$({ global: true, wrap: true, forced: FORCED }, {
  Promise: PromiseConstructor
});

setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);

PromiseWrapper = getBuiltIn(PROMISE);

// statics
$({ target: PROMISE, stat: true, forced: FORCED }, {
  // `Promise.reject` method
  // https://tc39.es/ecma262/#sec-promise.reject
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    call(capability.reject, undefined, r);
    return capability.promise;
  }
});

$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {
  // `Promise.resolve` method
  // https://tc39.es/ecma262/#sec-promise.resolve
  resolve: function resolve(x) {
    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);
  }
});

$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {
  // `Promise.all` method
  // https://tc39.es/ecma262/#sec-promise.all
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        remaining++;
        call($promiseResolve, C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  },
  // `Promise.race` method
  // https://tc39.es/ecma262/#sec-promise.race
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      iterate(iterable, function (promise) {
        call($promiseResolve, C, promise).then(capability.resolve, reject);
      });
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.exec.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.exec.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var exec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");

// `RegExp.prototype.exec` method
// https://tc39.es/ecma262/#sec-regexp.prototype.exec
$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.regexp.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.regexp.to-string.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var PROPER_FUNCTION_NAME = __webpack_require__(/*! ../internals/function-name */ "./node_modules/core-js/internals/function-name.js").PROPER;
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var regExpFlags = __webpack_require__(/*! ../internals/regexp-flags */ "./node_modules/core-js/internals/regexp-flags.js");

var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var n$ToString = RegExpPrototype[TO_STRING];
var getFlags = uncurryThis(regExpFlags);

var NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });
// FF44- RegExp#toString has a wrong name
var INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;

// `RegExp.prototype.toString` method
// https://tc39.es/ecma262/#sec-regexp.prototype.tostring
if (NOT_GENERIC || INCORRECT_NAME) {
  redefine(RegExp.prototype, TO_STRING, function toString() {
    var R = anObject(this);
    var p = $toString(R.source);
    var rf = R.flags;
    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);
    return '/' + p + '/' + f;
  }, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.bold.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.bold.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var createHTML = __webpack_require__(/*! ../internals/create-html */ "./node_modules/core-js/internals/create-html.js");
var forcedStringHTMLMethod = __webpack_require__(/*! ../internals/string-html-forced */ "./node_modules/core-js/internals/string-html-forced.js");

// `String.prototype.bold` method
// https://tc39.es/ecma262/#sec-string.prototype.bold
$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('bold') }, {
  bold: function bold() {
    return createHTML(this, 'b', '', '');
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.includes.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.includes.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var notARegExp = __webpack_require__(/*! ../internals/not-a-regexp */ "./node_modules/core-js/internals/not-a-regexp.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var correctIsRegExpLogic = __webpack_require__(/*! ../internals/correct-is-regexp-logic */ "./node_modules/core-js/internals/correct-is-regexp-logic.js");

var stringIndexOf = uncurryThis(''.indexOf);

// `String.prototype.includes` method
// https://tc39.es/ecma262/#sec-string.prototype.includes
$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~stringIndexOf(
      toString(requireObjectCoercible(this)),
      toString(notARegExp(searchString)),
      arguments.length > 1 ? arguments[1] : undefined
    );
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.italics.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.italics.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var createHTML = __webpack_require__(/*! ../internals/create-html */ "./node_modules/core-js/internals/create-html.js");
var forcedStringHTMLMethod = __webpack_require__(/*! ../internals/string-html-forced */ "./node_modules/core-js/internals/string-html-forced.js");

// `String.prototype.italics` method
// https://tc39.es/ecma262/#sec-string.prototype.italics
$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {
  italics: function italics() {
    return createHTML(this, 'i', '', '');
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.iterator.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").charAt;
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var defineIterator = __webpack_require__(/*! ../internals/define-iterator */ "./node_modules/core-js/internals/define-iterator.js");

var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);

// `String.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-string.prototype-@@iterator
defineIterator(String, 'String', function (iterated) {
  setInternalState(this, {
    type: STRING_ITERATOR,
    string: toString(iterated),
    index: 0
  });
// `%StringIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return { value: undefined, done: true };
  point = charAt(string, index);
  state.index += point.length;
  return { value: point, done: false };
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.match.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.match.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var fixRegExpWellKnownSymbolLogic = __webpack_require__(/*! ../internals/fix-regexp-well-known-symbol-logic */ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var advanceStringIndex = __webpack_require__(/*! ../internals/advance-string-index */ "./node_modules/core-js/internals/advance-string-index.js");
var regExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "./node_modules/core-js/internals/regexp-exec-abstract.js");

// @@match logic
fixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {
  return [
    // `String.prototype.match` method
    // https://tc39.es/ecma262/#sec-string.prototype.match
    function match(regexp) {
      var O = requireObjectCoercible(this);
      var matcher = regexp == undefined ? undefined : getMethod(regexp, MATCH);
      return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));
    },
    // `RegExp.prototype[@@match]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match
    function (string) {
      var rx = anObject(this);
      var S = toString(string);
      var res = maybeCallNative(nativeMatch, rx, S);

      if (res.done) return res.value;

      if (!rx.global) return regExpExec(rx, S);

      var fullUnicode = rx.unicode;
      rx.lastIndex = 0;
      var A = [];
      var n = 0;
      var result;
      while ((result = regExpExec(rx, S)) !== null) {
        var matchStr = toString(result[0]);
        A[n] = matchStr;
        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
        n++;
      }
      return n === 0 ? null : A;
    }
  ];
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.pad-start.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.pad-start.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var $padStart = __webpack_require__(/*! ../internals/string-pad */ "./node_modules/core-js/internals/string-pad.js").start;
var WEBKIT_BUG = __webpack_require__(/*! ../internals/string-pad-webkit-bug */ "./node_modules/core-js/internals/string-pad-webkit-bug.js");

// `String.prototype.padStart` method
// https://tc39.es/ecma262/#sec-string.prototype.padstart
$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.replace.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.replace.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fixRegExpWellKnownSymbolLogic = __webpack_require__(/*! ../internals/fix-regexp-well-known-symbol-logic */ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var advanceStringIndex = __webpack_require__(/*! ../internals/advance-string-index */ "./node_modules/core-js/internals/advance-string-index.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var getSubstitution = __webpack_require__(/*! ../internals/get-substitution */ "./node_modules/core-js/internals/get-substitution.js");
var regExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "./node_modules/core-js/internals/regexp-exec-abstract.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var REPLACE = wellKnownSymbol('replace');
var max = Math.max;
var min = Math.min;
var concat = uncurryThis([].concat);
var push = uncurryThis([].push);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);

var maybeToString = function (it) {
  return it === undefined ? it : String(it);
};

// IE <= 11 replaces $0 with the whole match, as if it was $&
// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0
var REPLACE_KEEPS_$0 = (function () {
  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing
  return 'a'.replace(/./, '$0') === '$0';
})();

// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string
var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {
  if (/./[REPLACE]) {
    return /./[REPLACE]('a', '$0') === '';
  }
  return false;
})();

var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
  var re = /./;
  re.exec = function () {
    var result = [];
    result.groups = { a: '7' };
    return result;
  };
  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive
  return ''.replace(re, '$<a>') !== '7';
});

// @@replace logic
fixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {
  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';

  return [
    // `String.prototype.replace` method
    // https://tc39.es/ecma262/#sec-string.prototype.replace
    function replace(searchValue, replaceValue) {
      var O = requireObjectCoercible(this);
      var replacer = searchValue == undefined ? undefined : getMethod(searchValue, REPLACE);
      return replacer
        ? call(replacer, searchValue, O, replaceValue)
        : call(nativeReplace, toString(O), searchValue, replaceValue);
    },
    // `RegExp.prototype[@@replace]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
    function (string, replaceValue) {
      var rx = anObject(this);
      var S = toString(string);

      if (
        typeof replaceValue == 'string' &&
        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&
        stringIndexOf(replaceValue, '$<') === -1
      ) {
        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);
        if (res.done) return res.value;
      }

      var functionalReplace = isCallable(replaceValue);
      if (!functionalReplace) replaceValue = toString(replaceValue);

      var global = rx.global;
      if (global) {
        var fullUnicode = rx.unicode;
        rx.lastIndex = 0;
      }
      var results = [];
      while (true) {
        var result = regExpExec(rx, S);
        if (result === null) break;

        push(results, result);
        if (!global) break;

        var matchStr = toString(result[0]);
        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
      }

      var accumulatedResult = '';
      var nextSourcePosition = 0;
      for (var i = 0; i < results.length; i++) {
        result = results[i];

        var matched = toString(result[0]);
        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);
        var captures = [];
        // NOTE: This is equivalent to
        //   captures = result.slice(1).map(maybeToString)
        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in
        // the slice polyfill when slicing native arrays) "doesn't work" in safari 9 and
        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.
        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));
        var namedCaptures = result.groups;
        if (functionalReplace) {
          var replacerArgs = concat([matched], captures, position, S);
          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);
          var replacement = toString(apply(replaceValue, undefined, replacerArgs));
        } else {
          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
        }
        if (position >= nextSourcePosition) {
          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;
          nextSourcePosition = position + matched.length;
        }
      }
      return accumulatedResult + stringSlice(S, nextSourcePosition);
    }
  ];
}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.split.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.split.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fixRegExpWellKnownSymbolLogic = __webpack_require__(/*! ../internals/fix-regexp-well-known-symbol-logic */ "./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js");
var isRegExp = __webpack_require__(/*! ../internals/is-regexp */ "./node_modules/core-js/internals/is-regexp.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");
var advanceStringIndex = __webpack_require__(/*! ../internals/advance-string-index */ "./node_modules/core-js/internals/advance-string-index.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice-simple */ "./node_modules/core-js/internals/array-slice-simple.js");
var callRegExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "./node_modules/core-js/internals/regexp-exec-abstract.js");
var regexpExec = __webpack_require__(/*! ../internals/regexp-exec */ "./node_modules/core-js/internals/regexp-exec.js");
var stickyHelpers = __webpack_require__(/*! ../internals/regexp-sticky-helpers */ "./node_modules/core-js/internals/regexp-sticky-helpers.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var MAX_UINT32 = 0xFFFFFFFF;
var min = Math.min;
var $push = [].push;
var exec = uncurryThis(/./.exec);
var push = uncurryThis($push);
var stringSlice = uncurryThis(''.slice);

// Chrome 51 has a buggy "split" implementation when RegExp#exec !== nativeExec
// Weex JS has frozen built-in prototypes, so use try / catch wrapper
var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {
  // eslint-disable-next-line regexp/no-empty-group -- required for testing
  var re = /(?:)/;
  var originalExec = re.exec;
  re.exec = function () { return originalExec.apply(this, arguments); };
  var result = 'ab'.split(re);
  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';
});

// @@split logic
fixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {
  var internalSplit;
  if (
    'abbc'.split(/(b)*/)[1] == 'c' ||
    // eslint-disable-next-line regexp/no-empty-group -- required for testing
    'test'.split(/(?:)/, -1).length != 4 ||
    'ab'.split(/(?:ab)*/).length != 2 ||
    '.'.split(/(.?)(.?)/).length != 4 ||
    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing
    '.'.split(/()()/).length > 1 ||
    ''.split(/.?/).length
  ) {
    // based on es5-shim implementation, need to rework it
    internalSplit = function (separator, limit) {
      var string = toString(requireObjectCoercible(this));
      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
      if (lim === 0) return [];
      if (separator === undefined) return [string];
      // If `separator` is not a regex, use native split
      if (!isRegExp(separator)) {
        return call(nativeSplit, string, separator, lim);
      }
      var output = [];
      var flags = (separator.ignoreCase ? 'i' : '') +
                  (separator.multiline ? 'm' : '') +
                  (separator.unicode ? 'u' : '') +
                  (separator.sticky ? 'y' : '');
      var lastLastIndex = 0;
      // Make `global` and avoid `lastIndex` issues by working with a copy
      var separatorCopy = new RegExp(separator.source, flags + 'g');
      var match, lastIndex, lastLength;
      while (match = call(regexpExec, separatorCopy, string)) {
        lastIndex = separatorCopy.lastIndex;
        if (lastIndex > lastLastIndex) {
          push(output, stringSlice(string, lastLastIndex, match.index));
          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));
          lastLength = match[0].length;
          lastLastIndex = lastIndex;
          if (output.length >= lim) break;
        }
        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop
      }
      if (lastLastIndex === string.length) {
        if (lastLength || !exec(separatorCopy, '')) push(output, '');
      } else push(output, stringSlice(string, lastLastIndex));
      return output.length > lim ? arraySlice(output, 0, lim) : output;
    };
  // Chakra, V8
  } else if ('0'.split(undefined, 0).length) {
    internalSplit = function (separator, limit) {
      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);
    };
  } else internalSplit = nativeSplit;

  return [
    // `String.prototype.split` method
    // https://tc39.es/ecma262/#sec-string.prototype.split
    function split(separator, limit) {
      var O = requireObjectCoercible(this);
      var splitter = separator == undefined ? undefined : getMethod(separator, SPLIT);
      return splitter
        ? call(splitter, separator, O, limit)
        : call(internalSplit, toString(O), separator, limit);
    },
    // `RegExp.prototype[@@split]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split
    //
    // NOTE: This cannot be properly polyfilled in engines that don't support
    // the 'y' flag.
    function (string, limit) {
      var rx = anObject(this);
      var S = toString(string);
      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);

      if (res.done) return res.value;

      var C = speciesConstructor(rx, RegExp);

      var unicodeMatching = rx.unicode;
      var flags = (rx.ignoreCase ? 'i' : '') +
                  (rx.multiline ? 'm' : '') +
                  (rx.unicode ? 'u' : '') +
                  (UNSUPPORTED_Y ? 'g' : 'y');

      // ^(? + rx + ) is needed, in combination with some S slicing, to
      // simulate the 'y' flag.
      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);
      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
      if (lim === 0) return [];
      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];
      var p = 0;
      var q = 0;
      var A = [];
      while (q < S.length) {
        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;
        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);
        var e;
        if (
          z === null ||
          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p
        ) {
          q = advanceStringIndex(S, q, unicodeMatching);
        } else {
          push(A, stringSlice(S, p, q));
          if (A.length === lim) return A;
          for (var i = 1; i <= z.length - 1; i++) {
            push(A, z[i]);
            if (A.length === lim) return A;
          }
          q = p = e;
        }
      }
      push(A, stringSlice(S, p));
      return A;
    }
  ];
}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.starts-with.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.starts-with.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var getOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var notARegExp = __webpack_require__(/*! ../internals/not-a-regexp */ "./node_modules/core-js/internals/not-a-regexp.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");
var correctIsRegExpLogic = __webpack_require__(/*! ../internals/correct-is-regexp-logic */ "./node_modules/core-js/internals/correct-is-regexp-logic.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

// eslint-disable-next-line es/no-string-prototype-startswith -- safe
var un$StartsWith = uncurryThis(''.startsWith);
var stringSlice = uncurryThis(''.slice);
var min = Math.min;

var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');
// https://github.com/zloirock/core-js/pull/702
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {
  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');
  return descriptor && !descriptor.writable;
}();

// `String.prototype.startsWith` method
// https://tc39.es/ecma262/#sec-string.prototype.startswith
$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
  startsWith: function startsWith(searchString /* , position = 0 */) {
    var that = toString(requireObjectCoercible(this));
    notARegExp(searchString);
    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));
    var search = toString(searchString);
    return un$StartsWith
      ? un$StartsWith(that, search, index)
      : stringSlice(that, index, index + search.length) === search;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.symbol.description.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.symbol.description.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// `Symbol.prototype.description` getter
// https://tc39.es/ecma262/#sec-symbol.prototype.description

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var copyConstructorProperties = __webpack_require__(/*! ../internals/copy-constructor-properties */ "./node_modules/core-js/internals/copy-constructor-properties.js");

var NativeSymbol = global.Symbol;
var SymbolPrototype = NativeSymbol && NativeSymbol.prototype;

if (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||
  // Safari 12 bug
  NativeSymbol().description !== undefined
)) {
  var EmptyStringDescriptionStore = {};
  // wrap Symbol constructor for correct work with undefined description
  var SymbolWrapper = function Symbol() {
    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);
    var result = isPrototypeOf(SymbolPrototype, this)
      ? new NativeSymbol(description)
      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'
      : description === undefined ? NativeSymbol() : NativeSymbol(description);
    if (description === '') EmptyStringDescriptionStore[result] = true;
    return result;
  };

  copyConstructorProperties(SymbolWrapper, NativeSymbol);
  SymbolWrapper.prototype = SymbolPrototype;
  SymbolPrototype.constructor = SymbolWrapper;

  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';
  var symbolToString = uncurryThis(SymbolPrototype.toString);
  var symbolValueOf = uncurryThis(SymbolPrototype.valueOf);
  var regexp = /^Symbol\((.*)\)[^)]+$/;
  var replace = uncurryThis(''.replace);
  var stringSlice = uncurryThis(''.slice);

  defineProperty(SymbolPrototype, 'description', {
    configurable: true,
    get: function description() {
      var symbol = symbolValueOf(this);
      var string = symbolToString(symbol);
      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';
      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');
      return desc === '' ? undefined : desc;
    }
  });

  $({ global: true, forced: true }, {
    Symbol: SymbolWrapper
  });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.symbol.iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.symbol.iterator.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var defineWellKnownSymbol = __webpack_require__(/*! ../internals/define-well-known-symbol */ "./node_modules/core-js/internals/define-well-known-symbol.js");

// `Symbol.iterator` well-known symbol
// https://tc39.es/ecma262/#sec-symbol.iterator
defineWellKnownSymbol('iterator');


/***/ }),

/***/ "./node_modules/core-js/modules/es.symbol.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/modules/es.symbol.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/native-symbol */ "./node_modules/core-js/internals/native-symbol.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var isArray = __webpack_require__(/*! ../internals/is-array */ "./node_modules/core-js/internals/is-array.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");
var isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var nativeObjectCreate = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");
var getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");
var getOwnPropertyNamesExternal = __webpack_require__(/*! ../internals/object-get-own-property-names-external */ "./node_modules/core-js/internals/object-get-own-property-names-external.js");
var getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var definePropertiesModule = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var wrappedWellKnownSymbolModule = __webpack_require__(/*! ../internals/well-known-symbol-wrapped */ "./node_modules/core-js/internals/well-known-symbol-wrapped.js");
var defineWellKnownSymbol = __webpack_require__(/*! ../internals/define-well-known-symbol */ "./node_modules/core-js/internals/define-well-known-symbol.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var $forEach = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").forEach;

var HIDDEN = sharedKey('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(SYMBOL);

var ObjectPrototype = Object[PROTOTYPE];
var $Symbol = global.Symbol;
var SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];
var TypeError = global.TypeError;
var QObject = global.QObject;
var $stringify = getBuiltIn('JSON', 'stringify');
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var push = uncurryThis([].push);

var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');
var WellKnownSymbolsStore = shared('wks');

// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDescriptor = DESCRIPTORS && fails(function () {
  return nativeObjectCreate(nativeDefineProperty({}, 'a', {
    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (O, P, Attributes) {
  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];
  nativeDefineProperty(O, P, Attributes);
  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
  }
} : nativeDefineProperty;

var wrap = function (tag, description) {
  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);
  setInternalState(symbol, {
    type: SYMBOL,
    tag: tag,
    description: description
  });
  if (!DESCRIPTORS) symbol.description = description;
  return symbol;
};

var $defineProperty = function defineProperty(O, P, Attributes) {
  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);
  anObject(O);
  var key = toPropertyKey(P);
  anObject(Attributes);
  if (hasOwn(AllSymbols, key)) {
    if (!Attributes.enumerable) {
      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));
      O[HIDDEN][key] = true;
    } else {
      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;
      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
    } return setSymbolDescriptor(O, key, Attributes);
  } return nativeDefineProperty(O, key, Attributes);
};

var $defineProperties = function defineProperties(O, Properties) {
  anObject(O);
  var properties = toIndexedObject(Properties);
  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
  $forEach(keys, function (key) {
    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);
  });
  return O;
};

var $create = function create(O, Properties) {
  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};

var $propertyIsEnumerable = function propertyIsEnumerable(V) {
  var P = toPropertyKey(V);
  var enumerable = call(nativePropertyIsEnumerable, this, P);
  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;
  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]
    ? enumerable : true;
};

var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
  var it = toIndexedObject(O);
  var key = toPropertyKey(P);
  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;
  var descriptor = nativeGetOwnPropertyDescriptor(it, key);
  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {
    descriptor.enumerable = true;
  }
  return descriptor;
};

var $getOwnPropertyNames = function getOwnPropertyNames(O) {
  var names = nativeGetOwnPropertyNames(toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);
  });
  return result;
};

var $getOwnPropertySymbols = function getOwnPropertySymbols(O) {
  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {
      push(result, AllSymbols[key]);
    }
  });
  return result;
};

// `Symbol` constructor
// https://tc39.es/ecma262/#sec-symbol-constructor
if (!NATIVE_SYMBOL) {
  $Symbol = function Symbol() {
    if (isPrototypeOf(SymbolPrototype, this)) throw TypeError('Symbol is not a constructor');
    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);
    var tag = uid(description);
    var setter = function (value) {
      if (this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);
      if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));
    };
    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });
    return wrap(tag, description);
  };

  SymbolPrototype = $Symbol[PROTOTYPE];

  redefine(SymbolPrototype, 'toString', function toString() {
    return getInternalState(this).tag;
  });

  redefine($Symbol, 'withoutSetter', function (description) {
    return wrap(uid(description), description);
  });

  propertyIsEnumerableModule.f = $propertyIsEnumerable;
  definePropertyModule.f = $defineProperty;
  definePropertiesModule.f = $defineProperties;
  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;

  wrappedWellKnownSymbolModule.f = function (name) {
    return wrap(wellKnownSymbol(name), name);
  };

  if (DESCRIPTORS) {
    // https://github.com/tc39/proposal-Symbol-description
    nativeDefineProperty(SymbolPrototype, 'description', {
      configurable: true,
      get: function description() {
        return getInternalState(this).description;
      }
    });
    if (!IS_PURE) {
      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });
    }
  }
}

$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {
  Symbol: $Symbol
});

$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
  defineWellKnownSymbol(name);
});

$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {
  // `Symbol.for` method
  // https://tc39.es/ecma262/#sec-symbol.for
  'for': function (key) {
    var string = $toString(key);
    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];
    var symbol = $Symbol(string);
    StringToSymbolRegistry[string] = symbol;
    SymbolToStringRegistry[symbol] = string;
    return symbol;
  },
  // `Symbol.keyFor` method
  // https://tc39.es/ecma262/#sec-symbol.keyfor
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');
    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];
  },
  useSetter: function () { USE_SETTER = true; },
  useSimple: function () { USE_SETTER = false; }
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {
  // `Object.create` method
  // https://tc39.es/ecma262/#sec-object.create
  create: $create,
  // `Object.defineProperty` method
  // https://tc39.es/ecma262/#sec-object.defineproperty
  defineProperty: $defineProperty,
  // `Object.defineProperties` method
  // https://tc39.es/ecma262/#sec-object.defineproperties
  defineProperties: $defineProperties,
  // `Object.getOwnPropertyDescriptor` method
  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {
  // `Object.getOwnPropertyNames` method
  // https://tc39.es/ecma262/#sec-object.getownpropertynames
  getOwnPropertyNames: $getOwnPropertyNames,
  // `Object.getOwnPropertySymbols` method
  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives
// https://bugs.chromium.org/p/v8/issues/detail?id=3443
$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {
  getOwnPropertySymbols: function getOwnPropertySymbols(it) {
    return getOwnPropertySymbolsModule.f(toObject(it));
  }
});

// `JSON.stringify` method behavior with symbols
// https://tc39.es/ecma262/#sec-json.stringify
if ($stringify) {
  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {
    var symbol = $Symbol();
    // MS Edge converts symbol values to JSON as {}
    return $stringify([symbol]) != '[null]'
      // WebKit converts symbol values to JSON as null
      || $stringify({ a: symbol }) != '{}'
      // V8 throws on boxed symbols
      || $stringify(Object(symbol)) != '{}';
  });

  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {
    // eslint-disable-next-line no-unused-vars -- required for `.length`
    stringify: function stringify(it, replacer, space) {
      var args = arraySlice(arguments);
      var $replacer = replacer;
      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined
      if (!isArray(replacer)) replacer = function (key, value) {
        if (isCallable($replacer)) value = call($replacer, this, key, value);
        if (!isSymbol(value)) return value;
      };
      args[1] = replacer;
      return apply($stringify, null, args);
    }
  });
}

// `Symbol.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive
if (!SymbolPrototype[TO_PRIMITIVE]) {
  var valueOf = SymbolPrototype.valueOf;
  // eslint-disable-next-line no-unused-vars -- required for .length
  redefine(SymbolPrototype, TO_PRIMITIVE, function (hint) {
    // TODO: improve hint logic
    return call(valueOf, this);
  });
}
// `Symbol.prototype[@@toStringTag]` property
// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag
setToStringTag($Symbol, SYMBOL);

hiddenKeys[HIDDEN] = true;


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.copy-within.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.copy-within.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $ArrayCopyWithin = __webpack_require__(/*! ../internals/array-copy-within */ "./node_modules/core-js/internals/array-copy-within.js");

var u$ArrayCopyWithin = uncurryThis($ArrayCopyWithin);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.copyWithin` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin
exportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {
  return u$ArrayCopyWithin(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.every.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.every.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $every = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").every;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.every` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.every
exportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {
  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.fill.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.fill.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var $fill = __webpack_require__(/*! ../internals/array-fill */ "./node_modules/core-js/internals/array-fill.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.fill` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill
exportTypedArrayMethod('fill', function fill(value /* , start, end */) {
  var length = arguments.length;
  return call(
    $fill,
    aTypedArray(this),
    value,
    length > 1 ? arguments[1] : undefined,
    length > 2 ? arguments[2] : undefined
  );
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.filter.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.filter.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $filter = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").filter;
var fromSpeciesAndList = __webpack_require__(/*! ../internals/typed-array-from-species-and-list */ "./node_modules/core-js/internals/typed-array-from-species-and-list.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.filter` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter
exportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {
  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  return fromSpeciesAndList(this, list);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.find-index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.find-index.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $findIndex = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").findIndex;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.findIndex` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex
exportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {
  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.find.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.find.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $find = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").find;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.find` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.find
exportTypedArrayMethod('find', function find(predicate /* , thisArg */) {
  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.for-each.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.for-each.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $forEach = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").forEach;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.forEach` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach
exportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {
  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.from.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.from.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(/*! ../internals/typed-array-constructors-require-wrappers */ "./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js");
var exportTypedArrayStaticMethod = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js").exportTypedArrayStaticMethod;
var typedArrayFrom = __webpack_require__(/*! ../internals/typed-array-from */ "./node_modules/core-js/internals/typed-array-from.js");

// `%TypedArray%.from` method
// https://tc39.es/ecma262/#sec-%typedarray%.from
exportTypedArrayStaticMethod('from', typedArrayFrom, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.includes.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.includes.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $includes = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").includes;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.includes` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes
exportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {
  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.index-of.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.index-of.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $indexOf = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.indexOf` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof
exportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {
  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.int32-array.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.int32-array.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var createTypedArrayConstructor = __webpack_require__(/*! ../internals/typed-array-constructor */ "./node_modules/core-js/internals/typed-array-constructor.js");

// `Int32Array` constructor
// https://tc39.es/ecma262/#sec-typedarray-objects
createTypedArrayConstructor('Int32', function (init) {
  return function Int32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.iterator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.iterator.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var ArrayIterators = __webpack_require__(/*! ../modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');
var Uint8Array = global.Uint8Array;
var arrayValues = uncurryThis(ArrayIterators.values);
var arrayKeys = uncurryThis(ArrayIterators.keys);
var arrayEntries = uncurryThis(ArrayIterators.entries);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var TypedArrayPrototype = Uint8Array && Uint8Array.prototype;

var GENERIC = !fails(function () {
  TypedArrayPrototype[ITERATOR].call([1]);
});

var ITERATOR_IS_VALUES = !!TypedArrayPrototype
  && TypedArrayPrototype.values
  && TypedArrayPrototype[ITERATOR] === TypedArrayPrototype.values
  && TypedArrayPrototype.values.name === 'values';

var typedArrayValues = function values() {
  return arrayValues(aTypedArray(this));
};

// `%TypedArray%.prototype.entries` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries
exportTypedArrayMethod('entries', function entries() {
  return arrayEntries(aTypedArray(this));
}, GENERIC);
// `%TypedArray%.prototype.keys` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys
exportTypedArrayMethod('keys', function keys() {
  return arrayKeys(aTypedArray(this));
}, GENERIC);
// `%TypedArray%.prototype.values` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.values
exportTypedArrayMethod('values', typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });
// `%TypedArray%.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator
exportTypedArrayMethod(ITERATOR, typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.join.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.join.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $join = uncurryThis([].join);

// `%TypedArray%.prototype.join` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.join
exportTypedArrayMethod('join', function join(separator) {
  return $join(aTypedArray(this), separator);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.last-index-of.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.last-index-of.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var $lastIndexOf = __webpack_require__(/*! ../internals/array-last-index-of */ "./node_modules/core-js/internals/array-last-index-of.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.lastIndexOf` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof
exportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {
  var length = arguments.length;
  return apply($lastIndexOf, aTypedArray(this), length > 1 ? [searchElement, arguments[1]] : [searchElement]);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.map.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.map.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $map = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").map;
var typedArraySpeciesConstructor = __webpack_require__(/*! ../internals/typed-array-species-constructor */ "./node_modules/core-js/internals/typed-array-species-constructor.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.map` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.map
exportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {
  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {
    return new (typedArraySpeciesConstructor(O))(length);
  });
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.reduce-right.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.reduce-right.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $reduceRight = __webpack_require__(/*! ../internals/array-reduce */ "./node_modules/core-js/internals/array-reduce.js").right;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.reduceRicht` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright
exportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {
  var length = arguments.length;
  return $reduceRight(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.reduce.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.reduce.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $reduce = __webpack_require__(/*! ../internals/array-reduce */ "./node_modules/core-js/internals/array-reduce.js").left;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.reduce` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce
exportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {
  var length = arguments.length;
  return $reduce(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.reverse.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.reverse.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var floor = Math.floor;

// `%TypedArray%.prototype.reverse` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse
exportTypedArrayMethod('reverse', function reverse() {
  var that = this;
  var length = aTypedArray(that).length;
  var middle = floor(length / 2);
  var index = 0;
  var value;
  while (index < middle) {
    value = that[index];
    that[index++] = that[--length];
    that[length] = value;
  } return that;
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.set.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.set.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");
var toOffset = __webpack_require__(/*! ../internals/to-offset */ "./node_modules/core-js/internals/to-offset.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var RangeError = global.RangeError;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var $set = Int8ArrayPrototype && Int8ArrayPrototype.set;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

var WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS = !fails(function () {
  // eslint-disable-next-line es/no-typed-arrays -- required for testing
  var array = new Uint8ClampedArray(2);
  call($set, array, { length: 1, 0: 3 }, 1);
  return array[1] !== 3;
});

// https://bugs.chromium.org/p/v8/issues/detail?id=11294 and other
var TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {
  var array = new Int8Array(2);
  array.set(1);
  array.set('2', 1);
  return array[0] !== 0 || array[1] !== 2;
});

// `%TypedArray%.prototype.set` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set
exportTypedArrayMethod('set', function set(arrayLike /* , offset */) {
  aTypedArray(this);
  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);
  var src = toIndexedObject(arrayLike);
  if (WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS) return call($set, this, src, offset);
  var length = this.length;
  var len = lengthOfArrayLike(src);
  var index = 0;
  if (len + offset > length) throw RangeError('Wrong length');
  while (index < len) this[offset + index] = src[index++];
}, !WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.slice.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.slice.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var typedArraySpeciesConstructor = __webpack_require__(/*! ../internals/typed-array-species-constructor */ "./node_modules/core-js/internals/typed-array-species-constructor.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

var FORCED = fails(function () {
  // eslint-disable-next-line es/no-typed-arrays -- required for testing
  new Int8Array(1).slice();
});

// `%TypedArray%.prototype.slice` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice
exportTypedArrayMethod('slice', function slice(start, end) {
  var list = arraySlice(aTypedArray(this), start, end);
  var C = typedArraySpeciesConstructor(this);
  var index = 0;
  var length = list.length;
  var result = new C(length);
  while (length > index) result[index] = list[index++];
  return result;
}, FORCED);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.some.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.some.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var $some = __webpack_require__(/*! ../internals/array-iteration */ "./node_modules/core-js/internals/array-iteration.js").some;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.some` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.some
exportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {
  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.sort.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.sort.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var internalSort = __webpack_require__(/*! ../internals/array-sort */ "./node_modules/core-js/internals/array-sort.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var FF = __webpack_require__(/*! ../internals/engine-ff-version */ "./node_modules/core-js/internals/engine-ff-version.js");
var IE_OR_EDGE = __webpack_require__(/*! ../internals/engine-is-ie-or-edge */ "./node_modules/core-js/internals/engine-is-ie-or-edge.js");
var V8 = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");
var WEBKIT = __webpack_require__(/*! ../internals/engine-webkit-version */ "./node_modules/core-js/internals/engine-webkit-version.js");

var Array = global.Array;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var Uint16Array = global.Uint16Array;
var un$Sort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);

// WebKit
var ACCEPT_INCORRECT_ARGUMENTS = !!un$Sort && !(fails(function () {
  un$Sort(new Uint16Array(2), null);
}) && fails(function () {
  un$Sort(new Uint16Array(2), {});
}));

var STABLE_SORT = !!un$Sort && !fails(function () {
  // feature detection can be too slow, so check engines versions
  if (V8) return V8 < 74;
  if (FF) return FF < 67;
  if (IE_OR_EDGE) return true;
  if (WEBKIT) return WEBKIT < 602;

  var array = new Uint16Array(516);
  var expected = Array(516);
  var index, mod;

  for (index = 0; index < 516; index++) {
    mod = index % 4;
    array[index] = 515 - index;
    expected[index] = index - 2 * mod + 3;
  }

  un$Sort(array, function (a, b) {
    return (a / 4 | 0) - (b / 4 | 0);
  });

  for (index = 0; index < 516; index++) {
    if (array[index] !== expected[index]) return true;
  }
});

var getSortCompare = function (comparefn) {
  return function (x, y) {
    if (comparefn !== undefined) return +comparefn(x, y) || 0;
    // eslint-disable-next-line no-self-compare -- NaN check
    if (y !== y) return -1;
    // eslint-disable-next-line no-self-compare -- NaN check
    if (x !== x) return 1;
    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;
    return x > y;
  };
};

// `%TypedArray%.prototype.sort` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort
exportTypedArrayMethod('sort', function sort(comparefn) {
  if (comparefn !== undefined) aCallable(comparefn);
  if (STABLE_SORT) return un$Sort(this, comparefn);

  return internalSort(aTypedArray(this), getSortCompare(comparefn));
}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.subarray.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.subarray.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");
var typedArraySpeciesConstructor = __webpack_require__(/*! ../internals/typed-array-species-constructor */ "./node_modules/core-js/internals/typed-array-species-constructor.js");

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.subarray` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray
exportTypedArrayMethod('subarray', function subarray(begin, end) {
  var O = aTypedArray(this);
  var length = O.length;
  var beginIndex = toAbsoluteIndex(begin, length);
  var C = typedArraySpeciesConstructor(O);
  return new C(
    O.buffer,
    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,
    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)
  );
});


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.to-locale-string.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.to-locale-string.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var ArrayBufferViewCore = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");

var Int8Array = global.Int8Array;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $toLocaleString = [].toLocaleString;

// iOS Safari 6.x fails here
var TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {
  $toLocaleString.call(new Int8Array(1));
});

var FORCED = fails(function () {
  return [1, 2].toLocaleString() != new Int8Array([1, 2]).toLocaleString();
}) || !fails(function () {
  Int8Array.prototype.toLocaleString.call([1, 2]);
});

// `%TypedArray%.prototype.toLocaleString` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring
exportTypedArrayMethod('toLocaleString', function toLocaleString() {
  return apply(
    $toLocaleString,
    TO_LOCALE_STRING_BUG ? arraySlice(aTypedArray(this)) : aTypedArray(this),
    arraySlice(arguments)
  );
}, FORCED);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.to-string.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.to-string.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var exportTypedArrayMethod = __webpack_require__(/*! ../internals/array-buffer-view-core */ "./node_modules/core-js/internals/array-buffer-view-core.js").exportTypedArrayMethod;
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");

var Uint8Array = global.Uint8Array;
var Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};
var arrayToString = [].toString;
var join = uncurryThis([].join);

if (fails(function () { arrayToString.call({}); })) {
  arrayToString = function toString() {
    return join(this);
  };
}

var IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString != arrayToString;

// `%TypedArray%.prototype.toString` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tostring
exportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);


/***/ }),

/***/ "./node_modules/core-js/modules/es.typed-array.uint8-array.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/modules/es.typed-array.uint8-array.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var createTypedArrayConstructor = __webpack_require__(/*! ../internals/typed-array-constructor */ "./node_modules/core-js/internals/typed-array-constructor.js");

// `Uint8Array` constructor
// https://tc39.es/ecma262/#sec-typedarray-objects
createTypedArrayConstructor('Uint8', function (init) {
  return function Uint8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.delete-all.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.delete-all.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var deleteAll = __webpack_require__(/*! ../internals/collection-delete-all */ "./node_modules/core-js/internals/collection-delete-all.js");

// `Map.prototype.deleteAll` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  deleteAll: deleteAll
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.every.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.every.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.every` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  every: function every(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    return !iterate(iterator, function (key, value, stop) {
      if (!boundFunction(value, key, map)) return stop();
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.filter.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.filter.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.filter` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  filter: function filter(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();
    var setter = aCallable(newMap.set);
    iterate(iterator, function (key, value) {
      if (boundFunction(value, key, map)) call(setter, newMap, key, value);
    }, { AS_ENTRIES: true, IS_ITERATOR: true });
    return newMap;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.find-key.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.find-key.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.findKey` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  findKey: function findKey(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    return iterate(iterator, function (key, value, stop) {
      if (boundFunction(value, key, map)) return stop(key);
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.find.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.find.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.find` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  find: function find(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    return iterate(iterator, function (key, value, stop) {
      if (boundFunction(value, key, map)) return stop(value);
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.includes.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.includes.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var sameValueZero = __webpack_require__(/*! ../internals/same-value-zero */ "./node_modules/core-js/internals/same-value-zero.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.includes` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  includes: function includes(searchElement) {
    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {
      if (sameValueZero(value, searchElement)) return stop();
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.key-of.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.key-of.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.keyOf` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  keyOf: function keyOf(searchElement) {
    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {
      if (value === searchElement) return stop(key);
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.map-keys.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.map-keys.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.mapKeys` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  mapKeys: function mapKeys(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();
    var setter = aCallable(newMap.set);
    iterate(iterator, function (key, value) {
      call(setter, newMap, boundFunction(value, key, map), value);
    }, { AS_ENTRIES: true, IS_ITERATOR: true });
    return newMap;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.map-values.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.map-values.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "./node_modules/core-js/internals/species-constructor.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.mapValues` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  mapValues: function mapValues(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();
    var setter = aCallable(newMap.set);
    iterate(iterator, function (key, value) {
      call(setter, newMap, key, boundFunction(value, key, map));
    }, { AS_ENTRIES: true, IS_ITERATOR: true });
    return newMap;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.merge.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.merge.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Map.prototype.merge` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  merge: function merge(iterable /* ...iterables */) {
    var map = anObject(this);
    var setter = aCallable(map.set);
    var argumentsLength = arguments.length;
    var i = 0;
    while (i < argumentsLength) {
      iterate(arguments[i++], setter, { that: map, AS_ENTRIES: true });
    }
    return map;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.reduce.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.reduce.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

var TypeError = global.TypeError;

// `Map.prototype.reduce` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  reduce: function reduce(callbackfn /* , initialValue */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var noInitial = arguments.length < 2;
    var accumulator = noInitial ? undefined : arguments[1];
    aCallable(callbackfn);
    iterate(iterator, function (key, value) {
      if (noInitial) {
        noInitial = false;
        accumulator = value;
      } else {
        accumulator = callbackfn(accumulator, value, key, map);
      }
    }, { AS_ENTRIES: true, IS_ITERATOR: true });
    if (noInitial) throw TypeError('Reduce of empty map with no initial value');
    return accumulator;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.some.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.some.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var getMapIterator = __webpack_require__(/*! ../internals/get-map-iterator */ "./node_modules/core-js/internals/get-map-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");

// `Set.prototype.some` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  some: function some(callbackfn /* , thisArg */) {
    var map = anObject(this);
    var iterator = getMapIterator(map);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    return iterate(iterator, function (key, value, stop) {
      if (boundFunction(value, key, map)) return stop();
    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.map.update.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.map.update.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");

var TypeError = global.TypeError;

// `Set.prototype.update` method
// https://github.com/tc39/proposal-collection-methods
$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {
  update: function update(key, callback /* , thunk */) {
    var map = anObject(this);
    var get = aCallable(map.get);
    var has = aCallable(map.has);
    var set = aCallable(map.set);
    var length = arguments.length;
    aCallable(callback);
    var isPresentInMap = call(has, map, key);
    if (!isPresentInMap && length < 3) {
      throw TypeError('Updating absent value');
    }
    var value = isPresentInMap ? call(get, map, key) : aCallable(length > 2 ? arguments[2] : undefined)(key, map);
    call(set, map, key, callback(value, key, map));
    return map;
  }
});


/***/ }),

/***/ "./node_modules/core-js/modules/web.dom-collections.for-each.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/modules/web.dom-collections.for-each.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var DOMIterables = __webpack_require__(/*! ../internals/dom-iterables */ "./node_modules/core-js/internals/dom-iterables.js");
var DOMTokenListPrototype = __webpack_require__(/*! ../internals/dom-token-list-prototype */ "./node_modules/core-js/internals/dom-token-list-prototype.js");
var forEach = __webpack_require__(/*! ../internals/array-for-each */ "./node_modules/core-js/internals/array-for-each.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");

var handlePrototype = function (CollectionPrototype) {
  // some Chrome versions have non-configurable methods on DOMTokenList
  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {
    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
    CollectionPrototype.forEach = forEach;
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  if (DOMIterables[COLLECTION_NAME]) {
    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);
  }
}

handlePrototype(DOMTokenListPrototype);


/***/ }),

/***/ "./node_modules/core-js/modules/web.dom-collections.iterator.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/modules/web.dom-collections.iterator.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var DOMIterables = __webpack_require__(/*! ../internals/dom-iterables */ "./node_modules/core-js/internals/dom-iterables.js");
var DOMTokenListPrototype = __webpack_require__(/*! ../internals/dom-token-list-prototype */ "./node_modules/core-js/internals/dom-token-list-prototype.js");
var ArrayIteratorMethods = __webpack_require__(/*! ../modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
var createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ArrayValues = ArrayIteratorMethods.values;

var handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {
  if (CollectionPrototype) {
    // some Chrome versions have non-configurable methods on DOMTokenList
    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
    } catch (error) {
      CollectionPrototype[ITERATOR] = ArrayValues;
    }
    if (!CollectionPrototype[TO_STRING_TAG]) {
      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
    }
    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {
      // some Chrome versions have non-configurable methods on DOMTokenList
      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
      } catch (error) {
        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
      }
    }
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype, COLLECTION_NAME);
}

handlePrototype(DOMTokenListPrototype, 'DOMTokenList');


/***/ }),

/***/ "./node_modules/core-js/modules/web.timers.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/web.timers.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var apply = __webpack_require__(/*! ../internals/function-apply */ "./node_modules/core-js/internals/function-apply.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice */ "./node_modules/core-js/internals/array-slice.js");

var MSIE = /MSIE .\./.test(userAgent); // <- dirty ie9- check
var Function = global.Function;

var wrap = function (scheduler) {
  return function (handler, timeout /* , ...arguments */) {
    var boundArgs = arguments.length > 2;
    var args = boundArgs ? arraySlice(arguments, 2) : undefined;
    return scheduler(boundArgs ? function () {
      apply(isCallable(handler) ? handler : Function(handler), this, args);
    } : handler, timeout);
  };
};

// ie9- setTimeout & setInterval additional parameters fix
// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers
$({ global: true, bind: true, forced: MSIE }, {
  // `setTimeout` method
  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout
  setTimeout: wrap(global.setTimeout),
  // `setInterval` method
  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval
  setInterval: wrap(global.setInterval)
});


/***/ }),

/***/ "./node_modules/core-js/modules/web.url-search-params.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/web.url-search-params.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(/*! ../modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var USE_NATIVE_URL = __webpack_require__(/*! ../internals/native-url */ "./node_modules/core-js/internals/native-url.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var redefineAll = __webpack_require__(/*! ../internals/redefine-all */ "./node_modules/core-js/internals/redefine-all.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var createIteratorConstructor = __webpack_require__(/*! ../internals/create-iterator-constructor */ "./node_modules/core-js/internals/create-iterator-constructor.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var arraySort = __webpack_require__(/*! ../internals/array-sort */ "./node_modules/core-js/internals/array-sort.js");

var ITERATOR = wellKnownSymbol('iterator');
var URL_SEARCH_PARAMS = 'URLSearchParams';
var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';
var setInternalState = InternalStateModule.set;
var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);

var n$Fetch = getBuiltIn('fetch');
var N$Request = getBuiltIn('Request');
var Headers = getBuiltIn('Headers');
var RequestPrototype = N$Request && N$Request.prototype;
var HeadersPrototype = Headers && Headers.prototype;
var RegExp = global.RegExp;
var TypeError = global.TypeError;
var decodeURIComponent = global.decodeURIComponent;
var encodeURIComponent = global.encodeURIComponent;
var charAt = uncurryThis(''.charAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var splice = uncurryThis([].splice);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);

var plus = /\+/g;
var sequences = Array(4);

var percentSequence = function (bytes) {
  return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\da-f]{2}){' + bytes + '})', 'gi'));
};

var percentDecode = function (sequence) {
  try {
    return decodeURIComponent(sequence);
  } catch (error) {
    return sequence;
  }
};

var deserialize = function (it) {
  var result = replace(it, plus, ' ');
  var bytes = 4;
  try {
    return decodeURIComponent(result);
  } catch (error) {
    while (bytes) {
      result = replace(result, percentSequence(bytes--), percentDecode);
    }
    return result;
  }
};

var find = /[!'()~]|%20/g;

var replacements = {
  '!': '%21',
  "'": '%27',
  '(': '%28',
  ')': '%29',
  '~': '%7E',
  '%20': '+'
};

var replacer = function (match) {
  return replacements[match];
};

var serialize = function (it) {
  return replace(encodeURIComponent(it), find, replacer);
};

var validateArgumentsLength = function (passed, required) {
  if (passed < required) throw TypeError('Not enough arguments');
};

var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
  setInternalState(this, {
    type: URL_SEARCH_PARAMS_ITERATOR,
    iterator: getIterator(getInternalParamsState(params).entries),
    kind: kind
  });
}, 'Iterator', function next() {
  var state = getInternalIteratorState(this);
  var kind = state.kind;
  var step = state.iterator.next();
  var entry = step.value;
  if (!step.done) {
    step.value = kind === 'keys' ? entry.key : kind === 'values' ? entry.value : [entry.key, entry.value];
  } return step;
}, true);

var URLSearchParamsState = function (init) {
  this.entries = [];
  this.url = null;

  if (init !== undefined) {
    if (isObject(init)) this.parseObject(init);
    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));
  }
};

URLSearchParamsState.prototype = {
  type: URL_SEARCH_PARAMS,
  bindURL: function (url) {
    this.url = url;
    this.update();
  },
  parseObject: function (object) {
    var iteratorMethod = getIteratorMethod(object);
    var iterator, next, step, entryIterator, entryNext, first, second;

    if (iteratorMethod) {
      iterator = getIterator(object, iteratorMethod);
      next = iterator.next;
      while (!(step = call(next, iterator)).done) {
        entryIterator = getIterator(anObject(step.value));
        entryNext = entryIterator.next;
        if (
          (first = call(entryNext, entryIterator)).done ||
          (second = call(entryNext, entryIterator)).done ||
          !call(entryNext, entryIterator).done
        ) throw TypeError('Expected sequence with length 2');
        push(this.entries, { key: $toString(first.value), value: $toString(second.value) });
      }
    } else for (var key in object) if (hasOwn(object, key)) {
      push(this.entries, { key: key, value: $toString(object[key]) });
    }
  },
  parseQuery: function (query) {
    if (query) {
      var attributes = split(query, '&');
      var index = 0;
      var attribute, entry;
      while (index < attributes.length) {
        attribute = attributes[index++];
        if (attribute.length) {
          entry = split(attribute, '=');
          push(this.entries, {
            key: deserialize(shift(entry)),
            value: deserialize(join(entry, '='))
          });
        }
      }
    }
  },
  serialize: function () {
    var entries = this.entries;
    var result = [];
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      push(result, serialize(entry.key) + '=' + serialize(entry.value));
    } return join(result, '&');
  },
  update: function () {
    this.entries.length = 0;
    this.parseQuery(this.url.query);
  },
  updateURL: function () {
    if (this.url) this.url.update();
  }
};

// `URLSearchParams` constructor
// https://url.spec.whatwg.org/#interface-urlsearchparams
var URLSearchParamsConstructor = function URLSearchParams(/* init */) {
  anInstance(this, URLSearchParamsPrototype);
  var init = arguments.length > 0 ? arguments[0] : undefined;
  setInternalState(this, new URLSearchParamsState(init));
};

var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;

redefineAll(URLSearchParamsPrototype, {
  // `URLSearchParams.prototype.append` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-append
  append: function append(name, value) {
    validateArgumentsLength(arguments.length, 2);
    var state = getInternalParamsState(this);
    push(state.entries, { key: $toString(name), value: $toString(value) });
    state.updateURL();
  },
  // `URLSearchParams.prototype.delete` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete
  'delete': function (name) {
    validateArgumentsLength(arguments.length, 1);
    var state = getInternalParamsState(this);
    var entries = state.entries;
    var key = $toString(name);
    var index = 0;
    while (index < entries.length) {
      if (entries[index].key === key) splice(entries, index, 1);
      else index++;
    }
    state.updateURL();
  },
  // `URLSearchParams.prototype.get` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-get
  get: function get(name) {
    validateArgumentsLength(arguments.length, 1);
    var entries = getInternalParamsState(this).entries;
    var key = $toString(name);
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) return entries[index].value;
    }
    return null;
  },
  // `URLSearchParams.prototype.getAll` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall
  getAll: function getAll(name) {
    validateArgumentsLength(arguments.length, 1);
    var entries = getInternalParamsState(this).entries;
    var key = $toString(name);
    var result = [];
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) push(result, entries[index].value);
    }
    return result;
  },
  // `URLSearchParams.prototype.has` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-has
  has: function has(name) {
    validateArgumentsLength(arguments.length, 1);
    var entries = getInternalParamsState(this).entries;
    var key = $toString(name);
    var index = 0;
    while (index < entries.length) {
      if (entries[index++].key === key) return true;
    }
    return false;
  },
  // `URLSearchParams.prototype.set` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-set
  set: function set(name, value) {
    validateArgumentsLength(arguments.length, 1);
    var state = getInternalParamsState(this);
    var entries = state.entries;
    var found = false;
    var key = $toString(name);
    var val = $toString(value);
    var index = 0;
    var entry;
    for (; index < entries.length; index++) {
      entry = entries[index];
      if (entry.key === key) {
        if (found) splice(entries, index--, 1);
        else {
          found = true;
          entry.value = val;
        }
      }
    }
    if (!found) push(entries, { key: key, value: val });
    state.updateURL();
  },
  // `URLSearchParams.prototype.sort` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort
  sort: function sort() {
    var state = getInternalParamsState(this);
    arraySort(state.entries, function (a, b) {
      return a.key > b.key ? 1 : -1;
    });
    state.updateURL();
  },
  // `URLSearchParams.prototype.forEach` method
  forEach: function forEach(callback /* , thisArg */) {
    var entries = getInternalParamsState(this).entries;
    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      boundFunction(entry.value, entry.key, this);
    }
  },
  // `URLSearchParams.prototype.keys` method
  keys: function keys() {
    return new URLSearchParamsIterator(this, 'keys');
  },
  // `URLSearchParams.prototype.values` method
  values: function values() {
    return new URLSearchParamsIterator(this, 'values');
  },
  // `URLSearchParams.prototype.entries` method
  entries: function entries() {
    return new URLSearchParamsIterator(this, 'entries');
  }
}, { enumerable: true });

// `URLSearchParams.prototype[@@iterator]` method
redefine(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });

// `URLSearchParams.prototype.toString` method
// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior
redefine(URLSearchParamsPrototype, 'toString', function toString() {
  return getInternalParamsState(this).serialize();
}, { enumerable: true });

setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);

$({ global: true, forced: !USE_NATIVE_URL }, {
  URLSearchParams: URLSearchParamsConstructor
});

// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`
if (!USE_NATIVE_URL && isCallable(Headers)) {
  var headersHas = uncurryThis(HeadersPrototype.has);
  var headersSet = uncurryThis(HeadersPrototype.set);

  var wrapRequestOptions = function (init) {
    if (isObject(init)) {
      var body = init.body;
      var headers;
      if (classof(body) === URL_SEARCH_PARAMS) {
        headers = init.headers ? new Headers(init.headers) : new Headers();
        if (!headersHas(headers, 'content-type')) {
          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
        }
        return create(init, {
          body: createPropertyDescriptor(0, $toString(body)),
          headers: createPropertyDescriptor(0, headers)
        });
      }
    } return init;
  };

  if (isCallable(n$Fetch)) {
    $({ global: true, enumerable: true, forced: true }, {
      fetch: function fetch(input /* , init */) {
        return n$Fetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
      }
    });
  }

  if (isCallable(N$Request)) {
    var RequestConstructor = function Request(input /* , init */) {
      anInstance(this, RequestPrototype);
      return new N$Request(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
    };

    RequestPrototype.constructor = RequestConstructor;
    RequestConstructor.prototype = RequestPrototype;

    $({ global: true, forced: true }, {
      Request: RequestConstructor
    });
  }
}

module.exports = {
  URLSearchParams: URLSearchParamsConstructor,
  getState: getInternalParamsState
};


/***/ }),

/***/ "./node_modules/core-js/modules/web.url.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/web.url.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(/*! ../modules/es.string.iterator */ "./node_modules/core-js/modules/es.string.iterator.js");
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var USE_NATIVE_URL = __webpack_require__(/*! ../internals/native-url */ "./node_modules/core-js/internals/native-url.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var bind = __webpack_require__(/*! ../internals/function-bind-context */ "./node_modules/core-js/internals/function-bind-context.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");
var defineProperties = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js").f;
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");
var assign = __webpack_require__(/*! ../internals/object-assign */ "./node_modules/core-js/internals/object-assign.js");
var arrayFrom = __webpack_require__(/*! ../internals/array-from */ "./node_modules/core-js/internals/array-from.js");
var arraySlice = __webpack_require__(/*! ../internals/array-slice-simple */ "./node_modules/core-js/internals/array-slice-simple.js");
var codeAt = __webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").codeAt;
var toASCII = __webpack_require__(/*! ../internals/string-punycode-to-ascii */ "./node_modules/core-js/internals/string-punycode-to-ascii.js");
var $toString = __webpack_require__(/*! ../internals/to-string */ "./node_modules/core-js/internals/to-string.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var URLSearchParamsModule = __webpack_require__(/*! ../modules/web.url-search-params */ "./node_modules/core-js/modules/web.url-search-params.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var setInternalState = InternalStateModule.set;
var getInternalURLState = InternalStateModule.getterFor('URL');
var URLSearchParams = URLSearchParamsModule.URLSearchParams;
var getInternalSearchParamsState = URLSearchParamsModule.getState;

var NativeURL = global.URL;
var TypeError = global.TypeError;
var parseInt = global.parseInt;
var floor = Math.floor;
var pow = Math.pow;
var charAt = uncurryThis(''.charAt);
var exec = uncurryThis(/./.exec);
var join = uncurryThis([].join);
var numberToString = uncurryThis(1.0.toString);
var pop = uncurryThis([].pop);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var toLowerCase = uncurryThis(''.toLowerCase);
var unshift = uncurryThis([].unshift);

var INVALID_AUTHORITY = 'Invalid authority';
var INVALID_SCHEME = 'Invalid scheme';
var INVALID_HOST = 'Invalid host';
var INVALID_PORT = 'Invalid port';

var ALPHA = /[a-z]/i;
// eslint-disable-next-line regexp/no-obscure-range -- safe
var ALPHANUMERIC = /[\d+-.a-z]/i;
var DIGIT = /\d/;
var HEX_START = /^0x/i;
var OCT = /^[0-7]+$/;
var DEC = /^\d+$/;
var HEX = /^[\da-f]+$/i;
/* eslint-disable regexp/no-control-character -- safe */
var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
var LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+|[\u0000-\u0020]+$/g;
var TAB_AND_NEW_LINE = /[\t\n\r]/g;
/* eslint-enable regexp/no-control-character -- safe */
var EOF;

// https://url.spec.whatwg.org/#ipv4-number-parser
var parseIPv4 = function (input) {
  var parts = split(input, '.');
  var partsLength, numbers, index, part, radix, number, ipv4;
  if (parts.length && parts[parts.length - 1] == '') {
    parts.length--;
  }
  partsLength = parts.length;
  if (partsLength > 4) return input;
  numbers = [];
  for (index = 0; index < partsLength; index++) {
    part = parts[index];
    if (part == '') return input;
    radix = 10;
    if (part.length > 1 && charAt(part, 0) == '0') {
      radix = exec(HEX_START, part) ? 16 : 8;
      part = stringSlice(part, radix == 8 ? 1 : 2);
    }
    if (part === '') {
      number = 0;
    } else {
      if (!exec(radix == 10 ? DEC : radix == 8 ? OCT : HEX, part)) return input;
      number = parseInt(part, radix);
    }
    push(numbers, number);
  }
  for (index = 0; index < partsLength; index++) {
    number = numbers[index];
    if (index == partsLength - 1) {
      if (number >= pow(256, 5 - partsLength)) return null;
    } else if (number > 255) return null;
  }
  ipv4 = pop(numbers);
  for (index = 0; index < numbers.length; index++) {
    ipv4 += numbers[index] * pow(256, 3 - index);
  }
  return ipv4;
};

// https://url.spec.whatwg.org/#concept-ipv6-parser
// eslint-disable-next-line max-statements -- TODO
var parseIPv6 = function (input) {
  var address = [0, 0, 0, 0, 0, 0, 0, 0];
  var pieceIndex = 0;
  var compress = null;
  var pointer = 0;
  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;

  var chr = function () {
    return charAt(input, pointer);
  };

  if (chr() == ':') {
    if (charAt(input, 1) != ':') return;
    pointer += 2;
    pieceIndex++;
    compress = pieceIndex;
  }
  while (chr()) {
    if (pieceIndex == 8) return;
    if (chr() == ':') {
      if (compress !== null) return;
      pointer++;
      pieceIndex++;
      compress = pieceIndex;
      continue;
    }
    value = length = 0;
    while (length < 4 && exec(HEX, chr())) {
      value = value * 16 + parseInt(chr(), 16);
      pointer++;
      length++;
    }
    if (chr() == '.') {
      if (length == 0) return;
      pointer -= length;
      if (pieceIndex > 6) return;
      numbersSeen = 0;
      while (chr()) {
        ipv4Piece = null;
        if (numbersSeen > 0) {
          if (chr() == '.' && numbersSeen < 4) pointer++;
          else return;
        }
        if (!exec(DIGIT, chr())) return;
        while (exec(DIGIT, chr())) {
          number = parseInt(chr(), 10);
          if (ipv4Piece === null) ipv4Piece = number;
          else if (ipv4Piece == 0) return;
          else ipv4Piece = ipv4Piece * 10 + number;
          if (ipv4Piece > 255) return;
          pointer++;
        }
        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
        numbersSeen++;
        if (numbersSeen == 2 || numbersSeen == 4) pieceIndex++;
      }
      if (numbersSeen != 4) return;
      break;
    } else if (chr() == ':') {
      pointer++;
      if (!chr()) return;
    } else if (chr()) return;
    address[pieceIndex++] = value;
  }
  if (compress !== null) {
    swaps = pieceIndex - compress;
    pieceIndex = 7;
    while (pieceIndex != 0 && swaps > 0) {
      swap = address[pieceIndex];
      address[pieceIndex--] = address[compress + swaps - 1];
      address[compress + --swaps] = swap;
    }
  } else if (pieceIndex != 8) return;
  return address;
};

var findLongestZeroSequence = function (ipv6) {
  var maxIndex = null;
  var maxLength = 1;
  var currStart = null;
  var currLength = 0;
  var index = 0;
  for (; index < 8; index++) {
    if (ipv6[index] !== 0) {
      if (currLength > maxLength) {
        maxIndex = currStart;
        maxLength = currLength;
      }
      currStart = null;
      currLength = 0;
    } else {
      if (currStart === null) currStart = index;
      ++currLength;
    }
  }
  if (currLength > maxLength) {
    maxIndex = currStart;
    maxLength = currLength;
  }
  return maxIndex;
};

// https://url.spec.whatwg.org/#host-serializing
var serializeHost = function (host) {
  var result, index, compress, ignore0;
  // ipv4
  if (typeof host == 'number') {
    result = [];
    for (index = 0; index < 4; index++) {
      unshift(result, host % 256);
      host = floor(host / 256);
    } return join(result, '.');
  // ipv6
  } else if (typeof host == 'object') {
    result = '';
    compress = findLongestZeroSequence(host);
    for (index = 0; index < 8; index++) {
      if (ignore0 && host[index] === 0) continue;
      if (ignore0) ignore0 = false;
      if (compress === index) {
        result += index ? ':' : '::';
        ignore0 = true;
      } else {
        result += numberToString(host[index], 16);
        if (index < 7) result += ':';
      }
    }
    return '[' + result + ']';
  } return host;
};

var C0ControlPercentEncodeSet = {};
var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
  ' ': 1, '"': 1, '<': 1, '>': 1, '`': 1
});
var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
  '#': 1, '?': 1, '{': 1, '}': 1
});
var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\': 1, ']': 1, '^': 1, '|': 1
});

var percentEncode = function (chr, set) {
  var code = codeAt(chr, 0);
  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
};

// https://url.spec.whatwg.org/#special-scheme
var specialSchemes = {
  ftp: 21,
  file: null,
  http: 80,
  https: 443,
  ws: 80,
  wss: 443
};

// https://url.spec.whatwg.org/#windows-drive-letter
var isWindowsDriveLetter = function (string, normalized) {
  var second;
  return string.length == 2 && exec(ALPHA, charAt(string, 0))
    && ((second = charAt(string, 1)) == ':' || (!normalized && second == '|'));
};

// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter
var startsWithWindowsDriveLetter = function (string) {
  var third;
  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (
    string.length == 2 ||
    ((third = charAt(string, 2)) === '/' || third === '\\' || third === '?' || third === '#')
  );
};

// https://url.spec.whatwg.org/#single-dot-path-segment
var isSingleDot = function (segment) {
  return segment === '.' || toLowerCase(segment) === '%2e';
};

// https://url.spec.whatwg.org/#double-dot-path-segment
var isDoubleDot = function (segment) {
  segment = toLowerCase(segment);
  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';
};

// States:
var SCHEME_START = {};
var SCHEME = {};
var NO_SCHEME = {};
var SPECIAL_RELATIVE_OR_AUTHORITY = {};
var PATH_OR_AUTHORITY = {};
var RELATIVE = {};
var RELATIVE_SLASH = {};
var SPECIAL_AUTHORITY_SLASHES = {};
var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
var AUTHORITY = {};
var HOST = {};
var HOSTNAME = {};
var PORT = {};
var FILE = {};
var FILE_SLASH = {};
var FILE_HOST = {};
var PATH_START = {};
var PATH = {};
var CANNOT_BE_A_BASE_URL_PATH = {};
var QUERY = {};
var FRAGMENT = {};

var URLState = function (url, isBase, base) {
  var urlString = $toString(url);
  var baseState, failure, searchParams;
  if (isBase) {
    failure = this.parse(urlString);
    if (failure) throw TypeError(failure);
    this.searchParams = null;
  } else {
    if (base !== undefined) baseState = new URLState(base, true);
    failure = this.parse(urlString, null, baseState);
    if (failure) throw TypeError(failure);
    searchParams = getInternalSearchParamsState(new URLSearchParams());
    searchParams.bindURL(this);
    this.searchParams = searchParams;
  }
};

URLState.prototype = {
  type: 'URL',
  // https://url.spec.whatwg.org/#url-parsing
  // eslint-disable-next-line max-statements -- TODO
  parse: function (input, stateOverride, base) {
    var url = this;
    var state = stateOverride || SCHEME_START;
    var pointer = 0;
    var buffer = '';
    var seenAt = false;
    var seenBracket = false;
    var seenPasswordToken = false;
    var codePoints, chr, bufferCodePoints, failure;

    input = $toString(input);

    if (!stateOverride) {
      url.scheme = '';
      url.username = '';
      url.password = '';
      url.host = null;
      url.port = null;
      url.path = [];
      url.query = null;
      url.fragment = null;
      url.cannotBeABaseURL = false;
      input = replace(input, LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, '');
    }

    input = replace(input, TAB_AND_NEW_LINE, '');

    codePoints = arrayFrom(input);

    while (pointer <= codePoints.length) {
      chr = codePoints[pointer];
      switch (state) {
        case SCHEME_START:
          if (chr && exec(ALPHA, chr)) {
            buffer += toLowerCase(chr);
            state = SCHEME;
          } else if (!stateOverride) {
            state = NO_SCHEME;
            continue;
          } else return INVALID_SCHEME;
          break;

        case SCHEME:
          if (chr && (exec(ALPHANUMERIC, chr) || chr == '+' || chr == '-' || chr == '.')) {
            buffer += toLowerCase(chr);
          } else if (chr == ':') {
            if (stateOverride && (
              (url.isSpecial() != hasOwn(specialSchemes, buffer)) ||
              (buffer == 'file' && (url.includesCredentials() || url.port !== null)) ||
              (url.scheme == 'file' && !url.host)
            )) return;
            url.scheme = buffer;
            if (stateOverride) {
              if (url.isSpecial() && specialSchemes[url.scheme] == url.port) url.port = null;
              return;
            }
            buffer = '';
            if (url.scheme == 'file') {
              state = FILE;
            } else if (url.isSpecial() && base && base.scheme == url.scheme) {
              state = SPECIAL_RELATIVE_OR_AUTHORITY;
            } else if (url.isSpecial()) {
              state = SPECIAL_AUTHORITY_SLASHES;
            } else if (codePoints[pointer + 1] == '/') {
              state = PATH_OR_AUTHORITY;
              pointer++;
            } else {
              url.cannotBeABaseURL = true;
              push(url.path, '');
              state = CANNOT_BE_A_BASE_URL_PATH;
            }
          } else if (!stateOverride) {
            buffer = '';
            state = NO_SCHEME;
            pointer = 0;
            continue;
          } else return INVALID_SCHEME;
          break;

        case NO_SCHEME:
          if (!base || (base.cannotBeABaseURL && chr != '#')) return INVALID_SCHEME;
          if (base.cannotBeABaseURL && chr == '#') {
            url.scheme = base.scheme;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            url.cannotBeABaseURL = true;
            state = FRAGMENT;
            break;
          }
          state = base.scheme == 'file' ? FILE : RELATIVE;
          continue;

        case SPECIAL_RELATIVE_OR_AUTHORITY:
          if (chr == '/' && codePoints[pointer + 1] == '/') {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
            pointer++;
          } else {
            state = RELATIVE;
            continue;
          } break;

        case PATH_OR_AUTHORITY:
          if (chr == '/') {
            state = AUTHORITY;
            break;
          } else {
            state = PATH;
            continue;
          }

        case RELATIVE:
          url.scheme = base.scheme;
          if (chr == EOF) {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
          } else if (chr == '/' || (chr == '\\' && url.isSpecial())) {
            state = RELATIVE_SLASH;
          } else if (chr == '?') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = '';
            state = QUERY;
          } else if (chr == '#') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            state = FRAGMENT;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.path.length--;
            state = PATH;
            continue;
          } break;

        case RELATIVE_SLASH:
          if (url.isSpecial() && (chr == '/' || chr == '\\')) {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          } else if (chr == '/') {
            state = AUTHORITY;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            state = PATH;
            continue;
          } break;

        case SPECIAL_AUTHORITY_SLASHES:
          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          if (chr != '/' || charAt(buffer, pointer + 1) != '/') continue;
          pointer++;
          break;

        case SPECIAL_AUTHORITY_IGNORE_SLASHES:
          if (chr != '/' && chr != '\\') {
            state = AUTHORITY;
            continue;
          } break;

        case AUTHORITY:
          if (chr == '@') {
            if (seenAt) buffer = '%40' + buffer;
            seenAt = true;
            bufferCodePoints = arrayFrom(buffer);
            for (var i = 0; i < bufferCodePoints.length; i++) {
              var codePoint = bufferCodePoints[i];
              if (codePoint == ':' && !seenPasswordToken) {
                seenPasswordToken = true;
                continue;
              }
              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
              if (seenPasswordToken) url.password += encodedCodePoints;
              else url.username += encodedCodePoints;
            }
            buffer = '';
          } else if (
            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||
            (chr == '\\' && url.isSpecial())
          ) {
            if (seenAt && buffer == '') return INVALID_AUTHORITY;
            pointer -= arrayFrom(buffer).length + 1;
            buffer = '';
            state = HOST;
          } else buffer += chr;
          break;

        case HOST:
        case HOSTNAME:
          if (stateOverride && url.scheme == 'file') {
            state = FILE_HOST;
            continue;
          } else if (chr == ':' && !seenBracket) {
            if (buffer == '') return INVALID_HOST;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PORT;
            if (stateOverride == HOSTNAME) return;
          } else if (
            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||
            (chr == '\\' && url.isSpecial())
          ) {
            if (url.isSpecial() && buffer == '') return INVALID_HOST;
            if (stateOverride && buffer == '' && (url.includesCredentials() || url.port !== null)) return;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PATH_START;
            if (stateOverride) return;
            continue;
          } else {
            if (chr == '[') seenBracket = true;
            else if (chr == ']') seenBracket = false;
            buffer += chr;
          } break;

        case PORT:
          if (exec(DIGIT, chr)) {
            buffer += chr;
          } else if (
            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||
            (chr == '\\' && url.isSpecial()) ||
            stateOverride
          ) {
            if (buffer != '') {
              var port = parseInt(buffer, 10);
              if (port > 0xFFFF) return INVALID_PORT;
              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;
              buffer = '';
            }
            if (stateOverride) return;
            state = PATH_START;
            continue;
          } else return INVALID_PORT;
          break;

        case FILE:
          url.scheme = 'file';
          if (chr == '/' || chr == '\\') state = FILE_SLASH;
          else if (base && base.scheme == 'file') {
            if (chr == EOF) {
              url.host = base.host;
              url.path = arraySlice(base.path);
              url.query = base.query;
            } else if (chr == '?') {
              url.host = base.host;
              url.path = arraySlice(base.path);
              url.query = '';
              state = QUERY;
            } else if (chr == '#') {
              url.host = base.host;
              url.path = arraySlice(base.path);
              url.query = base.query;
              url.fragment = '';
              state = FRAGMENT;
            } else {
              if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.shortenPath();
              }
              state = PATH;
              continue;
            }
          } else {
            state = PATH;
            continue;
          } break;

        case FILE_SLASH:
          if (chr == '/' || chr == '\\') {
            state = FILE_HOST;
            break;
          }
          if (base && base.scheme == 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);
            else url.host = base.host;
          }
          state = PATH;
          continue;

        case FILE_HOST:
          if (chr == EOF || chr == '/' || chr == '\\' || chr == '?' || chr == '#') {
            if (!stateOverride && isWindowsDriveLetter(buffer)) {
              state = PATH;
            } else if (buffer == '') {
              url.host = '';
              if (stateOverride) return;
              state = PATH_START;
            } else {
              failure = url.parseHost(buffer);
              if (failure) return failure;
              if (url.host == 'localhost') url.host = '';
              if (stateOverride) return;
              buffer = '';
              state = PATH_START;
            } continue;
          } else buffer += chr;
          break;

        case PATH_START:
          if (url.isSpecial()) {
            state = PATH;
            if (chr != '/' && chr != '\\') continue;
          } else if (!stateOverride && chr == '?') {
            url.query = '';
            state = QUERY;
          } else if (!stateOverride && chr == '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr != EOF) {
            state = PATH;
            if (chr != '/') continue;
          } break;

        case PATH:
          if (
            chr == EOF || chr == '/' ||
            (chr == '\\' && url.isSpecial()) ||
            (!stateOverride && (chr == '?' || chr == '#'))
          ) {
            if (isDoubleDot(buffer)) {
              url.shortenPath();
              if (chr != '/' && !(chr == '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else if (isSingleDot(buffer)) {
              if (chr != '/' && !(chr == '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else {
              if (url.scheme == 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {
                if (url.host) url.host = '';
                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter
              }
              push(url.path, buffer);
            }
            buffer = '';
            if (url.scheme == 'file' && (chr == EOF || chr == '?' || chr == '#')) {
              while (url.path.length > 1 && url.path[0] === '') {
                shift(url.path);
              }
            }
            if (chr == '?') {
              url.query = '';
              state = QUERY;
            } else if (chr == '#') {
              url.fragment = '';
              state = FRAGMENT;
            }
          } else {
            buffer += percentEncode(chr, pathPercentEncodeSet);
          } break;

        case CANNOT_BE_A_BASE_URL_PATH:
          if (chr == '?') {
            url.query = '';
            state = QUERY;
          } else if (chr == '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr != EOF) {
            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case QUERY:
          if (!stateOverride && chr == '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr != EOF) {
            if (chr == "'" && url.isSpecial()) url.query += '%27';
            else if (chr == '#') url.query += '%23';
            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case FRAGMENT:
          if (chr != EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
          break;
      }

      pointer++;
    }
  },
  // https://url.spec.whatwg.org/#host-parsing
  parseHost: function (input) {
    var result, codePoints, index;
    if (charAt(input, 0) == '[') {
      if (charAt(input, input.length - 1) != ']') return INVALID_HOST;
      result = parseIPv6(stringSlice(input, 1, -1));
      if (!result) return INVALID_HOST;
      this.host = result;
    // opaque host
    } else if (!this.isSpecial()) {
      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;
      result = '';
      codePoints = arrayFrom(input);
      for (index = 0; index < codePoints.length; index++) {
        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
      }
      this.host = result;
    } else {
      input = toASCII(input);
      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;
      result = parseIPv4(input);
      if (result === null) return INVALID_HOST;
      this.host = result;
    }
  },
  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port
  cannotHaveUsernamePasswordPort: function () {
    return !this.host || this.cannotBeABaseURL || this.scheme == 'file';
  },
  // https://url.spec.whatwg.org/#include-credentials
  includesCredentials: function () {
    return this.username != '' || this.password != '';
  },
  // https://url.spec.whatwg.org/#is-special
  isSpecial: function () {
    return hasOwn(specialSchemes, this.scheme);
  },
  // https://url.spec.whatwg.org/#shorten-a-urls-path
  shortenPath: function () {
    var path = this.path;
    var pathSize = path.length;
    if (pathSize && (this.scheme != 'file' || pathSize != 1 || !isWindowsDriveLetter(path[0], true))) {
      path.length--;
    }
  },
  // https://url.spec.whatwg.org/#concept-url-serializer
  serialize: function () {
    var url = this;
    var scheme = url.scheme;
    var username = url.username;
    var password = url.password;
    var host = url.host;
    var port = url.port;
    var path = url.path;
    var query = url.query;
    var fragment = url.fragment;
    var output = scheme + ':';
    if (host !== null) {
      output += '//';
      if (url.includesCredentials()) {
        output += username + (password ? ':' + password : '') + '@';
      }
      output += serializeHost(host);
      if (port !== null) output += ':' + port;
    } else if (scheme == 'file') output += '//';
    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
    if (query !== null) output += '?' + query;
    if (fragment !== null) output += '#' + fragment;
    return output;
  },
  // https://url.spec.whatwg.org/#dom-url-href
  setHref: function (href) {
    var failure = this.parse(href);
    if (failure) throw TypeError(failure);
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-origin
  getOrigin: function () {
    var scheme = this.scheme;
    var port = this.port;
    if (scheme == 'blob') try {
      return new URLConstructor(scheme.path[0]).origin;
    } catch (error) {
      return 'null';
    }
    if (scheme == 'file' || !this.isSpecial()) return 'null';
    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');
  },
  // https://url.spec.whatwg.org/#dom-url-protocol
  getProtocol: function () {
    return this.scheme + ':';
  },
  setProtocol: function (protocol) {
    this.parse($toString(protocol) + ':', SCHEME_START);
  },
  // https://url.spec.whatwg.org/#dom-url-username
  getUsername: function () {
    return this.username;
  },
  setUsername: function (username) {
    var codePoints = arrayFrom($toString(username));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.username = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-password
  getPassword: function () {
    return this.password;
  },
  setPassword: function (password) {
    var codePoints = arrayFrom($toString(password));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.password = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-host
  getHost: function () {
    var host = this.host;
    var port = this.port;
    return host === null ? ''
      : port === null ? serializeHost(host)
      : serializeHost(host) + ':' + port;
  },
  setHost: function (host) {
    if (this.cannotBeABaseURL) return;
    this.parse(host, HOST);
  },
  // https://url.spec.whatwg.org/#dom-url-hostname
  getHostname: function () {
    var host = this.host;
    return host === null ? '' : serializeHost(host);
  },
  setHostname: function (hostname) {
    if (this.cannotBeABaseURL) return;
    this.parse(hostname, HOSTNAME);
  },
  // https://url.spec.whatwg.org/#dom-url-port
  getPort: function () {
    var port = this.port;
    return port === null ? '' : $toString(port);
  },
  setPort: function (port) {
    if (this.cannotHaveUsernamePasswordPort()) return;
    port = $toString(port);
    if (port == '') this.port = null;
    else this.parse(port, PORT);
  },
  // https://url.spec.whatwg.org/#dom-url-pathname
  getPathname: function () {
    var path = this.path;
    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
  },
  setPathname: function (pathname) {
    if (this.cannotBeABaseURL) return;
    this.path = [];
    this.parse(pathname, PATH_START);
  },
  // https://url.spec.whatwg.org/#dom-url-search
  getSearch: function () {
    var query = this.query;
    return query ? '?' + query : '';
  },
  setSearch: function (search) {
    search = $toString(search);
    if (search == '') {
      this.query = null;
    } else {
      if ('?' == charAt(search, 0)) search = stringSlice(search, 1);
      this.query = '';
      this.parse(search, QUERY);
    }
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-searchparams
  getSearchParams: function () {
    return this.searchParams.facade;
  },
  // https://url.spec.whatwg.org/#dom-url-hash
  getHash: function () {
    var fragment = this.fragment;
    return fragment ? '#' + fragment : '';
  },
  setHash: function (hash) {
    hash = $toString(hash);
    if (hash == '') {
      this.fragment = null;
      return;
    }
    if ('#' == charAt(hash, 0)) hash = stringSlice(hash, 1);
    this.fragment = '';
    this.parse(hash, FRAGMENT);
  },
  update: function () {
    this.query = this.searchParams.serialize() || null;
  }
};

// `URL` constructor
// https://url.spec.whatwg.org/#url-class
var URLConstructor = function URL(url /* , base */) {
  var that = anInstance(this, URLPrototype);
  var base = arguments.length > 1 ? arguments[1] : undefined;
  var state = setInternalState(that, new URLState(url, false, base));
  if (!DESCRIPTORS) {
    that.href = state.serialize();
    that.origin = state.getOrigin();
    that.protocol = state.getProtocol();
    that.username = state.getUsername();
    that.password = state.getPassword();
    that.host = state.getHost();
    that.hostname = state.getHostname();
    that.port = state.getPort();
    that.pathname = state.getPathname();
    that.search = state.getSearch();
    that.searchParams = state.getSearchParams();
    that.hash = state.getHash();
  }
};

var URLPrototype = URLConstructor.prototype;

var accessorDescriptor = function (getter, setter) {
  return {
    get: function () {
      return getInternalURLState(this)[getter]();
    },
    set: setter && function (value) {
      return getInternalURLState(this)[setter](value);
    },
    configurable: true,
    enumerable: true
  };
};

if (DESCRIPTORS) {
  defineProperties(URLPrototype, {
    // `URL.prototype.href` accessors pair
    // https://url.spec.whatwg.org/#dom-url-href
    href: accessorDescriptor('serialize', 'setHref'),
    // `URL.prototype.origin` getter
    // https://url.spec.whatwg.org/#dom-url-origin
    origin: accessorDescriptor('getOrigin'),
    // `URL.prototype.protocol` accessors pair
    // https://url.spec.whatwg.org/#dom-url-protocol
    protocol: accessorDescriptor('getProtocol', 'setProtocol'),
    // `URL.prototype.username` accessors pair
    // https://url.spec.whatwg.org/#dom-url-username
    username: accessorDescriptor('getUsername', 'setUsername'),
    // `URL.prototype.password` accessors pair
    // https://url.spec.whatwg.org/#dom-url-password
    password: accessorDescriptor('getPassword', 'setPassword'),
    // `URL.prototype.host` accessors pair
    // https://url.spec.whatwg.org/#dom-url-host
    host: accessorDescriptor('getHost', 'setHost'),
    // `URL.prototype.hostname` accessors pair
    // https://url.spec.whatwg.org/#dom-url-hostname
    hostname: accessorDescriptor('getHostname', 'setHostname'),
    // `URL.prototype.port` accessors pair
    // https://url.spec.whatwg.org/#dom-url-port
    port: accessorDescriptor('getPort', 'setPort'),
    // `URL.prototype.pathname` accessors pair
    // https://url.spec.whatwg.org/#dom-url-pathname
    pathname: accessorDescriptor('getPathname', 'setPathname'),
    // `URL.prototype.search` accessors pair
    // https://url.spec.whatwg.org/#dom-url-search
    search: accessorDescriptor('getSearch', 'setSearch'),
    // `URL.prototype.searchParams` getter
    // https://url.spec.whatwg.org/#dom-url-searchparams
    searchParams: accessorDescriptor('getSearchParams'),
    // `URL.prototype.hash` accessors pair
    // https://url.spec.whatwg.org/#dom-url-hash
    hash: accessorDescriptor('getHash', 'setHash')
  });
}

// `URL.prototype.toJSON` method
// https://url.spec.whatwg.org/#dom-url-tojson
redefine(URLPrototype, 'toJSON', function toJSON() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

// `URL.prototype.toString` method
// https://url.spec.whatwg.org/#URL-stringification-behavior
redefine(URLPrototype, 'toString', function toString() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

if (NativeURL) {
  var nativeCreateObjectURL = NativeURL.createObjectURL;
  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
  // `URL.createObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL
  if (nativeCreateObjectURL) redefine(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));
  // `URL.revokeObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL
  if (nativeRevokeObjectURL) redefine(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));
}

setToStringTag(URLConstructor, 'URL');

$({ global: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {
  URL: URLConstructor
});


/***/ }),

/***/ "./node_modules/crypt/crypt.js":
/*!*************************************!*\
  !*** ./node_modules/crypt/crypt.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

(function() {
  var base64map
      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',

  crypt = {
    // Bit-wise rotation left
    rotl: function(n, b) {
      return (n << b) | (n >>> (32 - b));
    },

    // Bit-wise rotation right
    rotr: function(n, b) {
      return (n << (32 - b)) | (n >>> b);
    },

    // Swap big-endian to little-endian and vice versa
    endian: function(n) {
      // If number given, swap endian
      if (n.constructor == Number) {
        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;
      }

      // Else, assume array and swap all items
      for (var i = 0; i < n.length; i++)
        n[i] = crypt.endian(n[i]);
      return n;
    },

    // Generate an array of any length of random bytes
    randomBytes: function(n) {
      for (var bytes = []; n > 0; n--)
        bytes.push(Math.floor(Math.random() * 256));
      return bytes;
    },

    // Convert a byte array to big-endian 32-bit words
    bytesToWords: function(bytes) {
      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)
        words[b >>> 5] |= bytes[i] << (24 - b % 32);
      return words;
    },

    // Convert big-endian 32-bit words to a byte array
    wordsToBytes: function(words) {
      for (var bytes = [], b = 0; b < words.length * 32; b += 8)
        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);
      return bytes;
    },

    // Convert a byte array to a hex string
    bytesToHex: function(bytes) {
      for (var hex = [], i = 0; i < bytes.length; i++) {
        hex.push((bytes[i] >>> 4).toString(16));
        hex.push((bytes[i] & 0xF).toString(16));
      }
      return hex.join('');
    },

    // Convert a hex string to a byte array
    hexToBytes: function(hex) {
      for (var bytes = [], c = 0; c < hex.length; c += 2)
        bytes.push(parseInt(hex.substr(c, 2), 16));
      return bytes;
    },

    // Convert a byte array to a base-64 string
    bytesToBase64: function(bytes) {
      for (var base64 = [], i = 0; i < bytes.length; i += 3) {
        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];
        for (var j = 0; j < 4; j++)
          if (i * 8 + j * 6 <= bytes.length * 8)
            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));
          else
            base64.push('=');
      }
      return base64.join('');
    },

    // Convert a base-64 string to a byte array
    base64ToBytes: function(base64) {
      // Remove non-base-64 characters
      base64 = base64.replace(/[^A-Z0-9+\/]/ig, '');

      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;
          imod4 = ++i % 4) {
        if (imod4 == 0) continue;
        bytes.push(((base64map.indexOf(base64.charAt(i - 1))
            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))
            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));
      }
      return bytes;
    }
  };

  module.exports = crypt;
})();


/***/ }),

/***/ "./node_modules/crypto-js/aes.js":
/*!***************************************!*\
  !*** ./node_modules/crypto-js/aes.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory, undef) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"), __webpack_require__(/*! ./enc-base64 */ "./node_modules/crypto-js/enc-base64.js"), __webpack_require__(/*! ./md5 */ "./node_modules/crypto-js/md5.js"), __webpack_require__(/*! ./evpkdf */ "./node_modules/crypto-js/evpkdf.js"), __webpack_require__(/*! ./cipher-core */ "./node_modules/crypto-js/cipher-core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function () {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var BlockCipher = C_lib.BlockCipher;
	    var C_algo = C.algo;

	    // Lookup tables
	    var SBOX = [];
	    var INV_SBOX = [];
	    var SUB_MIX_0 = [];
	    var SUB_MIX_1 = [];
	    var SUB_MIX_2 = [];
	    var SUB_MIX_3 = [];
	    var INV_SUB_MIX_0 = [];
	    var INV_SUB_MIX_1 = [];
	    var INV_SUB_MIX_2 = [];
	    var INV_SUB_MIX_3 = [];

	    // Compute lookup tables
	    (function () {
	        // Compute double table
	        var d = [];
	        for (var i = 0; i < 256; i++) {
	            if (i < 128) {
	                d[i] = i << 1;
	            } else {
	                d[i] = (i << 1) ^ 0x11b;
	            }
	        }

	        // Walk GF(2^8)
	        var x = 0;
	        var xi = 0;
	        for (var i = 0; i < 256; i++) {
	            // Compute sbox
	            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);
	            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;
	            SBOX[x] = sx;
	            INV_SBOX[sx] = x;

	            // Compute multiplication
	            var x2 = d[x];
	            var x4 = d[x2];
	            var x8 = d[x4];

	            // Compute sub bytes, mix columns tables
	            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);
	            SUB_MIX_0[x] = (t << 24) | (t >>> 8);
	            SUB_MIX_1[x] = (t << 16) | (t >>> 16);
	            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);
	            SUB_MIX_3[x] = t;

	            // Compute inv sub bytes, inv mix columns tables
	            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);
	            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);
	            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);
	            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);
	            INV_SUB_MIX_3[sx] = t;

	            // Compute next counter
	            if (!x) {
	                x = xi = 1;
	            } else {
	                x = x2 ^ d[d[d[x8 ^ x2]]];
	                xi ^= d[d[xi]];
	            }
	        }
	    }());

	    // Precomputed Rcon lookup
	    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];

	    /**
	     * AES block cipher algorithm.
	     */
	    var AES = C_algo.AES = BlockCipher.extend({
	        _doReset: function () {
	            // Skip reset of nRounds has been set before and key did not change
	            if (this._nRounds && this._keyPriorReset === this._key) {
	                return;
	            }

	            // Shortcuts
	            var key = this._keyPriorReset = this._key;
	            var keyWords = key.words;
	            var keySize = key.sigBytes / 4;

	            // Compute number of rounds
	            var nRounds = this._nRounds = keySize + 6;

	            // Compute number of key schedule rows
	            var ksRows = (nRounds + 1) * 4;

	            // Compute key schedule
	            var keySchedule = this._keySchedule = [];
	            for (var ksRow = 0; ksRow < ksRows; ksRow++) {
	                if (ksRow < keySize) {
	                    keySchedule[ksRow] = keyWords[ksRow];
	                } else {
	                    var t = keySchedule[ksRow - 1];

	                    if (!(ksRow % keySize)) {
	                        // Rot word
	                        t = (t << 8) | (t >>> 24);

	                        // Sub word
	                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];

	                        // Mix Rcon
	                        t ^= RCON[(ksRow / keySize) | 0] << 24;
	                    } else if (keySize > 6 && ksRow % keySize == 4) {
	                        // Sub word
	                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];
	                    }

	                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;
	                }
	            }

	            // Compute inv key schedule
	            var invKeySchedule = this._invKeySchedule = [];
	            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {
	                var ksRow = ksRows - invKsRow;

	                if (invKsRow % 4) {
	                    var t = keySchedule[ksRow];
	                } else {
	                    var t = keySchedule[ksRow - 4];
	                }

	                if (invKsRow < 4 || ksRow <= 4) {
	                    invKeySchedule[invKsRow] = t;
	                } else {
	                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^
	                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];
	                }
	            }
	        },

	        encryptBlock: function (M, offset) {
	            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);
	        },

	        decryptBlock: function (M, offset) {
	            // Swap 2nd and 4th rows
	            var t = M[offset + 1];
	            M[offset + 1] = M[offset + 3];
	            M[offset + 3] = t;

	            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);

	            // Inv swap 2nd and 4th rows
	            var t = M[offset + 1];
	            M[offset + 1] = M[offset + 3];
	            M[offset + 3] = t;
	        },

	        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {
	            // Shortcut
	            var nRounds = this._nRounds;

	            // Get input, add round key
	            var s0 = M[offset]     ^ keySchedule[0];
	            var s1 = M[offset + 1] ^ keySchedule[1];
	            var s2 = M[offset + 2] ^ keySchedule[2];
	            var s3 = M[offset + 3] ^ keySchedule[3];

	            // Key schedule row counter
	            var ksRow = 4;

	            // Rounds
	            for (var round = 1; round < nRounds; round++) {
	                // Shift rows, sub bytes, mix columns, add round key
	                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];
	                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];
	                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];
	                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];

	                // Update state
	                s0 = t0;
	                s1 = t1;
	                s2 = t2;
	                s3 = t3;
	            }

	            // Shift rows, sub bytes, add round key
	            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];
	            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];
	            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];
	            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];

	            // Set output
	            M[offset]     = t0;
	            M[offset + 1] = t1;
	            M[offset + 2] = t2;
	            M[offset + 3] = t3;
	        },

	        keySize: 256/32
	    });

	    /**
	     * Shortcut functions to the cipher's object interface.
	     *
	     * @example
	     *
	     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);
	     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);
	     */
	    C.AES = BlockCipher._createHelper(AES);
	}());


	return CryptoJS.AES;

}));

/***/ }),

/***/ "./node_modules/crypto-js/cipher-core.js":
/*!***********************************************!*\
  !*** ./node_modules/crypto-js/cipher-core.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory, undef) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"), __webpack_require__(/*! ./evpkdf */ "./node_modules/crypto-js/evpkdf.js"));
	}
	else {}
}(this, function (CryptoJS) {

	/**
	 * Cipher core components.
	 */
	CryptoJS.lib.Cipher || (function (undefined) {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var Base = C_lib.Base;
	    var WordArray = C_lib.WordArray;
	    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;
	    var C_enc = C.enc;
	    var Utf8 = C_enc.Utf8;
	    var Base64 = C_enc.Base64;
	    var C_algo = C.algo;
	    var EvpKDF = C_algo.EvpKDF;

	    /**
	     * Abstract base cipher template.
	     *
	     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)
	     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)
	     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.
	     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.
	     */
	    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({
	        /**
	         * Configuration options.
	         *
	         * @property {WordArray} iv The IV to use for this operation.
	         */
	        cfg: Base.extend(),

	        /**
	         * Creates this cipher in encryption mode.
	         *
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {Cipher} A cipher instance.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });
	         */
	        createEncryptor: function (key, cfg) {
	            return this.create(this._ENC_XFORM_MODE, key, cfg);
	        },

	        /**
	         * Creates this cipher in decryption mode.
	         *
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {Cipher} A cipher instance.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });
	         */
	        createDecryptor: function (key, cfg) {
	            return this.create(this._DEC_XFORM_MODE, key, cfg);
	        },

	        /**
	         * Initializes a newly created cipher.
	         *
	         * @param {number} xformMode Either the encryption or decryption transormation mode constant.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });
	         */
	        init: function (xformMode, key, cfg) {
	            // Apply config defaults
	            this.cfg = this.cfg.extend(cfg);

	            // Store transform mode and key
	            this._xformMode = xformMode;
	            this._key = key;

	            // Set initial values
	            this.reset();
	        },

	        /**
	         * Resets this cipher to its initial state.
	         *
	         * @example
	         *
	         *     cipher.reset();
	         */
	        reset: function () {
	            // Reset data buffer
	            BufferedBlockAlgorithm.reset.call(this);

	            // Perform concrete-cipher logic
	            this._doReset();
	        },

	        /**
	         * Adds data to be encrypted or decrypted.
	         *
	         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.
	         *
	         * @return {WordArray} The data after processing.
	         *
	         * @example
	         *
	         *     var encrypted = cipher.process('data');
	         *     var encrypted = cipher.process(wordArray);
	         */
	        process: function (dataUpdate) {
	            // Append
	            this._append(dataUpdate);

	            // Process available blocks
	            return this._process();
	        },

	        /**
	         * Finalizes the encryption or decryption process.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.
	         *
	         * @return {WordArray} The data after final processing.
	         *
	         * @example
	         *
	         *     var encrypted = cipher.finalize();
	         *     var encrypted = cipher.finalize('data');
	         *     var encrypted = cipher.finalize(wordArray);
	         */
	        finalize: function (dataUpdate) {
	            // Final data update
	            if (dataUpdate) {
	                this._append(dataUpdate);
	            }

	            // Perform concrete-cipher logic
	            var finalProcessedData = this._doFinalize();

	            return finalProcessedData;
	        },

	        keySize: 128/32,

	        ivSize: 128/32,

	        _ENC_XFORM_MODE: 1,

	        _DEC_XFORM_MODE: 2,

	        /**
	         * Creates shortcut functions to a cipher's object interface.
	         *
	         * @param {Cipher} cipher The cipher to create a helper for.
	         *
	         * @return {Object} An object with encrypt and decrypt shortcut functions.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);
	         */
	        _createHelper: (function () {
	            function selectCipherStrategy(key) {
	                if (typeof key == 'string') {
	                    return PasswordBasedCipher;
	                } else {
	                    return SerializableCipher;
	                }
	            }

	            return function (cipher) {
	                return {
	                    encrypt: function (message, key, cfg) {
	                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);
	                    },

	                    decrypt: function (ciphertext, key, cfg) {
	                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);
	                    }
	                };
	            };
	        }())
	    });

	    /**
	     * Abstract base stream cipher template.
	     *
	     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)
	     */
	    var StreamCipher = C_lib.StreamCipher = Cipher.extend({
	        _doFinalize: function () {
	            // Process partial blocks
	            var finalProcessedBlocks = this._process(!!'flush');

	            return finalProcessedBlocks;
	        },

	        blockSize: 1
	    });

	    /**
	     * Mode namespace.
	     */
	    var C_mode = C.mode = {};

	    /**
	     * Abstract base block cipher mode template.
	     */
	    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({
	        /**
	         * Creates this mode for encryption.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);
	         */
	        createEncryptor: function (cipher, iv) {
	            return this.Encryptor.create(cipher, iv);
	        },

	        /**
	         * Creates this mode for decryption.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);
	         */
	        createDecryptor: function (cipher, iv) {
	            return this.Decryptor.create(cipher, iv);
	        },

	        /**
	         * Initializes a newly created mode.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);
	         */
	        init: function (cipher, iv) {
	            this._cipher = cipher;
	            this._iv = iv;
	        }
	    });

	    /**
	     * Cipher Block Chaining mode.
	     */
	    var CBC = C_mode.CBC = (function () {
	        /**
	         * Abstract base CBC mode.
	         */
	        var CBC = BlockCipherMode.extend();

	        /**
	         * CBC encryptor.
	         */
	        CBC.Encryptor = CBC.extend({
	            /**
	             * Processes the data block at offset.
	             *
	             * @param {Array} words The data words to operate on.
	             * @param {number} offset The offset where the block starts.
	             *
	             * @example
	             *
	             *     mode.processBlock(data.words, offset);
	             */
	            processBlock: function (words, offset) {
	                // Shortcuts
	                var cipher = this._cipher;
	                var blockSize = cipher.blockSize;

	                // XOR and encrypt
	                xorBlock.call(this, words, offset, blockSize);
	                cipher.encryptBlock(words, offset);

	                // Remember this block to use with next block
	                this._prevBlock = words.slice(offset, offset + blockSize);
	            }
	        });

	        /**
	         * CBC decryptor.
	         */
	        CBC.Decryptor = CBC.extend({
	            /**
	             * Processes the data block at offset.
	             *
	             * @param {Array} words The data words to operate on.
	             * @param {number} offset The offset where the block starts.
	             *
	             * @example
	             *
	             *     mode.processBlock(data.words, offset);
	             */
	            processBlock: function (words, offset) {
	                // Shortcuts
	                var cipher = this._cipher;
	                var blockSize = cipher.blockSize;

	                // Remember this block to use with next block
	                var thisBlock = words.slice(offset, offset + blockSize);

	                // Decrypt and XOR
	                cipher.decryptBlock(words, offset);
	                xorBlock.call(this, words, offset, blockSize);

	                // This block becomes the previous block
	                this._prevBlock = thisBlock;
	            }
	        });

	        function xorBlock(words, offset, blockSize) {
	            // Shortcut
	            var iv = this._iv;

	            // Choose mixing block
	            if (iv) {
	                var block = iv;

	                // Remove IV for subsequent blocks
	                this._iv = undefined;
	            } else {
	                var block = this._prevBlock;
	            }

	            // XOR blocks
	            for (var i = 0; i < blockSize; i++) {
	                words[offset + i] ^= block[i];
	            }
	        }

	        return CBC;
	    }());

	    /**
	     * Padding namespace.
	     */
	    var C_pad = C.pad = {};

	    /**
	     * PKCS #5/7 padding strategy.
	     */
	    var Pkcs7 = C_pad.Pkcs7 = {
	        /**
	         * Pads data using the algorithm defined in PKCS #5/7.
	         *
	         * @param {WordArray} data The data to pad.
	         * @param {number} blockSize The multiple that the data should be padded to.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);
	         */
	        pad: function (data, blockSize) {
	            // Shortcut
	            var blockSizeBytes = blockSize * 4;

	            // Count padding bytes
	            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;

	            // Create padding word
	            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;

	            // Create padding
	            var paddingWords = [];
	            for (var i = 0; i < nPaddingBytes; i += 4) {
	                paddingWords.push(paddingWord);
	            }
	            var padding = WordArray.create(paddingWords, nPaddingBytes);

	            // Add padding
	            data.concat(padding);
	        },

	        /**
	         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.
	         *
	         * @param {WordArray} data The data to unpad.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     CryptoJS.pad.Pkcs7.unpad(wordArray);
	         */
	        unpad: function (data) {
	            // Get number of padding bytes from last byte
	            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;

	            // Remove padding
	            data.sigBytes -= nPaddingBytes;
	        }
	    };

	    /**
	     * Abstract base block cipher template.
	     *
	     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)
	     */
	    var BlockCipher = C_lib.BlockCipher = Cipher.extend({
	        /**
	         * Configuration options.
	         *
	         * @property {Mode} mode The block mode to use. Default: CBC
	         * @property {Padding} padding The padding strategy to use. Default: Pkcs7
	         */
	        cfg: Cipher.cfg.extend({
	            mode: CBC,
	            padding: Pkcs7
	        }),

	        reset: function () {
	            // Reset cipher
	            Cipher.reset.call(this);

	            // Shortcuts
	            var cfg = this.cfg;
	            var iv = cfg.iv;
	            var mode = cfg.mode;

	            // Reset block mode
	            if (this._xformMode == this._ENC_XFORM_MODE) {
	                var modeCreator = mode.createEncryptor;
	            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {
	                var modeCreator = mode.createDecryptor;
	                // Keep at least one block in the buffer for unpadding
	                this._minBufferSize = 1;
	            }

	            if (this._mode && this._mode.__creator == modeCreator) {
	                this._mode.init(this, iv && iv.words);
	            } else {
	                this._mode = modeCreator.call(mode, this, iv && iv.words);
	                this._mode.__creator = modeCreator;
	            }
	        },

	        _doProcessBlock: function (words, offset) {
	            this._mode.processBlock(words, offset);
	        },

	        _doFinalize: function () {
	            // Shortcut
	            var padding = this.cfg.padding;

	            // Finalize
	            if (this._xformMode == this._ENC_XFORM_MODE) {
	                // Pad data
	                padding.pad(this._data, this.blockSize);

	                // Process final blocks
	                var finalProcessedBlocks = this._process(!!'flush');
	            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {
	                // Process final blocks
	                var finalProcessedBlocks = this._process(!!'flush');

	                // Unpad data
	                padding.unpad(finalProcessedBlocks);
	            }

	            return finalProcessedBlocks;
	        },

	        blockSize: 128/32
	    });

	    /**
	     * A collection of cipher parameters.
	     *
	     * @property {WordArray} ciphertext The raw ciphertext.
	     * @property {WordArray} key The key to this ciphertext.
	     * @property {WordArray} iv The IV used in the ciphering operation.
	     * @property {WordArray} salt The salt used with a key derivation function.
	     * @property {Cipher} algorithm The cipher algorithm.
	     * @property {Mode} mode The block mode used in the ciphering operation.
	     * @property {Padding} padding The padding scheme used in the ciphering operation.
	     * @property {number} blockSize The block size of the cipher.
	     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.
	     */
	    var CipherParams = C_lib.CipherParams = Base.extend({
	        /**
	         * Initializes a newly created cipher params object.
	         *
	         * @param {Object} cipherParams An object with any of the possible cipher parameters.
	         *
	         * @example
	         *
	         *     var cipherParams = CryptoJS.lib.CipherParams.create({
	         *         ciphertext: ciphertextWordArray,
	         *         key: keyWordArray,
	         *         iv: ivWordArray,
	         *         salt: saltWordArray,
	         *         algorithm: CryptoJS.algo.AES,
	         *         mode: CryptoJS.mode.CBC,
	         *         padding: CryptoJS.pad.PKCS7,
	         *         blockSize: 4,
	         *         formatter: CryptoJS.format.OpenSSL
	         *     });
	         */
	        init: function (cipherParams) {
	            this.mixIn(cipherParams);
	        },

	        /**
	         * Converts this cipher params object to a string.
	         *
	         * @param {Format} formatter (Optional) The formatting strategy to use.
	         *
	         * @return {string} The stringified cipher params.
	         *
	         * @throws Error If neither the formatter nor the default formatter is set.
	         *
	         * @example
	         *
	         *     var string = cipherParams + '';
	         *     var string = cipherParams.toString();
	         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);
	         */
	        toString: function (formatter) {
	            return (formatter || this.formatter).stringify(this);
	        }
	    });

	    /**
	     * Format namespace.
	     */
	    var C_format = C.format = {};

	    /**
	     * OpenSSL formatting strategy.
	     */
	    var OpenSSLFormatter = C_format.OpenSSL = {
	        /**
	         * Converts a cipher params object to an OpenSSL-compatible string.
	         *
	         * @param {CipherParams} cipherParams The cipher params object.
	         *
	         * @return {string} The OpenSSL-compatible string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);
	         */
	        stringify: function (cipherParams) {
	            // Shortcuts
	            var ciphertext = cipherParams.ciphertext;
	            var salt = cipherParams.salt;

	            // Format
	            if (salt) {
	                var wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);
	            } else {
	                var wordArray = ciphertext;
	            }

	            return wordArray.toString(Base64);
	        },

	        /**
	         * Converts an OpenSSL-compatible string to a cipher params object.
	         *
	         * @param {string} openSSLStr The OpenSSL-compatible string.
	         *
	         * @return {CipherParams} The cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);
	         */
	        parse: function (openSSLStr) {
	            // Parse base64
	            var ciphertext = Base64.parse(openSSLStr);

	            // Shortcut
	            var ciphertextWords = ciphertext.words;

	            // Test for salt
	            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {
	                // Extract salt
	                var salt = WordArray.create(ciphertextWords.slice(2, 4));

	                // Remove salt from ciphertext
	                ciphertextWords.splice(0, 4);
	                ciphertext.sigBytes -= 16;
	            }

	            return CipherParams.create({ ciphertext: ciphertext, salt: salt });
	        }
	    };

	    /**
	     * A cipher wrapper that returns ciphertext as a serializable cipher params object.
	     */
	    var SerializableCipher = C_lib.SerializableCipher = Base.extend({
	        /**
	         * Configuration options.
	         *
	         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL
	         */
	        cfg: Base.extend({
	            format: OpenSSLFormatter
	        }),

	        /**
	         * Encrypts a message.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {WordArray|string} message The message to encrypt.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {CipherParams} A cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         */
	        encrypt: function (cipher, message, key, cfg) {
	            // Apply config defaults
	            cfg = this.cfg.extend(cfg);

	            // Encrypt
	            var encryptor = cipher.createEncryptor(key, cfg);
	            var ciphertext = encryptor.finalize(message);

	            // Shortcut
	            var cipherCfg = encryptor.cfg;

	            // Create and return serializable cipher params
	            return CipherParams.create({
	                ciphertext: ciphertext,
	                key: key,
	                iv: cipherCfg.iv,
	                algorithm: cipher,
	                mode: cipherCfg.mode,
	                padding: cipherCfg.padding,
	                blockSize: cipher.blockSize,
	                formatter: cfg.format
	            });
	        },

	        /**
	         * Decrypts serialized ciphertext.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {WordArray} The plaintext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         */
	        decrypt: function (cipher, ciphertext, key, cfg) {
	            // Apply config defaults
	            cfg = this.cfg.extend(cfg);

	            // Convert string to CipherParams
	            ciphertext = this._parse(ciphertext, cfg.format);

	            // Decrypt
	            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);

	            return plaintext;
	        },

	        /**
	         * Converts serialized ciphertext to CipherParams,
	         * else assumed CipherParams already and returns ciphertext unchanged.
	         *
	         * @param {CipherParams|string} ciphertext The ciphertext.
	         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.
	         *
	         * @return {CipherParams} The unserialized ciphertext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);
	         */
	        _parse: function (ciphertext, format) {
	            if (typeof ciphertext == 'string') {
	                return format.parse(ciphertext, this);
	            } else {
	                return ciphertext;
	            }
	        }
	    });

	    /**
	     * Key derivation function namespace.
	     */
	    var C_kdf = C.kdf = {};

	    /**
	     * OpenSSL key derivation function.
	     */
	    var OpenSSLKdf = C_kdf.OpenSSL = {
	        /**
	         * Derives a key and IV from a password.
	         *
	         * @param {string} password The password to derive from.
	         * @param {number} keySize The size in words of the key to generate.
	         * @param {number} ivSize The size in words of the IV to generate.
	         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.
	         *
	         * @return {CipherParams} A cipher params object with the key, IV, and salt.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);
	         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');
	         */
	        execute: function (password, keySize, ivSize, salt) {
	            // Generate random salt
	            if (!salt) {
	                salt = WordArray.random(64/8);
	            }

	            // Derive key and IV
	            var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);

	            // Separate key and IV
	            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);
	            key.sigBytes = keySize * 4;

	            // Return params
	            return CipherParams.create({ key: key, iv: iv, salt: salt });
	        }
	    };

	    /**
	     * A serializable cipher wrapper that derives the key from a password,
	     * and returns ciphertext as a serializable cipher params object.
	     */
	    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({
	        /**
	         * Configuration options.
	         *
	         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL
	         */
	        cfg: SerializableCipher.cfg.extend({
	            kdf: OpenSSLKdf
	        }),

	        /**
	         * Encrypts a message using a password.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {WordArray|string} message The message to encrypt.
	         * @param {string} password The password.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {CipherParams} A cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');
	         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });
	         */
	        encrypt: function (cipher, message, password, cfg) {
	            // Apply config defaults
	            cfg = this.cfg.extend(cfg);

	            // Derive key and other params
	            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize);

	            // Add IV to config
	            cfg.iv = derivedParams.iv;

	            // Encrypt
	            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);

	            // Mix in derived params
	            ciphertext.mixIn(derivedParams);

	            return ciphertext;
	        },

	        /**
	         * Decrypts serialized ciphertext using a password.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
	         * @param {string} password The password.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {WordArray} The plaintext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });
	         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });
	         */
	        decrypt: function (cipher, ciphertext, password, cfg) {
	            // Apply config defaults
	            cfg = this.cfg.extend(cfg);

	            // Convert string to CipherParams
	            ciphertext = this._parse(ciphertext, cfg.format);

	            // Derive key and other params
	            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt);

	            // Add IV to config
	            cfg.iv = derivedParams.iv;

	            // Decrypt
	            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);

	            return plaintext;
	        }
	    });
	}());


}));

/***/ }),

/***/ "./node_modules/crypto-js/core.js":
/*!****************************************!*\
  !*** ./node_modules/crypto-js/core.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory();
	}
	else {}
}(this, function () {

	/**
	 * CryptoJS core components.
	 */
	var CryptoJS = CryptoJS || (function (Math, undefined) {
	    /*
	     * Local polyfil of Object.create
	     */
	    var create = Object.create || (function () {
	        function F() {};

	        return function (obj) {
	            var subtype;

	            F.prototype = obj;

	            subtype = new F();

	            F.prototype = null;

	            return subtype;
	        };
	    }())

	    /**
	     * CryptoJS namespace.
	     */
	    var C = {};

	    /**
	     * Library namespace.
	     */
	    var C_lib = C.lib = {};

	    /**
	     * Base object for prototypal inheritance.
	     */
	    var Base = C_lib.Base = (function () {


	        return {
	            /**
	             * Creates a new object that inherits from this object.
	             *
	             * @param {Object} overrides Properties to copy into the new object.
	             *
	             * @return {Object} The new object.
	             *
	             * @static
	             *
	             * @example
	             *
	             *     var MyType = CryptoJS.lib.Base.extend({
	             *         field: 'value',
	             *
	             *         method: function () {
	             *         }
	             *     });
	             */
	            extend: function (overrides) {
	                // Spawn
	                var subtype = create(this);

	                // Augment
	                if (overrides) {
	                    subtype.mixIn(overrides);
	                }

	                // Create default initializer
	                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {
	                    subtype.init = function () {
	                        subtype.$super.init.apply(this, arguments);
	                    };
	                }

	                // Initializer's prototype is the subtype object
	                subtype.init.prototype = subtype;

	                // Reference supertype
	                subtype.$super = this;

	                return subtype;
	            },

	            /**
	             * Extends this object and runs the init method.
	             * Arguments to create() will be passed to init().
	             *
	             * @return {Object} The new object.
	             *
	             * @static
	             *
	             * @example
	             *
	             *     var instance = MyType.create();
	             */
	            create: function () {
	                var instance = this.extend();
	                instance.init.apply(instance, arguments);

	                return instance;
	            },

	            /**
	             * Initializes a newly created object.
	             * Override this method to add some logic when your objects are created.
	             *
	             * @example
	             *
	             *     var MyType = CryptoJS.lib.Base.extend({
	             *         init: function () {
	             *             // ...
	             *         }
	             *     });
	             */
	            init: function () {
	            },

	            /**
	             * Copies properties into this object.
	             *
	             * @param {Object} properties The properties to mix in.
	             *
	             * @example
	             *
	             *     MyType.mixIn({
	             *         field: 'value'
	             *     });
	             */
	            mixIn: function (properties) {
	                for (var propertyName in properties) {
	                    if (properties.hasOwnProperty(propertyName)) {
	                        this[propertyName] = properties[propertyName];
	                    }
	                }

	                // IE won't copy toString using the loop above
	                if (properties.hasOwnProperty('toString')) {
	                    this.toString = properties.toString;
	                }
	            },

	            /**
	             * Creates a copy of this object.
	             *
	             * @return {Object} The clone.
	             *
	             * @example
	             *
	             *     var clone = instance.clone();
	             */
	            clone: function () {
	                return this.init.prototype.extend(this);
	            }
	        };
	    }());

	    /**
	     * An array of 32-bit words.
	     *
	     * @property {Array} words The array of 32-bit words.
	     * @property {number} sigBytes The number of significant bytes in this word array.
	     */
	    var WordArray = C_lib.WordArray = Base.extend({
	        /**
	         * Initializes a newly created word array.
	         *
	         * @param {Array} words (Optional) An array of 32-bit words.
	         * @param {number} sigBytes (Optional) The number of significant bytes in the words.
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.lib.WordArray.create();
	         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);
	         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);
	         */
	        init: function (words, sigBytes) {
	            words = this.words = words || [];

	            if (sigBytes != undefined) {
	                this.sigBytes = sigBytes;
	            } else {
	                this.sigBytes = words.length * 4;
	            }
	        },

	        /**
	         * Converts this word array to a string.
	         *
	         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex
	         *
	         * @return {string} The stringified word array.
	         *
	         * @example
	         *
	         *     var string = wordArray + '';
	         *     var string = wordArray.toString();
	         *     var string = wordArray.toString(CryptoJS.enc.Utf8);
	         */
	        toString: function (encoder) {
	            return (encoder || Hex).stringify(this);
	        },

	        /**
	         * Concatenates a word array to this word array.
	         *
	         * @param {WordArray} wordArray The word array to append.
	         *
	         * @return {WordArray} This word array.
	         *
	         * @example
	         *
	         *     wordArray1.concat(wordArray2);
	         */
	        concat: function (wordArray) {
	            // Shortcuts
	            var thisWords = this.words;
	            var thatWords = wordArray.words;
	            var thisSigBytes = this.sigBytes;
	            var thatSigBytes = wordArray.sigBytes;

	            // Clamp excess bits
	            this.clamp();

	            // Concat
	            if (thisSigBytes % 4) {
	                // Copy one byte at a time
	                for (var i = 0; i < thatSigBytes; i++) {
	                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;
	                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);
	                }
	            } else {
	                // Copy one word at a time
	                for (var i = 0; i < thatSigBytes; i += 4) {
	                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];
	                }
	            }
	            this.sigBytes += thatSigBytes;

	            // Chainable
	            return this;
	        },

	        /**
	         * Removes insignificant bits.
	         *
	         * @example
	         *
	         *     wordArray.clamp();
	         */
	        clamp: function () {
	            // Shortcuts
	            var words = this.words;
	            var sigBytes = this.sigBytes;

	            // Clamp
	            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);
	            words.length = Math.ceil(sigBytes / 4);
	        },

	        /**
	         * Creates a copy of this word array.
	         *
	         * @return {WordArray} The clone.
	         *
	         * @example
	         *
	         *     var clone = wordArray.clone();
	         */
	        clone: function () {
	            var clone = Base.clone.call(this);
	            clone.words = this.words.slice(0);

	            return clone;
	        },

	        /**
	         * Creates a word array filled with random bytes.
	         *
	         * @param {number} nBytes The number of random bytes to generate.
	         *
	         * @return {WordArray} The random word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.lib.WordArray.random(16);
	         */
	        random: function (nBytes) {
	            var words = [];

	            var r = (function (m_w) {
	                var m_w = m_w;
	                var m_z = 0x3ade68b1;
	                var mask = 0xffffffff;

	                return function () {
	                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;
	                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;
	                    var result = ((m_z << 0x10) + m_w) & mask;
	                    result /= 0x100000000;
	                    result += 0.5;
	                    return result * (Math.random() > .5 ? 1 : -1);
	                }
	            });

	            for (var i = 0, rcache; i < nBytes; i += 4) {
	                var _r = r((rcache || Math.random()) * 0x100000000);

	                rcache = _r() * 0x3ade67b7;
	                words.push((_r() * 0x100000000) | 0);
	            }

	            return new WordArray.init(words, nBytes);
	        }
	    });

	    /**
	     * Encoder namespace.
	     */
	    var C_enc = C.enc = {};

	    /**
	     * Hex encoding strategy.
	     */
	    var Hex = C_enc.Hex = {
	        /**
	         * Converts a word array to a hex string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The hex string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);
	         */
	        stringify: function (wordArray) {
	            // Shortcuts
	            var words = wordArray.words;
	            var sigBytes = wordArray.sigBytes;

	            // Convert
	            var hexChars = [];
	            for (var i = 0; i < sigBytes; i++) {
	                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;
	                hexChars.push((bite >>> 4).toString(16));
	                hexChars.push((bite & 0x0f).toString(16));
	            }

	            return hexChars.join('');
	        },

	        /**
	         * Converts a hex string to a word array.
	         *
	         * @param {string} hexStr The hex string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);
	         */
	        parse: function (hexStr) {
	            // Shortcut
	            var hexStrLength = hexStr.length;

	            // Convert
	            var words = [];
	            for (var i = 0; i < hexStrLength; i += 2) {
	                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);
	            }

	            return new WordArray.init(words, hexStrLength / 2);
	        }
	    };

	    /**
	     * Latin1 encoding strategy.
	     */
	    var Latin1 = C_enc.Latin1 = {
	        /**
	         * Converts a word array to a Latin1 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The Latin1 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);
	         */
	        stringify: function (wordArray) {
	            // Shortcuts
	            var words = wordArray.words;
	            var sigBytes = wordArray.sigBytes;

	            // Convert
	            var latin1Chars = [];
	            for (var i = 0; i < sigBytes; i++) {
	                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;
	                latin1Chars.push(String.fromCharCode(bite));
	            }

	            return latin1Chars.join('');
	        },

	        /**
	         * Converts a Latin1 string to a word array.
	         *
	         * @param {string} latin1Str The Latin1 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);
	         */
	        parse: function (latin1Str) {
	            // Shortcut
	            var latin1StrLength = latin1Str.length;

	            // Convert
	            var words = [];
	            for (var i = 0; i < latin1StrLength; i++) {
	                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);
	            }

	            return new WordArray.init(words, latin1StrLength);
	        }
	    };

	    /**
	     * UTF-8 encoding strategy.
	     */
	    var Utf8 = C_enc.Utf8 = {
	        /**
	         * Converts a word array to a UTF-8 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The UTF-8 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);
	         */
	        stringify: function (wordArray) {
	            try {
	                return decodeURIComponent(escape(Latin1.stringify(wordArray)));
	            } catch (e) {
	                throw new Error('Malformed UTF-8 data');
	            }
	        },

	        /**
	         * Converts a UTF-8 string to a word array.
	         *
	         * @param {string} utf8Str The UTF-8 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);
	         */
	        parse: function (utf8Str) {
	            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));
	        }
	    };

	    /**
	     * Abstract buffered block algorithm template.
	     *
	     * The property blockSize must be implemented in a concrete subtype.
	     *
	     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0
	     */
	    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({
	        /**
	         * Resets this block algorithm's data buffer to its initial state.
	         *
	         * @example
	         *
	         *     bufferedBlockAlgorithm.reset();
	         */
	        reset: function () {
	            // Initial values
	            this._data = new WordArray.init();
	            this._nDataBytes = 0;
	        },

	        /**
	         * Adds new data to this block algorithm's buffer.
	         *
	         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.
	         *
	         * @example
	         *
	         *     bufferedBlockAlgorithm._append('data');
	         *     bufferedBlockAlgorithm._append(wordArray);
	         */
	        _append: function (data) {
	            // Convert string to WordArray, else assume WordArray already
	            if (typeof data == 'string') {
	                data = Utf8.parse(data);
	            }

	            // Append
	            this._data.concat(data);
	            this._nDataBytes += data.sigBytes;
	        },

	        /**
	         * Processes available data blocks.
	         *
	         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.
	         *
	         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.
	         *
	         * @return {WordArray} The processed data.
	         *
	         * @example
	         *
	         *     var processedData = bufferedBlockAlgorithm._process();
	         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');
	         */
	        _process: function (doFlush) {
	            // Shortcuts
	            var data = this._data;
	            var dataWords = data.words;
	            var dataSigBytes = data.sigBytes;
	            var blockSize = this.blockSize;
	            var blockSizeBytes = blockSize * 4;

	            // Count blocks ready
	            var nBlocksReady = dataSigBytes / blockSizeBytes;
	            if (doFlush) {
	                // Round up to include partial blocks
	                nBlocksReady = Math.ceil(nBlocksReady);
	            } else {
	                // Round down to include only full blocks,
	                // less the number of blocks that must remain in the buffer
	                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);
	            }

	            // Count words ready
	            var nWordsReady = nBlocksReady * blockSize;

	            // Count bytes ready
	            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);

	            // Process blocks
	            if (nWordsReady) {
	                for (var offset = 0; offset < nWordsReady; offset += blockSize) {
	                    // Perform concrete-algorithm logic
	                    this._doProcessBlock(dataWords, offset);
	                }

	                // Remove processed words
	                var processedWords = dataWords.splice(0, nWordsReady);
	                data.sigBytes -= nBytesReady;
	            }

	            // Return processed words
	            return new WordArray.init(processedWords, nBytesReady);
	        },

	        /**
	         * Creates a copy of this object.
	         *
	         * @return {Object} The clone.
	         *
	         * @example
	         *
	         *     var clone = bufferedBlockAlgorithm.clone();
	         */
	        clone: function () {
	            var clone = Base.clone.call(this);
	            clone._data = this._data.clone();

	            return clone;
	        },

	        _minBufferSize: 0
	    });

	    /**
	     * Abstract hasher template.
	     *
	     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)
	     */
	    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({
	        /**
	         * Configuration options.
	         */
	        cfg: Base.extend(),

	        /**
	         * Initializes a newly created hasher.
	         *
	         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.
	         *
	         * @example
	         *
	         *     var hasher = CryptoJS.algo.SHA256.create();
	         */
	        init: function (cfg) {
	            // Apply config defaults
	            this.cfg = this.cfg.extend(cfg);

	            // Set initial values
	            this.reset();
	        },

	        /**
	         * Resets this hasher to its initial state.
	         *
	         * @example
	         *
	         *     hasher.reset();
	         */
	        reset: function () {
	            // Reset data buffer
	            BufferedBlockAlgorithm.reset.call(this);

	            // Perform concrete-hasher logic
	            this._doReset();
	        },

	        /**
	         * Updates this hasher with a message.
	         *
	         * @param {WordArray|string} messageUpdate The message to append.
	         *
	         * @return {Hasher} This hasher.
	         *
	         * @example
	         *
	         *     hasher.update('message');
	         *     hasher.update(wordArray);
	         */
	        update: function (messageUpdate) {
	            // Append
	            this._append(messageUpdate);

	            // Update the hash
	            this._process();

	            // Chainable
	            return this;
	        },

	        /**
	         * Finalizes the hash computation.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} messageUpdate (Optional) A final message update.
	         *
	         * @return {WordArray} The hash.
	         *
	         * @example
	         *
	         *     var hash = hasher.finalize();
	         *     var hash = hasher.finalize('message');
	         *     var hash = hasher.finalize(wordArray);
	         */
	        finalize: function (messageUpdate) {
	            // Final message update
	            if (messageUpdate) {
	                this._append(messageUpdate);
	            }

	            // Perform concrete-hasher logic
	            var hash = this._doFinalize();

	            return hash;
	        },

	        blockSize: 512/32,

	        /**
	         * Creates a shortcut function to a hasher's object interface.
	         *
	         * @param {Hasher} hasher The hasher to create a helper for.
	         *
	         * @return {Function} The shortcut function.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);
	         */
	        _createHelper: function (hasher) {
	            return function (message, cfg) {
	                return new hasher.init(cfg).finalize(message);
	            };
	        },

	        /**
	         * Creates a shortcut function to the HMAC's object interface.
	         *
	         * @param {Hasher} hasher The hasher to use in this HMAC helper.
	         *
	         * @return {Function} The shortcut function.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);
	         */
	        _createHmacHelper: function (hasher) {
	            return function (message, key) {
	                return new C_algo.HMAC.init(hasher, key).finalize(message);
	            };
	        }
	    });

	    /**
	     * Algorithm namespace.
	     */
	    var C_algo = C.algo = {};

	    return C;
	}(Math));


	return CryptoJS;

}));

/***/ }),

/***/ "./node_modules/crypto-js/enc-base64.js":
/*!**********************************************!*\
  !*** ./node_modules/crypto-js/enc-base64.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function () {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var WordArray = C_lib.WordArray;
	    var C_enc = C.enc;

	    /**
	     * Base64 encoding strategy.
	     */
	    var Base64 = C_enc.Base64 = {
	        /**
	         * Converts a word array to a Base64 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The Base64 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);
	         */
	        stringify: function (wordArray) {
	            // Shortcuts
	            var words = wordArray.words;
	            var sigBytes = wordArray.sigBytes;
	            var map = this._map;

	            // Clamp excess bits
	            wordArray.clamp();

	            // Convert
	            var base64Chars = [];
	            for (var i = 0; i < sigBytes; i += 3) {
	                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;
	                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;
	                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;

	                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;

	                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {
	                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));
	                }
	            }

	            // Add padding
	            var paddingChar = map.charAt(64);
	            if (paddingChar) {
	                while (base64Chars.length % 4) {
	                    base64Chars.push(paddingChar);
	                }
	            }

	            return base64Chars.join('');
	        },

	        /**
	         * Converts a Base64 string to a word array.
	         *
	         * @param {string} base64Str The Base64 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);
	         */
	        parse: function (base64Str) {
	            // Shortcuts
	            var base64StrLength = base64Str.length;
	            var map = this._map;
	            var reverseMap = this._reverseMap;

	            if (!reverseMap) {
	                    reverseMap = this._reverseMap = [];
	                    for (var j = 0; j < map.length; j++) {
	                        reverseMap[map.charCodeAt(j)] = j;
	                    }
	            }

	            // Ignore padding
	            var paddingChar = map.charAt(64);
	            if (paddingChar) {
	                var paddingIndex = base64Str.indexOf(paddingChar);
	                if (paddingIndex !== -1) {
	                    base64StrLength = paddingIndex;
	                }
	            }

	            // Convert
	            return parseLoop(base64Str, base64StrLength, reverseMap);

	        },

	        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='
	    };

	    function parseLoop(base64Str, base64StrLength, reverseMap) {
	      var words = [];
	      var nBytes = 0;
	      for (var i = 0; i < base64StrLength; i++) {
	          if (i % 4) {
	              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);
	              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);
	              words[nBytes >>> 2] |= (bits1 | bits2) << (24 - (nBytes % 4) * 8);
	              nBytes++;
	          }
	      }
	      return WordArray.create(words, nBytes);
	    }
	}());


	return CryptoJS.enc.Base64;

}));

/***/ }),

/***/ "./node_modules/crypto-js/enc-hex.js":
/*!*******************************************!*\
  !*** ./node_modules/crypto-js/enc-hex.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	return CryptoJS.enc.Hex;

}));

/***/ }),

/***/ "./node_modules/crypto-js/evpkdf.js":
/*!******************************************!*\
  !*** ./node_modules/crypto-js/evpkdf.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory, undef) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"), __webpack_require__(/*! ./sha1 */ "./node_modules/crypto-js/sha1.js"), __webpack_require__(/*! ./hmac */ "./node_modules/crypto-js/hmac.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function () {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var Base = C_lib.Base;
	    var WordArray = C_lib.WordArray;
	    var C_algo = C.algo;
	    var MD5 = C_algo.MD5;

	    /**
	     * This key derivation function is meant to conform with EVP_BytesToKey.
	     * www.openssl.org/docs/crypto/EVP_BytesToKey.html
	     */
	    var EvpKDF = C_algo.EvpKDF = Base.extend({
	        /**
	         * Configuration options.
	         *
	         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)
	         * @property {Hasher} hasher The hash algorithm to use. Default: MD5
	         * @property {number} iterations The number of iterations to perform. Default: 1
	         */
	        cfg: Base.extend({
	            keySize: 128/32,
	            hasher: MD5,
	            iterations: 1
	        }),

	        /**
	         * Initializes a newly created key derivation function.
	         *
	         * @param {Object} cfg (Optional) The configuration options to use for the derivation.
	         *
	         * @example
	         *
	         *     var kdf = CryptoJS.algo.EvpKDF.create();
	         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });
	         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });
	         */
	        init: function (cfg) {
	            this.cfg = this.cfg.extend(cfg);
	        },

	        /**
	         * Derives a key from a password.
	         *
	         * @param {WordArray|string} password The password.
	         * @param {WordArray|string} salt A salt.
	         *
	         * @return {WordArray} The derived key.
	         *
	         * @example
	         *
	         *     var key = kdf.compute(password, salt);
	         */
	        compute: function (password, salt) {
	            // Shortcut
	            var cfg = this.cfg;

	            // Init hasher
	            var hasher = cfg.hasher.create();

	            // Initial values
	            var derivedKey = WordArray.create();

	            // Shortcuts
	            var derivedKeyWords = derivedKey.words;
	            var keySize = cfg.keySize;
	            var iterations = cfg.iterations;

	            // Generate key
	            while (derivedKeyWords.length < keySize) {
	                if (block) {
	                    hasher.update(block);
	                }
	                var block = hasher.update(password).finalize(salt);
	                hasher.reset();

	                // Iterations
	                for (var i = 1; i < iterations; i++) {
	                    block = hasher.finalize(block);
	                    hasher.reset();
	                }

	                derivedKey.concat(block);
	            }
	            derivedKey.sigBytes = keySize * 4;

	            return derivedKey;
	        }
	    });

	    /**
	     * Derives a key from a password.
	     *
	     * @param {WordArray|string} password The password.
	     * @param {WordArray|string} salt A salt.
	     * @param {Object} cfg (Optional) The configuration options to use for this computation.
	     *
	     * @return {WordArray} The derived key.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var key = CryptoJS.EvpKDF(password, salt);
	     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });
	     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });
	     */
	    C.EvpKDF = function (password, salt, cfg) {
	        return EvpKDF.create(cfg).compute(password, salt);
	    };
	}());


	return CryptoJS.EvpKDF;

}));

/***/ }),

/***/ "./node_modules/crypto-js/hmac-sha1.js":
/*!*********************************************!*\
  !*** ./node_modules/crypto-js/hmac-sha1.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory, undef) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"), __webpack_require__(/*! ./sha1 */ "./node_modules/crypto-js/sha1.js"), __webpack_require__(/*! ./hmac */ "./node_modules/crypto-js/hmac.js"));
	}
	else {}
}(this, function (CryptoJS) {

	return CryptoJS.HmacSHA1;

}));

/***/ }),

/***/ "./node_modules/crypto-js/hmac.js":
/*!****************************************!*\
  !*** ./node_modules/crypto-js/hmac.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function () {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var Base = C_lib.Base;
	    var C_enc = C.enc;
	    var Utf8 = C_enc.Utf8;
	    var C_algo = C.algo;

	    /**
	     * HMAC algorithm.
	     */
	    var HMAC = C_algo.HMAC = Base.extend({
	        /**
	         * Initializes a newly created HMAC.
	         *
	         * @param {Hasher} hasher The hash algorithm to use.
	         * @param {WordArray|string} key The secret key.
	         *
	         * @example
	         *
	         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);
	         */
	        init: function (hasher, key) {
	            // Init hasher
	            hasher = this._hasher = new hasher.init();

	            // Convert string to WordArray, else assume WordArray already
	            if (typeof key == 'string') {
	                key = Utf8.parse(key);
	            }

	            // Shortcuts
	            var hasherBlockSize = hasher.blockSize;
	            var hasherBlockSizeBytes = hasherBlockSize * 4;

	            // Allow arbitrary length keys
	            if (key.sigBytes > hasherBlockSizeBytes) {
	                key = hasher.finalize(key);
	            }

	            // Clamp excess bits
	            key.clamp();

	            // Clone key for inner and outer pads
	            var oKey = this._oKey = key.clone();
	            var iKey = this._iKey = key.clone();

	            // Shortcuts
	            var oKeyWords = oKey.words;
	            var iKeyWords = iKey.words;

	            // XOR keys with pad constants
	            for (var i = 0; i < hasherBlockSize; i++) {
	                oKeyWords[i] ^= 0x5c5c5c5c;
	                iKeyWords[i] ^= 0x36363636;
	            }
	            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;

	            // Set initial values
	            this.reset();
	        },

	        /**
	         * Resets this HMAC to its initial state.
	         *
	         * @example
	         *
	         *     hmacHasher.reset();
	         */
	        reset: function () {
	            // Shortcut
	            var hasher = this._hasher;

	            // Reset
	            hasher.reset();
	            hasher.update(this._iKey);
	        },

	        /**
	         * Updates this HMAC with a message.
	         *
	         * @param {WordArray|string} messageUpdate The message to append.
	         *
	         * @return {HMAC} This HMAC instance.
	         *
	         * @example
	         *
	         *     hmacHasher.update('message');
	         *     hmacHasher.update(wordArray);
	         */
	        update: function (messageUpdate) {
	            this._hasher.update(messageUpdate);

	            // Chainable
	            return this;
	        },

	        /**
	         * Finalizes the HMAC computation.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} messageUpdate (Optional) A final message update.
	         *
	         * @return {WordArray} The HMAC.
	         *
	         * @example
	         *
	         *     var hmac = hmacHasher.finalize();
	         *     var hmac = hmacHasher.finalize('message');
	         *     var hmac = hmacHasher.finalize(wordArray);
	         */
	        finalize: function (messageUpdate) {
	            // Shortcut
	            var hasher = this._hasher;

	            // Compute HMAC
	            var innerHash = hasher.finalize(messageUpdate);
	            hasher.reset();
	            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));

	            return hmac;
	        }
	    });
	}());


}));

/***/ }),

/***/ "./node_modules/crypto-js/md5.js":
/*!***************************************!*\
  !*** ./node_modules/crypto-js/md5.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function (Math) {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var WordArray = C_lib.WordArray;
	    var Hasher = C_lib.Hasher;
	    var C_algo = C.algo;

	    // Constants table
	    var T = [];

	    // Compute constants
	    (function () {
	        for (var i = 0; i < 64; i++) {
	            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;
	        }
	    }());

	    /**
	     * MD5 hash algorithm.
	     */
	    var MD5 = C_algo.MD5 = Hasher.extend({
	        _doReset: function () {
	            this._hash = new WordArray.init([
	                0x67452301, 0xefcdab89,
	                0x98badcfe, 0x10325476
	            ]);
	        },

	        _doProcessBlock: function (M, offset) {
	            // Swap endian
	            for (var i = 0; i < 16; i++) {
	                // Shortcuts
	                var offset_i = offset + i;
	                var M_offset_i = M[offset_i];

	                M[offset_i] = (
	                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |
	                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)
	                );
	            }

	            // Shortcuts
	            var H = this._hash.words;

	            var M_offset_0  = M[offset + 0];
	            var M_offset_1  = M[offset + 1];
	            var M_offset_2  = M[offset + 2];
	            var M_offset_3  = M[offset + 3];
	            var M_offset_4  = M[offset + 4];
	            var M_offset_5  = M[offset + 5];
	            var M_offset_6  = M[offset + 6];
	            var M_offset_7  = M[offset + 7];
	            var M_offset_8  = M[offset + 8];
	            var M_offset_9  = M[offset + 9];
	            var M_offset_10 = M[offset + 10];
	            var M_offset_11 = M[offset + 11];
	            var M_offset_12 = M[offset + 12];
	            var M_offset_13 = M[offset + 13];
	            var M_offset_14 = M[offset + 14];
	            var M_offset_15 = M[offset + 15];

	            // Working varialbes
	            var a = H[0];
	            var b = H[1];
	            var c = H[2];
	            var d = H[3];

	            // Computation
	            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);
	            d = FF(d, a, b, c, M_offset_1,  12, T[1]);
	            c = FF(c, d, a, b, M_offset_2,  17, T[2]);
	            b = FF(b, c, d, a, M_offset_3,  22, T[3]);
	            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);
	            d = FF(d, a, b, c, M_offset_5,  12, T[5]);
	            c = FF(c, d, a, b, M_offset_6,  17, T[6]);
	            b = FF(b, c, d, a, M_offset_7,  22, T[7]);
	            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);
	            d = FF(d, a, b, c, M_offset_9,  12, T[9]);
	            c = FF(c, d, a, b, M_offset_10, 17, T[10]);
	            b = FF(b, c, d, a, M_offset_11, 22, T[11]);
	            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);
	            d = FF(d, a, b, c, M_offset_13, 12, T[13]);
	            c = FF(c, d, a, b, M_offset_14, 17, T[14]);
	            b = FF(b, c, d, a, M_offset_15, 22, T[15]);

	            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);
	            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);
	            c = GG(c, d, a, b, M_offset_11, 14, T[18]);
	            b = GG(b, c, d, a, M_offset_0,  20, T[19]);
	            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);
	            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);
	            c = GG(c, d, a, b, M_offset_15, 14, T[22]);
	            b = GG(b, c, d, a, M_offset_4,  20, T[23]);
	            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);
	            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);
	            c = GG(c, d, a, b, M_offset_3,  14, T[26]);
	            b = GG(b, c, d, a, M_offset_8,  20, T[27]);
	            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);
	            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);
	            c = GG(c, d, a, b, M_offset_7,  14, T[30]);
	            b = GG(b, c, d, a, M_offset_12, 20, T[31]);

	            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);
	            d = HH(d, a, b, c, M_offset_8,  11, T[33]);
	            c = HH(c, d, a, b, M_offset_11, 16, T[34]);
	            b = HH(b, c, d, a, M_offset_14, 23, T[35]);
	            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);
	            d = HH(d, a, b, c, M_offset_4,  11, T[37]);
	            c = HH(c, d, a, b, M_offset_7,  16, T[38]);
	            b = HH(b, c, d, a, M_offset_10, 23, T[39]);
	            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);
	            d = HH(d, a, b, c, M_offset_0,  11, T[41]);
	            c = HH(c, d, a, b, M_offset_3,  16, T[42]);
	            b = HH(b, c, d, a, M_offset_6,  23, T[43]);
	            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);
	            d = HH(d, a, b, c, M_offset_12, 11, T[45]);
	            c = HH(c, d, a, b, M_offset_15, 16, T[46]);
	            b = HH(b, c, d, a, M_offset_2,  23, T[47]);

	            a = II(a, b, c, d, M_offset_0,  6,  T[48]);
	            d = II(d, a, b, c, M_offset_7,  10, T[49]);
	            c = II(c, d, a, b, M_offset_14, 15, T[50]);
	            b = II(b, c, d, a, M_offset_5,  21, T[51]);
	            a = II(a, b, c, d, M_offset_12, 6,  T[52]);
	            d = II(d, a, b, c, M_offset_3,  10, T[53]);
	            c = II(c, d, a, b, M_offset_10, 15, T[54]);
	            b = II(b, c, d, a, M_offset_1,  21, T[55]);
	            a = II(a, b, c, d, M_offset_8,  6,  T[56]);
	            d = II(d, a, b, c, M_offset_15, 10, T[57]);
	            c = II(c, d, a, b, M_offset_6,  15, T[58]);
	            b = II(b, c, d, a, M_offset_13, 21, T[59]);
	            a = II(a, b, c, d, M_offset_4,  6,  T[60]);
	            d = II(d, a, b, c, M_offset_11, 10, T[61]);
	            c = II(c, d, a, b, M_offset_2,  15, T[62]);
	            b = II(b, c, d, a, M_offset_9,  21, T[63]);

	            // Intermediate hash value
	            H[0] = (H[0] + a) | 0;
	            H[1] = (H[1] + b) | 0;
	            H[2] = (H[2] + c) | 0;
	            H[3] = (H[3] + d) | 0;
	        },

	        _doFinalize: function () {
	            // Shortcuts
	            var data = this._data;
	            var dataWords = data.words;

	            var nBitsTotal = this._nDataBytes * 8;
	            var nBitsLeft = data.sigBytes * 8;

	            // Add padding
	            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);

	            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);
	            var nBitsTotalL = nBitsTotal;
	            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (
	                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |
	                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)
	            );
	            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (
	                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |
	                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)
	            );

	            data.sigBytes = (dataWords.length + 1) * 4;

	            // Hash final blocks
	            this._process();

	            // Shortcuts
	            var hash = this._hash;
	            var H = hash.words;

	            // Swap endian
	            for (var i = 0; i < 4; i++) {
	                // Shortcut
	                var H_i = H[i];

	                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |
	                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);
	            }

	            // Return final computed hash
	            return hash;
	        },

	        clone: function () {
	            var clone = Hasher.clone.call(this);
	            clone._hash = this._hash.clone();

	            return clone;
	        }
	    });

	    function FF(a, b, c, d, x, s, t) {
	        var n = a + ((b & c) | (~b & d)) + x + t;
	        return ((n << s) | (n >>> (32 - s))) + b;
	    }

	    function GG(a, b, c, d, x, s, t) {
	        var n = a + ((b & d) | (c & ~d)) + x + t;
	        return ((n << s) | (n >>> (32 - s))) + b;
	    }

	    function HH(a, b, c, d, x, s, t) {
	        var n = a + (b ^ c ^ d) + x + t;
	        return ((n << s) | (n >>> (32 - s))) + b;
	    }

	    function II(a, b, c, d, x, s, t) {
	        var n = a + (c ^ (b | ~d)) + x + t;
	        return ((n << s) | (n >>> (32 - s))) + b;
	    }

	    /**
	     * Shortcut function to the hasher's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     *
	     * @return {WordArray} The hash.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hash = CryptoJS.MD5('message');
	     *     var hash = CryptoJS.MD5(wordArray);
	     */
	    C.MD5 = Hasher._createHelper(MD5);

	    /**
	     * Shortcut function to the HMAC's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     * @param {WordArray|string} key The secret key.
	     *
	     * @return {WordArray} The HMAC.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hmac = CryptoJS.HmacMD5(message, key);
	     */
	    C.HmacMD5 = Hasher._createHmacHelper(MD5);
	}(Math));


	return CryptoJS.MD5;

}));

/***/ }),

/***/ "./node_modules/crypto-js/pad-nopadding.js":
/*!*************************************************!*\
  !*** ./node_modules/crypto-js/pad-nopadding.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory, undef) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"), __webpack_require__(/*! ./cipher-core */ "./node_modules/crypto-js/cipher-core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	/**
	 * A noop padding strategy.
	 */
	CryptoJS.pad.NoPadding = {
	    pad: function () {
	    },

	    unpad: function () {
	    }
	};


	return CryptoJS.pad.NoPadding;

}));

/***/ }),

/***/ "./node_modules/crypto-js/sha1.js":
/*!****************************************!*\
  !*** ./node_modules/crypto-js/sha1.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

;(function (root, factory) {
	if (true) {
		// CommonJS
		module.exports = exports = factory(__webpack_require__(/*! ./core */ "./node_modules/crypto-js/core.js"));
	}
	else {}
}(this, function (CryptoJS) {

	(function () {
	    // Shortcuts
	    var C = CryptoJS;
	    var C_lib = C.lib;
	    var WordArray = C_lib.WordArray;
	    var Hasher = C_lib.Hasher;
	    var C_algo = C.algo;

	    // Reusable object
	    var W = [];

	    /**
	     * SHA-1 hash algorithm.
	     */
	    var SHA1 = C_algo.SHA1 = Hasher.extend({
	        _doReset: function () {
	            this._hash = new WordArray.init([
	                0x67452301, 0xefcdab89,
	                0x98badcfe, 0x10325476,
	                0xc3d2e1f0
	            ]);
	        },

	        _doProcessBlock: function (M, offset) {
	            // Shortcut
	            var H = this._hash.words;

	            // Working variables
	            var a = H[0];
	            var b = H[1];
	            var c = H[2];
	            var d = H[3];
	            var e = H[4];

	            // Computation
	            for (var i = 0; i < 80; i++) {
	                if (i < 16) {
	                    W[i] = M[offset + i] | 0;
	                } else {
	                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];
	                    W[i] = (n << 1) | (n >>> 31);
	                }

	                var t = ((a << 5) | (a >>> 27)) + e + W[i];
	                if (i < 20) {
	                    t += ((b & c) | (~b & d)) + 0x5a827999;
	                } else if (i < 40) {
	                    t += (b ^ c ^ d) + 0x6ed9eba1;
	                } else if (i < 60) {
	                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;
	                } else /* if (i < 80) */ {
	                    t += (b ^ c ^ d) - 0x359d3e2a;
	                }

	                e = d;
	                d = c;
	                c = (b << 30) | (b >>> 2);
	                b = a;
	                a = t;
	            }

	            // Intermediate hash value
	            H[0] = (H[0] + a) | 0;
	            H[1] = (H[1] + b) | 0;
	            H[2] = (H[2] + c) | 0;
	            H[3] = (H[3] + d) | 0;
	            H[4] = (H[4] + e) | 0;
	        },

	        _doFinalize: function () {
	            // Shortcuts
	            var data = this._data;
	            var dataWords = data.words;

	            var nBitsTotal = this._nDataBytes * 8;
	            var nBitsLeft = data.sigBytes * 8;

	            // Add padding
	            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);
	            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);
	            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;
	            data.sigBytes = dataWords.length * 4;

	            // Hash final blocks
	            this._process();

	            // Return final computed hash
	            return this._hash;
	        },

	        clone: function () {
	            var clone = Hasher.clone.call(this);
	            clone._hash = this._hash.clone();

	            return clone;
	        }
	    });

	    /**
	     * Shortcut function to the hasher's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     *
	     * @return {WordArray} The hash.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hash = CryptoJS.SHA1('message');
	     *     var hash = CryptoJS.SHA1(wordArray);
	     */
	    C.SHA1 = Hasher._createHelper(SHA1);

	    /**
	     * Shortcut function to the HMAC's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     * @param {WordArray|string} key The secret key.
	     *
	     * @return {WordArray} The HMAC.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hmac = CryptoJS.HmacSHA1(message, key);
	     */
	    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);
	}());


	return CryptoJS.SHA1;

}));

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./sdk/docsview/view/assets/index.css":
/*!**********************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./sdk/docsview/view/assets/index.css ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "[id^='zego-docsview-zoom'],\n[id^='zego-docsview-render'],\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-con'],\n[id^='zego-docsview-con'] > div {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n/* [id^='zego-docsview-con'], */\n[id^='zego-docsview-con'] > div,\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-iframe'] {\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-render'] {\n  text-align: initial;\n}\n\n[id^='zego-docsview-render'] iframe {\n  border: none;\n}\n[id^='zego-docsview-render'] canvas {\n  display: block;\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-zoom'] svg.loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -24px;\n  display: none;\n  animation: loading 2s infinite linear;\n  -webkit-animation: loading 2s infinite linear;\n  -moz-animation: loading 2s infinite linear;\n  -o-animation: loading 2s infinite linear;\n}\n@keyframes loading {\n  from {\n    transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes loading {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@-moz-keyframes loading {\n  from {\n    -moz-transform: rotate(0deg);\n  }\n  to {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-o-keyframes loading {\n  from {\n    -o-transform: rotate(0deg);\n  }\n  to {\n    -o-transform: rotate(360deg);\n  }\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./sdk/whiteboard/view/assets/index.css":
/*!************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./sdk/whiteboard/view/assets/index.css ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#zego-whiteboard-input {\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  padding: 0px;\n  border: none;\n}\n\n[id^='zego-whiteboard-zoom'] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  user-select:none;\n}\n\n[id^='zego-whiteboard-con'],\n[id^='zego-whiteboard-con'] > div {\n  transform-origin: 0 0;\n}\n\n[id^='zego-whiteboard'] {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  position: absolute;\n}\n[id^='zego-whiteboard'] *,\n[id^='zego-whiteboard'] ::after,\n[id^='zego-whiteboard'] ::before {\n  box-sizing: border-box !important;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bg-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: flex;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bgImage-container'] {\n  flex: 1;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n}\n\n[id^='zego-graphics-container'] [id^='zego-laser'] {\n  transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n  -moz-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Firefox 4 */\n  -webkit-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Safari 和 Chrome */\n  -o-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Opera */\n  -ms-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n  margin-left: -8px;\n  margin-top: -8px;\n}\n\n/* [id^='zego-graphics-container'] path.transition {\n    transition: transform 0.2s linear;\n    -moz-transition: transform 0.2s linear;\n    -webkit-transition: transform 0.2s linear;\n    -o-transition: transform 0.2s linear;\n    -ms-transition: transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] line.transition {\n    transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -moz-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -o-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -ms-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] rect.transition {\n    transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -moz-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -o-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -ms-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] ellipse.transition {\n    transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -moz-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -webkit-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -o-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -ms-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n} */\n\n[id^='zego-whiteboard'] [id^='zego-box-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n}\n[id^='zego-whiteboard'] svg {\n  transform-origin: 0px 0px 0px;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n}\n[id^='zego-whiteboard'] textarea {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  border: none;\n  outline: none;\n  background: transparent;\n  resize: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  padding: 0;\n  line-height: 1;\n  font-family: inherit;\n  font-size: inherit;\n  box-sizing: border-box;\n  color: inherit;\n  font-style: inherit;\n  font-weight: inherit;\n  white-space: pre-wrap;\n  word-break: break-all;\n  overflow: hidden;\n}\n[id^='zego-whiteboard'] pre {\n  display: block;\n  visibility: hidden;\n  margin: 0px 0px;\n  font-family: inherit;\n  font-size: inherit;\n  color: inherit;\n  font-style: inherit;\n  font-weight: inherit;\n  line-height: 1;\n  padding: 0;\n  overflow: hidden;\n}\n[id^='zego-graphics-box'] {\n  position: absolute;\n}\n[id^='zego-textarea'] {\n  position: absolute;\n  border: 1px dashed transparent;\n  overflow: hidden;\n}\n[id^='zego-other-container'] {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  cursor: none;\n  overflow: hidden;\n}\n[id^='zego-other-container'] div {\n  box-sizing: border-box;\n}\n[id^='zego-laser'] {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: rgba(255, 78, 51, 1);\n  border: 2px solid rgba(255, 144, 128, 1);\n  box-shadow: 0px 0px 8px 0px rgba(254, 94, 70, 0.7);\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n[id^='zego-cursor'] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  /* cursor: none; */\n}\n\n[id^='zego-cursor'] > img {\n  user-select: none;\n  -webkit-user-drag: none;\n  /* cursor: none; */\n}\n\n[id^='zego-box-container'] .img-editor-box,\n[id^='zego-box-container'] .graphics-box {\n  display: none;\n  position: absolute;\n  overflow: visible;\n  margin: 0;\n  padding: 0;\n  z-index: 2;\n  border: 2px solid #b0b3b8;\n  box-shadow: 0 0 1px 0 #ffffff, inset 0 0 1px 0 #ffffff;\n  transform-origin: 0px 0px 0px;\n  transition: border 0.3s;\n  -moz-transition: border 0.3s; /* Firefox 4 */\n  -webkit-transition: border 0.3s; /* Safari 和 Chrome */\n  -o-transition: border 0.3s; /* Opera */\n}\n\n[id^='zego-box-container'] .operation-point-desktop {\n  width: 12px;\n  height: 12px;\n  position: absolute;\n  background-color: #ffffff;\n  border: 2px solid #b0b3b8;\n}\n[id^='zego-box-container'] .operation-point-desktop:active,\n[id^='zego-box-container'] .operation-point-desktop:hover {\n  transform: scale(1.5);\n  border: 2px solid #eb98c7;\n}\n\n[id^='zego-box-container'] .operation-point-desktop.left-top {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-top {\n  right: -6px;\n  top: -6px;\n  cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left-bottom {\n  left: -6px;\n  bottom: -6px;\n  cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-bottom {\n  right: -6px;\n  bottom: -6px;\n  cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.top {\n  top: -6px;\n  cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right {\n  right: -6px;\n  cursor: ew-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.bottom {\n  bottom: -6px;\n  cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left {\n  left: -6px;\n  cursor: ew-resize;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "./node_modules/js-base64/base64.js":
/*!******************************************!*\
  !*** ./node_modules/js-base64/base64.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
 *  base64.js
 *
 *  Licensed under the BSD 3-Clause License.
 *    http://opensource.org/licenses/BSD-3-Clause
 *
 *  References:
 *    http://en.wikipedia.org/wiki/Base64
 */
;(function (global, factory) {
     true
        ? module.exports = factory(global)
        : undefined
}((
    typeof self !== 'undefined' ? self
        : typeof window !== 'undefined' ? window
        : typeof global !== 'undefined' ? global
: this
), function(global) {
    'use strict';
    // existing version for noConflict()
    global = global || {};
    var _Base64 = global.Base64;
    var version = "2.6.4";
    // constants
    var b64chars
        = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
    var b64tab = function(bin) {
        var t = {};
        for (var i = 0, l = bin.length; i < l; i++) t[bin.charAt(i)] = i;
        return t;
    }(b64chars);
    var fromCharCode = String.fromCharCode;
    // encoder stuff
    var cb_utob = function(c) {
        if (c.length < 2) {
            var cc = c.charCodeAt(0);
            return cc < 0x80 ? c
                : cc < 0x800 ? (fromCharCode(0xc0 | (cc >>> 6))
                                + fromCharCode(0x80 | (cc & 0x3f)))
                : (fromCharCode(0xe0 | ((cc >>> 12) & 0x0f))
                    + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))
                    + fromCharCode(0x80 | ( cc         & 0x3f)));
        } else {
            var cc = 0x10000
                + (c.charCodeAt(0) - 0xD800) * 0x400
                + (c.charCodeAt(1) - 0xDC00);
            return (fromCharCode(0xf0 | ((cc >>> 18) & 0x07))
                    + fromCharCode(0x80 | ((cc >>> 12) & 0x3f))
                    + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))
                    + fromCharCode(0x80 | ( cc         & 0x3f)));
        }
    };
    var re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;
    var utob = function(u) {
        return u.replace(re_utob, cb_utob);
    };
    var cb_encode = function(ccc) {
        var padlen = [0, 2, 1][ccc.length % 3],
        ord = ccc.charCodeAt(0) << 16
            | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)
            | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0)),
        chars = [
            b64chars.charAt( ord >>> 18),
            b64chars.charAt((ord >>> 12) & 63),
            padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),
            padlen >= 1 ? '=' : b64chars.charAt(ord & 63)
        ];
        return chars.join('');
    };
    var btoa = global.btoa && typeof global.btoa == 'function'
        ? function(b){ return global.btoa(b) } : function(b) {
        if (b.match(/[^\x00-\xFF]/)) throw new RangeError(
            'The string contains invalid characters.'
        );
        return b.replace(/[\s\S]{1,3}/g, cb_encode);
    };
    var _encode = function(u) {
        return btoa(utob(String(u)));
    };
    var mkUriSafe = function (b64) {
        return b64.replace(/[+\/]/g, function(m0) {
            return m0 == '+' ? '-' : '_';
        }).replace(/=/g, '');
    };
    var encode = function(u, urisafe) {
        return urisafe ? mkUriSafe(_encode(u)) : _encode(u);
    };
    var encodeURI = function(u) { return encode(u, true) };
    var fromUint8Array;
    if (global.Uint8Array) fromUint8Array = function(a, urisafe) {
        // return btoa(fromCharCode.apply(null, a));
        var b64 = '';
        for (var i = 0, l = a.length; i < l; i += 3) {
            var a0 = a[i], a1 = a[i+1], a2 = a[i+2];
            var ord = a0 << 16 | a1 << 8 | a2;
            b64 +=    b64chars.charAt( ord >>> 18)
                +     b64chars.charAt((ord >>> 12) & 63)
                + ( typeof a1 != 'undefined'
                    ? b64chars.charAt((ord >>>  6) & 63) : '=')
                + ( typeof a2 != 'undefined'
                    ? b64chars.charAt( ord         & 63) : '=');
        }
        return urisafe ? mkUriSafe(b64) : b64;
    };
    // decoder stuff
    var re_btou = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;
    var cb_btou = function(cccc) {
        switch(cccc.length) {
        case 4:
            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)
                |    ((0x3f & cccc.charCodeAt(1)) << 12)
                |    ((0x3f & cccc.charCodeAt(2)) <<  6)
                |     (0x3f & cccc.charCodeAt(3)),
            offset = cp - 0x10000;
            return (fromCharCode((offset  >>> 10) + 0xD800)
                    + fromCharCode((offset & 0x3FF) + 0xDC00));
        case 3:
            return fromCharCode(
                ((0x0f & cccc.charCodeAt(0)) << 12)
                    | ((0x3f & cccc.charCodeAt(1)) << 6)
                    |  (0x3f & cccc.charCodeAt(2))
            );
        default:
            return  fromCharCode(
                ((0x1f & cccc.charCodeAt(0)) << 6)
                    |  (0x3f & cccc.charCodeAt(1))
            );
        }
    };
    var btou = function(b) {
        return b.replace(re_btou, cb_btou);
    };
    var cb_decode = function(cccc) {
        var len = cccc.length,
        padlen = len % 4,
        n = (len > 0 ? b64tab[cccc.charAt(0)] << 18 : 0)
            | (len > 1 ? b64tab[cccc.charAt(1)] << 12 : 0)
            | (len > 2 ? b64tab[cccc.charAt(2)] <<  6 : 0)
            | (len > 3 ? b64tab[cccc.charAt(3)]       : 0),
        chars = [
            fromCharCode( n >>> 16),
            fromCharCode((n >>>  8) & 0xff),
            fromCharCode( n         & 0xff)
        ];
        chars.length -= [0, 0, 2, 1][padlen];
        return chars.join('');
    };
    var _atob = global.atob && typeof global.atob == 'function'
        ? function(a){ return global.atob(a) } : function(a){
        return a.replace(/\S{1,4}/g, cb_decode);
    };
    var atob = function(a) {
        return _atob(String(a).replace(/[^A-Za-z0-9\+\/]/g, ''));
    };
    var _decode = function(a) { return btou(_atob(a)) };
    var _fromURI = function(a) {
        return String(a).replace(/[-_]/g, function(m0) {
            return m0 == '-' ? '+' : '/'
        }).replace(/[^A-Za-z0-9\+\/]/g, '');
    };
    var decode = function(a){
        return _decode(_fromURI(a));
    };
    var toUint8Array;
    if (global.Uint8Array) toUint8Array = function(a) {
        return Uint8Array.from(atob(_fromURI(a)), function(c) {
            return c.charCodeAt(0);
        });
    };
    var noConflict = function() {
        var Base64 = global.Base64;
        global.Base64 = _Base64;
        return Base64;
    };
    // export Base64
    global.Base64 = {
        VERSION: version,
        atob: atob,
        btoa: btoa,
        fromBase64: decode,
        toBase64: encode,
        utob: utob,
        encode: encode,
        encodeURI: encodeURI,
        btou: btou,
        decode: decode,
        noConflict: noConflict,
        fromUint8Array: fromUint8Array,
        toUint8Array: toUint8Array
    };
    // if ES5 is available, make Base64.extendString() available
    if (typeof Object.defineProperty === 'function') {
        var noEnum = function(v){
            return {value:v,enumerable:false,writable:true,configurable:true};
        };
        global.Base64.extendString = function () {
            Object.defineProperty(
                String.prototype, 'fromBase64', noEnum(function () {
                    return decode(this)
                }));
            Object.defineProperty(
                String.prototype, 'toBase64', noEnum(function (urisafe) {
                    return encode(this, urisafe)
                }));
            Object.defineProperty(
                String.prototype, 'toBase64URI', noEnum(function () {
                    return encode(this, true)
                }));
        };
    }
    //
    // export Base64 to the namespace
    //
    if (global['Meteor']) { // Meteor.js
        Base64 = global.Base64;
    }
    // module.exports and AMD are mutually exclusive.
    // module.exports has precedence.
    if ( true && module.exports) {
        module.exports.Base64 = global.Base64;
    }
    else if (true) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){ return global.Base64 }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    }
    // that's it!
    return {Base64: global.Base64}
}));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/jszip/dist/jszip.min.js":
/*!**********************************************!*\
  !*** ./node_modules/jszip/dist/jszip.min.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, Buffer, setImmediate) {var require;var require;/*!

JSZip v3.6.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/

!function(e){if(true)module.exports=e();else {}}(function(){return function s(a,o,u){function h(r,e){if(!o[r]){if(!a[r]){var t="function"==typeof require&&require;if(!e&&t)return require(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[r]={exports:{}};a[r][0].call(i.exports,function(e){var t=a[r][1][e];return h(t||e)},i,i.exports,s,a,o,u)}return o[r].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(l,t,n){(function(r){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(a,o,u){function h(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof l&&l;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return h(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var f="function"==typeof l&&l,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(l,t,n){(function(r){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(a,o,u){function h(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof l&&l;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return h(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var f="function"==typeof l&&l,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(l,t,n){(function(r){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(a,o,u){function h(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof l&&l;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return h(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var f="function"==typeof l&&l,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(l,t,n){(function(r){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(a,o,u){function h(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof l&&l;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return h(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var f="function"==typeof l&&l,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(l,t,n){(function(r){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(a,o,u){function h(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof l&&l;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};a[t][0].call(i.exports,function(e){return h(a[t][1][e]||e)},i,i.exports,s,a,o,u)}return o[t].exports}for(var f="function"==typeof l&&l,e=0;e<u.length;e++)h(u[e]);return h}({1:[function(e,t,r){"use strict";var c=e("./utils"),l=e("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,i,s,a,o,u=[],h=0,f=e.length,l=f,d="string"!==c.getTypeOf(e);h<e.length;)l=f-h,n=d?(t=e[h++],r=h<f?e[h++]:0,h<f?e[h++]:0):(t=e.charCodeAt(h++),r=h<f?e.charCodeAt(h++):0,h<f?e.charCodeAt(h++):0),i=t>>2,s=(3&t)<<4|r>>4,a=1<l?(15&r)<<2|n>>6:64,o=2<l?63&n:64,u.push(p.charAt(i)+p.charAt(s)+p.charAt(a)+p.charAt(o));return u.join("")},r.decode=function(e){var t,r,n,i,s,a,o=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&f--,e.charAt(e.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=l.uint8array?new Uint8Array(0|f):new Array(0|f);o<e.length;)t=p.indexOf(e.charAt(o++))<<2|(i=p.indexOf(e.charAt(o++)))>>4,r=(15&i)<<4|(s=p.indexOf(e.charAt(o++)))>>2,n=(3&s)<<6|(a=p.indexOf(e.charAt(o++))),h[u++]=t,64!==s&&(h[u++]=r),64!==a&&(h[u++]=n);return h}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),a=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r){var n=a,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,r){var n=a,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^n[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),a=e("./stream/GenericWorker"),o=n?"uint8array":"array";function u(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(u,a),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,e.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function I(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,n,i,s){var a,o,u=e.file,h=e.compression,f=s!==B.utf8encode,l=O.transformTo("string",s(u.name)),d=O.transformTo("string",B.utf8encode(u.name)),c=u.comment,p=O.transformTo("string",s(c)),m=O.transformTo("string",B.utf8encode(c)),_=d.length!==u.name.length,g=m.length!==c.length,v="",b="",w="",y=u.dir,k=u.date,x={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(x.crc32=e.crc32,x.compressedSize=e.compressedSize,x.uncompressedSize=e.uncompressedSize);var S=0;t&&(S|=8),f||!_&&!g||(S|=2048);var z,E=0,C=0;y&&(E|=16),"UNIX"===i?(C=798,E|=((z=u.unixPermissions)||(z=y?16893:33204),(65535&z)<<16)):(C=20,E|=63&(u.dosPermissions||0)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v+="up"+I((b=I(1,1)+I(T(l),4)+d).length,2)+b),g&&(v+="uc"+I((w=I(1,1)+I(T(p),4)+m).length,2)+w);var A="";return A+="\n\0",A+=I(S,2),A+=h.magic,A+=I(a,2),A+=I(o,2),A+=I(x.crc32,4),A+=I(x.compressedSize,4),A+=I(x.uncompressedSize,4),A+=I(l.length,2),A+=I(v.length,2),{fileRecord:R.LOCAL_FILE_HEADER+A+l+v,dirRecord:R.CENTRAL_FILE_HEADER+I(C,2)+A+I(p.length,2)+"\0\0\0\0"+I(E,4)+I(n,4)+l+v+p}}var O=e("../utils"),s=e("../stream/GenericWorker"),B=e("../utf8"),T=e("../crc32"),R=e("../signature");function n(e,t,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}O.inherits(n,s),n.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},n.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},n.prototype.closedSource=function(e){this.accumulate=!1;var t,r=this.streamFiles&&!e.file.dir,n=i(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),r)this.push({data:(t=e,R.DATA_DESCRIPTOR+I(t.crc32,4)+I(t.compressedSize,4)+I(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},n.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r,n,i,s,a,o,u=this.bytesWritten-e,h=(r=this.dirRecords.length,n=u,i=e,s=this.zipComment,a=this.encodeFileName,o=O.transformTo("string",a(s)),R.CENTRAL_DIRECTORY_END+"\0\0\0\0"+I(r,2)+I(r,2)+I(n,4)+I(i,4)+I(o.length,2)+o);this.push({data:h,meta:{percent:100}})},n.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},n.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},n.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},n.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},n.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=n},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var h=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,a,t){var o=new n(a.streamFiles,t,a.platform,a.encodeFileName),u=0;try{e.forEach(function(e,t){u++;var r=function(e,t){var r=e||t,n=h[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(t.options.compression,a.compression),n=t.options.compressionOptions||a.compressionOptions||{},i=t.dir,s=t.date;t._compressWorker(r,n).withStreamInfo("file",{name:e,dir:i,date:s,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=u}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.5.0",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),o=e("./utf8"),u=e("./zipEntries"),s=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function f(n){return new i.Promise(function(e,t){var r=n.decompressed.getContentWorker().pipe(new s);r.on("error",function(e){t(e)}).on("end",function(){r.streamInfo.crc32!==n.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}t.exports=function(e,s){var a=this;return s=n.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,s.optimizedBinaryString,s.base64).then(function(e){var t=new u(s);return t.load(e),t}).then(function(e){var t=[i.Promise.resolve(e)],r=e.files;if(s.checkCRC32)for(var n=0;n<r.length;n++)t.push(f(r[n]));return i.Promise.all(t)}).then(function(e){for(var t=e.shift(),r=t.files,n=0;n<r.length;n++){var i=r[n];a.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:s.createFolders})}return t.zipComment.length&&(a.comment=t.zipComment),a})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function s(e,t,r){var n,i=f.getTypeOf(t),s=f.extend(r||{},d);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=h(e)),s.createFolders&&(n=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""}(e))&&g.call(this,n,!0);var a,o="string"===i&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!o),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string"),a=t instanceof c||t instanceof l?t:m.isNode&&m.isStream(t)?new _(e,t):f.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var u=new p(e,a,s);this.files[e]=u}function h(e){return"/"!==e.slice(-1)&&(e+="/"),e}var i=e("./utf8"),f=e("./utils"),l=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),d=e("./defaults"),c=e("./compressedObject"),p=e("./zipObject"),o=e("./generate"),m=e("./nodejsUtils"),_=e("./nodejs/NodejsStreamInputAdapter"),g=function(e,t){return t=void 0!==t?t:d.createFolders,e=h(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function u(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var n={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(r){var n=[];return this.forEach(function(e,t){r(e,t)&&n.push(t)}),n},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,r),this;if(u(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(r){if(!r)return this;if(u(r))return this.filter(function(e,t){return t.dir&&r.test(e)});var e=this.root+r,t=g.call(this,e),n=this.clone();return n.root=t.name,n},remove:function(r){r=this.root+r;var e=this.files[r];if(e||("/"!==r.slice(-1)&&(r+="/"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(e,t){return t.name.slice(0,r.length)===r}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=f.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");f.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=o.generateWorker(this,r,n)}catch(e){(t=new l("error")).error(e)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=n},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),s=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new u(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var h=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),f=e("../base64"),n=e("../support"),a=e("../external"),o=null;if(n.nodestream)try{o=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,h.checkSupport(n),this._worker=e.pipe(new i(n)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return o=this,u=e,new a.Promise(function(t,r){var n=[],i=o._internalType,s=o._outputType,a=o._mimeType;o.on("data",function(e,t){n.push(e),u&&u(t)}).on("error",function(e){n=[],r(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return h.newBlob(h.transformTo("arraybuffer",t),r);case"base64":return f.encode(t);default:return h.transformTo(e,t)}}(s,function(e,t){var r,n=0,i=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,n),a);t(e)}catch(e){r(e)}n=[]}).resume()});var o,u},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){h.delay(t,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,s){"use strict";for(var o=e("./utils"),u=e("./support"),r=e("./nodejsUtils"),n=e("./stream/GenericWorker"),h=new Array(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function a(){n.call(this,"utf-8 decode"),this.leftOver=null}function f(){n.call(this,"utf-8 encode")}h[254]=h[254]=1,s.utf8encode=function(e){return u.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=u.uint8array?new Uint8Array(o):new Array(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},s.utf8decode=function(e){return u.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,n,i,s=e.length,a=new Array(2*s);for(t=r=0;t<s;)if((n=e[t++])<128)a[r++]=n;else if(4<(i=h[n]))a[r++]=65533,t+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&t<s;)n=n<<6|63&e[t++],i--;1<i?a[r++]=65533:n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(e=o.transformTo(u.uint8array?"uint8array":"array",e))},o.inherits(a,n),a.prototype.processChunk=function(e){var t=o.transformTo(u.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var n=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+h[e[r]]>t?r:t}(t),i=t;n!==t.length&&(u.uint8array?(i=t.subarray(0,n),this.leftOver=t.subarray(n,t.length)):(i=t.slice(0,n),this.leftOver=t.slice(n,t.length))),this.push({data:s.utf8decode(i),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(f,n),f.prototype.processChunk=function(e){this.push({data:s.utf8encode(e.data),meta:e.meta})},s.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,o){"use strict";var u=e("./support"),h=e("./base64"),r=e("./nodejsUtils"),n=e("set-immediate-shim"),f=e("./external");function i(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}o.newBlob=function(t,r){o.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var s={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function a(e){var t=65536,r=o.getTypeOf(e),n=!0;if("uint8array"===r?n=s.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=s.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return s.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return s.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}o.applyFromCharCode=a;var c={};c.string={string:i,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},c.array={string:a,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},c.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},c.uint8array={string:a,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return r.newBufferFrom(e)}},c.nodebuffer={string:a,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:i},o.transformTo=function(e,t){if(t=t||"",!e)return t;o.checkSupport(e);var r=o.getTypeOf(t);return c[r][e](t)},o.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":u.nodebuffer&&r.isBuffer(e)?"nodebuffer":u.uint8array&&e instanceof Uint8Array?"uint8array":u.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(e){if(!u[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},o.delay=function(e,t,r){n(function(){e.apply(r||null,t||[])})},o.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},o.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},o.prepareContent=function(n,e,i,s,a){return f.Promise.resolve(e).then(function(n){return u.blob&&(n instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n)))&&"undefined"!=typeof FileReader?new f.Promise(function(t,r){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){r(e.target.error)},e.readAsArrayBuffer(n)}):n}).then(function(e){var t,r=o.getTypeOf(e);return r?("arraybuffer"===r?e=o.transformTo("uint8array",e):"string"===r&&(a?e=h.decode(e):i&&!0!==s&&(e=l(t=e,u.uint8array?new Uint8Array(t.length):new Array(t.length)))),e):f.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),a=e("./zipEntry"),o=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),s=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),u=e("./compressions"),h=e("./support");function f(e,t){this.options=e,this.loadOptions=t}f.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new s(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<h.length;l++)n.prototype[h[l]]=f;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,f,t){(function(t){"use strict";var r,n,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,s=new e(h),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){h(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(h,0)};else{var o=new t.MessageChannel;o.port1.onmessage=h,r=function(){o.port2.postMessage(0)}}var u=[];function h(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}f.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var i=e("immediate");function h(){}var f={},s=["REJECTED"],a=["FULFILLED"],n=["PENDING"];function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,e!==h&&c(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(t,r,n){i(function(){var e;try{e=r(n)}catch(e){return f.reject(t,e)}e===t?f.reject(t,new TypeError("Cannot resolve promise with itself")):f.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(t,e){var r=!1;function n(e){r||(r=!0,f.reject(t,e))}function i(e){r||(r=!0,f.resolve(t,e))}var s=p(function(){e(i,n)});"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=o).prototype.finally=function(t){if("function"!=typeof t)return this;var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})},o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(h);return this.state!==n?l(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){f.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},f.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return f.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},f.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},o.resolve=function(e){return e instanceof this?e:f.resolve(new this(h),e)},o.reject=function(e){var t=new this(h);return f.reject(t,e)},o.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,t=-1,o=new this(h);++t<n;)u(e[t],t);return o;function u(e,t){r.resolve(e).then(function(e){s[t]=e,++a!==n||i||(i=!0,f.resolve(o,s))},function(e){i||(i=!0,f.reject(o,e))})}},o.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,i=-1,s=new this(h);++i<t;)n=e[i],this.resolve(n).then(function(e){r||(r=!0,f.resolve(s,e))},function(e){r||(r=!0,f.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),i=e("./zlib/messages"),s=e("./zlib/zstream"),h=Object.prototype.toString,f=0,l=-1,d=0,c=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:l,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw new Error(i[r]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=a.deflateSetDictionary(this.strm,n))!==f)throw new Error(i[r]);this._dict_set=!0}}function n(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}p.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===h.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&r!==f)return this.onEnd(r),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f):2!==n||(this.onEnd(f),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=n,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var d=e("./zlib/inflate"),c=e("./utils/common"),p=e("./utils/strings"),m=e("./zlib/constants"),n=e("./zlib/messages"),i=e("./zlib/zstream"),s=e("./zlib/gzheader"),_=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,t.windowBits);if(r!==m.Z_OK)throw new Error(n[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(e,t){var r=new a(t);if(r.push(e,!0),r.err)throw r.msg||n[r.err];return r.result}a.prototype.push=function(e,t){var r,n,i,s,a,o,u=this.strm,h=this.options.chunkSize,f=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?m.Z_FINISH:m.Z_NO_FLUSH,"string"==typeof e?u.input=p.binstring2buf(e):"[object ArrayBuffer]"===_.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new c.Buf8(h),u.next_out=0,u.avail_out=h),(r=d.inflate(u,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&f&&(o="string"==typeof f?p.string2buf(f):"[object ArrayBuffer]"===_.call(f)?new Uint8Array(f):f,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===l&&(r=m.Z_OK,l=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);u.next_out&&(0!==u.avail_out&&r!==m.Z_STREAM_END&&(0!==u.avail_in||n!==m.Z_FINISH&&n!==m.Z_SYNC_FLUSH)||("string"===this.options.to?(i=p.utf8border(u.output,u.next_out),s=u.next_out-i,a=p.buf2string(u.output,i),u.next_out=s,u.avail_out=h-s,s&&c.arraySet(u.output,u.output,i,s,0),this.onData(a)):this.onData(c.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(l=!0)}while((0<u.avail_in||0===u.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(n=m.Z_FINISH),n===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):n!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(u.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===m.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},r.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,a;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s=e[t],a.set(s,i),i+=s.length;return a}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var u=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var h=new u.Buf8(256),n=0;n<256;n++)h[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function f(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}h[254]=h[254]=1,r.string2buf=function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new u.Buf8(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return f(e,e.length)},r.binstring2buf=function(e){for(var t=new u.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,s,a=t||e.length,o=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)o[n++]=i;else if(4<(s=h[i]))o[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&e[r++],s--;1<s?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return f(o,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+h[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){"use strict";var u,d=e("../utils/common"),h=e("./trees"),c=e("./adler32"),p=e("./crc32"),n=e("./messages"),f=0,l=0,m=-2,i=2,_=8,s=286,a=30,o=19,g=2*s+1,v=15,b=3,w=258,y=w+b+1,k=42,x=113;function S(e,t){return e.msg=n[t],t}function z(e){return(e<<1)-(4<e?9:0)}function E(e){for(var t=e.length;0<=--t;)e[t]=0}function C(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(d.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function A(e,t){h._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,C(e.strm)}function I(e,t){e.pending_buf[e.pending++]=t}function O(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-y?e.strstart-(e.w_size-y):0,h=e.window,f=e.w_mask,l=e.prev,d=e.strstart+w,c=h[s+a-1],p=h[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(h[(r=t)+a]===p&&h[r+a-1]===c&&h[r]===h[s]&&h[++r]===h[s+1]){s+=2,r++;do{}while(h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&s<d);if(n=w-(d-s),s=d-w,a<n){if(e.match_start=t,o<=(a=n))break;c=h[s+a-1],p=h[s+a]}}}while((t=l[t&f])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function T(e){var t,r,n,i,s,a,o,u,h,f,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-y)){for(d.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=r=e.hash_size;n=e.head[--t],e.head[t]=l<=n?n-l:0,--r;);for(t=r=l;n=e.prev[--t],e.prev[t]=l<=n?n-l:0,--r;);i+=l}if(0===e.strm.avail_in)break;if(a=e.strm,o=e.window,u=e.strstart+e.lookahead,f=void 0,(h=i)<(f=a.avail_in)&&(f=h),r=0===f?0:(a.avail_in-=f,d.arraySet(o,a.input,a.next_in,f,u),1===a.state.wrap?a.adler=c(a.adler,o,f,u):2===a.state.wrap&&(a.adler=p(a.adler,o,f,u)),a.next_in+=f,a.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=b)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+b-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<b)););}while(e.lookahead<y&&0!==e.strm.avail_in)}function R(e,t){for(var r,n;;){if(e.lookahead<y){if(T(e),e.lookahead<y&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-y&&(e.match_length=B(e,r)),e.match_length>=b)if(n=h._tr_tally(e,e.strstart-e.match_start,e.match_length-b),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=b){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=h._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(A(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<b-1?e.strstart:b-1,4===t?(A(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(A(e,!1),0===e.strm.avail_out)?1:2}function D(e,t){for(var r,n,i;;){if(e.lookahead<y){if(T(e),e.lookahead<y&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=b-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-y&&(e.match_length=B(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===b&&4096<e.strstart-e.match_start)&&(e.match_length=b-1)),e.prev_length>=b&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-b,n=h._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-b),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=b-1,e.strstart++,n&&(A(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=h._tr_tally(e,0,e.window[e.strstart-1]))&&A(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=h._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<b-1?e.strstart:b-1,4===t?(A(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(A(e,!1),0===e.strm.avail_out)?1:2}function F(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*g),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*o+1)),E(this.dyn_ltree),E(this.dyn_dtree),E(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(v+1),this.heap=new d.Buf16(2*s+1),E(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*s+1),E(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?k:x,e.adler=2===t.wrap?0:1,t.last_flush=f,h._tr_init(t),l):S(e,m)}function P(e){var t,r=U(e);return r===l&&((t=e.state).window_size=2*t.w_size,E(t.head),t.max_lazy_match=u[t.level].max_lazy,t.good_match=u[t.level].good_length,t.nice_match=u[t.level].nice_length,t.max_chain_length=u[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=b-1,t.match_available=0,t.ins_h=0),r}function L(e,t,r,n,i,s){if(!e)return m;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||9<i||r!==_||n<8||15<n||t<0||9<t||s<0||4<s)return S(e,m);8===n&&(n=9);var o=new N;return(e.state=o).strm=e,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+b-1)/b),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=r,P(e)}u=[new F(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(T(e),0===e.lookahead&&t===f)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,A(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-y&&(A(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(A(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(A(e,!1),e.strm.avail_out),1)}),new F(4,4,8,4,R),new F(4,5,16,8,R),new F(4,6,32,32,R),new F(4,4,16,16,D),new F(8,16,32,32,D),new F(8,16,128,128,D),new F(8,32,128,256,D),new F(32,128,258,1024,D),new F(32,258,258,4096,D)],r.deflateInit=function(e,t){return L(e,t,_,15,8,0)},r.deflateInit2=L,r.deflateReset=P,r.deflateResetKeep=U,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?m:(e.state.gzhead=t,l):m},r.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?S(e,m):m;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return S(e,0===e.avail_out?-5:m);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===k)if(2===n.wrap)e.adler=0,I(n,31),I(n,139),I(n,8),n.gzhead?(I(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),I(n,255&n.gzhead.time),I(n,n.gzhead.time>>8&255),I(n,n.gzhead.time>>16&255),I(n,n.gzhead.time>>24&255),I(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),I(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(I(n,255&n.gzhead.extra.length),I(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=p(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(I(n,0),I(n,0),I(n,0),I(n,0),I(n,0),I(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),I(n,3),n.status=x);else{var a=_+(n.w_bits-8<<4)<<8;a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=x,O(n,a),0!==n.strstart&&(O(n,e.adler>>>16),O(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),C(e),i=n.pending,n.pending!==n.pending_buf_size));)I(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),C(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,I(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),C(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,I(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&C(e),n.pending+2<=n.pending_buf_size&&(I(n,255&e.adler),I(n,e.adler>>8&255),e.adler=0,n.status=x)):n.status=x),0!==n.pending){if(C(e),0===e.avail_out)return n.last_flush=-1,l}else if(0===e.avail_in&&z(t)<=z(r)&&4!==t)return S(e,-5);if(666===n.status&&0!==e.avail_in)return S(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==f&&666!==n.status){var o=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(T(e),0===e.lookahead)){if(t===f)return 1;break}if(e.match_length=0,r=h._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(A(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(A(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(A(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=w){if(T(e),e.lookahead<=w&&t===f)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=b&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+w;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=w-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=b?(r=h._tr_tally(e,1,e.match_length-b),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=h._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(A(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(A(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(A(e,!1),0===e.strm.avail_out)?1:2}(n,t):u[n.level].func(n,t);if(3!==o&&4!==o||(n.status=666),1===o||3===o)return 0===e.avail_out&&(n.last_flush=-1),l;if(2===o&&(1===t?h._tr_align(n):5!==t&&(h._tr_stored_block(n,0,0,!1),3===t&&(E(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),C(e),0===e.avail_out))return n.last_flush=-1,l}return 4!==t?l:n.wrap<=0?1:(2===n.wrap?(I(n,255&e.adler),I(n,e.adler>>8&255),I(n,e.adler>>16&255),I(n,e.adler>>24&255),I(n,255&e.total_in),I(n,e.total_in>>8&255),I(n,e.total_in>>16&255),I(n,e.total_in>>24&255)):(O(n,e.adler>>>16),O(n,65535&e.adler)),C(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?l:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==k&&69!==t&&73!==t&&91!==t&&103!==t&&t!==x&&666!==t?S(e,m):(e.state=null,t===x?S(e,-3):l):m},r.deflateSetDictionary=function(e,t){var r,n,i,s,a,o,u,h,f=t.length;if(!e||!e.state)return m;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==k||r.lookahead)return m;for(1===s&&(e.adler=c(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(E(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new d.Buf8(r.w_size),d.arraySet(h,t,f-r.w_size,r.w_size,0),t=h,f=r.w_size),a=e.avail_in,o=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,T(r);r.lookahead>=b;){for(n=r.strstart,i=r.lookahead-(b-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+b-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=b-1,T(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=b-1,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=a,r.wrap=s,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,s,a,o,u,h,f,l,d,c,p,m,_,g,v,b,w,y,k,x,S,z,E;r=e.state,n=e.next_in,z=e.input,i=n+(e.avail_in-5),s=e.next_out,E=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),u=r.dmax,h=r.wsize,f=r.whave,l=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{p<15&&(c+=z[n++]<<p,p+=8,c+=z[n++]<<p,p+=8),b=m[c&g];t:for(;;){if(c>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))E[s++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(c&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}y=65535&b,(w&=15)&&(p<w&&(c+=z[n++]<<p,p+=8),y+=c&(1<<w)-1,c>>>=w,p-=w),p<15&&(c+=z[n++]<<p,p+=8,c+=z[n++]<<p,p+=8),b=_[c&v];r:for(;;){if(c>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=_[(65535&b)+(c&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(k=65535&b,p<(w&=15)&&(c+=z[n++]<<p,(p+=8)<w&&(c+=z[n++]<<p,p+=8)),u<(k+=c&(1<<w)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(c>>>=w,p-=w,(w=s-a)<k){if(f<(w=k-w)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=d,(x=0)===l){if(x+=h-w,w<y){for(y-=w;E[s++]=d[x++],--w;);x=s-k,S=E}}else if(l<w){if(x+=h+l-w,(w-=l)<y){for(y-=w;E[s++]=d[x++],--w;);if(x=0,l<y){for(y-=w=l;E[s++]=d[x++],--w;);x=s-k,S=E}}}else if(x+=l-w,w<y){for(y-=w;E[s++]=d[x++],--w;);x=s-k,S=E}for(;2<y;)E[s++]=S[x++],E[s++]=S[x++],E[s++]=S[x++],y-=3;y&&(E[s++]=S[x++],1<y&&(E[s++]=S[x++]))}else{for(x=s-k;E[s++]=E[x++],E[s++]=E[x++],E[s++]=E[x++],2<(y-=3););y&&(E[s++]=E[x++],1<y&&(E[s++]=E[x++]))}break}}break}}while(n<i&&s<o);n-=y=p>>3,c&=(1<<(p-=y<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(e,t,r){"use strict";var I=e("../utils/common"),O=e("./adler32"),B=e("./crc32"),T=e("./inffast"),R=e("./inftrees"),D=1,F=2,N=0,U=-2,P=1,n=852,i=592;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=P,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new I.Buf32(n),t.distcode=t.distdyn=new I.Buf32(i),t.sane=1,t.back=-1,N):U}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):U}function u(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?U:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):U}function h(e,t){var r,n;return e?(n=new s,(e.state=n).window=null,(r=u(e,t))!==N&&(e.state=null),r):U}var f,l,d=!0;function j(e){if(d){var t;for(f=new I.Buf32(512),l=new I.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(R(D,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;R(F,e.lens,0,32,l,0,e.work,{bits:5}),d=!1}e.lencode=f,e.lenbits=9,e.distcode=l,e.distbits=5}function Z(e,t,r,n){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),n>=s.wsize?(I.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n<(i=s.wsize-s.wnext)&&(i=n),I.arraySet(s.window,t,r-n,i,s.wnext),(n-=i)?(I.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}r.inflateReset=o,r.inflateReset2=u,r.inflateResetKeep=a,r.inflateInit=function(e){return h(e,15)},r.inflateInit2=h,r.inflate=function(e,t){var r,n,i,s,a,o,u,h,f,l,d,c,p,m,_,g,v,b,w,y,k,x,S,z,E=0,C=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return U;12===(r=e.state).mode&&(r.mode=13),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,h=r.hold,f=r.bits,l=o,d=u,x=N;e:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;f<16;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(2&r.wrap&&35615===h){C[r.check=0]=255&h,C[1]=h>>>8&255,r.check=B(r.check,C,2,0),f=h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",r.mode=30;break}if(f-=4,k=8+(15&(h>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=512&h?10:12,f=h=0;break;case 2:for(;f<16;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(r.flags=h,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(C[0]=255&h,C[1]=h>>>8&255,r.check=B(r.check,C,2,0)),f=h=0,r.mode=3;case 3:for(;f<32;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.head&&(r.head.time=h),512&r.flags&&(C[0]=255&h,C[1]=h>>>8&255,C[2]=h>>>16&255,C[3]=h>>>24&255,r.check=B(r.check,C,4,0)),f=h=0,r.mode=4;case 4:for(;f<16;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(C[0]=255&h,C[1]=h>>>8&255,r.check=B(r.check,C,2,0)),f=h=0,r.mode=5;case 5:if(1024&r.flags){for(;f<16;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(C[0]=255&h,C[1]=h>>>8&255,r.check=B(r.check,C,2,0)),f=h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,n,s,c,k)),512&r.flags&&(r.check=B(r.check,n,c,s)),o-=c,s+=c,r.length-=c),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(c=0;k=n[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,n,c,s)),o-=c,s+=c,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(c=0;k=n[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,n,c,s)),o-=c,s+=c,k)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;f<16;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}f=h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;f<32;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}e.adler=r.check=L(h),f=h=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=h,r.bits=f,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){h>>>=7&f,f-=7&f,r.mode=27;break}for(;f<3;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}switch(r.last=1&h,f-=1,3&(h>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==t)break;h>>>=2,f-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}h>>>=2,f-=2;break;case 14:for(h>>>=7&f,f-=7&f;f<32;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&h,f=h=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),u<c&&(c=u),0===c)break e;I.arraySet(i,n,s,c,a),o-=c,s+=c,u-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;f<14;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(r.nlen=257+(31&h),h>>>=5,f-=5,r.ndist=1+(31&h),h>>>=5,f-=5,r.ncode=4+(15&h),h>>>=4,f-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;f<3;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.lens[A[r.have++]]=7&h,h>>>=3,f-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=R(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(E=r.lencode[h&(1<<r.lenbits)-1])>>>16&255,v=65535&E,!((_=E>>>24)<=f);){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(v<16)h>>>=_,f-=_,r.lens[r.have++]=v;else{if(16===v){for(z=_+2;f<z;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(h>>>=_,f-=_,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&h),h>>>=2,f-=2}else if(17===v){for(z=_+3;f<z;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}f-=_,k=0,c=3+(7&(h>>>=_)),h>>>=3,f-=3}else{for(z=_+7;f<z;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}f-=_,k=0,c=11+(127&(h>>>=_)),h>>>=7,f-=7}if(r.have+c>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=R(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=R(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=u){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=h,r.bits=f,T(e,d),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,h=r.hold,f=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(E=r.lencode[h&(1<<r.lenbits)-1])>>>16&255,v=65535&E,!((_=E>>>24)<=f);){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(g&&0==(240&g)){for(b=_,w=g,y=v;g=(E=r.lencode[y+((h&(1<<b+w)-1)>>b)])>>>16&255,v=65535&E,!(b+(_=E>>>24)<=f);){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}h>>>=b,f-=b,r.back+=b}if(h>>>=_,f-=_,r.back+=_,r.length=v,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;f<z;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(E=r.distcode[h&(1<<r.distbits)-1])>>>16&255,v=65535&E,!((_=E>>>24)<=f);){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(0==(240&g)){for(b=_,w=g,y=v;g=(E=r.distcode[y+((h&(1<<b+w)-1)>>b)])>>>16&255,v=65535&E,!(b+(_=E>>>24)<=f);){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}h>>>=b,f-=b,r.back+=b}if(h>>>=_,f-=_,r.back+=_,64&g){e.msg="invalid distance code",r.mode=30;break}r.offset=v,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;f<z;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(c=d-u,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=i,p=a-r.offset,c=r.length;for(u<c&&(c=u),u-=c,r.length-=c;i[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[a++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;f<32;){if(0===o)break e;o--,h|=n[s++]<<f,f+=8}if(d-=u,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?B(r.check,i,d,a-d):O(r.check,i,d,a-d)),d=u,(r.flags?h:L(h))!==r.check){e.msg="incorrect data check",r.mode=30;break}f=h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;f<32;){if(0===o)break e;o--,h+=n[s++]<<f,f+=8}if(h!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}f=h=0}r.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;case 32:default:return U}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=h,r.bits=f,(r.wsize||d!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&Z(e,e.output,e.next_out,d-e.avail_out)?(r.mode=31,-4):(l-=e.avail_in,d-=e.avail_out,e.total_in+=l,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?B(r.check,i,d,e.next_out-d):O(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==l&&0===d||4===t)&&x===N&&(x=-5),x)},r.inflateEnd=function(e){if(!e||!e.state)return U;var t=e.state;return t.window&&(t.window=null),e.state=null,N},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?U:((r.head=t).done=!1,N):U},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,t,n,0)!==r.check?-3:Z(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var D=e("../utils/common"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,n,i,s,a,o){var u,h,f,l,d,c,p,m,_,g=o.bits,v=0,b=0,w=0,y=0,k=0,x=0,S=0,z=0,E=0,C=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),T=null,R=0;for(v=0;v<=15;v++)O[v]=0;for(b=0;b<n;b++)O[t[r+b]]++;for(k=g,y=15;1<=y&&0===O[y];y--);if(y<k&&(k=y),0===y)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(w=1;w<y&&0===O[w];w++);for(k<w&&(k=w),v=z=1;v<=15;v++)if(z<<=1,(z-=O[v])<0)return-1;if(0<z&&(0===e||1!==y))return-1;for(B[1]=0,v=1;v<15;v++)B[v+1]=B[v]+O[v];for(b=0;b<n;b++)0!==t[r+b]&&(a[B[t[r+b]]++]=b);if(c=0===e?(A=T=a,19):1===e?(A=F,I-=257,T=N,R-=257,256):(A=U,T=P,-1),v=w,d=s,S=b=C=0,f=-1,l=(E=1<<(x=k))-1,1===e&&852<E||2===e&&592<E)return 1;for(;;){for(p=v-S,_=a[b]<c?(m=0,a[b]):a[b]>c?(m=T[R+a[b]],A[I+a[b]]):(m=96,0),u=1<<v-S,w=h=1<<x;i[d+(C>>S)+(h-=u)]=p<<24|m<<16|_|0,0!==h;);for(u=1<<v-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,b++,0==--O[v]){if(v===y)break;v=t[r+a[b]]}if(k<v&&(C&l)!==f){for(0===S&&(S=k),d+=w,z=1<<(x=v-S);x+S<y&&!((z-=O[x+S])<=0);)x++,z<<=1;if(E+=1<<x,1===e&&852<E||2===e&&592<E)return 1;i[f=C&l]=k<<24|x<<16|d-s|0}}return 0!==C&&(i[d+C]=v-S<<24|64<<16|0),o.bits=k,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var o=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var _=15,i=16,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);n(l);var d=new Array(60);n(d);var c=new Array(512);n(c);var p=new Array(256);n(p);var m=new Array(29);n(m);var g,v,b,w=new Array(30);function y(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function s(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function k(e){return e<256?c[e]:c[256+(e>>>7)]}function x(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>i-r?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>i-e.bi_valid,e.bi_valid+=r-i):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function z(e,t,r){S(e,r[2*t],r[2*t+1])}function E(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function C(e,t,r){var n,i,s=new Array(_+1),a=0;for(n=1;n<=_;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=E(s[o]++,o))}}function A(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function I(e){8<e.bi_valid?x(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function B(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&O(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!O(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function T(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?z(e,i,t):(z(e,(s=p[i])+256+1,t),0!==(a=u[s])&&S(e,i-=m[s],a),z(e,s=k(--n),r),0!==(a=h[s])&&S(e,n-=w[s],a)),o<e.last_lit;);z(e,256,t)}function R(e,t){var r,n,i,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==s[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=h,r=e.heap_len>>1;1<=r;r--)B(e,s,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],B(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,B(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,a,o,u=t.dyn_tree,h=t.max_code,f=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=_;s++)e.bl_count[s]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)p<(s=u[2*u[2*(n=e.heap[r])+1]+1]+1)&&(s=p,m++),u[2*n+1]=s,h<n||(e.bl_count[s]++,a=0,c<=n&&(a=d[n-c]),o=u[2*n],e.opt_len+=o*(s+a),l&&(e.static_len+=o*(f[2*n+1]+a)));if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(n=e.bl_count[s];0!==n;)h<(i=e.heap[--r])||(u[2*i+1]!==s&&(e.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(e,t),C(s,h,e.bl_count)}function D(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,h=4;for(0===a&&(u=138,h=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<u&&i===a||(o<h?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=i,h=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function F(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,h=4;for(0===a&&(u=138,h=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<u&&i===a)){if(o<h)for(;z(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(z(e,i,e.bl_tree),o--),z(e,16,e.bl_tree),S(e,o-3,2)):o<=10?(z(e,17,e.bl_tree),S(e,o-3,3)):(z(e,18,e.bl_tree),S(e,o-11,7));s=i,h=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}n(w);var N=!1;function U(e,t,r,n){var i,s,a;S(e,0+(n?1:0),3),s=t,a=r,I(i=e),x(i,a),x(i,~a),o.arraySet(i.pending_buf,i.window,s,a,i.pending),i.pending+=a}r._tr_init=function(e){N||(function(){var e,t,r,n,i,s=new Array(_+1);for(n=r=0;n<28;n++)for(m[n]=r,e=0;e<1<<u[n];e++)p[r++]=n;for(p[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,e=0;e<1<<h[n];e++)c[i++]=n;for(i>>=7;n<30;n++)for(w[n]=i<<7,e=0;e<1<<h[n]-7;e++)c[256+i++]=n;for(t=0;t<=_;t++)s[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,s[8]++;for(;e<=255;)l[2*e+1]=9,e++,s[9]++;for(;e<=279;)l[2*e+1]=7,e++,s[7]++;for(;e<=287;)l[2*e+1]=8,e++,s[8]++;for(C(l,287,s),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=E(e,5);g=new y(l,u,257,286,_),v=new y(d,h,0,30,_),b=new y(new Array(0),a,0,19,7)}(),N=!0),e.l_desc=new s(e.dyn_ltree,g),e.d_desc=new s(e.dyn_dtree,v),e.bl_desc=new s(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,A(e)},r._tr_stored_block=U,r._tr_flush_block=function(e,t,r,n){var i,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),a=function(e){var t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?U(e,t,r,n):4===e.strategy||s===i?(S(e,2+(n?1:0),3),T(e,l,d)):(S(e,4+(n?1:0),3),function(e,t,r,n){var i;for(S(e,t-257,5),S(e,r-1,5),S(e,n-4,4),i=0;i<n;i++)S(e,e.bl_tree[2*f[i]+1],3);F(e,e.dyn_ltree,t-1),F(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),T(e,e.dyn_ltree,e.dyn_dtree)),A(e),n&&I(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(p[r]+256+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){var t;S(e,2,3),z(e,256,l),16===(t=e).bi_valid?(x(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)})}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../node-libs-browser/node_modules/buffer/index.js */ "./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer, __webpack_require__(/*! ./../../node-libs-browser/node_modules/timers-browserify/main.js */ "./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./node_modules/localforage/dist/localforage.js":
/*!******************************************************!*\
  !*** ./node_modules/localforage/dist/localforage.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
'use strict';
var Mutation = global.MutationObserver || global.WebKitMutationObserver;

var scheduleDrain;

{
  if (Mutation) {
    var called = 0;
    var observer = new Mutation(nextTick);
    var element = global.document.createTextNode('');
    observer.observe(element, {
      characterData: true
    });
    scheduleDrain = function () {
      element.data = (called = ++called % 2);
    };
  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {
    var channel = new global.MessageChannel();
    channel.port1.onmessage = nextTick;
    scheduleDrain = function () {
      channel.port2.postMessage(0);
    };
  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {
    scheduleDrain = function () {

      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
      var scriptEl = global.document.createElement('script');
      scriptEl.onreadystatechange = function () {
        nextTick();

        scriptEl.onreadystatechange = null;
        scriptEl.parentNode.removeChild(scriptEl);
        scriptEl = null;
      };
      global.document.documentElement.appendChild(scriptEl);
    };
  } else {
    scheduleDrain = function () {
      setTimeout(nextTick, 0);
    };
  }
}

var draining;
var queue = [];
//named nextTick for less confusing stack traces
function nextTick() {
  draining = true;
  var i, oldQueue;
  var len = queue.length;
  while (len) {
    oldQueue = queue;
    queue = [];
    i = -1;
    while (++i < len) {
      oldQueue[i]();
    }
    len = queue.length;
  }
  draining = false;
}

module.exports = immediate;
function immediate(task) {
  if (queue.push(task) === 1 && !draining) {
    scheduleDrain();
  }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
'use strict';
var immediate = _dereq_(1);

/* istanbul ignore next */
function INTERNAL() {}

var handlers = {};

var REJECTED = ['REJECTED'];
var FULFILLED = ['FULFILLED'];
var PENDING = ['PENDING'];

module.exports = Promise;

function Promise(resolver) {
  if (typeof resolver !== 'function') {
    throw new TypeError('resolver must be a function');
  }
  this.state = PENDING;
  this.queue = [];
  this.outcome = void 0;
  if (resolver !== INTERNAL) {
    safelyResolveThenable(this, resolver);
  }
}

Promise.prototype["catch"] = function (onRejected) {
  return this.then(null, onRejected);
};
Promise.prototype.then = function (onFulfilled, onRejected) {
  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||
    typeof onRejected !== 'function' && this.state === REJECTED) {
    return this;
  }
  var promise = new this.constructor(INTERNAL);
  if (this.state !== PENDING) {
    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
    unwrap(promise, resolver, this.outcome);
  } else {
    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
  }

  return promise;
};
function QueueItem(promise, onFulfilled, onRejected) {
  this.promise = promise;
  if (typeof onFulfilled === 'function') {
    this.onFulfilled = onFulfilled;
    this.callFulfilled = this.otherCallFulfilled;
  }
  if (typeof onRejected === 'function') {
    this.onRejected = onRejected;
    this.callRejected = this.otherCallRejected;
  }
}
QueueItem.prototype.callFulfilled = function (value) {
  handlers.resolve(this.promise, value);
};
QueueItem.prototype.otherCallFulfilled = function (value) {
  unwrap(this.promise, this.onFulfilled, value);
};
QueueItem.prototype.callRejected = function (value) {
  handlers.reject(this.promise, value);
};
QueueItem.prototype.otherCallRejected = function (value) {
  unwrap(this.promise, this.onRejected, value);
};

function unwrap(promise, func, value) {
  immediate(function () {
    var returnValue;
    try {
      returnValue = func(value);
    } catch (e) {
      return handlers.reject(promise, e);
    }
    if (returnValue === promise) {
      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));
    } else {
      handlers.resolve(promise, returnValue);
    }
  });
}

handlers.resolve = function (self, value) {
  var result = tryCatch(getThen, value);
  if (result.status === 'error') {
    return handlers.reject(self, result.value);
  }
  var thenable = result.value;

  if (thenable) {
    safelyResolveThenable(self, thenable);
  } else {
    self.state = FULFILLED;
    self.outcome = value;
    var i = -1;
    var len = self.queue.length;
    while (++i < len) {
      self.queue[i].callFulfilled(value);
    }
  }
  return self;
};
handlers.reject = function (self, error) {
  self.state = REJECTED;
  self.outcome = error;
  var i = -1;
  var len = self.queue.length;
  while (++i < len) {
    self.queue[i].callRejected(error);
  }
  return self;
};

function getThen(obj) {
  // Make sure we only access the accessor once as required by the spec
  var then = obj && obj.then;
  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {
    return function appyThen() {
      then.apply(obj, arguments);
    };
  }
}

function safelyResolveThenable(self, thenable) {
  // Either fulfill, reject or reject with error
  var called = false;
  function onError(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.reject(self, value);
  }

  function onSuccess(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.resolve(self, value);
  }

  function tryToUnwrap() {
    thenable(onSuccess, onError);
  }

  var result = tryCatch(tryToUnwrap);
  if (result.status === 'error') {
    onError(result.value);
  }
}

function tryCatch(func, value) {
  var out = {};
  try {
    out.value = func(value);
    out.status = 'success';
  } catch (e) {
    out.status = 'error';
    out.value = e;
  }
  return out;
}

Promise.resolve = resolve;
function resolve(value) {
  if (value instanceof this) {
    return value;
  }
  return handlers.resolve(new this(INTERNAL), value);
}

Promise.reject = reject;
function reject(reason) {
  var promise = new this(INTERNAL);
  return handlers.reject(promise, reason);
}

Promise.all = all;
function all(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var values = new Array(len);
  var resolved = 0;
  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    allResolver(iterable[i], i);
  }
  return promise;
  function allResolver(value, i) {
    self.resolve(value).then(resolveFromAll, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
    function resolveFromAll(outValue) {
      values[i] = outValue;
      if (++resolved === len && !called) {
        called = true;
        handlers.resolve(promise, values);
      }
    }
  }
}

Promise.race = race;
function race(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    resolver(iterable[i]);
  }
  return promise;
  function resolver(value) {
    self.resolve(value).then(function (response) {
      if (!called) {
        called = true;
        handlers.resolve(promise, response);
      }
    }, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
  }
}

},{"1":1}],3:[function(_dereq_,module,exports){
(function (global){
'use strict';
if (typeof global.Promise !== 'function') {
  global.Promise = _dereq_(2);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2}],4:[function(_dereq_,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getIDB() {
    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */
    try {
        if (typeof indexedDB !== 'undefined') {
            return indexedDB;
        }
        if (typeof webkitIndexedDB !== 'undefined') {
            return webkitIndexedDB;
        }
        if (typeof mozIndexedDB !== 'undefined') {
            return mozIndexedDB;
        }
        if (typeof OIndexedDB !== 'undefined') {
            return OIndexedDB;
        }
        if (typeof msIndexedDB !== 'undefined') {
            return msIndexedDB;
        }
    } catch (e) {
        return;
    }
}

var idb = getIDB();

function isIndexedDBValid() {
    try {
        // Initialize IndexedDB; fall back to vendor-prefixed versions
        // if needed.
        if (!idb || !idb.open) {
            return false;
        }
        // We mimic PouchDB here;
        //
        // We test for openDatabase because IE Mobile identifies itself
        // as Safari. Oh the lulz...
        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);

        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;

        // Safari <10.1 does not meet our requirements for IDB support
        // (see: https://github.com/pouchdb/pouchdb/issues/5572).
        // Safari 10.1 shipped with fetch, we can use that to detect it.
        // Note: this creates issues with `window.fetch` polyfills and
        // overrides; see:
        // https://github.com/localForage/localForage/issues/856
        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&
        // some outdated implementations of IDB that appear on Samsung
        // and HTC Android devices <4.4 are missing IDBKeyRange
        // See: https://github.com/mozilla/localForage/issues/128
        // See: https://github.com/mozilla/localForage/issues/272
        typeof IDBKeyRange !== 'undefined';
    } catch (e) {
        return false;
    }
}

// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
function createBlob(parts, properties) {
    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */
    parts = parts || [];
    properties = properties || {};
    try {
        return new Blob(parts, properties);
    } catch (e) {
        if (e.name !== 'TypeError') {
            throw e;
        }
        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;
        var builder = new Builder();
        for (var i = 0; i < parts.length; i += 1) {
            builder.append(parts[i]);
        }
        return builder.getBlob(properties.type);
    }
}

// This is CommonJS because lie is an external dependency, so Rollup
// can just ignore it.
if (typeof Promise === 'undefined') {
    // In the "nopromises" build this will just throw if you don't have
    // a global promise object, but it would throw anyway later.
    _dereq_(3);
}
var Promise$1 = Promise;

function executeCallback(promise, callback) {
    if (callback) {
        promise.then(function (result) {
            callback(null, result);
        }, function (error) {
            callback(error);
        });
    }
}

function executeTwoCallbacks(promise, callback, errorCallback) {
    if (typeof callback === 'function') {
        promise.then(callback);
    }

    if (typeof errorCallback === 'function') {
        promise["catch"](errorCallback);
    }
}

function normalizeKey(key) {
    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    return key;
}

function getCallback() {
    if (arguments.length && typeof arguments[arguments.length - 1] === 'function') {
        return arguments[arguments.length - 1];
    }
}

// Some code originally from async_storage.js in
// [Gaia](https://github.com/mozilla-b2g/gaia).

var DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';
var supportsBlobs = void 0;
var dbContexts = {};
var toString = Object.prototype.toString;

// Transaction Modes
var READ_ONLY = 'readonly';
var READ_WRITE = 'readwrite';

// Transform a binary string to an array buffer, because otherwise
// weird stuff happens when you try to work with the binary string directly.
// It is known.
// From http://stackoverflow.com/questions/14967647/ (continues on next line)
// encode-decode-image-with-base64-breaks-image (2013-04-21)
function _binStringToArrayBuffer(bin) {
    var length = bin.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    for (var i = 0; i < length; i++) {
        arr[i] = bin.charCodeAt(i);
    }
    return buf;
}

//
// Blobs are not supported in all versions of IndexedDB, notably
// Chrome <37 and Android <5. In those versions, storing a blob will throw.
//
// Various other blob bugs exist in Chrome v37-42 (inclusive).
// Detecting them is expensive and confusing to users, and Chrome 37-42
// is at very low usage worldwide, so we do a hacky userAgent check instead.
//
// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120
// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916
// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836
//
// Code borrowed from PouchDB. See:
// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js
//
function _checkBlobSupportWithoutCaching(idb) {
    return new Promise$1(function (resolve) {
        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);
        var blob = createBlob(['']);
        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');

        txn.onabort = function (e) {
            // If the transaction aborts now its due to not being able to
            // write to the database, likely due to the disk being full
            e.preventDefault();
            e.stopPropagation();
            resolve(false);
        };

        txn.oncomplete = function () {
            var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
            var matchedEdge = navigator.userAgent.match(/Edge\//);
            // MS Edge pretends to be Chrome 42:
            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx
            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
        };
    })["catch"](function () {
        return false; // error, so assume unsupported
    });
}

function _checkBlobSupport(idb) {
    if (typeof supportsBlobs === 'boolean') {
        return Promise$1.resolve(supportsBlobs);
    }
    return _checkBlobSupportWithoutCaching(idb).then(function (value) {
        supportsBlobs = value;
        return supportsBlobs;
    });
}

function _deferReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Create a deferred object representing the current database operation.
    var deferredOperation = {};

    deferredOperation.promise = new Promise$1(function (resolve, reject) {
        deferredOperation.resolve = resolve;
        deferredOperation.reject = reject;
    });

    // Enqueue the deferred operation.
    dbContext.deferredOperations.push(deferredOperation);

    // Chain its promise to the database readiness.
    if (!dbContext.dbReady) {
        dbContext.dbReady = deferredOperation.promise;
    } else {
        dbContext.dbReady = dbContext.dbReady.then(function () {
            return deferredOperation.promise;
        });
    }
}

function _advanceReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Resolve its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.resolve();
        return deferredOperation.promise;
    }
}

function _rejectReadiness(dbInfo, err) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Reject its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.reject(err);
        return deferredOperation.promise;
    }
}

function _getConnection(dbInfo, upgradeNeeded) {
    return new Promise$1(function (resolve, reject) {
        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();

        if (dbInfo.db) {
            if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
            } else {
                return resolve(dbInfo.db);
            }
        }

        var dbArgs = [dbInfo.name];

        if (upgradeNeeded) {
            dbArgs.push(dbInfo.version);
        }

        var openreq = idb.open.apply(idb, dbArgs);

        if (upgradeNeeded) {
            openreq.onupgradeneeded = function (e) {
                var db = openreq.result;
                try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e.oldVersion <= 1) {
                        // Added when support for blob shims was added
                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                } catch (ex) {
                    if (ex.name === 'ConstraintError') {
                        console.warn('The database "' + dbInfo.name + '"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                        throw ex;
                    }
                }
            };
        }

        openreq.onerror = function (e) {
            e.preventDefault();
            reject(openreq.error);
        };

        openreq.onsuccess = function () {
            resolve(openreq.result);
            _advanceReadiness(dbInfo);
        };
    });
}

function _getOriginalConnection(dbInfo) {
    return _getConnection(dbInfo, false);
}

function _getUpgradedConnection(dbInfo) {
    return _getConnection(dbInfo, true);
}

function _isUpgradeNeeded(dbInfo, defaultVersion) {
    if (!dbInfo.db) {
        return true;
    }

    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
    var isDowngrade = dbInfo.version < dbInfo.db.version;
    var isUpgrade = dbInfo.version > dbInfo.db.version;

    if (isDowngrade) {
        // If the version is not the default one
        // then warn for impossible downgrade.
        if (dbInfo.version !== defaultVersion) {
            console.warn('The database "' + dbInfo.name + '"' + " can't be downgraded from version " + dbInfo.db.version + ' to version ' + dbInfo.version + '.');
        }
        // Align the versions to prevent errors.
        dbInfo.version = dbInfo.db.version;
    }

    if (isUpgrade || isNewStore) {
        // If the store is new then increment the version (if needed).
        // This will trigger an "upgradeneeded" event which is required
        // for creating a store.
        if (isNewStore) {
            var incVersion = dbInfo.db.version + 1;
            if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
            }
        }

        return true;
    }

    return false;
}

// encode a blob for indexeddb engines that don't support blobs
function _encodeBlob(blob) {
    return new Promise$1(function (resolve, reject) {
        var reader = new FileReader();
        reader.onerror = reject;
        reader.onloadend = function (e) {
            var base64 = btoa(e.target.result || '');
            resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
            });
        };
        reader.readAsBinaryString(blob);
    });
}

// decode an encoded blob
function _decodeBlob(encodedBlob) {
    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
    return createBlob([arrayBuff], { type: encodedBlob.type });
}

// is this one of our fancy encoded blobs?
function _isEncodedBlob(value) {
    return value && value.__local_forage_encoded_blob;
}

// Specialize the default `ready()` function by making it dependent
// on the current database operations. Thus, the driver will be actually
// ready when it's been initialized (default) *and* there are no pending
// operations on the database (initiated by some other instances).
function _fullyReady(callback) {
    var self = this;

    var promise = self._initReady().then(function () {
        var dbContext = dbContexts[self._dbInfo.name];

        if (dbContext && dbContext.dbReady) {
            return dbContext.dbReady;
        }
    });

    executeTwoCallbacks(promise, callback, callback);
    return promise;
}

// Try to establish a new db connection to replace the
// current one which is broken (i.e. experiencing
// InvalidStateError while creating a transaction).
function _tryReconnect(dbInfo) {
    _deferReadiness(dbInfo);

    var dbContext = dbContexts[dbInfo.name];
    var forages = dbContext.forages;

    for (var i = 0; i < forages.length; i++) {
        var forage = forages[i];
        if (forage._dbInfo.db) {
            forage._dbInfo.db.close();
            forage._dbInfo.db = null;
        }
    }
    dbInfo.db = null;

    return _getOriginalConnection(dbInfo).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        // store the latest db reference
        // in case the db was upgraded
        dbInfo.db = dbContext.db = db;
        for (var i = 0; i < forages.length; i++) {
            forages[i]._dbInfo.db = db;
        }
    })["catch"](function (err) {
        _rejectReadiness(dbInfo, err);
        throw err;
    });
}

// FF doesn't like Promises (micro-tasks) and IDDB store operations,
// so we have to do it with callbacks
function createTransaction(dbInfo, mode, callback, retries) {
    if (retries === undefined) {
        retries = 1;
    }

    try {
        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);
        callback(null, tx);
    } catch (err) {
        if (retries > 0 && (!dbInfo.db || err.name === 'InvalidStateError' || err.name === 'NotFoundError')) {
            return Promise$1.resolve().then(function () {
                if (!dbInfo.db || err.name === 'NotFoundError' && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {
                    // increase the db version, to create the new ObjectStore
                    if (dbInfo.db) {
                        dbInfo.version = dbInfo.db.version + 1;
                    }
                    // Reopen the database for upgrading.
                    return _getUpgradedConnection(dbInfo);
                }
            }).then(function () {
                return _tryReconnect(dbInfo).then(function () {
                    createTransaction(dbInfo, mode, callback, retries - 1);
                });
            })["catch"](callback);
        }

        callback(err);
    }
}

function createDbContext() {
    return {
        // Running localForages sharing a database.
        forages: [],
        // Shared database.
        db: null,
        // Database readiness (promise).
        dbReady: null,
        // Deferred operations on the database.
        deferredOperations: []
    };
}

// Open the IndexedDB database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    // Get the current context of the database;
    var dbContext = dbContexts[dbInfo.name];

    // ...or create a new context.
    if (!dbContext) {
        dbContext = createDbContext();
        // Register the new context in the global container.
        dbContexts[dbInfo.name] = dbContext;
    }

    // Register itself as a running localForage in the current context.
    dbContext.forages.push(self);

    // Replace the default `ready()` function with the specialized one.
    if (!self._initReady) {
        self._initReady = self.ready;
        self.ready = _fullyReady;
    }

    // Create an array of initialization states of the related localForages.
    var initPromises = [];

    function ignoreErrors() {
        // Don't handle errors here,
        // just makes sure related localForages aren't pending.
        return Promise$1.resolve();
    }

    for (var j = 0; j < dbContext.forages.length; j++) {
        var forage = dbContext.forages[j];
        if (forage !== self) {
            // Don't wait for itself...
            initPromises.push(forage._initReady()["catch"](ignoreErrors));
        }
    }

    // Take a snapshot of the related localForages.
    var forages = dbContext.forages.slice(0);

    // Initialize the connection process only when
    // all the related localForages aren't pending.
    return Promise$1.all(initPromises).then(function () {
        dbInfo.db = dbContext.db;
        // Get the connection or open a new one without upgrade.
        return _getOriginalConnection(dbInfo);
    }).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        dbInfo.db = dbContext.db = db;
        self._dbInfo = dbInfo;
        // Share the final connection amongst related localForages.
        for (var k = 0; k < forages.length; k++) {
            var forage = forages[k];
            if (forage !== self) {
                // Self is already up-to-date.
                forage._dbInfo.db = dbInfo.db;
                forage._dbInfo.version = dbInfo.version;
            }
        }
    });
}

function getItem(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.get(key);

                    req.onsuccess = function () {
                        var value = req.result;
                        if (value === undefined) {
                            value = null;
                        }
                        if (_isEncodedBlob(value)) {
                            value = _decodeBlob(value);
                        }
                        resolve(value);
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items stored in database.
function iterate(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.openCursor();
                    var iterationNumber = 1;

                    req.onsuccess = function () {
                        var cursor = req.result;

                        if (cursor) {
                            var value = cursor.value;
                            if (_isEncodedBlob(value)) {
                                value = _decodeBlob(value);
                            }
                            var result = iterator(value, cursor.key, iterationNumber++);

                            // when the iterator callback returns any
                            // (non-`undefined`) value, then we stop
                            // the iteration immediately
                            if (result !== void 0) {
                                resolve(result);
                            } else {
                                cursor["continue"]();
                            }
                        } else {
                            resolve();
                        }
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);

    return promise;
}

function setItem(key, value, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        var dbInfo;
        self.ready().then(function () {
            dbInfo = self._dbInfo;
            if (toString.call(value) === '[object Blob]') {
                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {
                    if (blobSupport) {
                        return value;
                    }
                    return _encodeBlob(value);
                });
            }
            return value;
        }).then(function (value) {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);

                    // The reason we don't _save_ null is because IE 10 does
                    // not support saving the `null` type in IndexedDB. How
                    // ironic, given the bug below!
                    // See: https://github.com/mozilla/localForage/issues/161
                    if (value === null) {
                        value = undefined;
                    }

                    var req = store.put(value, key);

                    transaction.oncomplete = function () {
                        // Cast to undefined so the value passed to
                        // callback/promise is the same as what one would get out
                        // of `getItem()` later. This leads to some weirdness
                        // (setItem('foo', undefined) will return `null`), but
                        // it's not my fault localStorage is our baseline and that
                        // it's weird.
                        if (value === undefined) {
                            value = null;
                        }

                        resolve(value);
                    };
                    transaction.onabort = transaction.onerror = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function removeItem(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    // We use a Grunt task to make this safe for IE and some
                    // versions of Android (including those used by Cordova).
                    // Normally IE won't like `.delete()` and will insist on
                    // using `['delete']()`, but we have a build step that
                    // fixes this for us now.
                    var req = store["delete"](key);
                    transaction.oncomplete = function () {
                        resolve();
                    };

                    transaction.onerror = function () {
                        reject(req.error);
                    };

                    // The request will be also be aborted if we've exceeded our storage
                    // space.
                    transaction.onabort = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function clear(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.clear();

                    transaction.oncomplete = function () {
                        resolve();
                    };

                    transaction.onabort = transaction.onerror = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function length(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.count();

                    req.onsuccess = function () {
                        resolve(req.result);
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function key(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        if (n < 0) {
            resolve(null);

            return;
        }

        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var advanced = false;
                    var req = store.openKeyCursor();

                    req.onsuccess = function () {
                        var cursor = req.result;
                        if (!cursor) {
                            // this means there weren't enough keys
                            resolve(null);

                            return;
                        }

                        if (n === 0) {
                            // We have the first key, return it if that's what they
                            // wanted.
                            resolve(cursor.key);
                        } else {
                            if (!advanced) {
                                // Otherwise, ask the cursor to skip ahead n
                                // records.
                                advanced = true;
                                cursor.advance(n);
                            } else {
                                // When we get here, we've got the nth key.
                                resolve(cursor.key);
                            }
                        }
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.openKeyCursor();
                    var keys = [];

                    req.onsuccess = function () {
                        var cursor = req.result;

                        if (!cursor) {
                            resolve(keys);
                            return;
                        }

                        keys.push(cursor.key);
                        cursor["continue"]();
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function dropInstance(options, callback) {
    callback = getCallback.apply(this, arguments);

    var currentConfig = this.config();
    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        var isCurrentDb = options.name === currentConfig.name && self._dbInfo.db;

        var dbPromise = isCurrentDb ? Promise$1.resolve(self._dbInfo.db) : _getOriginalConnection(options).then(function (db) {
            var dbContext = dbContexts[options.name];
            var forages = dbContext.forages;
            dbContext.db = db;
            for (var i = 0; i < forages.length; i++) {
                forages[i]._dbInfo.db = db;
            }
            return db;
        });

        if (!options.storeName) {
            promise = dbPromise.then(function (db) {
                _deferReadiness(options);

                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;

                db.close();
                for (var i = 0; i < forages.length; i++) {
                    var forage = forages[i];
                    forage._dbInfo.db = null;
                }

                var dropDBPromise = new Promise$1(function (resolve, reject) {
                    var req = idb.deleteDatabase(options.name);

                    req.onerror = req.onblocked = function (err) {
                        var db = req.result;
                        if (db) {
                            db.close();
                        }
                        reject(err);
                    };

                    req.onsuccess = function () {
                        var db = req.result;
                        if (db) {
                            db.close();
                        }
                        resolve(db);
                    };
                });

                return dropDBPromise.then(function (db) {
                    dbContext.db = db;
                    for (var i = 0; i < forages.length; i++) {
                        var _forage = forages[i];
                        _advanceReadiness(_forage._dbInfo);
                    }
                })["catch"](function (err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function () {});
                    throw err;
                });
            });
        } else {
            promise = dbPromise.then(function (db) {
                if (!db.objectStoreNames.contains(options.storeName)) {
                    return;
                }

                var newVersion = db.version + 1;

                _deferReadiness(options);

                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;

                db.close();
                for (var i = 0; i < forages.length; i++) {
                    var forage = forages[i];
                    forage._dbInfo.db = null;
                    forage._dbInfo.version = newVersion;
                }

                var dropObjectPromise = new Promise$1(function (resolve, reject) {
                    var req = idb.open(options.name, newVersion);

                    req.onerror = function (err) {
                        var db = req.result;
                        db.close();
                        reject(err);
                    };

                    req.onupgradeneeded = function () {
                        var db = req.result;
                        db.deleteObjectStore(options.storeName);
                    };

                    req.onsuccess = function () {
                        var db = req.result;
                        db.close();
                        resolve(db);
                    };
                });

                return dropObjectPromise.then(function (db) {
                    dbContext.db = db;
                    for (var j = 0; j < forages.length; j++) {
                        var _forage2 = forages[j];
                        _forage2._dbInfo.db = db;
                        _advanceReadiness(_forage2._dbInfo);
                    }
                })["catch"](function (err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function () {});
                    throw err;
                });
            });
        }
    }

    executeCallback(promise, callback);
    return promise;
}

var asyncStorage = {
    _driver: 'asyncStorage',
    _initStorage: _initStorage,
    _support: isIndexedDBValid(),
    iterate: iterate,
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem,
    clear: clear,
    length: length,
    key: key,
    keys: keys,
    dropInstance: dropInstance
};

function isWebSQLValid() {
    return typeof openDatabase === 'function';
}

// Sadly, the best way to save binary data in WebSQL/localStorage is serializing
// it to Base64, so this is how we store it to prevent very strange errors with less
// verbose ways of binary <-> string data storage.
var BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

var BLOB_TYPE_PREFIX = '~~local_forage_type~';
var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;

var SERIALIZED_MARKER = '__lfsc__:';
var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;

// OMG the serializations!
var TYPE_ARRAYBUFFER = 'arbf';
var TYPE_BLOB = 'blob';
var TYPE_INT8ARRAY = 'si08';
var TYPE_UINT8ARRAY = 'ui08';
var TYPE_UINT8CLAMPEDARRAY = 'uic8';
var TYPE_INT16ARRAY = 'si16';
var TYPE_INT32ARRAY = 'si32';
var TYPE_UINT16ARRAY = 'ur16';
var TYPE_UINT32ARRAY = 'ui32';
var TYPE_FLOAT32ARRAY = 'fl32';
var TYPE_FLOAT64ARRAY = 'fl64';
var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;

var toString$1 = Object.prototype.toString;

function stringToBuffer(serializedString) {
    // Fill the string into a ArrayBuffer.
    var bufferLength = serializedString.length * 0.75;
    var len = serializedString.length;
    var i;
    var p = 0;
    var encoded1, encoded2, encoded3, encoded4;

    if (serializedString[serializedString.length - 1] === '=') {
        bufferLength--;
        if (serializedString[serializedString.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = new ArrayBuffer(bufferLength);
    var bytes = new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = BASE_CHARS.indexOf(serializedString[i]);
        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);

        /*jslint bitwise: true */
        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }
    return buffer;
}

// Converts a buffer to a string to store, serialized, in the backend
// storage library.
function bufferToString(buffer) {
    // base64-arraybuffer
    var bytes = new Uint8Array(buffer);
    var base64String = '';
    var i;

    for (i = 0; i < bytes.length; i += 3) {
        /*jslint bitwise: true */
        base64String += BASE_CHARS[bytes[i] >> 2];
        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
        base64String += BASE_CHARS[bytes[i + 2] & 63];
    }

    if (bytes.length % 3 === 2) {
        base64String = base64String.substring(0, base64String.length - 1) + '=';
    } else if (bytes.length % 3 === 1) {
        base64String = base64String.substring(0, base64String.length - 2) + '==';
    }

    return base64String;
}

// Serialize a value, afterwards executing a callback (which usually
// instructs the `setItem()` callback/promise to be executed). This is how
// we store binary data with localStorage.
function serialize(value, callback) {
    var valueType = '';
    if (value) {
        valueType = toString$1.call(value);
    }

    // Cannot use `value instanceof ArrayBuffer` or such here, as these
    // checks fail when running the tests using casper.js...
    //
    // TODO: See why those tests fail and use a better solution.
    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {
        // Convert binary arrays to a string and prefix the string with
        // a special marker.
        var buffer;
        var marker = SERIALIZED_MARKER;

        if (value instanceof ArrayBuffer) {
            buffer = value;
            marker += TYPE_ARRAYBUFFER;
        } else {
            buffer = value.buffer;

            if (valueType === '[object Int8Array]') {
                marker += TYPE_INT8ARRAY;
            } else if (valueType === '[object Uint8Array]') {
                marker += TYPE_UINT8ARRAY;
            } else if (valueType === '[object Uint8ClampedArray]') {
                marker += TYPE_UINT8CLAMPEDARRAY;
            } else if (valueType === '[object Int16Array]') {
                marker += TYPE_INT16ARRAY;
            } else if (valueType === '[object Uint16Array]') {
                marker += TYPE_UINT16ARRAY;
            } else if (valueType === '[object Int32Array]') {
                marker += TYPE_INT32ARRAY;
            } else if (valueType === '[object Uint32Array]') {
                marker += TYPE_UINT32ARRAY;
            } else if (valueType === '[object Float32Array]') {
                marker += TYPE_FLOAT32ARRAY;
            } else if (valueType === '[object Float64Array]') {
                marker += TYPE_FLOAT64ARRAY;
            } else {
                callback(new Error('Failed to get type for BinaryArray'));
            }
        }

        callback(marker + bufferToString(buffer));
    } else if (valueType === '[object Blob]') {
        // Conver the blob to a binaryArray and then to a string.
        var fileReader = new FileReader();

        fileReader.onload = function () {
            // Backwards-compatible prefix for the blob type.
            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);

            callback(SERIALIZED_MARKER + TYPE_BLOB + str);
        };

        fileReader.readAsArrayBuffer(value);
    } else {
        try {
            callback(JSON.stringify(value));
        } catch (e) {
            console.error("Couldn't convert value into a JSON string: ", value);

            callback(null, e);
        }
    }
}

// Deserialize data we've inserted into a value column/field. We place
// special markers into our strings to mark them as encoded; this isn't
// as nice as a meta field, but it's the only sane thing we can do whilst
// keeping localStorage support intact.
//
// Oftentimes this will just deserialize JSON content, but if we have a
// special marker (SERIALIZED_MARKER, defined above), we will extract
// some kind of arraybuffer/binary data/typed array out of the string.
function deserialize(value) {
    // If we haven't marked this string as being specially serialized (i.e.
    // something other than serialized JSON), we can just return it and be
    // done with it.
    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
        return JSON.parse(value);
    }

    // The following code deals with deserializing some kind of Blob or
    // TypedArray. First we separate out the type of data we're dealing
    // with from the data itself.
    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);

    var blobType;
    // Backwards-compatible blob type serialization strategy.
    // DBs created with older versions of localForage will simply not have the blob type.
    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
        blobType = matcher[1];
        serializedString = serializedString.substring(matcher[0].length);
    }
    var buffer = stringToBuffer(serializedString);

    // Return the right type based on the code/type set during
    // serialization.
    switch (type) {
        case TYPE_ARRAYBUFFER:
            return buffer;
        case TYPE_BLOB:
            return createBlob([buffer], { type: blobType });
        case TYPE_INT8ARRAY:
            return new Int8Array(buffer);
        case TYPE_UINT8ARRAY:
            return new Uint8Array(buffer);
        case TYPE_UINT8CLAMPEDARRAY:
            return new Uint8ClampedArray(buffer);
        case TYPE_INT16ARRAY:
            return new Int16Array(buffer);
        case TYPE_UINT16ARRAY:
            return new Uint16Array(buffer);
        case TYPE_INT32ARRAY:
            return new Int32Array(buffer);
        case TYPE_UINT32ARRAY:
            return new Uint32Array(buffer);
        case TYPE_FLOAT32ARRAY:
            return new Float32Array(buffer);
        case TYPE_FLOAT64ARRAY:
            return new Float64Array(buffer);
        default:
            throw new Error('Unkown type: ' + type);
    }
}

var localforageSerializer = {
    serialize: serialize,
    deserialize: deserialize,
    stringToBuffer: stringToBuffer,
    bufferToString: bufferToString
};

/*
 * Includes code from:
 *
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */

function createDbTable(t, dbInfo, callback, errorCallback) {
    t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' ' + '(id INTEGER PRIMARY KEY, key unique, value)', [], callback, errorCallback);
}

// Open the WebSQL database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage$1(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];
        }
    }

    var dbInfoPromise = new Promise$1(function (resolve, reject) {
        // Open the database; the openDatabase API will automatically
        // create it for us if it doesn't exist.
        try {
            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
        } catch (e) {
            return reject(e);
        }

        // Create our key/value table if it doesn't exist.
        dbInfo.db.transaction(function (t) {
            createDbTable(t, dbInfo, function () {
                self._dbInfo = dbInfo;
                resolve();
            }, function (t, error) {
                reject(error);
            });
        }, reject);
    });

    dbInfo.serializer = localforageSerializer;
    return dbInfoPromise;
}

function tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {
    t.executeSql(sqlStatement, args, callback, function (t, error) {
        if (error.code === error.SYNTAX_ERR) {
            t.executeSql('SELECT name FROM sqlite_master ' + "WHERE type='table' AND name = ?", [dbInfo.storeName], function (t, results) {
                if (!results.rows.length) {
                    // if the table is missing (was deleted)
                    // re-create it table and retry
                    createDbTable(t, dbInfo, function () {
                        t.executeSql(sqlStatement, args, callback, errorCallback);
                    }, errorCallback);
                } else {
                    errorCallback(t, error);
                }
            }, errorCallback);
        } else {
            errorCallback(t, error);
        }
    }, errorCallback);
}

function getItem$1(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;

                    // Check to see if this is serialized content we need to
                    // unpack.
                    if (result) {
                        result = dbInfo.serializer.deserialize(result);
                    }

                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function iterate$1(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;

            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {
                    var rows = results.rows;
                    var length = rows.length;

                    for (var i = 0; i < length; i++) {
                        var item = rows.item(i);
                        var result = item.value;

                        // Check to see if this is serialized content
                        // we need to unpack.
                        if (result) {
                            result = dbInfo.serializer.deserialize(result);
                        }

                        result = iterator(result, item.key, i + 1);

                        // void(0) prevents problems with redefinition
                        // of `undefined`.
                        if (result !== void 0) {
                            resolve(result);
                            return;
                        }
                    }

                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function _setItem(key, value, callback, retriesLeft) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            // The localStorage API doesn't return undefined values in an
            // "expected" way, so undefined is always cast to null in all
            // drivers. See: https://github.com/mozilla/localForage/pull/42
            if (value === undefined) {
                value = null;
            }

            // Save the original value to pass to the callback.
            var originalValue = value;

            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    dbInfo.db.transaction(function (t) {
                        tryExecuteSql(t, dbInfo, 'INSERT OR REPLACE INTO ' + dbInfo.storeName + ' ' + '(key, value) VALUES (?, ?)', [key, value], function () {
                            resolve(originalValue);
                        }, function (t, error) {
                            reject(error);
                        });
                    }, function (sqlError) {
                        // The transaction failed; check
                        // to see if it's a quota error.
                        if (sqlError.code === sqlError.QUOTA_ERR) {
                            // We reject the callback outright for now, but
                            // it's worth trying to re-run the transaction.
                            // Even if the user accepts the prompt to use
                            // more storage on Safari, this error will
                            // be called.
                            //
                            // Try to re-run the transaction.
                            if (retriesLeft > 0) {
                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));
                                return;
                            }
                            reject(sqlError);
                        }
                    });
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function setItem$1(key, value, callback) {
    return _setItem.apply(this, [key, value, callback, 1]);
}

function removeItem$1(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Deletes every item in the table.
// TODO: Find out if this resets the AUTO_INCREMENT number.
function clear$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName, [], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Does a simple `COUNT(key)` to get the number of items stored in
// localForage.
function length$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                // Ahhh, SQL makes this one soooooo easy.
                tryExecuteSql(t, dbInfo, 'SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {
                    var result = results.rows.item(0).c;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Return the key located at key index X; essentially gets the key from a
// `WHERE id = ?`. This is the most efficient way I can think to implement
// this rarely-used (in my experience) part of the API, but it can seem
// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so
// the ID of each key will change every time it's updated. Perhaps a stored
// procedure for the `setItem()` SQL would solve this problem?
// TODO: Don't change ID on `setItem()`.
function key$1(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {
                    var keys = [];

                    for (var i = 0; i < results.rows.length; i++) {
                        keys.push(results.rows.item(i).key);
                    }

                    resolve(keys);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// https://www.w3.org/TR/webdatabase/#databases
// > There is no way to enumerate or delete the databases available for an origin from this API.
function getAllStoreNames(db) {
    return new Promise$1(function (resolve, reject) {
        db.transaction(function (t) {
            t.executeSql('SELECT name FROM sqlite_master ' + "WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function (t, results) {
                var storeNames = [];

                for (var i = 0; i < results.rows.length; i++) {
                    storeNames.push(results.rows.item(i).name);
                }

                resolve({
                    db: db,
                    storeNames: storeNames
                });
            }, function (t, error) {
                reject(error);
            });
        }, function (sqlError) {
            reject(sqlError);
        });
    });
}

function dropInstance$1(options, callback) {
    callback = getCallback.apply(this, arguments);

    var currentConfig = this.config();
    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        promise = new Promise$1(function (resolve) {
            var db;
            if (options.name === currentConfig.name) {
                // use the db reference of the current instance
                db = self._dbInfo.db;
            } else {
                db = openDatabase(options.name, '', '', 0);
            }

            if (!options.storeName) {
                // drop all database tables
                resolve(getAllStoreNames(db));
            } else {
                resolve({
                    db: db,
                    storeNames: [options.storeName]
                });
            }
        }).then(function (operationInfo) {
            return new Promise$1(function (resolve, reject) {
                operationInfo.db.transaction(function (t) {
                    function dropTable(storeName) {
                        return new Promise$1(function (resolve, reject) {
                            t.executeSql('DROP TABLE IF EXISTS ' + storeName, [], function () {
                                resolve();
                            }, function (t, error) {
                                reject(error);
                            });
                        });
                    }

                    var operations = [];
                    for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {
                        operations.push(dropTable(operationInfo.storeNames[i]));
                    }

                    Promise$1.all(operations).then(function () {
                        resolve();
                    })["catch"](function (e) {
                        reject(e);
                    });
                }, function (sqlError) {
                    reject(sqlError);
                });
            });
        });
    }

    executeCallback(promise, callback);
    return promise;
}

var webSQLStorage = {
    _driver: 'webSQLStorage',
    _initStorage: _initStorage$1,
    _support: isWebSQLValid(),
    iterate: iterate$1,
    getItem: getItem$1,
    setItem: setItem$1,
    removeItem: removeItem$1,
    clear: clear$1,
    length: length$1,
    key: key$1,
    keys: keys$1,
    dropInstance: dropInstance$1
};

function isLocalStorageValid() {
    try {
        return typeof localStorage !== 'undefined' && 'setItem' in localStorage &&
        // in IE8 typeof localStorage.setItem === 'object'
        !!localStorage.setItem;
    } catch (e) {
        return false;
    }
}

function _getKeyPrefix(options, defaultConfig) {
    var keyPrefix = options.name + '/';

    if (options.storeName !== defaultConfig.storeName) {
        keyPrefix += options.storeName + '/';
    }
    return keyPrefix;
}

// Check if localStorage throws when saving an item
function checkIfLocalStorageThrows() {
    var localStorageTestKey = '_localforage_support_test';

    try {
        localStorage.setItem(localStorageTestKey, true);
        localStorage.removeItem(localStorageTestKey);

        return false;
    } catch (e) {
        return true;
    }
}

// Check if localStorage is usable and allows to save an item
// This method checks if localStorage is usable in Safari Private Browsing
// mode, or in any other case where the available quota for localStorage
// is 0 and there wasn't any saved items yet.
function _isLocalStorageUsable() {
    return !checkIfLocalStorageThrows() || localStorage.length > 0;
}

// Config the localStorage backend, using options set in the config.
function _initStorage$2(options) {
    var self = this;
    var dbInfo = {};
    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);

    if (!_isLocalStorageUsable()) {
        return Promise$1.reject();
    }

    self._dbInfo = dbInfo;
    dbInfo.serializer = localforageSerializer;

    return Promise$1.resolve();
}

// Remove all keys from the datastore, effectively destroying all data in
// the app's key/value store!
function clear$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var keyPrefix = self._dbInfo.keyPrefix;

        for (var i = localStorage.length - 1; i >= 0; i--) {
            var key = localStorage.key(i);

            if (key.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key);
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Retrieve an item from the store. Unlike the original async_storage
// library in Gaia, we don't modify return values at all. If a key's value
// is `undefined`, we pass that value to the callback function.
function getItem$2(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result = localStorage.getItem(dbInfo.keyPrefix + key);

        // If a result was found, parse it from the serialized
        // string into a JS object. If result isn't truthy, the key
        // is likely undefined and we'll pass it straight to the
        // callback.
        if (result) {
            result = dbInfo.serializer.deserialize(result);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items in the store.
function iterate$2(iterator, callback) {
    var self = this;

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var keyPrefix = dbInfo.keyPrefix;
        var keyPrefixLength = keyPrefix.length;
        var length = localStorage.length;

        // We use a dedicated iterator instead of the `i` variable below
        // so other keys we fetch in localStorage aren't counted in
        // the `iterationNumber` argument passed to the `iterate()`
        // callback.
        //
        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530
        var iterationNumber = 1;

        for (var i = 0; i < length; i++) {
            var key = localStorage.key(i);
            if (key.indexOf(keyPrefix) !== 0) {
                continue;
            }
            var value = localStorage.getItem(key);

            // If a result was found, parse it from the serialized
            // string into a JS object. If result isn't truthy, the
            // key is likely undefined and we'll pass it straight
            // to the iterator.
            if (value) {
                value = dbInfo.serializer.deserialize(value);
            }

            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);

            if (value !== void 0) {
                return value;
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Same as localStorage's key() method, except takes a callback.
function key$2(n, callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result;
        try {
            result = localStorage.key(n);
        } catch (error) {
            result = null;
        }

        // Remove the prefix from the key, if a key is found.
        if (result) {
            result = result.substring(dbInfo.keyPrefix.length);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var length = localStorage.length;
        var keys = [];

        for (var i = 0; i < length; i++) {
            var itemKey = localStorage.key(i);
            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {
                keys.push(itemKey.substring(dbInfo.keyPrefix.length));
            }
        }

        return keys;
    });

    executeCallback(promise, callback);
    return promise;
}

// Supply the number of keys in the datastore to the callback function.
function length$2(callback) {
    var self = this;
    var promise = self.keys().then(function (keys) {
        return keys.length;
    });

    executeCallback(promise, callback);
    return promise;
}

// Remove an item from the store, nice and simple.
function removeItem$2(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        localStorage.removeItem(dbInfo.keyPrefix + key);
    });

    executeCallback(promise, callback);
    return promise;
}

// Set a key's value and run an optional callback once the value is set.
// Unlike Gaia's implementation, the callback function is passed the value,
// in case you want to operate on that value only after you're sure it
// saved, or something like that.
function setItem$2(key, value, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        // Convert undefined values to null.
        // https://github.com/mozilla/localForage/pull/42
        if (value === undefined) {
            value = null;
        }

        // Save the original value to pass to the callback.
        var originalValue = value;

        return new Promise$1(function (resolve, reject) {
            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    try {
                        localStorage.setItem(dbInfo.keyPrefix + key, value);
                        resolve(originalValue);
                    } catch (e) {
                        // localStorage capacity exceeded.
                        // TODO: Make this a specific error/event.
                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {
                            reject(e);
                        }
                        reject(e);
                    }
                }
            });
        });
    });

    executeCallback(promise, callback);
    return promise;
}

function dropInstance$2(options, callback) {
    callback = getCallback.apply(this, arguments);

    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        var currentConfig = this.config();
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        promise = new Promise$1(function (resolve) {
            if (!options.storeName) {
                resolve(options.name + '/');
            } else {
                resolve(_getKeyPrefix(options, self._defaultConfig));
            }
        }).then(function (keyPrefix) {
            for (var i = localStorage.length - 1; i >= 0; i--) {
                var key = localStorage.key(i);

                if (key.indexOf(keyPrefix) === 0) {
                    localStorage.removeItem(key);
                }
            }
        });
    }

    executeCallback(promise, callback);
    return promise;
}

var localStorageWrapper = {
    _driver: 'localStorageWrapper',
    _initStorage: _initStorage$2,
    _support: isLocalStorageValid(),
    iterate: iterate$2,
    getItem: getItem$2,
    setItem: setItem$2,
    removeItem: removeItem$2,
    clear: clear$2,
    length: length$2,
    key: key$2,
    keys: keys$2,
    dropInstance: dropInstance$2
};

var sameValue = function sameValue(x, y) {
    return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);
};

var includes = function includes(array, searchElement) {
    var len = array.length;
    var i = 0;
    while (i < len) {
        if (sameValue(array[i], searchElement)) {
            return true;
        }
        i++;
    }

    return false;
};

var isArray = Array.isArray || function (arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
};

// Drivers are stored here when `defineDriver()` is called.
// They are shared across all instances of localForage.
var DefinedDrivers = {};

var DriverSupport = {};

var DefaultDrivers = {
    INDEXEDDB: asyncStorage,
    WEBSQL: webSQLStorage,
    LOCALSTORAGE: localStorageWrapper
};

var DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];

var OptionalDriverMethods = ['dropInstance'];

var LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat(OptionalDriverMethods);

var DefaultConfig = {
    description: '',
    driver: DefaultDriverOrder.slice(),
    name: 'localforage',
    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
    // we can use without a prompt.
    size: 4980736,
    storeName: 'keyvaluepairs',
    version: 1.0
};

function callWhenReady(localForageInstance, libraryMethod) {
    localForageInstance[libraryMethod] = function () {
        var _args = arguments;
        return localForageInstance.ready().then(function () {
            return localForageInstance[libraryMethod].apply(localForageInstance, _args);
        });
    };
}

function extend() {
    for (var i = 1; i < arguments.length; i++) {
        var arg = arguments[i];

        if (arg) {
            for (var _key in arg) {
                if (arg.hasOwnProperty(_key)) {
                    if (isArray(arg[_key])) {
                        arguments[0][_key] = arg[_key].slice();
                    } else {
                        arguments[0][_key] = arg[_key];
                    }
                }
            }
        }
    }

    return arguments[0];
}

var LocalForage = function () {
    function LocalForage(options) {
        _classCallCheck(this, LocalForage);

        for (var driverTypeKey in DefaultDrivers) {
            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {
                var driver = DefaultDrivers[driverTypeKey];
                var driverName = driver._driver;
                this[driverTypeKey] = driverName;

                if (!DefinedDrivers[driverName]) {
                    // we don't need to wait for the promise,
                    // since the default drivers can be defined
                    // in a blocking manner
                    this.defineDriver(driver);
                }
            }
        }

        this._defaultConfig = extend({}, DefaultConfig);
        this._config = extend({}, this._defaultConfig, options);
        this._driverSet = null;
        this._initDriver = null;
        this._ready = false;
        this._dbInfo = null;

        this._wrapLibraryMethodsWithReady();
        this.setDriver(this._config.driver)["catch"](function () {});
    }

    // Set any config values for localForage; can be called anytime before
    // the first API call (e.g. `getItem`, `setItem`).
    // We loop through options so we don't overwrite existing config
    // values.


    LocalForage.prototype.config = function config(options) {
        // If the options argument is an object, we use it to set values.
        // Otherwise, we return either a specified config value or all
        // config values.
        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {
            // If localforage is ready and fully initialized, we can't set
            // any new configuration values. Instead, we return an error.
            if (this._ready) {
                return new Error("Can't call config() after localforage " + 'has been used.');
            }

            for (var i in options) {
                if (i === 'storeName') {
                    options[i] = options[i].replace(/\W/g, '_');
                }

                if (i === 'version' && typeof options[i] !== 'number') {
                    return new Error('Database version must be a number.');
                }

                this._config[i] = options[i];
            }

            // after all config options are set and
            // the driver option is used, try setting it
            if ('driver' in options && options.driver) {
                return this.setDriver(this._config.driver);
            }

            return true;
        } else if (typeof options === 'string') {
            return this._config[options];
        } else {
            return this._config;
        }
    };

    // Used to define a custom driver, shared across all instances of
    // localForage.


    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
        var promise = new Promise$1(function (resolve, reject) {
            try {
                var driverName = driverObject._driver;
                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');

                // A driver name should be defined and not overlap with the
                // library-defined, default drivers.
                if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                }

                var driverMethods = LibraryMethods.concat('_initStorage');
                for (var i = 0, len = driverMethods.length; i < len; i++) {
                    var driverMethodName = driverMethods[i];

                    // when the property is there,
                    // it should be a method even when optional
                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);
                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== 'function') {
                        reject(complianceError);
                        return;
                    }
                }

                var configureMissingMethods = function configureMissingMethods() {
                    var methodNotImplementedFactory = function methodNotImplementedFactory(methodName) {
                        return function () {
                            var error = new Error('Method ' + methodName + ' is not implemented by the current driver');
                            var promise = Promise$1.reject(error);
                            executeCallback(promise, arguments[arguments.length - 1]);
                            return promise;
                        };
                    };

                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {
                        var optionalDriverMethod = OptionalDriverMethods[_i];
                        if (!driverObject[optionalDriverMethod]) {
                            driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);
                        }
                    }
                };

                configureMissingMethods();

                var setDriverSupport = function setDriverSupport(support) {
                    if (DefinedDrivers[driverName]) {
                        console.info('Redefining LocalForage driver: ' + driverName);
                    }
                    DefinedDrivers[driverName] = driverObject;
                    DriverSupport[driverName] = support;
                    // don't use a then, so that we can define
                    // drivers that have simple _support methods
                    // in a blocking manner
                    resolve();
                };

                if ('_support' in driverObject) {
                    if (driverObject._support && typeof driverObject._support === 'function') {
                        driverObject._support().then(setDriverSupport, reject);
                    } else {
                        setDriverSupport(!!driverObject._support);
                    }
                } else {
                    setDriverSupport(true);
                }
            } catch (e) {
                reject(e);
            }
        });

        executeTwoCallbacks(promise, callback, errorCallback);
        return promise;
    };

    LocalForage.prototype.driver = function driver() {
        return this._driver || null;
    };

    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
        var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error('Driver not found.'));

        executeTwoCallbacks(getDriverPromise, callback, errorCallback);
        return getDriverPromise;
    };

    LocalForage.prototype.getSerializer = function getSerializer(callback) {
        var serializerPromise = Promise$1.resolve(localforageSerializer);
        executeTwoCallbacks(serializerPromise, callback);
        return serializerPromise;
    };

    LocalForage.prototype.ready = function ready(callback) {
        var self = this;

        var promise = self._driverSet.then(function () {
            if (self._ready === null) {
                self._ready = self._initDriver();
            }

            return self._ready;
        });

        executeTwoCallbacks(promise, callback, callback);
        return promise;
    };

    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
        var self = this;

        if (!isArray(drivers)) {
            drivers = [drivers];
        }

        var supportedDrivers = this._getSupportedDrivers(drivers);

        function setDriverToConfig() {
            self._config.driver = self.driver();
        }

        function extendSelfWithDriver(driver) {
            self._extend(driver);
            setDriverToConfig();

            self._ready = self._initStorage(self._config);
            return self._ready;
        }

        function initDriver(supportedDrivers) {
            return function () {
                var currentDriverIndex = 0;

                function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers.length) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        currentDriverIndex++;

                        self._dbInfo = null;
                        self._ready = null;

                        return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }

                    setDriverToConfig();
                    var error = new Error('No available storage method found.');
                    self._driverSet = Promise$1.reject(error);
                    return self._driverSet;
                }

                return driverPromiseLoop();
            };
        }

        // There might be a driver initialization in progress
        // so wait for it to finish in order to avoid a possible
        // race condition to set _dbInfo
        var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function () {
            return Promise$1.resolve();
        }) : Promise$1.resolve();

        this._driverSet = oldDriverSetDone.then(function () {
            var driverName = supportedDrivers[0];
            self._dbInfo = null;
            self._ready = null;

            return self.getDriver(driverName).then(function (driver) {
                self._driver = driver._driver;
                setDriverToConfig();
                self._wrapLibraryMethodsWithReady();
                self._initDriver = initDriver(supportedDrivers);
            });
        })["catch"](function () {
            setDriverToConfig();
            var error = new Error('No available storage method found.');
            self._driverSet = Promise$1.reject(error);
            return self._driverSet;
        });

        executeTwoCallbacks(this._driverSet, callback, errorCallback);
        return this._driverSet;
    };

    LocalForage.prototype.supports = function supports(driverName) {
        return !!DriverSupport[driverName];
    };

    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {
        extend(this, libraryMethodsAndProperties);
    };

    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
        var supportedDrivers = [];
        for (var i = 0, len = drivers.length; i < len; i++) {
            var driverName = drivers[i];
            if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
            }
        }
        return supportedDrivers;
    };

    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
        // Add a stub for each driver API method that delays the call to the
        // corresponding driver method until localForage is ready. These stubs
        // will be replaced by the driver methods as soon as the driver is
        // loaded, so there is no performance impact.
        for (var i = 0, len = LibraryMethods.length; i < len; i++) {
            callWhenReady(this, LibraryMethods[i]);
        }
    };

    LocalForage.prototype.createInstance = function createInstance(options) {
        return new LocalForage(options);
    };

    return LocalForage;
}();

// The actual localForage object that we expose as a module or via a
// global. It's extended by pulling in one of our other libraries.


var localforage_js = new LocalForage();

module.exports = localforage_js;

},{"3":3}]},{},[4])(4)
});

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/long/src/long.js":
/*!***************************************!*\
  !*** ./node_modules/long/src/long.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = Long;

/**
 * wasm optimizations, to do native i64 multiplication and divide
 */
var wasm = null;

try {
  wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([
    0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11
  ])), {}).exports;
} catch (e) {
  // no wasm support :(
}

/**
 * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.
 *  See the from* functions below for more convenient ways of constructing Longs.
 * @exports Long
 * @class A Long class for representing a 64 bit two's-complement integer value.
 * @param {number} low The low (signed) 32 bits of the long
 * @param {number} high The high (signed) 32 bits of the long
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @constructor
 */
function Long(low, high, unsigned) {

    /**
     * The low 32 bits as a signed value.
     * @type {number}
     */
    this.low = low | 0;

    /**
     * The high 32 bits as a signed value.
     * @type {number}
     */
    this.high = high | 0;

    /**
     * Whether unsigned or not.
     * @type {boolean}
     */
    this.unsigned = !!unsigned;
}

// The internal representation of a long is the two given signed, 32-bit values.
// We use 32-bit pieces because these are the size of integers on which
// Javascript performs bit-operations.  For operations like addition and
// multiplication, we split each number into 16 bit pieces, which can easily be
// multiplied within Javascript's floating-point representation without overflow
// or change in sign.
//
// In the algorithms below, we frequently reduce the negative case to the
// positive case by negating the input(s) and then post-processing the result.
// Note that we must ALWAYS check specially whether those values are MIN_VALUE
// (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as
// a positive number, it overflows back into a negative).  Not handling this
// case would often result in infinite recursion.
//
// Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*
// methods on which they depend.

/**
 * An indicator used to reliably determine if an object is a Long or not.
 * @type {boolean}
 * @const
 * @private
 */
Long.prototype.__isLong__;

Object.defineProperty(Long.prototype, "__isLong__", { value: true });

/**
 * @function
 * @param {*} obj Object
 * @returns {boolean}
 * @inner
 */
function isLong(obj) {
    return (obj && obj["__isLong__"]) === true;
}

/**
 * Tests if the specified object is a Long.
 * @function
 * @param {*} obj Object
 * @returns {boolean}
 */
Long.isLong = isLong;

/**
 * A cache of the Long representations of small integer values.
 * @type {!Object}
 * @inner
 */
var INT_CACHE = {};

/**
 * A cache of the Long representations of small unsigned integer values.
 * @type {!Object}
 * @inner
 */
var UINT_CACHE = {};

/**
 * @param {number} value
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */
function fromInt(value, unsigned) {
    var obj, cachedObj, cache;
    if (unsigned) {
        value >>>= 0;
        if (cache = (0 <= value && value < 256)) {
            cachedObj = UINT_CACHE[value];
            if (cachedObj)
                return cachedObj;
        }
        obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);
        if (cache)
            UINT_CACHE[value] = obj;
        return obj;
    } else {
        value |= 0;
        if (cache = (-128 <= value && value < 128)) {
            cachedObj = INT_CACHE[value];
            if (cachedObj)
                return cachedObj;
        }
        obj = fromBits(value, value < 0 ? -1 : 0, false);
        if (cache)
            INT_CACHE[value] = obj;
        return obj;
    }
}

/**
 * Returns a Long representing the given 32 bit integer value.
 * @function
 * @param {number} value The 32 bit integer in question
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
Long.fromInt = fromInt;

/**
 * @param {number} value
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */
function fromNumber(value, unsigned) {
    if (isNaN(value))
        return unsigned ? UZERO : ZERO;
    if (unsigned) {
        if (value < 0)
            return UZERO;
        if (value >= TWO_PWR_64_DBL)
            return MAX_UNSIGNED_VALUE;
    } else {
        if (value <= -TWO_PWR_63_DBL)
            return MIN_VALUE;
        if (value + 1 >= TWO_PWR_63_DBL)
            return MAX_VALUE;
    }
    if (value < 0)
        return fromNumber(-value, unsigned).neg();
    return fromBits((value % TWO_PWR_32_DBL) | 0, (value / TWO_PWR_32_DBL) | 0, unsigned);
}

/**
 * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.
 * @function
 * @param {number} value The number in question
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
Long.fromNumber = fromNumber;

/**
 * @param {number} lowBits
 * @param {number} highBits
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */
function fromBits(lowBits, highBits, unsigned) {
    return new Long(lowBits, highBits, unsigned);
}

/**
 * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is
 *  assumed to use 32 bits.
 * @function
 * @param {number} lowBits The low 32 bits
 * @param {number} highBits The high 32 bits
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
Long.fromBits = fromBits;

/**
 * @function
 * @param {number} base
 * @param {number} exponent
 * @returns {number}
 * @inner
 */
var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)

/**
 * @param {string} str
 * @param {(boolean|number)=} unsigned
 * @param {number=} radix
 * @returns {!Long}
 * @inner
 */
function fromString(str, unsigned, radix) {
    if (str.length === 0)
        throw Error('empty string');
    if (str === "NaN" || str === "Infinity" || str === "+Infinity" || str === "-Infinity")
        return ZERO;
    if (typeof unsigned === 'number') {
        // For goog.math.long compatibility
        radix = unsigned,
        unsigned = false;
    } else {
        unsigned = !! unsigned;
    }
    radix = radix || 10;
    if (radix < 2 || 36 < radix)
        throw RangeError('radix');

    var p;
    if ((p = str.indexOf('-')) > 0)
        throw Error('interior hyphen');
    else if (p === 0) {
        return fromString(str.substring(1), unsigned, radix).neg();
    }

    // Do several (8) digits each time through the loop, so as to
    // minimize the calls to the very expensive emulated div.
    var radixToPower = fromNumber(pow_dbl(radix, 8));

    var result = ZERO;
    for (var i = 0; i < str.length; i += 8) {
        var size = Math.min(8, str.length - i),
            value = parseInt(str.substring(i, i + size), radix);
        if (size < 8) {
            var power = fromNumber(pow_dbl(radix, size));
            result = result.mul(power).add(fromNumber(value));
        } else {
            result = result.mul(radixToPower);
            result = result.add(fromNumber(value));
        }
    }
    result.unsigned = unsigned;
    return result;
}

/**
 * Returns a Long representation of the given string, written using the specified radix.
 * @function
 * @param {string} str The textual representation of the Long
 * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed
 * @param {number=} radix The radix in which the text is written (2-36), defaults to 10
 * @returns {!Long} The corresponding Long value
 */
Long.fromString = fromString;

/**
 * @function
 * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */
function fromValue(val, unsigned) {
    if (typeof val === 'number')
        return fromNumber(val, unsigned);
    if (typeof val === 'string')
        return fromString(val, unsigned);
    // Throws for non-objects, converts non-instanceof Long:
    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);
}

/**
 * Converts the specified value to a Long using the appropriate from* function for its type.
 * @function
 * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long}
 */
Long.fromValue = fromValue;

// NOTE: the compiler should inline these constant values below and then remove these variables, so there should be
// no runtime penalty for these.

/**
 * @type {number}
 * @const
 * @inner
 */
var TWO_PWR_16_DBL = 1 << 16;

/**
 * @type {number}
 * @const
 * @inner
 */
var TWO_PWR_24_DBL = 1 << 24;

/**
 * @type {number}
 * @const
 * @inner
 */
var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;

/**
 * @type {number}
 * @const
 * @inner
 */
var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;

/**
 * @type {number}
 * @const
 * @inner
 */
var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;

/**
 * @type {!Long}
 * @const
 * @inner
 */
var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);

/**
 * @type {!Long}
 * @inner
 */
var ZERO = fromInt(0);

/**
 * Signed zero.
 * @type {!Long}
 */
Long.ZERO = ZERO;

/**
 * @type {!Long}
 * @inner
 */
var UZERO = fromInt(0, true);

/**
 * Unsigned zero.
 * @type {!Long}
 */
Long.UZERO = UZERO;

/**
 * @type {!Long}
 * @inner
 */
var ONE = fromInt(1);

/**
 * Signed one.
 * @type {!Long}
 */
Long.ONE = ONE;

/**
 * @type {!Long}
 * @inner
 */
var UONE = fromInt(1, true);

/**
 * Unsigned one.
 * @type {!Long}
 */
Long.UONE = UONE;

/**
 * @type {!Long}
 * @inner
 */
var NEG_ONE = fromInt(-1);

/**
 * Signed negative one.
 * @type {!Long}
 */
Long.NEG_ONE = NEG_ONE;

/**
 * @type {!Long}
 * @inner
 */
var MAX_VALUE = fromBits(0xFFFFFFFF|0, 0x7FFFFFFF|0, false);

/**
 * Maximum signed value.
 * @type {!Long}
 */
Long.MAX_VALUE = MAX_VALUE;

/**
 * @type {!Long}
 * @inner
 */
var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF|0, 0xFFFFFFFF|0, true);

/**
 * Maximum unsigned value.
 * @type {!Long}
 */
Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;

/**
 * @type {!Long}
 * @inner
 */
var MIN_VALUE = fromBits(0, 0x80000000|0, false);

/**
 * Minimum signed value.
 * @type {!Long}
 */
Long.MIN_VALUE = MIN_VALUE;

/**
 * @alias Long.prototype
 * @inner
 */
var LongPrototype = Long.prototype;

/**
 * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.
 * @returns {number}
 */
LongPrototype.toInt = function toInt() {
    return this.unsigned ? this.low >>> 0 : this.low;
};

/**
 * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).
 * @returns {number}
 */
LongPrototype.toNumber = function toNumber() {
    if (this.unsigned)
        return ((this.high >>> 0) * TWO_PWR_32_DBL) + (this.low >>> 0);
    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);
};

/**
 * Converts the Long to a string written in the specified radix.
 * @param {number=} radix Radix (2-36), defaults to 10
 * @returns {string}
 * @override
 * @throws {RangeError} If `radix` is out of range
 */
LongPrototype.toString = function toString(radix) {
    radix = radix || 10;
    if (radix < 2 || 36 < radix)
        throw RangeError('radix');
    if (this.isZero())
        return '0';
    if (this.isNegative()) { // Unsigned Longs are never negative
        if (this.eq(MIN_VALUE)) {
            // We need to change the Long value before it can be negated, so we remove
            // the bottom-most digit in this base and then recurse to do the rest.
            var radixLong = fromNumber(radix),
                div = this.div(radixLong),
                rem1 = div.mul(radixLong).sub(this);
            return div.toString(radix) + rem1.toInt().toString(radix);
        } else
            return '-' + this.neg().toString(radix);
    }

    // Do several (6) digits each time through the loop, so as to
    // minimize the calls to the very expensive emulated div.
    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),
        rem = this;
    var result = '';
    while (true) {
        var remDiv = rem.div(radixToPower),
            intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,
            digits = intval.toString(radix);
        rem = remDiv;
        if (rem.isZero())
            return digits + result;
        else {
            while (digits.length < 6)
                digits = '0' + digits;
            result = '' + digits + result;
        }
    }
};

/**
 * Gets the high 32 bits as a signed integer.
 * @returns {number} Signed high bits
 */
LongPrototype.getHighBits = function getHighBits() {
    return this.high;
};

/**
 * Gets the high 32 bits as an unsigned integer.
 * @returns {number} Unsigned high bits
 */
LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {
    return this.high >>> 0;
};

/**
 * Gets the low 32 bits as a signed integer.
 * @returns {number} Signed low bits
 */
LongPrototype.getLowBits = function getLowBits() {
    return this.low;
};

/**
 * Gets the low 32 bits as an unsigned integer.
 * @returns {number} Unsigned low bits
 */
LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {
    return this.low >>> 0;
};

/**
 * Gets the number of bits needed to represent the absolute value of this Long.
 * @returns {number}
 */
LongPrototype.getNumBitsAbs = function getNumBitsAbs() {
    if (this.isNegative()) // Unsigned Longs are never negative
        return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();
    var val = this.high != 0 ? this.high : this.low;
    for (var bit = 31; bit > 0; bit--)
        if ((val & (1 << bit)) != 0)
            break;
    return this.high != 0 ? bit + 33 : bit + 1;
};

/**
 * Tests if this Long's value equals zero.
 * @returns {boolean}
 */
LongPrototype.isZero = function isZero() {
    return this.high === 0 && this.low === 0;
};

/**
 * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.
 * @returns {boolean}
 */
LongPrototype.eqz = LongPrototype.isZero;

/**
 * Tests if this Long's value is negative.
 * @returns {boolean}
 */
LongPrototype.isNegative = function isNegative() {
    return !this.unsigned && this.high < 0;
};

/**
 * Tests if this Long's value is positive.
 * @returns {boolean}
 */
LongPrototype.isPositive = function isPositive() {
    return this.unsigned || this.high >= 0;
};

/**
 * Tests if this Long's value is odd.
 * @returns {boolean}
 */
LongPrototype.isOdd = function isOdd() {
    return (this.low & 1) === 1;
};

/**
 * Tests if this Long's value is even.
 * @returns {boolean}
 */
LongPrototype.isEven = function isEven() {
    return (this.low & 1) === 0;
};

/**
 * Tests if this Long's value equals the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.equals = function equals(other) {
    if (!isLong(other))
        other = fromValue(other);
    if (this.unsigned !== other.unsigned && (this.high >>> 31) === 1 && (other.high >>> 31) === 1)
        return false;
    return this.high === other.high && this.low === other.low;
};

/**
 * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.eq = LongPrototype.equals;

/**
 * Tests if this Long's value differs from the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.notEquals = function notEquals(other) {
    return !this.eq(/* validates */ other);
};

/**
 * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.neq = LongPrototype.notEquals;

/**
 * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.ne = LongPrototype.notEquals;

/**
 * Tests if this Long's value is less than the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.lessThan = function lessThan(other) {
    return this.comp(/* validates */ other) < 0;
};

/**
 * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.lt = LongPrototype.lessThan;

/**
 * Tests if this Long's value is less than or equal the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {
    return this.comp(/* validates */ other) <= 0;
};

/**
 * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.lte = LongPrototype.lessThanOrEqual;

/**
 * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.le = LongPrototype.lessThanOrEqual;

/**
 * Tests if this Long's value is greater than the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.greaterThan = function greaterThan(other) {
    return this.comp(/* validates */ other) > 0;
};

/**
 * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.gt = LongPrototype.greaterThan;

/**
 * Tests if this Long's value is greater than or equal the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {
    return this.comp(/* validates */ other) >= 0;
};

/**
 * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.gte = LongPrototype.greaterThanOrEqual;

/**
 * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
LongPrototype.ge = LongPrototype.greaterThanOrEqual;

/**
 * Compares this Long's value with the specified's.
 * @param {!Long|number|string} other Other value
 * @returns {number} 0 if they are the same, 1 if the this is greater and -1
 *  if the given one is greater
 */
LongPrototype.compare = function compare(other) {
    if (!isLong(other))
        other = fromValue(other);
    if (this.eq(other))
        return 0;
    var thisNeg = this.isNegative(),
        otherNeg = other.isNegative();
    if (thisNeg && !otherNeg)
        return -1;
    if (!thisNeg && otherNeg)
        return 1;
    // At this point the sign bits are the same
    if (!this.unsigned)
        return this.sub(other).isNegative() ? -1 : 1;
    // Both are positive if at least one is unsigned
    return (other.high >>> 0) > (this.high >>> 0) || (other.high === this.high && (other.low >>> 0) > (this.low >>> 0)) ? -1 : 1;
};

/**
 * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {number} 0 if they are the same, 1 if the this is greater and -1
 *  if the given one is greater
 */
LongPrototype.comp = LongPrototype.compare;

/**
 * Negates this Long's value.
 * @returns {!Long} Negated Long
 */
LongPrototype.negate = function negate() {
    if (!this.unsigned && this.eq(MIN_VALUE))
        return MIN_VALUE;
    return this.not().add(ONE);
};

/**
 * Negates this Long's value. This is an alias of {@link Long#negate}.
 * @function
 * @returns {!Long} Negated Long
 */
LongPrototype.neg = LongPrototype.negate;

/**
 * Returns the sum of this and the specified Long.
 * @param {!Long|number|string} addend Addend
 * @returns {!Long} Sum
 */
LongPrototype.add = function add(addend) {
    if (!isLong(addend))
        addend = fromValue(addend);

    // Divide each number into 4 chunks of 16 bits, and then sum the chunks.

    var a48 = this.high >>> 16;
    var a32 = this.high & 0xFFFF;
    var a16 = this.low >>> 16;
    var a00 = this.low & 0xFFFF;

    var b48 = addend.high >>> 16;
    var b32 = addend.high & 0xFFFF;
    var b16 = addend.low >>> 16;
    var b00 = addend.low & 0xFFFF;

    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
    c00 += a00 + b00;
    c16 += c00 >>> 16;
    c00 &= 0xFFFF;
    c16 += a16 + b16;
    c32 += c16 >>> 16;
    c16 &= 0xFFFF;
    c32 += a32 + b32;
    c48 += c32 >>> 16;
    c32 &= 0xFFFF;
    c48 += a48 + b48;
    c48 &= 0xFFFF;
    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);
};

/**
 * Returns the difference of this and the specified Long.
 * @param {!Long|number|string} subtrahend Subtrahend
 * @returns {!Long} Difference
 */
LongPrototype.subtract = function subtract(subtrahend) {
    if (!isLong(subtrahend))
        subtrahend = fromValue(subtrahend);
    return this.add(subtrahend.neg());
};

/**
 * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.
 * @function
 * @param {!Long|number|string} subtrahend Subtrahend
 * @returns {!Long} Difference
 */
LongPrototype.sub = LongPrototype.subtract;

/**
 * Returns the product of this and the specified Long.
 * @param {!Long|number|string} multiplier Multiplier
 * @returns {!Long} Product
 */
LongPrototype.multiply = function multiply(multiplier) {
    if (this.isZero())
        return ZERO;
    if (!isLong(multiplier))
        multiplier = fromValue(multiplier);

    // use wasm support if present
    if (wasm) {
        var low = wasm.mul(this.low,
                           this.high,
                           multiplier.low,
                           multiplier.high);
        return fromBits(low, wasm.get_high(), this.unsigned);
    }

    if (multiplier.isZero())
        return ZERO;
    if (this.eq(MIN_VALUE))
        return multiplier.isOdd() ? MIN_VALUE : ZERO;
    if (multiplier.eq(MIN_VALUE))
        return this.isOdd() ? MIN_VALUE : ZERO;

    if (this.isNegative()) {
        if (multiplier.isNegative())
            return this.neg().mul(multiplier.neg());
        else
            return this.neg().mul(multiplier).neg();
    } else if (multiplier.isNegative())
        return this.mul(multiplier.neg()).neg();

    // If both longs are small, use float multiplication
    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))
        return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);

    // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.
    // We can skip products that would overflow.

    var a48 = this.high >>> 16;
    var a32 = this.high & 0xFFFF;
    var a16 = this.low >>> 16;
    var a00 = this.low & 0xFFFF;

    var b48 = multiplier.high >>> 16;
    var b32 = multiplier.high & 0xFFFF;
    var b16 = multiplier.low >>> 16;
    var b00 = multiplier.low & 0xFFFF;

    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
    c00 += a00 * b00;
    c16 += c00 >>> 16;
    c00 &= 0xFFFF;
    c16 += a16 * b00;
    c32 += c16 >>> 16;
    c16 &= 0xFFFF;
    c16 += a00 * b16;
    c32 += c16 >>> 16;
    c16 &= 0xFFFF;
    c32 += a32 * b00;
    c48 += c32 >>> 16;
    c32 &= 0xFFFF;
    c32 += a16 * b16;
    c48 += c32 >>> 16;
    c32 &= 0xFFFF;
    c32 += a00 * b32;
    c48 += c32 >>> 16;
    c32 &= 0xFFFF;
    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;
    c48 &= 0xFFFF;
    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);
};

/**
 * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.
 * @function
 * @param {!Long|number|string} multiplier Multiplier
 * @returns {!Long} Product
 */
LongPrototype.mul = LongPrototype.multiply;

/**
 * Returns this Long divided by the specified. The result is signed if this Long is signed or
 *  unsigned if this Long is unsigned.
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Quotient
 */
LongPrototype.divide = function divide(divisor) {
    if (!isLong(divisor))
        divisor = fromValue(divisor);
    if (divisor.isZero())
        throw Error('division by zero');

    // use wasm support if present
    if (wasm) {
        // guard against signed division overflow: the largest
        // negative number / -1 would be 1 larger than the largest
        // positive number, due to two's complement.
        if (!this.unsigned &&
            this.high === -0x80000000 &&
            divisor.low === -1 && divisor.high === -1) {
            // be consistent with non-wasm code path
            return this;
        }
        var low = (this.unsigned ? wasm.div_u : wasm.div_s)(
            this.low,
            this.high,
            divisor.low,
            divisor.high
        );
        return fromBits(low, wasm.get_high(), this.unsigned);
    }

    if (this.isZero())
        return this.unsigned ? UZERO : ZERO;
    var approx, rem, res;
    if (!this.unsigned) {
        // This section is only relevant for signed longs and is derived from the
        // closure library as a whole.
        if (this.eq(MIN_VALUE)) {
            if (divisor.eq(ONE) || divisor.eq(NEG_ONE))
                return MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE
            else if (divisor.eq(MIN_VALUE))
                return ONE;
            else {
                // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.
                var halfThis = this.shr(1);
                approx = halfThis.div(divisor).shl(1);
                if (approx.eq(ZERO)) {
                    return divisor.isNegative() ? ONE : NEG_ONE;
                } else {
                    rem = this.sub(divisor.mul(approx));
                    res = approx.add(rem.div(divisor));
                    return res;
                }
            }
        } else if (divisor.eq(MIN_VALUE))
            return this.unsigned ? UZERO : ZERO;
        if (this.isNegative()) {
            if (divisor.isNegative())
                return this.neg().div(divisor.neg());
            return this.neg().div(divisor).neg();
        } else if (divisor.isNegative())
            return this.div(divisor.neg()).neg();
        res = ZERO;
    } else {
        // The algorithm below has not been made for unsigned longs. It's therefore
        // required to take special care of the MSB prior to running it.
        if (!divisor.unsigned)
            divisor = divisor.toUnsigned();
        if (divisor.gt(this))
            return UZERO;
        if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true
            return UONE;
        res = UZERO;
    }

    // Repeat the following until the remainder is less than other:  find a
    // floating-point that approximates remainder / other *from below*, add this
    // into the result, and subtract it from the remainder.  It is critical that
    // the approximate value is less than or equal to the real value so that the
    // remainder never becomes negative.
    rem = this;
    while (rem.gte(divisor)) {
        // Approximate the result of division. This may be a little greater or
        // smaller than the actual value.
        approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));

        // We will tweak the approximate result by changing it in the 48-th digit or
        // the smallest non-fractional digit, whichever is larger.
        var log2 = Math.ceil(Math.log(approx) / Math.LN2),
            delta = (log2 <= 48) ? 1 : pow_dbl(2, log2 - 48),

        // Decrease the approximation until it is smaller than the remainder.  Note
        // that if it is too large, the product overflows and is negative.
            approxRes = fromNumber(approx),
            approxRem = approxRes.mul(divisor);
        while (approxRem.isNegative() || approxRem.gt(rem)) {
            approx -= delta;
            approxRes = fromNumber(approx, this.unsigned);
            approxRem = approxRes.mul(divisor);
        }

        // We know the answer can't be zero... and actually, zero would cause
        // infinite recursion since we would make no progress.
        if (approxRes.isZero())
            approxRes = ONE;

        res = res.add(approxRes);
        rem = rem.sub(approxRem);
    }
    return res;
};

/**
 * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Quotient
 */
LongPrototype.div = LongPrototype.divide;

/**
 * Returns this Long modulo the specified.
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */
LongPrototype.modulo = function modulo(divisor) {
    if (!isLong(divisor))
        divisor = fromValue(divisor);

    // use wasm support if present
    if (wasm) {
        var low = (this.unsigned ? wasm.rem_u : wasm.rem_s)(
            this.low,
            this.high,
            divisor.low,
            divisor.high
        );
        return fromBits(low, wasm.get_high(), this.unsigned);
    }

    return this.sub(this.div(divisor).mul(divisor));
};

/**
 * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */
LongPrototype.mod = LongPrototype.modulo;

/**
 * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */
LongPrototype.rem = LongPrototype.modulo;

/**
 * Returns the bitwise NOT of this Long.
 * @returns {!Long}
 */
LongPrototype.not = function not() {
    return fromBits(~this.low, ~this.high, this.unsigned);
};

/**
 * Returns the bitwise AND of this Long and the specified.
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */
LongPrototype.and = function and(other) {
    if (!isLong(other))
        other = fromValue(other);
    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);
};

/**
 * Returns the bitwise OR of this Long and the specified.
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */
LongPrototype.or = function or(other) {
    if (!isLong(other))
        other = fromValue(other);
    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);
};

/**
 * Returns the bitwise XOR of this Long and the given one.
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */
LongPrototype.xor = function xor(other) {
    if (!isLong(other))
        other = fromValue(other);
    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);
};

/**
 * Returns this Long with bits shifted to the left by the given amount.
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shiftLeft = function shiftLeft(numBits) {
    if (isLong(numBits))
        numBits = numBits.toInt();
    if ((numBits &= 63) === 0)
        return this;
    else if (numBits < 32)
        return fromBits(this.low << numBits, (this.high << numBits) | (this.low >>> (32 - numBits)), this.unsigned);
    else
        return fromBits(0, this.low << (numBits - 32), this.unsigned);
};

/**
 * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shl = LongPrototype.shiftLeft;

/**
 * Returns this Long with bits arithmetically shifted to the right by the given amount.
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shiftRight = function shiftRight(numBits) {
    if (isLong(numBits))
        numBits = numBits.toInt();
    if ((numBits &= 63) === 0)
        return this;
    else if (numBits < 32)
        return fromBits((this.low >>> numBits) | (this.high << (32 - numBits)), this.high >> numBits, this.unsigned);
    else
        return fromBits(this.high >> (numBits - 32), this.high >= 0 ? 0 : -1, this.unsigned);
};

/**
 * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shr = LongPrototype.shiftRight;

/**
 * Returns this Long with bits logically shifted to the right by the given amount.
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {
    if (isLong(numBits))
        numBits = numBits.toInt();
    numBits &= 63;
    if (numBits === 0)
        return this;
    else {
        var high = this.high;
        if (numBits < 32) {
            var low = this.low;
            return fromBits((low >>> numBits) | (high << (32 - numBits)), high >>> numBits, this.unsigned);
        } else if (numBits === 32)
            return fromBits(high, 0, this.unsigned);
        else
            return fromBits(high >>> (numBits - 32), 0, this.unsigned);
    }
};

/**
 * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shru = LongPrototype.shiftRightUnsigned;

/**
 * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;

/**
 * Converts this Long to signed.
 * @returns {!Long} Signed long
 */
LongPrototype.toSigned = function toSigned() {
    if (!this.unsigned)
        return this;
    return fromBits(this.low, this.high, false);
};

/**
 * Converts this Long to unsigned.
 * @returns {!Long} Unsigned long
 */
LongPrototype.toUnsigned = function toUnsigned() {
    if (this.unsigned)
        return this;
    return fromBits(this.low, this.high, true);
};

/**
 * Converts this Long to its byte representation.
 * @param {boolean=} le Whether little or big endian, defaults to big endian
 * @returns {!Array.<number>} Byte representation
 */
LongPrototype.toBytes = function toBytes(le) {
    return le ? this.toBytesLE() : this.toBytesBE();
};

/**
 * Converts this Long to its little endian byte representation.
 * @returns {!Array.<number>} Little endian byte representation
 */
LongPrototype.toBytesLE = function toBytesLE() {
    var hi = this.high,
        lo = this.low;
    return [
        lo        & 0xff,
        lo >>>  8 & 0xff,
        lo >>> 16 & 0xff,
        lo >>> 24       ,
        hi        & 0xff,
        hi >>>  8 & 0xff,
        hi >>> 16 & 0xff,
        hi >>> 24
    ];
};

/**
 * Converts this Long to its big endian byte representation.
 * @returns {!Array.<number>} Big endian byte representation
 */
LongPrototype.toBytesBE = function toBytesBE() {
    var hi = this.high,
        lo = this.low;
    return [
        hi >>> 24       ,
        hi >>> 16 & 0xff,
        hi >>>  8 & 0xff,
        hi        & 0xff,
        lo >>> 24       ,
        lo >>> 16 & 0xff,
        lo >>>  8 & 0xff,
        lo        & 0xff
    ];
};

/**
 * Creates a Long from its byte representation.
 * @param {!Array.<number>} bytes Byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @param {boolean=} le Whether little or big endian, defaults to big endian
 * @returns {Long} The corresponding Long value
 */
Long.fromBytes = function fromBytes(bytes, unsigned, le) {
    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);
};

/**
 * Creates a Long from its little endian byte representation.
 * @param {!Array.<number>} bytes Little endian byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {Long} The corresponding Long value
 */
Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {
    return new Long(
        bytes[0]       |
        bytes[1] <<  8 |
        bytes[2] << 16 |
        bytes[3] << 24,
        bytes[4]       |
        bytes[5] <<  8 |
        bytes[6] << 16 |
        bytes[7] << 24,
        unsigned
    );
};

/**
 * Creates a Long from its big endian byte representation.
 * @param {!Array.<number>} bytes Big endian byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {Long} The corresponding Long value
 */
Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {
    return new Long(
        bytes[4] << 24 |
        bytes[5] << 16 |
        bytes[6] <<  8 |
        bytes[7],
        bytes[0] << 24 |
        bytes[1] << 16 |
        bytes[2] <<  8 |
        bytes[3],
        unsigned
    );
};


/***/ }),

/***/ "./node_modules/md5/md5.js":
/*!*********************************!*\
  !*** ./node_modules/md5/md5.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function(){
  var crypt = __webpack_require__(/*! crypt */ "./node_modules/crypt/crypt.js"),
      utf8 = __webpack_require__(/*! charenc */ "./node_modules/charenc/charenc.js").utf8,
      isBuffer = __webpack_require__(/*! is-buffer */ "./node_modules/md5/node_modules/is-buffer/index.js"),
      bin = __webpack_require__(/*! charenc */ "./node_modules/charenc/charenc.js").bin,

  // The core
  md5 = function (message, options) {
    // Convert to byte array
    if (message.constructor == String)
      if (options && options.encoding === 'binary')
        message = bin.stringToBytes(message);
      else
        message = utf8.stringToBytes(message);
    else if (isBuffer(message))
      message = Array.prototype.slice.call(message, 0);
    else if (!Array.isArray(message) && message.constructor !== Uint8Array)
      message = message.toString();
    // else, assume byte array already

    var m = crypt.bytesToWords(message),
        l = message.length * 8,
        a =  1732584193,
        b = -271733879,
        c = -1732584194,
        d =  271733878;

    // Swap endian
    for (var i = 0; i < m.length; i++) {
      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |
             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;
    }

    // Padding
    m[l >>> 5] |= 0x80 << (l % 32);
    m[(((l + 64) >>> 9) << 4) + 14] = l;

    // Method shortcuts
    var FF = md5._ff,
        GG = md5._gg,
        HH = md5._hh,
        II = md5._ii;

    for (var i = 0; i < m.length; i += 16) {

      var aa = a,
          bb = b,
          cc = c,
          dd = d;

      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);
      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);
      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);
      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);
      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);
      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);
      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);
      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);
      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);
      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);
      c = FF(c, d, a, b, m[i+10], 17, -42063);
      b = FF(b, c, d, a, m[i+11], 22, -1990404162);
      a = FF(a, b, c, d, m[i+12],  7,  1804603682);
      d = FF(d, a, b, c, m[i+13], 12, -40341101);
      c = FF(c, d, a, b, m[i+14], 17, -1502002290);
      b = FF(b, c, d, a, m[i+15], 22,  1236535329);

      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);
      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);
      c = GG(c, d, a, b, m[i+11], 14,  643717713);
      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);
      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);
      d = GG(d, a, b, c, m[i+10],  9,  38016083);
      c = GG(c, d, a, b, m[i+15], 14, -660478335);
      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);
      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);
      d = GG(d, a, b, c, m[i+14],  9, -1019803690);
      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);
      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);
      a = GG(a, b, c, d, m[i+13],  5, -1444681467);
      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);
      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);
      b = GG(b, c, d, a, m[i+12], 20, -1926607734);

      a = HH(a, b, c, d, m[i+ 5],  4, -378558);
      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);
      c = HH(c, d, a, b, m[i+11], 16,  1839030562);
      b = HH(b, c, d, a, m[i+14], 23, -35309556);
      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);
      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);
      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);
      b = HH(b, c, d, a, m[i+10], 23, -1094730640);
      a = HH(a, b, c, d, m[i+13],  4,  681279174);
      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);
      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);
      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);
      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);
      d = HH(d, a, b, c, m[i+12], 11, -421815835);
      c = HH(c, d, a, b, m[i+15], 16,  530742520);
      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);

      a = II(a, b, c, d, m[i+ 0],  6, -198630844);
      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);
      c = II(c, d, a, b, m[i+14], 15, -1416354905);
      b = II(b, c, d, a, m[i+ 5], 21, -57434055);
      a = II(a, b, c, d, m[i+12],  6,  1700485571);
      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);
      c = II(c, d, a, b, m[i+10], 15, -1051523);
      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);
      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);
      d = II(d, a, b, c, m[i+15], 10, -30611744);
      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);
      b = II(b, c, d, a, m[i+13], 21,  1309151649);
      a = II(a, b, c, d, m[i+ 4],  6, -145523070);
      d = II(d, a, b, c, m[i+11], 10, -1120210379);
      c = II(c, d, a, b, m[i+ 2], 15,  718787259);
      b = II(b, c, d, a, m[i+ 9], 21, -343485551);

      a = (a + aa) >>> 0;
      b = (b + bb) >>> 0;
      c = (c + cc) >>> 0;
      d = (d + dd) >>> 0;
    }

    return crypt.endian([a, b, c, d]);
  };

  // Auxiliary functions
  md5._ff  = function (a, b, c, d, x, s, t) {
    var n = a + (b & c | ~b & d) + (x >>> 0) + t;
    return ((n << s) | (n >>> (32 - s))) + b;
  };
  md5._gg  = function (a, b, c, d, x, s, t) {
    var n = a + (b & d | c & ~d) + (x >>> 0) + t;
    return ((n << s) | (n >>> (32 - s))) + b;
  };
  md5._hh  = function (a, b, c, d, x, s, t) {
    var n = a + (b ^ c ^ d) + (x >>> 0) + t;
    return ((n << s) | (n >>> (32 - s))) + b;
  };
  md5._ii  = function (a, b, c, d, x, s, t) {
    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;
    return ((n << s) | (n >>> (32 - s))) + b;
  };

  // Package private blocksize
  md5._blocksize = 16;
  md5._digestsize = 16;

  module.exports = function (message, options) {
    if (message === undefined || message === null)
      throw new Error('Illegal argument ' + message);

    var digestbytes = crypt.wordsToBytes(md5(message, options));
    return options && options.asBytes ? digestbytes :
        options && options.asString ? bin.bytesToString(digestbytes) :
        crypt.bytesToHex(digestbytes);
  };

})();


/***/ }),

/***/ "./node_modules/md5/node_modules/is-buffer/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/md5/node_modules/is-buffer/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */

// The _isBuffer check is for Safari 5-7 support, because it's missing
// Object.prototype.constructor. Remove this eventually
module.exports = function (obj) {
  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)
}

function isBuffer (obj) {
  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)
}

// For Node v0.10 support. Remove this eventually.
function isSlowBuffer (obj) {
  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))
}


/***/ }),

/***/ "./node_modules/murmurhash-js/murmurhash3_gc.js":
/*!******************************************************!*\
  !*** ./node_modules/murmurhash-js/murmurhash3_gc.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)
 * 
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 * 
 * @param {string} key ASCII only
 * @param {number} seed Positive integer only
 * @return {number} 32-bit positive integer hash 
 */

function murmurhash3_32_gc(key, seed) {
	var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;
	
	remainder = key.length & 3; // key.length % 4
	bytes = key.length - remainder;
	h1 = seed;
	c1 = 0xcc9e2d51;
	c2 = 0x1b873593;
	i = 0;
	
	while (i < bytes) {
	  	k1 = 
	  	  ((key.charCodeAt(i) & 0xff)) |
	  	  ((key.charCodeAt(++i) & 0xff) << 8) |
	  	  ((key.charCodeAt(++i) & 0xff) << 16) |
	  	  ((key.charCodeAt(++i) & 0xff) << 24);
		++i;
		
		k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;
		k1 = (k1 << 15) | (k1 >>> 17);
		k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;

		h1 ^= k1;
        h1 = (h1 << 13) | (h1 >>> 19);
		h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;
		h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));
	}
	
	k1 = 0;
	
	switch (remainder) {
		case 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
		case 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
		case 1: k1 ^= (key.charCodeAt(i) & 0xff);
		
		k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
		k1 = (k1 << 15) | (k1 >>> 17);
		k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
		h1 ^= k1;
	}
	
	h1 ^= key.length;

	h1 ^= h1 >>> 16;
	h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;
	h1 ^= h1 >>> 13;
	h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;
	h1 ^= h1 >>> 16;

	return h1 >>> 0;
}

if(true) {
  module.exports = murmurhash3_32_gc
}

/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/base64-js/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/base64-js/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/node-libs-browser/node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/node-libs-browser/node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/node-libs-browser/node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/ieee754/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/ieee754/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/isarray/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/isarray/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/process/browser.js":
/*!************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/process/browser.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/setimmediate/setImmediate.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/setimmediate/setImmediate.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/node-libs-browser/node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/timers-browserify/main.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "./node_modules/node-libs-browser/node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/protobufjs/minimal.js":
/*!********************************************!*\
  !*** ./node_modules/protobufjs/minimal.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// minimal library entry point.


module.exports = __webpack_require__(/*! ./src/index-minimal */ "./node_modules/protobufjs/src/index-minimal.js");


/***/ }),

/***/ "./node_modules/protobufjs/src/index-minimal.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/index-minimal.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var protobuf = exports;

/**
 * Build type, one of `"full"`, `"light"` or `"minimal"`.
 * @name build
 * @type {string}
 * @const
 */
protobuf.build = "minimal";

// Serialization
protobuf.Writer       = __webpack_require__(/*! ./writer */ "./node_modules/protobufjs/src/writer.js");
protobuf.BufferWriter = __webpack_require__(/*! ./writer_buffer */ "./node_modules/protobufjs/src/writer_buffer.js");
protobuf.Reader       = __webpack_require__(/*! ./reader */ "./node_modules/protobufjs/src/reader.js");
protobuf.BufferReader = __webpack_require__(/*! ./reader_buffer */ "./node_modules/protobufjs/src/reader_buffer.js");

// Utility
protobuf.util         = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");
protobuf.rpc          = __webpack_require__(/*! ./rpc */ "./node_modules/protobufjs/src/rpc.js");
protobuf.roots        = __webpack_require__(/*! ./roots */ "./node_modules/protobufjs/src/roots.js");
protobuf.configure    = configure;

/* istanbul ignore next */
/**
 * Reconfigures the library according to the environment.
 * @returns {undefined}
 */
function configure() {
    protobuf.util._configure();
    protobuf.Writer._configure(protobuf.BufferWriter);
    protobuf.Reader._configure(protobuf.BufferReader);
}

// Set up buffer utility according to the environment
configure();


/***/ }),

/***/ "./node_modules/protobufjs/src/reader.js":
/*!***********************************************!*\
  !*** ./node_modules/protobufjs/src/reader.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Reader;

var util      = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

var BufferReader; // cyclic

var LongBits  = util.LongBits,
    utf8      = util.utf8;

/* istanbul ignore next */
function indexOutOfRange(reader, writeLength) {
    return RangeError("index out of range: " + reader.pos + " + " + (writeLength || 1) + " > " + reader.len);
}

/**
 * Constructs a new reader instance using the specified buffer.
 * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 * @param {Uint8Array} buffer Buffer to read from
 */
function Reader(buffer) {

    /**
     * Read buffer.
     * @type {Uint8Array}
     */
    this.buf = buffer;

    /**
     * Read buffer position.
     * @type {number}
     */
    this.pos = 0;

    /**
     * Read buffer length.
     * @type {number}
     */
    this.len = buffer.length;
}

var create_array = typeof Uint8Array !== "undefined"
    ? function create_typed_array(buffer) {
        if (buffer instanceof Uint8Array || Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    }
    /* istanbul ignore next */
    : function create_array(buffer) {
        if (Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    };

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup(buffer) {
            return (Reader.create = function create_buffer(buffer) {
                return util.Buffer.isBuffer(buffer)
                    ? new BufferReader(buffer)
                    /* istanbul ignore next */
                    : create_array(buffer);
            })(buffer);
        }
        /* istanbul ignore next */
        : create_array;
};

/**
 * Creates a new reader using the specified buffer.
 * @function
 * @param {Uint8Array|Buffer} buffer Buffer to read from
 * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}
 * @throws {Error} If `buffer` is not a valid buffer
 */
Reader.create = create();

Reader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;

/**
 * Reads a varint as an unsigned 32 bit value.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.uint32 = (function read_uint32_setup() {
    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)
    return function read_uint32() {
        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;

        /* istanbul ignore if */
        if ((this.pos += 5) > this.len) {
            this.pos = this.len;
            throw indexOutOfRange(this, 10);
        }
        return value;
    };
})();

/**
 * Reads a varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.int32 = function read_int32() {
    return this.uint32() | 0;
};

/**
 * Reads a zig-zag encoded varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.sint32 = function read_sint32() {
    var value = this.uint32();
    return value >>> 1 ^ -(value & 1) | 0;
};

/* eslint-disable no-invalid-this */

function readLongVarint() {
    // tends to deopt with local vars for octet etc.
    var bits = new LongBits(0, 0);
    var i = 0;
    if (this.len - this.pos > 4) { // fast route (lo)
        for (; i < 4; ++i) {
            // 1st..4th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 5th
        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;
        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;
        if (this.buf[this.pos++] < 128)
            return bits;
        i = 0;
    } else {
        for (; i < 3; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 1st..3th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 4th
        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;
        return bits;
    }
    if (this.len - this.pos > 4) { // fast route (hi)
        for (; i < 5; ++i) {
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    } else {
        for (; i < 5; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    }
    /* istanbul ignore next */
    throw Error("invalid varint encoding");
}

/* eslint-enable no-invalid-this */

/**
 * Reads a varint as a signed 64 bit value.
 * @name Reader#int64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as an unsigned 64 bit value.
 * @name Reader#uint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a zig-zag encoded varint as a signed 64 bit value.
 * @name Reader#sint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as a boolean.
 * @returns {boolean} Value read
 */
Reader.prototype.bool = function read_bool() {
    return this.uint32() !== 0;
};

function readFixed32_end(buf, end) { // note that this uses `end`, not `pos`
    return (buf[end - 4]
          | buf[end - 3] << 8
          | buf[end - 2] << 16
          | buf[end - 1] << 24) >>> 0;
}

/**
 * Reads fixed 32 bits as an unsigned 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.fixed32 = function read_fixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4);
};

/**
 * Reads fixed 32 bits as a signed 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.sfixed32 = function read_sfixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4) | 0;
};

/* eslint-disable no-invalid-this */

function readFixed64(/* this: Reader */) {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);

    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
}

/* eslint-enable no-invalid-this */

/**
 * Reads fixed 64 bits.
 * @name Reader#fixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads zig-zag encoded fixed 64 bits.
 * @name Reader#sfixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a float (32 bit) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.float = function read_float() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readFloatLE(this.buf, this.pos);
    this.pos += 4;
    return value;
};

/**
 * Reads a double (64 bit float) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.double = function read_double() {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readDoubleLE(this.buf, this.pos);
    this.pos += 8;
    return value;
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @returns {Uint8Array} Value read
 */
Reader.prototype.bytes = function read_bytes() {
    var length = this.uint32(),
        start  = this.pos,
        end    = this.pos + length;

    /* istanbul ignore if */
    if (end > this.len)
        throw indexOutOfRange(this, length);

    this.pos += length;
    if (Array.isArray(this.buf)) // plain array
        return this.buf.slice(start, end);
    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1
        ? new this.buf.constructor(0)
        : this._slice.call(this.buf, start, end);
};

/**
 * Reads a string preceeded by its byte length as a varint.
 * @returns {string} Value read
 */
Reader.prototype.string = function read_string() {
    var bytes = this.bytes();
    return utf8.read(bytes, 0, bytes.length);
};

/**
 * Skips the specified number of bytes if specified, otherwise skips a varint.
 * @param {number} [length] Length if known, otherwise a varint is assumed
 * @returns {Reader} `this`
 */
Reader.prototype.skip = function skip(length) {
    if (typeof length === "number") {
        /* istanbul ignore if */
        if (this.pos + length > this.len)
            throw indexOutOfRange(this, length);
        this.pos += length;
    } else {
        do {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
        } while (this.buf[this.pos++] & 128);
    }
    return this;
};

/**
 * Skips the next element of the specified wire type.
 * @param {number} wireType Wire type received
 * @returns {Reader} `this`
 */
Reader.prototype.skipType = function(wireType) {
    switch (wireType) {
        case 0:
            this.skip();
            break;
        case 1:
            this.skip(8);
            break;
        case 2:
            this.skip(this.uint32());
            break;
        case 3:
            while ((wireType = this.uint32() & 7) !== 4) {
                this.skipType(wireType);
            }
            break;
        case 5:
            this.skip(4);
            break;

        /* istanbul ignore next */
        default:
            throw Error("invalid wire type " + wireType + " at offset " + this.pos);
    }
    return this;
};

Reader._configure = function(BufferReader_) {
    BufferReader = BufferReader_;
    Reader.create = create();
    BufferReader._configure();

    var fn = util.Long ? "toLong" : /* istanbul ignore next */ "toNumber";
    util.merge(Reader.prototype, {

        int64: function read_int64() {
            return readLongVarint.call(this)[fn](false);
        },

        uint64: function read_uint64() {
            return readLongVarint.call(this)[fn](true);
        },

        sint64: function read_sint64() {
            return readLongVarint.call(this).zzDecode()[fn](false);
        },

        fixed64: function read_fixed64() {
            return readFixed64.call(this)[fn](true);
        },

        sfixed64: function read_sfixed64() {
            return readFixed64.call(this)[fn](false);
        }

    });
};


/***/ }),

/***/ "./node_modules/protobufjs/src/reader_buffer.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/reader_buffer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferReader;

// extends Reader
var Reader = __webpack_require__(/*! ./reader */ "./node_modules/protobufjs/src/reader.js");
(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;

var util = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs a new buffer reader instance.
 * @classdesc Wire format reader using node buffers.
 * @extends Reader
 * @constructor
 * @param {Buffer} buffer Buffer to read from
 */
function BufferReader(buffer) {
    Reader.call(this, buffer);

    /**
     * Read buffer.
     * @name BufferReader#buf
     * @type {Buffer}
     */
}

BufferReader._configure = function () {
    /* istanbul ignore else */
    if (util.Buffer)
        BufferReader.prototype._slice = util.Buffer.prototype.slice;
};


/**
 * @override
 */
BufferReader.prototype.string = function read_string_buffer() {
    var len = this.uint32(); // modifies pos
    return this.buf.utf8Slice
        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))
        : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + len, this.len));
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @name BufferReader#bytes
 * @function
 * @returns {Buffer} Value read
 */

BufferReader._configure();


/***/ }),

/***/ "./node_modules/protobufjs/src/roots.js":
/*!**********************************************!*\
  !*** ./node_modules/protobufjs/src/roots.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};

/**
 * Named roots.
 * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).
 * Can also be used manually to make roots available accross modules.
 * @name roots
 * @type {Object.<string,Root>}
 * @example
 * // pbjs -r myroot -o compiled.js ...
 *
 * // in another module:
 * require("./compiled.js");
 *
 * // in any subsequent module:
 * var root = protobuf.roots["myroot"];
 */


/***/ }),

/***/ "./node_modules/protobufjs/src/rpc.js":
/*!********************************************!*\
  !*** ./node_modules/protobufjs/src/rpc.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Streaming RPC helpers.
 * @namespace
 */
var rpc = exports;

/**
 * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.
 * @typedef RPCImpl
 * @type {function}
 * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called
 * @param {Uint8Array} requestData Request data
 * @param {RPCImplCallback} callback Callback function
 * @returns {undefined}
 * @example
 * function rpcImpl(method, requestData, callback) {
 *     if (protobuf.util.lcFirst(method.name) !== "myMethod") // compatible with static code
 *         throw Error("no such method");
 *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {
 *         callback(err, responseData);
 *     });
 * }
 */

/**
 * Node-style callback as used by {@link RPCImpl}.
 * @typedef RPCImplCallback
 * @type {function}
 * @param {Error|null} error Error, if any, otherwise `null`
 * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error
 * @returns {undefined}
 */

rpc.Service = __webpack_require__(/*! ./rpc/service */ "./node_modules/protobufjs/src/rpc/service.js");


/***/ }),

/***/ "./node_modules/protobufjs/src/rpc/service.js":
/*!****************************************************!*\
  !*** ./node_modules/protobufjs/src/rpc/service.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Service;

var util = __webpack_require__(/*! ../util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

// Extends EventEmitter
(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;

/**
 * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.
 *
 * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.
 * @typedef rpc.ServiceMethodCallback
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {TRes} [response] Response message
 * @returns {undefined}
 */

/**
 * A service method part of a {@link rpc.Service} as created by {@link Service.create}.
 * @typedef rpc.ServiceMethod
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message
 * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`
 */

/**
 * Constructs a new RPC service instance.
 * @classdesc An RPC service as returned by {@link Service#create}.
 * @exports rpc.Service
 * @extends util.EventEmitter
 * @constructor
 * @param {RPCImpl} rpcImpl RPC implementation
 * @param {boolean} [requestDelimited=false] Whether requests are length-delimited
 * @param {boolean} [responseDelimited=false] Whether responses are length-delimited
 */
function Service(rpcImpl, requestDelimited, responseDelimited) {

    if (typeof rpcImpl !== "function")
        throw TypeError("rpcImpl must be a function");

    util.EventEmitter.call(this);

    /**
     * RPC implementation. Becomes `null` once the service is ended.
     * @type {RPCImpl|null}
     */
    this.rpcImpl = rpcImpl;

    /**
     * Whether requests are length-delimited.
     * @type {boolean}
     */
    this.requestDelimited = Boolean(requestDelimited);

    /**
     * Whether responses are length-delimited.
     * @type {boolean}
     */
    this.responseDelimited = Boolean(responseDelimited);
}

/**
 * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.
 * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method
 * @param {Constructor<TReq>} requestCtor Request constructor
 * @param {Constructor<TRes>} responseCtor Response constructor
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback
 * @returns {undefined}
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 */
Service.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {

    if (!request)
        throw TypeError("request must be specified");

    var self = this;
    if (!callback)
        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);

    if (!self.rpcImpl) {
        setTimeout(function() { callback(Error("already ended")); }, 0);
        return undefined;
    }

    try {
        return self.rpcImpl(
            method,
            requestCtor[self.requestDelimited ? "encodeDelimited" : "encode"](request).finish(),
            function rpcCallback(err, response) {

                if (err) {
                    self.emit("error", err, method);
                    return callback(err);
                }

                if (response === null) {
                    self.end(/* endedByRPC */ true);
                    return undefined;
                }

                if (!(response instanceof responseCtor)) {
                    try {
                        response = responseCtor[self.responseDelimited ? "decodeDelimited" : "decode"](response);
                    } catch (err) {
                        self.emit("error", err, method);
                        return callback(err);
                    }
                }

                self.emit("data", response, method);
                return callback(null, response);
            }
        );
    } catch (err) {
        self.emit("error", err, method);
        setTimeout(function() { callback(err); }, 0);
        return undefined;
    }
};

/**
 * Ends this service and emits the `end` event.
 * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.
 * @returns {rpc.Service} `this`
 */
Service.prototype.end = function end(endedByRPC) {
    if (this.rpcImpl) {
        if (!endedByRPC) // signal end to rpcImpl
            this.rpcImpl(null, null, null);
        this.rpcImpl = null;
        this.emit("end").off();
    }
    return this;
};


/***/ }),

/***/ "./node_modules/protobufjs/src/util/longbits.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/util/longbits.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = LongBits;

var util = __webpack_require__(/*! ../util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs new long bits.
 * @classdesc Helper class for working with the low and high bits of a 64 bit value.
 * @memberof util
 * @constructor
 * @param {number} lo Low 32 bits, unsigned
 * @param {number} hi High 32 bits, unsigned
 */
function LongBits(lo, hi) {

    // note that the casts below are theoretically unnecessary as of today, but older statically
    // generated converter code might still call the ctor with signed 32bits. kept for compat.

    /**
     * Low bits.
     * @type {number}
     */
    this.lo = lo >>> 0;

    /**
     * High bits.
     * @type {number}
     */
    this.hi = hi >>> 0;
}

/**
 * Zero bits.
 * @memberof util.LongBits
 * @type {util.LongBits}
 */
var zero = LongBits.zero = new LongBits(0, 0);

zero.toNumber = function() { return 0; };
zero.zzEncode = zero.zzDecode = function() { return this; };
zero.length = function() { return 1; };

/**
 * Zero hash.
 * @memberof util.LongBits
 * @type {string}
 */
var zeroHash = LongBits.zeroHash = "\0\0\0\0\0\0\0\0";

/**
 * Constructs new long bits from the specified number.
 * @param {number} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.fromNumber = function fromNumber(value) {
    if (value === 0)
        return zero;
    var sign = value < 0;
    if (sign)
        value = -value;
    var lo = value >>> 0,
        hi = (value - lo) / 4294967296 >>> 0;
    if (sign) {
        hi = ~hi >>> 0;
        lo = ~lo >>> 0;
        if (++lo > 4294967295) {
            lo = 0;
            if (++hi > 4294967295)
                hi = 0;
        }
    }
    return new LongBits(lo, hi);
};

/**
 * Constructs new long bits from a number, long or string.
 * @param {Long|number|string} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.from = function from(value) {
    if (typeof value === "number")
        return LongBits.fromNumber(value);
    if (util.isString(value)) {
        /* istanbul ignore else */
        if (util.Long)
            value = util.Long.fromString(value);
        else
            return LongBits.fromNumber(parseInt(value, 10));
    }
    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;
};

/**
 * Converts this long bits to a possibly unsafe JavaScript number.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {number} Possibly unsafe number
 */
LongBits.prototype.toNumber = function toNumber(unsigned) {
    if (!unsigned && this.hi >>> 31) {
        var lo = ~this.lo + 1 >>> 0,
            hi = ~this.hi     >>> 0;
        if (!lo)
            hi = hi + 1 >>> 0;
        return -(lo + hi * 4294967296);
    }
    return this.lo + this.hi * 4294967296;
};

/**
 * Converts this long bits to a long.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long} Long
 */
LongBits.prototype.toLong = function toLong(unsigned) {
    return util.Long
        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))
        /* istanbul ignore next */
        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };
};

var charCodeAt = String.prototype.charCodeAt;

/**
 * Constructs new long bits from the specified 8 characters long hash.
 * @param {string} hash Hash
 * @returns {util.LongBits} Bits
 */
LongBits.fromHash = function fromHash(hash) {
    if (hash === zeroHash)
        return zero;
    return new LongBits(
        ( charCodeAt.call(hash, 0)
        | charCodeAt.call(hash, 1) << 8
        | charCodeAt.call(hash, 2) << 16
        | charCodeAt.call(hash, 3) << 24) >>> 0
    ,
        ( charCodeAt.call(hash, 4)
        | charCodeAt.call(hash, 5) << 8
        | charCodeAt.call(hash, 6) << 16
        | charCodeAt.call(hash, 7) << 24) >>> 0
    );
};

/**
 * Converts this long bits to a 8 characters long hash.
 * @returns {string} Hash
 */
LongBits.prototype.toHash = function toHash() {
    return String.fromCharCode(
        this.lo        & 255,
        this.lo >>> 8  & 255,
        this.lo >>> 16 & 255,
        this.lo >>> 24      ,
        this.hi        & 255,
        this.hi >>> 8  & 255,
        this.hi >>> 16 & 255,
        this.hi >>> 24
    );
};

/**
 * Zig-zag encodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzEncode = function zzEncode() {
    var mask =   this.hi >> 31;
    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;
    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;
    return this;
};

/**
 * Zig-zag decodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzDecode = function zzDecode() {
    var mask = -(this.lo & 1);
    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;
    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;
    return this;
};

/**
 * Calculates the length of this longbits when encoded as a varint.
 * @returns {number} Length
 */
LongBits.prototype.length = function length() {
    var part0 =  this.lo,
        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,
        part2 =  this.hi >>> 24;
    return part2 === 0
         ? part1 === 0
           ? part0 < 16384
             ? part0 < 128 ? 1 : 2
             : part0 < 2097152 ? 3 : 4
           : part1 < 16384
             ? part1 < 128 ? 5 : 6
             : part1 < 2097152 ? 7 : 8
         : part2 < 128 ? 9 : 10;
};


/***/ }),

/***/ "./node_modules/protobufjs/src/util/minimal.js":
/*!*****************************************************!*\
  !*** ./node_modules/protobufjs/src/util/minimal.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
var util = exports;

// used to return a Promise where callback is omitted
util.asPromise = __webpack_require__(/*! @protobufjs/aspromise */ "./node_modules/@protobufjs/aspromise/index.js");

// converts to / from base64 encoded strings
util.base64 = __webpack_require__(/*! @protobufjs/base64 */ "./node_modules/@protobufjs/base64/index.js");

// base class of rpc.Service
util.EventEmitter = __webpack_require__(/*! @protobufjs/eventemitter */ "./node_modules/@protobufjs/eventemitter/index.js");

// float handling accross browsers
util.float = __webpack_require__(/*! @protobufjs/float */ "./node_modules/@protobufjs/float/index.js");

// requires modules optionally and hides the call from bundlers
util.inquire = __webpack_require__(/*! @protobufjs/inquire */ "./node_modules/@protobufjs/inquire/index.js");

// converts to / from utf8 encoded strings
util.utf8 = __webpack_require__(/*! @protobufjs/utf8 */ "./node_modules/@protobufjs/utf8/index.js");

// provides a node-like buffer pool in the browser
util.pool = __webpack_require__(/*! @protobufjs/pool */ "./node_modules/@protobufjs/pool/index.js");

// utility to work with the low and high bits of a 64 bit value
util.LongBits = __webpack_require__(/*! ./longbits */ "./node_modules/protobufjs/src/util/longbits.js");

/**
 * Whether running within node or not.
 * @memberof util
 * @type {boolean}
 */
util.isNode = Boolean(typeof global !== "undefined"
                   && global
                   && global.process
                   && global.process.versions
                   && global.process.versions.node);

/**
 * Global object reference.
 * @memberof util
 * @type {Object}
 */
util.global = util.isNode && global
           || typeof window !== "undefined" && window
           || typeof self   !== "undefined" && self
           || this; // eslint-disable-line no-invalid-this

/**
 * An immuable empty array.
 * @memberof util
 * @type {Array.<*>}
 * @const
 */
util.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes

/**
 * An immutable empty object.
 * @type {Object}
 * @const
 */
util.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes

/**
 * Tests if the specified value is an integer.
 * @function
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is an integer
 */
util.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {
    return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
};

/**
 * Tests if the specified value is a string.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a string
 */
util.isString = function isString(value) {
    return typeof value === "string" || value instanceof String;
};

/**
 * Tests if the specified value is a non-null object.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a non-null object
 */
util.isObject = function isObject(value) {
    return value && typeof value === "object";
};

/**
 * Checks if a property on a message is considered to be present.
 * This is an alias of {@link util.isSet}.
 * @function
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isset =

/**
 * Checks if a property on a message is considered to be present.
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isSet = function isSet(obj, prop) {
    var value = obj[prop];
    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins
        return typeof value !== "object" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;
    return false;
};

/**
 * Any compatible Buffer instance.
 * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.
 * @interface Buffer
 * @extends Uint8Array
 */

/**
 * Node's Buffer class if available.
 * @type {Constructor<Buffer>}
 */
util.Buffer = (function() {
    try {
        var Buffer = util.inquire("buffer").Buffer;
        // refuse to use non-node buffers if not explicitly assigned (perf reasons):
        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;
    } catch (e) {
        /* istanbul ignore next */
        return null;
    }
})();

// Internal alias of or polyfull for Buffer.from.
util._Buffer_from = null;

// Internal alias of or polyfill for Buffer.allocUnsafe.
util._Buffer_allocUnsafe = null;

/**
 * Creates a new buffer of whatever type supported by the environment.
 * @param {number|number[]} [sizeOrArray=0] Buffer size or number array
 * @returns {Uint8Array|Buffer} Buffer
 */
util.newBuffer = function newBuffer(sizeOrArray) {
    /* istanbul ignore next */
    return typeof sizeOrArray === "number"
        ? util.Buffer
            ? util._Buffer_allocUnsafe(sizeOrArray)
            : new util.Array(sizeOrArray)
        : util.Buffer
            ? util._Buffer_from(sizeOrArray)
            : typeof Uint8Array === "undefined"
                ? sizeOrArray
                : new Uint8Array(sizeOrArray);
};

/**
 * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.
 * @type {Constructor<Uint8Array>}
 */
util.Array = typeof Uint8Array !== "undefined" ? Uint8Array /* istanbul ignore next */ : Array;

/**
 * Any compatible Long instance.
 * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.
 * @interface Long
 * @property {number} low Low bits
 * @property {number} high High bits
 * @property {boolean} unsigned Whether unsigned or not
 */

/**
 * Long.js's Long class if available.
 * @type {Constructor<Long>}
 */
util.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long
         || /* istanbul ignore next */ util.global.Long
         || util.inquire("long");

/**
 * Regular expression used to verify 2 bit (`bool`) map keys.
 * @type {RegExp}
 * @const
 */
util.key2Re = /^true|false|0|1$/;

/**
 * Regular expression used to verify 32 bit (`int32` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key32Re = /^-?(?:0|[1-9][0-9]*)$/;

/**
 * Regular expression used to verify 64 bit (`int64` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;

/**
 * Converts a number or long to an 8 characters long hash string.
 * @param {Long|number} value Value to convert
 * @returns {string} Hash
 */
util.longToHash = function longToHash(value) {
    return value
        ? util.LongBits.from(value).toHash()
        : util.LongBits.zeroHash;
};

/**
 * Converts an 8 characters long hash string to a long or number.
 * @param {string} hash Hash
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long|number} Original value
 */
util.longFromHash = function longFromHash(hash, unsigned) {
    var bits = util.LongBits.fromHash(hash);
    if (util.Long)
        return util.Long.fromBits(bits.lo, bits.hi, unsigned);
    return bits.toNumber(Boolean(unsigned));
};

/**
 * Merges the properties of the source object into the destination object.
 * @memberof util
 * @param {Object.<string,*>} dst Destination object
 * @param {Object.<string,*>} src Source object
 * @param {boolean} [ifNotSet=false] Merges only if the key is not already set
 * @returns {Object.<string,*>} Destination object
 */
function merge(dst, src, ifNotSet) { // used by converters
    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)
        if (dst[keys[i]] === undefined || !ifNotSet)
            dst[keys[i]] = src[keys[i]];
    return dst;
}

util.merge = merge;

/**
 * Converts the first character of a string to lower case.
 * @param {string} str String to convert
 * @returns {string} Converted string
 */
util.lcFirst = function lcFirst(str) {
    return str.charAt(0).toLowerCase() + str.substring(1);
};

/**
 * Creates a custom error constructor.
 * @memberof util
 * @param {string} name Error name
 * @returns {Constructor<Error>} Custom error constructor
 */
function newError(name) {

    function CustomError(message, properties) {

        if (!(this instanceof CustomError))
            return new CustomError(message, properties);

        // Error.call(this, message);
        // ^ just returns a new error instance because the ctor can be called as a function

        Object.defineProperty(this, "message", { get: function() { return message; } });

        /* istanbul ignore next */
        if (Error.captureStackTrace) // node
            Error.captureStackTrace(this, CustomError);
        else
            Object.defineProperty(this, "stack", { value: new Error().stack || "" });

        if (properties)
            merge(this, properties);
    }

    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;

    Object.defineProperty(CustomError.prototype, "name", { get: function() { return name; } });

    CustomError.prototype.toString = function toString() {
        return this.name + ": " + this.message;
    };

    return CustomError;
}

util.newError = newError;

/**
 * Constructs a new protocol error.
 * @classdesc Error subclass indicating a protocol specifc error.
 * @memberof util
 * @extends Error
 * @template T extends Message<T>
 * @constructor
 * @param {string} message Error message
 * @param {Object.<string,*>} [properties] Additional properties
 * @example
 * try {
 *     MyMessage.decode(someBuffer); // throws if required fields are missing
 * } catch (e) {
 *     if (e instanceof ProtocolError && e.instance)
 *         console.log("decoded so far: " + JSON.stringify(e.instance));
 * }
 */
util.ProtocolError = newError("ProtocolError");

/**
 * So far decoded message instance.
 * @name util.ProtocolError#instance
 * @type {Message<T>}
 */

/**
 * A OneOf getter as returned by {@link util.oneOfGetter}.
 * @typedef OneOfGetter
 * @type {function}
 * @returns {string|undefined} Set field name, if any
 */

/**
 * Builds a getter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfGetter} Unbound getter
 */
util.oneOfGetter = function getOneOf(fieldNames) {
    var fieldMap = {};
    for (var i = 0; i < fieldNames.length; ++i)
        fieldMap[fieldNames[i]] = 1;

    /**
     * @returns {string|undefined} Set field name, if any
     * @this Object
     * @ignore
     */
    return function() { // eslint-disable-line consistent-return
        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)
            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)
                return keys[i];
    };
};

/**
 * A OneOf setter as returned by {@link util.oneOfSetter}.
 * @typedef OneOfSetter
 * @type {function}
 * @param {string|undefined} value Field name
 * @returns {undefined}
 */

/**
 * Builds a setter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfSetter} Unbound setter
 */
util.oneOfSetter = function setOneOf(fieldNames) {

    /**
     * @param {string} name Field name
     * @returns {undefined}
     * @this Object
     * @ignore
     */
    return function(name) {
        for (var i = 0; i < fieldNames.length; ++i)
            if (fieldNames[i] !== name)
                delete this[fieldNames[i]];
    };
};

/**
 * Default conversion options used for {@link Message#toJSON} implementations.
 *
 * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:
 *
 * - Longs become strings
 * - Enums become string keys
 * - Bytes become base64 encoded strings
 * - (Sub-)Messages become plain objects
 * - Maps become plain objects with all string keys
 * - Repeated fields become arrays
 * - NaN and Infinity for float and double fields become strings
 *
 * @type {IConversionOptions}
 * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json
 */
util.toJSONOptions = {
    longs: String,
    enums: String,
    bytes: String,
    json: true
};

// Sets up buffer utility according to the environment (called in index-minimal)
util._configure = function() {
    var Buffer = util.Buffer;
    /* istanbul ignore if */
    if (!Buffer) {
        util._Buffer_from = util._Buffer_allocUnsafe = null;
        return;
    }
    // because node 4.x buffers are incompatible & immutable
    // see: https://github.com/dcodeIO/protobuf.js/pull/665
    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||
        /* istanbul ignore next */
        function Buffer_from(value, encoding) {
            return new Buffer(value, encoding);
        };
    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||
        /* istanbul ignore next */
        function Buffer_allocUnsafe(size) {
            return new Buffer(size);
        };
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/protobufjs/src/writer.js":
/*!***********************************************!*\
  !*** ./node_modules/protobufjs/src/writer.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Writer;

var util      = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

var BufferWriter; // cyclic

var LongBits  = util.LongBits,
    base64    = util.base64,
    utf8      = util.utf8;

/**
 * Constructs a new writer operation instance.
 * @classdesc Scheduled writer operation.
 * @constructor
 * @param {function(*, Uint8Array, number)} fn Function to call
 * @param {number} len Value byte length
 * @param {*} val Value to write
 * @ignore
 */
function Op(fn, len, val) {

    /**
     * Function to call.
     * @type {function(Uint8Array, number, *)}
     */
    this.fn = fn;

    /**
     * Value byte length.
     * @type {number}
     */
    this.len = len;

    /**
     * Next operation.
     * @type {Writer.Op|undefined}
     */
    this.next = undefined;

    /**
     * Value to write.
     * @type {*}
     */
    this.val = val; // type varies
}

/* istanbul ignore next */
function noop() {} // eslint-disable-line no-empty-function

/**
 * Constructs a new writer state instance.
 * @classdesc Copied writer state.
 * @memberof Writer
 * @constructor
 * @param {Writer} writer Writer to copy state from
 * @ignore
 */
function State(writer) {

    /**
     * Current head.
     * @type {Writer.Op}
     */
    this.head = writer.head;

    /**
     * Current tail.
     * @type {Writer.Op}
     */
    this.tail = writer.tail;

    /**
     * Current buffer length.
     * @type {number}
     */
    this.len = writer.len;

    /**
     * Next state.
     * @type {State|null}
     */
    this.next = writer.states;
}

/**
 * Constructs a new writer instance.
 * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 */
function Writer() {

    /**
     * Current length.
     * @type {number}
     */
    this.len = 0;

    /**
     * Operations head.
     * @type {Object}
     */
    this.head = new Op(noop, 0, 0);

    /**
     * Operations tail
     * @type {Object}
     */
    this.tail = this.head;

    /**
     * Linked forked states.
     * @type {Object|null}
     */
    this.states = null;

    // When a value is written, the writer calculates its byte length and puts it into a linked
    // list of operations to perform when finish() is called. This both allows us to allocate
    // buffers of the exact required size and reduces the amount of work we have to do compared
    // to first calculating over objects and then encoding over objects. In our case, the encoding
    // part is just a linked list walk calling operations with already prepared values.
}

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup() {
            return (Writer.create = function create_buffer() {
                return new BufferWriter();
            })();
        }
        /* istanbul ignore next */
        : function create_array() {
            return new Writer();
        };
};

/**
 * Creates a new writer.
 * @function
 * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}
 */
Writer.create = create();

/**
 * Allocates a buffer of the specified size.
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */
Writer.alloc = function alloc(size) {
    return new util.Array(size);
};

// Use Uint8Array buffer pool in the browser, just like node does with buffers
/* istanbul ignore else */
if (util.Array !== Array)
    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);

/**
 * Pushes a new operation to the queue.
 * @param {function(Uint8Array, number, *)} fn Function to call
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @returns {Writer} `this`
 * @private
 */
Writer.prototype._push = function push(fn, len, val) {
    this.tail = this.tail.next = new Op(fn, len, val);
    this.len += len;
    return this;
};

function writeByte(val, buf, pos) {
    buf[pos] = val & 255;
}

function writeVarint32(val, buf, pos) {
    while (val > 127) {
        buf[pos++] = val & 127 | 128;
        val >>>= 7;
    }
    buf[pos] = val;
}

/**
 * Constructs a new varint writer operation instance.
 * @classdesc Scheduled varint writer operation.
 * @extends Op
 * @constructor
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @ignore
 */
function VarintOp(len, val) {
    this.len = len;
    this.next = undefined;
    this.val = val;
}

VarintOp.prototype = Object.create(Op.prototype);
VarintOp.prototype.fn = writeVarint32;

/**
 * Writes an unsigned 32 bit value as a varint.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.uint32 = function write_uint32(value) {
    // here, the call to this.push has been inlined and a varint specific Op subclass is used.
    // uint32 is by far the most frequently used operation and benefits significantly from this.
    this.len += (this.tail = this.tail.next = new VarintOp(
        (value = value >>> 0)
                < 128       ? 1
        : value < 16384     ? 2
        : value < 2097152   ? 3
        : value < 268435456 ? 4
        :                     5,
    value)).len;
    return this;
};

/**
 * Writes a signed 32 bit value as a varint.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.int32 = function write_int32(value) {
    return value < 0
        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec
        : this.uint32(value);
};

/**
 * Writes a 32 bit value as a varint, zig-zag encoded.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sint32 = function write_sint32(value) {
    return this.uint32((value << 1 ^ value >> 31) >>> 0);
};

function writeVarint64(val, buf, pos) {
    while (val.hi) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;
        val.hi >>>= 7;
    }
    while (val.lo > 127) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = val.lo >>> 7;
    }
    buf[pos++] = val.lo;
}

/**
 * Writes an unsigned 64 bit value as a varint.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.uint64 = function write_uint64(value) {
    var bits = LongBits.from(value);
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a signed 64 bit value as a varint.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.int64 = Writer.prototype.uint64;

/**
 * Writes a signed 64 bit value as a varint, zig-zag encoded.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sint64 = function write_sint64(value) {
    var bits = LongBits.from(value).zzEncode();
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a boolish value as a varint.
 * @param {boolean} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.bool = function write_bool(value) {
    return this._push(writeByte, 1, value ? 1 : 0);
};

function writeFixed32(val, buf, pos) {
    buf[pos    ] =  val         & 255;
    buf[pos + 1] =  val >>> 8   & 255;
    buf[pos + 2] =  val >>> 16  & 255;
    buf[pos + 3] =  val >>> 24;
}

/**
 * Writes an unsigned 32 bit value as fixed 32 bits.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.fixed32 = function write_fixed32(value) {
    return this._push(writeFixed32, 4, value >>> 0);
};

/**
 * Writes a signed 32 bit value as fixed 32 bits.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sfixed32 = Writer.prototype.fixed32;

/**
 * Writes an unsigned 64 bit value as fixed 64 bits.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.fixed64 = function write_fixed64(value) {
    var bits = LongBits.from(value);
    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);
};

/**
 * Writes a signed 64 bit value as fixed 64 bits.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sfixed64 = Writer.prototype.fixed64;

/**
 * Writes a float (32 bit).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.float = function write_float(value) {
    return this._push(util.float.writeFloatLE, 4, value);
};

/**
 * Writes a double (64 bit float).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.double = function write_double(value) {
    return this._push(util.float.writeDoubleLE, 8, value);
};

var writeBytes = util.Array.prototype.set
    ? function writeBytes_set(val, buf, pos) {
        buf.set(val, pos); // also works for plain array values
    }
    /* istanbul ignore next */
    : function writeBytes_for(val, buf, pos) {
        for (var i = 0; i < val.length; ++i)
            buf[pos + i] = val[i];
    };

/**
 * Writes a sequence of bytes.
 * @param {Uint8Array|string} value Buffer or base64 encoded string to write
 * @returns {Writer} `this`
 */
Writer.prototype.bytes = function write_bytes(value) {
    var len = value.length >>> 0;
    if (!len)
        return this._push(writeByte, 1, 0);
    if (util.isString(value)) {
        var buf = Writer.alloc(len = base64.length(value));
        base64.decode(value, buf, 0);
        value = buf;
    }
    return this.uint32(len)._push(writeBytes, len, value);
};

/**
 * Writes a string.
 * @param {string} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.string = function write_string(value) {
    var len = utf8.length(value);
    return len
        ? this.uint32(len)._push(utf8.write, len, value)
        : this._push(writeByte, 1, 0);
};

/**
 * Forks this writer's state by pushing it to a stack.
 * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.
 * @returns {Writer} `this`
 */
Writer.prototype.fork = function fork() {
    this.states = new State(this);
    this.head = this.tail = new Op(noop, 0, 0);
    this.len = 0;
    return this;
};

/**
 * Resets this instance to the last state.
 * @returns {Writer} `this`
 */
Writer.prototype.reset = function reset() {
    if (this.states) {
        this.head   = this.states.head;
        this.tail   = this.states.tail;
        this.len    = this.states.len;
        this.states = this.states.next;
    } else {
        this.head = this.tail = new Op(noop, 0, 0);
        this.len  = 0;
    }
    return this;
};

/**
 * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.
 * @returns {Writer} `this`
 */
Writer.prototype.ldelim = function ldelim() {
    var head = this.head,
        tail = this.tail,
        len  = this.len;
    this.reset().uint32(len);
    if (len) {
        this.tail.next = head.next; // skip noop
        this.tail = tail;
        this.len += len;
    }
    return this;
};

/**
 * Finishes the write operation.
 * @returns {Uint8Array} Finished buffer
 */
Writer.prototype.finish = function finish() {
    var head = this.head.next, // skip noop
        buf  = this.constructor.alloc(this.len),
        pos  = 0;
    while (head) {
        head.fn(head.val, buf, pos);
        pos += head.len;
        head = head.next;
    }
    // this.head = this.tail = null;
    return buf;
};

Writer._configure = function(BufferWriter_) {
    BufferWriter = BufferWriter_;
    Writer.create = create();
    BufferWriter._configure();
};


/***/ }),

/***/ "./node_modules/protobufjs/src/writer_buffer.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/writer_buffer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferWriter;

// extends Writer
var Writer = __webpack_require__(/*! ./writer */ "./node_modules/protobufjs/src/writer.js");
(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;

var util = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs a new buffer writer instance.
 * @classdesc Wire format writer using node buffers.
 * @extends Writer
 * @constructor
 */
function BufferWriter() {
    Writer.call(this);
}

BufferWriter._configure = function () {
    /**
     * Allocates a buffer of the specified size.
     * @function
     * @param {number} size Buffer size
     * @returns {Buffer} Buffer
     */
    BufferWriter.alloc = util._Buffer_allocUnsafe;

    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === "set"
        ? function writeBytesBuffer_set(val, buf, pos) {
          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)
          // also works for plain array values
        }
        /* istanbul ignore next */
        : function writeBytesBuffer_copy(val, buf, pos) {
          if (val.copy) // Buffer values
            val.copy(buf, pos, 0, val.length);
          else for (var i = 0; i < val.length;) // plain array values
            buf[pos++] = val[i++];
        };
};


/**
 * @override
 */
BufferWriter.prototype.bytes = function write_bytes_buffer(value) {
    if (util.isString(value))
        value = util._Buffer_from(value, "base64");
    var len = value.length >>> 0;
    this.uint32(len);
    if (len)
        this._push(BufferWriter.writeBytesBuffer, len, value);
    return this;
};

function writeStringBuffer(val, buf, pos) {
    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)
        util.utf8.write(val, buf, pos);
    else if (buf.utf8Write)
        buf.utf8Write(val, pos);
    else
        buf.write(val, pos);
}

/**
 * @override
 */
BufferWriter.prototype.string = function write_string_buffer(value) {
    var len = util.Buffer.byteLength(value);
    this.uint32(len);
    if (len)
        this._push(writeStringBuffer, len, value);
    return this;
};


/**
 * Finishes the write operation.
 * @name BufferWriter#finish
 * @function
 * @returns {Buffer} Finished buffer
 */

BufferWriter._configure();


/***/ }),

/***/ "./node_modules/simplify-js/simplify.js":
/*!**********************************************!*\
  !*** ./node_modules/simplify-js/simplify.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*
 (c) 2017, Vladimir Agafonkin
 Simplify.js, a high-performance JS polyline simplification library
 mourner.github.io/simplify-js
*/

(function () { 'use strict';

// to suit your point format, run search/replace for '.x' and '.y';
// for 3D version, see 3d branch (configurability would draw significant performance overhead)

// square distance between 2 points
function getSqDist(p1, p2) {

    var dx = p1.x - p2.x,
        dy = p1.y - p2.y;

    return dx * dx + dy * dy;
}

// square distance from a point to a segment
function getSqSegDist(p, p1, p2) {

    var x = p1.x,
        y = p1.y,
        dx = p2.x - x,
        dy = p2.y - y;

    if (dx !== 0 || dy !== 0) {

        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);

        if (t > 1) {
            x = p2.x;
            y = p2.y;

        } else if (t > 0) {
            x += dx * t;
            y += dy * t;
        }
    }

    dx = p.x - x;
    dy = p.y - y;

    return dx * dx + dy * dy;
}
// rest of the code doesn't care about point format

// basic distance-based simplification
function simplifyRadialDist(points, sqTolerance) {

    var prevPoint = points[0],
        newPoints = [prevPoint],
        point;

    for (var i = 1, len = points.length; i < len; i++) {
        point = points[i];

        if (getSqDist(point, prevPoint) > sqTolerance) {
            newPoints.push(point);
            prevPoint = point;
        }
    }

    if (prevPoint !== point) newPoints.push(point);

    return newPoints;
}

function simplifyDPStep(points, first, last, sqTolerance, simplified) {
    var maxSqDist = sqTolerance,
        index;

    for (var i = first + 1; i < last; i++) {
        var sqDist = getSqSegDist(points[i], points[first], points[last]);

        if (sqDist > maxSqDist) {
            index = i;
            maxSqDist = sqDist;
        }
    }

    if (maxSqDist > sqTolerance) {
        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);
        simplified.push(points[index]);
        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);
    }
}

// simplification using Ramer-Douglas-Peucker algorithm
function simplifyDouglasPeucker(points, sqTolerance) {
    var last = points.length - 1;

    var simplified = [points[0]];
    simplifyDPStep(points, 0, last, sqTolerance, simplified);
    simplified.push(points[last]);

    return simplified;
}

// both algorithms combined for awesome performance
function simplify(points, tolerance, highestQuality) {

    if (points.length <= 2) return points;

    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;

    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);
    points = simplifyDouglasPeucker(points, sqTolerance);

    return points;
}

// export as AMD module / Node module / browser or worker variable
if (true) !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() { return simplify; }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
else {}

})();


/***/ }),

/***/ "./node_modules/spark-md5/spark-md5.js":
/*!*********************************************!*\
  !*** ./node_modules/spark-md5/spark-md5.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function (factory) {
    if (true) {
        // Node/CommonJS
        module.exports = factory();
    } else { var glob; }
}(function (undefined) {

    'use strict';

    /*
     * Fastest md5 implementation around (JKM md5).
     * Credits: Joseph Myers
     *
     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html
     * @see http://jsperf.com/md5-shootout/7
     */

    /* this function is much faster,
      so if possible we use it. Some IEs
      are the only ones I know of that
      need the idiotic second function,
      generated by an if clause.  */
    var add32 = function (a, b) {
        return (a + b) & 0xFFFFFFFF;
    },
        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];


    function cmn(q, a, b, x, s, t) {
        a = add32(add32(a, q), add32(x, t));
        return add32((a << s) | (a >>> (32 - s)), b);
    }

    function md5cycle(x, k) {
        var a = x[0],
            b = x[1],
            c = x[2],
            d = x[3];

        a += (b & c | ~b & d) + k[0] - 680876936 | 0;
        a  = (a << 7 | a >>> 25) + b | 0;
        d += (a & b | ~a & c) + k[1] - 389564586 | 0;
        d  = (d << 12 | d >>> 20) + a | 0;
        c += (d & a | ~d & b) + k[2] + 606105819 | 0;
        c  = (c << 17 | c >>> 15) + d | 0;
        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;
        b  = (b << 22 | b >>> 10) + c | 0;
        a += (b & c | ~b & d) + k[4] - 176418897 | 0;
        a  = (a << 7 | a >>> 25) + b | 0;
        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;
        d  = (d << 12 | d >>> 20) + a | 0;
        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;
        c  = (c << 17 | c >>> 15) + d | 0;
        b += (c & d | ~c & a) + k[7] - 45705983 | 0;
        b  = (b << 22 | b >>> 10) + c | 0;
        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;
        a  = (a << 7 | a >>> 25) + b | 0;
        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;
        d  = (d << 12 | d >>> 20) + a | 0;
        c += (d & a | ~d & b) + k[10] - 42063 | 0;
        c  = (c << 17 | c >>> 15) + d | 0;
        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;
        b  = (b << 22 | b >>> 10) + c | 0;
        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;
        a  = (a << 7 | a >>> 25) + b | 0;
        d += (a & b | ~a & c) + k[13] - 40341101 | 0;
        d  = (d << 12 | d >>> 20) + a | 0;
        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;
        c  = (c << 17 | c >>> 15) + d | 0;
        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;
        b  = (b << 22 | b >>> 10) + c | 0;

        a += (b & d | c & ~d) + k[1] - 165796510 | 0;
        a  = (a << 5 | a >>> 27) + b | 0;
        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;
        d  = (d << 9 | d >>> 23) + a | 0;
        c += (d & b | a & ~b) + k[11] + 643717713 | 0;
        c  = (c << 14 | c >>> 18) + d | 0;
        b += (c & a | d & ~a) + k[0] - 373897302 | 0;
        b  = (b << 20 | b >>> 12) + c | 0;
        a += (b & d | c & ~d) + k[5] - 701558691 | 0;
        a  = (a << 5 | a >>> 27) + b | 0;
        d += (a & c | b & ~c) + k[10] + 38016083 | 0;
        d  = (d << 9 | d >>> 23) + a | 0;
        c += (d & b | a & ~b) + k[15] - 660478335 | 0;
        c  = (c << 14 | c >>> 18) + d | 0;
        b += (c & a | d & ~a) + k[4] - 405537848 | 0;
        b  = (b << 20 | b >>> 12) + c | 0;
        a += (b & d | c & ~d) + k[9] + 568446438 | 0;
        a  = (a << 5 | a >>> 27) + b | 0;
        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;
        d  = (d << 9 | d >>> 23) + a | 0;
        c += (d & b | a & ~b) + k[3] - 187363961 | 0;
        c  = (c << 14 | c >>> 18) + d | 0;
        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;
        b  = (b << 20 | b >>> 12) + c | 0;
        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;
        a  = (a << 5 | a >>> 27) + b | 0;
        d += (a & c | b & ~c) + k[2] - 51403784 | 0;
        d  = (d << 9 | d >>> 23) + a | 0;
        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;
        c  = (c << 14 | c >>> 18) + d | 0;
        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;
        b  = (b << 20 | b >>> 12) + c | 0;

        a += (b ^ c ^ d) + k[5] - 378558 | 0;
        a  = (a << 4 | a >>> 28) + b | 0;
        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;
        d  = (d << 11 | d >>> 21) + a | 0;
        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;
        c  = (c << 16 | c >>> 16) + d | 0;
        b += (c ^ d ^ a) + k[14] - 35309556 | 0;
        b  = (b << 23 | b >>> 9) + c | 0;
        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;
        a  = (a << 4 | a >>> 28) + b | 0;
        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;
        d  = (d << 11 | d >>> 21) + a | 0;
        c += (d ^ a ^ b) + k[7] - 155497632 | 0;
        c  = (c << 16 | c >>> 16) + d | 0;
        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;
        b  = (b << 23 | b >>> 9) + c | 0;
        a += (b ^ c ^ d) + k[13] + 681279174 | 0;
        a  = (a << 4 | a >>> 28) + b | 0;
        d += (a ^ b ^ c) + k[0] - 358537222 | 0;
        d  = (d << 11 | d >>> 21) + a | 0;
        c += (d ^ a ^ b) + k[3] - 722521979 | 0;
        c  = (c << 16 | c >>> 16) + d | 0;
        b += (c ^ d ^ a) + k[6] + 76029189 | 0;
        b  = (b << 23 | b >>> 9) + c | 0;
        a += (b ^ c ^ d) + k[9] - 640364487 | 0;
        a  = (a << 4 | a >>> 28) + b | 0;
        d += (a ^ b ^ c) + k[12] - 421815835 | 0;
        d  = (d << 11 | d >>> 21) + a | 0;
        c += (d ^ a ^ b) + k[15] + 530742520 | 0;
        c  = (c << 16 | c >>> 16) + d | 0;
        b += (c ^ d ^ a) + k[2] - 995338651 | 0;
        b  = (b << 23 | b >>> 9) + c | 0;

        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;
        a  = (a << 6 | a >>> 26) + b | 0;
        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;
        d  = (d << 10 | d >>> 22) + a | 0;
        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;
        c  = (c << 15 | c >>> 17) + d | 0;
        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;
        b  = (b << 21 |b >>> 11) + c | 0;
        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;
        a  = (a << 6 | a >>> 26) + b | 0;
        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;
        d  = (d << 10 | d >>> 22) + a | 0;
        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;
        c  = (c << 15 | c >>> 17) + d | 0;
        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;
        b  = (b << 21 |b >>> 11) + c | 0;
        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;
        a  = (a << 6 | a >>> 26) + b | 0;
        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;
        d  = (d << 10 | d >>> 22) + a | 0;
        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;
        c  = (c << 15 | c >>> 17) + d | 0;
        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;
        b  = (b << 21 |b >>> 11) + c | 0;
        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;
        a  = (a << 6 | a >>> 26) + b | 0;
        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;
        d  = (d << 10 | d >>> 22) + a | 0;
        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;
        c  = (c << 15 | c >>> 17) + d | 0;
        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;
        b  = (b << 21 | b >>> 11) + c | 0;

        x[0] = a + x[0] | 0;
        x[1] = b + x[1] | 0;
        x[2] = c + x[2] | 0;
        x[3] = d + x[3] | 0;
    }

    function md5blk(s) {
        var md5blks = [],
            i; /* Andy King said do it this way. */

        for (i = 0; i < 64; i += 4) {
            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);
        }
        return md5blks;
    }

    function md5blk_array(a) {
        var md5blks = [],
            i; /* Andy King said do it this way. */

        for (i = 0; i < 64; i += 4) {
            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);
        }
        return md5blks;
    }

    function md51(s) {
        var n = s.length,
            state = [1732584193, -271733879, -1732584194, 271733878],
            i,
            length,
            tail,
            tmp,
            lo,
            hi;

        for (i = 64; i <= n; i += 64) {
            md5cycle(state, md5blk(s.substring(i - 64, i)));
        }
        s = s.substring(i - 64);
        length = s.length;
        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (i = 0; i < length; i += 1) {
            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);
        }
        tail[i >> 2] |= 0x80 << ((i % 4) << 3);
        if (i > 55) {
            md5cycle(state, tail);
            for (i = 0; i < 16; i += 1) {
                tail[i] = 0;
            }
        }

        // Beware that the final length might not fit in 32 bits so we take care of that
        tmp = n * 8;
        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
        lo = parseInt(tmp[2], 16);
        hi = parseInt(tmp[1], 16) || 0;

        tail[14] = lo;
        tail[15] = hi;

        md5cycle(state, tail);
        return state;
    }

    function md51_array(a) {
        var n = a.length,
            state = [1732584193, -271733879, -1732584194, 271733878],
            i,
            length,
            tail,
            tmp,
            lo,
            hi;

        for (i = 64; i <= n; i += 64) {
            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));
        }

        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1
        // containing the last element of the parent array if the sub array specified starts
        // beyond the length of the parent array - weird.
        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue
        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);

        length = a.length;
        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (i = 0; i < length; i += 1) {
            tail[i >> 2] |= a[i] << ((i % 4) << 3);
        }

        tail[i >> 2] |= 0x80 << ((i % 4) << 3);
        if (i > 55) {
            md5cycle(state, tail);
            for (i = 0; i < 16; i += 1) {
                tail[i] = 0;
            }
        }

        // Beware that the final length might not fit in 32 bits so we take care of that
        tmp = n * 8;
        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
        lo = parseInt(tmp[2], 16);
        hi = parseInt(tmp[1], 16) || 0;

        tail[14] = lo;
        tail[15] = hi;

        md5cycle(state, tail);

        return state;
    }

    function rhex(n) {
        var s = '',
            j;
        for (j = 0; j < 4; j += 1) {
            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];
        }
        return s;
    }

    function hex(x) {
        var i;
        for (i = 0; i < x.length; i += 1) {
            x[i] = rhex(x[i]);
        }
        return x.join('');
    }

    // In some cases the fast add32 function cannot be used..
    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {
        add32 = function (x, y) {
            var lsw = (x & 0xFFFF) + (y & 0xFFFF),
                msw = (x >> 16) + (y >> 16) + (lsw >> 16);
            return (msw << 16) | (lsw & 0xFFFF);
        };
    }

    // ---------------------------------------------------

    /**
     * ArrayBuffer slice polyfill.
     *
     * @see https://github.com/ttaubert/node-arraybuffer-slice
     */

    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {
        (function () {
            function clamp(val, length) {
                val = (val | 0) || 0;

                if (val < 0) {
                    return Math.max(val + length, 0);
                }

                return Math.min(val, length);
            }

            ArrayBuffer.prototype.slice = function (from, to) {
                var length = this.byteLength,
                    begin = clamp(from, length),
                    end = length,
                    num,
                    target,
                    targetArray,
                    sourceArray;

                if (to !== undefined) {
                    end = clamp(to, length);
                }

                if (begin > end) {
                    return new ArrayBuffer(0);
                }

                num = end - begin;
                target = new ArrayBuffer(num);
                targetArray = new Uint8Array(target);

                sourceArray = new Uint8Array(this, begin, num);
                targetArray.set(sourceArray);

                return target;
            };
        })();
    }

    // ---------------------------------------------------

    /**
     * Helpers.
     */

    function toUtf8(str) {
        if (/[\u0080-\uFFFF]/.test(str)) {
            str = unescape(encodeURIComponent(str));
        }

        return str;
    }

    function utf8Str2ArrayBuffer(str, returnUInt8Array) {
        var length = str.length,
           buff = new ArrayBuffer(length),
           arr = new Uint8Array(buff),
           i;

        for (i = 0; i < length; i += 1) {
            arr[i] = str.charCodeAt(i);
        }

        return returnUInt8Array ? arr : buff;
    }

    function arrayBuffer2Utf8Str(buff) {
        return String.fromCharCode.apply(null, new Uint8Array(buff));
    }

    function concatenateArrayBuffers(first, second, returnUInt8Array) {
        var result = new Uint8Array(first.byteLength + second.byteLength);

        result.set(new Uint8Array(first));
        result.set(new Uint8Array(second), first.byteLength);

        return returnUInt8Array ? result : result.buffer;
    }

    function hexToBinaryString(hex) {
        var bytes = [],
            length = hex.length,
            x;

        for (x = 0; x < length - 1; x += 2) {
            bytes.push(parseInt(hex.substr(x, 2), 16));
        }

        return String.fromCharCode.apply(String, bytes);
    }

    // ---------------------------------------------------

    /**
     * SparkMD5 OOP implementation.
     *
     * Use this class to perform an incremental md5, otherwise use the
     * static methods instead.
     */

    function SparkMD5() {
        // call reset to init the instance
        this.reset();
    }

    /**
     * Appends a string.
     * A conversion will be applied if an utf8 string is detected.
     *
     * @param {String} str The string to be appended
     *
     * @return {SparkMD5} The instance itself
     */
    SparkMD5.prototype.append = function (str) {
        // Converts the string to utf8 bytes if necessary
        // Then append as binary
        this.appendBinary(toUtf8(str));

        return this;
    };

    /**
     * Appends a binary string.
     *
     * @param {String} contents The binary string to be appended
     *
     * @return {SparkMD5} The instance itself
     */
    SparkMD5.prototype.appendBinary = function (contents) {
        this._buff += contents;
        this._length += contents.length;

        var length = this._buff.length,
            i;

        for (i = 64; i <= length; i += 64) {
            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));
        }

        this._buff = this._buff.substring(i - 64);

        return this;
    };

    /**
     * Finishes the incremental computation, reseting the internal state and
     * returning the result.
     *
     * @param {Boolean} raw True to get the raw string, false to get the hex string
     *
     * @return {String} The result
     */
    SparkMD5.prototype.end = function (raw) {
        var buff = this._buff,
            length = buff.length,
            i,
            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            ret;

        for (i = 0; i < length; i += 1) {
            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);
        }

        this._finish(tail, length);
        ret = hex(this._hash);

        if (raw) {
            ret = hexToBinaryString(ret);
        }

        this.reset();

        return ret;
    };

    /**
     * Resets the internal state of the computation.
     *
     * @return {SparkMD5} The instance itself
     */
    SparkMD5.prototype.reset = function () {
        this._buff = '';
        this._length = 0;
        this._hash = [1732584193, -271733879, -1732584194, 271733878];

        return this;
    };

    /**
     * Gets the internal state of the computation.
     *
     * @return {Object} The state
     */
    SparkMD5.prototype.getState = function () {
        return {
            buff: this._buff,
            length: this._length,
            hash: this._hash.slice()
        };
    };

    /**
     * Gets the internal state of the computation.
     *
     * @param {Object} state The state
     *
     * @return {SparkMD5} The instance itself
     */
    SparkMD5.prototype.setState = function (state) {
        this._buff = state.buff;
        this._length = state.length;
        this._hash = state.hash;

        return this;
    };

    /**
     * Releases memory used by the incremental buffer and other additional
     * resources. If you plan to use the instance again, use reset instead.
     */
    SparkMD5.prototype.destroy = function () {
        delete this._hash;
        delete this._buff;
        delete this._length;
    };

    /**
     * Finish the final calculation based on the tail.
     *
     * @param {Array}  tail   The tail (will be modified)
     * @param {Number} length The length of the remaining buffer
     */
    SparkMD5.prototype._finish = function (tail, length) {
        var i = length,
            tmp,
            lo,
            hi;

        tail[i >> 2] |= 0x80 << ((i % 4) << 3);
        if (i > 55) {
            md5cycle(this._hash, tail);
            for (i = 0; i < 16; i += 1) {
                tail[i] = 0;
            }
        }

        // Do the final computation based on the tail and length
        // Beware that the final length may not fit in 32 bits so we take care of that
        tmp = this._length * 8;
        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
        lo = parseInt(tmp[2], 16);
        hi = parseInt(tmp[1], 16) || 0;

        tail[14] = lo;
        tail[15] = hi;
        md5cycle(this._hash, tail);
    };

    /**
     * Performs the md5 hash on a string.
     * A conversion will be applied if utf8 string is detected.
     *
     * @param {String}  str The string
     * @param {Boolean} [raw] True to get the raw string, false to get the hex string
     *
     * @return {String} The result
     */
    SparkMD5.hash = function (str, raw) {
        // Converts the string to utf8 bytes if necessary
        // Then compute it using the binary function
        return SparkMD5.hashBinary(toUtf8(str), raw);
    };

    /**
     * Performs the md5 hash on a binary string.
     *
     * @param {String}  content The binary string
     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string
     *
     * @return {String} The result
     */
    SparkMD5.hashBinary = function (content, raw) {
        var hash = md51(content),
            ret = hex(hash);

        return raw ? hexToBinaryString(ret) : ret;
    };

    // ---------------------------------------------------

    /**
     * SparkMD5 OOP implementation for array buffers.
     *
     * Use this class to perform an incremental md5 ONLY for array buffers.
     */
    SparkMD5.ArrayBuffer = function () {
        // call reset to init the instance
        this.reset();
    };

    /**
     * Appends an array buffer.
     *
     * @param {ArrayBuffer} arr The array to be appended
     *
     * @return {SparkMD5.ArrayBuffer} The instance itself
     */
    SparkMD5.ArrayBuffer.prototype.append = function (arr) {
        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),
            length = buff.length,
            i;

        this._length += arr.byteLength;

        for (i = 64; i <= length; i += 64) {
            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));
        }

        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);

        return this;
    };

    /**
     * Finishes the incremental computation, reseting the internal state and
     * returning the result.
     *
     * @param {Boolean} raw True to get the raw string, false to get the hex string
     *
     * @return {String} The result
     */
    SparkMD5.ArrayBuffer.prototype.end = function (raw) {
        var buff = this._buff,
            length = buff.length,
            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            i,
            ret;

        for (i = 0; i < length; i += 1) {
            tail[i >> 2] |= buff[i] << ((i % 4) << 3);
        }

        this._finish(tail, length);
        ret = hex(this._hash);

        if (raw) {
            ret = hexToBinaryString(ret);
        }

        this.reset();

        return ret;
    };

    /**
     * Resets the internal state of the computation.
     *
     * @return {SparkMD5.ArrayBuffer} The instance itself
     */
    SparkMD5.ArrayBuffer.prototype.reset = function () {
        this._buff = new Uint8Array(0);
        this._length = 0;
        this._hash = [1732584193, -271733879, -1732584194, 271733878];

        return this;
    };

    /**
     * Gets the internal state of the computation.
     *
     * @return {Object} The state
     */
    SparkMD5.ArrayBuffer.prototype.getState = function () {
        var state = SparkMD5.prototype.getState.call(this);

        // Convert buffer to a string
        state.buff = arrayBuffer2Utf8Str(state.buff);

        return state;
    };

    /**
     * Gets the internal state of the computation.
     *
     * @param {Object} state The state
     *
     * @return {SparkMD5.ArrayBuffer} The instance itself
     */
    SparkMD5.ArrayBuffer.prototype.setState = function (state) {
        // Convert string to buffer
        state.buff = utf8Str2ArrayBuffer(state.buff, true);

        return SparkMD5.prototype.setState.call(this, state);
    };

    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;

    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;

    /**
     * Performs the md5 hash on an array buffer.
     *
     * @param {ArrayBuffer} arr The array buffer
     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one
     *
     * @return {String} The result
     */
    SparkMD5.ArrayBuffer.hash = function (arr, raw) {
        var hash = md51_array(new Uint8Array(arr)),
            ret = hex(hash);

        return raw ? hexToBinaryString(ret) : ret;
    };

    return SparkMD5;
}));


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/index.js ***!
  \*****************************************************/
/*! exports provided: v1, v3, v4, v5, NIL, version, validate, stringify, parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v1.js */ "./node_modules/uuid/dist/esm-browser/v1.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v1", function() { return _v1_js__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _v3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./v3.js */ "./node_modules/uuid/dist/esm-browser/v3.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v3", function() { return _v3_js__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _v4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./v4.js */ "./node_modules/uuid/dist/esm-browser/v4.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v4", function() { return _v4_js__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _v5_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./v5.js */ "./node_modules/uuid/dist/esm-browser/v5.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v5", function() { return _v5_js__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _nil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nil.js */ "./node_modules/uuid/dist/esm-browser/nil.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NIL", function() { return _nil_js__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./version.js */ "./node_modules/uuid/dist/esm-browser/version.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "version", function() { return _version_js__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "validate", function() { return _validate_js__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringify", function() { return _stringify_js__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/esm-browser/parse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return _parse_js__WEBPACK_IMPORTED_MODULE_8__["default"]; });











/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/md5.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/md5.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (var i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  var output = [];
  var length32 = input.length * 32;
  var hexTab = '0123456789abcdef';

  for (var i = 0; i < length32; i += 8) {
    var x = input[i >> 5] >>> i % 32 & 0xff;
    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  var length8 = input.length * 8;
  var output = new Uint32Array(getOutputLength(length8));

  for (var i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  var lsw = (x & 0xffff) + (y & 0xffff);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

/* harmony default export */ __webpack_exports__["default"] = (md5);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/nil.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/nil.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ('00000000-0000-0000-0000-000000000000');

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/parse.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/parse.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");


function parse(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  var v;
  var arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

/* harmony default export */ __webpack_exports__["default"] = (parse);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return rng; });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,
    // find the complete implementation of crypto (msCrypto) on IE11.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/sha1.js":
/*!****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/sha1.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (var i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  var l = bytes.length / 4 + 2;
  var N = Math.ceil(l / 16);
  var M = new Array(N);

  for (var _i = 0; _i < N; ++_i) {
    var arr = new Uint32Array(16);

    for (var j = 0; j < 16; ++j) {
      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];
    }

    M[_i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (var _i2 = 0; _i2 < N; ++_i2) {
    var W = new Uint32Array(80);

    for (var t = 0; t < 16; ++t) {
      W[t] = M[_i2][t];
    }

    for (var _t = 16; _t < 80; ++_t) {
      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);
    }

    var a = H[0];
    var b = H[1];
    var c = H[2];
    var d = H[3];
    var e = H[4];

    for (var _t2 = 0; _t2 < 80; ++_t2) {
      var s = Math.floor(_t2 / 20);
      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

/* harmony default export */ __webpack_exports__["default"] = (sha1);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

var byteToHex = [];

for (var i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).substr(1));
}

function stringify(arr) {
  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ __webpack_exports__["default"] = (stringify);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v1.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v1.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");

 // **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html

var _nodeId;

var _clockseq; // Previous uuid creation time


var _lastMSecs = 0;
var _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || new Array(16);
  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    var seedBytes = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(b);
}

/* harmony default export */ __webpack_exports__["default"] = (v1);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v3.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v3.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _md5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./md5.js */ "./node_modules/uuid/dist/esm-browser/md5.js");


var v3 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v3', 0x30, _md5_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v3);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v35.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v35.js ***!
  \***************************************************/
/*! exports provided: DNS, URL, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DNS", function() { return DNS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "URL", function() { return URL; });
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/esm-browser/parse.js");



function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  var bytes = [];

  for (var i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
/* harmony default export */ __webpack_exports__["default"] = (function (name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = Object(_parse_js__WEBPACK_IMPORTED_MODULE_1__["default"])(namespace);
    }

    if (namespace.length !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    var bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (var i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_0__["default"])(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
});

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");



function v4(options, buf, offset) {
  options = options || {};
  var rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(rnds);
}

/* harmony default export */ __webpack_exports__["default"] = (v4);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v5.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v5.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sha1.js */ "./node_modules/uuid/dist/esm-browser/sha1.js");


var v5 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v5);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "./node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ __webpack_exports__["default"] = (validate);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/version.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/version.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");


function version(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.substr(14, 1), 16);
}

/* harmony default export */ __webpack_exports__["default"] = (version);

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/zego-logger/ZegoLogger.js":
/*!************************************************!*\
  !*** ./node_modules/zego-logger/ZegoLogger.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(e,t){if(true)module.exports=t(__webpack_require__(/*! localforage */ "./node_modules/localforage/dist/localforage.js"),__webpack_require__(/*! jszip */ "./node_modules/jszip/dist/jszip.min.js"));else { var o, n; }}("undefined"!=typeof self?self:this,(function(e,t){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.getSeq=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,function(e){e[e.IE=0]="IE",e[e.FIREFOX=1]="FIREFOX",e[e.CHROME=2]="CHROME",e[e.SAFARI=3]="SAFARI",e[e.OPERA=4]="OPERA",e[e.WEIXIN=5]="WEIXIN",e[e.WEIXINMINI=6]="WEIXINMINI",e[e.UNKOWN=7]="UNKOWN"}(t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={})),function(e){e[e.BROWSER=0]="BROWSER",e[e.WEIXINMINI=1]="WEIXINMINI"}(t.ZEGO_ENV||(t.ZEGO_ENV={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.HTTPS=2]="HTTPS"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},t.getSeq=(o=1,function(){return o++}),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0;var o=n(2);Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return o.ZegoLogger}})},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0;var l=n(3),u=n(0),c=n(4),f=n(5),h=n(6),p=n(9),d=n(10),g=function(){function e(e,t,n){this.env=e,this.product=t,this.logLevel=u.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.isDebug=!0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.tempBuffer=[],this.isUserIDExist=!1,this.uploadURL="http://106.14.207.58:8011/zglog/zip",this.uploading=!1,this.postFailCount=0,this.basePath="",this.filePath="",this.curFile=0,this.limitKeys={},this.limitMs=500,this.stateCenter=f.LoggerStateCenter.getInstance(),this.init(n)}return e.prototype.init=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return this.env%2==0?(this.fileConfig=o(o({},c.WebFileConfig),e),this.storeHandler=new h.ZegoStoreHandler(this.product,this.fileConfig),this.storeHandler.setDataDroped((function(){t.headerInfo&&t.dumpData(t.headerInfo)}))):(this.fileConfig=o(o({},c.WechatFileConfig),e),this.basePath=wx.env.USER_DATA_PATH+"/logger",this.fileHandler=new p.ZegoFileHandler(this.product,this.fileConfig,(function(){t.bufferDump()}))),[2]}))}))},e.prototype.setLogLevel=function(e){var t=u.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logLevel=t,!0)},e.prototype.setRemoteLogLevel=function(e){var t=u.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logRemoteLevel=t,!0)},e.prototype.setDebugVerbose=function(e){this.stateCenter.debug=e},e.prototype.setHeaderInfo=function(e){this.headerInfo=e,(this.env%2!=0||this.commonField&&"string"==typeof this.commonField.get("userID"))&&(this.env%2!=1||!this.fileHandler||this.fileHandler.inited)?this.dumpData(e):this.tempBuffer.push(e)},e.prototype.setLimitConfig=function(e){this.limitMs=e},e.prototype.setCommonField=function(e){return"[object Map]"!==Object.prototype.toString.call(e)?(console.error("commonField must be Map"),!1):null==e.get("userID")||"string"!=typeof e.get("userID")||""===e.get("userID")?(console.error("commonField userID required and must be string"),!1):(this.commonField=e,this.bufferDump(),this.isUserIDExist=!0,!0)},e.prototype.write=function(e,t,n,o){var r=u.ENUM_LOG_LEVEL[t];if(void 0===r)return!1;var i=this.logParams(e,t,n,o);if(this.logLevel!==u.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r)switch(t){case"debug":case"report":console.debug(i);break;case"info":console.info(i);break;case"warn":console.warn(i);break;case"error":this.logError(i,o)}if(this.logRemoteLevel!==u.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=r){if(this.uploading)return this.tempBuffer.push(i),!0;if(this.env%2==0&&(!this.commonField||"string"!=typeof this.commonField.get("userID")))return this.tempBuffer.push(i),!0;if(this.env%2==1&&this.fileHandler&&!this.fileHandler.inited)return this.tempBuffer.push(i),!0;this.dumpData(i)}return!0},e.prototype.writeLimit=function(e,t,n,o,r){return this.limitKeys[e]?(new Date).getTime()-this.limitKeys[e]>this.limitMs&&(this.limitKeys[e]=(new Date).getTime(),this.write(t,n,o,r)):(this.limitKeys[e]=(new Date).getTime(),this.write(t,n,o,r))},e.prototype.upload=function(e){var t=this;return this.uploading=!0,this.setUploadState(!0),new Promise((function(n,o){e.uploadURL||(console.error("uploadURL required"),t.setUploadState(!1),o({code:1001})),t.env%2!=0||t.isUserIDExist||(console.error("not setCommonFiled"),t.setUploadState(!1),o({code:1001})),t.env%2==0?t.uploadWeb(e).then((function(e){t.setUploadState(!1),n(e)})).catch((function(e){t.setUploadState(!1),o(e)})):t.uploadWechatMini(e).then((function(e){t.setUploadState(!1),n(e)})).catch((function(e){t.setUploadState(!1),o(e)}))}))},e.prototype.setConfig=function(e){this.fileConfig=o(o({},this.fileConfig),e),this.storeHandler.setFileConfig(this.fileConfig)},e.prototype.supportDrivers=function(){return this.storeHandler.supportDrivers()},e.prototype.setUploadState=function(e){this.env%2==0?this.storeHandler.setUploadState(e):wx.setStorageSync("uploading",!0)},e.prototype.getUploadState=function(){if(this.env%2==0)return this.storeHandler.getUploadState();try{return wx.getStorageSync("uploading")}catch(e){return!1}},e.prototype.uploadWeb=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return[2,new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t,s,a,l=this;return i(this,(function(u){switch(u.label){case 0:return[4,this.readData()];case 1:return null!==(t=u.sent())?(s=(new Date).getTime()+"",(a=new FormData).append("logs",t),a.append("id_name",e.userID),a.append("appid",e.appID),a.append("timestamp",s),a.append("token",e.token),a.append("deviceid",e.deviceID||""),a.append("product",e.product),a.append("req_sdk","1"),this.postFile(e.uploadURL||this.uploadURL,a).then((function(){return r(l,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return console.log("upload suc"),[4,this.storeHandler.clearStore()];case 1:return e.sent(),this.bufferDump(),this.uploading=!1,n({code:0}),[2]}}))}))})).catch((function(e){console.error("upload fail",e),l.uploading=!1,o({code:e.code})}))):console.error("read file fail"),[2]}}))}))}))]}))}))},e.prototype.postFile=function(e,t){var n=this;return new Promise((function(o,r){d.postFile(e,t).then((function(e){console.log("post file suc"),o()})).catch((function(o){console.error("post file fail"),n.postFailCount++,4==o.code&&n.postFailCount<3?n.postFile(e,t):r(o)}))}))},e.prototype.bufferDump=function(){var e,t,n=this.tempBuffer.shift();if(n){var o="";if(this.env%2==0&&this.commonField&&"string"==typeof this.commonField.get("userID")&&""!==this.commonField.get("userID")){var r=n.indexOf("]:");if(-1==r)o=n;else{var i="";try{for(var l=s(this.commonField),u=l.next();!u.done;u=l.next()){var c=a(u.value,2);c[0];i+="["+c[1]+"]"}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}o=n.slice(0,r+2)+i+n.slice(r+2)}}else this.env%2==1&&(o=n);this.dumpData(o),this.bufferDump()}},e.prototype.uploadWechatMini=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return[2,new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t,s,a,l=this;return i(this,(function(u){switch(u.label){case 0:t=function(t){var a;return i(this,(function(u){switch(u.label){case 0:return a=s.basePath+"/"+e.product+t+".txt",[4,s.fileHandler.accessFile(a)];case 1:return u.sent()>0&&s.uploadFileWechat(e.uploadURL||s.uploadURL,a,e).then((function(){return r(l,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return console.log("upload suc"),[4,this.fileHandler.delFile(a)];case 1:return e.sent(),[4,this.fileHandler.accessFile(a)];case 2:return e.sent(),this.bufferDump(),this.uploading=!1,n({code:0}),[2]}}))}))})).catch((function(e){console.error("upload fail",e),l.uploading=!1,o({code:e.code})})),[2]}}))},s=this,a=0,u.label=1;case 1:return a<this.fileConfig.maxFiles?[5,t(a)]:[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))}))]}))}))},e.prototype.uploadFileWechat=function(e,t,n){var o=this;return new Promise((function(r,i){d.postFileWechat(e,t,n).then((function(e){console.log("upload suc"),r()})).catch((function(r){console.error("upload fail"),o.postFailCount++,4==r.code&&o.postFailCount<3?o.uploadFileWechat(e,t,n):i(r)}))}))},e.prototype.dumpData=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return this.env%2==0?this.writeDataStorage(e):this.writeFileWechat(e),[2]}))}))},e.prototype.readData=function(){return this.storeHandler.readData()},e.prototype.writeDataStorage=function(e){this.storeHandler.storeData(e)},e.prototype.writeFileWechat=function(e){this.fileHandler.storeData(e)},e.prototype.logParams=function(e,t,n,o){var r,i,u,c=l.getCurrentTime(),f=t.substr(0,1).toUpperCase(),h="";if(this.env%2==0&&this.commonField){var p="";try{for(var d=s(this.commonField),g=d.next();!g.done;g=d.next()){var v=a(g.value,2);v[0];p+="["+v[1]+"]"}}catch(e){r={error:e}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}h=p}var m="";e.forEach((function(e){m+="["+e+"]"}));var y="";return"function"==typeof(null===(u=null===window||void 0===window?void 0:window.performance)||void 0===u?void 0:u.now)&&(y="["+window.performance.now().toFixed(1)+"]"),"["+c+"]"+y+"["+f+"]["+n+"]"+m+":"+h+o},e.prototype.logError=function(e,t){console.error(e),this.env%2==0?this.stateCenter.debug&&window.alert(t):this.stateCenter.debug&&wx.showModal({title:"",content:t})},e}();t.ZegoLogger=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var o=n(0);t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),a=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?o.ZEGO_BROWSER_TYPE.IE:n?o.ZEGO_BROWSER_TYPE.FIREFOX:r?o.ZEGO_BROWSER_TYPE.OPERA:i?o.ZEGO_BROWSER_TYPE.CHROME:s?o.ZEGO_BROWSER_TYPE.SAFARI:a?o.ZEGO_BROWSER_TYPE.WEIXIN:o.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(o.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))};var r=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[r[e.getMonth()+1]||e.getMonth()+1,(r[e.getDate()]||e.getDate())+" ",(r[e.getHours()]||e.getHours())+":",(r[e.getMinutes()]||e.getMinutes())+":",r[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WechatFileConfig=t.WebFileConfig=void 0,t.WebFileConfig={maxSize:5242880,maxFiles:3,dropPer:1},t.WechatFileConfig={maxSize:2097152,maxFiles:3,dropPer:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0;var o=function(){function e(){this._testEnvironment=!0,this._ENV=0,this._debug=!1}return e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.init()),e.instance},e.prototype.init=function(){},Object.defineProperty(e.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),e.instance=new e,e}();t.LoggerStateCenter=o},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0;var s=n(7),a=n(0),l=i(n(8)),u=function(){function e(e,t){this.product=e,this.fileConfig=t,this.storeBuffer=[],this.droping=!1,this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return r(this,(function(o){switch(o.label){case 0:this.storeCommon=s.createInstance({name:"logger_common"}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.storeCommon.getItem(this.product+"_logger")];case 2:return e=o.sent(),this.storeSize=e||0,[3,4];case 3:return t=o.sent(),console.error("get storeSize err ",t),[3,4];case 4:return this.store=s.createInstance({name:this.product+"_logger"}),this.storeBuffer.length>0&&this.storeBuffer.forEach((function(e){n.storeData(e)})),[2]}}))}))},e.prototype.setFileConfig=function(e){this.fileConfig=e},e.prototype.supportDrivers=function(){var e=s.supports(s.INDEXEDDB),t=s.supports(s.WEBSQL),n=s.supports(s.LOCALSTORAGE);return console.warn(e,t,n),{IndexedDB:e,webSQL:t,localStorage:n}},e.prototype.setDataDroped=function(e){this.dataDropCallback=e},e.prototype.storeData=function(e){return o(this,void 0,void 0,(function(){var t,n,o;return r(this,(function(r){switch(r.label){case 0:if(!e)return console.warn("storeData logInfo null"),[2,Promise.resolve()];if(!this.store)return this.storeBuffer.push(e),[2,Promise.resolve()];t=(new Date).getTime(),n=t+"_"+a.getSeq(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.store.setItem(n,e)];case 2:return r.sent(),this.storeSize+=e.length+1,this.refreshStoreSize(),this.storeSize>=this.fileConfig.maxSize*this.fileConfig.maxFiles&&!this.droping&&(console.warn("log is max"),this.dropData()),[3,4];case 3:return o=r.sent(),console.error("storeData fail ",o),[3,4];case 4:return[2]}}))}))},e.prototype.readData=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,i,s,a,u=this;return r(this,(function(r){switch(r.label){case 0:e=new l.default,t=e.folder("log"),n="",o=0,i=0;try{console.error("store",this.store),this.store.iterate((function(e,r,s){console.log([r,e]),n+=e+"\n",(o+=e.length+1)>u.fileConfig.maxSize&&(i++,n="",o=0),console.error(t),t&&t.file(""+u.product+i+".txt",n)})).then((function(){console.log("Iteration has completed")})).catch((function(e){console.log("出错",e)}))}catch(e){console.error("iterate data fail ",e)}r.label=1;case 1:return r.trys.push([1,3,,4]),console.error("generateAsync"),[4,e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}})];case 2:return s=r.sent(),console.log("generateAsync",s),[2,new Blob([s])];case 3:return a=r.sent(),console.error("zip file fail",a),[2,null];case 4:return[2]}}))}))},e.prototype.clearStore=function(){return o(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.store.clear()];case 1:return t.sent(),this.storeSize=0,this.refreshStoreSize(),[3,3];case 2:return e=t.sent(),console.error("clear store fail",e),[3,3];case 3:return[2]}}))}))},e.prototype.refreshStoreSize=function(){return o(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.storeCommon.setItem(this.product+"_logger",this.storeSize)];case 1:return e.sent(),[2]}}))}))},e.prototype.dropData=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,8,,9]),this.droping=!0,[4,this.store.keys()];case 1:e=r.sent(),t=0,n=0,r.label=2;case 2:return n<e.length?[4,this.store.getItem(e[n])]:[3,7];case 3:return(o=r.sent())?(t+=o.length+1)<this.fileConfig.maxSize*this.fileConfig.dropPer?[4,this.store.removeItem(e[n])]:[3,5]:[3,6];case 4:return r.sent(),this.storeSize-=o.length+1,this.refreshStoreSize(),[3,6];case 5:return this.droping=!1,this.dataDropCallback(),[3,7];case 6:return n++,[3,2];case 7:return[3,9];case 8:return i=r.sent(),console.error("drop data fail ",i),[3,9];case 9:return[2]}}))}))},e.prototype.setUploadState=function(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.storeCommon?[4,this.storeCommon.setItem("uploading",e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.getUploadState=function(){if(this.storeCommon)return this.storeCommon.getItem("uploading")},e}();t.ZegoStoreHandler=u},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoFileHandler=void 0;var i=function(){function e(e,t,n){this.product=e,this.fileConfig=t,this.initCallback=n,this.basePath="",this.filePath="",this.curFile=0,this.inited=!1,this.init()}return e.prototype.init=function(){return o(this,void 0,void 0,(function(){var e,t,n,o;return r(this,(function(r){switch(r.label){case 0:this.basePath=wx.env.USER_DATA_PATH+"/logger",this.fileManager=wx.getFileSystemManager(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.accessDir(this.basePath)];case 2:return r.sent(),console.log("access dir suc"),[3,4];case 3:return e=r.sent(),console.error("access file fail",e),[2];case 4:this.fileManager.readdir({dirPath:this.basePath,success:function(e){console.log(e.files)},fail:function(e){console.error(e)}}),t=0,r.label=5;case 5:if(!(t<this.fileConfig.maxFiles))return[3,10];n=this.basePath+"/"+this.product+t+".txt",r.label=6;case 6:return r.trys.push([6,8,,9]),[4,this.accessFile(n)];case 7:return r.sent()<this.fileConfig.maxSize?(this.filePath=n,this.curFile=t,[3,10]):[3,9];case 8:return o=r.sent(),console.error("access file fail ",o),[3,9];case 9:return t++,[3,5];case 10:return""==this.filePath&&console.log("file is full"),this.inited=!0,this.initCallback&&this.initCallback(),[2]}}))}))},e.prototype.storeData=function(e){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:try{this.fileManager.appendFileSync(this.filePath,e+"\n")}catch(e){console.warn("storeData",e)}return[4,this.getFileSize(this.filePath)];case 1:return t=n.sent(),console.warn("file ",this.filePath,t),t>=this.fileConfig.maxSize?(console.warn("file is full"),this.curFile++,this.curFile>=this.fileConfig.maxFiles&&(this.curFile=0),this.filePath=this.basePath+"/"+this.product+this.curFile+".txt",[4,this.accessFile(this.filePath)]):[3,4];case 2:return n.sent()>=this.fileConfig.maxSize?(console.warn("file is exist"),this.fileManager.unlinkSync(this.filePath),[4,this.accessFile(this.filePath)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},e.prototype.getFileSize=function(e){return new Promise((function(t,n){wx.getFileSystemManager().getFileInfo({filePath:e,success:function(e){console.log(e),t(e.size)},fail:function(e){console.error(e),n(e)}})}))},e.prototype.accessDir=function(e){var t=wx.getFileSystemManager();return new Promise((function(n,o){t.access({path:e,success:function(e){console.log("success",e),n()},fail:function(r){console.log("fail",r),t.mkdir({dirPath:e,success:function(e){console.log("success",e),n()},fail:function(e){console.log("fail",e),o(e)}})}})}))},e.prototype.accessFile=function(e){var t=this,n=wx.getFileSystemManager();return new Promise((function(i,s){n.access({path:e,success:function(n){return o(t,void 0,void 0,(function(){var t;return r(this,(function(o){switch(o.label){case 0:return console.log("success",n),[4,this.getFileSize(e)];case 1:return t=o.sent(),i(t),[2]}}))}))},fail:function(t){console.log("fail",t),n.writeFile({filePath:e,data:"",success:function(e){console.log("success",e),i(0)},fail:function(e){console.log("fail",e),s(e)}})}})}))},e.prototype.delFile=function(e){var t=this;return new Promise((function(n,o){t.fileManager.unlink({filePath:e,success:function(e){console.log("unlink file suc"),n()},fail:function(e){console.log("unlink file fail",e),o(e)}})}))},e}();t.ZegoFileHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postFileWechat=t.postFile=void 0;var o={code:1001,msg:"upload fail"};t.postFile=function(e,t){return new Promise((function(n,r){var i=new XMLHttpRequest;i.open("post",e),i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304==i.status){console.log(i.responseText);var e=JSON.parse(i.responseText),t=e.code,s=e.message;0===t?(console.log("post suc"),n({code:t,msg:s})):(console.error("post fail ",t,s),r({code:t,msg:s}))}else console.log(i.responseText),r(o)},i.send(t)}))},t.postFileWechat=function(e,t,n){return new Promise((function(r,i){var s=(new Date).getTime();wx.uploadFile({url:e,filePath:t,name:"logs",formData:{id_name:n.userID,appid:n.appID,timestamp:s+"",token:n.token,deviceid:"",product:n.product,req_sdk:"1"},success:function(e){var t=e.data;if(console.log("upload",e,Date.now()-s),200===e.statusCode&&t)try{var n=JSON.parse(t),o=n.code,a=n.message;0===o?(console.log("post suc"),r({code:o,msg:a})):(console.error("post fail ",o,a),i({code:o,msg:a}))}catch(e){i(e)}else i({code:e.statusCode,msg:"upload fail"})},fail:function(e){console.error("upload",e),i(o)}})}))}}])}));

/***/ }),

/***/ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts":
/*!****************************************************!*\
  !*** ./sdk/docsview/code/zh/ZegoDocsViewEntity.ts ***!
  \****************************************************/
/*! exports provided: ZegoConfigKey, ZegoDocsViewError, ZegoDocsViewFileType, ZegoDocsViewRenderType, ZegoDocsViewUploadState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoConfigKey", function() { return ZegoConfigKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewError", function() { return ZegoDocsViewError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewFileType", function() { return ZegoDocsViewFileType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewRenderType", function() { return ZegoDocsViewRenderType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewUploadState", function() { return ZegoDocsViewUploadState; });
var ZegoConfigKey;

(function (ZegoConfigKey) {
  /**
   * 是否加载动态 PPT 里的视频资源
   *
   * Note: value 取值如下：
   *
   * Note: false 默认模式，加载
   *
   * Note: true 不加载
   */
  ZegoConfigKey["UnloadVideoSrc"] = "unloadVideoSrc";
  /**
   * 是否禁用动态 PPT 里图片的复制和拖拽效果
   *
   * Note: value 取值如下：
   *
   * Note: false 默认模式，不禁用
   *
   * Note: true 禁用
   */

  ZegoConfigKey["DisableH5ImageDrag"] = "disableH5ImageDrag";
  /**
   * 设置动态 PPT 步数切页模式
   *
   * Note: value 取值如下：
   *
   * Note:  1 默认模式，正常上一步和下一步
   *
   * Note:  2 在页中的第一步执行上一步时，不跳转，页中的最后一步执行下一步时，不跳转。
   */

  ZegoConfigKey["PptStepMode"] = "pptStepMode";
  /**
   * 设置缩略图清晰度模式
   *
   * Note: value 取值如下：
   *
   * Note:  1 普通，默认模式
   *
   * Note:  2 标清
   *
   * Note:  3 高清
   */

  ZegoConfigKey["ThumbnailMode"] = "thumbnailMode";
  /**
   * 设置私有化域名
   */

  ZegoConfigKey["Domain"] = "domain";
})(ZegoConfigKey || (ZegoConfigKey = {}));
/**
 * ZegoDocsView 错误码
 *
 */


var ZegoDocsViewError;

(function (ZegoDocsViewError) {
  /**
   * 执行成功
   */
  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewSuccess"] = 0] = "ZegoDocsViewSuccess";
  /**
   * 内部错误
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorInternal"] = 2000001] = "ZegoDocsViewErrorInternal";
  /**
   * 参数错误
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorParamInvalid"] = 2000002] = "ZegoDocsViewErrorParamInvalid";
  /**
   * 网络超时
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorNetworkTimeout"] = 2000003] = "ZegoDocsViewErrorNetworkTimeout";
  /**
   * 找不到对应的本地文件
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileNotExist"] = 2010001] = "ZegoDocsViewErrorFileNotExist";
  /**
   * 上传失败
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorUploadFailed"] = 2010002] = "ZegoDocsViewErrorUploadFailed";
  /**
   * 不支持渲染模式
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorUnsupportRenderType"] = 2010003] = "ZegoDocsViewErrorUnsupportRenderType";
  /**
   * 文件被加密
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileEncrypt"] = 2020001] = "ZegoDocsViewErrorFileEncrypt";
  /**
   * 文件内容过大
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileSizeLimit"] = 2020002] = "ZegoDocsViewErrorFileSizeLimit";
  /**
   * 文件页数过多
   * Excel 文件 sheet 数量超过 20；Word 文件页数超过 500；PPT 文件页数超过 500
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileSheetLimit"] = 2020003] = "ZegoDocsViewErrorFileSheetLimit";
  /**
   * 格式转换失败
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertFail"] = 2020004] = "ZegoDocsViewErrorConvertFail";
  /**
   * 格式转换被取消
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertCancel"] = 2020005] = "ZegoDocsViewErrorConvertCancel";
  /**
   * 文件内容为空
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileContentEmpty"] = 2020006] = "ZegoDocsViewErrorFileContentEmpty";
  /**
   * 文件为只读模式
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileReadOnly"] = 2020007] = "ZegoDocsViewErrorFileReadOnly";
  /**
   * 源文件中存在不支持转码的元素
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertElementNotSupported"] = 2020008] = "ZegoDocsViewErrorConvertElementNotSupported";
  /**
   * 文件后缀名不匹配
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertFileTypeInvalid"] = 2020009] = "ZegoDocsViewErrorConvertFileTypeInvalid";
  /**
   * 打开文件时弹需要修复文件提示框（文件损坏）
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileCorruption"] = 2030018] = "ZegoDocsViewErrorFileCorruption";
  /**
   * EOF 错误（文件内容不完整）
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFileContentIncomplete"] = 2030019] = "ZegoDocsViewErrorFileContentIncomplete";
  /**
   * 认证参数错误
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorAuthParamInvalid"] = 2030001] = "ZegoDocsViewErrorAuthParamInvalid";
  /**
   * 路径权限不足
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFilePathNotAccess"] = 2030002] = "ZegoDocsViewErrorFilePathNotAccess";
  /**
   * 初始化失败
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorInitFailed"] = 2030003] = "ZegoDocsViewErrorInitFailed";
  /**
   * 无法获取当前 view 宽高
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorSizeInvalid"] = 2030004] = "ZegoDocsViewErrorSizeInvalid";
  /**
   * 本地空间不足
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorFreeSpaceLimit"] = 2030005] = "ZegoDocsViewErrorFreeSpaceLimit";
  /**
   * 不支持文件上传功能
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorUploadNotSupported"] = 2030006] = "ZegoDocsViewErrorUploadNotSupported";
  /**
   * 正在上传相同文件
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorUploadDuplicated"] = 2030007] = "ZegoDocsViewErrorUploadDuplicated";
  /**
   * 空域名
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorEmptyDomain"] = 2030008] = "ZegoDocsViewErrorEmptyDomain";
  /**
   * 已初始化
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorHaveInit"] = 2030009] = "ZegoDocsViewErrorHaveInit";
  /**
   * 找不到对应的转码后文件
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorServerFileNotExist"] = 2030010] = "ZegoDocsViewErrorServerFileNotExist";
  /**
   * 当前 AppID 不支持动态 PPT 预加载
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorCacheNotSupported"] = 2030014] = "ZegoDocsViewErrorCacheNotSupported";
  /**
   * 预加载失败
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorCacheFailed"] = 2030015] = "ZegoDocsViewErrorCacheFailed";
  /**
   * 无效的 ZIP 文件
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorZipFileInvalid"] = 2030016] = "ZegoDocsViewErrorZipFileInvalid";
  /**
   * 无效的 H5 文件，不符合 ZEGO 定义的 H5 文件规范
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorH5FileInvalid"] = 2030017] = "ZegoDocsViewErrorH5FileInvalid";
  /**
   * 源文件中存在安全隐患，无法正常打开
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertFileUnsafe"] = 2020010] = "ZegoDocsViewErrorConvertFileUnsafe";
  /**
   * 转码结束后中存在图片、音视频文件未正常导出
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorConvertElementNotExported"] = 2020011] = "ZegoDocsViewErrorConvertElementNotExported";
  /**
   * 多次重试后请求失败的错误码, 请求失败
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorRequestFailure"] = 2000004] = "ZegoDocsViewErrorRequestFailure";
  /**
   * 文件 token 过期
   */

  ZegoDocsViewError[ZegoDocsViewError["ZegoDocsViewErrorTokenInvalid"] = 2030020] = "ZegoDocsViewErrorTokenInvalid";
})(ZegoDocsViewError || (ZegoDocsViewError = {}));
/**
 * 文件类型
 *
 */


var ZegoDocsViewFileType;

(function (ZegoDocsViewFileType) {
  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeUnknown"] = 0] = "ZegoDocsViewFileTypeUnknown";
  /**
   * 静态演示文件（pptx、ppt）
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypePPT"] = 1] = "ZegoDocsViewFileTypePPT";
  /**
   * 文字文件（doc，docx）
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeDOC"] = 2] = "ZegoDocsViewFileTypeDOC";
  /**
   * 表格文件（xls，xlsx）
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeELS"] = 4] = "ZegoDocsViewFileTypeELS";
  /**
   * PDF 文件
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypePDF"] = 8] = "ZegoDocsViewFileTypePDF";
  /**
   * 图片（jpg、jpeg、png、bmp)
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeIMG"] = 16] = "ZegoDocsViewFileTypeIMG";
  /**
   * TXT 文本文件
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeTXT"] = 32] = "ZegoDocsViewFileTypeTXT";
  /**
   * 动态演示文件（pptx、ppt）
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeDynamicPPTH5"] = 512] = "ZegoDocsViewFileTypeDynamicPPTH5";
  /**
   * 音频文件
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeAudio"] = 1024] = "ZegoDocsViewFileTypeAudio";
  /**
   * 视频文件
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeVideo"] = 2048] = "ZegoDocsViewFileTypeVideo";
  /**
   * 自定义 H5 课件
   */

  ZegoDocsViewFileType[ZegoDocsViewFileType["ZegoDocsViewFileTypeCustomH5"] = 4096] = "ZegoDocsViewFileTypeCustomH5";
})(ZegoDocsViewFileType || (ZegoDocsViewFileType = {}));
/**
 * 渲染模式类型
 *
 */


var ZegoDocsViewRenderType;

(function (ZegoDocsViewRenderType) {
  /**
   * Vector 向量模式，适用于文件共享 SDK PC 端、移动端做的文档智能转换，能够更换地支持文档浏览以及更清晰的缩放。
   */
  ZegoDocsViewRenderType[ZegoDocsViewRenderType["ZegoDocsViewRenderTypeVector"] = 1] = "ZegoDocsViewRenderTypeVector";
  /**
   * IMG 图片模式，适用于文件共享SDK Web端、小程序使用的文档转换，按文件样式每一页都生成图片样式。
   */

  ZegoDocsViewRenderType[ZegoDocsViewRenderType["ZegoDocsViewRenderTypeIMG"] = 2] = "ZegoDocsViewRenderTypeIMG";
  /**
   * VectorAndIMG 向量和图片模式， 适用于当存在Web端、小程序、移动端、PC端，多端的并存情况，在web端、小程序将使用IMG图片模式， 而PC端、移动端将使用Vector向量模式。
   */

  ZegoDocsViewRenderType[ZegoDocsViewRenderType["ZegoDocsViewRenderTypeVectorAndIMG"] = 3] = "ZegoDocsViewRenderTypeVectorAndIMG";
  /**
   * DynamicPPTH5 动态ppt模式， 适用于文件共享SDK PC端、移动端、Web端、小程序使用的PPT文件转码格式， 会将PPT文件转成动态ppt的H5文件。
   */

  ZegoDocsViewRenderType[ZegoDocsViewRenderType["ZegoDocsViewRenderTypeDynamicPPTH5"] = 6] = "ZegoDocsViewRenderTypeDynamicPPTH5";
})(ZegoDocsViewRenderType || (ZegoDocsViewRenderType = {}));
/**
 * 文件上传阶段
 *
 */


var ZegoDocsViewUploadState;

(function (ZegoDocsViewUploadState) {
  /**
   * 上传中
   */
  ZegoDocsViewUploadState[ZegoDocsViewUploadState["UPLOADING"] = 1] = "UPLOADING";
  /**
   * 已上传未转码
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["UPLOADED"] = 2] = "UPLOADED";
  /**
   * 排队中
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["WAITING"] = 4] = "WAITING";
  /**
   * 转换中
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["CONVERTING"] = 8] = "CONVERTING";
  /**
   * 转换成功
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["CONVERTED"] = 16] = "CONVERTED";
  /**
   * 转换失败
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["CONVERT_FAIL"] = 32] = "CONVERT_FAIL";
  /**
   * 转换取消
   */

  ZegoDocsViewUploadState[ZegoDocsViewUploadState["CONVERT_CANCEL"] = 64] = "CONVERT_CANCEL";
})(ZegoDocsViewUploadState || (ZegoDocsViewUploadState = {}));

/***/ }),

/***/ "./sdk/docsview/docs/base64.ts":
/*!*************************************!*\
  !*** ./sdk/docsview/docs/base64.ts ***!
  \*************************************/
/*! exports provided: Base64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Base64", function() { return Base64; });
/* eslint-disable prefer-const */
var Base64 =
/** @class */
function () {
  function Base64() {}

  Base64.base64encode = function (str) {
    var out, i, len;
    var c1, c2, c3;
    len = str.length;
    i = 0;
    out = '';

    while (i < len) {
      c1 = str.charCodeAt(i++) & 0xff;

      if (i == len) {
        out += Base64.base64EncodeChars.charAt(c1 >> 2);
        out += Base64.base64EncodeChars.charAt((c1 & 0x3) << 4);
        out += '==';
        break;
      }

      c2 = str.charCodeAt(i++);

      if (i == len) {
        out += Base64.base64EncodeChars.charAt(c1 >> 2);
        out += Base64.base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xf0) >> 4);
        out += Base64.base64EncodeChars.charAt((c2 & 0xf) << 2);
        out += '=';
        break;
      }

      c3 = str.charCodeAt(i++);
      out += Base64.base64EncodeChars.charAt(c1 >> 2);
      out += Base64.base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xf0) >> 4);
      out += Base64.base64EncodeChars.charAt((c2 & 0xf) << 2 | (c3 & 0xc0) >> 6);
      out += Base64.base64EncodeChars.charAt(c3 & 0x3f);
    }

    return out;
  };

  Base64.base64decode = function (str) {
    var c1, c2, c3, c4;
    var i, len, out;
    len = str.length;
    i = 0;
    out = '';

    while (i < len) {
      /* c1 */
      do {
        c1 = Base64.base64DecodeChars[str.charCodeAt(i++) & 0xff];
      } while (i < len && c1 == -1);

      if (c1 == -1) break;
      /* c2 */

      do {
        c2 = Base64.base64DecodeChars[str.charCodeAt(i++) & 0xff];
      } while (i < len && c2 == -1);

      if (c2 == -1) break;
      out += String.fromCharCode(c1 << 2 | (c2 & 0x30) >> 4);
      /* c3 */

      do {
        c3 = str.charCodeAt(i++) & 0xff;
        if (c3 == 61) return out;
        c3 = Base64.base64DecodeChars[c3];
      } while (i < len && c3 == -1);

      if (c3 == -1) break;
      out += String.fromCharCode((c2 & 0xf) << 4 | (c3 & 0x3c) >> 2);
      /* c4 */

      do {
        c4 = str.charCodeAt(i++) & 0xff;
        if (c4 == 61) return out;
        c4 = Base64.base64DecodeChars[c4];
      } while (i < len && c4 == -1);

      if (c4 == -1) break;
      out += String.fromCharCode((c3 & 0x03) << 6 | c4);
    }

    return out;
  };

  Base64.utf16to8 = function (str) {
    var out, i, len, c;
    out = '';
    len = str.length;

    for (i = 0; i < len; i++) {
      c = str.charCodeAt(i);

      if (c >= 0x0001 && c <= 0x007f) {
        out += str.charAt(i);
      } else if (c > 0x07ff) {
        out += String.fromCharCode(0xe0 | c >> 12 & 0x0f);
        out += String.fromCharCode(0x80 | c >> 6 & 0x3f);
        out += String.fromCharCode(0x80 | c >> 0 & 0x3f);
      } else {
        out += String.fromCharCode(0xc0 | c >> 6 & 0x1f);
        out += String.fromCharCode(0x80 | c >> 0 & 0x3f);
      }
    }

    return out;
  };

  Base64.utf8to16 = function (str) {
    var out, i, len, c;
    var char2, char3;
    out = '';
    len = str.length;
    i = 0;

    while (i < len) {
      c = str.charCodeAt(i++);

      switch (c >> 4) {
        case 0:
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
          // 0xxxxxxx
          out += str.charAt(i - 1);
          break;

        case 12:
        case 13:
          // 110x xxxx　 10xx xxxx
          char2 = str.charCodeAt(i++);
          out += String.fromCharCode((c & 0x1f) << 6 | char2 & 0x3f);
          break;

        case 14:
          // 1110 xxxx　10xx xxxx　10xx xxxx
          char2 = str.charCodeAt(i++);
          char3 = str.charCodeAt(i++);
          out += String.fromCharCode((c & 0x0f) << 12 | (char2 & 0x3f) << 6 | (char3 & 0x3f) << 0);
          break;
      }
    }

    return out;
  };

  Base64.base64EncodeChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
  Base64.base64DecodeChars = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1];
  return Base64;
}();



/***/ }),

/***/ "./sdk/docsview/docs/platform/local_config.ts":
/*!****************************************************!*\
  !*** ./sdk/docsview/docs/platform/local_config.ts ***!
  \****************************************************/
/*! exports provided: ZegoDocsConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsConfig", function() { return ZegoDocsConfig; });
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./server_config */ "./sdk/docsview/docs/platform/server_config.ts");

 // 正式环境主、备域名

var ZegoDomain = {
  domain: 'docservice',
  backupDomain: 'docservice-base' // 备用域名，需拼接主域名（https:// + backupDomain + '.' + DocsServerConfig.host.main）

}; // 后台接口

var ZegoAPI = {
  queryStatus: '/doc/query_status',
  createCvt: '/doc/cvt_doc',
  cancelCvt: '/doc/cancel_cvt',
  query: '/doc/access',
  uploadH5: '/doc/upload_file' // 上传自定义 H5 压缩包

}; // 初始 origin

var ZegoOriginList = ["https://" + ZegoDomain.domain + "." + _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].host.main, "https://" + ZegoDomain.backupDomain + "." + _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].host.main]; // 初始 fullURL

var ZegoFullURL = {
  queryStatusUrl: "" + ZegoOriginList[0] + ZegoAPI.queryStatus,
  createCvtUrl: "" + ZegoOriginList[0] + ZegoAPI.createCvt,
  cancelCvtUrl: "" + ZegoOriginList[0] + ZegoAPI.cancelCvt,
  queryUrl: "" + ZegoOriginList[0] + ZegoAPI.query,
  uploadH5Url: "" + ZegoOriginList[0] + ZegoAPI.uploadH5
};
var ZegoDocsConfig = {
  // API 标识
  API_Label: '/doc/',
  // 重试次数
  Try_Time: 6,

  /**
   * @description: 更新当前 fullURL
   * @return {Object}
   */
  updateFullURL: function updateFullURL() {
    return ZegoFullURL = {
      queryStatusUrl: "" + ZegoOriginList[0] + ZegoAPI.queryStatus,
      createCvtUrl: "" + ZegoOriginList[0] + ZegoAPI.createCvt,
      cancelCvtUrl: "" + ZegoOriginList[0] + ZegoAPI.cancelCvt,
      queryUrl: "" + ZegoOriginList[0] + ZegoAPI.query,
      uploadH5Url: "" + ZegoOriginList[0] + ZegoAPI.uploadH5
    };
  },

  /**
   * @description: 更新 origin 列表
   * @description: 调用时机：外部设置环境、私有化设置自定义域名时调用
   * @param {Boolean} isPrivateServer 是否是私有化环境
   * @param {String} env SDK 环境
   * @return {Object}
   */
  updateOriginList: function updateOriginList(env, isPrivateServer, customOrigin) {
    if (env === '-alpha' || env === '-test') {
      ZegoOriginList = ["https://docservice" + env + "." + _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].host.main];
    } else {
      // 正式环境
      if (isPrivateServer) {
        // 私有化
        ZegoOriginList = [customOrigin];
      } else {
        // 公有化
        ZegoOriginList = ["https://" + ZegoDomain.domain + "." + _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].host.main, "https://" + ZegoDomain.backupDomain + "." + _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].host.main];
      }
    }

    ZegoDocsConfig.updateFullURL();
    return ZegoOriginList;
  },

  /**
   * @description: 切换 origin 列表中主、备域名
   * @description: 调用时机：公有化重试过程中切换域名后调用
   * @return {Object}
   */
  switchOrigin: function switchOrigin() {
    ZegoOriginList.reverse();
    ZegoDocsConfig.updateFullURL();
    return ZegoOriginList;
  },
  getOriginList: function getOriginList() {
    return ZegoOriginList;
  },

  /**
   * @description: 获取文件上传、转码大小限制
   * @return {Array}
   */
  getFileLimit: function getFileLimit() {
    return _server_config__WEBPACK_IMPORTED_MODULE_1__["DocsServerConfig"].file_type_size_limit;
  },

  /**
   * @description: 获取当前 fullURL
   * @return {Object}
   */
  getFullURL: function getFullURL() {
    return ZegoFullURL;
  }
};

/***/ }),

/***/ "./sdk/docsview/docs/platform/server_config.ts":
/*!*****************************************************!*\
  !*** ./sdk/docsview/docs/platform/server_config.ts ***!
  \*****************************************************/
/*! exports provided: DocsServerConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocsServerConfig", function() { return DocsServerConfig; });
var DocsServerConfig = {
  host: {
    main: 'zego.im'
  },
  ca_root: 'http://flexible.zego.im/root/cert.2017',
  save_local: 1,
  max_virtual_page_size: 31457280,
  virtual_page_count: 3,
  file_type_size_limit: [// 各种源文件最大支持的上传大小
  [1, 524288000 // ppt 500m
  ], [2, 104857600 // word 100m
  ], [4, 10485760 // excel 10m
  ], [8, 104857600 // pdf 100m
  ], [16, 104857600 // img 100m
  ], [32, 2097152 // txt 2m
  ], [4096, 52428800 // 自定义 H5 课件 50m
  ]],
  dynamicPPT_config: {
    retry_time: 1,
    timeout: 60
  } // 动态 ppt 配置：重试次数，超时时间

};

/***/ }),

/***/ "./sdk/docsview/docs/platform/zego.docs.web.ts":
/*!*****************************************************!*\
  !*** ./sdk/docsview/docs/platform/zego.docs.web.ts ***!
  \*****************************************************/
/*! exports provided: ZegoDocsPlatformImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsPlatformImpl", function() { return ZegoDocsPlatformImpl; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.array.fill.js */ "./node_modules/core-js/modules/es.array.fill.js");
/* harmony import */ var core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.array-buffer.slice.js */ "./node_modules/core-js/modules/es.array-buffer.slice.js");
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.typed-array.uint8-array.js */ "./node_modules/core-js/modules/es.typed-array.uint8-array.js");
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.typed-array.copy-within.js */ "./node_modules/core-js/modules/es.typed-array.copy-within.js");
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.typed-array.every.js */ "./node_modules/core-js/modules/es.typed-array.every.js");
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.typed-array.fill.js */ "./node_modules/core-js/modules/es.typed-array.fill.js");
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.typed-array.filter.js */ "./node_modules/core-js/modules/es.typed-array.filter.js");
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.typed-array.find.js */ "./node_modules/core-js/modules/es.typed-array.find.js");
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-index.js */ "./node_modules/core-js/modules/es.typed-array.find-index.js");
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.typed-array.for-each.js */ "./node_modules/core-js/modules/es.typed-array.for-each.js");
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.typed-array.includes.js */ "./node_modules/core-js/modules/es.typed-array.includes.js");
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.typed-array.index-of.js */ "./node_modules/core-js/modules/es.typed-array.index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.typed-array.iterator.js */ "./node_modules/core-js/modules/es.typed-array.iterator.js");
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/es.typed-array.join.js */ "./node_modules/core-js/modules/es.typed-array.join.js");
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.typed-array.last-index-of.js */ "./node_modules/core-js/modules/es.typed-array.last-index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! core-js/modules/es.typed-array.map.js */ "./node_modules/core-js/modules/es.typed-array.map.js");
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_30__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce.js */ "./node_modules/core-js/modules/es.typed-array.reduce.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce-right.js */ "./node_modules/core-js/modules/es.typed-array.reduce-right.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! core-js/modules/es.typed-array.reverse.js */ "./node_modules/core-js/modules/es.typed-array.reverse.js");
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_33__);
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ "./node_modules/core-js/modules/es.typed-array.set.js");
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_34__);
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! core-js/modules/es.typed-array.slice.js */ "./node_modules/core-js/modules/es.typed-array.slice.js");
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! core-js/modules/es.typed-array.some.js */ "./node_modules/core-js/modules/es.typed-array.some.js");
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_36__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! core-js/modules/es.typed-array.sort.js */ "./node_modules/core-js/modules/es.typed-array.sort.js");
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_37__);
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! core-js/modules/es.typed-array.subarray.js */ "./node_modules/core-js/modules/es.typed-array.subarray.js");
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_38___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_38__);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-locale-string.js */ "./node_modules/core-js/modules/es.typed-array.to-locale-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_39__);
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-string.js */ "./node_modules/core-js/modules/es.typed-array.to-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_40___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_40__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_41___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_41__);
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! core-js/modules/web.url.js */ "./node_modules/core-js/modules/web.url.js");
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_42___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_42__);
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! core-js/modules/web.url-search-params.js */ "./node_modules/core-js/modules/web.url-search-params.js");
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_43___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_43__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_44___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_44__);
/* harmony import */ var _zego_docs_dep__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../zego.docs.dep */ "./sdk/docsview/docs/zego.docs.dep.ts");
/* harmony import */ var _zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../zego.docs.dep.cmn */ "./sdk/docsview/docs/zego.docs.dep.cmn.ts");
/* harmony import */ var _view_entities_error__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../../view/entities/error */ "./sdk/docsview/view/entities/error.ts");
/* harmony import */ var _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../../code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony import */ var _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../zego.docs.entity */ "./sdk/docsview/docs/zego.docs.entity.ts");
/* harmony import */ var _local_config__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./local_config */ "./sdk/docsview/docs/platform/local_config.ts");
/* harmony import */ var _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ../../view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");













































var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};










var ZegoDocsPlatformImpl =
/** @class */
function () {
  function ZegoDocsPlatformImpl() {
    this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_44___default.a.create({
      timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__["HTTP_TIME"]
    });

    this.getFileName = function (file) {
      return file.name;
    };
  }

  ZegoDocsPlatformImpl.prototype.getMd5 = function (file) {
    return Object(_zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_46__["getMd5"])(file);
  };

  ZegoDocsPlatformImpl.prototype.getFileSize = function (file) {
    return Promise.resolve(file.size);
  };

  ZegoDocsPlatformImpl.prototype.requestProgress = function (urlList, options, resolve, reject) {
    return __awaiter(this, void 0, void 0, function () {
      var index, len, originList, element, result, error_1;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            index = 0, len = urlList.length;
            _a.label = 1;

          case 1:
            if (!(index < len)) return [3
            /*break*/
            , 6]; // 切换主备域名顺序

            if (index && index !== len - 1) {
              originList = _local_config__WEBPACK_IMPORTED_MODULE_50__["ZegoDocsConfig"].switchOrigin();
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__["Logger"].getInstance().info(['DocsView_Service', 'Request_Retry'], 'switchOrigin', JSON.stringify(originList));
            }

            element = urlList[index];
            options.url = element;
            _a.label = 2;

          case 2:
            _a.trys.push([2, 4,, 5]);

            _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__["Logger"].getInstance().info(['DocsView_Service', 'Request_Retry'], 'requestProgress', JSON.stringify({
              tryTime: index + 1,
              status: 'start',
              params: options
            }));
            return [4
            /*yield*/
            , this.axiosInstance(options)];

          case 3:
            result = _a.sent();
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__["Logger"].getInstance().info(['DocsView_Service', 'Request_Retry'], 'requestProgress', JSON.stringify({
              tryTime: index + 1,
              status: 'end',
              params: options,
              result: result.data
            }));
            resolve(result);
            return [3
            /*break*/
            , 6];

          case 4:
            error_1 = _a.sent();
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__["Logger"].getInstance().error(['DocsView_Service', 'Request_Retry'], 'requestProgress', JSON.stringify({
              tryTime: index + 1,
              status: 'end',
              params: options,
              result: error_1
            }));
            if (index === len - 1) reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_47__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__["ZegoDocsViewError"].ZegoDocsViewErrorRequestFailure));
            return [3
            /*break*/
            , 5];

          case 5:
            index++;
            return [3
            /*break*/
            , 1];

          case 6:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoDocsPlatformImpl.prototype.requestBefore = function (options) {
    var originList = _local_config__WEBPACK_IMPORTED_MODULE_50__["ZegoDocsConfig"].getOriginList(); // 截取 URL 中的 API

    var url = options.url;
    var api = _local_config__WEBPACK_IMPORTED_MODULE_50__["ZegoDocsConfig"].API_Label + url.split(_local_config__WEBPACK_IMPORTED_MODULE_50__["ZegoDocsConfig"].API_Label)[1];
    var urlList = [];
    originList = originList.map(function (element) {
      return element + api;
    });
    new Array(_local_config__WEBPACK_IMPORTED_MODULE_50__["ZegoDocsConfig"].Try_Time).fill('').forEach(function () {
      urlList = urlList.concat.apply(urlList, originList);
    });
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_51__["Logger"].getInstance().info(['DocsView_Service', 'Request_Retry'], 'requestBefore', JSON.stringify(urlList));
    return urlList;
  };

  ZegoDocsPlatformImpl.prototype.request = function (options) {
    var _this = this;

    if (options.responseType === 'arraybuffer') {
      return this.axiosInstance(options);
    } else {
      // 增加重试机制
      return new Promise(function (resolve, reject) {
        var urlList = _this.requestBefore(options);

        _this.requestProgress(urlList, options, resolve, reject);
      });
    }
  };

  ZegoDocsPlatformImpl.prototype.decryptImage = function (url) {
    return this.request({
      url: url,
      method: 'get',
      timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__["HTTP_TIME"],
      responseType: 'arraybuffer'
    }).then(function (res) {
      var array = new Uint8Array(res.data);
      var deu8 = Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_45__["decryptU8arry"])(array.slice(0, 1024));
      return URL.createObjectURL(new Blob([deu8, array.slice(1024)], {
        type: 'image/jpg'
      }));
    });
  }; // 上传文档至服务器


  ZegoDocsPlatformImpl.prototype.uploadDoc = function (params, isCancel, store) {
    var fileServerProvider = params.fileServerProvider;

    if (fileServerProvider === 'oss') {
      return this.uploadDocToOss(params, isCancel);
    } else if (fileServerProvider === 'sfs') {
      return this.uploadDocToSfs(params, store);
    } else {
      // 其他文件服务器
      return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_47__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid));
    }
  }; // 上传自定义 H5 课件


  ZegoDocsPlatformImpl.prototype.uploadH5File = function (file, config, listener, store) {
    var fileName = file.name;
    var sendData = {
      app_id: store.app_id,
      user_id: store.id_name,
      platform: store.platform,
      web_token: store.web_token,
      file_name: fileName,
      file_type: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5,
      width: config.width,
      height: config.height,
      page_count: config.pageCount
    };

    if (config.thumbnailList && config.thumbnailList.length) {
      sendData.thumbnails = config.thumbnailList;
    } // 构造 FormData


    var uploadData = new FormData();
    uploadData.append('req', new Blob([JSON.stringify(sendData)], {
      type: 'application/json'
    }));
    uploadData.append('document', file);
    return this.axiosInstance({
      method: 'post',
      url: store.url,
      data: uploadData,
      timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__["UPLOAD_HTTP_TIME"],
      onUploadProgress: function onUploadProgress(progressEvent) {
        if (!listener) return;
        var total = progressEvent.total,
            loaded = progressEvent.loaded;
        listener({
          fileName: fileName,
          uploadPercent: Math.floor(loaded / total * 100),
          total: total,
          loaded: loaded
        });
      }
    });
  };
  /**
   * 公有化：上传至oss
   */


  ZegoDocsPlatformImpl.prototype.uploadDocToOss = function (uploadDocParams, isCancel) {
    var oss = uploadDocParams.oss,
        file = uploadDocParams.file,
        onProgress = uploadDocParams.onProgress,
        fileName = uploadDocParams.fileName,
        fileHash = uploadDocParams.fileHash;
    var mpOssParams = Object(_zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_46__["getUploadOssInfo"])(oss);
    var formData = new FormData();
    formData.append('OSSAccessKeyId', mpOssParams.OSSAccessKeyId);
    formData.append('x-oss-security-token', mpOssParams.securityToken);
    formData.append('signature', mpOssParams.signature);
    formData.append('policy', mpOssParams.policy);
    formData.append('successActionStatus', mpOssParams.successActionStatus);
    formData.append('key', mpOssParams.objectName);
    formData.append('file', file);
    formData.append('name', file.name);
    return this.axiosInstance({
      method: 'post',
      url: mpOssParams.url,
      data: formData,
      timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__["UPLOAD_HTTP_TIME"],
      onUploadProgress: function onUploadProgress(progressEvent) {
        if (!onProgress || isCancel) return;
        var total = progressEvent.total,
            loaded = progressEvent.loaded;
        onProgress({
          status: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__["ZegoDocsViewUploadState"].UPLOADING,
          fileName: fileName,
          fileHash: fileHash,
          uploadPercent: Math.floor(loaded / total * 100),
          total: total,
          loaded: loaded
        });
      }
    });
  };
  /**
   * 私有化：上传至sfs
   */


  ZegoDocsPlatformImpl.prototype.uploadDocToSfs = function (params, store) {
    var sfs = params.sfs,
        fileHash = params.fileHash,
        file = params.file,
        onProgress = params.onProgress,
        fileName = params.fileName;
    var _a = sfs,
        token = _a.token,
        expired_timestamp = _a.expired_timestamp,
        api = _a.api,
        object_name = _a.object_name;
    var sendData = {
      app_id: store.app_id,
      user_id: store.id_name,
      platform: store.platform,
      expired_timestamp: expired_timestamp,
      sfs_token: token,
      file_name: object_name,
      file_hash: fileHash
    }; // 构造 FormData

    var uploadData = new FormData();
    uploadData.append('req', new Blob([JSON.stringify(sendData)], {
      type: 'application/json'
    }));
    uploadData.append('document', file);
    return this.axiosInstance({
      method: 'post',
      url: api,
      data: uploadData,
      timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_49__["UPLOAD_HTTP_TIME"],
      onUploadProgress: function onUploadProgress(progressEvent) {
        if (!onProgress) return;
        var total = progressEvent.total,
            loaded = progressEvent.loaded;
        onProgress({
          status: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_48__["ZegoDocsViewUploadState"].UPLOADING,
          fileName: fileName,
          fileHash: fileHash,
          uploadPercent: Math.floor(loaded / total * 100),
          total: total,
          loaded: loaded
        });
      }
    });
  };

  return ZegoDocsPlatformImpl;
}();



/***/ }),

/***/ "./sdk/docsview/docs/zego.docs.dep.cmn.ts":
/*!************************************************!*\
  !*** ./sdk/docsview/docs/zego.docs.dep.cmn.ts ***!
  \************************************************/
/*! exports provided: getUploadOssInfo, getMd5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUploadOssInfo", function() { return getUploadOssInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMd5", function() { return getMd5; });
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_date_to_iso_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.date.to-iso-string.js */ "./node_modules/core-js/modules/es.date.to-iso-string.js");
/* harmony import */ var core_js_modules_es_date_to_iso_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_iso_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-base64 */ "./node_modules/js-base64/base64.js");
/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_base64__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! crypto-js/enc-base64 */ "./node_modules/crypto-js/enc-base64.js");
/* harmony import */ var crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var crypto_js_hmac_sha1__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! crypto-js/hmac-sha1 */ "./node_modules/crypto-js/hmac-sha1.js");
/* harmony import */ var crypto_js_hmac_sha1__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(crypto_js_hmac_sha1__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var spark_md5__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! spark-md5 */ "./node_modules/spark-md5/spark-md5.js");
/* harmony import */ var spark_md5__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(spark_md5__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _platform_server_config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./platform/server_config */ "./sdk/docsview/docs/platform/server_config.ts");










/**
 * 这个文件也会被白板SDK引用，尽可能减少依赖文件
 */
// 计算 Post Signature

var computeSignature = function computeSignature(accessKeySecret, policyBase64) {
  return crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_6___default.a.stringify(crypto_js_hmac_sha1__WEBPACK_IMPORTED_MODULE_7___default()(policyBase64, accessKeySecret));
}; // 计算 Post Policy（表单和policy必须使用UTF-8编码）


var computePolicy = function computePolicy(timeout, maxSize) {
  var date = new Date();
  date.setHours(date.getHours() + timeout);
  var srcT = date.toISOString();
  var policyText = {
    expiration: srcT,
    conditions: [['content-length-range', 0, maxSize * 1024 * 1024] // 设置上传文件的大小限制,50mb
    ]
  };
  return js_base64__WEBPACK_IMPORTED_MODULE_5___default.a.Base64.encode(JSON.stringify(policyText));
}; // 根据oss相关信息，生成上传文件所需信息


var getUploadOssInfo = function getUploadOssInfo(oss) {
  // 计算全部上传文件配置所允许的最大 size
  var fileMaxSize = Math.max.apply(Math, _platform_server_config__WEBPACK_IMPORTED_MODULE_9__["DocsServerConfig"].file_type_size_limit.map(function (item) {
    return item[1];
  })) / 1024 / 1024;
  var access_key_id = oss.access_key_id,
      access_key_secret = oss.access_key_secret,
      bucket_name = oss.bucket_name,
      security_token = oss.security_token,
      endpoint = oss.endpoint,
      object_name = oss.object_name,
      _a = oss.timeout,
      timeout = _a === void 0 ? 1 : _a,
      _b = oss.maxSize,
      maxSize = _b === void 0 ? fileMaxSize : _b;
  var policyBase64 = computePolicy(timeout, maxSize);
  return {
    url: 'https://' + bucket_name + '.' + endpoint,
    signature: computeSignature(access_key_secret, policyBase64),
    securityToken: security_token,
    policy: policyBase64,
    key: object_name,
    OSSAccessKeyId: access_key_id,
    successActionStatus: '200',
    objectName: object_name
  };
};
var getMd5 = function getMd5(file) {
  return new Promise(function (resolve, reject) {
    try {
      // @ts-ignore 兼容低版本浏览器
      var blobSlice_1 = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
          chunkSize_1 = 1 * 1024 * 1024,
          chunks_1 = Math.ceil(file.size / chunkSize_1),
          spark_1 = new spark_md5__WEBPACK_IMPORTED_MODULE_8___default.a.ArrayBuffer();
      var currentChunk_1 = 0;
      var reader_1 = new FileReader();

      reader_1.onload = function () {
        // @ts-ignore 兼容IE
        var file_binary = reader_1.result || reader_1.content;

        if (!file_binary) {
          reject({
            code: 2020006,
            message: '文件内容为空'
          });
        } else {
          spark_1.append(file_binary); // Append array buffer

          currentChunk_1++;

          if (currentChunk_1 < chunks_1) {
            loadNext_1();
          } else {
            resolve(spark_1.end());
          }
        }
      }; // 读取文件内容之前，文本在本地已被删除或者路径已修改


      reader_1.onerror = function () {
        reject({
          code: 2010001,
          message: '找不到对应的本地文件'
        });
      };

      var loadNext_1 = function loadNext_1() {
        var start = currentChunk_1 * chunkSize_1,
            end = start + chunkSize_1 >= file.size ? file.size : start + chunkSize_1;
        var fileSlide = blobSlice_1.call(file, start, end); // 使用Blob的slice方法将文件切成小blob片

        reader_1.readAsArrayBuffer(fileSlide);
      };

      loadNext_1();
    } catch (error) {
      reject(error);
    }
  });
};

/***/ }),

/***/ "./sdk/docsview/docs/zego.docs.dep.ts":
/*!********************************************!*\
  !*** ./sdk/docsview/docs/zego.docs.dep.ts ***!
  \********************************************/
/*! exports provided: isPositiveNumber, isMobile, getFileType, getExpectFileType, decryptU8arry, handleFileOfView, preloadFile, decodeTokenExpire */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPositiveNumber", function() { return isPositiveNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return isMobile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFileType", function() { return getFileType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getExpectFileType", function() { return getExpectFileType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decryptU8arry", function() { return decryptU8arry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleFileOfView", function() { return handleFileOfView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preloadFile", function() { return preloadFile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeTokenExpire", function() { return decodeTokenExpire; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.match.js */ "./node_modules/core-js/modules/es.string.match.js");
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array-buffer.slice.js */ "./node_modules/core-js/modules/es.array-buffer.slice.js");
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.typed-array.uint8-array.js */ "./node_modules/core-js/modules/es.typed-array.uint8-array.js");
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.typed-array.copy-within.js */ "./node_modules/core-js/modules/es.typed-array.copy-within.js");
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.typed-array.every.js */ "./node_modules/core-js/modules/es.typed-array.every.js");
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.typed-array.fill.js */ "./node_modules/core-js/modules/es.typed-array.fill.js");
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.typed-array.filter.js */ "./node_modules/core-js/modules/es.typed-array.filter.js");
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.typed-array.find.js */ "./node_modules/core-js/modules/es.typed-array.find.js");
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-index.js */ "./node_modules/core-js/modules/es.typed-array.find-index.js");
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.typed-array.for-each.js */ "./node_modules/core-js/modules/es.typed-array.for-each.js");
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.typed-array.includes.js */ "./node_modules/core-js/modules/es.typed-array.includes.js");
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.typed-array.index-of.js */ "./node_modules/core-js/modules/es.typed-array.index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.typed-array.iterator.js */ "./node_modules/core-js/modules/es.typed-array.iterator.js");
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.typed-array.join.js */ "./node_modules/core-js/modules/es.typed-array.join.js");
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.typed-array.last-index-of.js */ "./node_modules/core-js/modules/es.typed-array.last-index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.typed-array.map.js */ "./node_modules/core-js/modules/es.typed-array.map.js");
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce.js */ "./node_modules/core-js/modules/es.typed-array.reduce.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce-right.js */ "./node_modules/core-js/modules/es.typed-array.reduce-right.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.typed-array.reverse.js */ "./node_modules/core-js/modules/es.typed-array.reverse.js");
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ "./node_modules/core-js/modules/es.typed-array.set.js");
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.typed-array.slice.js */ "./node_modules/core-js/modules/es.typed-array.slice.js");
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.typed-array.some.js */ "./node_modules/core-js/modules/es.typed-array.some.js");
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.typed-array.sort.js */ "./node_modules/core-js/modules/es.typed-array.sort.js");
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/es.typed-array.subarray.js */ "./node_modules/core-js/modules/es.typed-array.subarray.js");
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-locale-string.js */ "./node_modules/core-js/modules/es.typed-array.to-locale-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-string.js */ "./node_modules/core-js/modules/es.typed-array.to-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_30__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ "./node_modules/core-js/modules/es.regexp.to-string.js");
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_33__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_34__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_36__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_37__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_38___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_38__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_39__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_40___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_40__);
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_41___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_41__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_42___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_42__);
/* harmony import */ var core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! core-js/modules/es.number.is-safe-integer.js */ "./node_modules/core-js/modules/es.number.is-safe-integer.js");
/* harmony import */ var core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_43___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_43__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_44___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_44__);
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! core-js/modules/es.typed-array.from.js */ "./node_modules/core-js/modules/es.typed-array.from.js");
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_45___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_45__);
/* harmony import */ var core_js_modules_es_data_view_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! core-js/modules/es.data-view.js */ "./node_modules/core-js/modules/es.data-view.js");
/* harmony import */ var core_js_modules_es_data_view_js__WEBPACK_IMPORTED_MODULE_46___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_data_view_js__WEBPACK_IMPORTED_MODULE_46__);
/* harmony import */ var crypto_js_aes__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! crypto-js/aes */ "./node_modules/crypto-js/aes.js");
/* harmony import */ var crypto_js_aes__WEBPACK_IMPORTED_MODULE_47___default = /*#__PURE__*/__webpack_require__.n(crypto_js_aes__WEBPACK_IMPORTED_MODULE_47__);
/* harmony import */ var crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! crypto-js/enc-hex */ "./node_modules/crypto-js/enc-hex.js");
/* harmony import */ var crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_48___default = /*#__PURE__*/__webpack_require__.n(crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_48__);
/* harmony import */ var crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! crypto-js/enc-base64 */ "./node_modules/crypto-js/enc-base64.js");
/* harmony import */ var crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_49___default = /*#__PURE__*/__webpack_require__.n(crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_49__);
/* harmony import */ var crypto_js_pad_nopadding__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! crypto-js/pad-nopadding */ "./node_modules/crypto-js/pad-nopadding.js");
/* harmony import */ var crypto_js_pad_nopadding__WEBPACK_IMPORTED_MODULE_50___default = /*#__PURE__*/__webpack_require__.n(crypto_js_pad_nopadding__WEBPACK_IMPORTED_MODULE_50__);
/* harmony import */ var crypto_js_core__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! crypto-js/core */ "./node_modules/crypto-js/core.js");
/* harmony import */ var crypto_js_core__WEBPACK_IMPORTED_MODULE_51___default = /*#__PURE__*/__webpack_require__.n(crypto_js_core__WEBPACK_IMPORTED_MODULE_51__);
/* harmony import */ var _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./zego.docs.entity */ "./sdk/docsview/docs/zego.docs.entity.ts");
/* harmony import */ var _view_entities_error__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ../view/entities/error */ "./sdk/docsview/view/entities/error.ts");
/* harmony import */ var _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ../code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony import */ var _base64__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./base64 */ "./sdk/docsview/docs/base64.ts");
/* harmony import */ var _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ../view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");

























































var keyWA = crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_48___default.a.parse('89c78c018ed563571a3024342073c002');
var ivWA = crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_48___default.a.parse('0d9d89c53bd0a086834b411fe8387946');
var stateCenter = {
  preloadPPTH5CDNUsedMap: {}
};
var isPositiveNumber = function isPositiveNumber(val) {
  return val && !isNaN(val) && /^[1-9]\d*$/.test(String(val));
};
var isMobile = function isMobile() {
  if (window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) {
    return true; // 移动端
  } else {
    return false; // PC端
  }
}; // 根据后缀获取文档类型（允许文件类型待定）

var getFileType = function getFileType(file) {
  var result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeUnknown;
  var nameStr = typeof file === 'string' ? file : file.name,
      oldSuffix = nameStr.split('.').pop(),
      suffix = oldSuffix ? oldSuffix.toUpperCase() : oldSuffix;

  switch (suffix) {
    case 'XLSX':
    case 'XLS':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS; // xls

      break;

    case 'DOC':
    case 'DOCX':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDOC; // doc

      break;

    case 'PPT':
    case 'PPTX':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT; // ppt

      break;

    case 'TXT':
    case 'MD':
    case 'C':
    case 'CPP':
    case 'H':
    case 'HPP':
    case 'PY':
    case 'JS':
    case 'XML':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeTXT; // txt

      break;

    case 'PDF':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePDF; // pdf

      break;

    case 'JPG':
    case 'JPEG':
    case 'PNG':
    case 'BMP':
    case 'SVG':
    case 'HEIC':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG; // 图片

      break;

    case 'ZIP':
      result = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5; // ZIP

      break;
  }

  _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_Service'], 'getFileType', JSON.stringify({
    result: result
  }));
  return result;
};
var getExpectFileType = function getExpectFileType(renderType, fileType) {
  var result;

  switch (renderType) {
    case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeVector:
      result = _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__["ExpectFileType"].PDF;
      break;

    case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeIMG: // result = ExpectFileType.IMG;
    // break;

    case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeVectorAndIMG:
      result = fileType === _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG ? _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__["ExpectFileType"].IMG : _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__["ExpectFileType"].IMGAndPDF;
      break;

    case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeDynamicPPTH5:
      result = _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__["ExpectFileType"].PPTH5;
      break;

    default:
      result = _zego_docs_entity__WEBPACK_IMPORTED_MODULE_52__["ExpectFileType"].IMGAndPDF;
      break;
  }

  return result;
};

var stringifyU8array = function stringifyU8array(wordArray) {
  // Shortcuts
  var words = wordArray.words;
  var sigBytes = wordArray.sigBytes; // Convert

  var u8 = new Uint8Array(sigBytes);

  for (var i = 0; i < sigBytes; i++) {
    var _byte = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;

    u8[i] = _byte;
  }

  return u8;
};

function parseU8array(u8arr) {
  // Shortcut
  var len = u8arr.length; // Convert

  var words = [];

  for (var i = 0; i < len; i++) {
    words[i >>> 2] |= (u8arr[i] & 0xff) << 24 - i % 4 * 8;
  } // @ts-ignore


  return crypto_js_core__WEBPACK_IMPORTED_MODULE_51___default.a.lib.WordArray.create(words, len);
}

var decryptU8arry = function decryptU8arry(u8arr) {
  var contentWA = parseU8array(u8arr); // @ts-ignore

  var content = contentWA.toString(crypto_js_enc_base64__WEBPACK_IMPORTED_MODULE_49___default.a);
  var decrypted = crypto_js_aes__WEBPACK_IMPORTED_MODULE_47___default.a.decrypt(content, keyWA, {
    iv: ivWA,
    mode: crypto_js_core__WEBPACK_IMPORTED_MODULE_51___default.a.mode.CBC,
    padding: crypto_js_pad_nopadding__WEBPACK_IMPORTED_MODULE_50___default.a
  });
  return stringifyU8array(decrypted);
}; // 适配 docsview

var handleFileOfView = function handleFileOfView(fileID, data) {
  var h5 = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDynamicPPTH5;
  var file_type = data.file_type,
      expect_file_type = data.expect_file_type,
      file_name = data.file_name,
      width = data.width,
      height = data.height,
      split_file_list = data.split_file_list,
      file_urls = data.file_urls;
  var fileType = expect_file_type === h5 ? h5 : file_type;
  var isExcel = fileType === _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS;
  var obj = {
    file_id: fileID,
    file_name: file_name,
    file_type: fileType,
    width: width,
    height: height,
    file_size: data.file_size,
    file_hash: data.file_hash,
    expect_file_type: expect_file_type,
    file_urls: file_urls,
    notes: data.notes || [],
    thumbnails: data.thumbnails || [],
    cdn_hosts: data.cdn_hosts || [],
    preload: data.preload || []
  }; // 计算每一页宽高

  if (split_file_list) {
    var start_1 = 1;
    obj.file_list = split_file_list.map(function (v) {
      var res = {};

      if (isExcel) {
        var width_1 = Math.floor(v.width);
        var height_1 = Math.floor(v.height);
        res.name = file_name; // sheet name 去掉后缀

        res.file_name = v.file_name.replace(/\.[a-zA-Z]+$/, '');
        res.page_count = v.file_urls.length;
        res.page_list = v.file_urls.map(function (key, i) {
          return {
            width: width_1,
            height: height_1,
            src: key,
            virtual_page_list: [{
              width: width_1,
              height: height_1,
              virtual_page_number: i + start_1
            }]
          };
        }); // 和Electron保持一致的数据结构

        start_1 += v.file_urls.length;
      } else {
        var vpage_1 = 0;
        var pages_1 = [];
        v.split_data.forEach(function (item) {
          item.page_data.forEach(function (arr) {
            var width = Math.floor(arr[0]);
            var height = Math.floor(arr[1]);
            var num = arr[3];

            for (var i = 0; i < num; i++) {
              pages_1.push({
                width: width,
                height: height,
                src: file_urls[vpage_1++],
                virtual_page_list: [{
                  width: width,
                  height: height,
                  virtual_page_number: vpage_1
                }]
              });
            }
          });
        });
        res.file_name = file_name;
        res.page_count = data.page_count;
        res.page_list = pages_1;
      }

      return res;
    });
  } else {
    obj.file_list = [{
      file_name: file_name,
      page_count: data.page_count,
      page_list: file_urls.map(function (v, i) {
        return {
          width: width,
          height: height,
          src: v,
          virtual_page_list: [{
            width: width,
            height: height,
            virtual_page_number: i + 1
          }]
        };
      })
    }];
  }

  return obj;
};
var HTTP_TIME_OUT = 60000;

function changePreloadPPTH5CDN(host, hosts, rel, fileDir, event) {
  var requestURL;
  var preloadPPTH5CDNUsedMap = stateCenter.preloadPPTH5CDNUsedMap;

  if (host && hosts.length) {
    preloadPPTH5CDNUsedMap[host] = 1;
    var index = (hosts.findIndex(function (v) {
      return v === host;
    }) + 1) % hosts.length;

    if (!preloadPPTH5CDNUsedMap[hosts[index]]) {
      var host_1 = hosts[index];
      var xhr_1 = new XMLHttpRequest();
      xhr_1.timeout = HTTP_TIME_OUT;

      if (rel.includes('player.js') || rel.includes('ppt.js')) {
        // ppt 内嵌脚本资源路径与其他资源不同，需特殊处理
        xhr_1.open('GET', host_1 + '/' + rel);
      } else {
        xhr_1.open('GET', host_1 + fileDir + rel);
      }

      xhr_1.onerror = function (e) {
        reporLog('preload_quest_changeCDN_error', rel, host_1, e);
      };

      xhr_1.ontimeout = function (e) {
        reporLog('preload_quest_changeCDN_timeout', rel, host_1, '资源请求超时');
      };

      xhr_1.onloadend = function () {
        var isTarget = rel.includes('player.js') || rel.includes('ppt.js');

        if (xhr_1.status !== 200 && isTarget) {
          var error = {
            status: xhr_1.status,
            src: host_1 + '/' + rel,
            msg: xhr_1.responseText
          };
          reporLog('preload_quest_changeCDN_loadend', rel, host_1, error);
        }

        if (isTarget) {
          recordPerformance(host_1 + '/' + rel, event);
        }
      };

      xhr_1.onreadystatechange = function () {
        if (xhr_1.readyState == 4) {
          if (xhr_1.status != 200) {
            requestURL = false;
            var error = {
              status: xhr_1.status,
              src: host_1 + rel
            };
            reporLog('preload_quest_changeCDN_readystate', rel, host_1, error);
          } else {
            requestURL = true;
          }
        }
      };

      xhr_1.send(null);
      if (!requestURL) return false;
    }

    return true;
  } else {
    return false;
  }
} // 加载文件资源预加载


var preloadFile = function preloadFile(fileInfo) {
  return new Promise(function (resolve, reject) {
    var isH5 = fileInfo.expect_file_type === _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDynamicPPTH5 || fileInfo.expect_file_type === _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5;

    if (isH5 && fileInfo.preload) {
      if (!fileInfo.preload.slide_files) {
        resolve({
          totalFileNum: 0,
          failedFileNum: 0
        });
      }

      var totalList_1 = 0;
      var failedList_1 = 0;
      var result = [];
      var host_2 = fileInfo.file_urls[0].replace('index.html', '');
      var pptHost_1 = fileInfo.cdn_hosts[0];
      var fileDir_1 = host_2.split('zego.im')[1];
      var hosts_1 = fileInfo.cdn_hosts.reverse();
      var iframeRetry_1 = false;
      var iframePlayerLoaded_1 = false;

      try {
        var iframeDom_1 = document.createElement('iframe');
        iframeDom_1.id = 'preload_iframe' + fileInfo.file_hash;
        iframeDom_1.width = '0';
        iframeDom_1.height = '0';
        iframeDom_1.style.display = 'none';
        iframeDom_1.src = fileInfo.file_urls[0];
        document.body.appendChild(iframeDom_1);
        window.addEventListener('message', function (e) {
          var data = e.data; // {source, action, res}

          if (!data || data.source !== 'zegodocsview') return;
          var action = data.action;

          if (action == 'syncCurrentStep') {
            iframePlayerLoaded_1 = true;
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_View'], 'preload_iframe_postMsg', '预加载时 player.js 执行了内部方法');
          }
        });

        iframeDom_1.onerror = function (e) {
          _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().error(['DocsView_View'], 'preload_iframe_load_error', JSON.stringify({
            result: e
          }));
        }; // 加载完毕且在60s内判断脚本是否执行完毕作为重试标识
        // 如果动态ppt转码文件访问之后加载了player.js 正常执行完start方法和传入的回调，往外抛 action


        setTimeout(function () {
          if (!iframeRetry_1) {
            var src = iframeDom_1.src;

            if (!iframePlayerLoaded_1) {
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().warn(['DocsView_Service'], 'preload_iframe_retry', JSON.stringify({
                result: '60s 内未执行 start 内部方法认为加载失败，iframe 开始重试'
              }));
              iframeRetry_1 = true;

              if (hosts_1.length > 1) {
                // 切换重试
                iframeDom_1.src = src.replace(hosts_1[1], hosts_1[0]);
              } else {
                // 仅一个cdn
                document.body.removeChild(iframeDom_1);
                iframeDom_1.src = src;
                document.body.appendChild(iframeDom_1);
              }

              iframePlayerLoaded_1 = false;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().warn(['DocsView_View'], 'preload_iframe_retry_cdn', JSON.stringify({
                src: iframeDom_1.src
              }));
            } else {
              document.body.removeChild(iframeDom_1);
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_View'], 'preload_iframe_load', JSON.stringify({
                result: 'suc'
              }));
            }
          }
        }, 60000);
        setTimeout(function () {
          if (iframeRetry_1) {
            document.body.removeChild(iframeDom_1);
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_View'], 'preload_iframe_load', JSON.stringify({
              result: '重试完毕',
              iframePlayerLoaded: iframePlayerLoaded_1
            }));
          }
        }, 120000);
      } catch (error) {
        _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_View'], 'preload_iframe_error', JSON.stringify({
          result: error
        }));
      }

      if (!fileInfo.preload.preload_js) {
        _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().error(['DocsView_View'], 'preload_quest_error', 'preload_js 不存在');
      }

      fileInfo.preload.preload_js && fileInfo.preload.preload_js.forEach(function (value) {
        try {
          var xhr_2 = new XMLHttpRequest();
          xhr_2.timeout = HTTP_TIME_OUT; // ppt 内嵌脚本资源路径与其他资源不同，需特殊处理

          xhr_2.open('GET', pptHost_1 + '/' + value.rel);

          xhr_2.onerror = function (e) {
            changePreloadPPTH5CDN(host_2, hosts_1, value.rel, fileDir_1, 'onerror');
            reporLog('preload_quest_error', value.rel, host_2, e);
            reject(e);
          };

          xhr_2.ontimeout = function (e) {
            changePreloadPPTH5CDN(host_2, hosts_1, value.rel, fileDir_1, 'ontimeout');
            reporLog('preload_quest_timeoout', value.rel, host_2, '资源请求超时');
            reject(e);
          };

          xhr_2.onloadend = function () {
            if (xhr_2.status !== 200) {
              var error = {
                status: xhr_2.status,
                src: host_2 + value.rel,
                msg: xhr_2.responseText
              };
              reporLog('preload_quest_loadend', value.rel, host_2, error);
            }

            recordPerformance(value.rel);
          };

          xhr_2.onreadystatechange = function () {
            // 后台处理完成
            if (xhr_2.readyState == 4) {
              totalList_1++; // 处理结果OK

              if (xhr_2.status != 200) {
                var error = {
                  status: xhr_2.status,
                  src: host_2 + value.rel
                };
                reporLog('preload_quest_readystate', value.rel, host_2, error);
                var res = changePreloadPPTH5CDN(host_2, hosts_1, value.rel, fileDir_1, 'onreadystatechange');
                !res && failedList_1++;
              }
            } else {
              if (xhr_2.status != 200) {
                var error = {
                  status: xhr_2.status,
                  src: host_2 + value.rel,
                  msg: xhr_2.statusText
                };
                reporLog('preload_onreadystate_error', value.rel, host_2, error);
              }
            }
          };

          xhr_2.send(null);
        } catch (e) {
          changePreloadPPTH5CDN(host_2, hosts_1, value.rel, fileDir_1, 'trycatch');
          reporLog('preload_quest_error', value.rel, host_2, e);
        }
      });
      fileInfo.preload.slide_files.forEach(function (value) {
        for (var key in value) {
          value[key].forEach(function (value) {
            try {
              var xhr_3 = new XMLHttpRequest();
              xhr_3.timeout = HTTP_TIME_OUT;
              xhr_3.open('GET', host_2 + value.rel);

              xhr_3.onreadystatechange = function () {
                if (xhr_3.readyState == 4) {
                  totalList_1++;

                  if (xhr_3.status != 200) {
                    var error = {
                      status: xhr_3.status,
                      src: host_2 + value.rel
                    };
                    var res = changePreloadPPTH5CDN(host_2, hosts_1, value.rel, fileDir_1);
                    !res && failedList_1++;
                  }
                }
              };

              xhr_3.send(null);
            } catch (e) {}
          });
        }
      });
      resolve({
        totalFileNum: totalList_1,
        failedFileNum: failedList_1
      });
    } else {
      reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_53__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_54__["ZegoDocsViewError"].ZegoDocsViewErrorCacheNotSupported));
    }
  });
};

var recordPerformance = function recordPerformance(name, event) {
  //@ts-ignore
  if (!window.performance && !window.performance.getEntries) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().error(['DocsView_Service'], 'preload_performance', JSON.stringify({
      result: '该浏览器不支持监测 performance'
    }));
  } else {
    window.performance.getEntries().forEach(function (item) {
      if (item.name.includes(name)) {
        var data = {
          event: event,
          name: item.name,
          duration: item.duration,
          // 重定向时间
          redirectTime: item.redirectEnd - item.redirectStart,
          // DNS 查询时间
          DNSTime: item.domainLookupEnd - item.domainLookupStart,
          // DNS 缓存时间
          appacche: item.domainLookupStart - item.fetchStart,
          // 资源加载时间
          HTTPQuest: item.responseEnd - item.requestStart,
          // TCP 建立连接完成握手时间
          TCP: item.connectEnd - item.connectStart,
          origin: item
        };
        _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().info(['DocsView_Service'], 'preload_performance', JSON.stringify({
          data: data
        }));
      }
    });
  }
};

var reporLog = function reporLog(action, url, host, e) {
  if (url.includes('player.js') || url.includes('ppt.js')) {
    var error = {
      message: e,
      src: host + url
    };
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_56__["Logger"].getInstance().error(['DocsView_Service'], action, JSON.stringify({
      result: error
    }));
  }
};

function getUint64(byteOffset, littleEndian, dv) {
  // split 64-bit number into two 32-bit parts
  var left = dv.getUint32(byteOffset, littleEndian);
  var right = dv.getUint32(byteOffset + 4, littleEndian); // combine the two 32-bit values

  var combined = littleEndian ? left + Math.pow(2, 32) * right : Math.pow(2, 32) * left + right;
  if (!Number.isSafeInteger(combined)) console.warn(combined, 'exceeds MAX_SAFE_INTEGER. Precision may be lost');
  return combined;
} // 返回 token 过期时间点，单位 s


var decodeTokenExpire = function decodeTokenExpire(token) {
  try {
    var u8 = Uint8Array.from(_base64__WEBPACK_IMPORTED_MODULE_55__["Base64"].base64decode(token), function (c) {
      return c.charCodeAt(0);
    });
    var dv = new DataView(u8.buffer);
    var expire = void 0;

    if (typeof dv.getBigInt64 === 'function') {
      expire = dv.getBigUint64(0);
    } else {
      expire = getUint64(0, false, dv);
    }

    if (expire > 0) {
      return Number(expire);
    } else {
      return Number(dv.getBigUint64(0, true));
    }
  } catch (err) {
    console.error('token error');
  }

  return -1;
};

/***/ }),

/***/ "./sdk/docsview/docs/zego.docs.entity.ts":
/*!***********************************************!*\
  !*** ./sdk/docsview/docs/zego.docs.entity.ts ***!
  \***********************************************/
/*! exports provided: HTTP_TIME, UPLOAD_HTTP_TIME, TXTSuffixEnum, IMGSuffixEnum, PDFSuffixEnum, EXCELSuffixEnum, WORDSuffixEnum, PPTSuffixEnum, ExpectFileType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTTP_TIME", function() { return HTTP_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UPLOAD_HTTP_TIME", function() { return UPLOAD_HTTP_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TXTSuffixEnum", function() { return TXTSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMGSuffixEnum", function() { return IMGSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PDFSuffixEnum", function() { return PDFSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EXCELSuffixEnum", function() { return EXCELSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WORDSuffixEnum", function() { return WORDSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PPTSuffixEnum", function() { return PPTSuffixEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpectFileType", function() { return ExpectFileType; });
var HTTP_TIME = 15000; // 15s

var UPLOAD_HTTP_TIME = 3600000; // 1h
// TXT

var TXTSuffixEnum;

(function (TXTSuffixEnum) {
  TXTSuffixEnum[TXTSuffixEnum["TXT"] = 0] = "TXT";
  TXTSuffixEnum[TXTSuffixEnum["MD"] = 1] = "MD";
  TXTSuffixEnum[TXTSuffixEnum["C"] = 2] = "C";
  TXTSuffixEnum[TXTSuffixEnum["CPP"] = 3] = "CPP";
  TXTSuffixEnum[TXTSuffixEnum["H"] = 4] = "H";
  TXTSuffixEnum[TXTSuffixEnum["HPP"] = 5] = "HPP";
  TXTSuffixEnum[TXTSuffixEnum["PY"] = 6] = "PY";
  TXTSuffixEnum[TXTSuffixEnum["JS"] = 7] = "JS";
  TXTSuffixEnum[TXTSuffixEnum["XML"] = 8] = "XML";
})(TXTSuffixEnum || (TXTSuffixEnum = {})); // IMG


var IMGSuffixEnum;

(function (IMGSuffixEnum) {
  IMGSuffixEnum[IMGSuffixEnum["JPG"] = 0] = "JPG";
  IMGSuffixEnum[IMGSuffixEnum["JPEG"] = 1] = "JPEG";
  IMGSuffixEnum[IMGSuffixEnum["PNG"] = 2] = "PNG";
  IMGSuffixEnum[IMGSuffixEnum["BMP"] = 3] = "BMP";
  IMGSuffixEnum[IMGSuffixEnum["SVG"] = 4] = "SVG";
  IMGSuffixEnum[IMGSuffixEnum["HEIC"] = 5] = "HEIC";
})(IMGSuffixEnum || (IMGSuffixEnum = {})); // PDF


var PDFSuffixEnum;

(function (PDFSuffixEnum) {
  PDFSuffixEnum[PDFSuffixEnum["PDF"] = 0] = "PDF";
})(PDFSuffixEnum || (PDFSuffixEnum = {})); // EXCEL


var EXCELSuffixEnum;

(function (EXCELSuffixEnum) {
  EXCELSuffixEnum[EXCELSuffixEnum["XLSX"] = 0] = "XLSX";
  EXCELSuffixEnum[EXCELSuffixEnum["XLS"] = 1] = "XLS";
})(EXCELSuffixEnum || (EXCELSuffixEnum = {})); // WORD


var WORDSuffixEnum;

(function (WORDSuffixEnum) {
  WORDSuffixEnum[WORDSuffixEnum["DOC"] = 0] = "DOC";
  WORDSuffixEnum[WORDSuffixEnum["DOCX"] = 1] = "DOCX";
})(WORDSuffixEnum || (WORDSuffixEnum = {})); // PPT


var PPTSuffixEnum;

(function (PPTSuffixEnum) {
  PPTSuffixEnum[PPTSuffixEnum["PPT"] = 0] = "PPT";
  PPTSuffixEnum[PPTSuffixEnum["PPTX"] = 1] = "PPTX";
})(PPTSuffixEnum || (PPTSuffixEnum = {})); // 支持转换的文件类型


var ExpectFileType;

(function (ExpectFileType) {
  ExpectFileType[ExpectFileType["PPT"] = 1] = "PPT";
  ExpectFileType[ExpectFileType["DOC"] = 2] = "DOC";
  ExpectFileType[ExpectFileType["ELS"] = 4] = "ELS";
  ExpectFileType[ExpectFileType["PDF"] = 8] = "PDF";
  ExpectFileType[ExpectFileType["IMG"] = 16] = "IMG";
  ExpectFileType[ExpectFileType["TXT"] = 32] = "TXT";
  ExpectFileType[ExpectFileType["H5"] = 64] = "H5";
  ExpectFileType[ExpectFileType["H5PDF"] = 128] = "H5PDF";
  ExpectFileType[ExpectFileType["IMGAndPDF"] = 256] = "IMGAndPDF";
  ExpectFileType[ExpectFileType["PPTH5"] = 512] = "PPTH5";
  ExpectFileType[ExpectFileType["H5ZIP"] = 4096] = "H5ZIP"; // h5 课件
})(ExpectFileType || (ExpectFileType = {}));

/***/ }),

/***/ "./sdk/docsview/docs/zego.docs.ts":
/*!****************************************!*\
  !*** ./sdk/docsview/docs/zego.docs.ts ***!
  \****************************************/
/*! exports provided: ZegoDocsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsService", function() { return ZegoDocsService; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _view_entities_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../view/entities/error */ "./sdk/docsview/view/entities/error.ts");
/* harmony import */ var _platform_zego_docs_web__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./platform/zego.docs.web */ "./sdk/docsview/docs/platform/zego.docs.web.ts");
/* harmony import */ var _zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./zego.docs.dep */ "./sdk/docsview/docs/zego.docs.dep.ts");
/* harmony import */ var _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony import */ var _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./zego.docs.entity */ "./sdk/docsview/docs/zego.docs.entity.ts");
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
/* harmony import */ var _platform_local_config__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./platform/local_config */ "./sdk/docsview/docs/platform/local_config.ts");















var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var isProd = "production" === 'production';
var platform = "".indexOf('wx') !== -1 ? 'wx' : 'web';
var isPrivateServer = "".indexOf('private') !== -1;

var ZegoDocsService =
/** @class */
function () {
  function ZegoDocsService(config) {
    this.commonParams = {
      platform: platform === 'wx' ? 16 : 32,
      app_id: 0,
      web_token: '',
      id_name: ''
    }; // 基础数据

    this.stateCenter = {
      env: '',
      cancelMap: {},
      preloadPPTH5CDNUsedMap: {}
    }; // 预加载课件资源ID

    this.preloadFileArr = [];
    this.tokenTimer = null;
    this.timerArr = [];

    if (!config || !config.appID || isNaN(config.appID) || !config.token) {
      throw new Error('constructor parameter error.');
    }

    this.renewLocalToken(config.token);
    this.platformAPI = new _platform_zego_docs_web__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsPlatformImpl"]();
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().initInfo({
      appID: config.appID,
      version: this.getVersion(),
      isTestEnv: !!config.isTestEnv,
      isProd: isProd
    });
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().initRoomInfo({
      roomID: '',
      userID: config.userID,
      token: config.token
    });
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'new', JSON.stringify({
      isProd: isProd
    }));
    this.init(config);
  }

  ZegoDocsService.prototype.renewToken = function (token) {
    if (!token) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().error(['DocsView_Service'], 'renewToken', 'token is null');
      return false;
    }

    this.commonParams.web_token = token;
    this.renewLocalToken(token);
    return true;
  };

  ZegoDocsService.prototype.renewLocalToken = function (token, remainTime) {
    this.token = token;
    var currentTime = new Date().getTime();
    var remainTimeResult = undefined;

    if (remainTime && typeof remainTime === 'number') {
      remainTimeResult = remainTime * 1000;
    } else if (['03', '04'].includes(token.substring(0, 2))) {
      remainTimeResult = Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["decodeTokenExpire"])(token.substring(2)) * 1000 - currentTime;
    } else {
      return;
    }

    remainTimeResult && this.resetTokenTimer(remainTimeResult);
  };

  ZegoDocsService.prototype.resetTokenTimer = function (interval) {
    var _this = this;

    interval = interval - 30 * 1000; // 三十秒前就提示将要过期时间

    interval = interval < 0 ? 0 : interval;
    interval = interval > 2147483648 ? 2147483648 : interval; // 2147483648是超时时间最大值,超过该值立刻执行回调

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'resetTokenTimer', JSON.stringify({
      interval: interval
    }));

    if (this.tokenTimer) {
      if (this.timerArr[this.tokenTimer]) {
        this.timerArr[this.tokenTimer]();
      }

      clearTimeout(this.tokenTimer);
    }

    this.tokenTimer = setTimeout(function () {
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_19__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_19__["ZegoDocsEventType"].TokenWillExpire);
      delete _this.timerArr[_this.tokenTimer];
    }, interval);
    this.timerArr[this.tokenTimer] = this.startTimer;
  };

  ZegoDocsService.prototype.startTimer = function () {
    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_19__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_19__["ZegoDocsEventType"].TokenWillExpire);
  };

  ZegoDocsService.prototype.init = function (config) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'init', JSON.stringify({
      config: config
    }));
    var token = config.token,
        appID = config.appID,
        userID = config.userID,
        isTestEnv = config.isTestEnv;
    this.commonParams.app_id = appID;
    this.commonParams.web_token = token;
    this.commonParams.id_name = userID || '';
    this.config = {
      domain: isPrivateServer ? '' : this.getDomain('')
    }; // 设置域名信息，默认正式环境

    this.setTestEnv(!!isTestEnv);
  };

  ZegoDocsService.prototype.getDomain = function (env) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'getDomain', "https://docservice" + env + ".zego.im");
    return "https://docservice" + env + ".zego.im";
  };

  ZegoDocsService.prototype.isInvalidDomain = function () {
    var isInvalid = !this.stateCenter.env && !this.config.domain;
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'getDomain', JSON.stringify({
      isInvalid: isInvalid
    }));
    return isInvalid;
  };

  ZegoDocsService.prototype.getVersion = function () {
    return "2.2.3";
  };

  ZegoDocsService.prototype.setTestEnv = function (isTest) {
    if (typeof isTest === 'boolean') this.stateCenter.env = isTest ? '-test' : '';
    var originList = _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].updateOriginList(this.stateCenter.env, isPrivateServer, this.config.domain);
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service', 'Request_Retry'], 'updateOriginList', JSON.stringify(originList));
  };

  ZegoDocsService.prototype.setConfig = function (key, value) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.setConfig', JSON.stringify({
      key: key,
      value: value
    }));
    if (!key || void 0 == value) return false;
    var keys = ['dynamicPPT_HD', 'dynamicPPT_AutomaticPage', _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoConfigKey"].Domain, _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoConfigKey"].ThumbnailMode];

    if (keys.includes(key)) {
      this.config[key] = value; // 如果重新设置了domain,则重新设置一下环境

      if (key === _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoConfigKey"].Domain) this.setTestEnv();
    } else {
      // set_alpha_env 不对外暴露
      this.stateCenter.env = value === 'true' || value === true ? '-alpha' : '-test';
      this.setTestEnv();
    }

    return true;
  };

  ZegoDocsService.prototype.getConfig = function (key) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.getConfig', JSON.stringify({
      key: key,
      value: this.config[key]
    }));
    return this.config[key];
  };

  ZegoDocsService.prototype.decryptImage = function (url) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'decryptImage', JSON.stringify({
      url: url
    }));
    return this.platformAPI.decryptImage(url);
  };

  ZegoDocsService.prototype.uploadH5File = function (file, config, listener) {
    return __awaiter(this, void 0, void 0, function () {
      var fileType, fileSize, fileHash, statusInfo, fileID, e_1, error;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.uploadH5File', JSON.stringify({
              file: file,
              config: config
            }));

            if (!file || !config || !Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["isPositiveNumber"])(config.width) || !Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["isPositiveNumber"])(config.height) || !Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["isPositiveNumber"])(config.pageCount) || config.thumbnailList && config.thumbnailList.length && config.thumbnailList.length !== config.pageCount) {
              return [2
              /*return*/
              , Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid))];
            }

            _a.label = 1;

          case 1:
            _a.trys.push([1, 5,, 6]);

            fileType = Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["getFileType"])(file);

            if (fileType != _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5) {
              return [2
              /*return*/
              , Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorZipFileInvalid))];
            }

            return [4
            /*yield*/
            , this.platformAPI.getFileSize(file)];

          case 2:
            fileSize = _a.sent();

            if (!this.checkSizeHandle(fileType, fileSize)) {
              return [2
              /*return*/
              , Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit))];
            }

            return [4
            /*yield*/
            , this.platformAPI.getMd5(file)];

          case 3:
            fileHash = _a.sent();
            return [4
            /*yield*/
            , this.queryStatus({
              fileHash: fileHash,
              fileType: fileType,
              expectFileType: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["ExpectFileType"].H5ZIP
            })];

          case 4:
            statusInfo = _a.sent();
            fileID = statusInfo.fileID;
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadH5File', JSON.stringify({
              fileType: fileType,
              fileSize: fileSize,
              fileHash: fileHash,
              statusInfo: statusInfo,
              fileID: fileID
            }));

            if (fileID) {
              return [2
              /*return*/
              , Promise.resolve(fileID)];
            }

            return [3
            /*break*/
            , 6];

          case 5:
            e_1 = _a.sent();
            error = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorUploadFailed);
            return [2
            /*return*/
            , Promise.reject(__assign(__assign({}, error), {
              error: e_1
            }))];

          case 6:
            return [2
            /*return*/
            , this.platformAPI.uploadH5File(file, config, listener, __assign(__assign({}, this.commonParams), {
              url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().uploadH5Url
            })).then(function (_a) {
              var _b;

              var data = _a.data;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadH5File', JSON.stringify({
                params: config,
                file: _this.platformAPI.getFileName(file),
                result: data
              }));
              var code = (_b = data.ret) === null || _b === void 0 ? void 0 : _b.code;
              if (code === 0) return data.file_id;
              return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(code));
            })["catch"](function (e) {
              var _a;

              if (((_a = e === null || e === void 0 ? void 0 : e.response) === null || _a === void 0 ? void 0 : _a.status) === 413) {
                throw Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit);
              } else {
                throw e;
              }
            })];
        }
      });
    });
  };

  ZegoDocsService.prototype.uploadFile = function (uploadParams) {
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.uploadFile', JSON.stringify({
      uploadParams: uploadParams
    }));
    if (!uploadParams.file || typeof uploadParams.renderType !== 'number' || isNaN(uploadParams.renderType)) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid));
    if (uploadParams.file instanceof File && uploadParams.file.size === 0) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentEmpty));
    if (this.isInvalidDomain()) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain)); // 上传并转换文档

    return this.uploadProgress(uploadParams).then(function (res) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadFile', JSON.stringify({
        params: uploadParams,
        result: res
      }));
      return res;
    });
  };

  ZegoDocsService.prototype.loadFile = function (fileID) {
    var _this = this;

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.loadFile', JSON.stringify({
      fileID: fileID
    }));
    if (this.isInvalidDomain()) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain));
    if (!fileID) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var sendData, result, data, iframeDom, error_1;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              sendData = __assign(__assign({}, this.commonParams), {
                file_id: fileID
              });
              return [4
              /*yield*/
              , this.platformAPI.request({
                url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().queryUrl,
                method: 'post',
                timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["HTTP_TIME"],
                data: sendData
              })];

            case 1:
              result = _a.sent();
              data = result.data;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'loadFile', JSON.stringify({
                data: data
              }));

              if (data.ret.code === 0) {
                data.file_urls = data.file_urls || [];
                data.page_count = data.page_count || data.file_urls.length || 1;
                iframeDom = document.getElementById('preload_iframe' + data.file_hash);
                iframeDom && document.body.removeChild(iframeDom);
                resolve(Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["handleFileOfView"])(fileID, data));
              } else {
                reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(data.ret.code, data.ret.message));
              }

              return [3
              /*break*/
              , 3];

            case 2:
              error_1 = _a.sent();
              reject(error_1);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  }; // 预加载 H5 文件资源


  ZegoDocsService.prototype.cacheFile = function (fileID) {
    var _this = this;

    var _a;

    if (((_a = this.preloadFileArr) === null || _a === void 0 ? void 0 : _a.length) > 0 && this.preloadFileArr.includes(fileID)) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.cacheFile', JSON.stringify({
        preloadFileArr: this.preloadFileArr
      }));
      return Promise.resolve();
    } else {
      this.preloadFileArr.push(fileID);
    }

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.cacheFile', JSON.stringify({
      fileID: fileID
    }));
    if (this.isInvalidDomain()) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain));
    if (!fileID) return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var sendData, result, data, preloadData, error_2;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 5,, 6]);

              sendData = __assign(__assign({}, this.commonParams), {
                file_id: fileID
              });
              return [4
              /*yield*/
              , this.platformAPI.request({
                url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().queryUrl,
                method: 'post',
                timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["HTTP_TIME"],
                data: sendData
              })];

            case 1:
              result = _a.sent();
              data = result.data;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'cacheFile', JSON.stringify({
                data: data
              }));
              if (!(data.ret.code === 0)) return [3
              /*break*/
              , 3];
              return [4
              /*yield*/
              , Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["preloadFile"])(data)];

            case 2:
              preloadData = _a.sent();
              resolve(preloadData);
              return [3
              /*break*/
              , 4];

            case 3:
              reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(data.ret.code, data.ret.message));
              _a.label = 4;

            case 4:
              return [3
              /*break*/
              , 6];

            case 5:
              error_2 = _a.sent();
              reject(error_2);
              return [3
              /*break*/
              , 6];

            case 6:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  }; // 取消文档转码请求


  ZegoDocsService.prototype.cancelUploadFile = function (cancelCvtParams) {
    var _this = this;

    var fileHash = cancelCvtParams.fileHash,
        taskID = cancelCvtParams.taskID;
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'API.cancelUploadFile', JSON.stringify({
      fileHash: fileHash,
      taskID: taskID
    })); // 还在上传阶段时，上传完成后再取消

    if (!taskID) {
      return new Promise(function (resolve, reject) {
        _this.stateCenter.cancelMap[fileHash] = true;
        resolve(true);
      });
    }

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var sendData, result, data, error_3;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              sendData = __assign(__assign({}, this.commonParams), {
                task_id: taskID
              });
              return [4
              /*yield*/
              , this.platformAPI.request({
                url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().cancelCvtUrl,
                method: 'post',
                timeout: _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["HTTP_TIME"],
                data: sendData
              })];

            case 1:
              result = _a.sent();
              data = result.data;

              if (data.ret.code === 0) {
                this.stateCenter.cancelMap[fileHash] = taskID;
                _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'cancelUploadFile', JSON.stringify({
                  result: cancelCvtParams
                }));
                resolve(true);
              } else {
                reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(data.ret.code, data.ret.message));
              }

              return [3
              /*break*/
              , 3];

            case 2:
              error_3 = _a.sent();
              reject(error_3);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoDocsService.prototype.uploadSucceedAfter = function (params) {
    var result = params.result,
        onProgress = params.onProgress,
        resolve = params.resolve;
    onProgress && onProgress(result);
    resolve && resolve(result.fileID);
  };

  ZegoDocsService.prototype.uploadFailedAfter = function (reject, result) {
    reject && reject(result);
  };

  ZegoDocsService.prototype.uploadProgressInit = function (progressCvtParams) {
    return __awaiter(this, void 0, void 0, function () {
      var statusInitSub, file, fileName, onProgress, _a, oss, fileServerProvider, fileHash, sfs, isCancel;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            statusInitSub = progressCvtParams.statusInitSub, file = progressCvtParams.file, fileName = progressCvtParams.fileName, onProgress = progressCvtParams.onProgress;
            _a = statusInitSub, oss = _a.oss, fileServerProvider = _a.fileServerProvider, fileHash = _a.fileHash, sfs = _a.sfs;
            isCancel = this.stateCenter.cancelMap[fileHash];
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgressInit', JSON.stringify({
              progressCvtParams: progressCvtParams,
              statusInitSub: statusInitSub,
              isCancel: isCancel
            }));

            if (isCancel) {
              onProgress && onProgress({
                status: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERT_CANCEL,
                fileName: fileName,
                fileHash: fileHash
              });
              this.stateCenter.cancelMap[fileHash] = false;
              return [2
              /*return*/
              , false];
            } // case1：文件未上传


            return [4
            /*yield*/
            , this.platformAPI.uploadDoc({
              file: file,
              fileServerProvider: fileServerProvider,
              oss: oss,
              sfs: sfs,
              fileHash: fileHash,
              fileName: fileName,
              onProgress: onProgress
            }, this.stateCenter.cancelMap[fileHash], this.commonParams)];

          case 1:
            // case1：文件未上传
            _b.sent();

            onProgress && onProgress({
              status: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].UPLOADED,
              fileName: fileName,
              fileHash: fileHash
            }); // 请求创建文档转码任务

            return [4
            /*yield*/
            , this.uploadProgressCvt(progressCvtParams)];

          case 2:
            // 请求创建文档转码任务
            _b.sent();

            return [2
            /*return*/
            , true];
        }
      });
    });
  };

  ZegoDocsService.prototype.uploadProgressCvt = function (progressCvtParams) {
    return __awaiter(this, void 0, void 0, function () {
      var file, onProgress, fileType, fileHash, fileName, originReslove, resolve, expectFileType, originReject, reject, isCancel, createCvtDocResult, _a, _b, uploadProgressParams;

      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            file = progressCvtParams.file, onProgress = progressCvtParams.onProgress, fileType = progressCvtParams.fileType, fileHash = progressCvtParams.fileHash, fileName = progressCvtParams.fileName, originReslove = progressCvtParams.originReslove, resolve = progressCvtParams.resolve, expectFileType = progressCvtParams.expectFileType, originReject = progressCvtParams.originReject, reject = progressCvtParams.reject;
            isCancel = this.stateCenter.cancelMap[fileHash];
            onProgress && onProgress({
              status: isCancel ? _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERT_CANCEL : _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].UPLOADED,
              fileName: fileName,
              fileHash: fileHash
            });

            if (isCancel) {
              this.stateCenter.cancelMap[fileHash] = false;
              return [2
              /*return*/
              , false];
            }

            _a = this.createCvtDoc;
            _b = {};
            return [4
            /*yield*/
            , this.platformAPI.getFileSize(file)];

          case 1:
            return [4
            /*yield*/
            , _a.apply(this, [(_b.fileSize = _c.sent(), _b.fileName = this.platformAPI.getFileName(file), _b.fileType = fileType, _b.fileHash = fileHash, _b.expectFileType = expectFileType, _b)])];

          case 2:
            createCvtDocResult = _c.sent();
            uploadProgressParams = {
              fileName: fileName,
              fileHash: fileHash,
              taskID: createCvtDocResult.taskID,
              onProgress: onProgress
            };
            _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgressCvt', JSON.stringify({
              uploadProgressParams: uploadProgressParams
            }));
            return [4
            /*yield*/
            , this.uploadProgress(uploadProgressParams, originReslove || resolve, originReject || reject)];

          case 3:
            _c.sent();

            return [2
            /*return*/
            , true];
        }
      });
    });
  };

  ZegoDocsService.prototype.checkTypeHandle = function (fileType) {
    return fileType !== _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeUnknown;
  };

  ZegoDocsService.prototype.checkRenderTypeHandle = function (fileType, renderType) {
    if ((renderType == _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeVectorAndIMG || renderType == _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeIMG) && fileType == _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'checkRenderTypeHandle', 'false');
      return false;
    }

    if (renderType == _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewRenderType"].ZegoDocsViewRenderTypeDynamicPPTH5 && fileType !== _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'checkRenderTypeHandle', 'false');
      return false;
    }

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'checkRenderTypeHandle', 'true');
    return true;
  };

  ZegoDocsService.prototype.checkSizeHandle = function (fileType, fileSize) {
    // web文件上传大小限制  ppt:500m word:100m pdf:100m img:100m excel:10m txt::2m zip:50m
    var file_type_size_limit = _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFileLimit();
    var _a = file_type_size_limit[0],
        pptLimit = _a[1],
        _b = file_type_size_limit[1],
        wordLimit = _b[1],
        _c = file_type_size_limit[2],
        excelLimit = _c[1],
        _d = file_type_size_limit[3],
        pdfLimit = _d[1],
        _e = file_type_size_limit[4],
        imgLimit = _e[1],
        _f = file_type_size_limit[5],
        txtLimit = _f[1],
        _g = file_type_size_limit[6],
        customH5Limit = _g[1];
    var result = true;

    switch (fileType) {
      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT:
        if (fileSize > pptLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDOC:
        if (fileSize > wordLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePDF:
        if (fileSize > pdfLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG:
        if (fileSize > imgLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS:
        if (fileSize > excelLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeTXT:
        if (fileSize > txtLimit) result = false;
        break;

      case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5:
        if (fileSize > customH5Limit) result = false;
        break;

      default:
        break;
    }

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'checkSizeHandle', JSON.stringify({
      result: result
    }));
    return result;
  };

  ZegoDocsService.prototype.uploadProgress = function (uploadParams, originReslove, originReject) {
    var _this = this;

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgress', JSON.stringify({
      uploadParams: uploadParams
    })); // 上传并转换文档

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var fileHash, fileName, fileSize, fileType, _a, file, renderType, statusInfo, expectFileType, params, status_1, _b, isCancel, newTaskID_1, error_4;

        var _this = this;

        return __generator(this, function (_c) {
          switch (_c.label) {
            case 0:
              fileHash = '', fileName = '', fileSize = 0, fileType = _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeUnknown;
              _c.label = 1;

            case 1:
              _c.trys.push([1, 19,, 20]);

              _a = uploadParams, file = _a.file, renderType = _a.renderType;
              statusInfo = void 0, expectFileType = _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["ExpectFileType"].PDF;
              if (!file) return [3
              /*break*/
              , 5];

              if (!_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewRenderType"][renderType]) {
                return [2
                /*return*/
                , reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType))];
              }

              fileType = Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["getFileType"])(file); // 检查文件类型是否异常

              if (!this.checkTypeHandle(fileType)) {
                return [2
                /*return*/
                , reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid))];
              } // 检查 文件类型 和 渲染类型 是否匹配


              if (!this.checkRenderTypeHandle(fileType, renderType)) {
                return [2
                /*return*/
                , reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType))];
              }

              return [4
              /*yield*/
              , this.platformAPI.getFileSize(file)];

            case 2:
              // 检查文件大小
              fileSize = _c.sent();

              if (!this.checkSizeHandle(fileType, fileSize)) {
                return [2
                /*return*/
                , reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit))];
              }

              fileName = this.platformAPI.getFileName(file);
              expectFileType = Object(_zego_docs_dep__WEBPACK_IMPORTED_MODULE_16__["getExpectFileType"])(renderType, fileType);
              return [4
              /*yield*/
              , this.platformAPI.getMd5(file)];

            case 3:
              fileHash = _c.sent();
              return [4
              /*yield*/
              , this.queryStatus({
                fileHash: fileHash,
                fileType: fileType,
                expectFileType: expectFileType
              })];

            case 4:
              statusInfo = _c.sent();
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgress_query', JSON.stringify({
                fileName: fileName,
                expectFileType: expectFileType,
                fileHash: fileHash,
                statusInfo: statusInfo
              }));
              return [3
              /*break*/
              , 7];

            case 5:
              params = uploadParams;
              fileName = params.fileName;
              fileHash = params.fileHash;
              return [4
              /*yield*/
              , this.queryStatus({
                taskID: params.taskID
              })];

            case 6:
              statusInfo = _c.sent();
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgress_query', JSON.stringify({
                params: params,
                statusInfo: statusInfo
              }));
              _c.label = 7;

            case 7:
              status_1 = statusInfo.status;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'uploadProgress_status', JSON.stringify({
                status: status_1
              }));
              _b = status_1;

              switch (_b) {
                case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].UPLOADING:
                  return [3
                  /*break*/
                  , 8];

                case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].UPLOADED:
                  return [3
                  /*break*/
                  , 10];

                case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].WAITING:
                  return [3
                  /*break*/
                  , 12];

                case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERTING:
                  return [3
                  /*break*/
                  , 12];

                case _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERTED:
                  return [3
                  /*break*/
                  , 16];
              }

              return [3
              /*break*/
              , 17];

            case 8:
              // 未上传：上传至oss + 创建转码任务
              return [4
              /*yield*/
              , this.uploadProgressInit({
                file: file,
                expectFileType: expectFileType,
                fileType: fileType,
                fileHash: fileHash,
                fileName: fileName,
                statusInitSub: statusInfo,
                onProgress: uploadParams.onProgress,
                originReslove: originReslove,
                resolve: resolve,
                originReject: originReject,
                reject: reject
              })];

            case 9:
              _c.sent();

              return [3
              /*break*/
              , 18];

            case 10:
              // 已上传，但未转换
              return [4
              /*yield*/
              , this.uploadProgressCvt({
                file: file,
                expectFileType: expectFileType,
                fileType: fileType,
                fileHash: fileHash,
                fileName: fileName,
                onProgress: uploadParams.onProgress,
                originReslove: originReslove,
                resolve: resolve,
                originReject: originReject,
                reject: reject
              })];

            case 11:
              _c.sent();

              return [3
              /*break*/
              , 18];

            case 12:
              isCancel = this.stateCenter.cancelMap[fileHash];
              newTaskID_1 = statusInfo.taskID;
              uploadParams.onProgress && uploadParams.onProgress({
                status: isCancel ? _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERT_CANCEL : status_1,
                fileName: fileName,
                fileHash: fileHash,
                taskID: newTaskID_1
              });
              if (!isCancel) return [3
              /*break*/
              , 14];
              this.stateCenter.cancelMap[fileHash] = false;
              return [4
              /*yield*/
              , this.cancelUploadFile({
                fileHash: fileHash,
                taskID: newTaskID_1
              })];

            case 13:
              _c.sent();

              return [3
              /*break*/
              , 15];

            case 14:
              setTimeout(function () {
                return __awaiter(_this, void 0, void 0, function () {
                  return __generator(this, function (_a) {
                    switch (_a.label) {
                      case 0:
                        // 根据task_id定时查询文件状态
                        return [4
                        /*yield*/
                        , this.uploadProgress({
                          taskID: newTaskID_1,
                          fileName: fileName,
                          fileHash: fileHash,
                          onProgress: uploadParams.onProgress
                        }, originReslove || resolve, originReject || reject)];

                      case 1:
                        // 根据task_id定时查询文件状态
                        _a.sent();

                        return [2
                        /*return*/
                        ];
                    }
                  });
                });
              }, 2000);
              _c.label = 15;

            case 15:
              return [3
              /*break*/
              , 18];

            case 16:
              this.uploadSucceedAfter({
                result: {
                  status: statusInfo.status,
                  fileID: statusInfo.fileID,
                  fileName: fileName,
                  fileHash: fileHash
                },
                onProgress: uploadParams.onProgress,
                resolve: originReslove || resolve
              });
              return [3
              /*break*/
              , 18];

            case 17:
              this.uploadFailedAfter(originReject || reject, __assign({
                status: status_1,
                taskID: newTaskID_1
              }, Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail)));
              return [3
              /*break*/
              , 18];

            case 18:
              return [3
              /*break*/
              , 20];

            case 19:
              error_4 = _c.sent();
              this.uploadFailedAfter(originReject || reject, __assign(__assign({
                status: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewUploadState"].CONVERT_FAIL
              }, Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(error_4 && error_4.code || _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail)), {
                error: error_4
              }));
              return [3
              /*break*/
              , 20];

            case 20:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoDocsService.prototype.queryStatus = function (queryStatusParams) {
    var _this = this; // 查询指定文件状态（通过task_id or 文件信息）


    var sendData = __assign({}, this.commonParams);

    if (queryStatusParams.taskID) {
      sendData.task_id = queryStatusParams.taskID;
    } else {
      var _a = queryStatusParams,
          fileHash = _a.fileHash,
          fileType = _a.fileType,
          expectFileType = _a.expectFileType;
      sendData.file_hash = fileHash;
      sendData.file_type = fileType;
      sendData.expect_file_type = expectFileType;
    }

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var result, data, ret, fileType, status_2, fileHash, fileServerProvider, oss, sfs, taskID, queryInterval, fileID, error_5;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.platformAPI.request({
                url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().queryStatusUrl,
                method: 'post',
                timeout: queryStatusParams.timeout || _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["HTTP_TIME"],
                data: sendData
              })];

            case 1:
              result = _a.sent();
              data = result.data;
              ret = data.ret, fileType = data.file_type, status_2 = data.status, fileHash = data.file_hash, fileServerProvider = data.file_server_provider, oss = data.oss, sfs = data.sfs, taskID = data.task_id, queryInterval = data.query_interval, fileID = data.file_id;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'queryStatus', JSON.stringify({
                data: data
              }));

              if (ret.code === 0) {
                switch (status_2) {
                  case 32: // 转换失败

                  case 64: // 转换任务已取消

                  case 128: // 密码保护的文档

                  case 256: // 文件内容过大

                  case 512: // 文件页数过多

                  case 1024: // 文件内容为空

                  case 8192: // 源文件为只读文件

                  case 32768: // 源文件中存在不支持转码的元素

                  case 32769: // 文件后缀名不匹配

                  case 32773: // 文件损坏

                  case 32774:
                    // 文件内容不完整
                    reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(status_2));
                    break;

                  case 1:
                    resolve({
                      // 未上传
                      fileType: fileType,
                      status: status_2,
                      fileHash: fileHash,
                      fileServerProvider: fileServerProvider,
                      oss: oss,
                      sfs: sfs
                    });
                    break;

                  case 2:
                    // 已上传未转码
                    resolve({
                      fileType: fileType,
                      status: status_2,
                      fileHash: fileHash
                    });
                    break;

                  case 4:
                    // 排队转码中
                    resolve({
                      fileType: fileType,
                      status: status_2,
                      taskID: taskID,
                      queryInterval: queryInterval || 1000 // 轮询间隔时间

                    });
                    break;

                  case 8:
                    // 转码中
                    resolve({
                      fileType: fileType,
                      status: status_2,
                      taskID: taskID
                    });
                    break;

                  case 16:
                    // 转码成功
                    resolve({
                      fileID: fileID,
                      status: status_2
                    });
                    break;

                  default:
                    // 未知状态
                    reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_17__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail));
                    break;
                }
              } else {
                reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(data.ret.code, data.ret.message));
              }

              return [3
              /*break*/
              , 3];

            case 2:
              error_5 = _a.sent();
              reject(error_5);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  }; // H5 高清转码，默认false


  ZegoDocsService.prototype.getCvtH5HighQualityMode = function () {
    return String(this.config.dynamicPPT_HD) === 'true' ? true : false;
  }; // 缩略图清晰度，1:普通 2:标清 3:高清，默认1


  ZegoDocsService.prototype.getCvtThumbnailMode = function () {
    return +this.config.thumbnailMode || 1;
  }; // H5 自动翻页，1:否 2:是，默认2


  ZegoDocsService.prototype.getCvtH5AutomaticPageMode = function () {
    var value = this.config.dynamicPPT_AutomaticPage;
    return void 0 == value || String(value) === 'true' ? 2 : 1;
  };

  ZegoDocsService.prototype.createCvtDoc = function (createCvtDocParams) {
    var _this = this; // 请求转换文档


    var timeout = createCvtDocParams.timeout,
        srcFileUrl = createCvtDocParams.srcFileUrl,
        fileName = createCvtDocParams.fileName,
        fileHash = createCvtDocParams.fileHash,
        fileSize = createCvtDocParams.fileSize,
        fileType = createCvtDocParams.fileType,
        expectFileType = createCvtDocParams.expectFileType;

    var sendData = __assign(__assign({}, this.commonParams), {
      file_name: fileName,
      file_hash: fileHash,
      file_size: fileSize,
      file_type: fileType,
      expect_file_type: expectFileType
    }); // 以下字段原则上不对外暴露（除非用户设置过）


    var thumbnail_type = this.getCvtThumbnailMode();

    if (thumbnail_type != 1) {
      sendData.thumbnail_height_type = thumbnail_type;
    }

    var high_quality = this.getCvtH5HighQualityMode();

    if (high_quality) {
      sendData.export_high_quality_images = high_quality;
    }

    var automatic_page = this.getCvtH5AutomaticPageMode();

    if (automatic_page != 2) {
      sendData.h5_automatic_page_turning = automatic_page;
    }

    srcFileUrl && (sendData.src_file_url = srcFileUrl);
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'createCvtDoc', JSON.stringify({
      createCvtDocParams: createCvtDocParams,
      sendData: sendData
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var result, data, ret, error_6;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.platformAPI.request({
                url: _platform_local_config__WEBPACK_IMPORTED_MODULE_21__["ZegoDocsConfig"].getFullURL().createCvtUrl,
                method: 'post',
                timeout: timeout || _zego_docs_entity__WEBPACK_IMPORTED_MODULE_18__["HTTP_TIME"],
                data: sendData
              })];

            case 1:
              result = _a.sent();
              data = result.data;
              _view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['DocsView_Service'], 'createCvtDoc', JSON.stringify({
                data: data
              }));
              ret = data.ret;

              if (ret.code === 0) {
                resolve({
                  status: data.status,
                  taskID: data.task_id
                });
              } else {
                reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_14__["transError"])(data.ret.code, data.ret.message));
              }

              return [3
              /*break*/
              , 3];

            case 2:
              error_6 = _a.sent();
              reject(error_6);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  return ZegoDocsService;
}();



/***/ }),

/***/ "./sdk/docsview/docs/zego.docs.wb.ts":
/*!*******************************************!*\
  !*** ./sdk/docsview/docs/zego.docs.wb.ts ***!
  \*******************************************/
/*! exports provided: ZegoWhiteboardDocs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardDocs", function() { return ZegoWhiteboardDocs; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.last-index-of.js */ "./node_modules/core-js/modules/es.array.last-index-of.js");
/* harmony import */ var core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./zego.docs.dep.cmn */ "./sdk/docsview/docs/zego.docs.dep.cmn.ts");













var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



/**
 * 这个文件会被白板SDK引用，尽可能减少依赖文件
 */

var ZegoWhiteboardDocs =
/** @class */
function () {
  function ZegoWhiteboardDocs() {
    this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_12___default.a.create();
    this.config = null;
    this.domains = {};
    this.fileDomain = '';
  }

  ZegoWhiteboardDocs.prototype.setConfig = function (config) {
    if (!this.config) {
      var domain = config.isTestEnv ? 'https://docservice-test.zego.im' : 'https://docservice.zego.im';
      this.fileDomain = config.isTestEnv ? 'https://docservice-storage-test.zego.im/' : 'https://docservice-storage.zego.im/';
      this.domains = {
        cvt: domain + "/doc/cvt_doc",
        query: domain + "/doc/query_status",
        access: domain + "/doc/access"
      };
      this.config = {
        platform: 32,
        app_id: config.appID,
        web_token: config.token,
        id_name: config.userID
      };
    }
  };

  ZegoWhiteboardDocs.prototype.isConfiged = function () {
    return !!this.config;
  };

  ZegoWhiteboardDocs.prototype.uploadImage = function (file, cb) {
    return __awaiter(this, void 0, void 0, function () {
      var _this = this;

      return __generator(this, function (_a) {
        return [2
        /*return*/
        , new Promise(function (resolve, reject) {
          return __awaiter(_this, void 0, void 0, function () {
            var name_1, size, suffix, fileHash, _a, status_1, oss, file_id, _b, e_1;

            return __generator(this, function (_c) {
              switch (_c.label) {
                case 0:
                  _c.trys.push([0, 9,, 10]);

                  name_1 = file.name, size = file.size;
                  suffix = name_1.substr(name_1.lastIndexOf('.') + 1).toLowerCase();
                  return [4
                  /*yield*/
                  , Object(_zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_13__["getMd5"])(file)];

                case 1:
                  fileHash = _c.sent();
                  return [4
                  /*yield*/
                  , this.queryStatus(fileHash)];

                case 2:
                  _a = _c.sent(), status_1 = _a.status, oss = _a.oss, file_id = _a.file_id;
                  if (!(status_1 === 1)
                  /* UPLOADING */
                  ) return [3
                  /*break*/
                  , 4];
                  /* UPLOADING */

                  return [4
                  /*yield*/
                  , this.upload(oss, file, name_1, fileHash, suffix, cb, resolve)];

                case 3:
                  _c.sent();

                  return [3
                  /*break*/
                  , 8];

                case 4:
                  if (!(status_1 === 16)
                  /* CONVERTED */
                  ) return [3
                  /*break*/
                  , 6];
                  /* CONVERTED */

                  _b = resolve;
                  return [4
                  /*yield*/
                  , this.load(file_id)];

                case 5:
                  _b.apply(void 0, [_c.sent()]);

                  return [3
                  /*break*/
                  , 8];

                case 6:
                  return [4
                  /*yield*/
                  , this.repeatQuery(name_1, fileHash, size, '', resolve)];

                case 7:
                  _c.sent();

                  _c.label = 8;

                case 8:
                  return [3
                  /*break*/
                  , 10];

                case 9:
                  e_1 = _c.sent(); // 文件不存在、文件内容为空，转换成白板SDK对应的错误码

                  if (e_1 && (e_1.code == 2010001 || e_1.code == 2020006)) {
                    e_1.code = 3030010;
                    e_1.msg = e_1.message;
                  }

                  reject(e_1);
                  return [3
                  /*break*/
                  , 10];

                case 10:
                  return [2
                  /*return*/
                  ];
              }
            });
          });
        })];
      });
    });
  };

  ZegoWhiteboardDocs.prototype.repeatQuery = function (name, hash, size, taskID, resolve) {
    return __awaiter(this, void 0, void 0, function () {
      var _a, status, file_id, _b;

      var _this = this;

      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            return [4
            /*yield*/
            , this.queryStatus(hash, taskID)];

          case 1:
            _a = _c.sent(), status = _a.status, file_id = _a.file_id;
            if (!(status === 16
            /* CONVERTED */
            && resolve)) return [3
            /*break*/
            , 3];
            _b = resolve;
            return [4
            /*yield*/
            , this.load(file_id)];

          case 2:
            _b.apply(void 0, [_c.sent()]);

            return [3
            /*break*/
            , 6];

          case 3:
            if (!(status === 2)
            /* UPLOADED */
            ) return [3
            /*break*/
            , 5];
            /* UPLOADED */

            return [4
            /*yield*/
            , this.cvt(name, hash, size, resolve)];

          case 4:
            _c.sent();

            return [3
            /*break*/
            , 6];

          case 5:
            if (status === 4
            /* WAITING */
            || status === 8
            /* CONVERTING */
            ) {
              setTimeout(function () {
                return __awaiter(_this, void 0, void 0, function () {
                  return __generator(this, function (_a) {
                    switch (_a.label) {
                      case 0:
                        return [4
                        /*yield*/
                        , this.repeatQuery(name, hash, size, taskID, resolve)];

                      case 1:
                        _a.sent();

                        return [2
                        /*return*/
                        ];
                    }
                  });
                });
              }, 2000);
            }

            _c.label = 6;

          case 6:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoWhiteboardDocs.prototype.queryStatus = function (hash, task_id) {
    return __awaiter(this, void 0, void 0, function () {
      var params, data, ret, status, file_id, oss;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            params = task_id ? __assign(__assign({}, this.config), {
              task_id: task_id
            }) : __assign(__assign({}, this.config), {
              file_hash: hash,
              file_type: 16,
              expect_file_type: 16
            });
            return [4
            /*yield*/
            , this.axiosInstance({
              method: 'post',
              url: this.domains.query,
              timeout: 30000,
              data: params
            })];

          case 1:
            data = _a.sent().data;
            ret = data.ret, status = data.status, file_id = data.file_id, oss = data.oss;

            if (ret.code === 0) {
              return [2
              /*return*/
              , {
                status: status,
                file_id: file_id,
                oss: oss
              }];
            }

            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoWhiteboardDocs.prototype.upload = function (oss, file, name, hash, suffix, cb, resolve) {
    return __awaiter(this, void 0, void 0, function () {
      var url, mpOssParams, formData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            url = oss.host ? oss.host + "/" + oss.object_name + "?." + suffix : this.fileDomain + ("/" + oss.object_name + "?." + suffix);
            mpOssParams = Object(_zego_docs_dep_cmn__WEBPACK_IMPORTED_MODULE_13__["getUploadOssInfo"])(oss);
            formData = new FormData();
            formData.append('OSSAccessKeyId', mpOssParams.OSSAccessKeyId);
            formData.append('x-oss-security-token', mpOssParams.securityToken);
            formData.append('signature', mpOssParams.signature);
            formData.append('policy', mpOssParams.policy);
            formData.append('successActionStatus', mpOssParams.successActionStatus);
            formData.append('key', mpOssParams.objectName);
            formData.append('file', file);
            formData.append('name', name);
            return [4
            /*yield*/
            , this.axiosInstance({
              method: 'post',
              url: mpOssParams.url,
              data: formData,
              timeout: 600000,
              onUploadProgress: function onUploadProgress(progressEvent) {
                if (cb) {
                  var total = progressEvent.total,
                      loaded = progressEvent.loaded;
                  cb({
                    fileName: name,
                    fileHash: hash,
                    uploadPercent: Math.floor(loaded / total * 100)
                  });
                }
              }
            })];

          case 1:
            _a.sent();

            this.cvt(name, hash, file.size, undefined);
            resolve(url);
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoWhiteboardDocs.prototype.cvt = function (name, hash, size, resolve) {
    return __awaiter(this, void 0, void 0, function () {
      var data;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.axiosInstance({
              method: 'post',
              url: this.domains.cvt,
              timeout: 30000,
              data: __assign(__assign({}, this.config), {
                file_name: name,
                file_hash: hash,
                file_size: size,
                file_type: 16,
                expect_file_type: 16,
                export_high_quality_images: false
              })
            })];

          case 1:
            data = _a.sent().data;
            if (!(data.ret.code === 0 && resolve)) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.repeatQuery(name, hash, size, data.task_id, resolve)];

          case 2:
            _a.sent();

            _a.label = 3;

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoWhiteboardDocs.prototype.load = function (file_id) {
    return __awaiter(this, void 0, void 0, function () {
      var data, suffix;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.axiosInstance({
              method: 'post',
              url: this.domains.access,
              timeout: 30000,
              data: __assign(__assign({}, this.config), {
                file_id: file_id
              })
            })];

          case 1:
            data = _a.sent().data;

            if (data.ret.code === 0) {
              suffix = data.file_name.substr(data.file_name.lastIndexOf('.') + 1).toLowerCase();
              return [2
              /*return*/
              , data.original_file_urls[0] + "?." + suffix];
            }

            throw {
              code: data.ret.code,
              msg: data.ret.message,
              message: data.ret.message
            };
        }
      });
    });
  };

  return ZegoWhiteboardDocs;
}();



/***/ }),

/***/ "./sdk/docsview/view/Bridge.ts":
/*!*************************************!*\
  !*** ./sdk/docsview/view/Bridge.ts ***!
  \*************************************/
/*! exports provided: DomEvent, DomEventAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DomEvent", function() { return DomEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DomEventAction", function() { return DomEventAction; });
/**白板和文件数据通信层 */
var DomEvent;

(function (DomEvent) {
  DomEvent["Docs"] = "zegoeventdocs";
  DomEvent["Whiteboard"] = "zegoeventwb";
})(DomEvent || (DomEvent = {}));

var DomEventAction;

(function (DomEventAction) {
  DomEventAction["WbInit"] = "wbinit";
  DomEventAction["WbDragTool"] = "wbdragtool";
  DomEventAction["WbScale"] = "wbscale";
  DomEventAction["WbDestroy"] = "wbdestroy";
  DomEventAction["WbSwitch"] = "wbSwitch";
  DomEventAction["WbError"] = "wberror";
  DomEventAction["Snapshot"] = "snapshot";
  DomEventAction["Page"] = "page";
  DomEventAction["Step"] = "step";
  DomEventAction["SyncDrag"] = "syncDrag";
  DomEventAction["Animation"] = "targetclick";
  DomEventAction["H5Snapshot"] = "getH5SnapshotResult";
  DomEventAction["DocsAspect"] = "getAspectCache";
  DomEventAction["ReloadView"] = "reloadview";
  DomEventAction["ClearEvent"] = "clearEvent"; // 清除监听事件
})(DomEventAction || (DomEventAction = {}));

/***/ }),

/***/ "./sdk/docsview/view/Logger.ts":
/*!*************************************!*\
  !*** ./sdk/docsview/view/Logger.ts ***!
  \*************************************/
/*! exports provided: getLogAction, Logger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLogAction", function() { return getLogAction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return Logger; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_7__);









var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var ILogger =
/** @class */
function () {
  function ILogger(platform, isElectron) {
    this.appid = '';
    this.roomid = '';
    this.userid = '';
    this.token = '';
    this.version = '';
    this.platform = '';
    this.extra = {};
    this.isProd = false;
    this.isElectron = false;
    this.logLevel = 1;
    this.logCacheSend = [];
    this.logCacheMax = 100;
    this.platform = platform || '';
    this.isElectron = isElectron;
    this.openLogServer();
  }

  ILogger.prototype.init = function (_a) {
    var appid = _a.appid,
        version = _a.version,
        isProd = _a.isProd,
        liveroom = _a.liveroom;
    this.appid = (appid || this.appid) + '';
    this.version = version || this.version;
    this.isProd = isProd;

    if (liveroom && !this.platform.includes('liveroom')) {
      this.platform += ',liveroom';
    }
  };

  ILogger.prototype.initRoom = function (_a) {
    var roomid = _a.roomid,
        userid = _a.userid,
        token = _a.token,
        logLevel = _a.logLevel;
    this.roomid = roomid || this.roomid;
    this.userid = userid || this.userid;
    this.token = token || this.token;
    typeof logLevel == 'number' && (this.logLevel = logLevel);
  };

  ILogger.prototype.setLogConfig = function (logLevel) {
    typeof logLevel == 'number' && (this.logLevel = logLevel);
  };

  ILogger.prototype.setExtraConfig = function (extra) {
    Object.assign(this.extra, extra);
  };

  ILogger.prototype.getConfig = function () {
    return {
      appid: +this.appid,
      roomid: this.roomid,
      userid: this.userid,
      token: this.token
    };
  };

  ILogger.prototype.debug = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    var log = this.log(0, values);

    if (this.logLevel > 0) {
      console.debug(log);
    } else {
      var fn = console.debug;
      fn(log);
    }
  };

  ILogger.prototype.info = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    var log = this.log(1, values);

    if (this.logLevel > 1) {
      console.info(log);
    } else {
      var fn = console.info;
      fn(log);
    }
  };

  ILogger.prototype.warn = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    var log = this.log(2, values);

    if (this.logLevel > 2) {
      console.warn(log);
    } else {
      var fn = console.warn;
      fn(log);
    }
  };

  ILogger.prototype.error = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    var log = this.log(3, values);

    if (this.logLevel > 3) {
      console.error(log);
    } else {
      var fn = console.error;
      fn(log);
    }
  };

  ILogger.prototype.writeLocalLog = function (log) {};

  ILogger.prototype.log = function (level, values) {
    var log = this.isProd || this.isElectron ? this.logParamList(level, values.join('')) : values.join('');

    if (this.isProd) {
      this.remoteWebSocketLog(level, log);
    }

    if (this.isElectron) {
      this.writeLocalLog(log);
    }

    return log;
  };

  ILogger.prototype.openLogServer = function () {
    this.stopWebSocketServer();
    this.websocket = new WebSocket('wss://weblogger-edu.zego.im/log');
  };

  ILogger.prototype.stopWebSocketServer = function () {
    if (this.websocket) {
      this.websocket.close();
      this.websocket = null;
    }
  };

  ILogger.prototype.remoteWebSocketLog = function (level, log) {
    if (typeof log == 'string' && log.length > 4000) {
      console.info('log over maximum, ignore');
      return;
    }

    if (this.websocket == null || this.websocket.readyState == 2 || this.websocket.readyState == 3) {
      this.openLogServer();

      if (this.logCacheSend.length < this.logCacheMax) {
        this.logCacheSend.push(log);
      }
    } else if (this.websocket.readyState == 0) {
      if (this.logCacheSend.length < this.logCacheMax) {
        this.logCacheSend.push(log);
      }
    } else if (this.websocket.readyState == 1) {
      if (this.logCacheSend.length > 0) {
        var logBefore = '';

        for (var i = 0; i < this.logCacheSend.length; i++) {
          if ((logBefore + this.logCacheSend[i]).length > 4000) {
            // console.error('logBefore.length 4000', logBefore.length, logBefore);
            this.websocket.send(logBefore);
            logBefore = '';
          }

          logBefore = logBefore + this.logCacheSend[i] + '\n';
        }

        log = logBefore + log;
        this.logCacheSend = []; //console.warn('logBefore length',logBefore.length,logBefore);

        this.websocket.send(log);
      } else {
        //console.warn('log length',log.join("\n").length,log);
        this.websocket.send(log);
      }
    } else {
      console.warn('wrong socket state:' + this.websocket.readyState);

      if (this.logCacheSend.length < this.logCacheMax) {
        this.logCacheSend.push(log);
      }
    }
  };

  ILogger.prototype.logParamList = function (level, logInfo) {
    var time = new Date().toLocaleString(); //get first space from logInfo

    var index = logInfo.indexOf(' ');
    var action = logInfo.substr(0, index) || logInfo;
    var content = logInfo.substr(index + 1, 4500);

    var s = __assign(__assign({
      time: time,
      level: level,
      action: action,
      content: content,
      appid: this.appid,
      userid: this.userid,
      roomid: this.roomid
    }, this.extra), {
      version: this.version,
      platform: this.platform
    });

    return JSON.stringify(s);
  };

  return ILogger;
}();

var _a = function getPlatform(process, plat, ua) {
  var electron = !!(process && process.versions['electron']);
  var platform = (electron ? process.platform : plat) + "," + ua[ua.length - 2] + "," + ua[ua.length - 1];
  return {
    electron: electron,
    platform: platform
  };
}(window.process, navigator.platform, navigator.userAgent.split(' ')),
    electron = _a.electron,
    platform = _a.platform;

var logActionPre = electron ? 'ec.' : 'web.';
function getLogAction(tag, action) {
  return "" + logActionPre + tag + action + " ";
} // @ts-ignore

var Logger = window.zegoLogger || (window.zegoLogger = new ILogger(platform, electron));

/***/ }),

/***/ "./sdk/docsview/view/Logger_new.ts":
/*!*****************************************!*\
  !*** ./sdk/docsview/view/Logger_new.ts ***!
  \*****************************************/
/*! exports provided: Logger, initLogger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return Logger; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initLogger", function() { return initLogger; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ "./node_modules/core-js/modules/es.regexp.to-string.js");
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.map.js */ "./node_modules/core-js/modules/es.map.js");
/* harmony import */ var core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_map_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/esnext.map.delete-all.js */ "./node_modules/core-js/modules/esnext.map.delete-all.js");
/* harmony import */ var core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_delete_all_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/esnext.map.every.js */ "./node_modules/core-js/modules/esnext.map.every.js");
/* harmony import */ var core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_every_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/esnext.map.filter.js */ "./node_modules/core-js/modules/esnext.map.filter.js");
/* harmony import */ var core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_filter_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/esnext.map.find.js */ "./node_modules/core-js/modules/esnext.map.find.js");
/* harmony import */ var core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/esnext.map.find-key.js */ "./node_modules/core-js/modules/esnext.map.find-key.js");
/* harmony import */ var core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_find_key_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/esnext.map.includes.js */ "./node_modules/core-js/modules/esnext.map.includes.js");
/* harmony import */ var core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_includes_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/esnext.map.key-of.js */ "./node_modules/core-js/modules/esnext.map.key-of.js");
/* harmony import */ var core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_key_of_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/esnext.map.map-keys.js */ "./node_modules/core-js/modules/esnext.map.map-keys.js");
/* harmony import */ var core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_keys_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/esnext.map.map-values.js */ "./node_modules/core-js/modules/esnext.map.map-values.js");
/* harmony import */ var core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_map_values_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/esnext.map.merge.js */ "./node_modules/core-js/modules/esnext.map.merge.js");
/* harmony import */ var core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_merge_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/esnext.map.reduce.js */ "./node_modules/core-js/modules/esnext.map.reduce.js");
/* harmony import */ var core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_reduce_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/esnext.map.some.js */ "./node_modules/core-js/modules/esnext.map.some.js");
/* harmony import */ var core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_some_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/esnext.map.update.js */ "./node_modules/core-js/modules/esnext.map.update.js");
/* harmony import */ var core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_map_update_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var zego_logger__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! zego-logger */ "./node_modules/zego-logger/ZegoLogger.js");
/* harmony import */ var zego_logger__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(zego_logger__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./Logger */ "./sdk/docsview/view/Logger.ts");



























var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};



var ENUM_LOG_LEVEL;

(function (ENUM_LOG_LEVEL) {
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["debug"] = 0] = "debug";
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["info"] = 1] = "info";
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["warn"] = 2] = "warn";
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["error"] = 3] = "error";
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["report"] = 99] = "report";
  ENUM_LOG_LEVEL[ENUM_LOG_LEVEL["disable"] = 100] = "disable";
})(ENUM_LOG_LEVEL || (ENUM_LOG_LEVEL = {}));

var Logger =
/** @class */
function () {
  function Logger(env, product) {
    // private uploadInterval = 5000;
    // private uploadTimer!: NodeJS.Timeout | null | number;
    this.header = {
      version: '',
      appID: '',
      userID: '',
      device: ''
    };
    this.appID = '';
    this.roomID = '';
    this.userID = '';
    this.token = '';
    this.isTestEnv = true;
    this.logLevel = 1;
    this.version = '';
    this.platform = '';
    this.extra = {};
    if (Logger.instance) return Logger.instance;
    Logger.env = env;
    this.product = product;
    this.logger = new zego_logger__WEBPACK_IMPORTED_MODULE_26__["ZegoLogger"](env, product);
    this.logger.setDebugVerbose(false);
    Logger.instance = this;
  }

  Logger.getInstance = function () {
    // @ts-ignore
    return window.zegoAddonLogger || (window.zegoAddonLogger = new Logger(Logger.env, Logger.product));
  };

  Logger.prototype.setLogConfig = function (config) {
    switch (config.logLevel) {
      case 'debug':
        this.logLevel = 0;
        break;

      case 'info':
        this.logLevel = 1;
        break;

      case 'warn':
        this.logLevel = 2;
        break;

      case 'error':
        this.logLevel = 3;
        break;

      case 'report':
        this.logLevel = 99;
        break;

      case 'disable':
        this.logLevel = 100;

      default:
        break;
    }

    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].setLogConfig(this.logLevel); // @ts-ignore

    return this.logger.setLogLevel(config.logLevel);
  };

  Logger.prototype.uploadLog = function () {
    return this.upload(this.uploadConfig, this.product);
  };

  Logger.prototype.generateUUID = function () {
    var deviceID = localStorage.getItem('z_deviceID');

    if (deviceID) {
      return deviceID;
    } else {
      var d_1 = new Date().getTime();
      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d_1 + Math.random() * 16) % 16 | 0;
        d_1 = Math.floor(d_1 / 16);
        return (c == 'x' ? r : r & 0x3 | 0x8).toString(36);
      });
      localStorage.setItem('z_deviceID', uuid);
      return uuid;
    }
  };

  Logger.prototype.getConfig = function () {
    return {
      appID: +this.appID,
      roomID: this.roomID,
      userID: this.userID,
      token: this.token
    };
  };

  Logger.prototype.upload = function (config, product) {
    console.warn('=====upload====');
    return this.logger.upload(__assign(__assign({}, config), {
      appID: config.appID + '',
      product: product
    }));
  };

  Logger.prototype.report = function (tag, action, msg) {
    this.logger.write(tag, 'report', action, this.formatContent(msg));
  };

  Logger.prototype.debug = function (tag, action, msg) {
    this.logger.write(tag, 'debug', action, this.formatContent(msg));
    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].debug(tag + '_' + action + ' ', msg);
  };

  Logger.prototype.info = function (tag, action, msg) {
    this.logger.write(tag, 'info', action, this.formatContent(msg));
    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].debug(tag + '_' + action + ' ', msg);
  };

  Logger.prototype.warn = function (tag, action, msg) {
    this.logger.write(tag, 'warn', action, this.formatContent(msg));
    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].debug(tag + '_' + action + ' ', msg);
  };

  Logger.prototype.error = function (tag, action, msg) {
    this.logger.write(tag, 'error', action, this.formatContent(msg));
    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].debug(tag + '_' + action + ' ', msg);
    this.uploadLog();
  };

  Logger.prototype.supportDrivers = function () {
    return this.logger.supportDrivers();
  };

  Logger.prototype.setConfig = function (config) {
    return this.logger.setConfig(config);
  };

  Logger.prototype.formatContent = function (msg) {
    return msg ? String(msg).replace(/\"/g, "'") : '';
  };

  Logger.prototype.updateLoggerHeader = function (version) {
    Object.assign(this.header.version, version);
    this.logger.setHeaderInfo(this.formatContent(JSON.stringify(this.header)));
  };

  Logger.prototype.initInfo = function (_a) {
    var appID = _a.appID,
        version = _a.version,
        isProd = _a.isProd,
        liveroom = _a.liveroom;
    this.appID = (appID || this.appID) + '';
    this.version = version || this.version;

    if (liveroom && !this.platform.includes('liveroom')) {
      this.platform += ',liveroom';
    }

    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].init({
      appid: appID,
      version: version,
      isProd: true,
      liveroom: liveroom
    });
  };

  Logger.prototype.initRoomInfo = function (_a) {
    var roomID = _a.roomID,
        userID = _a.userID,
        token = _a.token,
        logLevel = _a.logLevel;
    this.roomID = roomID || this.roomID;
    this.userID = userID || this.userID;
    this.token = token || this.token;
    this.product !== 'SuperBoard' && typeof logLevel == 'number' && (this.logLevel = logLevel);
    this.product !== 'SuperBoard' && _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].initRoom({
      roomid: this.roomID,
      userid: this.userID,
      token: this.token,
      logLevel: logLevel
    });
  };

  Logger.prototype.setUploadConfig = function (config) {
    var token = config.token,
        appID = config.appID,
        userID = config.userID,
        server = config.server;

    if (token) {
      var isOversea = server && config.server.indexOf('zegocloud') != -1;
      var uploadURL = isOversea ? "https://detaillog" + appID + "-api.zegocloud.com/zglog/zip" : "https://detaillog" + appID + "-api.zego.im/zglog/zip"; // let uploadURL = server ? server.replace(/^(\s|ws)+|(\s|ws)+$/g, '');

      this.uploadConfig = {
        appID: appID,
        userID: userID,
        token: token,
        product: this.product,
        uploadURL: uploadURL,
        deviceID: this.generateUUID()
      };
    }
  };

  Logger.prototype.setLoggerHeader = function (config, version) {
    var device = navigator.userAgent;
    var appID = config.appID,
        userID = config.userID;
    this.header = {
      version: version,
      appID: appID,
      userID: userID,
      device: device
    };
    this.logger.setCommonField(new Map([['userID', userID]]));
    this.logger.setHeaderInfo(this.formatContent(JSON.stringify(this.header)));
  };

  return Logger;
}();


var initLogger = function initLogger(env, config, product, version) {
  // 初始化日志 SDK
  // @ts-ignore
  if (window.zegoAddonLogger) {
    var ver = localStorage.getItem('ZEGO_SDK_VER');

    if (ver) {
      var merVer = Object.assign(JSON.parse(ver), version);
      Logger.getInstance().updateLoggerHeader(merVer);
    }
  } else {
    // @ts-ignore
    window.zegoAddonLogger = new Logger(env, product);
    var supportDB = Logger.getInstance().supportDrivers().IndexedDB;

    if (!supportDB) {
      Logger.getInstance().setConfig({
        maxSize: 1,
        maxFiles: 3
      });
    }

    product === 'Docs' && Logger.getInstance().setLoggerHeader(config, version);
    localStorage.setItem('ZEGO_SDK_VER', JSON.stringify(version));
    _Logger__WEBPACK_IMPORTED_MODULE_27__["Logger"].init({
      appid: config.appID,
      version: version,
      isProd: !config.isTestEnv
    });
  }
};

/***/ }),

/***/ "./sdk/docsview/view/assets/img.ts":
/*!*****************************************!*\
  !*** ./sdk/docsview/view/assets/img.ts ***!
  \*****************************************/
/*! exports provided: IMG_ERROR, IMG_LOADING */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMG_ERROR", function() { return IMG_ERROR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMG_LOADING", function() { return IMG_LOADING; });
var IMG_ERROR = new Image();
IMG_ERROR.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAN90lEQVR4Xu1dC3BcVRn+/7tJ82ybNu8mezZt6qAoLx2dmm42TZPY2g74Qh3EQZ6KOoMoA47gW1EHfOCgIg8RcQYVEWRgoG0SQjbbUhwc0aK0hdLee7N59f3MY3fvcQ6kJU33ce9/d3Pv9p4z02mb/N/5z/m+797de+55IMjiaQbQ072XnQdpAI+bQBpAGsDjDHi8+/IOIA3gcQY83n15B5AG8DgDHu++vANIA3icAY93X94BpAE8zsCs7quq+jAi1iNijHMeB4CY+CP+LX528ueIGJ/+2Zt/K4oSTyQSGwOBwOZ8YlTeAWaopapqEBEHiAI+yRj7KBHrGEwaYAb1mqZFAGAlRQ1FUaoaGxv3U7BOYqQBptkfHBy8wjCMP1DE4JzfEQgEvk7BOo2RBphWQNO0IQCoJwjCGWMKAecKiDQAAKiq+j1E/DZRkasZY78nYh2Hed4AmqYtAYAoUYlXGWPnErGugHneALqu/5Fz/lmKGoZhtDQ1Nb1AwboFk9EA3f0D303VWEQMcM5Vt3TGajsWlpcH6qorr7SKE/ETk7Ht6tDQXyjYbGIyadDV1ppSP9GOjAboCUf6AGBV0kZzeBkQLsxmh+ayLn99LZQUFZFS7tIHIZEwSNisgjJo0BkKptXYswZYUF4GdVWVJC0OHD4C+w4eImGzDpIGoFHa7G8An89HAu/co5FwOQFJA1intbJiIYg/lDKybz8cOXacAs0NRhrAGq8FPh8s8zdYA01HT8VisCc6TMLmDCQNYI3a+upKmF9WZg00Ha0Pj8L45CQJmzOQCwzgkm9DmSkuKylZ2FBbfVHmyDMjxicm9uojY/+lYHOK4VCR7kksp08BPMHbu9pbn89pB7NYua7rL3DOV1CqnDdvXm1dXd0YBZtLTHffwCr0oXhUT1qkAaZp0TRNDPhQx+x/xBi7LZdCUuuWBjDJnKZp4uqtNhk+MyzGGJtHwM0JRBrABM2apv0QAKhX8FWMsYdMpHEkRBogA+0jIyM1U1NToxR1EHGb3+8/n4KdK4w0QAamdV1/hHN+GUUQznlrIBAQ08RcW6QB0kgTjUZbEokEaZYu5/yxQCDwSdcqP90waYA0Cmma9iIAfIAiYiKRqF+6dOkIBTuXGM8aoK+vrzzm812qcLwIEM/nnG/1+XDblKJsWNvSckBV1SsQkTTJEwBc+9g321yeNEBv/5YWUIz7OId3n3G1IQyBAbecsyxwF+e8inA1TjLGigk4RyCeM8CmcPhKBZS0Azp23vYZhnFNU1PTg46oSUjqKQM829fXVOgreAUAU77N8fkUaPY3Eqh8E/IfxtgFVLATOE8ZoCccuQMAbk5HdH11FcwvK6Vq0cYYC1PBTuA8ZoDNGwD4mlREFxcVAauvJemAiI/5/X7XP/Z5+ktgTzhyGAAWpFKY1ddBcRF52L6BMSZWB+VV8dYdYCDyL+DJZyHbmeSJiD/x+/3fyCvlvTgQ1B2O3IMA1ycTqpk1gk8hLdEbZ4yRvzQ4bRqP3QEG1gLHZ2eTbuexDxGv9fv9v3NaSGp+TxlAkNQbjtzDZ9wFxFUvrn5iybvHPk9/CTzZebFcDRG/I/5fV10JC4iTPBFxld/v7yeaxxUwz90BTrIuhoPLyopuXlJTTd2W5XHG2CdcoaKNRnjWAIKz4eHh6lgsRpqoaRjGLU1NTXfa4N4VUE8bQCig6/oqznnKWbHpVDIMY31TU9MzrlCS2AjPG0DwpmnalwHgVxQO4/F407Jly/J2ibs0wLTqmqb9BgC+SDDBMcbYfALOFRBpgBkyaJomvtGHCMq8yBgjLRgh5MoqRBpgFp2apu0DAMrC/wcZY9dkVZ05qEwaYBbJu3fvrvP5fNQlvDcxxn4+B7plLYU0QBIqVVXtQMQeIstrGWMbzWB7BgbWcgNFrtXAjRpAfreiKE+uDgZ3mMFnI0YaIAWLqqregIi/pJCsKIq/sbFxMBV2UySyROF4G3D+pWQxnMPlXW3BRyi5rWKkAdIwpqrqvYj4eaukAsBhxlhFMlxPf+TTgHA7ADSnqxcBr+oIrcz5kjJpgAzqqqoaQUTLG0Bzzl8IBAItM6vvDoevQ1DuM2soBLiuIxR8wGw8JU4awARrqqoeRMSkV3Q6OOf8gUAgcJ2I6QlHxFV/q4l0p4Xk+uNAGsCEIjt27GgoKSlJ+ZmewQRffU3VLwaA1SZSpQgxPtYZCv2djk+NlAYwyWo0Gu1KJBKbTIafFjY4OgYnxico0FMY5Limo20lKX+6xNIAFmQZHBy80TCMX1iAnAp9Q49CPJGgQE9hEgk8b037yldsVTILLA1gkU1d1+/nnF9rEQYJw4BdGulT5LRUvkSspL293d7tZEaN0gBWlXzrFfIWzvkHrULHJyZBHyHtNXEqFefweldb8B1Wc6eKlwYgMqlpWto1BqmqPXz0GIzuP0DM+haMA/9TV6j1M7YqmQZLAxBZjEaj/kQiQdr0d+zAQTh05Cgx8zQM8abO1pW23zuctQbYuHFjma+o/FzuM/Z3tba+YY/t5Ghd19dyzs+YZm4m1+DIGJyYsPdRrihw+eqgvSHjs84A3eHIjQj8KgA8tTkTB/gnIL+vq7XV9CicGRFFjKZpNwHAT83Gz4zbpUchYfPJADl2dLStfI6SX2DOGgP0hMPnAvhuB+CpZ/kiPAsJ+HHnqiD1cMekPG/fufPV0uLid1oVIRtPBgiwl4OxqjMU+p/V/GeNAfq2bFmeiPPHAfh55kjI3shab//ANzniD6gLS7PxZIAAm2MFyiViaxtz/X87Ku/vAL29mwO80HgcAN9rpfO+RGxRe3u7rY2qu/sHrkbEU8vClgf8oGDGQ1TOaOaho8dgzOaTAQD8rTMUvNQKB3l/BwiHw/VToHQDJNnrJzMTE52hYEnmsOQR3eEtaxCMpwCg8GREYUEBLG0Up8hZL2P7D8KhozafDADu7AwFb7GSPW/vAE/19VWVFhRu5Tz9e/V0ZCDC9o7W4LusEPbmVdPffx6iT4gfmI21s8NINp4MQIHrO4PBe832KS8N8MzWrQvmTcVfBQDa5XY6Oxs6Q8EPmyVsQzhcX8CVJwHh/bMxZaUl0FBD2U8aIBsDRNPtiYEB6ztXBcWdMWPJOwP09fUVJ3yFYieORRl7ZzKAc/hrV1vwU5nCX3rppcKDJyaeRoAPJYtdzhpBIewxYBgcXtf0TOlN/x4RtxtgrDcz/pFXBnj00Ud9lXVLjnIA8md3KhYReC8Av7UjFPpHsphN4XCHD5QbOMAlyX5fs3gRVCygrQ8ZGtsLx06MmxbYTCDn8ExXW3B9pti8MkBPOMIzdcjm748iwq8NQ3mkq61lm6jruYGB9xkcxa4iKd8Ain2FxGMgpRw9fgKG94qlCNkvCHB3Ryh4Q7qa88YAPeGIeI1Wk32aUtYoxvnFEHLyU09nwJoa6mFe4amHAUtNfE3VgfMc+hr5jZ2trSlnN+eFAbr7I9sQ4T2WmJ2j4MUVC6GKeobg3v1w5PgcnCGIysWdrS1PJ6PE9QboDW/u4cA75khPS2kKCwtgaQPtQeT4+DhER/daymcjeA+AsT7ZcLGrDdA7sJl8WIMNskxD/XW1UFKcH4dHI2Dv5LHD69etW3fawYWuNUDPwOa7gPOvmFZjjgMXzi+H2srFpKxi2FcM/8514cDv7wq1nrbQxZUGyNSouSZudj47x8dm4+WPnf7PPqsxE9eOnBuYqVF2CMgGdklNFZSX0vaG3D04BLF4PBvNINUhDUCi7W1QeWkJLCEO9+47eAgOHD5iswX24NIANvgTw7zLGpeQhnsnp2KgDlG3HbDR6FlQaQAbXNZULoaK+eWkGtShEZicmiJhswmSBiCyWVpSDI21tIFIcdsXt383FGkAogpiooeY8GG1iC984oufW4o0AEEJO7uJZ2WSB6HNqSDSABbJLCkqAj/xGBmx+EMsAnFTkQawqIYQX5jAasnGlG+rOc3ESwOYYWk6ZtGC+VC9mDbxKBeTPCw0PWVo3hggG521U0fl4ormqkULSfvzTMXjG3er0Z/YyZ9LbFd76/Mn68806urIUHAuO2+2bk3TngAAy2cJcM5j8Xi8urm5Wawedn2RBkgikaqqX0DE31LU45x/LhAIPEzBOoGRBpjFuq7ryznn/wYAytueJxhjH3dCSGpORw0AAA9xzl211z6rr/1ISXHxhRRC9wyN3DU5OZkXt/6T/UNEsbjlylT9zel3AODwMmDygxwpAtjFiMOjxCFSlJKVTR8oie1iMmjgGQOISR7imZ8y3Cs2ehAjfnlZpAHeks3Owg7xmle87s3LIg0AkO+TPGwZz+sGEJM8xGteyqnhE5NToA2P2OLfcbDXDVC1qAIWL0x5onxaffThURifPG2WteN6Wm7AHBkgebs4VACCYzMl5peVLqqvrrrAMmniQICjx/TR/Qd2UbCuwmTQoDMUbE/XXuv7obik92Kl8YoVK8SxMBnX/iVp8k7G2Dku6YqjzchbA2ia9i0A+D6FPURc5/f7SfsDUvK5GZOXBohGoy3xeLwPEecRyL2XMSaWi8sCAHlpAF3Xn+acZ9w8YbbCnPNRRVGW+v3+7O7mkMdWyjsDaJr2NQD4GZHzyxhjfyZiz0pY3hngrFTBwU5JAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1NIAblDBwTZIAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1P8HXF8j+YvhwMkAAAAASUVORK5CYII=';
var IMG_LOADING = '<path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="#cdcdcd"></path>';


/***/ }),

/***/ "./sdk/docsview/view/assets/index.css":
/*!********************************************!*\
  !*** ./sdk/docsview/view/assets/index.css ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js!./index.css */ "./node_modules/css-loader/dist/cjs.js!./sdk/docsview/view/assets/index.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./sdk/docsview/view/assets/polyfill.js":
/*!**********************************************!*\
  !*** ./sdk/docsview/view/assets/polyfill.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

(function() {
    var ie = window.navigator.userAgent.indexOf('Trident') !== -1;
    if (ie) {
        /**
         * Element.dispatchEvent(CustomEvent)
         */
        function CustomEvent(event, params) {
            params = params || { bubbles: false, cancelable: false, detail: undefined };
            var evt = document.createEvent('CustomEvent');
            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
            return evt;
        }
        CustomEvent.prototype = window.Event.prototype;
        window.CustomEvent = CustomEvent;

        /**
         * Element.scrollTo
         * Element.scrollBy
         */
        if (!document.body.scrollTo) {
            Element.prototype.scrollTo = function(x, y) {
                this.scrollLeft = x;
                this.scrollTop = y;
            };
        }
        if (!document.body.scrollBy) {
            Element.prototype.scrollBy = function(x, y) {
                this.scrollLeft += x;
                this.scrollTop += y;
            };
        }

        /**
         * FileReader.readAsBinaryString
         */
        if (!FileReader.prototype.readAsBinaryString) {
            FileReader.prototype.readAsBinaryString = function(fileData) {
                var _this = this;
                var reader = new FileReader();
                reader.onload = function(e) {
                    var binary = '';
                    var bytes = new Uint8Array(reader.result);
                    var length = bytes.byteLength;
                    for (var i = 0; i < length; i++) {
                        binary += String.fromCharCode(bytes[i]);
                    }
                    _this.content = binary;
                    _this.result = binary;
                    _this.onload();
                };
                reader.readAsArrayBuffer(fileData);
            };
        }
    }
})();


/***/ }),

/***/ "./sdk/docsview/view/entities/error.ts":
/*!*********************************************!*\
  !*** ./sdk/docsview/view/entities/error.ts ***!
  \*********************************************/
/*! exports provided: transError, ZegoWhiteboardError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transError", function() { return transError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardError", function() { return ZegoWhiteboardError; });
/* harmony import */ var _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
var _a;


var ErrorCodeData = (_a = {
  30001: '请求过于频繁',
  60011: 'token无效',
  60012: 'token已过期',
  60013: '文档转换请求已处理',
  60014: '不存在的任务ID'
}, // 公共错误码区间
_a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewSuccess] = '执行成功', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInternal] = '内部错误', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid] = '参数错误', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout] = '网络超时', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorRequestFailure] = '请求失败', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorTokenInvalid] = 'The token has expired', // 文件上传错误码
_a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileNotExist] = '找不到对应的本地文件', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadFailed] = '上传失败', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType] = '不支持渲染模式', // 格式转换错误码
_a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt] = '文件被加密', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit] = '文件内容过大', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSheetLimit] = '文件页数过多', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail] = '格式转换失败', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertCancel] = '格式转换被取消', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentEmpty] = '文件内容为空', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileReadOnly] = '文件为只读模式', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotSupported] = '源文件中存在不支持转码的元素', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid] = '文件后缀名不匹配', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileUnsafe] = '源文件中存在安全隐患，无法正常打开', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotExported] = '转码结束后存在图片、音视频文件未正常导出', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileCorruption] = '文件损坏', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentIncomplete] = '文件内容不完整', // SDK 接口调用
_a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorAuthParamInvalid] = '认证参数错误', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFilePathNotAccess] = '路径权限不足', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInitFailed] = '初始化失败', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorSizeInvalid] = '无法获取当前 view 宽高', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFreeSpaceLimit] = '本地空间不足', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadNotSupported] = '不支持文件上传功能', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadDuplicated] = '正在上传相同文件', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain] = '空域名', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorHaveInit] = '已初始化', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorServerFileNotExist] = '找不到对应的转码后文件', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheNotSupported] = '当前 AppID 不支持动态 PPT 预加载', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheFailed] = '预加载失败', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorZipFileInvalid] = '无效的 ZIP 文件', _a[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorH5FileInvalid] = '无效的 H5 文件，不符合 ZEGO 定义的 H5 文件规范', _a);
var ErrorCodeMap = {
  4: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid,
  32: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail,
  64: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertCancel,
  128: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt,
  256: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit,
  512: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSheetLimit,
  1024: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentEmpty,
  8192: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileReadOnly,
  32768: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotSupported,
  32769: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid,
  32773: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileCorruption,
  32774: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentIncomplete,
  60002: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileNotExist,
  60011: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorAuthParamInvalid,
  60013: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertCancel,
  60015: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType,
  60016: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit,
  60018: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorServerFileNotExist,
  60021: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType,
  60036: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorZipFileInvalid,
  60037: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt,
  60038: _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorH5FileInvalid,
  // '-100': http请求包错误,
  // '-101': http回包失败,
  '-102': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout,
  // '-103': http回包解析失败,
  // '-104': 文件路径包含不换行空格,
  '-105': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileNotExist,
  // '-106': 本地缓存为空,
  // '-107': http请求过于频繁,
  '-108': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType,
  '-109': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadFailed,
  '-110': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFilePathNotAccess,
  // '-111': 图片渲染失败,
  // '-112': 缓存信息不存在或过期，重新加载,
  // '-113': 请求过于频繁,
  '-114': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheFailed,
  '-115': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFreeSpaceLimit,
  '-116': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInitFailed,
  '-117': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit,
  '-118': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadNotSupported,
  '-119': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadDuplicated,
  '-120': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType,
  '-121': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain,
  // '-122': 已初始化,
  '-123': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentEmpty,
  '-124': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFilePathNotAccess,
  '-125': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheNotSupported,
  '-126': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt,
  '-127': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorZipFileInvalid,
  '-128': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt,
  '-129': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorH5FileInvalid,
  '-130': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotSupported,
  '-131': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid,
  '-132': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid,
  '-999998': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorSizeInvalid,
  '-999999': _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid
};
var transError = function transError(code, message) {
  code = ErrorCodeMap[code] || code;
  message = ErrorCodeData[code] || message || ErrorCodeData[_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInternal];
  return {
    code: code,
    message: message
  };
};
var ZegoWhiteboardError;

(function (ZegoWhiteboardError) {
  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthScroll"] = 3050002] = "ZegoWhiteboardViewErrorNoAuthScroll";
})(ZegoWhiteboardError || (ZegoWhiteboardError = {}));

/***/ }),

/***/ "./sdk/docsview/view/entities/index.ts":
/*!*********************************************!*\
  !*** ./sdk/docsview/view/entities/index.ts ***!
  \*********************************************/
/*! exports provided: ZegoConfigKey, ZegoDocsViewError, ZegoDocsViewFileType, ZegoDocsViewRenderType, ZegoDocsViewUploadState, transError, ZegoWhiteboardError, DomEvent, DomEventAction, isMobile, INTERVAL_PAGE, SYNC_PPT_TIME, SYNC_PPT_INIT_TIME, PPT_LOAD_TIME, RENDER_MAX_ZOOM, DOMIDS, RenderMode, DocsListener, H5ScriptEvents, H5ScriptConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return isMobile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INTERVAL_PAGE", function() { return INTERVAL_PAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SYNC_PPT_TIME", function() { return SYNC_PPT_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SYNC_PPT_INIT_TIME", function() { return SYNC_PPT_INIT_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PPT_LOAD_TIME", function() { return PPT_LOAD_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RENDER_MAX_ZOOM", function() { return RENDER_MAX_ZOOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMIDS", function() { return DOMIDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderMode", function() { return RenderMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocsListener", function() { return DocsListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H5ScriptEvents", function() { return H5ScriptEvents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H5ScriptConfig", function() { return H5ScriptConfig; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.match.js */ "./node_modules/core-js/modules/es.string.match.js");
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoConfigKey", function() { return _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoConfigKey"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewError", function() { return _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoDocsViewError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewFileType", function() { return _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoDocsViewFileType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewRenderType", function() { return _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoDocsViewRenderType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewUploadState", function() { return _code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoDocsViewUploadState"]; });

/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./error */ "./sdk/docsview/view/entities/error.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transError", function() { return _error__WEBPACK_IMPORTED_MODULE_3__["transError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardError", function() { return _error__WEBPACK_IMPORTED_MODULE_3__["ZegoWhiteboardError"]; });

/* harmony import */ var _Bridge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Bridge */ "./sdk/docsview/view/Bridge.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DomEvent", function() { return _Bridge__WEBPACK_IMPORTED_MODULE_4__["DomEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DomEventAction", function() { return _Bridge__WEBPACK_IMPORTED_MODULE_4__["DomEventAction"]; });





 // import { isMobile } from '../../docs/zego.docs.dep';

var isMobile = function isMobile() {
  if (window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) {
    return true; // 移动端
  } else {
    return false; // PC端
  }
};
var INTERVAL_PAGE = 100; // 快速翻页 时间间隔毫秒

var SYNC_PPT_TIME = 1000; // 动态PPT跳转任务超时时间

var SYNC_PPT_INIT_TIME = 20000; // 动态PPT首次跳转任务超时时间

var PPT_LOAD_TIME = 62000; // 动态PPT加载超时时间

var RENDER_MAX_ZOOM = isMobile() ? 1.5 : 2 * (window.devicePixelRatio || 1);
var DOMIDS = {
  zoom: 'zego-docsview-zoom',
  doc: 'zego-docsview-con',
  render: 'zego-docsview-render',
  iframe: 'zego-docsview-iframe',
  wb: 'zego-whiteboard'
};
var RenderMode;

(function (RenderMode) {
  RenderMode[RenderMode["PDF"] = 0] = "PDF";
  RenderMode[RenderMode["PPT"] = 1] = "PPT";
  RenderMode[RenderMode["H5_PPT"] = 2] = "H5_PPT";
  RenderMode[RenderMode["H5_CUSTOM"] = 3] = "H5_CUSTOM"; // 自定义 H5
})(RenderMode || (RenderMode = {}));

var DocsListener;

(function (DocsListener) {
  DocsListener["Load"] = "onDocsLoadPdf";
  DocsListener["GetPageImage"] = "onDocsGetPDFPageImage";
  DocsListener["Uploading"] = "onDocsUploading";
  DocsListener["Convert"] = "onDocsConvertStatus";
  DocsListener["Downloading"] = "onDocsDownloading";
  DocsListener["QueryCache"] = "onDocsCachExist";
  DocsListener["CancelCache"] = "onDocsCancelCache";
  DocsListener["DownloadCache"] = "onDocsDownloadCache"; // 回调 -> Promise

  DocsListener["LoadFile"] = "docsLoad";
  DocsListener["Upload"] = "docsUpload";
  DocsListener["UploadH5File"] = "docsUploadH5File";
})(DocsListener || (DocsListener = {}));

var H5ScriptEvents;

(function (H5ScriptEvents) {
  H5ScriptEvents["InitPlatform"] = "initPlatform";
  H5ScriptEvents["GetAllPageStepCount"] = "getAllPageStepCount";
  H5ScriptEvents["SetCustomizedConfig"] = "setCustomizedConfig";
  H5ScriptEvents["GotoPage"] = "gotoPage";
  H5ScriptEvents["PreviousStep"] = "previousStep";
  H5ScriptEvents["NextStep"] = "nextStep";
  H5ScriptEvents["TriggerElementsClick"] = "triggerElementsClick";
  H5ScriptEvents["SnapshotForH5"] = "snapshotForH5";
  H5ScriptEvents["StopPlay"] = "stopPlay";
  H5ScriptEvents["SetVolume"] = "setVolume";
  H5ScriptEvents["HideLoadingStyle"] = "hideLoadingStyle";
})(H5ScriptEvents || (H5ScriptEvents = {}));

var H5ScriptConfig;

(function (H5ScriptConfig) {
  H5ScriptConfig["Scale"] = "scale";
  H5ScriptConfig["SyncDOMEvent"] = "syncDOMEvent";
  H5ScriptConfig["PptOperationAuth"] = "pptOperationAuth";
})(H5ScriptConfig || (H5ScriptConfig = {}));

/***/ }),

/***/ "./sdk/docsview/view/services/base.ts":
/*!********************************************!*\
  !*** ./sdk/docsview/view/services/base.ts ***!
  \********************************************/
/*! exports provided: ZegoDocsViewServiceBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewServiceBase", function() { return ZegoDocsViewServiceBase; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assets_polyfill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/polyfill */ "./sdk/docsview/view/assets/polyfill.js");
/* harmony import */ var _assets_polyfill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_assets_polyfill__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _assets_index_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/index.css */ "./sdk/docsview/view/assets/index.css");
/* harmony import */ var _assets_index_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_assets_index_css__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities */ "./sdk/docsview/view/entities/index.ts");





var ZegoDocsViewServiceBase =
/** @class */
function () {
  function ZegoDocsViewServiceBase() {
    var _a;

    this.isElectron = false;
    this.store = (_a = {}, _a[_entities__WEBPACK_IMPORTED_MODULE_3__["ZegoConfigKey"].PptStepMode] = 1, _a[_entities__WEBPACK_IMPORTED_MODULE_3__["ZegoConfigKey"].DisableH5ImageDrag] = false, _a[_entities__WEBPACK_IMPORTED_MODULE_3__["ZegoConfigKey"].UnloadVideoSrc] = false, _a.multiDocsQueue = null, _a.syncPPTH5Queue = null, _a.syncQueueRuning = false, _a);
  }

  ZegoDocsViewServiceBase.prototype.setStore = function (obj) {
    Object.assign(this.store, obj);
    return true;
  };

  ZegoDocsViewServiceBase.prototype.getStore = function () {
    return this.store;
  };

  return ZegoDocsViewServiceBase;
}();



/***/ }),

/***/ "./sdk/docsview/view/views/viewMod.ts":
/*!********************************************!*\
  !*** ./sdk/docsview/view/views/viewMod.ts ***!
  \********************************************/
/*! exports provided: ZegoDocsViewImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewImpl", function() { return ZegoDocsViewImpl; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.object.freeze.js */ "./node_modules/core-js/modules/es.object.freeze.js");
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.url.js */ "./node_modules/core-js/modules/web.url.js");
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/web.url-search-params.js */ "./node_modules/core-js/modules/web.url-search-params.js");
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.array.from.js */ "./node_modules/core-js/modules/es.array.from.js");
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.reduce.js */ "./node_modules/core-js/modules/es.array.reduce.js");
/* harmony import */ var core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.date.now.js */ "./node_modules/core-js/modules/es.date.now.js");
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_es_array_every_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/es.array.every.js */ "./node_modules/core-js/modules/es.array.every.js");
/* harmony import */ var core_js_modules_es_array_every_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_every_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.number.max-safe-integer.js */ "./node_modules/core-js/modules/es.number.max-safe-integer.js");
/* harmony import */ var core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! core-js/modules/es.string.starts-with.js */ "./node_modules/core-js/modules/es.string.starts-with.js");
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_30__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! core-js/modules/es.array.sort.js */ "./node_modules/core-js/modules/es.array.sort.js");
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_33__);
/* harmony import */ var core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! core-js/modules/es.function.bind.js */ "./node_modules/core-js/modules/es.function.bind.js");
/* harmony import */ var core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_34__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_36__);
/* harmony import */ var _assets_img__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../assets/img */ "./sdk/docsview/view/assets/img.ts");
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _entities__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../entities */ "./sdk/docsview/view/entities/index.ts");
/* harmony import */ var _Logger_new__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../Logger_new */ "./sdk/docsview/view/Logger_new.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }







































var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArrays = undefined && undefined.__spreadArrays || function () {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {
    s += arguments[i].length;
  }

  for (var r = Array(s), k = 0, i = 0; i < il; i++) {
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {
      r[k] = a[j];
    }
  }

  return r;
};



 // import { Logger, getLogAction } from '../Logger';
// const logAction = getLogAction.bind(null, 'docs.v.');



var ZegoDocsViewImpl =
/** @class */
function () {
  function ZegoDocsViewImpl(serviceHandle, viewID, sheet) {
    var _this = this;

    this.parent = '';
    this.id = '';
    this.wbId = '';
    this.urlObject = '';
    this.canvasArray = [];
    this.renderMode = _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF; // 该判断只能用于判断设备是否有触屏能力。(ps: 在触屏电脑surface中，第一个判断为false,为此需要第二个判断作为补充)

    this.isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    this.viewInfo = {
      ticking: false,
      percent: 0,
      total: 1,
      sheet: 0,
      sheetName: '',
      // 父容器大小
      parentWidth: 0,
      parentHeight: 0,
      // 内容大小
      width: 0,
      height: 0,
      // 视窗大小
      viewWidth: 0,
      viewHeight: 0,
      rate: 1,
      canvasMaxPage: 5,
      // 换算成非缩放的滚动值
      scrollTop: 0,
      scrollLeft: 0,
      lastTime: 0,
      lastTimeId: 0,
      scrollTimeId: 0,
      isParentScale: false,
      fillPPT: false,
      h5CDNUsedMap: {},
      // 图片类型信息
      imgInfo: {
        isSmall: false,
        isScale: false,
        width: 0,
        height: 0,
        min_w: 640,
        min_h: 400
      },
      // 首次进房时需要同步的数据
      firstInfo: {
        page: 0,
        step: 0,
        h5Extra: '',
        loadedFile: false,
        // 在canvas加载完成之前，如果有滚动事件，则记录最新的位置。在canvas绘制完之后进行滚动。0: 初始化 -1: 关闭
        scrollTop: 0
      },
      maxSteps: {},
      isClearCanvas: false,
      filePageSize: undefined
    };
    this.zoomInfo = {
      zoom: 1,
      x: 0,
      y: 0,
      tx: 0,
      ty: 0,
      isDrag: false,
      enableScroll: true,
      remoteScroll: true,
      dragRectTop: 0,
      dragRectBottom: 0
    };
    this.ppth5Info = {
      page: 1,
      step: 1,
      scene: 0,
      targetPage: 0,
      targetStep: 0,
      lastStep: -1,
      goPage: 0,
      goStep: 0,
      notify: true,
      loaded: false,
      scale: 1,
      goTimer: 0,
      syncTimer: 0,
      pageChangeTimer: 0,
      p: '',
      loadRetryTimer: 0 // 加载 H5 超时定时器（脚本没有返回加载超时错误码）

    };
    this.fileInfo = {};
    this.vpageImgCache = {};
    this.vpageAspecCache = {};
    this.vpageDrawImgCache = {}; // @ts-ignore

    this.domEventListeners = null;
    this.loadFileListenerMap = {};

    this.loadFileCallback = function () {
      var res = _this.getLoadFileModelForCallback();

      if (_this.loadFileListenerMap[res.fileID] && typeof _this.loadFileListenerMap[res.fileID] == 'function') {
        // @ts-ignore
        _this.loadFileListenerMap[res.fileID](res);
      } else {
        _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoDocsEventType"].LoadFile, res);
      }

      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'loadFileCallback');
    };

    this.reloadViewCallback = function () {
      var detail = {
        action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].ReloadView,
        data: _this.getLoadFileModelForCallback()
      };

      _this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));

      if (_this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
        var zoom = _this.zoomInfo.zoom; // this.getDocViewChild().style.cssText += `transform:scale(${zoom});`;

        var x = _this.viewInfo.scrollLeft * zoom | 0;
        var y = _this.viewInfo.scrollTop * zoom | 0;

        _this.docDom.scrollTo(x, y);

        _this.renderDom.scrollTo(x, y);

        clearTimeout(_this.viewInfo.scrollTimeId);
        _this.viewInfo.scrollTimeId = window.setTimeout(function () {
          _this.viewInfo.ticking = false;
        }, 34);
      } else {
        _this.setDocsViewDomTransform(_this.zoomInfo.tx, _this.zoomInfo.ty);
      }

      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'reloadViewCallback');
    };

    this.handleWhiteboardEvent = function (e) {
      var data = e && e.detail;
      var action = data.action;
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], _entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Whiteboard, JSON.stringify({
        data: data
      }));

      if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Page) {
        _this.handleWhiteboardPageEvent(data);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbScale) {
        // 白板调用缩放接口
        var _a = data,
            scale = _a.scale,
            x = _a.x,
            y = _a.y,
            notify = _a.notify;

        _this.handleSetScaleFactor(scale, x, y, notify);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbDragTool) {
        // 白板设置拖拽工具
        _this.handleWhiteboardDragToolEvent(data);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbInit) {
        // 白板初始化完成
        _this.handleWhiteboardInitEvent(data);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Animation) {
        // 动画点击事件
        _this.handleWhiteboardAnimationEvent(data);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbDestroy) {
        // 白板销毁
        _this.unloadFile();
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Snapshot) {
        // 白板截图
        _this.docsSnapshot(data);
      } else if (action === _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].ReloadView) {
        // 白板重新渲染（自适应父容器大小）
        _this.reloadView();
      } else if (action == _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbSwitch) {
        _this.reloadCanvas();
      } else if (action == _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].ClearEvent) {
        window.removeEventListener('message', _this.handleIframeMessage);
      }
    };

    this.handleIframeMessage = function (e) {
      var data = e.data; // {source, action, res}

      if (!data || data.source !== 'zegodocsview') return;
      var action = data.action,
          res = data.res,
          hash = data.hash;
      if (hash && hash !== "#" + _this.id) return;

      if (action !== 'syncDOMEvent' && action !== 'getH5SnapshotResult') {
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_iframe', JSON.stringify({
          data: data
        }));
      }

      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_iframe', JSON.stringify({
        action: action,
        res: res
      }));

      if (action === 'syncCurrentPage') {
        _this.syncCurrentPage(res);
      } else if (action === 'syncCurrentStep' && _this.ppth5Info.loaded) {
        _this.syncCurrentStep(res);
      } else if (action === 'syncCurrentPageStep') {
        _this.syncCurrentPageStep(res);
      } else if (action === 'syncCurrentElement') {
        _this.syncCurrentElement(res);
      } else if (action === 'syncDOMEvent' && _this.domEventListeners) {
        var cb = _this.domEventListeners[res.type];
        cb && cb(res);
      } else if (action === 'syncCurrentError') {
        _this.syncCurrentError(res);
      } else if (action === 'onload') {
        _this.initIframe();
      } else if (action === 'didLoadFinish') {
        _this.ppth5Info.loadRetryTimer && clearTimeout(_this.ppth5Info.loadRetryTimer);
      } else if (action === 'getAllPageStepCount') {
        _this.viewInfo.maxSteps = Object.freeze(JSON.parse(res));
      } else if (action === 'getH5SnapshotResult') {
        _this.getH5SnapshotResult(res);
      }
    };

    this.handleScrollEvent = function (event) {
      if (_this.zoomInfo.enableScroll && !_this.viewInfo.ticking) {
        requestAnimationFrame(function () {
          _this.ppth5Info.notify = true;
          var _a = _this.zoomInfo,
              zoom = _a.zoom,
              dragRectTop = _a.dragRectTop,
              dragRectBottom = _a.dragRectBottom;
          var target = event.target;
          var top = Math.ceil(target.scrollTop);
          var left = Math.ceil(target.scrollLeft);

          var _top = Math.ceil(top / zoom);

          var _left = Math.ceil(left / zoom);

          var ofsY = Math.ceil(top - _this.viewInfo.percent * _this.viewInfo.height * zoom);

          if (_left !== _this.viewInfo.scrollLeft) {
            _this.viewInfo.scrollLeft = _left;
            _this.renderDom.scrollLeft = left;

            _this.postSyncDragMessage(left, ofsY);
          } else if (_top !== _this.viewInfo.scrollTop) {
            _this.renderDom.scrollTop = top;

            if (zoom == 1 || top < dragRectTop || top > dragRectBottom) {
              // 超出边界：发送滚动消息
              _this.updateCurViewMax(top, zoom);

              _this.onScrollCallback(left, top);
            } else {
              // 边界范围内：发送缩放消息
              _this.postSyncDragMessage(left, ofsY);
            }

            _this.viewInfo.scrollTop = _top;
          }

          _this.viewInfo.ticking = false;
        });
        _this.viewInfo.ticking = true;
      }
    };

    this.handleDragStart = function (event) {
      _this.zoomInfo.x = _this.zoomInfo.y = 0;
      var _a = _this.zoomInfo,
          isDrag = _a.isDrag,
          enableScroll = _a.enableScroll,
          zoom = _a.zoom;

      if (isDrag) {
        if (!enableScroll && zoom === 1) return;

        var _b = event instanceof MouseEvent ? event : event.changedTouches[0],
            clientX = _b.clientX,
            clientY = _b.clientY;

        if (_this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
          // 鼠标按下时在滚动条上，拖拽无效
          var _c = _this.docDom.getBoundingClientRect(),
              bottom = _c.bottom,
              right = _c.right;

          if (clientX > right - 15 || clientY > bottom - 15) return;
          _this.zoomInfo.tx = _this.docDom.scrollLeft || _this.viewInfo.scrollLeft * zoom;
          _this.zoomInfo.ty = _this.docDom.scrollTop || _this.viewInfo.scrollTop * zoom;
        }

        if (zoom > 1 || _this.viewInfo.height > _this.viewInfo.viewHeight) {
          _this.zoomInfo.x = clientX;
          _this.zoomInfo.y = clientY;
        }
      }
    };

    this.handleDragMove = function (event, end) {
      if (_this.zoomInfo.isDrag && _this.zoomInfo.x) {
        // 没有按下鼠标键移动鼠标时，视为无效
        if (event instanceof MouseEvent && !end && event.buttons < 1) return; // 阻止默认事件避免拖拽整个视图

        if (event.type === 'touchmove') event.preventDefault();
        _this.ppth5Info.notify = true;

        if (_this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
          _this.dragPDF(event, !!end);
        } else {
          _this.dragPPT(event, !!end);
        }
      }
    };

    this.handleDragEnd = function (event) {
      _this.handleDragMove(event, true);
    };

    this.serviceHandle = serviceHandle;
    this.id = viewID;
    this.setSheet(sheet);
    this.serviceHandle.registerEventHandler(this.id, _entities__WEBPACK_IMPORTED_MODULE_39__["DocsListener"].Load, function (res) {
      _this.viewInfo.firstInfo.loadedFile = true;

      _this.tranlateFileAspec(res);

      Object.assign(_this.fileInfo, res);

      _this.checkRenderType();

      _this.loadCurrentSheet(true);
    });
  }

  ZegoDocsViewImpl.prototype.clearCanvasCache = function () {
    var type = this.getFileType();

    if (type == _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
      for (var i = 0, l = this.canvasArray.length; i < l; i++) {
        this.canvasArray[i].width = this.canvasArray[i].height = 0;
      }

      this.viewInfo.isClearCanvas = true;
    }
  };

  ZegoDocsViewImpl.prototype.reloadCanvas = function () {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!this.viewInfo.isClearCanvas) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , this.drawImg('', this.canvasArray[0])];

          case 1:
            _a.sent();

            this.viewInfo.isClearCanvas = false;
            _a.label = 2;

          case 2:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoDocsViewImpl.prototype.getCanvasSize = function () {
    var _a;

    if (!((_a = this.canvasArray) === null || _a === void 0 ? void 0 : _a[0])) return 0;
    return this.canvasArray[0].width * this.canvasArray[0].height;
  };

  ZegoDocsViewImpl.prototype.unload = function () {
    for (var i = 0, l = this.canvasArray.length; i < l; i++) {
      this.canvasArray[i].width = this.canvasArray[i].height = 0; // @ts-ignore
      // this.canvasArray[i] = null;
    }

    URL.revokeObjectURL(this.urlObject); // @ts-ignore

    this.urlObject = null; // @ts-ignore

    this.docDom = null; // @ts-ignore

    this.renderDom = null; // @ts-ignore

    this.iframeDom = null; // @ts-ignore

    this.loadingDom = null; // @ts-ignore

    this.canvasArray = null; // @ts-ignore

    this.fileInfo = null; // @ts-ignore

    this.vpageImgCache = null; // @ts-ignore

    this.vpageDrawImgCache = null; // @ts-ignore

    this.domEventListeners = null; // @ts-ignore

    this.loadFileListener = null;
    this.serviceHandle.removeEventHandler(this.id);
  };

  ZegoDocsViewImpl.prototype.setParentWidthHeight = function () {
    var dom = document.getElementById(this.parent);
    dom.style.cssText += 'position:relative;display:inherit!important;';
    var clientWidth = dom.clientWidth,
        clientHeight = dom.clientHeight;

    if (clientWidth <= 0 || clientHeight <= 0) {
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoEventType"].Error, Object(_entities__WEBPACK_IMPORTED_MODULE_39__["transError"])(_entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewError"].ZegoDocsViewErrorSizeInvalid));
      throw new Error('无法获取容器宽高');
    }

    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'setParentWidthHeight', JSON.stringify({
      clientWidth: clientWidth,
      clientHeight: clientHeight
    }));
    this.viewInfo.parentWidth = clientWidth;
    this.viewInfo.parentHeight = clientHeight;
  };

  ZegoDocsViewImpl.prototype.setDocsViewDomOverflow = function () {
    var _a = this.zoomInfo,
        zoom = _a.zoom,
        enableScroll = _a.enableScroll;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'setDocsViewDomOverflow', JSON.stringify({
      zoom: zoom,
      enableScroll: enableScroll
    }));

    if (zoom > 1) {
      var str = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF && enableScroll ? 'auto' : 'hidden';
      this.docDom.style.overflowX = str;
      this.docDom.style.overflowY = str;

      if (this.renderDom) {
        this.renderDom.style.overflowX = str;
        this.renderDom.style.overflowY = str;
      }
    } else {
      var _b = this.viewInfo,
          height = _b.height,
          viewHeight = _b.viewHeight;
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'setDocsViewDomOverflow', JSON.stringify({
        height: height,
        viewHeight: viewHeight
      }));
      var str = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF && enableScroll && height > viewHeight ? ' auto' : 'hidden';
      this.docDom.style.overflowX = 'hidden';
      this.docDom.style.overflowY = str;

      if (this.renderDom) {
        this.renderDom.style.overflowX = 'hidden';
        this.renderDom.style.overflowY = str;
      }
    }
  };

  ZegoDocsViewImpl.prototype.setDocsViewDomTransform = function (x, y) {
    var getCss = function getCss(x, y, zoom) {
      return "transform:translate(" + x + "px," + y + "px) scale(" + zoom + ");";
    };

    var zoom = this.zoomInfo.zoom;

    var _y = y - (this.ppth5Info.page - 1) * this.viewInfo.viewHeight * zoom;

    var child = this.renderDom.firstChild;
    child.style.cssText += getCss(x, y, zoom);
    child = this.getDocViewChild();
    child.style.cssText += getCss(x, _y, zoom);
  };

  ZegoDocsViewImpl.prototype.getCanvasSplit = function (page) {
    var _a = this.viewInfo,
        canvasMaxPage = _a.canvasMaxPage,
        total = _a.total;
    var index = (page - 1) / canvasMaxPage | 0;
    return {
      index: index,
      start: index * canvasMaxPage + 1,
      end: Math.min(index * canvasMaxPage + canvasMaxPage, total)
    };
  };

  ZegoDocsViewImpl.prototype.getCanvasHeight = function (index) {
    var _a = this.viewInfo,
        sheet = _a.sheet,
        total = _a.total,
        height = _a.height,
        viewHeight = _a.viewHeight,
        canvasMaxPage = _a.canvasMaxPage;
    var aspec = this.vpageAspecCache[sheet];
    var h = aspec.h[index] || 0;
    if (h) return h;
    var type = this.getFileType();

    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
      h = height;
      aspec.h[index] = h;
      return h;
    }

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) {
      h = viewHeight;
      aspec.h[index] = h;
      return h;
    }

    var start = index ? aspec.p[index * canvasMaxPage] + 1 : aspec.vs;
    var end = aspec.p[Math.min((index + 1) * canvasMaxPage, total)];

    for (var i = start; i <= end; i++) {
      h += aspec[i].h;
    }

    h = Math.round(h);
    aspec.h[index] = h;
    return h;
  };

  ZegoDocsViewImpl.prototype.getImgErrorAspec = function (w, h, y) {
    var img_w = 128 * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    var x = (w - img_w) / 2;
    y += (h - img_w) / 2;
    return [x, y, img_w, img_w];
  };

  ZegoDocsViewImpl.prototype.clearImgError = function (ctx, w, h, y) {
    ctx.clearRect.apply(ctx, this.getImgErrorAspec(w, h, y));
  };

  ZegoDocsViewImpl.prototype.drawImgError = function (ctx, w, h, y, p) {
    ctx.drawImage.apply(ctx, __spreadArrays([_assets_img__WEBPACK_IMPORTED_MODULE_37__["IMG_ERROR"]], this.getImgErrorAspec(w, h, y)));
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().error(['DocsView_View'], 'draw_error', JSON.stringify({
      p: this.ppth5Info.page,
      vpage: p
    }));
  };

  ZegoDocsViewImpl.prototype.drawDividingLine = function (ctx, page, x, y, w, h, isHorizontal) {
    ctx.lineWidth = _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    ctx.beginPath();

    if (isHorizontal) {
      ctx.moveTo(x, 0);
      ctx.lineTo(x, h);
    } else {
      ctx.moveTo(0, y);
      ctx.lineTo(w, y);
    }

    ctx.stroke();
  };

  ZegoDocsViewImpl.prototype.getCurrentCDNHost = function (src) {
    return /^https?:\/\//.test(src) && src.indexOf('.zego.im') > 0 ? src.substr(0, src.indexOf('.zego.im') + 8) : '';
  };

  ZegoDocsViewImpl.prototype.changeDecryptImageCDNHost = function (img, usedMap, src, cb) {
    var _this = this;

    var host = this.getCurrentCDNHost(src);
    var hosts = this.getCDNHostList();

    if (host && hosts.length) {
      usedMap[host] = 1;
      var index = (hosts.findIndex(function (v) {
        return v === host;
      }) + 1) % hosts.length;

      if (!usedMap[hosts[index]]) {
        var url_1 = src.replace(host, hosts[index]);
        this.serviceHandle.decryptImage(url_1).then(function (url) {
          return img.src = url;
        })["catch"](function () {
          return _this.changeDecryptImageCDNHost(img, usedMap, url_1, cb);
        });
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_img_cdn', JSON.stringify({
          src: url_1,
          action: 'DecryptImage'
        }));
        return;
      }
    }

    var error = {
      src: src,
      action: 'DecryptImageLoadError',
      usedMap: usedMap
    };
    this.postErrorMessage(error);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().error(['DocsView_View'], 'draw_img_error', JSON.stringify({
      error: error
    }));
    cb();
  };

  ZegoDocsViewImpl.prototype.changeImageCDNHost = function (img, usedMap, type, page) {
    var host = this.getCurrentCDNHost(img.src);
    var hosts = this.getCDNHostList();

    if (host && hosts.length) {
      usedMap[host] = 1;
      var index = (hosts.findIndex(function (v) {
        return v === host;
      }) + 1) % hosts.length;

      if (!usedMap[hosts[index]]) {
        img.src = img.src.replace(host, hosts[index]) + (page ? "?p=" + page : '');
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_' + type + '_cdn', JSON.stringify({
          src: img.src,
          page: page
        }));
        return true;
      }
    }

    var error = {
      src: img.src,
      page: page,
      action: 'ImageLoadError',
      code: _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout
    };
    this.postErrorMessage(error);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().error(['DocsView_View'], 'draw_' + type + '_cdn', JSON.stringify({
      error: error
    }));
    return false;
  };

  ZegoDocsViewImpl.prototype.changeH5CDNHost = function () {
    var _this = this;

    var h5CDNUsedMap = this.viewInfo.h5CDNUsedMap;
    var src = this.iframeDom.src;
    var host = this.getCurrentCDNHost(src);
    var hosts = this.getCDNHostList();

    if (host && hosts.length) {
      h5CDNUsedMap[host] = (h5CDNUsedMap[host] || 0) + 1;
      var index = (hosts.findIndex(function (v) {
        return v === host;
      }) + 1) % hosts.length;
      var hostNew = hosts[index];

      if (index > 0 && !h5CDNUsedMap[hostNew]) {
        this.iframeDom.src = src.replace(host, hostNew);
        this.ppth5Info.loadRetryTimer && clearTimeout(this.ppth5Info.loadRetryTimer);
        this.ppth5Info.loadRetryTimer = window.setTimeout(function () {
          return _this.changeH5CDNHost();
        }, _entities__WEBPACK_IMPORTED_MODULE_39__["PPT_LOAD_TIME"]);
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_h5_cdn', JSON.stringify({
          src: this.iframeDom.src
        }));
        return;
      } // cdn 全部使用后再重试一次


      if (index == 0 && h5CDNUsedMap[hostNew] == 1) {
        for (var i = 1; i < hosts.length; i++) {
          h5CDNUsedMap[hosts[i]] = 0;
        }

        if (hosts.length == 1) {
          // 只有一个 cdn 地址时，src 没有改变，需要增删 dom 触发重新加载
          this.renderDom.removeChild(this.iframeDom);
          var _a = this.vpageAspecCache[0][1],
              w = _a.w,
              h = _a.h;
          this.createIFrame(_entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].iframe + this.id, w, h);
          this.iframeDom.src = src;
          this.renderDom.appendChild(this.iframeDom);
        } else {
          this.iframeDom.src = src.replace(host, hostNew);
        }

        this.ppth5Info.loadRetryTimer && clearTimeout(this.ppth5Info.loadRetryTimer);
        this.ppth5Info.loadRetryTimer = window.setTimeout(function () {
          return _this.changeH5CDNHost();
        }, _entities__WEBPACK_IMPORTED_MODULE_39__["PPT_LOAD_TIME"]);
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_h5_cdn_retry', JSON.stringify({
          src: this.iframeDom.src
        }));
        return;
      }
    }

    this.ppth5Info.loadRetryTimer && clearTimeout(this.ppth5Info.loadRetryTimer);
    var error = {
      src: src,
      action: 'H5LoadError',
      code: _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout
    };
    this.postErrorMessage(error);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().error(['DocsView_View'], 'draw_h5_error', JSON.stringify({
      error: error
    }));
  };

  ZegoDocsViewImpl.prototype.drawPPT = function (vpage, w, h, src, canvas) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      w *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
      h *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
      var usedMap = {};
      var ctx = canvas.getContext('2d');
      var img = new Image();
      img.setAttribute('crossOrigin', 'anonymous');
      img.onload = _this.delayDraw(function () {
        // 每次绘制之前，清除画布并添加背景色，处理透明底的情况
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, w, h);
        ctx.drawImage(img, 0, 0, w, h);
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_ppt', JSON.stringify({
          p: _this.ppth5Info.page,
          vpage: vpage,
          w: w,
          h: h
        }));
        resolve();
      });

      img.onerror = function (e) {
        if (_this.changeImageCDNHost(img, usedMap, 'ppt', vpage)) return;
        ctx.clearRect(0, 0, w, h);

        _this.drawImgError(ctx, w, h, 0, vpage);

        reject(e);
      };

      img.src = /^https?:\/\//.test(src) ? src + "?p=" + vpage : "data:image/png;base64," + src;
    });
  };

  ZegoDocsViewImpl.prototype.drawPDF = function (page, vpage, x, y, w, h, src) {
    var _this = this;

    if (this.vpageDrawImgCache[vpage]) return Promise.resolve(); // 快速翻页 仅当前视窗对应的 canvas 进行渲染

    var _a = this.getCanvasSplit(page),
        index = _a.index,
        start = _a.start,
        end = _a.end;

    if (page < start || page > end) return Promise.resolve();
    x *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    y *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    w *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    h *= _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    var aspec = this.vpageAspecCache[this.viewInfo.sheet];
    var ctx = this.canvasArray[index].getContext('2d');
    vpage -= aspec.vs - 1;
    return new Promise(function (resolve, reject) {
      var usedMap = {};
      var img = new Image();
      img.setAttribute('crossOrigin', 'anonymous');
      img.onload = _this.delayDraw(function () {
        _this.clearImgError(ctx, w, h, y); // 添加背景色，处理透明底的情况


        ctx.fillStyle = 'white';

        if (!aspec.o) {
          ctx.fillRect(0, y, w, h);
          ctx.drawImage(img, 0, y, w, h);
        } else {
          ctx.fillRect(x, 0, w, h);
          ctx.drawImage(img, x, 0, w, h);
        }

        _this.vpageDrawImgCache[vpage] = 1;
        vpage > 1 && vpage === aspec.p[page - 1] + 1 && _this.drawDividingLine(ctx, page, x, y, w, h, aspec.o);
        resolve();
      });

      img.onerror = function (e) {
        if (_this.changeImageCDNHost(img, usedMap, 'pdf', vpage)) return;

        _this.drawImgError(ctx, w, h, y, vpage);

        _this.vpageDrawImgCache[vpage] = 0;
        vpage > 1 && vpage === aspec.p[page - 1] + 1 && _this.drawDividingLine(ctx, page, x, y, w, h, aspec.o);
        reject(e);
      };

      img.src = /^https?:\/\//.test(src) ? src + "?p=" + vpage : "data:image/png;base64," + src;
    });
  };

  ZegoDocsViewImpl.prototype.drawImg = function (src, canvas) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      var usedMap = {};
      var _a = _this.viewInfo,
          parentWidth = _a.parentWidth,
          parentHeight = _a.parentHeight,
          viewWidth = _a.viewWidth,
          viewHeight = _a.viewHeight,
          rate = _a.rate;
      var aspec = _this.vpageAspecCache[0][1];
      var ctx = canvas.getContext('2d');
      var img = new Image();
      img.setAttribute('crossOrigin', 'anonymous');

      img.onload = function () {
        var _a = _this.viewInfo.imgInfo,
            min_w = _a.min_w,
            min_h = _a.min_h;
        var width = img.width,
            height = img.height;
        var img_rate = height / width;
        var isSmall = width <= min_w && height <= min_h;
        var isScale = width <= 1440 && img_rate <= 2.2 && img_rate >= 614 / 1280;
        _this.viewInfo.imgInfo.isSmall = isSmall;
        _this.viewInfo.imgInfo.isScale = isScale;
        _this.viewInfo.imgInfo.width = width;
        _this.viewInfo.imgInfo.height = height;

        _this.clearImgError(ctx, viewWidth * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"], viewHeight * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"], 0);

        if (isSmall || isScale) {
          // 单页全貌居中：等比撑到640*400或者容器区域展示
          var rate_w = isSmall ? Math.min(min_w, parentWidth) / width : parentWidth / width;
          var rate_h = isSmall ? Math.min(min_h, parentHeight) / height : parentHeight / height;
          var cur_rate = Math.min(rate_w, rate_h);
          var draw_w = width * cur_rate | 0;
          var draw_h = height * cur_rate | 0;
          var pos_x = (parentWidth - draw_w) / 2;
          var pos_y = (parentHeight - draw_h) / 2;
          Object.assign(aspec, {
            x: pos_x,
            y: pos_y,
            w: draw_w,
            h: draw_h
          });
          _this.viewInfo.height = aspec.h;

          _this.updateDocsViewLayout(pos_x, pos_y, draw_w, draw_h);

          _this.setCanvasWidthHeight(canvas, draw_w, draw_h);

          ctx.fillStyle = 'white';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_img_scale', JSON.stringify({
            width: width,
            height: height,
            draw_w: draw_w,
            draw_h: draw_h,
            rate: cur_rate
          }));
        } else {
          var draw_w = width * rate | 0;
          var draw_h = height * rate | 0;
          var pos_y = Math.max((parentHeight - draw_h) / 2, 0);
          Object.assign(aspec, {
            x: 0,
            y: pos_y,
            w: parentWidth,
            h: draw_h
          });
          _this.viewInfo.height = aspec.h;

          _this.updateDocsViewLayout(0, pos_y, parentWidth, Math.min(parentHeight, draw_h));

          _this.setCanvasWidthHeight(canvas, parentWidth, draw_h);

          ctx.fillStyle = 'white';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_img_full', JSON.stringify({
            width: width,
            height: height,
            draw_w: draw_w,
            draw_h: draw_h,
            rate: rate
          }));
        }

        var file = _this.getFile();

        file.max_width = aspec.w;
        file.total_height = aspec.h;
        resolve();
      };

      if (src == '' && _this.getFileType() == _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG && _this.urlObject) {
        _this.setCanvasWidthHeight(canvas, parentWidth, parentHeight);

        img.src = _this.urlObject;
        return;
      } // 需要解密的图片


      if (/^https?:\/\//.test(src)) {
        var cb_1 = function cb_1() {
          _this.setCanvasWidthHeight(canvas, parentWidth, parentHeight);

          _this.drawImgError(ctx, canvas.width, canvas.height, 0, 1);

          reject();
        };

        _this.serviceHandle.decryptImage(src).then(function (url) {
          _this.urlObject = url;
          img.src = url;
        })["catch"](function () {
          return _this.changeDecryptImageCDNHost(img, usedMap, src, cb_1);
        });
      } else {
        img.onerror = function () {
          if (_this.changeImageCDNHost(img, usedMap, 'img')) return;

          _this.setCanvasWidthHeight(canvas, parentWidth, parentHeight);

          _this.drawImgError(ctx, canvas.width, canvas.height, 0, 1);

          reject();
        };

        img.src = 'file://' + src;
      }
    });
  };

  ZegoDocsViewImpl.prototype.createDocsView = function () {
    var domId = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].doc + this.id;

    if (!document.getElementById(domId)) {
      this.canvasArray = [];
      this.vpageDrawImgCache = {};
      var dom = document.createElement('div');
      dom.id = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].render + this.id;
      this.renderDom = dom;
      dom = document.createElement('div');
      dom.id = domId;
      dom.setAttribute('data-page', this.viewInfo.total + '');
      dom.setAttribute('data-mode', this.renderMode + ''); // 监听白板事件

      dom.addEventListener(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Whiteboard, this.handleWhiteboardEvent);
      this.docDom = dom;
      var zoomDom = document.createElement('div');
      zoomDom.id = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].zoom + this.id;
      zoomDom.appendChild(this.renderDom);
      this.createImageLoading(zoomDom);
      zoomDom.appendChild(this.docDom);
      var parent_1 = document.getElementById(this.parent);
      parent_1.appendChild(zoomDom);
      dom.addEventListener('scroll', this.handleScrollEvent);
      dom.addEventListener('mousedown', this.handleDragStart);
      dom.addEventListener('mousemove', this.handleDragMove);
      dom.addEventListener('mouseup', this.handleDragEnd);
      dom.addEventListener('mouseleave', this.handleDragEnd);
      dom.addEventListener('touchstart', this.handleDragStart);
      dom.addEventListener('touchmove', this.handleDragMove);
      dom.addEventListener('touchend', this.handleDragEnd);
      dom.addEventListener('touchcancel', this.handleDragEnd);
    }
  };

  ZegoDocsViewImpl.prototype.createImageLoading = function (zoomDom) {
    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) {
      var dom = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      dom.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
      dom.setAttribute('version', '1.1');
      dom.setAttribute('viewBox', '0 0 1024 1024');
      dom.setAttribute('width', '48');
      dom.setAttribute('height', '48');
      dom.setAttribute('class', 'loading');
      dom.innerHTML = _assets_img__WEBPACK_IMPORTED_MODULE_37__["IMG_LOADING"];
      this.loadingDom = dom;
      zoomDom.appendChild(this.loadingDom);
    }
  };

  ZegoDocsViewImpl.prototype.showImageLoading = function (show) {
    this.loadingDom.style.display = show ? 'block' : 'none';
  };

  ZegoDocsViewImpl.prototype.hideOtherDocsView = function () {
    var dom = document.getElementById(this.parent);

    if (dom) {
      var id_1 = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].zoom + this.serviceHandle.getStore()[this.parent + '_activited'];
      Array.from(dom.children || dom.childNodes).forEach(function (v) {
        // @ts-ignore
        v['style'].display = v.id == id_1 ? 'block' : 'none';
      });
    }
  };

  ZegoDocsViewImpl.prototype.updateDocsViewLayout = function (x, y, w, h) {
    x |= 0;
    y |= 0;
    w |= 0;
    h |= 0;
    this.viewInfo.width = w;
    this.viewInfo.viewWidth = w;
    this.viewInfo.viewHeight = h;
    var style = "width:" + w + "px;height:" + h + "px;";
    this.docDom.style.cssText += style;
    this.renderDom.style.cssText += style;
    this.docDom.parentElement.style.cssText = style + "left:" + x + "px;top:" + y + "px;";
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'updateDocsViewLayout', JSON.stringify({
      x: x,
      y: y,
      w: w,
      h: h,
      h0: this.viewInfo.height
    }));
  };

  ZegoDocsViewImpl.prototype.setCanvasWidthHeight = function (canvas, w, h) {
    canvas.style.cssText += "width:" + w + "px;height:" + h + "px;";
    canvas.width = w * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    canvas.height = h * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];

    if (this.getFileType() == _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
      this.serviceHandle.calcCanvasSize(this.id);
    }
  };

  ZegoDocsViewImpl.prototype.createCanvas = function () {
    if (this.canvasArray.length) return false;
    var canvas = document.createElement('canvas');
    canvas.setAttribute('data-i', '0');
    this.canvasArray.push(canvas);
    var _a = this.viewInfo,
        parentWidth = _a.parentWidth,
        parentHeight = _a.parentHeight,
        height = _a.height,
        sheet = _a.sheet,
        canvasMaxPage = _a.canvasMaxPage,
        fillPPT = _a.fillPPT;
    var type = this.getFileType();

    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
      this.updateDocsViewLayout(0, 0, parentWidth, parentHeight);
      return true;
    }

    var _b = this.vpageAspecCache[0][1],
        x = _b.x,
        y = _b.y,
        w = _b.w,
        h = _b.h;

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) {
      this.setCanvasWidthHeight(canvas, w, h);
      this.updateDocsViewLayout(x, y, w, h);
    } else {
      // 第一个canvas
      var cw = fillPPT ? w : parentWidth;
      this.setCanvasWidthHeight(canvas, cw, this.getCanvasHeight(0)); // 计算每个 canvas 的尺寸

      var count = this.getPageCount();

      if (count > canvasMaxPage) {
        count = Math.ceil(count / canvasMaxPage);
        var total = 0;
        var aspec = this.vpageAspecCache[sheet]; // PDF 文件页数很多时，总高度分摊到 canvas 上时会有一定的偏差值，通过将偏差值散列到 canvas 上来抹平

        for (var i = 0; i < count; i++) {
          total += this.getCanvasHeight(i);
        }

        total = height - total;

        if (Math.abs(total) > 10 && count > 2) {
          var diff = total > 0 ? 1 : -1;
          total *= diff;
          var step = Math.ceil(count > total ? count / total : 1);
          diff = step == 1 ? Math.round(diff * total / count) : diff;
          var log = "diff=" + total + ",step=" + step + ",count=" + count + ",equal=" + this.getFile().isEqualAspec;
          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'pdf_diff_canvas', JSON.stringify({
            log: log
          }));

          for (var i = 1; i <= count;) {
            aspec.h[i] += diff;
            i += step;
          }
        }

        for (var i = 1; i < count; i++) {
          var canvas_1 = document.createElement('canvas');
          canvas_1.setAttribute('data-i', i + '');
          var cw_1 = fillPPT ? w : parentWidth;
          this.setCanvasWidthHeight(canvas_1, cw_1, this.getCanvasHeight(i));
          this.canvasArray.push(canvas_1);
        }
      } // Excel sheet 切换


      if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS && !!this.getDocViewChild()) {
        this.resetVisibleSize();
      } else if (fillPPT) {
        this.updateDocsViewLayout(x, y, w, h);
      } else {
        var y_1 = Math.max((parentHeight - height) / 2, 0);
        var h_1 = Math.min(parentHeight, height);
        this.updateDocsViewLayout(0, y_1, parentWidth, h_1);
      }
    }

    return true;
  };

  ZegoDocsViewImpl.prototype.renderCanvas = function () {
    var zoom = this.zoomInfo.zoom;
    var _a = this.viewInfo,
        width = _a.width,
        height = _a.height; // 设置 docDom child

    var child = this.getDocViewChild();
    var isCreated = !!child;
    var str = zoom > 1 ? "transform:scale(" + zoom + ");" : '';
    var css = "width:" + width + "px;height:" + height + "px;" + str;

    if (!child) {
      child = document.createElement('div');
      this.docDom.appendChild(child);
    }

    child.style.cssText = css; // 设置 renderDom child

    if (!isCreated) {
      if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) {
        this.renderDom.appendChild(this.canvasArray[0]);
      } else {
        var fragment = document.createDocumentFragment();
        child = document.createElement('div');
        child.style.cssText = css;
        this.canvasArray.forEach(function (dom) {
          return child.appendChild(dom);
        });
        fragment.appendChild(child);
        this.renderDom.appendChild(fragment);
      }
    } else {
      // 切换 Excel sheet 时，重新创建 canvas
      if (this.getFileType() == _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
        var fragment_1 = document.createDocumentFragment();
        this.canvasArray.forEach(function (dom) {
          return fragment_1.appendChild(dom);
        });
        child = this.renderDom.firstChild;
        child.style.cssText = css;
        child.innerHTML = '';
        child.appendChild(fragment_1);
      }
    }

    this.setDocsViewDomOverflow();
    this.viewInfo.firstInfo.scrollTop > 0 && this.handleScroll(this.viewInfo.firstInfo.scrollTop);
    this.viewInfo.firstInfo.scrollTop = -1;
  };

  ZegoDocsViewImpl.prototype.drawCanvas = function (vlist, cb) {
    var _this = this;

    var isPPT = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT;

    if (isPPT) {
      vlist = vlist.filter(function (v) {
        return v.virtual_page_number === _this.ppth5Info.page;
      });
    }

    this.createDocsView();
    this.showImageLoading(true);
    var init = this.createCanvas();
    var canvas = this.canvasArray[0];
    var y = 0;
    var x = 0;
    var log = {
      id: this.id
    };
    var draw_task = [];
    var aspec = this.vpageAspecCache[this.viewInfo.sheet];

    for (var i = 0; i < vlist.length; ++i) {
      var _a = vlist[i],
          image_data = _a.image_data,
          image_path = _a.image_path,
          vpage = _a.virtual_page_number;

      if (image_data) {
        if (isPPT) {
          var _b = aspec[vpage],
              w = _b.w,
              h = _b.h;
          var task = this.drawPPT(vpage, w, h, image_data, canvas);
          draw_task.push(task);
        } else {
          var _c = aspec[vpage],
              p = _c.p,
              w = _c.w,
              h = _c.h;
          var task = this.drawPDF(p, vpage, x, y, w, h, image_data);
          draw_task.push(task);
          y += h;
          x += w;
          log[vpage] = this.vpageDrawImgCache[vpage];
        }
      } else if (image_path) {
        var task = this.drawImg(image_path, canvas);
        draw_task.push(task);
      }
    }

    if (this.canvasArray.length > 1) {
      var canvasTotalHeight = this.canvasArray.reduce(function (prev, curr) {
        return prev + curr.height / _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
      }, 0);
      var v_1 = this.viewInfo.height - canvasTotalHeight;
      this.canvasArray.forEach(function (ele, index) {
        if (index !== _this.canvasArray.length - 1) {
          ele.style.marginBottom = v_1 / (_this.canvasArray.length - 1) + 'px';
        }
      });
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_cache', JSON.stringify({
        log: log
      }));
    }

    var callback = function callback() {
      if (_this.docDom && init) {
        _this.renderCanvas();
      }

      _this.hideOtherDocsView();

      cb && cb();

      _this.showImageLoading(false);
    };

    Promise.all(draw_task).then(callback, callback);
  };

  ZegoDocsViewImpl.prototype.drawHtml = function (vlist, cb) {
    var _this = this;

    this.createDocsView();
    var id = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].iframe + this.id;

    if (!document.getElementById(id)) {
      var _a = this.vpageAspecCache[0][1],
          x = _a.x,
          y = _a.y,
          w = _a.w,
          h = _a.h;
      var width = this.getFile().page_list[0].width;

      if (this.isTouch || w - width > 4) {
        this.ppth5Info.scale = Number((w / width).toFixed(4));
      }

      this.createIFrame(id, w, h);
      this.iframeDom.src = vlist[0].image_data + "#" + this.id;
      this.ppth5Info.loadRetryTimer && clearTimeout(this.ppth5Info.loadRetryTimer);
      this.ppth5Info.loadRetryTimer = window.setTimeout(function () {
        return _this.changeH5CDNHost();
      }, _entities__WEBPACK_IMPORTED_MODULE_39__["PPT_LOAD_TIME"]);
      var css = "width:" + w + "px;height:" + this.viewInfo.height + "px;";
      var child = document.createElement('div');
      child.style.cssText = css;
      this.docDom.appendChild(child);
      this.renderDom.style.zIndex = '1';
      this.renderDom.appendChild(this.iframeDom);
      this.updateDocsViewLayout(x, y, w, h);
      this.setDocsViewDomOverflow();
      window.addEventListener('message', this.handleIframeMessage);
    }

    this.hideOtherDocsView();
    cb && cb();
  };

  ZegoDocsViewImpl.prototype.createIFrame = function (id, w, h) {
    var iframe = document.createElement('iframe');
    iframe.id = id;
    iframe.allow = 'autoplay';
    iframe.width = w + '';
    iframe.height = h + '';
    this.iframeDom = iframe;
  };

  ZegoDocsViewImpl.prototype.execDraw = function (page, cb) {
    var _this = this;

    var start = page;
    var end = page;

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      var obj = this.getCanvasSplit(page);
      start = obj.start;
      end = obj.end;
    }

    var vpages = this.getAllVirtualInPageRange(start - 1, end - 1);
    this.startGetImageByVirtualPageList(vpages, function (vlist) {
      if (_this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || _this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) {
        _this.drawHtml(vlist, cb);
      } else {
        _this.drawCanvas(vlist, cb);
      }
    });
  };

  ZegoDocsViewImpl.prototype.execScrollFileAndDraw = function (page, cb, pages) {
    var _this = this; // 快速滚动时，只加载停止时的图片


    if (this.canvasArray.length > 1) {
      var time = Date.now();
      var diff = time - this.viewInfo.lastTime;
      this.viewInfo.lastTime = time;

      if (diff < _entities__WEBPACK_IMPORTED_MODULE_39__["INTERVAL_PAGE"]) {
        this.viewInfo.lastTimeId && clearTimeout(this.viewInfo.lastTimeId);
        this.viewInfo.lastTimeId = window.setTimeout(function () {
          if (pages) {
            pages.forEach(function (p) {
              return _this.execDraw(p, cb);
            });
          } else {
            _this.execDraw(_this.ppth5Info.page, cb);
          }

          var log = {
            p: _this.ppth5Info.page,
            page: page,
            zoom: _this.zoomInfo.zoom,
            pages: pages
          };
          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_scrolled', JSON.stringify({
            log: log
          }));
        }, _entities__WEBPACK_IMPORTED_MODULE_39__["INTERVAL_PAGE"]);
        return;
      }
    }

    this.execDraw(page, cb);
  };

  ZegoDocsViewImpl.prototype.onScrollCallback = function (left, top) {
    var _a = this.viewInfo,
        total = _a.total,
        width = _a.width,
        height = _a.height,
        viewHeight = _a.viewHeight,
        scrollTop = _a.scrollTop;

    if (height > viewHeight) {
      var zoom = this.zoomInfo.zoom;
      var page = this.getPageByScrollTop(top);
      var percent = Number((top / height / zoom).toFixed(7));
      this.ppth5Info.page = page;
      this.triggerOnScrollEventListener(top, page, percent); // 拖拽出当前视窗边界时，清空垂直偏移值

      var ofsX = left && Number((left / width / zoom).toFixed(7));
      this.postPageChangeMessage(ofsX); // 计算 canvas 需要加载的图片

      if (this.ppth5Info.page !== page) {
        this.execScrollFileAndDraw(page);

        if (this.viewInfo.isParentScale) {
          var dom = document.getElementById(this.parent);
          dom && this.drawPDFBlank(dom.clientHeight, top / zoom);
        }
      } else if (page > 1 && page < total) {
        if (this.viewInfo.isParentScale) {
          var dom = document.getElementById(this.parent);
          dom && this.drawPDFBlank(dom.clientHeight, top / zoom);
        } else {
          var diff = top > scrollTop * zoom ? 1 : -1;
          var index = this.getCanvasSplit(page).index;
          var index2 = this.getCanvasSplit(page + diff).index;
          index !== index2 && this.execScrollFileAndDraw(page + diff);
        }
      }
    } else {
      // 非缩放时不能滚动的场景：缩放后可滚动了，同步偏移值
      this.postSyncDragMessage(left, top);
    }
  };

  ZegoDocsViewImpl.prototype.getLoadFileModelForAPI = function (data) {
    var res = {
      parent: this.parent,
      fileID: data.file_id,
      fileName: data.file_list[0].file_name,
      fileType: data.file_type,
      fileUrls: data.file_urls,
      pageCount: data.file_list[0].page_count,
      // 这里的宽高是文件的单页宽高，在计算渲染dom前抛给外部设置父容器的尺寸
      width: data.width,
      height: data.height
    };

    if (data.file_hash) {
      res.fileHash = data.file_hash;
    } else {
      res.seq = data.seq;
    }

    if (data.file_type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
      res.name = data.file_list[0].name;
      res.sheets = data.file_list.map(function (v) {
        return v.file_name;
      });
    }

    return res;
  };

  ZegoDocsViewImpl.prototype.getLoadFileModelForCallback = function () {
    var _a;

    var _b = this.viewInfo,
        width = _b.width,
        height = _b.height,
        filePageSize = _b.filePageSize;
    var file = this.getFile();
    var type = this.getFileType();
    var res = {
      parent: this.parent,
      fileID: this.fileInfo.file_id,
      fileName: file.file_name,
      fileType: type,
      pageCount: file.page_count,
      // 这里的宽高是按照父容器尺寸计算过后的文件的总宽高，用于创建白板时设置 aspectWidth、aspectHeight
      width: width,
      height: height
    };

    if (this.fileInfo.file_hash) {
      res.fileHash = this.fileInfo.file_hash;
    } else {
      res.seq = this.fileInfo.seq;
    }

    if (this.parent) {
      res.viewID = _entities__WEBPACK_IMPORTED_MODULE_39__["DOMIDS"].doc + this.id;
    }

    var fileAspec = (_a = {
      fileID: res.fileID
    }, _a[res.fileName] = {
      width: width,
      height: height,
      pageCount: res.pageCount
    }, _a.data = {
      width: width,
      height: height,
      pageCount: res.pageCount,
      filePageSize: filePageSize
    }, _a);

    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
      res.name = file.name;
      res.sheets = this.fileInfo.file_list.map(function (v) {
        fileAspec[v.file_name] = {
          width: v.max_width,
          height: v.total_height,
          pageCount: v.page_count
        };
        return v.file_name;
      });
    }

    document.body.dispatchEvent(new CustomEvent('loadfile', {
      detail: fileAspec
    }));
    return res;
  };

  ZegoDocsViewImpl.prototype.loadCurrentSheet = function (notify, isSheet) {
    var file = this.getFile();
    if (!file) return;
    var type = this.getFileType();
    this.viewInfo.width = file.max_width;
    this.viewInfo.height = file.total_height;
    this.viewInfo.total = file.page_count;
    this.viewInfo.rate = file.rate;
    this.viewInfo.filePageSize = file.filePageSize;

    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT) {
      this.renderMode = _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT;
    } else if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDynamicPPTH5) {
      this.renderMode = _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT;
    } else if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5) {
      this.renderMode = _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM;
    } // Excel change sheet


    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS && isSheet) {
      this.docDom.scrollTop = 0;
      this.renderDom.scrollTop = 0;
      this.canvasArray.length = 0;
    }

    this.execScrollFileAndDraw(this.ppth5Info.page, notify ? this.loadFileCallback : undefined);
  };

  ZegoDocsViewImpl.prototype.resetDocsViewLayout = function (w, h) {
    var _a = this.viewInfo,
        parentWidth = _a.parentWidth,
        parentHeight = _a.parentHeight,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;

    if (Math.abs(w - viewWidth) < 5 && Math.abs(h - viewHeight) < 5) {
      var x = (parentWidth - w) / 2;
      var y = (parentHeight - h) / 2;
      this.docDom.parentElement.style.cssText += "left:" + x + "px;top:" + y + "px;";
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'reloadViewLayou', JSON.stringify({
        w0: viewWidth,
        h0: viewHeight,
        w: w,
        h: h
      }));
      return false;
    }

    return true;
  };

  ZegoDocsViewImpl.prototype.canReloadView = function () {
    var oldViewWidth = this.viewInfo.viewWidth;
    this.setParentWidthHeight();
    var _a = this.viewInfo,
        parentWidth = _a.parentWidth,
        parentHeight = _a.parentHeight,
        height = _a.height,
        viewHeight = _a.viewHeight; // PPT 填充模式

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM || this.viewInfo.fillPPT) {
      var _b = this.fileInfo.file_list[0].page_list[0],
          width = _b.width,
          height_1 = _b.height;
      var draw_w = parentWidth;
      var draw_h = height_1 * draw_w / width;

      if (draw_h > parentHeight || Math.abs(draw_h - parentHeight) <= 1) {
        draw_w = parentHeight * parentWidth / draw_h | 0;
        draw_h = parentHeight;
      }

      draw_h |= 0;
      return this.resetDocsViewLayout(draw_w, draw_h);
    } // IMG 填充模式


    if (this.getFileType() === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
      var _c = this.viewInfo.imgInfo,
          isSmall = _c.isSmall,
          isScale = _c.isScale,
          width = _c.width,
          height_2 = _c.height,
          min_w = _c.min_w,
          min_h = _c.min_h;

      if (isSmall || isScale) {
        var rate_w = isSmall ? Math.min(min_w, parentWidth) / width : parentWidth / width;
        var rate_h = isSmall ? Math.min(min_h, parentHeight) / height_2 : parentHeight / height_2;
        var cur_rate = Math.min(rate_w, rate_h);
        var draw_w = width * cur_rate | 0;
        var draw_h = height_2 * cur_rate | 0;
        return this.resetDocsViewLayout(draw_w, draw_h);
      }
    } // PDF 平铺：宽度不变时不需要重新渲染


    if (Math.abs(parentWidth - oldViewWidth) < 5) {
      var y = Math.max((parentHeight - height) / 2, 0);
      var h = Math.min(parentHeight, height);
      this.updateDocsViewLayout(0, y, parentWidth, h);
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'reloadViewLayou', JSON.stringify({
        w0: oldViewWidth,
        h0: viewHeight,
        w: parentWidth,
        h: h
      }));
      return false;
    }

    return true;
  };
  /**
   *
   * 判断PDF为PPT转的逻辑：
   * 自动判断PPT，使用填充模式
   * 1、每一页宽高比例相同，保留小数点后3位
   * 2、614 / 1280 <= 高 / 宽 <= 1
   * 3、不是excel文件类型
   */


  ZegoDocsViewImpl.prototype.checkPPT2PDF = function (type, file) {
    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePDF) {
      var _a = file.page_list[0],
          width = _a.width,
          height = _a.height;
      var rate_1 = Number((height / width).toFixed(3));

      if (rate_1 <= 1 && rate_1 >= 614 / 1280) {
        return file.page_list.map(function (v) {
          return Number((v.height / v.width).toFixed(3));
        }).every(function (v) {
          return v === rate_1;
        });
      }
    }

    return false;
  };

  ZegoDocsViewImpl.prototype.calculateFileAspec = function (item, fillPPT) {
    var _a = item.page_list[0],
        width = _a.width,
        height = _a.height;
    var maxWidth = width;
    var maxHeight = height;
    var minWidth = width;
    var minHeight = height;

    if (!fillPPT) {
      maxWidth = 0;
      maxHeight = 0;
      minWidth = Number.MAX_SAFE_INTEGER;
      minHeight = Number.MAX_SAFE_INTEGER;

      for (var _i = 0, _b = item.page_list; _i < _b.length; _i++) {
        var page = _b[_i];

        if (page.width > maxWidth) {
          maxWidth = page.width;
        }

        if (page.width < minWidth) {
          minWidth = page.width;
        }

        if (page.height > maxHeight) {
          maxHeight = page.height;
        }

        if (page.height < minHeight) {
          minHeight = page.height;
        }
      }
    }

    item.origin_max_width = maxWidth;
    item.max_width = maxWidth;
    item.min_width = minWidth;
    item.max_height = maxHeight;
    item.min_height = minHeight;
    return item;
  };

  ZegoDocsViewImpl.prototype.checkRenderType = function () {
    if (this.fileInfo.expect_file_type == 8) {
      this.postErrorMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType);
    }
  };

  ZegoDocsViewImpl.prototype.calculateFileAspecWithNoParent = function (result) {
    var type = result.file_type;
    var sheetName = this.viewInfo.sheetName;

    var _loop_1 = function _loop_1(i) {
      var item = result.file_list[i];

      if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
        item.page_count = item.page_list.length;

        if (item.file_name === sheetName) {
          this_1.viewInfo.sheet = i;
        }
      } else if (!item.page_count) {
        item.page_count = item.page_list.length;
      } // 计算每页宽高


      if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT || type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDynamicPPTH5 || type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5) {
        var _a = item.page_list[0],
            width = _a.width,
            height = _a.height;
        item.max_width = width;
        item.total_height = height * item.page_count;
      } else {
        var fillPPT = this_1.checkPPT2PDF(type, item);
        this_1.viewInfo.fillPPT = fillPPT;

        if (fillPPT) {
          var _b = item.page_list[0],
              width = _b.width,
              height = _b.height;
          item.max_width = width;
          item.total_height = height * item.page_count;
        } else {
          var _c = this_1.calculateFileAspec(item, fillPPT),
              max_width_1 = _c.max_width,
              min_width = _c.min_width,
              max_height = _c.max_height,
              min_height = _c.min_height; // 非异形文件，总高度采用累加每页高度的方式和移动端计算出来的总高度偏差太大，所以采用一次换算


          var isEqualAspec = Math.abs(max_width_1 - min_width) < 5 && Math.abs(max_height - min_height) < 5;
          var total_height_1 = 0;

          if (isEqualAspec) {
            total_height_1 = item.page_count * max_height;
          } else {
            item.page_list.forEach(function (page) {
              total_height_1 += page.height * max_width_1 / page.width;
            });
          }

          item.max_width = max_width_1;
          item.total_height = Math.round(total_height_1);
        }
      }
    };

    var this_1 = this;

    for (var i = 0; i < result.file_list.length; ++i) {
      _loop_1(i);
    }
  };

  ZegoDocsViewImpl.prototype.tranlateFileAspec = function (result) {
    this.setParentWidthHeight();
    var type = result.file_type;
    var _a = this.viewInfo,
        sheetName = _a.sheetName,
        parentWidth = _a.parentWidth,
        parentHeight = _a.parentHeight;

    var _loop_2 = function _loop_2(i) {
      var aspecMap = {
        vs: 1,
        p: {
          0: 0
        },
        h: {}
      };
      this_2.vpageAspecCache[i] = aspecMap;
      var item = result.file_list[i];

      if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
        item.page_count = item.page_list.length;

        if (item.file_name === sheetName) {
          this_2.viewInfo.sheet = i;
        }
      } else if (!item.page_count) {
        item.page_count = item.page_list.length;
      } // 计算每页宽高


      if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypePPT || type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeDynamicPPTH5 || type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeCustomH5) {
        var _a = item.page_list[0],
            width = _a.width,
            height = _a.height;
        var draw_w = parentWidth;
        var draw_h = height * draw_w / width;

        if (draw_h > parentHeight || Math.abs(draw_h - parentHeight) <= 1) {
          draw_w = parentHeight * parentWidth / draw_h | 0;
          draw_h = parentHeight;
        }

        item.max_width = draw_w;
        item.total_height = draw_h * item.page_count | 0;
        item.rate = parentWidth / width;
        item.filePageSize = {
          width: width,
          height: height
        };
        draw_h |= 0;
        var aspec = {
          p: 1,
          x: (parentWidth - draw_w) / 2,
          y: (parentHeight - draw_h) / 2,
          w: draw_w,
          h: draw_h
        };

        for (var j = 1; j <= item.page_count; ++j) {
          aspecMap[j] = __assign(__assign({}, aspec), {
            p: j
          });
          aspecMap.p[j] = 1;
        }
      } else {
        aspecMap.vs = item.page_list[0].virtual_page_list[0].virtual_page_number; // 图片切割方向：web 没有这个逻辑，native 切割逻辑有问题

        aspecMap.o = false; // false: 垂直

        var fillPPT = this_2.checkPPT2PDF(type, item);
        this_2.viewInfo.fillPPT = fillPPT;

        if (fillPPT) {
          var _b = item.page_list[0],
              width = _b.width,
              height = _b.height;
          var draw_w = parentWidth;
          var draw_h = height * draw_w / width;

          if (draw_h > parentHeight || Math.abs(draw_h - parentHeight) <= 1) {
            draw_w = parentHeight * parentWidth / draw_h | 0;
            draw_h = parentHeight;
          }

          item.isEqualAspec = true;
          item.max_width = draw_w;
          item.total_height = draw_h * item.page_count | 0;
          item.rate = parentWidth / width;
          item.filePageSize = {
            width: width,
            height: height,
            fillPPT: true
          };
          draw_h |= 0;
          var aspec_1 = {
            p: 1,
            x: (parentWidth - draw_w) / 2,
            y: (parentHeight - draw_h) / 2,
            w: draw_w,
            h: draw_h
          };
          var total_vpage_1 = aspecMap.vs - 1;
          item.page_list.forEach(function (page, i) {
            total_vpage_1 += page.virtual_page_list.length;
            aspecMap.p[i + 1] = total_vpage_1;

            for (var _i = 0, _a = page.virtual_page_list; _i < _a.length; _i++) {
              var vpage = _a[_i];
              aspecMap[vpage.virtual_page_number] = __assign(__assign({}, aspec_1), {
                p: i + 1
              });
            }
          });
        } else {
          var _c = this_2.calculateFileAspec(item, fillPPT),
              max_width_2 = _c.max_width,
              min_width = _c.min_width,
              max_height = _c.max_height,
              min_height = _c.min_height;

          item.rate = parentWidth / max_width_2; // 非异形文件，总高度采用累加每页高度的方式和移动端计算出来的总高度偏差太大，所以采用一次换算

          var isEqualAspec_1 = Math.abs(max_width_2 - min_width) < 5 && Math.abs(max_height - min_height) < 5;
          var total_height_2 = isEqualAspec_1 ? item.page_count * max_height * parentWidth / min_width : 0;
          var total_vpage_2 = aspecMap.vs - 1;
          item.page_list.forEach(function (page, i) {
            var len = page.virtual_page_list.length;
            total_vpage_2 += len;
            aspecMap.p[i + 1] = total_vpage_2;
            var aspec = {
              p: i + 1,
              x: 0,
              y: 0,
              w: parentWidth
            };

            if (isEqualAspec_1) {
              aspec.h = Number((total_height_2 / item.page_count / len).toFixed(4));
            } else {
              aspec.h = Number((page.height * parentWidth / max_width_2 / len).toFixed(4));
              total_height_2 += page.height * parentWidth / max_width_2;
            }

            for (var _i = 0, _a = page.virtual_page_list; _i < _a.length; _i++) {
              var vpage = _a[_i];
              aspecMap[vpage.virtual_page_number] = aspec;
            }
          });
          item.isEqualAspec = isEqualAspec_1;
          item.max_width = parentWidth;
          item.total_height = Math.round(total_height_2);
        } // 计算单个 canvas 最多能渲染多少页图片，canvas 高度超过 16000px 时，由于浏览器的限制会导致 canvas 无法正常渲染


        var maxPage = Math.floor(16000 * item.page_count / (_entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"] * item.total_height)) || 1;
        this_2.viewInfo.canvasMaxPage = maxPage;
      }
    };

    var this_2 = this;

    for (var i = 0; i < result.file_list.length; ++i) {
      _loop_2(i);
    }
  };

  ZegoDocsViewImpl.prototype.handleScroll = function (top, percent, ofsX) {
    var _this = this;

    if (this.docDom) {
      var _a = this.zoomInfo,
          zoom = _a.zoom,
          enableScroll = _a.enableScroll;
      var _b = this.viewInfo,
          height = _b.height,
          total = _b.total;
      var page = this.ppth5Info.page;
      var scroll_1 = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF; // 更新 滚动条

      if (scroll_1) {
        if (enableScroll) {
          this.viewInfo.ticking = true;
          clearTimeout(this.viewInfo.scrollTimeId);
          this.viewInfo.scrollTimeId = window.setTimeout(function () {
            return _this.viewInfo.ticking = false;
          }, 34);
        }

        this.docDom.scrollTop = top;
        this.renderDom.scrollTop = top;
        this.viewInfo.scrollTop = Math.ceil(top / zoom);
      } // 更新 canvas


      if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) {
        if (this.viewInfo.isParentScale) {
          this.execScrollFileAndDraw(page);
          var dom = document.getElementById(this.parent);
          dom && this.drawPDFBlank(dom.clientHeight, this.viewInfo.scrollTop);
        } else {
          this.execScrollFileAndDraw(page);
        }

        percent = typeof percent == 'number' ? percent : Number((scroll_1 ? top / height / zoom : (page - 1) / total).toFixed(7));
        this.triggerOnScrollEventListener(top, page, percent);
        this.postPageChangeMessage(ofsX);
      }
    }
  };

  ZegoDocsViewImpl.prototype.getScrollTopByPage = function (page) {
    var zoom = this.zoomInfo.zoom;

    if (this.viewInfo.total <= 1 || page <= 1) {
      this.updateCurViewMax(0, zoom);
      return 0;
    }

    if (this.renderMode !== _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      return (page - 1) * this.viewInfo.viewHeight * zoom + 2;
    }

    var aspec = this.vpageAspecCache[this.viewInfo.sheet];
    var end = aspec.p[page - 1];
    var top = 0;

    for (var i = aspec.vs; i <= end; i++) {
      top += aspec[i].h;
    }

    top *= zoom;
    this.updateCurViewMax(top, zoom);
    return top;
  };
  /**
   * 页码计算方式
   * 滚动时：第一页占上半部分，第二页占下半部分时，视为第二页
   * 切页码：第一页完全离开时，视为第二页
   *
   */


  ZegoDocsViewImpl.prototype.getPageByScrollTop = function (top) {
    var _a = this.viewInfo,
        sheet = _a.sheet,
        viewHeight = _a.viewHeight,
        total = _a.total;
    var zoom = this.zoomInfo.zoom;
    var type = this.getFileType();
    var half = Math.ceil(viewHeight * 0.5);
    if (type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) return 1;

    if (this.renderMode !== _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      return Math.round(top / zoom / viewHeight) + 1;
    }

    var aspec = this.vpageAspecCache[sheet];
    var y = -half;
    var i = aspec.vs;

    while (y <= top) {
      if (!aspec[i]) {
        break;
      }

      y += aspec[i].h * zoom;
      i++;
    }

    return Math.min(total, Math.max(1, aspec[i - 1].p));
  };

  ZegoDocsViewImpl.prototype.getDocViewChild = function () {
    return this.docDom.firstChild;
  };

  ZegoDocsViewImpl.prototype.postWhiteboardMessage = function (action, data) {
    if (this.wbId) {
      var detail = {
        action: action,
        data: data
      };
      this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));
    }
  }; // 同步拖拽偏移值（白板计算百分比）


  ZegoDocsViewImpl.prototype.postSyncDragMessage = function (x, y, isMove) {
    if (!isMove && this.renderMode !== _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      this.zoomInfo.tx = x;
      this.zoomInfo.ty = y;
    }

    if (this.wbId) {
      var detail = {
        action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].SyncDrag,
        x: x,
        y: y,
        scale: this.zoomInfo.zoom,
        notify: this.ppth5Info.notify
      };
      this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));
    }
  };

  ZegoDocsViewImpl.prototype.postPageChangeMessage = function (ofsX) {
    if (this.wbId) {
      var detail = {
        action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Page,
        page: this.ppth5Info.page,
        step: this.ppth5Info.step,
        pageCount: this.viewInfo.total,
        ofsX: ofsX,
        percent: this.viewInfo.percent,
        notify: this.ppth5Info.notify
      };
      this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));

      if (this.renderMode !== _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
        this.setDocsViewDomTransform(this.zoomInfo.tx, this.zoomInfo.ty);
      }
    }
  };

  ZegoDocsViewImpl.prototype.postStepChangeMessage = function () {
    var payload = {
      parent: this.parent,
      page: this.ppth5Info.page,
      step: this.ppth5Info.step,
      fileID: this.getFileID(),
      fileType: this.getFileType(),
      fileName: this.getFile().file_name,
      notify: this.ppth5Info.notify
    };

    if (this.ppth5Info.scene) {
      payload.scene = this.ppth5Info.scene;
    }

    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'emit.StepChange', JSON.stringify({
      payload: payload
    }));
    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoDocsEventType"].StepChange, payload);
    this.triggerH5OnScrollEventListener();
    this.postPageChangeMessage();
    this.ppth5Info.scene = 0;
  };

  ZegoDocsViewImpl.prototype.postErrorMessage = function (res) {
    res = _typeof(res) === 'object' ? res : Object(_entities__WEBPACK_IMPORTED_MODULE_39__["transError"])(res); // 2000001 该错误为捕获 iframe 中错误信息
    // ERR_UNKNOWN_URL_SCHEME url资源无效，该错误码先不抛出

    if (res.code === 2000001) return; // ppt.js 监控 loading 状态，向外抛出，数据流录制需要，该错误码先不抛出,委托给白板处理不抛出。

    if (res.code === 1000 || res.code === 1001) {
      this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbError, res.code);
    }

    if (String(res.code).startsWith('3')) {
      // 脚本抛出的白板对应的错误码，委托给白板处理
      this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbError, res.code);
    } else {
      var payload = __assign({
        parent: this.parent,
        fileID: this.getFileID(),
        fileType: this.getFileType(),
        fileName: this.getFile().file_name
      }, res);

      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'emit.Error', JSON.stringify({
        payload: payload
      }));
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoEventType"].Error, payload);
    }
  };

  ZegoDocsViewImpl.prototype.triggerOnScrollEventListener = function (top, page, percent) {
    this.viewInfo.percent = percent;
    var file = this.getFile();
    var payload = {
      parent: this.parent,
      percent: percent,
      page: page,
      y: top,
      fileID: this.fileInfo.file_id,
      fileType: this.getFileType(),
      fileName: file.file_name,
      name: file.name || '' // Excel file name

    };
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'emit.Scroll', JSON.stringify({
      payload: payload
    }));
    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoDocsEventType"].Scroll, payload);
  };

  ZegoDocsViewImpl.prototype.triggerH5OnScrollEventListener = function () {
    var page = this.ppth5Info.page;
    var top = (page - 1) * this.viewInfo.viewHeight;
    var percent = Number(((page - 1) / this.viewInfo.total).toFixed(7));
    this.triggerOnScrollEventListener(top, page, percent);
  };
  /**
   * postMessage 和 iframe 通信，需要文件服务器支持跨域 Access-Control-Allow-Origin
   * @param action 调用 iframe 的方法
   * @param args 方法的参数
   */


  ZegoDocsViewImpl.prototype.postMessage2iframe = function (action, args) {
    var dom = this.iframeDom;

    if (dom && dom.contentWindow) {
      dom.contentWindow.postMessage({
        source: 'zegodocsview',
        action: action,
        args: args || []
      }, '*');
    }
  };

  ZegoDocsViewImpl.prototype.handleWhiteboardPageEvent = function (data) {
    var percent = data.percent,
        step = data.step,
        notify = data.notify,
        ofsX = data.ofsX,
        ofsY = data.ofsY;
    this.ppth5Info.notify = notify; // 计算页码和滚动距离

    var top = 0;
    var page = 1;

    if (notify) {
      // 白板主动翻页，百分比由页码计算而来
      page = Math.min(Math.round(percent * this.viewInfo.total) + 1, this.viewInfo.total);
      top = this.getScrollTopByPage(page);
    } else {
      // 白板被动滚动，百分比由滚动距离计算而来
      top = Math.floor((percent + ofsY) * this.viewInfo.height * this.zoomInfo.zoom);
      page = this.getPageByScrollTop(top);
    }

    var log = {
      oldpage: this.ppth5Info.page,
      oldstep: this.ppth5Info.step,
      page: page,
      step: step
    };
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], _entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Whiteboard + '_page', JSON.stringify({
      log: log
    })); // 翻页 / 滚动

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) {
      this.syncWhiteboardPPTH5Queue(page, step);
    } else {
      this.ppth5Info.page = page; // 白板主动翻页，清空垂直偏移百分百

      var scale = notify && this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF ? ofsX : undefined;
      this.handleScroll(top, percent, scale);
    }
  };

  ZegoDocsViewImpl.prototype.handleWhiteboardDragToolEvent = function (data) {
    var enable = data.enable;
    var old = this.zoomInfo.enableScroll;
    this.zoomInfo.enableScroll = enable;
    this.zoomInfo.remoteScroll = data.remoteScroll;
    this.zoomInfo.isDrag = data.isDrag;

    if (old !== enable) {
      this.setDocsViewDomOverflow();
      this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptConfig"].PptOperationAuth, JSON.stringify({
        scroll: +enable
      })]);
    }
  };

  ZegoDocsViewImpl.prototype.handleWhiteboardInitEvent = function (data) {
    var _this = this;

    this.wbId = data.data;
    setTimeout(function () {
      var detail = {
        action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].DocsAspect,
        data: JSON.parse(JSON.stringify(_this.vpageAspecCache[_this.viewInfo.sheet]))
      };

      _this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));
    });
  };

  ZegoDocsViewImpl.prototype.handleWhiteboardAnimationEvent = function (data) {
    this.ppth5Info.notify = false;

    if (!data.notify) {
      this.playAnimation(data.data);
    } else {
      // 后进房时需要等动态PPT跳转到对应的页码和步数时才播放动画
      this.viewInfo.firstInfo.page = this.ppth5Info.page;
      this.viewInfo.firstInfo.step = this.ppth5Info.step;
      this.viewInfo.firstInfo.h5Extra = data.data;
    }
  };

  ZegoDocsViewImpl.prototype.tryInitPageStep = function (page, step) {
    var _this = this;

    if (this.ppth5Info.goPage && this.ppth5Info.goStep) {
      if (this.ppth5Info.goTimer) clearTimeout(this.ppth5Info.goTimer); // 后进房，下面的定时器任务会导致自动向前一步

      if (this.ppth5Info.goPage === page && this.ppth5Info.goStep === step) {
        this.ppth5Info.goPage = this.ppth5Info.goStep = 0;
        return;
      }

      this.ppth5Info.goTimer = window.setTimeout(function () {
        var _a = _this.ppth5Info,
            goPage = _a.goPage,
            goStep = _a.goStep;

        if (goPage && goStep) {
          _this.execGotoPage(goPage, goStep, false);

          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_init_timeout', JSON.stringify({
            id: _this.id,
            page: page,
            step: step,
            h5: _this.ppth5Info
          }));
        }
      }, 2000);
    }
  };

  ZegoDocsViewImpl.prototype.syncCurrentPageStep = function (res) {
    var first = false;

    if (!this.ppth5Info.loaded) {
      // iframe load 完成后跳转到正确页码
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_init_page', JSON.stringify({
        id: this.id,
        h5: this.ppth5Info
      }));
      this.ppth5Info.loaded = true;
      var _a = this.ppth5Info,
          targetPage = _a.targetPage,
          targetStep = _a.targetStep;

      if (targetPage && targetStep) {
        this.ppth5Info.page = targetPage;
        this.ppth5Info.step = targetStep;
        this.gotoPage(false);
        first = true;
      }
    }

    !first && Object.assign(this.ppth5Info, res);

    if (this.ppth5Info.page === this.ppth5Info.targetPage && this.ppth5Info.step === this.ppth5Info.targetStep) {
      this.ppth5Info.targetPage = 0;
      this.ppth5Info.targetStep = 0;
    }

    if (!first) {
      this.firstNeedPlayAnimation();
      this.postStepChangeMessage();
      this.execSyncPPTH5Queue();
    }
  };

  ZegoDocsViewImpl.prototype.syncCurrentPage = function (res) {
    var _this = this;

    if (!this.ppth5Info.loaded) {
      // iframe load 完成后跳转到正确页码
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_init_page', JSON.stringify({
        id: this.id,
        h5: this.ppth5Info
      }));
      this.ppth5Info.loaded = true;
      var _a = this.ppth5Info,
          targetPage = _a.targetPage,
          targetStep = _a.targetStep;

      if (targetPage > 1) {
        this.ppth5Info.goPage = targetPage;
        this.ppth5Info.goStep = targetStep;
        this.ppth5Info.page = targetPage;
        this.gotoPage(false);
      } else if (targetStep <= 1) {
        this.postStepChangeMessage();
        this.firstNeedPlayAnimation();
      }
    } else {
      if (typeof res.notify === 'boolean') {
        this.ppth5Info.notify = res.notify;
      }

      var page = +res.page + 1;
      var step = (res.step || 0) + 1;
      this.ppth5Info.pageChangeTimer && clearTimeout(this.ppth5Info.pageChangeTimer);
      this.ppth5Info.pageChangeTimer = window.setTimeout(function (arr) {
        _this.ppth5Info.page = arr[0];
        _this.ppth5Info.step = arr[1];
        _this.ppth5Info.scene = arr[2];

        _this.postStepChangeMessage();
      }, 2000, [page, step, res.scene]); // 初始化页码、步数时，page、step两个回调间隔时间超过了init_timeout

      this.tryInitPageStep(page, step);
    }
  };

  ZegoDocsViewImpl.prototype.syncCurrentStep = function (res) {
    this.ppth5Info.pageChangeTimer && clearTimeout(this.ppth5Info.pageChangeTimer); // 同步动画步骤、页码

    var page = res.page + 1;
    var step = +res.step + 1;
    var lastStep = this.ppth5Info.lastStep;
    this.ppth5Info.lastStep = page === this.ppth5Info.page ? step : -1; // 切页后收到的step消息依次为 0 -1 0，这三个消息下面的代码只需要执行一次

    if (step == 0 || lastStep == 0 && step == 1) return;

    if (typeof res.notify === 'boolean') {
      this.ppth5Info.notify = res.notify;
    }

    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_step', JSON.stringify({
      id: this.id,
      page: page,
      step: step,
      notify: res.notify,
      h5: this.ppth5Info
    })); // 过滤重复、无效的回调

    if (step !== this.ppth5Info.step || page !== this.ppth5Info.page) {
      this.ppth5Info.page = page;
      this.ppth5Info.step = step;
      this.tryInitPageStep(page, step);

      if (!this.ppth5Info.targetPage && !this.ppth5Info.targetStep) {
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_queue_done', JSON.stringify({
          id: this.id,
          page: page,
          step: step,
          action: 'step'
        }));
        this.firstNeedPlayAnimation();
        this.postStepChangeMessage();
        this.execSyncPPTH5Queue();
        this.execMultiDocsQueue();
      }
    } // 没有跳转步数接口，通过连续触发 上一步/下一步 来跳转到指定 step


    if (this.ppth5Info.page === this.ppth5Info.targetPage) {
      var desc = "h5step:" + page + "," + step + "-" + this.ppth5Info.page + "," + this.ppth5Info.targetStep + ")";

      if (this.ppth5Info.targetStep < step) {
        this.previousStep(this.ppth5Info.notify, desc);
      } else if (this.ppth5Info.targetStep > step) {
        this.nextStep(this.ppth5Info.notify, desc);
      } else {
        this.ppth5Info.targetPage = 0;
        this.ppth5Info.targetStep = 0;
        this.ppth5Info.goPage = 0;
        this.ppth5Info.goStep = 0;
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_queue_done', JSON.stringify({
          id: this.id,
          page: page,
          step: step,
          action: 'page'
        }));
        this.firstNeedPlayAnimation();
        this.postStepChangeMessage();
        this.execSyncPPTH5Queue();
        this.execMultiDocsQueue();
      }
    }
  };

  ZegoDocsViewImpl.prototype.syncCurrentElement = function (data) {
    var payload = {
      parent: this.parent,
      page: this.ppth5Info.page,
      step: this.ppth5Info.step,
      fileID: this.getFileID(),
      fileType: this.getFileType(),
      fileName: this.getFile().file_name,
      data: data
    };
    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_38__["ZegoDocsEventType"].PlayAnimation, payload);

    if (this.wbId) {
      var detail = {
        action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Animation,
        data: data,
        notify: true
      };
      this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
        detail: detail
      }));
    }
  };

  ZegoDocsViewImpl.prototype.syncCurrentError = function (data) {
    var code = data.code;

    if (code === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout) {
      this.ppth5Info.loadRetryTimer && clearTimeout(this.ppth5Info.loadRetryTimer);
      this.changeH5CDNHost();
    } else {
      this.postErrorMessage(data);
    }
  };

  ZegoDocsViewImpl.prototype.initIframe = function () {
    var _this = this;

    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].InitPlatform, [4]);
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].GetAllPageStepCount);
    this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT && this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptConfig"].Scale, this.ppth5Info.scale]);
    this.domEventListeners && this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptConfig"].SyncDOMEvent]);
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptConfig"].PptOperationAuth, JSON.stringify({
      scroll: +this.zoomInfo.enableScroll
    })]);
    var store = this.serviceHandle.getStore(); // !!! DisableH5ImageDrag 这个配置会添加自定义样式，确保放在最后调用

    var keys = [_entities__WEBPACK_IMPORTED_MODULE_39__["ZegoConfigKey"].UnloadVideoSrc, _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoConfigKey"].PptStepMode, _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoConfigKey"].DisableH5ImageDrag];
    keys.forEach(function (key) {
      return _this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [key, store[key]]);
    });
  };

  ZegoDocsViewImpl.prototype.dragPDF = function (event, end) {
    var _a = this.zoomInfo,
        tx = _a.tx,
        ty = _a.ty,
        zoom = _a.zoom,
        enableScroll = _a.enableScroll,
        remoteScroll = _a.remoteScroll,
        dragRectTop = _a.dragRectTop,
        dragRectBottom = _a.dragRectBottom;
    var _b = this.viewInfo,
        width = _b.width,
        height = _b.height,
        viewHeight = _b.viewHeight,
        percent = _b.percent;

    var _c = event instanceof MouseEvent ? event : event.changedTouches[0],
        clientX = _c.clientX,
        clientY = _c.clientY;

    var x = tx + this.zoomInfo.x - clientX;
    var y = ty + this.zoomInfo.y - clientY; // x轴边距计算

    var max = width * (zoom - 1);
    max = Math.floor(max);
    if (x < 0) x = 0;else if (x > max) x = max; // y轴边距计算  有权限：同步滚动百分百，无权限：只能在视口区域拖拽

    var min = enableScroll ? 0 : Math.ceil(percent * height * zoom);
    max = enableScroll ? height * zoom - viewHeight : min + (zoom - 1) * viewHeight;
    max = Math.floor(max);
    if (y < min) y = min;else if (y > max) y = max;

    if (enableScroll) {
      this.viewInfo.scrollLeft = Math.ceil(x / zoom);
      this.viewInfo.scrollTop = Math.ceil(y / zoom);
    }

    this.viewInfo.ticking = true;
    this.docDom.scrollTo(x, y);
    this.renderDom.scrollTo(x, y);

    if (end) {
      this.zoomInfo.x = 0;
      this.zoomInfo.y = 0;
      this.viewInfo.ticking = false;

      if (zoom > 1 && y >= dragRectTop && y <= dragRectBottom) {
        // 在该当前视窗边界内拖拽，只更新偏移百分比，不更新垂直百分比
        this.postSyncDragMessage(x, y - percent * height * zoom);
      } else {
        if (!enableScroll) {
          !remoteScroll && this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbError, _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll); // 没有滚动权限时，回滚到旧值

          this.viewInfo.ticking = true;
          this.docDom.scrollTo(tx, ty);
          this.renderDom.scrollTo(tx, ty);
          this.viewInfo.ticking = false;
          return;
        }

        this.updateCurViewMax(y, zoom);
        this.onScrollCallback(x, y);
      }
    }
  };

  ZegoDocsViewImpl.prototype.dragPPT = function (event, end) {
    var _a = this.zoomInfo,
        tx = _a.tx,
        ty = _a.ty,
        zoom = _a.zoom;
    var _b = this.viewInfo,
        viewWidth = _b.viewWidth,
        viewHeight = _b.viewHeight;

    var _c = event instanceof MouseEvent ? event : event.changedTouches[0],
        clientX = _c.clientX,
        clientY = _c.clientY;

    var x = tx + clientX - this.zoomInfo.x;
    var y = ty + clientY - this.zoomInfo.y;
    var min = viewWidth * (1 - zoom);
    if (x > 0) x = 0;else if (x < min) x = min;
    min = viewHeight * (1 - zoom);
    if (y > 0) y = 0;else if (y < min) y = min;

    if (end) {
      this.zoomInfo.x = 0;
      this.zoomInfo.y = 0;
      this.postSyncDragMessage(x, y, !end);
    }

    this.setDocsViewDomTransform(x, y);
  };

  ZegoDocsViewImpl.prototype.handleSetScaleFactor = function (zoom, ofsX, ofsY, notify) {
    var _this = this;

    this.ppth5Info.notify = notify;
    this.zoomInfo.zoom = zoom;
    var _a = this.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        width = _a.width,
        height = _a.height,
        scrollTop = _a.scrollTop,
        percent = _a.percent;
    this.setDocsViewDomOverflow();

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      var child = this.getDocViewChild();
      child.style.cssText += "transform:scale(" + zoom + ");";
      child = this.renderDom.firstChild;
      child.style.cssText += "transform:scale(" + zoom + ");"; // 计算滚动值

      var x = ofsX * width * zoom;
      var y = (ofsY + percent) * height * zoom;

      if (notify) {
        x = viewWidth * (zoom - 1) * 0.5;
        y = scrollTop;
        y = y * zoom + viewHeight * (zoom - 1) * 0.5;
      }

      x = Math.round(x);
      y = Math.round(y); // 滚动事件 锁定不执行

      this.viewInfo.ticking = true;
      this.docDom.scrollTo(x, y);
      this.renderDom.scrollTo(x, y);
      this.postSyncDragMessage(x, y - percent * height * zoom);
      this.updateCurViewMax(Math.ceil(percent * height * zoom), zoom); // 滚动事件 解除锁定

      clearTimeout(this.viewInfo.scrollTimeId);
      this.viewInfo.scrollTimeId = window.setTimeout(function () {
        _this.viewInfo.ticking = false;
      }, 34);
    } else {
      var x = Math.round(notify ? viewWidth * (1 - zoom) * 0.5 : -ofsX * width * zoom);
      var y = Math.round(notify ? viewHeight * (1 - zoom) * 0.5 : -ofsY * height * zoom);
      this.setDocsViewDomTransform(x, y);
      this.postSyncDragMessage(x, y);
    } // docsiew 单独使用


    if (!this.wbId) {
      this.zoomInfo.isDrag = zoom > 1;
      this.docDom.style.cursor = zoom > 1 ? 'move' : 'auto';
    }

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) this.loadCurrentSheet();
  }; // 滚动文件 更新边界点


  ZegoDocsViewImpl.prototype.updateCurViewMax = function (y, zoom) {
    if (zoom > 1) {
      this.zoomInfo.dragRectTop = y - 2;
      this.zoomInfo.dragRectBottom = Math.ceil(y + this.viewInfo.viewHeight * (zoom - 1));
    } else {
      this.zoomInfo.dragRectTop = 0;
      this.zoomInfo.dragRectBottom = 0;
    }
  };

  ZegoDocsViewImpl.prototype.drawPDFBlank = function (parentHeight, scrollTop) {
    var _this = this;

    if (this.canvasArray.length < 2) return;
    var top = scrollTop;
    var i = 0;
    var h = 0;

    while (h < top) {
      h += this.getCanvasHeight(i++);
    }

    var s = i > 0 ? i - 1 : 0;
    top += parentHeight;
    i = 0;
    h = 0;

    while (h < top) {
      var vpageHeight = this.getCanvasHeight(i++);
      h += vpageHeight; // 如果当前获取索引值超过了canvas的数量 则退出循环

      if (vpageHeight === 0) break;
    }

    var _a = this.viewInfo,
        canvasMaxPage = _a.canvasMaxPage,
        isParentScale = _a.isParentScale;
    var e = i > 0 ? i - 1 : 0;
    var pages = [];

    for (; s <= e; s++) {
      pages.push(s * canvasMaxPage + 1);
    }

    if (!isParentScale) {
      pages.forEach(function (p) {
        return _this.execDraw(p, undefined);
      });
      var log = {
        id: this.id,
        pages: pages
      };
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'draw_scrolled', JSON.stringify({
        log: log
      }));
    } else {
      this.execScrollFileAndDraw(pages[0], undefined, pages);
    }
  };

  ZegoDocsViewImpl.prototype.firstNeedPlayAnimation = function () {
    var _a = this.viewInfo.firstInfo,
        page = _a.page,
        step = _a.step,
        h5Extra = _a.h5Extra;

    if (page && h5Extra && page == this.ppth5Info.page && step == this.ppth5Info.step) {
      this.playAnimation(h5Extra);
      this.viewInfo.firstInfo.page = 0;
      this.viewInfo.firstInfo.step = 0;
    }
  };

  ZegoDocsViewImpl.prototype.getAllVirtualInPageRange = function (start, end) {
    var pages = this.getFile().page_list;
    var ret = [];
    if (start < 0) start = 0;
    if (end >= pages.length) end = pages.length - 1;

    for (var i = start; i <= end; ++i) {
      for (var _i = 0, _a = pages[i].virtual_page_list; _i < _a.length; _i++) {
        var vpage = _a[_i];
        ret.push(vpage.virtual_page_number);
      }
    }

    return ret;
  }; // 启动函数，通过虚拟页码数组，获取虚拟页图像信息数组


  ZegoDocsViewImpl.prototype.startGetImageByVirtualPageList = function (vpages, cb) {
    var vpageImgs = [];
    var cache = this.vpageImgCache[this.viewInfo.sheet];

    for (var i = 0; i < vpages.length;) {
      var val = cache && cache[vpages[i]];

      if (val) {
        vpageImgs.push(val);
        vpages.splice(i, 1);
      } else {
        i++;
      }
    }

    this.getImageByVirtualPageList(vpageImgs, vpages, cb);
  };

  ZegoDocsViewImpl.prototype.sortVirtualPageListRule = function (a, b) {
    return a.virtual_page_number - b.virtual_page_number;
  }; // 通过虚拟页码数组，获取虚拟页图像信息数组


  ZegoDocsViewImpl.prototype.getImageByVirtualPageList = function (vpageImgs, vpages, cb) {
    var _this = this;

    if (vpages.length <= 0) {
      vpageImgs.sort(this.sortVirtualPageListRule);
      cb(vpageImgs);
      return;
    }

    this.serviceHandle.registerEventHandler(this.id, _entities__WEBPACK_IMPORTED_MODULE_39__["DocsListener"].GetPageImage, function (res) {
      var vpageNum = res.virtual_page_number;

      for (var i = 0; i < vpages.length; ++i) {
        if (vpages[i] == vpageNum) {
          vpages.splice(i, 1);
          break;
        }
      }

      var cache = _this.vpageImgCache[_this.viewInfo.sheet] || {};
      cache[vpageNum] = res;
      _this.vpageImgCache[_this.viewInfo.sheet] = cache;
      var have_got = false;

      for (var i = 0; i < vpageImgs.length; ++i) {
        if (vpageImgs[i].virtual_page_number == vpageNum) {
          vpageImgs[i] = res;
          have_got = true;
        }
      }

      if (!have_got) {
        vpageImgs.push(res);
      }

      _this.getImageByVirtualPageList(vpageImgs, vpages, cb);
    });
    var _a = this.viewInfo,
        sheet = _a.sheet,
        rate = _a.rate;
    this.serviceHandle.getPageImage(this.id, {
      sheet: sheet,
      rate: rate * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"] * 1.5,
      virtual_page_number: vpages[0],
      virtual_start: this.vpageAspecCache[sheet].vs - 1,
      res: this.fileInfo
    });
  };

  ZegoDocsViewImpl.prototype.getFile = function () {
    return this.fileInfo.file_list[this.viewInfo.sheet];
  };

  ZegoDocsViewImpl.prototype.execGotoPage = function (page, step, notify) {
    if (page !== this.ppth5Info.page) {
      this.ppth5Info.page = page;
      this.ppth5Info.step = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM ? step : 1;
      this.gotoPage(notify);
    } else {
      if (step < this.ppth5Info.step) {
        this.previousStep(this.ppth5Info.notify, "execGotoPage(" + page + "," + step + "," + this.ppth5Info.step + ")");
      } else if (step > this.ppth5Info.step) {
        this.nextStep(this.ppth5Info.notify, "execGotoPage(" + page + "," + step + "," + this.ppth5Info.step + ")");
      } else if (step === this.ppth5Info.step && !(this.ppth5Info.targetPage === 1 && this.ppth5Info.targetStep === 1)) {
        // 该判断是为了解决跳步跳到某页某步，跳两次会导致targetStep无法归零问题。
        // 该判断的后半部分是为了避开 在docs层初始化的的时候，动态ppt在初始化的时候需要targetStep和targetPage都为1的情况
        this.ppth5Info.targetPage = 0;
        this.ppth5Info.targetStep = 0;
      }
    }
  };

  ZegoDocsViewImpl.prototype.runGotoPageQueue = function (page, step, notify, cb) {
    var _this = this;

    this.ppth5Info.targetPage = page;
    this.ppth5Info.targetStep = step;
    this.execGotoPage(page, step, notify);
    var delay = this.ppth5Info.loaded ? _entities__WEBPACK_IMPORTED_MODULE_39__["SYNC_PPT_TIME"] : _entities__WEBPACK_IMPORTED_MODULE_39__["SYNC_PPT_INIT_TIME"]; // 定时器检查 iframe 无回包的情况

    if (this.ppth5Info.syncTimer) clearTimeout(this.ppth5Info.syncTimer); // @ts-ignore

    this.ppth5Info.syncTimer = window.setTimeout(function () {
      return _this[cb](true);
    }, delay);
  }; // 多端同步方案：任务队列串行执行


  ZegoDocsViewImpl.prototype.syncWhiteboardPPTH5Queue = function (page, step) {
    var _this = this;

    var _a = this.ppth5Info,
        _page = _a.page,
        _step = _a.step,
        loaded = _a.loaded,
        notify = _a.notify;
    if (page == _page && step == _step) return;
    var task = {
      page: page,
      step: step,
      notify: notify,
      loaded: loaded,
      id: this.id
    };
    var store = this.serviceHandle.getStore();
    store.syncPPTH5Queue = store.syncPPTH5Queue && store.syncPPTH5Queue.length ? store.syncPPTH5Queue.filter(function (v) {
      return v.id === _this.id;
    }) : [];
    var last = store.syncPPTH5Queue[store.syncPPTH5Queue.length - 1]; // 去重

    if (last && (last.page !== page || last.step !== step)) {
      var log = {
        page: _page,
        step: _step,
        task: task,
        queue: store.syncPPTH5Queue.map(function (v) {
          return v.page + "-" + v.step;
        }).join()
      };
      store.syncPPTH5Queue.push(task);
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_wbqueue_push', JSON.stringify({
        log: log
      }));
    } else if (!last) {
      store.syncPPTH5Queue = [task];
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_wbqueue_init', JSON.stringify({
        task: task
      }));
      this.runGotoPageQueue(task.page, task.step, task.notify, 'execSyncPPTH5Queue');
    }
  };

  ZegoDocsViewImpl.prototype.execSyncPPTH5Queue = function (check) {
    var store = this.serviceHandle.getStore();
    var arr = store.syncPPTH5Queue;
    var timeout = check && store.syncQueueRuning;

    if (timeout) {
      this.execQueueTimeout(arr);
    }

    store.syncQueueRuning = false;

    if (arr && arr.length) {
      store.syncQueueRuning = true;
      var task = arr.shift();

      if (!timeout || arr[0]) {
        task = arr[0];
      }

      if (task) {
        _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_wbqueue_pop', JSON.stringify({
          timeout: check,
          task: task,
          store: store
        }));
        this.runGotoPageQueue(task.page, task.step, task.notify, 'execSyncPPTH5Queue');
      }
    }
  };

  ZegoDocsViewImpl.prototype.execMultiDocsQueue = function (check) {
    var _this = this;

    var store = this.serviceHandle.getStore();
    var arr = store.multiDocsQueue;

    if (check && store.syncQueueRuning) {
      this.execQueueTimeout(arr);
    }

    store.syncQueueRuning = false;

    if (arr && arr.length) {
      store.syncQueueRuning = true;
      var tasks = [];
      var cur = arr.shift();
      tasks.push(cur);

      for (var i = 0; i < arr.length; i++) {
        var item = arr[i];

        if (item && item.id !== cur.id && item.p !== cur.p) {
          cur = item;
          tasks.push(cur);
          arr.splice(i, 1);
        }
      }

      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_mdqueue_pop', JSON.stringify({
        timeout: check,
        tasks: tasks,
        store: store
      }));
      tasks.forEach(function (v) {
        _this.serviceHandle.execViewFuction('runGotoPageQueue', v.id, __spreadArrays(v.args, ['execMultiDocsQueue']));
      });
    }
  };

  ZegoDocsViewImpl.prototype.execQueueTimeout = function (queue) {
    // 删除未初始化时的任务
    if (queue && queue.length) {
      var tasks = [];

      for (var i = 0; i < queue.length - 1; i++) {
        if (queue[i] && !queue[i].loaded) {
          tasks.push(queue[i]);
          queue.splice(i, 1);
        }
      }

      var log = {
        id: this.id,
        loaded: this.ppth5Info.loaded,
        queue: queue,
        tasks: tasks
      };
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_queue_timeout', JSON.stringify({
        log: log
      }));
    }

    this.ppth5Info.loaded = true;
    this.ppth5Info.targetPage = 0;
    this.ppth5Info.targetStep = 0;
    this.postStepChangeMessage();
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].HideLoadingStyle);
  };

  ZegoDocsViewImpl.prototype.gotoPage = function (notify) {
    this.ppth5Info.notify = notify;

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT) {
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'gotoPage', JSON.stringify({
        id: this.id,
        notify: notify,
        page: this.ppth5Info.page
      })); // 页码从0开始

      this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].GotoPage, [this.ppth5Info.page - 1, notify]);
    } else if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) {
      // 页码从1开始
      this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].GotoPage, [this.ppth5Info.page, this.ppth5Info.step, notify]);
    } else {
      this.handleScroll(this.getScrollTopByPage(this.ppth5Info.page));
    }
  };

  ZegoDocsViewImpl.prototype.checkParamsPage = function (page) {
    var total = this.getPageCount();

    if (page < 1) {
      page = 1;
    } else if (page > total) {
      page = total;
    } else {
      page |= 0;
    }

    return page;
  }; // 延迟绘制


  ZegoDocsViewImpl.prototype.delayDraw = function (fn) {
    var _this = this; // 在safari和iphone版的微信浏览器上，使用canvas绘制svg。会出现 svg中的image 未渲染出来之前canvas就进行drawImage的情况。


    return function (e) {
      if (_this.isAppleDevice()) {
        setTimeout(fn.bind(_this, e));
      } else {
        fn(e);
      }
    };
  }; // safari和苹果的移动端设备的所有浏览器都应该符合判断


  ZegoDocsViewImpl.prototype.isAppleDevice = function () {
    var ua = navigator.userAgent;
    var isAppleDevice = ua.includes('Mac');
    var isSafari = !ua.includes('Chrome') && ua.includes('Safari');

    if (this.isTouch) {
      // 苹果的移动端设备的所有浏览器
      return isAppleDevice;
    } else {
      // PC端的safari浏览器
      return isSafari;
    }
  };

  ZegoDocsViewImpl.prototype.getCDNHostList = function () {
    return this.fileInfo.cdn_hosts || [];
  };

  ZegoDocsViewImpl.prototype.docsSnapshot = function (_a) {
    var ctx = _a.ctx,
        snapshotId = _a.snapshotId;

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) {
      this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SnapshotForH5, [snapshotId]);
    } else {
      this.snapshotForStatic(ctx);
    }
  }; // 接收h5截图结果，并发送到白板层


  ZegoDocsViewImpl.prototype.getH5SnapshotResult = function (res) {
    var detail = __assign(__assign({}, res), {
      action: _entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].H5Snapshot
    });

    this.docDom.dispatchEvent(new CustomEvent(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEvent"].Docs, {
      detail: detail
    }));
  }; // 静态文件截图


  ZegoDocsViewImpl.prototype.snapshotForStatic = function (ctx) {
    var _a = this.viewInfo,
        width = _a.width,
        height = _a.height,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        scrollTop = _a.scrollTop,
        sheet = _a.sheet;
    var viewportWidth = Math.min(width, viewWidth);
    var viewportHeight = Math.min(height, viewHeight); // 获取当前视口处于位于canvas的索引

    var canvasInds = this.getCanvasInds(viewHeight, scrollTop);
    ctx.clearRect(0, 0, viewWidth, viewHeight); // 当前视口canvas及以上所有canvas的虚拟累加高度

    var accHeight = 0;
    var i = 0;

    while (i <= canvasInds[0]) {
      accHeight += this.getCanvasHeight(i++);
    }

    var // 虚拟scrollTop - 虚拟累加高度 + 当前视口的canvas的虚拟高度
    sy = (scrollTop - accHeight + this.vpageAspecCache[sheet].h[canvasInds[0]]) * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"],
        sw = viewportWidth * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"],
        sh = viewportHeight * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"];
    ctx.drawImage(this.canvasArray[canvasInds[0]], 0, sy, sw, sh, 0, 0, viewportWidth, viewportHeight); // 当视口跨两个canvas情况下的下半个canvas的绘制

    if (canvasInds.length === 2) {
      var dy = accHeight - scrollTop,
          // 累加高度 - 虚拟scrollTop
      sh_1 = (viewportHeight - dy) * _entities__WEBPACK_IMPORTED_MODULE_39__["RENDER_MAX_ZOOM"]; // 视口高度 - 视口中上半个canvas占据的视口高度

      ctx.drawImage(this.canvasArray[canvasInds[1]], 0, 0, sw, sh_1, 0, dy, viewportWidth, viewportHeight - dy);
    }
  };

  ZegoDocsViewImpl.prototype.getCanvasInds = function (parentHeight, scrollTop) {
    if (this.canvasArray.length < 2) return [0];
    var i = 0;
    var accHeight = 0;

    while (accHeight < scrollTop) {
      accHeight += this.getCanvasHeight(i++);
    }

    var startInd = i > 0 ? i - 1 : 0;
    var scrollBottom = scrollTop + parentHeight;
    i = 0;
    accHeight = 0;

    while (accHeight < scrollBottom) {
      var vpageHeight = this.getCanvasHeight(i++);
      accHeight += vpageHeight;
      if (vpageHeight === 0) break; // 如果当前获取索引值超过了canvas的数量 则退出循环
    }

    var endInd = i > 0 ? i - 1 : 0;
    if (startInd === endInd) return [startInd];
    return [startInd, endInd];
  };

  ZegoDocsViewImpl.prototype.setSheet = function (sheet) {
    if (typeof sheet == 'string') {
      this.viewInfo.sheetName = sheet;
    } else if (typeof sheet == 'number') {
      this.viewInfo.sheet = sheet;
    }
  };
  /**
   * 父容器改变高度后，重置容器高度
   * 场景：改变父容器scale后，计算canvas空白处并渲染
   */


  ZegoDocsViewImpl.prototype.resetVisibleSize = function () {
    if (this.docDom && this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
      var _a = document.getElementById(this.parent),
          clientWidth = _a.clientWidth,
          clientHeight = _a.clientHeight;

      var css = "width:" + clientWidth + "px;height:" + clientHeight + "px;";
      var zoomDom = this.docDom.parentElement; // 初始时无滚动，改变尺寸后可垂直滚动

      this.docDom.style.cssText += css + 'overflow: hidden auto;';
      this.renderDom.style.cssText += css + 'overflow: hidden auto;';
      zoomDom.style.cssText += css + ("top:" + Math.max(0, (clientHeight - this.viewInfo.height) / 2) + "px;");
      this.drawPDFBlank(clientHeight, this.viewInfo.scrollTop);
      this.viewInfo.isParentScale = true;
    }
  };
  /**
   * 监听 H5 DOM Event，自定义业务逻辑
   */


  ZegoDocsViewImpl.prototype.addDOMEventListener = function (type, listener) {
    if (!this.domEventListeners) this.domEventListeners = {};
    this.domEventListeners[type] = listener;
  };
  /**
   * 切换 H5 和 父容器 之间 DOM Event 的焦点
   * 场景：父容器拖拽事件
   */


  ZegoDocsViewImpl.prototype.enableDOMEvent = function (enable) {
    var dom = this.docDom && this.docDom.parentElement;

    if (dom && this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT) {
      dom.style.cssText += "pointer-events:" + (enable ? 'initial' : 'none') + ";";
    }
  };
  /**
   * superboard 调用
   */


  ZegoDocsViewImpl.prototype.setParent = function (parent) {
    this.parent = parent;
    this.ppth5Info.p = parent;
  };

  ZegoDocsViewImpl.prototype.mergeRemoteFileInfo = function (res) {
    if (this.parent) {
      this.tranlateFileAspec(res);
    } else {
      // 没有父容器时计算文件总宽高，用于创建白板
      this.calculateFileAspecWithNoParent(res);
    }

    var _a = res.file_list[this.viewInfo.sheet],
        max_width = _a.max_width,
        total_height = _a.total_height,
        filePageSize = _a.filePageSize;
    this.viewInfo.width = max_width;
    this.viewInfo.filePageSize = filePageSize;
    this.viewInfo.height = total_height;
    Object.assign(this.fileInfo, res);
    return Promise.resolve(this.getLoadFileModelForCallback());
  };

  ZegoDocsViewImpl.prototype.getExcelSheetNameList = function () {
    return this.fileInfo.file_type === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS ? this.fileInfo.file_list.map(function (v) {
      return v.file_name;
    }) : [];
  }; //----------------------------//
  // 对外接口                    //
  //----------------------------//

  /**
   * 加载并渲染文件
   */


  ZegoDocsViewImpl.prototype.loadFile = function (fileID, authKey, listener) {
    var _a;

    var _this = this; // this.loadFileListener = listener;


    this.loadFileListenerMap[fileID] = listener;
    this.serviceHandle.setStore((_a = {}, _a[this.parent + '_activited'] = this.id, _a));
    this.viewInfo.ticking = false; // 已经加载过，直接回调

    if (this.fileInfo.file_id === fileID && this.viewInfo.firstInfo.loadedFile) {
      setTimeout(function () {
        _this.hideOtherDocsView();

        _this.loadFileCallback();
      });
      return Promise.resolve(this.getLoadFileModelForAPI(this.fileInfo));
    } // Logger.setExtraConfig({ fileID });


    return this.serviceHandle.load(this.id, {
      fileID: fileID,
      authKey: authKey
    }, true).then(function (res) {
      return _this.getLoadFileModelForAPI(res);
    });
  };
  /**
   * 卸载文件
   */


  ZegoDocsViewImpl.prototype.unloadFile = function () {
    var _a, _b;

    var dom = (_a = this.docDom) === null || _a === void 0 ? void 0 : _a.parentElement;

    if (dom) {
      (_b = dom.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(dom);
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.unloadFile');
    }

    this.serviceHandle.execViewFuction('unloadFile', this.id, []);
  };
  /**
   * 获取文件内容宽高
   */


  ZegoDocsViewImpl.prototype.getContentSize = function () {
    var size = {
      width: this.viewInfo.width,
      height: this.viewInfo.height
    };
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getContentSize', JSON.stringify({
      size: size
    }));
    return size;
  };
  /**
   * 获取视口宽高
   */


  ZegoDocsViewImpl.prototype.getVisibleSize = function () {
    var size = {
      width: this.viewInfo.viewWidth,
      height: this.viewInfo.viewHeight
    };
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getVisibleSize', JSON.stringify({
      size: size
    }));
    return size;
  };
  /**
   * 获取当前视图对应的 fileID
   */


  ZegoDocsViewImpl.prototype.getFileID = function () {
    var id = this.fileInfo.file_id;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getFileID', JSON.stringify({
      id: id
    }));
    return id;
  };
  /**
   * 获取当前视图加载的文件的 ZegoDocsViewFileType
   */


  ZegoDocsViewImpl.prototype.getFileType = function () {
    var type = this.fileInfo.file_type;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getFileType', JSON.stringify({
      type: type
    }));
    return type;
  };
  /**
   * 获取当前视图视口中线位置所在的页码，页码从1开始
   */


  ZegoDocsViewImpl.prototype.getCurrentPage = function () {
    var page = this.ppth5Info.page;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getCurrentPage', JSON.stringify({
      page: page
    }));
    return page;
  };
  /**
   * 获取动态PPT当前页码的动画步骤，从1开始
   */


  ZegoDocsViewImpl.prototype.getCurrentStep = function () {
    var step = this.ppth5Info.step;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getCurrentStep', JSON.stringify({
      step: step
    }));
    return step;
  };
  /**
   * 获取当前已加载文件的总页数
   */


  ZegoDocsViewImpl.prototype.getPageCount = function () {
    var pageCount = this.viewInfo.total;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getPageCount', JSON.stringify({
      pageCount: pageCount
    }));
    return pageCount;
  };
  /**
   * 获取 PPT 备注
   */


  ZegoDocsViewImpl.prototype.getPPTNotes = function (page) {
    page = this.checkParamsPage(page);
    var note = this.fileInfo.notes[page - 1] || '';
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getPPTNotes', JSON.stringify({
      note: note
    }));
    return note;
  };
  /**
   * 获取缩略图
   */


  ZegoDocsViewImpl.prototype.getThumbnailUrlList = function () {
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getThumbnailUrlList', JSON.stringify({
      thumbnails: this.fileInfo.thumbnails
    }));
    return this.fileInfo.thumbnails;
  };
  /**
   * 获取纵向偏移百分比
   */


  ZegoDocsViewImpl.prototype.getVerticalPercent = function () {
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.getVerticalPercent', JSON.stringify({
      verticalPercent: this.viewInfo.percent
    }));
    return this.viewInfo.percent;
  };
  /**
   * 滚动到纵向偏移百分比 0-1
   * 备注：仅适用于鼠标等引起滚动条变化的场景（异形文件翻页引起的滚动百分比会造成滚动距离和页码计算错误）
   */


  ZegoDocsViewImpl.prototype.scrollTo = function (percent, notify) {
    this.ppth5Info.notify = notify === undefined ? true : !!notify;
    var top = Math.ceil(this.viewInfo.height * percent * this.zoomInfo.zoom);
    var page = this.getPageByScrollTop(top);
    this.ppth5Info.page = page;
    this.handleScroll(top);
    if (this.viewInfo.firstInfo.scrollTop !== -1) this.viewInfo.firstInfo.scrollTop = top;
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.scrollTo', JSON.stringify({
      id: this.id,
      params: percent,
      page: page,
      top: top
    }));
  };
  /**
   *  跳转到目标页，从1开始
   *  备注：所有翻页场景都调用此接口
   */


  ZegoDocsViewImpl.prototype.flipPage = function (page, step, notify) {
    page = this.checkParamsPage(page);
    step = typeof step === 'number' ? Math.max(1, step | 0) : 1;
    notify = notify === undefined ? true : !!notify;
    this.ppth5Info.notify = notify;
    var isH5 = this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM; // step 超过最大步数

    var maxStep = isH5 && this.viewInfo.maxSteps[page - 1];

    if (maxStep && step > maxStep) {
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.flipPage', JSON.stringify({
        actionMsg: 'error step',
        params: {
          page: page,
          step: step,
          maxStep: maxStep
        }
      }));
      return;
    }

    if (isH5 && this.wbId) {
      this.syncWhiteboardPPTH5Queue(page, step);
      return;
    } // 动态PPT 跳到目标页码和步数


    if (isH5) {
      this.ppth5Info.targetPage = page;
      this.ppth5Info.targetStep = step;
    } // 单独使用时，多个容器 跳到目标页码和步数。串行执行iframe通信


    var loaded = this.ppth5Info.loaded;
    var store = this.serviceHandle.getStore();

    if (isH5 && (loaded || !loaded && (page > 1 || step > 1))) {
      if (store.multiDocsQueue && store.syncQueueRuning) {
        // 重复任务过滤
        var isPush = true;
        var id = this.id;

        for (var i = store.multiDocsQueue.length - 1; i >= 0; i--) {
          var item = store.multiDocsQueue[i];

          if (item.id == id && item.args.page == page && item.args.step == step) {
            isPush = false;
            break;
          }
        }

        if (isPush) {
          var task = {
            p: this.parent,
            id: this.id,
            loaded: loaded,
            args: [page, step, notify]
          };
          store.multiDocsQueue.push(task);
          _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'h5_mdqueue_push', JSON.stringify({
            task: task
          }));
          return;
        }
      }

      store.syncQueueRuning = true;
      store.multiDocsQueue = store.multiDocsQueue || [];
    }

    if (store.multiDocsQueue) {
      this.runGotoPageQueue(page, step, notify, 'execMultiDocsQueue');
    } else {
      if (this.viewInfo.firstInfo.scrollTop !== -1) {
        this.viewInfo.firstInfo.scrollTop = this.getScrollTopByPage(page);
      }

      this.execGotoPage(page, step, notify);
    }

    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.flipPage', JSON.stringify({
      id: this.id,
      params: {
        page: page,
        step: step
      }
    }));
  };
  /**
   * 动画上一步，仅针对动态PPT
   */


  ZegoDocsViewImpl.prototype.previousStep = function (notify, action) {
    var _a = this.ppth5Info,
        page = _a.page,
        step = _a.step;
    if (page === 1 && step === 1) return;
    notify = notify === undefined ? true : !!notify;

    if (!this.zoomInfo.enableScroll && notify && step === 1) {
      !this.zoomInfo.remoteScroll && this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbError, _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll);
      return;
    }

    this.ppth5Info.notify = notify;
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].PreviousStep, [notify]);
    notify && this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Step, '');
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.previousStep', JSON.stringify({
      id: this.id,
      notify: notify,
      action: action
    }));
  };
  /**
   * 动画下一步，仅针对动态PPT
   */


  ZegoDocsViewImpl.prototype.nextStep = function (notify, action) {
    var _a = this.ppth5Info,
        page = _a.page,
        step = _a.step;
    notify = notify === undefined ? true : !!notify;

    if (!this.zoomInfo.enableScroll && notify && step === this.viewInfo.maxSteps[page - 1]) {
      !this.zoomInfo.remoteScroll && this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].WbError, _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll);
      return;
    }

    this.ppth5Info.notify = notify;
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].NextStep, [notify]);
    notify && this.postWhiteboardMessage(_entities__WEBPACK_IMPORTED_MODULE_39__["DomEventAction"].Step, '');
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.nextStep', JSON.stringify({
      id: this.id,
      notify: notify,
      action: action
    }));
  };
  /**
   * 切换 Excel sheet
   */


  ZegoDocsViewImpl.prototype.switchSheet = function (index) {
    if (this.getFileType() === _entities__WEBPACK_IMPORTED_MODULE_39__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS && this.viewInfo.sheet !== index && index >= 0 && index < this.fileInfo.file_list.length) {
      this.viewInfo.sheet = index;
      this.vpageDrawImgCache = {};
      this.loadCurrentSheet(false, true);
      _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.switchSheet', JSON.stringify({
        id: this.id,
        params: index
      }));
    }
  };
  /**
   *  缩放
   */


  ZegoDocsViewImpl.prototype.setScaleFactor = function (scaleFactor, scaleOffsetX, scaleOffsetY) {
    var zoom = scaleFactor;
    if (!zoom || zoom < 1) zoom = 1;
    var oldZoom = this.zoomInfo.zoom;
    if (oldZoom === zoom) return;

    if ((this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) && !this.iframeDom) {
      return;
    } else if ((this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PPT) && !this.canvasArray[0]) {
      return;
    }

    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.setScaleFactor', JSON.stringify({
      zoom: zoom,
      x: scaleOffsetX,
      y: scaleOffsetY
    }));
    this.handleSetScaleFactor(zoom, scaleOffsetX || 0, scaleOffsetY || 0, true);
  };

  ZegoDocsViewImpl.prototype.getScaleFactor = function () {
    return {
      scaleFactor: this.zoomInfo.zoom,
      scaleOffsetX: 0,
      scaleOffsetY: 0
    };
  };

  ZegoDocsViewImpl.prototype.playAnimation = function (data) {
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].TriggerElementsClick, [data]);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.playAnimation', JSON.stringify({
      data: data
    }));
  };

  ZegoDocsViewImpl.prototype.stopPlay = function (pageNumber) {
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].StopPlay, [pageNumber]);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.stopPlay', JSON.stringify({
      pageNumber: pageNumber
    }));
  };

  ZegoDocsViewImpl.prototype.setVolume = function (volume) {
    this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetVolume, [volume]);
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.setVolume', JSON.stringify({
      volume: volume
    }));
  };

  ZegoDocsViewImpl.prototype.reloadView = function () {
    _Logger_new__WEBPACK_IMPORTED_MODULE_40__["Logger"].getInstance().info(['DocsView_View'], 'API.reloadView');

    if (!this.canReloadView()) {
      return;
    } // 重新计算文件尺寸前，计算滚动、偏移百分比


    var percents = {
      h: this.viewInfo.scrollLeft / this.viewInfo.width,
      v: this.viewInfo.scrollTop / this.viewInfo.height,
      tx: this.zoomInfo.tx / this.viewInfo.viewWidth,
      ty: this.zoomInfo.ty / this.viewInfo.viewHeight
    };
    this.tranlateFileAspec(this.fileInfo);
    var file = this.getFile();
    this.viewInfo.width = file.max_width;
    this.viewInfo.filePageSize = file.filePageSize;
    this.viewInfo.height = file.total_height;
    this.viewInfo.total = file.page_count;
    this.viewInfo.rate = file.rate; // 恢复滚动、偏移位置，不通知远端滚动

    this.ppth5Info.notify = false;

    if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT || this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_CUSTOM) {
      var _a = this.vpageAspecCache[0][1],
          x = _a.x,
          y = _a.y,
          w = _a.w,
          h = _a.h;
      this.iframeDom.width = w;
      this.iframeDom.height = h;
      this.postSyncDragMessage(percents.tx * w | 0, percents.ty * h | 0);
      this.updateDocsViewLayout(x, y, w, h);
      this.setDocsViewDomOverflow();
      this.getDocViewChild().style.cssText += "width:" + this.viewInfo.width + "px;height:" + this.viewInfo.height + "px;";
      this.reloadViewCallback();
      var fileWidth = this.getFile().page_list[0].width;
      this.ppth5Info.scale = Number((w / fileWidth).toFixed(4));
      this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].H5_PPT && this.postMessage2iframe(_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptEvents"].SetCustomizedConfig, [_entities__WEBPACK_IMPORTED_MODULE_39__["H5ScriptConfig"].Scale, this.ppth5Info.scale]);
    } else {
      this.canvasArray = [];
      this.vpageDrawImgCache = {};
      this.docDom.innerHTML = '';
      this.renderDom.innerHTML = '';

      if (this.renderMode === _entities__WEBPACK_IMPORTED_MODULE_39__["RenderMode"].PDF) {
        this.viewInfo.ticking = true;
        this.viewInfo.scrollLeft = percents.h * this.viewInfo.width;
        this.viewInfo.scrollTop = percents.v * this.viewInfo.height;
      } else {
        var _b = this.vpageAspecCache[0][1],
            w = _b.w,
            h = _b.h;
        this.postSyncDragMessage(percents.tx * w | 0, percents.ty * h | 0);
      }

      this.execScrollFileAndDraw(this.ppth5Info.page, this.reloadViewCallback);
    }
  };

  return ZegoDocsViewImpl;
}();



/***/ }),

/***/ "./sdk/docsview/zegoDocsViewService.ts":
/*!*********************************************!*\
  !*** ./sdk/docsview/zegoDocsViewService.ts ***!
  \*********************************************/
/*! exports provided: ZegoDocsViewService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsViewService", function() { return ZegoDocsViewService; });
/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ "./node_modules/core-js/modules/es.object.set-prototype-of.js");
/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.create.js */ "./node_modules/core-js/modules/es.object.create.js");
/* harmony import */ var core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.function.bind.js */ "./node_modules/core-js/modules/es.function.bind.js");
/* harmony import */ var core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.date.now.js */ "./node_modules/core-js/modules/es.date.now.js");
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _docs_zego_docs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./docs/zego.docs */ "./sdk/docsview/docs/zego.docs.ts");
/* harmony import */ var _view_services_base__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./view/services/base */ "./sdk/docsview/view/services/base.ts");
/* harmony import */ var _view_views_viewMod__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./view/views/viewMod */ "./sdk/docsview/view/views/viewMod.ts");
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _view_entities__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./view/entities */ "./sdk/docsview/view/entities/index.ts");
/* harmony import */ var _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");












var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (b.hasOwnProperty(p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};








var ZegoDocsViewService =
/** @class */
function (_super) {
  __extends(ZegoDocsViewService, _super);

  function ZegoDocsViewService(config) {
    var _this = _super.call(this) || this;

    _this.listeners = {};
    _this.docsviews = {};
    _this.canvasMaxSize = 2000000;
    _this.canvasAmountSize = 0;
    Object(_view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["initLogger"])(0, config, 'Docs', {
      Docs_VER: "2.2.3"
    });
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().setUploadConfig(config);
    _this.zegoDocs = new _docs_zego_docs__WEBPACK_IMPORTED_MODULE_11__["ZegoDocsService"](config);
    return _this;
  }

  ZegoDocsViewService.prototype.renewToken = function (token) {
    return this.zegoDocs.renewToken(token);
  }; // ------ 私有化 接口 start ------


  ZegoDocsViewService.prototype.setTestEnv = function (isTest) {
    this.zegoDocs.setTestEnv(isTest);
  };

  ZegoDocsViewService.prototype.setConfig = function (key, value) {
    var _a;

    var result;
    var keys = ['set_alpha_env', 'dynamicPPT_HD', 'dynamicPPT_AutomaticPage', _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoConfigKey"].Domain, _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoConfigKey"].ThumbnailMode];

    if (keys.includes(key)) {
      result = this.zegoDocs.setConfig(key, value);
    } else {
      result = this.setStore((_a = {}, _a[key] = value, _a));
    }

    return result;
  };

  ZegoDocsViewService.prototype.getConfig = function (key) {
    var result;

    if (key === _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoConfigKey"].Domain || key === _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoConfigKey"].ThumbnailMode) {
      result = this.zegoDocs.getConfig(key);
    } else {
      result = this.getStore()[key];
    }

    return result;
  };

  ZegoDocsViewService.prototype.calcCanvasSize = function (id) {
    this.canvasAmountSize = 0;
    var maxSingleSize = 0;

    for (var wbId in this.docsviews) {
      var docsview = this.docsviews[wbId];

      if (docsview.getFileType() == _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
        var size = docsview.getCanvasSize();
        this.canvasAmountSize += size;
        if (size > maxSingleSize) maxSingleSize = size;
        console.warn('calcCanvasSize', {
          size: size
        });
      }
    }

    this.canvasMaxSize = maxSingleSize;

    if (this.canvasAmountSize > this.canvasMaxSize) {
      this.clearCanvasCache(id);
    }
  };

  ZegoDocsViewService.prototype.clearCanvasCache = function (id) {
    console.warn('clearCanvasCache', id, self);

    for (var k in this.docsviews) {
      var docsview = this.docsviews[k];

      if (id !== docsview.id && docsview.getFileType() == _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG) {
        var size = docsview.getCanvasSize();
        this.canvasAmountSize -= size;
        docsview.clearCanvasCache();

        if (this.canvasAmountSize < this.canvasMaxSize) {
          break;
        }
      }
    }
  }; // ------ 私有化 接口 end ------
  // ------ 实现抽象方法 start ------ View 层调用


  ZegoDocsViewService.prototype.execViewFuction = function (name, id, args) {
    if (name === 'unloadFile') {
      this.docsviews[id].unload(); // @ts-ignore

      this.docsviews[id] = null;
      delete this.docsviews[id];
      return;
    }

    var view = this.docsviews[id]; // @ts-ignore

    view && view[name].apply(view, args);
  };

  ZegoDocsViewService.prototype.registerEventHandler = function (id, name, cb) {
    this.listeners[name] = this.listeners[name] || {};
    this.listeners[name][id] = cb;
  };

  ZegoDocsViewService.prototype.removeEventHandler = function (id) {
    for (var key in this.listeners) {
      this.listeners[key][id] = null; // delete this.listeners[key][id];
    }
  };

  ZegoDocsViewService.prototype.load = function (id, params, render) {
    var _this = this;

    return this.zegoDocs.loadFile(params.fileID).then(this.resolveLoad.bind(this, id, params.fileID, render))["catch"](function () {
      return _this.zegoDocs.loadFile(params.fileID).then(_this.resolveLoad.bind(_this, id, params.fileID, render))["catch"](function (e) {
        e = e || {
          code: _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout,
          message: '网络超时'
        };
        _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["ZegoEventType"].Error, __assign(__assign({}, params), e));
        _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().error(['DocsView_Service'], 'load_error', JSON.stringify({
          params: params,
          result: e
        }));
        throw e;
      });
    });
  };

  ZegoDocsViewService.prototype.cacheFile = function (fileID) {
    return this.zegoDocs.cacheFile(fileID);
  };

  ZegoDocsViewService.prototype.getPageImage = function (id, config) {
    var cb = this.listeners[_view_entities__WEBPACK_IMPORTED_MODULE_15__["DocsListener"].GetPageImage][id];
    cb && cb(this.transImage(config));
  };

  ZegoDocsViewService.prototype.decryptImage = function (url) {
    return this.zegoDocs.decryptImage(url);
  }; // ------ 实现抽象方法 end ------


  ZegoDocsViewService.prototype.on = function (event, callBack) {
    return _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].on(event, callBack);
  };

  ZegoDocsViewService.prototype.off = function (event, callBack) {
    return _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].off(event, callBack);
  };

  ZegoDocsViewService.prototype.getVersion = function () {
    return this.zegoDocs.getVersion();
  };

  ZegoDocsViewService.prototype.createView = function (ID, sheet) {
    ID = (ID || Date.now() + Math.floor(Math.random() * 1000)) + '';
    var params = {
      ID: ID,
      sheet: sheet
    };
    var view = this.docsviews[ID];

    if (view) {
      _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().info(['DocsView_Service'], 'createView', JSON.stringify({
        actionMsg: 'find in cache',
        params: params
      }));
      return view;
    } // 根据白板 ID 查找是否有对应的 docsview


    var dom = document.getElementById(_view_entities__WEBPACK_IMPORTED_MODULE_15__["DOMIDS"].wb + ID);
    dom = dom && dom.parentElement;

    if (dom) {
      var wbID = dom.id.replace(_view_entities__WEBPACK_IMPORTED_MODULE_15__["DOMIDS"].doc, '');
      view = this.docsviews[wbID];

      if (view) {
        this.docsviews[ID] = view;
        params.wbID = wbID;
        _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().info(['DocsView_Service'], 'createView', JSON.stringify({
          actionMsg: 'find in cache on whiteboard',
          params: params
        }));
        return view;
      }
    }

    view = new _view_views_viewMod__WEBPACK_IMPORTED_MODULE_13__["ZegoDocsViewImpl"](this, ID, sheet || 0);
    this.docsviews[ID] = view;
    _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().info(['DocsView_Service'], 'createView', JSON.stringify({
      params: params
    }));
    return view;
  };

  ZegoDocsViewService.prototype.setDocsViewParent = function (docsView, parent) {
    docsView.setParent(parent);
  };

  ZegoDocsViewService.prototype.getDocsViewFileInfo = function (docsView, fileID) {
    return this.zegoDocs.loadFile(fileID).then(function (res) {
      return docsView.mergeRemoteFileInfo(res);
    });
  };

  ZegoDocsViewService.prototype.uploadFile = function (file, renderType, extraInfo, listener) {
    var onProgress = listener && typeof listener == 'function' ? listener : function (res) {
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_14__["ZegoDocsEventType"].Upload, Object.assign(res, extraInfo));
    };
    return this.zegoDocs.uploadFile({
      file: file,
      renderType: renderType,
      onProgress: onProgress
    });
  };

  ZegoDocsViewService.prototype.cancelUploadFile = function (fileHash) {
    return this.zegoDocs.cancelUploadFile({
      fileHash: fileHash
    });
  };

  ZegoDocsViewService.prototype.uploadH5File = function (file, config, listener) {
    return this.zegoDocs.uploadH5File(file, config, listener);
  };

  ZegoDocsViewService.prototype.resolveLoad = function (id, config, render, res) {
    // 不渲染音视频，只返回文件信息
    if (render && res.file_type !== _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeAudio && res.file_type !== _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeVideo) {
      var cb_1 = this.listeners[_view_entities__WEBPACK_IMPORTED_MODULE_15__["DocsListener"].Load][id]; // 用户设置的微任务执行完后再渲染dom

      cb_1 && setTimeout(function () {
        return cb_1(res);
      });
    }

    var result = __assign(__assign({}, res), {
      preload: undefined,
      notes: undefined,
      thumbnails: undefined,
      file_list: undefined,
      file_urls: undefined
    });

    _view_Logger_new__WEBPACK_IMPORTED_MODULE_16__["Logger"].getInstance().info(['DocsView_Service'], 'resolveLoad', JSON.stringify({
      params: config,
      result: result
    }));
    return res;
  };

  ZegoDocsViewService.prototype.transImage = function (config) {
    var file_id = config.file_id,
        virtual_page_number = config.virtual_page_number,
        virtual_start = config.virtual_start,
        res = config.res,
        sheet = config.sheet;
    var isImg = res.file_type === _view_entities__WEBPACK_IMPORTED_MODULE_15__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeIMG;
    var src = res.file_list[sheet].page_list[virtual_page_number - virtual_start - 1].src;
    return {
      error_code: 0,
      file_id: file_id,
      image_data: isImg ? '' : src,
      image_path: isImg ? src : '',
      virtual_page_number: virtual_page_number
    };
  };

  return ZegoDocsViewService;
}(_view_services_base__WEBPACK_IMPORTED_MODULE_12__["ZegoDocsViewServiceBase"]);



/***/ }),

/***/ "./sdk/superboard/ZegoSuperBoardEntity.ts":
/*!************************************************!*\
  !*** ./sdk/superboard/ZegoSuperBoardEntity.ts ***!
  \************************************************/
/*! exports provided: ZegoSuperBoardTool, ZegoSuperBoardOperationMode, ZegoSuperBoardViewImageType, ZegoSuperBoardViewImageFitMode, ZegoSuperboardCustomConfigKey, ZegoSuperBoardFileType, ZegoSuperBoardUploadFileState, ZegoSuperBoardRenderType, ZegoSuperBoardError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardTool", function() { return ZegoSuperBoardTool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardOperationMode", function() { return ZegoSuperBoardOperationMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardViewImageType", function() { return ZegoSuperBoardViewImageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardViewImageFitMode", function() { return ZegoSuperBoardViewImageFitMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperboardCustomConfigKey", function() { return ZegoSuperboardCustomConfigKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardFileType", function() { return ZegoSuperBoardFileType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardUploadFileState", function() { return ZegoSuperBoardUploadFileState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardRenderType", function() { return ZegoSuperBoardRenderType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardError", function() { return ZegoSuperBoardError; });
/**
 * 白板工具类型定义
 *
 */
var ZegoSuperBoardTool;

(function (ZegoSuperBoardTool) {
  /**
   * 没有设置工具
   */
  ZegoSuperBoardTool[ZegoSuperBoardTool["None"] = 0] = "None";
  /**
   * 画笔工具，设置后绘制线条
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Pen"] = 1] = "Pen";
  /**
   * 文本工具
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Text"] = 2] = "Text";
  /**
   * 直线工具，设置后绘制直线
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Line"] = 4] = "Line";
  /**
   * 矩形工具，设置后绘制空心矩形
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Rect"] = 8] = "Rect";
  /**
   * 椭圆工具，设置后绘制椭圆
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Ellipse"] = 16] = "Ellipse";
  /**
   * 选择工具，设置后可以选中图元进行操作，比如移动
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Selector"] = 32] = "Selector";
  /**
   * 擦除工具，设置后点击图元进行擦除
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Eraser"] = 64] = "Eraser";
  /**
   * 激光笔工具,设置后显示激光笔轨迹
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Laser"] = 128] = "Laser";
  /**
   * 点击工具，主要用于点击动态ppt和H5文件的内容
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["Click"] = 256] = "Click";
  /**
   * 自定义图形，设置此类型后，在白板上绘制会绘制出addImage接口传入的自定义图形
   */

  ZegoSuperBoardTool[ZegoSuperBoardTool["CustomImage"] = 512] = "CustomImage";
})(ZegoSuperBoardTool || (ZegoSuperBoardTool = {}));
/**
 * 操作模式
 */


var ZegoSuperBoardOperationMode;

(function (ZegoSuperBoardOperationMode) {
  /**
   * 不可操作模式，如果与其他模式混合，则依然是不可操作模式
   */
  ZegoSuperBoardOperationMode[ZegoSuperBoardOperationMode["None"] = 1] = "None";
  /**
   * 绘制模式，此模式下将会响应图元绘制操作，并同步图元到其他端，无法滚动，不可以与 Scroll 混合使用
   */

  ZegoSuperBoardOperationMode[ZegoSuperBoardOperationMode["Draw"] = 2] = "Draw";
  /**
   * 滚动模式，此模式下可以进行滚动翻页，并同步到其他端，此时将无法响应手动绘制操作,不可以与 Draw 混合使用
   */

  ZegoSuperBoardOperationMode[ZegoSuperBoardOperationMode["Scroll"] = 4] = "Scroll";
  /**
   * 放缩模式，此模式下可以对 subView 内容进行放大
   */

  ZegoSuperBoardOperationMode[ZegoSuperBoardOperationMode["Zoom"] = 8] = "Zoom";
})(ZegoSuperBoardOperationMode || (ZegoSuperBoardOperationMode = {}));
/**
 * 白板插入图片的时候，插入的类型
 *
 * 详情描述：白板插入图片的时候，插入的类型，目前支持普通图片和自定义图形。
 *
 * 注意事项：支持的图片类型：png/jpg/jpeg，当type为Graphic时，支持本地图片和网络图片，图片大小限制10M，当type为Custom时，只支持网络图片，图片大小限制500KB。
 *
 */


var ZegoSuperBoardViewImageType;

(function (ZegoSuperBoardViewImageType) {
  /**
   * 普通图片图元类型
   */
  ZegoSuperBoardViewImageType[ZegoSuperBoardViewImageType["Graphic"] = 0] = "Graphic";
  /**
   * 自定义图片图元类型
   */

  ZegoSuperBoardViewImageType[ZegoSuperBoardViewImageType["Custom"] = 1] = "Custom";
})(ZegoSuperBoardViewImageType || (ZegoSuperBoardViewImageType = {}));
/**
 * 白板插入背景图片的时候，背景图片的对齐方式
 *
 */


var ZegoSuperBoardViewImageFitMode;

(function (ZegoSuperBoardViewImageFitMode) {
  /**
   * 左对齐
   */
  ZegoSuperBoardViewImageFitMode[ZegoSuperBoardViewImageFitMode["Left"] = 0] = "Left";
  /**
   * 右对齐
   */

  ZegoSuperBoardViewImageFitMode[ZegoSuperBoardViewImageFitMode["Right"] = 1] = "Right";
  /**
   * 下对齐
   */

  ZegoSuperBoardViewImageFitMode[ZegoSuperBoardViewImageFitMode["Bottom"] = 2] = "Bottom";
  /**
   * 上对齐
   */

  ZegoSuperBoardViewImageFitMode[ZegoSuperBoardViewImageFitMode["Top"] = 3] = "Top";
  /**
   * 居中对齐
   */

  ZegoSuperBoardViewImageFitMode[ZegoSuperBoardViewImageFitMode["Center"] = 4] = "Center";
})(ZegoSuperBoardViewImageFitMode || (ZegoSuperBoardViewImageFitMode = {}));
/**
 * 自定义配置
 *
 */


var ZegoSuperboardCustomConfigKey;

(function (ZegoSuperboardCustomConfigKey) {
  /**
   * 是否禁用动态PPT里图片的复制和拖拽效果
   *
   * 注意事项： value 取值：false 默认模式，不禁用。true 禁用
   *
   * 使用示例：setCustomizedConfig('disableH5ImageDrag', 'true')
   */
  ZegoSuperboardCustomConfigKey["DisableH5ImageDrag"] = "disableH5ImageDrag";
  /**
   * 动态PPT步数切页模式
   *
   * value 取值如下：
   *
   * Note: 1 默认模式，正常上一步和下一步
   *
   * Note: 2 在页中的第一步执行上一步时，不跳转，页中的最后一步执行下一步时，不跳转。
   *
   * 使用示例：setCustomizedConfig('pptStepMode', '2')
   */

  ZegoSuperboardCustomConfigKey["PptStepMode"] = "pptStepMode";
  /**
   * 设置私有化域名
   *
   * 使用示例：setCustomizedConfig('domain', 'https://www.zego.im/')
   */

  ZegoSuperboardCustomConfigKey["Domain"] = "domain";
  /**
   * 设置缩略图清晰度模式
   *
   * value 取值如下：
   *
   * Note: 1 普通，默认模式
   *
   * Note: 2 标清
   *
   * Note: 3 高清
   *
   * 使用示例：setCustomizedConfig('thumbnailMode', '1')
   *
   * 注意事项：设置此项，需要重新上传文件进行转码生效。
   */

  ZegoSuperboardCustomConfigKey["ThumbnailMode"] = "thumbnailMode";
})(ZegoSuperboardCustomConfigKey || (ZegoSuperboardCustomConfigKey = {}));
/**
 * 文件类型定义
 *
 */


var ZegoSuperBoardFileType;

(function (ZegoSuperBoardFileType) {
  /**
   * 未知类型
   */
  ZegoSuperBoardFileType[ZegoSuperBoardFileType["Unknown"] = 0] = "Unknown";
  /**
   * 没有动画的PowerPoint文档
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["PPT"] = 1] = "PPT";
  /**
   * Word文档
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["DOC"] = 2] = "DOC";
  /**
   * Excel文档
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["ELS"] = 4] = "ELS";
  /**
   * PDF文档
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["PDF"] = 8] = "PDF";
  /**
   * 图片（jpg、jpeg、png、bmp）
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["IMG"] = 16] = "IMG";
  /**
   * 文本文件
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["TXT"] = 32] = "TXT";
  /**
   * 动态PPT（pptx、ppt）
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["DynamicPPTH5"] = 512] = "DynamicPPTH5";
  /**
   * H5文件
   */

  ZegoSuperBoardFileType[ZegoSuperBoardFileType["CustomH5"] = 4096] = "CustomH5";
})(ZegoSuperBoardFileType || (ZegoSuperBoardFileType = {}));
/**
 * 文件上传的状态
 *
 */


var ZegoSuperBoardUploadFileState;

(function (ZegoSuperBoardUploadFileState) {
  /**
   * 上传中
   */
  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["UPLOADING"] = 1] = "UPLOADING";
  /**
   * 已上传
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["UPLOADED"] = 2] = "UPLOADED";
  /**
   * 排队中
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["WAITING"] = 4] = "WAITING";
  /**
   * 转换中
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["CONVERTING"] = 8] = "CONVERTING";
  /**
   * 转换成功
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["CONVERTED"] = 16] = "CONVERTED";
  /**
   * 转换失败
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["CONVERTFAIL"] = 32] = "CONVERTFAIL";
  /**
   * 取消上传
   */

  ZegoSuperBoardUploadFileState[ZegoSuperBoardUploadFileState["CONVERTCANCEL"] = 64] = "CONVERTCANCEL";
})(ZegoSuperBoardUploadFileState || (ZegoSuperBoardUploadFileState = {}));
/**
 * 渲染模式类型
 *
 */


var ZegoSuperBoardRenderType;

(function (ZegoSuperBoardRenderType) {
  /**
   * Vector 向量模式，适用于文件共享 SDK PC 端、移动端做的文档智能转换，能够更换地支持文档浏览以及更清晰的缩放。
   */
  ZegoSuperBoardRenderType[ZegoSuperBoardRenderType["Vector"] = 1] = "Vector";
  /**
   * IMG 图片模式，适用于文件共享SDK Web端、小程序使用的文档转换，按文件样式每一页都生成图片样式。
   */

  ZegoSuperBoardRenderType[ZegoSuperBoardRenderType["IMG"] = 2] = "IMG";
  /**
   * VectorAndIMG 向量和图片模式， 适用于当存在Web端、小程序、移动端、PC端，多端的并存情况，在web端、小程序将使用IMG图片模式， 而PC端、移动端将使用Vector向量模式。推荐使用该模式
   */

  ZegoSuperBoardRenderType[ZegoSuperBoardRenderType["VectorAndIMG"] = 3] = "VectorAndIMG";
  /**
   * DynamicPPTH5 动态ppt模式， 适用于文件共享SDK PC端、移动端、Web端、小程序使用的PPT文件转码格式， 会将PPT文件转成动态ppt的H5文件。
   */

  ZegoSuperBoardRenderType[ZegoSuperBoardRenderType["DynamicPPTH5"] = 6] = "DynamicPPTH5";
  /**
   * h5文件
   */

  ZegoSuperBoardRenderType[ZegoSuperBoardRenderType["CustomH5"] = 7] = "CustomH5";
})(ZegoSuperBoardRenderType || (ZegoSuperBoardRenderType = {}));
/**
 * SuperBoard错误码枚举
 *
 * 详情描述：SDK使用过程中的异常错误码。
 *
 */


var ZegoSuperBoardError;

(function (ZegoSuperBoardError) {
  /**
   * 成功
   */
  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardSuccess"] = 0] = "ZegoSuperBoardSuccess";
  /**
   * 内部错误码
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorInternal"] = 3100001] = "ZegoSuperBoardErrorInternal";
  /**
   * 参数错误，请留意控制台输出的具体信息
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorParamInvalid"] = 3100002] = "ZegoSuperBoardErrorParamInvalid";
  /**
   * 网络超时
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNetworkTimeout"] = 3100003] = "ZegoSuperBoardErrorNetworkTimeout";
  /**
   * 网络断开
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNetworkDisconnect"] = 3100004] = "ZegoSuperBoardErrorNetworkDisconnect";
  /**
   * 网络回包错误
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorResponse"] = 3100005] = "ZegoSuperBoardErrorResponse";
  /**
   * 请求过于频繁
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorRequestTooFrequent"] = 3100006] = "ZegoSuperBoardErrorRequestTooFrequent";
  /**
   * 初始化失败，请使用与白板匹配版本的 ZegoExpress-Video SDK。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorVersionMismatch"] = 3100007] = "ZegoSuperBoardErrorVersionMismatch";
  /**
   * 日志目录无法创建或写入
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorLogFolderNotAccess"] = 3140010] = "ZegoSuperBoardErrorLogFolderNotAccess";
  /**
   * 缓存目录无法创建或写入
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorCacheFolderNotAccess"] = 3140011] = "ZegoSuperBoardErrorCacheFolderNotAccess";
  /**
   * 未登录房间
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoLoginRoom"] = 3110001] = "ZegoSuperBoardErrorNoLoginRoom";
  /**
   * 用户不存在
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUserNotExist"] = 3110002] = "ZegoSuperBoardErrorUserNotExist";
  /**
   * 	白板 view 不存在
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewNotExist"] = 3120001] = "ZegoSuperBoardErrorViewNotExist";
  /**
   * 创建白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewCreateFail"] = 3120002] = "ZegoSuperBoardErrorViewCreateFail";
  /**
   * 修改白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewModifyFail"] = 3120003] = "ZegoSuperBoardErrorViewModifyFail";
  /**
   * 白板 view 名称过长
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewNameLimit"] = 3120004] = "ZegoSuperBoardErrorViewNameLimit";
  /**
   * 白板 view 的 parent 不存在
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewParentNotExist"] = 3120005] = "ZegoSuperBoardErrorViewParentNotExist";
  /**
   * 超过白板最大数量限制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorViewNumLimit"] = 3120006] = "ZegoSuperBoardErrorViewNumLimit";
  /**
   * 动画信息过长
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorAnimationInfoLimit"] = 3120007] = "ZegoSuperBoardErrorAnimationInfoLimit";
  /**
   * 图元不存在
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicNotExist"] = 3130001] = "ZegoSuperBoardErrorGraphicNotExist";
  /**
   * 创建图元错误
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicCreateFail"] = 3130002] = "ZegoSuperBoardErrorGraphicCreateFail";
  /**
   * 修改图元错误
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicModifyFail"] = 3130003] = "ZegoSuperBoardErrorGraphicModifyFail";
  /**
   * 未开启绘制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicUnableDraw"] = 3130004] = "ZegoSuperBoardErrorGraphicUnableDraw";
  /**
   * 单个图元数据大小超过限制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicDataLimit"] = 3130005] = "ZegoSuperBoardErrorGraphicDataLimit";
  /**
   * 超过图元最大数量限制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicNumLimit"] = 3130006] = "ZegoSuperBoardErrorGraphicNumLimit";
  /**
   * 文本字数超过上限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicTextLimit"] = 3130007] = "ZegoSuperBoardErrorGraphicTextLimit";
  /**
   * 图片图元大小超限制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicImageSizeLimit"] = 3130008] = "ZegoSuperBoardErrorGraphicImageSizeLimit";
  /**
   * 不支持的图片类型
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicImageTypeNotSupport"] = 3130009] = "ZegoSuperBoardErrorGraphicImageTypeNotSupport";
  /**
   * 无效图片地址，可能的原因有：指定图片时传入了无效的网络 URL。指定图片时传入了无效的本地路径。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGraphicIllegalAddress"] = 3130010] = "ZegoSuperBoardErrorGraphicIllegalAddress";
  /**
   * 光标设置偏移值超出限制
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoWhiteboardViewErrorGraphicCursorOffsetLimit"] = 3130011] = "ZegoWhiteboardViewErrorGraphicCursorOffsetLimit";
  /**
   * 初始化失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorInitFail"] = 3140001] = "ZegoSuperBoardErrorInitFail";
  /**
   * 拉取白板 view 列表失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorGetListFail"] = 3140002] = "ZegoSuperBoardErrorGetListFail";
  /**
   * 创建白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorCreateFail"] = 3140003] = "ZegoSuperBoardErrorCreateFail";
  /**
   * 销毁白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDestroyFail"] = 3140004] = "ZegoSuperBoardErrorDestroyFail";
  /**
   * attach 白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorAttachFail"] = 3140005] = "ZegoSuperBoardErrorAttachFail";
  /**
   * 清空白板 view 失败。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorClearFail"] = 3140006] = "ZegoSuperBoardErrorClearFail";
  /**
   * 滚动白板 view 失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorScrollFail"] = 3140007] = "ZegoSuperBoardErrorScrollFail";
  /**
   * 撤销操作失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUndoFail"] = 3140008] = "ZegoSuperBoardErrorUndoFail";
  /**
   * 重做操作失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorRedoFail"] = 3140009] = "ZegoSuperBoardErrorRedoFail";
  /**
   * 切换白板失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorSwitchFail"] = 3140012] = "ZegoSuperBoardErrorSwitchFail";
  /**
   * 无白板缩放权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthScale"] = 3150001] = "ZegoSuperBoardErrorNoAuthScale";
  /**
   * 无白板滚动权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthScroll"] = 3150002] = "ZegoSuperBoardErrorNoAuthScroll";
  /**
   * 无图元创建权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthCreateGraphic"] = 3150003] = "ZegoSuperBoardErrorNoAuthCreateGraphic";
  /**
   * 无图元编辑权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthUpdateGraphic"] = 3150004] = "ZegoSuperBoardErrorNoAuthUpdateGraphic";
  /**
   * 无白板移动权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthMoveGraphic"] = 3150005] = "ZegoSuperBoardErrorNoAuthMoveGraphic";
  /**
   * 无白板删除权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthDeleteGraphic"] = 3150006] = "ZegoSuperBoardErrorNoAuthDeleteGraphic";
  /**
   * 无白板清空权限
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorNoAuthClearGraphic"] = 3150007] = "ZegoSuperBoardErrorNoAuthClearGraphic";
  /**
   * 文件相关
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDocParamInvalid"] = 3100002] = "ZegoSuperBoardErrorDocParamInvalid";
  /**
   * 找不到对应的本地文件，可能的原因包括：上传时访问了错误的文件路径。本地文件已被删除
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileNotExist"] = 3111001] = "ZegoSuperBoardErrorFileNotExist";
  /**
   * 上传失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUploadFailed"] = 3111002] = "ZegoSuperBoardErrorUploadFailed";
  /**
   * 不支持渲染模式
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUnsupportRenderType"] = 3111003] = "ZegoSuperBoardErrorUnsupportRenderType";
  /**
   * 需要转码的文件被加密，可能的原因包括：Word 文件访问需要密码。Excel 文件访问需要密码。PPT 文件访问需要密码
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileEncrypt"] = 3121001] = "ZegoSuperBoardErrorFileEncrypt";
  /**
   * 文件内容过大，可能的原因包括：Excel 文件大小超过 10 MB。Excel 文件打开时间过久。文本文件大小超过 2 MB。其他文件大小超过 100 MB。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileSizeLimit"] = 3121002] = "ZegoSuperBoardErrorFileSizeLimit";
  /**
   * 文件页数过多，可能的原因包括：Excel 文件 sheet 数量超过 20。Word 文件页数超过 500。PPT 文件页数超过 500。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileSheetLimit"] = 3121003] = "ZegoSuperBoardErrorFileSheetLimit";
  /**
   * 格式转换失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertFail"] = 3121004] = "ZegoSuperBoardErrorConvertFail";
  /**
   * 格式转换被取消
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertCancel"] = 3121005] = "ZegoSuperBoardErrorConvertCancel";
  /**
   * 文件内容为空，可能的原因包括：PDF 文件内无内容。PPT 文件内没有幻灯片。Excel 文件内无内容。Word 文件内无内容。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileContentEmpty"] = 3121006] = "ZegoSuperBoardErrorFileContentEmpty";
  /**
   * 文件为只读模式，可能的原因包括：动态 PPT 文件被设置为只读模式，会导致转码失败。动态 PPT 文件中包含转码服务器不支持的字体，会导致转码失败。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileReadOnly"] = 3121007] = "ZegoSuperBoardErrorFileReadOnly";
  /**
   * 源文件中存在不支持转码的元素。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertElementNotSupported"] = 3121008] = "ZegoSuperBoardErrorConvertElementNotSupported";
  /**
   * 文件后缀名不符合 ZEGO 定义的文件规范。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertFileTypeInvalid"] = 3121009] = "ZegoSuperBoardErrorConvertFileTypeInvalid";
  /**
   * 文件损坏
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileCorruption"] = 3131018] = "ZegoSuperBoardErrorFileCorruption";
  /**
   * 文件内容不完整。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFileContentIncomplete"] = 3131019] = "ZegoSuperBoardErrorFileContentIncomplete";
  /**
   * 认证参数错误
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorAuthParamInvalid"] = 3131001] = "ZegoSuperBoardErrorAuthParamInvalid";
  /**
   * 路径权限不足，可能的原因包括：初始化时传入的 log 目录不可用。初始化时传入的 cache 目录不可用。初始化时传入的 data 目录不可用。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFilePathNotAccess"] = 3131002] = "ZegoSuperBoardErrorFilePathNotAccess";
  /**
   * 初始化失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorInitFailed"] = 3131003] = "ZegoSuperBoardErrorInitFailed";
  /**
   * 请在挂载 view 之前，确保能够读取当前容器的有效宽度和高度。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorSizeInvalid"] = 3131004] = "ZegoSuperBoardErrorSizeInvalid";
  /**
   * 本地空间不足
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorFreeSpaceLimit"] = 3131005] = "ZegoSuperBoardErrorFreeSpaceLimit";
  /**
   * 不支持文件上传功能
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUploadNotSupported"] = 3131006] = "ZegoSuperBoardErrorUploadNotSupported";
  /**
   * 正在上传相同文件
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorUploadDuplicated"] = 3131007] = "ZegoSuperBoardErrorUploadDuplicated";
  /**
   * 空域名
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorEmptyDomain"] = 3131008] = "ZegoSuperBoardErrorEmptyDomain";
  /**
   * 已初始化
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDuplicateInit"] = 3131009] = "ZegoSuperBoardErrorDuplicateInit";
  /**
   * 找不到对应的转码后文件。可能的原因包括：访问文件时传入了错误的 fileID，比如该文件上传时和当前访问时使用了不同的 AppID。对应的转码后文件已经被删除。文件的上传环境和文件的访问环境不一致。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorServerFileNotExist"] = 3131010] = "ZegoSuperBoardErrorServerFileNotExist";
  /**
   * 初始化时设置的日志目录无法创建或写入
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDocLogFolderNotAccess"] = 3131011] = "ZegoSuperBoardErrorDocLogFolderNotAccess";
  /**
   * 初始化时设置的缓存目录无法创建或写入
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDocCacheFolderNotAccess"] = 3131012] = "ZegoSuperBoardErrorDocCacheFolderNotAccess";
  /**
   * 初始化时设置的数据目录无法创建或写入
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDocDataFolderNotAccess"] = 3131013] = "ZegoSuperBoardErrorDocDataFolderNotAccess";
  /**
   * 不支持预加载该文件，请联系 ZEGO 技术支持，可能的原因包括：当前 AppID 未开通该服务。该文件暂不支持预加载。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorCacheNotSupported"] = 3131014] = "ZegoSuperBoardErrorCacheNotSupported";
  /**
   * 预加载失败，可能的原因包括：网络故障导致预加载失败。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorCacheFailed"] = 3131015] = "ZegoSuperBoardErrorCacheFailed";
  /**
   * 无效的 ZIP 文件，可能的原因包括：不是合法的 ZIP 文件。文件损坏。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorZipFileInvalid"] = 3131016] = "ZegoSuperBoardErrorZipFileInvalid";
  /**
   * 无效的 H5 文件，不符合 ZEGO 定义的 H5 文件规范，可能的原因包括：文件中没有 index.html。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorH5FileInvalid"] = 3131017] = "ZegoSuperBoardErrorH5FileInvalid";
  /**
   * H5 没有调用 getReady 会出现。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoBridgeErrorNotReady"] = 3112001] = "ZegoBridgeErrorNotReady";
  /**
   * 参数错误，H5 调用脚本接口参数不符合要求时出现。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoBridgeErrorParamInvalid"] = 3112002] = "ZegoBridgeErrorParamInvalid";
  /**
   * recordList 字节长度超过限制，H5 调用操作相关接口导致当前页的 recordList 超出最大长度限制（base64 后最大为 948 字节）。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoBridgeErrorRecordListLimit"] = 3112003] = "ZegoBridgeErrorRecordListLimit";
  /**
   * H5 内部代码执行出错。
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoBridgeErrorH5"] = 3112006] = "ZegoBridgeErrorH5";
  /**
   * 源文件中存在安全隐患，无法正常打开
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertFileUnsafe"] = 3121010] = "ZegoSuperBoardErrorConvertFileUnsafe";
  /**
   * 转码结束后中存在图片、音视频文件未正常导出
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorConvertElementNotExported"] = 3121011] = "ZegoSuperBoardErrorConvertElementNotExported";
  /**
   * 多次重试后请求失败的错误码, 请求失败
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorRequestFailure"] = 3100009] = "ZegoSuperBoardErrorRequestFailure";
  /**
   * 白板 token 过期
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorWhiteboardTokenInvalid"] = 3100010] = "ZegoSuperBoardErrorWhiteboardTokenInvalid";
  /**
   * 白板 token 过期
   */

  ZegoSuperBoardError[ZegoSuperBoardError["ZegoSuperBoardErrorDocsTokenInvalid"] = 3100011] = "ZegoSuperBoardErrorDocsTokenInvalid";
})(ZegoSuperBoardError || (ZegoSuperBoardError = {}));

/***/ }),

/***/ "./sdk/superboard/ZegoSuperBoardManager.ts":
/*!*************************************************!*\
  !*** ./sdk/superboard/ZegoSuperBoardManager.ts ***!
  \*************************************************/
/*! exports provided: ZegoSuperBoardManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardManager", function() { return ZegoSuperBoardManager; });
/* harmony import */ var _impl_ZegoSuperBoardService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./impl/ZegoSuperBoardService */ "./sdk/superboard/impl/ZegoSuperBoardService.ts");

/**
 * 接口类，SDK初始化相关，全局性的功能设置相关，创建文件或者纯白板等。
 *
 * 详情描述：接口类，SDK的初始化，房间内全局性的功能设置, 创建文件或者纯白板等。
 *
 * 业务场景：主要用于初始化SDK，设置白板的一些工具、缩放同步、画笔效果，在开启boardView模式下,获取boardView, 创建纯白板、文件等。
 *
 * 平台差异：无。
 *
 */

var ZegoSuperBoardManager =
/** @class */
function () {
  function ZegoSuperBoardManager() {
    if (ZegoSuperBoardManager.instance) return ZegoSuperBoardManager.instance;
    this.zegoSuperBoardService = new _impl_ZegoSuperBoardService__WEBPACK_IMPORTED_MODULE_0__["ZegoSuperBoardService"]();
    ZegoSuperBoardManager.instance = this;
  }
  /**
   * 获取 ZegoSuperBoardManager 实例对象
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：获取 ZegoSuperBoardManager 实例对象才能调用 ZegoSuperBoardManager 中的接口方法 。
   *
   * 调用时机：集成 ZegoSuperBoard SDK之后，初始化 ZegoSuperBoard SDK 之前。
   *
   * @return ZegoSuperBoardManager 实例对象
   */


  ZegoSuperBoardManager.getInstance = function () {
    return this.instance || (this.instance = new ZegoSuperBoardManager());
  };
  /**
   * 初始化 ZegoSuperBoard SDK
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：初始化ZegoSuperBoard SDK的方法。
   *
   * 业务场景：初始化 ZegoSuperBoard SDK。
   *
   * 调用时机：在使用SDK功能前必须首先调用该初始化方法,如果不初始化会导致功能不可用。
   *
   * 相关接口：unInit。
   *
   * @param zegoWebRTC Express-Video SDK 的实例
   * @param config SDK 初始化所需要的配置信息
   *
   * @return 初始化的结果回调
   */


  ZegoSuperBoardManager.prototype.init = function (zegoWebRTC, config) {
    return this.zegoSuperBoardService.init(zegoWebRTC, config);
  };
  /**
   * 设置配置项
   *
   * 支持版本：2.0.0 及以上。
   * 调用时机：初始化 Superboard SDK 前调用
   *
   * @param key 配置项
   * @param value 配置项的值
   *
   * @return 设置是否成功
   */


  ZegoSuperBoardManager.prototype.setCustomizedConfig = function (key, value) {
    return this.zegoSuperBoardService.setCustomizedConfig(key, value);
  };
  /**
   * 获取设置的配置项的值
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：获取设置的配置项的值。
   *
   * 调用时机：初始化 Superboard SDK，调用 setCustomizedConfig 之后。
   *
   * @param key 要获取的设置项
   *
   * @return 获取设置的配置项的值
   */


  ZegoSuperBoardManager.prototype.getCustomizedConfig = function (key) {
    return this.zegoSuperBoardService.getCustomizedConfig(key);
  };
  /**
   * 注册监听事件
   *
   * 支持版本：2.0.0及以上。
   *
   * 业务场景：可通过注册指定方法获取相关信息，例如注册切换白板通知事件，即可监听对端实时切换白板的 UniqueID。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @param event 监听事件名
   * @param callBack 回调函数
   *
   * @return 注册是否成功
   */


  ZegoSuperBoardManager.prototype.on = function (event, listener) {
    return this.zegoSuperBoardService.on(event, listener);
  };
  /**
   * 删除监听事件
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：可删除指定监听事件。
   *
   * 调用时机：初始化 ZegoSuperboard SDK 且注册了监听事件后。
   *
   * @param event 需要解除监听事件名称
   * @param listener? 回调函数
   *
   * @return 解除是否成功
   */


  ZegoSuperBoardManager.prototype.off = function (event, listener) {
    return this.zegoSuperBoardService.off(event, listener);
  };
  /**
   * 获取SDK的版本号
   *
   * 支持版本：v2.0.0 及以上。
   *
   * 详情描述：获取 SDK 版本号。
   *
   * 业务场景：
   * 1. SDK 在运行过程中，当开发者发现与预期情况不符时，可将问题与相关日志提交给 ZEGO 技术人员定位，ZEGO 技术人员可能需要 SDK 的版本的信息来辅助定位问题。
   * 2. 开发者也可以收集此信息作为 App 所使用的 SDK 的版本信息，以便统计线上各版本 App 对应的各版本 SDK。
   *
   * 调用时机：在任意时刻均可调用。
   *
   * @return SDK的版本号
   */


  ZegoSuperBoardManager.prototype.getSDKVersion = function () {
    return this.zegoSuperBoardService.getSDKVersion();
  };
  /**
   * 获取 BoardView 对象
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：开了 SuperBoardView 模式，获取该对象。
   *
   * 业务场景：在开启 SuperBoardView 模式下，使用该对象上的方法进行 A 端切换白板，B 端自动同步。
   *
   * 默认值：默认获得该对象。
   *
   * 调用时机：初始化 ZegoSuperboard SDK 之后。
   *
   * 注意事项：如果使用 enableSuperBoardView 接口并设置为 false ，则无法获取 SuperBoardView 对象。
   *
   * @return BoardView 对象
   */


  ZegoSuperBoardManager.prototype.getSuperBoardView = function () {
    return this.zegoSuperBoardService.getSuperBoardView();
  };
  /**
   * 设置是否使用 SuperBoardView
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：设置是否使用 SuperBoardView。
   *
   * 调用时机：初始化SDK之前。
   *
   * 注意事项：默认开启
   *
   * @param enable true 代表使用 SuperBoardView, false 代表不使用, 默认为 true.
   */


  ZegoSuperBoardManager.prototype.enableSuperBoardView = function (enable) {
    this.zegoSuperBoardService.enableSuperBoardView(enable);
  };
  /**
   * 获取指定的 SuperBoardSubView
   *
   * 支持版本： 2.0.0及以上
   *
   * 调用时机：初始化SDK，进房成功后，获取到SuperBoardSubView列表之后调用。
   *
   * 注意事项：仅限于不使用 SuperBoardView 的场景
   *
   * @param uniqueID ZegoSuperBoardSubView 对象的唯一标识
   */


  ZegoSuperBoardManager.prototype.getSuperBoardSubView = function (uniqueID) {
    return this.zegoSuperBoardService.getSuperBoardSubView(uniqueID);
  };
  /**
   * 添加 SuperBoardSubView 到视图
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：在未开启 BoardView 模式下，手动添加 SuperBoardSubView 到视图
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 且调用 enableSuperBoardView 接口设置为 false。
   *
   * 注意事项：添加目标视图的物理像素宽高不得小于 0。
   *
   * 相关回调：操作端添加 SuperBoardSubView 到视图，对端可通过 remoteSuperBoardSubViewAdded 监听获取。
   *
   * @param subView 要挂载 BoardSubView 对象
   * @param parentDomID 要挂载点父容器 ID
   * 注意事项：请确保在调用该方法时，父容器 ID 真实存在，宽高的物理像素不为 0
   */


  ZegoSuperBoardManager.prototype.attachSuperBoardSubView = function (subView, parentDomID) {
    return this.zegoSuperBoardService.attachSuperBoardSubView(subView, parentDomID);
  };
  /**
   * 创建纯白板
   *
   * 支持版本：2.0.0 及以上。
   *
   * 调用时机：初始化 ZegoSuperboard SDK，调用 [loginRoom] 登录房间之后，需要创建纯白板的时候。
   *
   * @param config 纯白板相关的配置参数。其中 perPageWidth，perPageHeight 必须要正整数，否则创建失败
   *
   * @return 返回该白板的 model
   */


  ZegoSuperBoardManager.prototype.createWhiteboardView = function (config) {
    return this.zegoSuperBoardService.createWhiteboardView(config);
  };
  /**
   * 创建文件白板
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：创建成功后会内部保存对应的SubView并返回它的 subViewModel 数据
   *
   * 调用时机：初始化 ZegoSuperboard SDK，调用 [loginRoom] 登录房间之后，需要创建文件的时候。
   *
   * @param config 创建文件需要的配置参数
   *
   * @return 返回该文件白板的 model
   */


  ZegoSuperBoardManager.prototype.createFileView = function (config) {
    return this.zegoSuperBoardService.createFileView(config);
  };
  /**
   * 销毁指定的 SuperBoardSubView 视图
   *
   * 支持版本：2.0.0 及以上。
   *
   * 调用时机：在调用querySuperBoardSubViewList 拉取到列表后 或者 superBoardSubViewModelList 获取到model数量大于0的时候调用。
   *
   * 注意事项：如需批量删除，请串行执行
   *
   * @param uniqueID ZegoSuperBoardSubView 对象的唯一标识
   */


  ZegoSuperBoardManager.prototype.destroySuperBoardSubView = function (uniqueID) {
    return this.zegoSuperBoardService.destroySuperBoardSubView(uniqueID);
  };
  /**
   * 向服务器查询当前存在的 SuperBoardSubView 列表
   *
   * 支持版本： 2.0.0及以上
   *
   * 详情描述：将当前房间内的白板一次性拉取下来，SDK内部会将关联了文件的白板中的文件也加载下来，这些白板和文件SDK内部会处理对应关系添加到ZegoSuperBoardSubView中，外部只需要使用ZegoSuperBoardView即可。
   *
   * 调用时机：初始化SDK，登录房间之后调用。
   *
   * @return SuperBoardSubView 列表
   */


  ZegoSuperBoardManager.prototype.querySuperBoardSubViewList = function () {
    return this.zegoSuperBoardService.querySuperBoardSubViewModelList();
  };
  /**
   * 清除文件和白板相关的缓存资源
   *
   * 支持版本： 2.0.0及以上
   *
   * 调用时机：初始化，进入房间之后，SDK 对于房间内资源的清理，需要在退出房间前主动调用
   */


  ZegoSuperBoardManager.prototype.clearCache = function () {
    return this.zegoSuperBoardService.clearCache();
  };
  /**
   * 设置本端 BoardSubView 延时渲染的时间
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：设置本端 BoardSubView 延时渲染的时间，对端所有 BoardSubView 相关内容同步都会延迟，包括其触发的 ZegoEvent 相关回调事件的执行。
   *
   * 业务场景：如果使用的音视频流是通过 CDN 转推。在房间内，接收端接受音视频流和白板文件流存在一个延迟时间，通过该方法，延迟执行白板相关的同步，即可做到“音画同步”
   *
   * 调用时机：初始化 ZegoSuperboard SDK后。
   *
   * 影响范围：对端所有 BoardSubView 相关内容同步都会延迟，包括其触发的 ZegoEvent 相关回调事件的执行。
   */


  ZegoSuperBoardManager.prototype.setDeferredRenderingTime = function (delay) {
    this.zegoSuperBoardService.setDeferredRenderingTime(delay);
  };
  /**
   * 设置是否将缩放同步给房间内其他成员
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：开启之后，可以将本端缩放的发送出去，对端是否要接受，需要对端开启接受缩放。
   *
   * 业务场景：使操作端和接受端的白板缩放同步。
   *
   * 默认值：未调用此接口设置场景时，默认的配置为 false。
   *
   * 调用时机：初始化 ZegSuperboard SDK 之后。
   *
   * 注意事项：如需实现双端缩放同步，需要同时设置 enableSyncScale 和 enableResponseScale
   *
   * 相关回调：对端发生缩放变化，接受端可通过 remoteSuperBoardScaleChanged 监听变化参数。
   */


  ZegoSuperBoardManager.prototype.enableSyncScale = function (enable) {
    this.zegoSuperBoardService.enableSyncScale(enable);
  };
  /**
   * 是否响应房间内其他成员的缩放
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：开启之后，可以响应房间内其他成员的缩放，前提是对端将缩放同步给房间内其他成员。
   *
   * 业务场景：使操作端和接受端的白板缩放同步。
   *
   * 默认值：未调用此接口设置场景时，默认的配置为 false。
   *
   * 调用时机：初始化 ZegSuperboard SDK 之后。
   *
   * 注意事项：如需实现双端缩放同步，需要同时设置 enableSyncScale 和 enableResponseScale
   *
   * 相关回调：对端发生缩放变化，接受端可通过 superBoardSubViewScaleChanged 监听变化参数。
   */


  ZegoSuperBoardManager.prototype.enableResponseScale = function (enable) {
    this.zegoSuperBoardService.enableResponseScale(enable);
  };
  /**
   * 设置是否开启笔锋
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：设置白板涂鸦是否拥有笔锋效果，设置为 true 则该涂鸦带有笔锋效果。
   *
   * 业务场景：根据涂鸦绘制过程中的速度调整笔画粗细和形状，增强书写体验。
   *
   * 默认值：false。
   *
   * 调用时机/通知时机：初始化 SDK 之后。
   *
   * @param enable 是否开启笔锋
   */


  ZegoSuperBoardManager.prototype.enableHandwriting = function (enable) {
    this.zegoSuperBoardService.enableHandwriting(enable);
  };
  /**
   * 设置是否开启本端自定义光标
   *
   * 支持版本：2.2.0及以上。
   *
   * 详情描述：设置白板涂鸦是否使用自定义光标，设置为 true 则光标可设置自定义图片。
   *
   * 是否必填：是。
   *
   * 调用时机：初始化 SDK 之后。
   *
   * @param enable 是否开启自定义光标
   */


  ZegoSuperBoardManager.prototype.enableCustomCursor = function (enable) {
    this.zegoSuperBoardService.enableCustomCursor(enable);
  };
  /**
   * 设置是否开启显示远端自定义光标
   *
   * 支持版本：2.2.0及以上。
   *
   * 是否必填：是。
   *
   * 调用时机：初始化 SDK 之后。
   *
   * @param enable 是否开启
   */


  ZegoSuperBoardManager.prototype.enableRemoteCursorVisible = function (enable) {
    this.zegoSuperBoardService.enableRemoteCursorVisible(enable);
  };
  /**
   * 设置本端自定义光标的指针图标和指针的热点(即自定义图标的实际点击位置)
   *
   * 支持版本：2.2.0及以上。
   *
   * 是否必填：是。
   *
   * 注意事项：设置指针的热点位置，建议两个小于32的无单位非负数。
   *
   * 平台差异：具体限制和浏览器差异请参考：https://developer.mozilla.org/zh-CN/docs/Web/CSS/cursor#specifications
   *
   * 调用时机：开启本端自定义光标之后。
   *
   * @param type 设置工具类型
   *
   * @param attr 自定义光标相关属性
   */


  ZegoSuperBoardManager.prototype.setCustomCursorAttribute = function (type, attr) {
    return this.zegoSuperBoardService.setCustomCursorAttribute(type, attr);
  };
  /**
   * 设置白板工具类型
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：设置工具类型，使鼠标拥有不同的功能效果。
   *
   * 默认值：默认值 1，默认工具为画笔
   *
   * 调用时机：初始化 ZegSuperBoard SDK 之后。
   *
   * @return 设置是否成功
   */


  ZegoSuperBoardManager.prototype.setToolType = function (type) {
    return this.zegoSuperBoardService.setToolType(type);
  };
  /**
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：获取正在使用的白板工具类型
   *
   * 调用时机：初始化 ZegoSuperBoard SDK之后。
   *
   * @return 如果有则返回使用中的工具类型，否则返回 null
   */


  ZegoSuperBoardManager.prototype.getToolType = function () {
    return this.zegoSuperBoardService.getToolType();
  };
  /**
   * 设置文本粗体
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：选择了文字工具类型，调用 setFontBold 设置为 true之后，在白板上新增的文字都是粗体效果。
   *
   * 默认值：false
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：仅设置文本粗体之后新增的文字拥有粗体效果，如之前白板上已存在文字不会更改为粗体效果。
   *
   * @param isBold 是否设置文字粗体
   */


  ZegoSuperBoardManager.prototype.setFontBold = function (isBold) {
    return this.zegoSuperBoardService.setFontBold(isBold);
  };
  /**
   * 获取文本是否为粗体
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为文本时，调用 isFontBold 可获得是否设置粗体效果。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 是否是粗体效果
   */


  ZegoSuperBoardManager.prototype.isFontBold = function () {
    return this.zegoSuperBoardService.isFontBold();
  };
  /**
   * 设置文本工具的文本是否斜体。
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：设置文本工具的文本是否斜体。
   *
   * 默认值： false
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：仅调用之后新增的文字生效，如之前白板上已存在文字不会更改。
   */


  ZegoSuperBoardManager.prototype.setFontItalic = function (isItalic) {
    return this.zegoSuperBoardService.setFontItalic(isItalic);
  };
  /**
   * 获取文字是否为斜体效果
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为文本时，调用 isFontItalic 可获得是否设置斜体效果。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 返回是否设置斜体
   */


  ZegoSuperBoardManager.prototype.isFontItalic = function () {
    return this.zegoSuperBoardService.isFontItalic();
  };
  /**
   * 设置文本大小
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：选择了文字工具类型，调用 setFontSize 设置，在白板上新增的文字都是设置之后的大小。
   *
   * 默认值： 24，最大值不得超过 100
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：仅调用 setFontSize 之后新增的文字生效，如之前白板上已存在文字不会更改为字体大小。
   */


  ZegoSuperBoardManager.prototype.setFontSize = function (size) {
    return this.zegoSuperBoardService.setFontSize(size);
  };
  /**
   * 获取文本大小
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为文本时，调用 getFontSize 可获得当前文本工具的字体大小。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 字体大小
   */


  ZegoSuperBoardManager.prototype.getFontSize = function () {
    return this.zegoSuperBoardService.getFontSize();
  };
  /**
   * 设置画笔粗细
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：选择了画笔工具类型，调用 setBrushSize 设置数值，在白板上新增的涂鸦粗细即设置的值。
   *
   * 默认值：6
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：仅设置画笔粗细之后新增的涂鸦拥有新的粗细效果，如之前白板上已存在涂鸦不会更改为粗细。
   */


  ZegoSuperBoardManager.prototype.setBrushSize = function (size) {
    return this.zegoSuperBoardService.setBrushSize(size);
  };
  /**
   * 获取画笔粗细
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为文本时，调用 getBrushSize 可获得画笔粗细。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 画笔粗细
   */


  ZegoSuperBoardManager.prototype.getBrushSize = function () {
    return this.zegoSuperBoardService.getBrushSize();
  };
  /**
   * 设置画笔颜色
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：选择了画笔工具类型，调用 setBrushColor 之后，白板上新增的涂鸦颜色生效。
   *
   * 默认值：#f54326
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：仅设置画笔颜色之后新增的涂鸦生效，如之前白板上已存在涂鸦不会更改为颜色。
   *
   * @param color 颜色
   */


  ZegoSuperBoardManager.prototype.setBrushColor = function (color) {
    return this.zegoSuperBoardService.setBrushColor(color);
  };
  /**
   * 获取画笔颜色
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为画笔时，调用 getBrushColor 可获得当前画笔颜色。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 画笔颜色，16 进制 RGBA
   */


  ZegoSuperBoardManager.prototype.getBrushColor = function () {
    return this.zegoSuperBoardService.getBrushColor();
  };
  /**
   * 设置白板背景色
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：选择了文字工具类型，调用 setFontBold 设置为 true之后，在白板上新增的文字都是粗体效果。
   *
   * 默认值：rgb(241, 243, 244)
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * 注意事项：1. 因白板是覆盖在文件上方，设置白板背景颜色会遮挡文件。2. 设置白板背景色之后，房间内全部白板背景色均会生效
   *
   * @param color 背景色，16 进制或者 RGBA
   *
   * @return 设置成功与否
   */


  ZegoSuperBoardManager.prototype.setWhiteboardBackgroundColor = function (color) {
    return this.zegoSuperBoardService.setWhiteboardBackgroundColor(color);
  };
  /**
   * 获取白板背景色
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：调用 getWhiteboardBackgroundColor 可获得白板背景颜色。
   *
   * 调用时机/通知时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 白板背景色，16 进制或者 RGBA
   */


  ZegoSuperBoardManager.prototype.getWhiteboardBackgroundColor = function () {
    return this.zegoSuperBoardService.getWhiteboardBackgroundColor();
  };
  /**
   * 获取是否开启笔锋效果
   *
   * 支持版本：2.0.0及以上。
   *
   * 详情描述：当前使用工具类型为画笔时，调用 isHandwritingEnabled 可获得是否开启笔锋效果。
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @return 是否开启笔锋效果
   */


  ZegoSuperBoardManager.prototype.isHandwritingEnabled = function () {
    return this.zegoSuperBoardService.isHandwritingEnabled();
  };
  /**
   * 上传文件到 ZegoDocs 服务
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：上传过程中，SDK 会根据传入的 [renderType] 对文件进行格式转换，格式转换后文件的渲染模式取决于传入的 [renderType]，可在结果回调中获取上传的进度信息。
   *
   * 业务场景：上传文件到 ZegoDocs 服务。
   *
   * 注意事项：上传阶段会有多次回调，详细请查阅 ZegoSuperBoardUploadFileState 定义
   *
   * 调用时机：初始化 ZegoSuperBoard SDK 之后。
   *
   * @param filePath 需要上传的文件绝对路径，支持 ppt、pdf、xls、jpg、jpeg、png、bmp、txt 等类型的文件，具体参考 [文件规范\|_blank](https://doc-zh.zego.im/zh/11291.html)。
   * @param renderType 上传文件转码后的渲染模式类型，建议设置为 VectorAndIMG，详见 ZegoSuperBoardRenderType。
   * @param listener 上传的进度和结果的回调。上传文件的过程中，会在 [listener] 内收到多次回调，具体请查看 ZegoSuperBoardUploadModel 的介绍
   *
   * @return 返回转码完成的文件 ID
   */


  ZegoSuperBoardManager.prototype.uploadFile = function (file, renderType, listener) {
    return this.zegoSuperBoardService.uploadFile(file, renderType, listener);
  };
  /**
   * 在上传文件的过程中取消上传动作
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：执行取消上传文件的操作必须传入对应的 fileHash。
   *
   * 业务场景：在上传文件的过程中需要中断对应文件的上传到ZegoDocs service。
   *
   * 调用时机:  调用uploadFile接口后正在上传文件过程中的时候调用。
   *
   * @param fileHash 调用 uploadFile 时返回的上传 fileHash。
   *
   * @return 操作结果
   */


  ZegoSuperBoardManager.prototype.cancelUploadFile = function (fileHash) {
    return this.zegoSuperBoardService.cancelUploadFile(fileHash);
  };
  /**
   * 上传自定义H5课件到 ZegoDocs 服务
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：上传过程中，SDK 会根据传入的 [config] 对文件进行格式转换，格式转换后文件的宽高页码以及是否带缩略图取决于传入的 [config]，可在结果回调中获取上传的进度信息。
   *
   * 业务场景：上传自定义H5课件到 ZegoDocs 服务。
   *
   * 调用时机：您需要在初始化成功后调用它。
   *
   * @param filePath 待上传的文件对象
   * @param config 自定义H5课件相关配置信息
   * @param listener 上传的进度的回调。上传文件的过程中，会在 [listener] 内收到多次回调，具体请查看 uploadH5FileCallBack 的介绍。
   *
   * @return 返回上传文件ID
   */


  ZegoSuperBoardManager.prototype.uploadH5File = function (file, config, listener) {
    return this.zegoSuperBoardService.uploadH5File(file, config, listener);
  };
  /**
   * 提前请求文件资源
   *
   * 支持版本：2.0.0 及以上。
   *
   * 详情描述：可以预先请求对应文件的资源。
   *
   * 业务场景：使用场景: 可优化在同一网络下，多台设备同时打开同一个动态 PPT 文件或 H5 文件的速度。
   *
   * 调用时机：在加载文件之前使用。
   *
   * @param fileID 需要提前请求资源的文件 ID
   *
   * @return 预先请求文件资源情况
   */


  ZegoSuperBoardManager.prototype.cacheFile = function (fileID) {
    return this.zegoSuperBoardService.cacheFile(fileID);
  };
  /**
   * 设置日志等级
   */


  ZegoSuperBoardManager.prototype.setLogConfig = function (config) {
    return this.zegoSuperBoardService.setLogConfig(config);
  };
  /**
   * 更新 Token
   */


  ZegoSuperBoardManager.prototype.renewToken = function (token) {
    return this.zegoSuperBoardService.renewToken(token);
  };

  return ZegoSuperBoardManager;
}();



/***/ }),

/***/ "./sdk/superboard/impl/ZegoSuperBoardService.ts":
/*!******************************************************!*\
  !*** ./sdk/superboard/impl/ZegoSuperBoardService.ts ***!
  \******************************************************/
/*! exports provided: ZegoSuperBoardService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardService", function() { return ZegoSuperBoardService; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.number.is-integer.js */ "./node_modules/core-js/modules/es.number.is-integer.js");
/* harmony import */ var core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.string.starts-with.js */ "./node_modules/core-js/modules/es.string.starts-with.js");
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ "./node_modules/core-js/modules/es.object.keys.js");
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.reduce.js */ "./node_modules/core-js/modules/es.array.reduce.js");
/* harmony import */ var core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _whiteboard_view_baseManager__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../whiteboard/view/baseManager */ "./sdk/whiteboard/view/baseManager.ts");
/* harmony import */ var _whiteboard_zegoWhiteboardService__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../whiteboard/zegoWhiteboardService */ "./sdk/whiteboard/zegoWhiteboardService.ts");
/* harmony import */ var _docsview_zegoDocsViewService__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../docsview/zegoDocsViewService */ "./sdk/docsview/zegoDocsViewService.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../whiteboard/view/utils/store */ "./sdk/whiteboard/view/utils/store.ts");
/* harmony import */ var _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../docsview/code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./utils */ "./sdk/superboard/impl/utils.ts");
/* harmony import */ var _ZegoSuperBoardViewImpl__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./ZegoSuperBoardViewImpl */ "./sdk/superboard/impl/ZegoSuperBoardViewImpl.ts");
/* harmony import */ var _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./ZegoSuperBoardSubViewImpl */ "./sdk/superboard/impl/ZegoSuperBoardSubViewImpl.ts");
/* harmony import */ var _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../ZegoSuperBoardEntity */ "./sdk/superboard/ZegoSuperBoardEntity.ts");























var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};













var ZegoSuperBoardService =
/** @class */
function () {
  function ZegoSuperBoardService() {
    this.subViews = [];
    this.isUseBoardView = true;
    this.isLoginAttached = false; // 标记 登录后获取白板列表 是否完成

    this.viewAddTaskList = [];
    this.viewAddTaskIndex = 0;
    this.viewAddTaskPending = false;
    this.whiteboardViewMaxLength = 50; // 白板数量上限

    this.localSwitch = false; // 提供给roomkit，不自动发送切换白板，仅本地切换

    this.logConfig = {
      logLevel: 'debug',
      remoteLogLevel: 'debug'
    };
  }

  ZegoSuperBoardService.prototype.init = function (zegoWebRTC, config) {
    // 初始化日志 SDK
    Object(_docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["initLogger"])(0, config, 'SuperBoard', {
      SUPER_VER: this.getSDKVersion()
    }); // initLogger(config, 'SuperBoard', { SUPER_VER: this.getSDKVersion() });
    // // 开启定时上传
    // Logger.startTimingUpload();

    if (!zegoWebRTC || !zegoWebRTC.getVersion || !config || !config.parentDomID || !config.appID || !config.token) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().error(['SuperBorad_Manager'], 'API.init', JSON.stringify({
        config: config,
        msg: '参数错误，初始化失败'
      }));
      Promise.reject(new Error('参数错误，初始化失败'));
    }

    if (!Number.isInteger(config.appID)) {
      return Promise.reject(new Error('appid must be positive integer number and not empty'));
    } // @ts-ignore


    var conf = __assign({
      userID: '',
      isTestEnv: false
    }, config); // const rtc = zegoWebRTC.getVersion() < '2.0' ? zegoWebRTC.zegoWebRTC : zegoWebRTC.zegoWebRTM;


    this.zegoDocsService = new _docsview_zegoDocsViewService__WEBPACK_IMPORTED_MODULE_24__["ZegoDocsViewService"](conf);
    this.zegoWhiteboard = new _whiteboard_view_baseManager__WEBPACK_IMPORTED_MODULE_22__["ZegoWhiteboardManager"](new _whiteboard_zegoWhiteboardService__WEBPACK_IMPORTED_MODULE_23__["ZegoWhiteboardService"](zegoWebRTC));
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'init', JSON.stringify(config));
    this.getSuperBoardView().setParentDomID(config.parentDomID);
    this.bindRoomStateUpdate();
    this.bindEvents();
    return Promise.resolve(true);
  };

  ZegoSuperBoardService.prototype.bindRoomStateUpdate = function () {
    var _this = this;

    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoServiceEventType"].SuperRoomDisConnected, function () {
      _this.subViews = [];
      _this.isLoginAttached = false;

      _this.getSuperBoardView().setCurrentSuperBoardSubView(null, 0);
    });
  };

  ZegoSuperBoardService.prototype.bindEvents = function () {
    var _this = this; // 监听 主动切换白板


    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].SyncSwitchMod, function (uniqueID, sheetIndex, resolve, reject) {
      _this.onSyncSwitchViewEvent(uniqueID, sheetIndex, resolve, reject);
    }); // 监听 被动切换白板

    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSwitchMod, function (uniqueID, whiteboardID) {
      if (_this.localSwitch) {
        var subView = _this.subViews.find(function (view) {
          return view.getModel().uniqueID == uniqueID;
        });

        var sheetIndex = 0;

        if (subView) {
          sheetIndex = subView.getWhiteboardViewList().findIndex(function (view) {
            return view.getID() == whiteboardID;
          });
        }

        _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewSwitched, uniqueID, sheetIndex);
        return;
      }

      if (_this.viewAddTaskList.length) {
        var fn = function fn() {
          return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  return [4
                  /*yield*/
                  , this.onRemoteSwitchViewEvent(uniqueID, whiteboardID)];

                case 1:
                  _a.sent();

                  return [2
                  /*return*/
                  ];
              }
            });
          });
        };

        _this.viewAddTaskHandle({
          name: 'RemoteSwitchMod',
          fn: fn
        });
      } else {
        _this.onRemoteSwitchViewEvent(uniqueID, whiteboardID);
      }
    }); // 监听 新增白板

    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteModAdd, function (whiteboardView) {
      if (!_this.isLoginAttached) return;

      var fn = function fn() {
        return __awaiter(_this, void 0, void 0, function () {
          return __generator(this, function (_a) {
            switch (_a.label) {
              case 0:
                return [4
                /*yield*/
                , this.onRemoteModAddEvent(whiteboardView)];

              case 1:
                _a.sent();

                return [2
                /*return*/
                ];
            }
          });
        });
      };

      _this.viewAddTaskHandle({
        name: 'RemoteModAdd',
        fn: fn
      });
    }); // 监听 删除白板

    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteModRemoved, function (uniqueID, whiteboardID) {
      var fn = function fn() {
        _this.onRemoteModRemovedEvent(uniqueID, whiteboardID);
      };

      _this.viewAddTaskHandle({
        name: 'RemoteModRemoved',
        fn: fn
      });
    });
  };

  ZegoSuperBoardService.prototype.viewAddTaskHandle = function (task) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.viewAddTaskList.push(task);
            if (this.viewAddTaskPending && this.viewAddTaskList.length) return [2
            /*return*/
            ];
            _a.label = 1;

          case 1:
            if (!(this.viewAddTaskIndex <= this.viewAddTaskList.length)) return [3
            /*break*/
            , 5];
            this.viewAddTaskPending = true;
            if (!this.viewAddTaskList[this.viewAddTaskIndex]) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.viewAddTaskList[this.viewAddTaskIndex].fn()];

          case 2:
            _a.sent();

            _a.label = 3;

          case 3:
            this.viewAddTaskIndex++;
            _a.label = 4;

          case 4:
            return [3
            /*break*/
            , 1];

          case 5:
            this.viewAddTaskList.length = 0;
            this.viewAddTaskIndex = 0;
            this.viewAddTaskPending = false;
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.setCustomizedConfig = function (key, value) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setCustomizedConfig', JSON.stringify({
      key: key,
      value: value
    }));

    if (key === 'localSwitch') {
      this.localSwitch = value == 'true' ? true : false;
      return true;
    } else {
      return this.zegoDocsService.setConfig(key, value);
    }
  };

  ZegoSuperBoardService.prototype.getCustomizedConfig = function (key) {
    var value = this.zegoDocsService.getConfig(key);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getCustomizedConfig', JSON.stringify({
      key: key,
      value: value
    }));
    return value;
  };

  ZegoSuperBoardService.prototype.on = function (event, listener) {
    // 代理 onerror, 抛出 superboard 的 error
    var listener_;

    if (event == 'error' && listener) {
      listener_ = function listener_(error) {
        var code = String(error.code); // 过滤 数据流录制回放 错误码

        if (code.startsWith('10')) return; // 代理 白板、文件 错误码

        if (!code.startsWith('31')) {
          error = Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error.code, error.msg);
        }

        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().error(['SuperBorad_Manager'], 'API.onError', JSON.stringify({
          error: error
        })); // @ts-ignore

        listener(error);
      };
    }

    return _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].on(event, listener_ || listener);
  };

  ZegoSuperBoardService.prototype.off = function (event, listener) {
    return _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].off(event, listener);
  };

  ZegoSuperBoardService.prototype.getSDKVersion = function () {
    return "2.2.3";
  };

  ZegoSuperBoardService.prototype.getSuperBoardView = function () {
    var instance = _ZegoSuperBoardViewImpl__WEBPACK_IMPORTED_MODULE_30__["ZegoSuperBoardViewImpl"].getInstance();
    instance.enableUseBoardView(this.isUseBoardView);
    return instance;
  };

  ZegoSuperBoardService.prototype.enableSuperBoardView = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableSuperBoardView', JSON.stringify({
      enable: enable
    }));
    this.isUseBoardView = enable;
  };
  /**
   * 仅限于不使用 ZegoSuperBoardView 的场景
   *
   * @param uniqueID
   */


  ZegoSuperBoardService.prototype.getSuperBoardSubView = function (uniqueID) {
    var subView = this.isUseBoardView ? null : this.subViews.find(function (view) {
      return view.getModel().uniqueID === uniqueID;
    }) || null;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getSuperBoardSubView', JSON.stringify({
      uniqueID: uniqueID,
      subView: subView === null || subView === void 0 ? void 0 : subView.getModel()
    }));
    return subView;
  };
  /**
   * 仅限于不使用 ZegoSuperBoardView 的场景
   */


  ZegoSuperBoardService.prototype.attachSuperBoardSubView = function (view, parentDomID) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'attachSuperBoardSubView', JSON.stringify({
      view: view.getModel(),
      parentDomID: parentDomID
    }));
    if (this.isUseBoardView) return Promise.reject(new Error('仅限于不使用 ZegoSuperBoardView 的场景'));
    var subView = view;
    if (!subView || !subView.getCurrentWhiteboardView()) return Promise.reject(new Error('白板不存在'));
    var whiteboardView = subView.getCurrentWhiteboardView(); // 检查白板挂载的父容器是否有变化，一个白板只允许有唯一的父容器

    var rootDomID = whiteboardView.getRootDomID();

    if (rootDomID && rootDomID !== parentDomID) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().error(['SuperBorad_Manager', 'API'], 'attachSuperBoardSubView', JSON.stringify({
        rootDomID: rootDomID,
        parentDomID: parentDomID
      }));
      return Promise.reject(new Error('不允许挂载到多个容器'));
    }

    var fileID = subView.getModel().fileID;

    if (fileID) {
      return new Promise(function (resolve, reject) {
        var _a;

        var fileName = (_a = whiteboardView.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileName;

        var docsView = _this.zegoDocsService.createView(whiteboardView.getID(), fileName);

        _this.zegoDocsService.setDocsViewParent(docsView, parentDomID);

        docsView.loadFile(fileID, '', function (res) {
          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().error(['SuperBorad_Manager', 'Inner'], 'loadFile', JSON.stringify({
            fileID: fileID,
            fileName: fileName,
            whiteboardID: whiteboardView.getID(),
            viewID: res.viewID
          }));

          _this.zegoWhiteboard.attachView(whiteboardView, res.viewID).then(resolve, reject);
        })["catch"](reject);
      });
    } else {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'attachSuperBoardSubView', JSON.stringify({
        whiteboardViewID: whiteboardView.getID(),
        parentDomID: parentDomID
      }));
      return this.zegoWhiteboard.attachView(whiteboardView, parentDomID);
    }
  };

  ZegoSuperBoardService.prototype.createWhiteboardView = function (config) {
    return __awaiter(this, void 0, void 0, function () {
      var whiteboardViews, model, whiteboardView, subView, error_1;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 5,, 6]);

            return [4
            /*yield*/
            , this.zegoWhiteboard.getViewList()];

          case 1:
            whiteboardViews = _a.sent();

            if (whiteboardViews.length >= this.whiteboardViewMaxLength) {
              return [2
              /*return*/
              , Promise.reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNumLimit))];
            }
            /**
             * prePageWidth prePageHeight 必须为正整数,否则创建白板会失败
             */


            config.perPageWidth |= 0;
            config.perPageHeight |= 0;
            config.pageCount |= 0;
            model = {
              uniqueID: Object(_utils__WEBPACK_IMPORTED_MODULE_29__["createUniqueId"])(),
              name: Object(_utils__WEBPACK_IMPORTED_MODULE_29__["sliceWhiteboardName"])(config.name),
              aspectWidth: config.perPageWidth * config.pageCount,
              aspectHeight: config.perPageHeight,
              pageCount: config.pageCount
            };
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'createWhiteboardView', JSON.stringify({
              model: model
            }));
            return [4
            /*yield*/
            , this.zegoWhiteboard.createView(model)];

          case 2:
            whiteboardView = _a.sent();
            subView = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"]([whiteboardView], [], this.localSwitch);
            if (!this.isUseBoardView) return [3
            /*break*/
            , 4];
            this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
            return [4
            /*yield*/
            , this.zegoWhiteboard.attachView(whiteboardView, this.getSuperBoardView().getParentDomID())];

          case 3:
            _a.sent(); // 发送切换白板的信令


            this.zegoWhiteboard.switchView(whiteboardView.getID());
            _a.label = 4;

          case 4:
            this.subViews.push(subView);
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'createWhiteboardView', JSON.stringify({
              subViewModel: subView.getModel()
            }));
            return [2
            /*return*/
            , subView.getModel()];

          case 5:
            error_1 = _a.sent();
            throw Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_1.code, error_1.msg);

          case 6:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.createFileView = function (config) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'createFileView', JSON.stringify({
      config: config
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var fileID, parentDomID, uniqueID, whiteboardID, docsView, fileInfo, error_2, whiteboardViews, sheetslen, onCreateView, res;

        var _this = this;

        var _a;

        return __generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              fileID = config.fileID;
              parentDomID = this.getSuperBoardView().getParentDomID();
              uniqueID = Object(_utils__WEBPACK_IMPORTED_MODULE_29__["createUniqueId"])();
              whiteboardID = Object(_utils__WEBPACK_IMPORTED_MODULE_29__["createModId"])();
              _b.label = 1;

            case 1:
              _b.trys.push([1, 3,, 4]);

              docsView = this.zegoDocsService.createView(whiteboardID);
              return [4
              /*yield*/
              , this.zegoDocsService.getDocsViewFileInfo(docsView, config.fileID)];

            case 2:
              fileInfo = _b.sent();
              return [3
              /*break*/
              , 4];

            case 3:
              error_2 = _b.sent();
              return [2
              /*return*/
              , reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_2.code, error_2.msg))];

            case 4:
              return [4
              /*yield*/
              , this.zegoWhiteboard.getViewList()];

            case 5:
              whiteboardViews = _b.sent();

              if (fileInfo.fileType === _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS) {
                sheetslen = (_a = fileInfo.sheets) === null || _a === void 0 ? void 0 : _a.length;

                if (sheetslen && whiteboardViews.length + sheetslen >= this.whiteboardViewMaxLength) {
                  reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNumLimit));
                  return [2
                  /*return*/
                  ];
                }
              } else {
                // 提前判断房间内白板数量，view 拒绝创建
                if (whiteboardViews.length >= this.whiteboardViewMaxLength) {
                  reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNumLimit));
                  return [2
                  /*return*/
                  ];
                }
              }

              onCreateView = function onCreateView(res) {
                return __awaiter(_this, void 0, void 0, function () {
                  var sheets, whiteboardViews_1, docsViews, i, _a, whiteboardView_1, docsView_1, whiteboardView, subView, whiteboardView, subView, error_3;

                  return __generator(this, function (_b) {
                    switch (_b.label) {
                      case 0:
                        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'onCreateView', JSON.stringify({
                          fileType: res.fileType,
                          sheets: res.sheets
                        }));
                        _b.label = 1;

                      case 1:
                        _b.trys.push([1, 16,, 17]);

                        if (!(res.fileType === _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS)) return [3
                        /*break*/
                        , 10];
                        sheets = res.sheets;
                        whiteboardViews_1 = [];
                        docsViews = [];
                        i = sheets.length - 1;
                        _b.label = 2;

                      case 2:
                        if (!(i > 0)) return [3
                        /*break*/
                        , 5];
                        return [4
                        /*yield*/
                        , this.createExcelRestFileView(parentDomID, uniqueID, fileID, sheets[i])];

                      case 3:
                        _a = _b.sent(), whiteboardView_1 = _a[0], docsView_1 = _a[1];
                        whiteboardViews_1.push(whiteboardView_1);
                        docsViews.push(docsView_1);
                        _b.label = 4;

                      case 4:
                        i--;
                        return [3
                        /*break*/
                        , 2];

                      case 5:
                        return [4
                        /*yield*/
                        , this.createAndAttachFileView(uniqueID, whiteboardID, res)];

                      case 6:
                        whiteboardView = _b.sent();
                        whiteboardViews_1.push(whiteboardView);
                        docsViews.push(docsView);
                        whiteboardViews_1.reverse();
                        docsViews.reverse();
                        subView = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"](whiteboardViews_1, docsViews, this.localSwitch);
                        this.subViews.push(subView);
                        if (!this.isUseBoardView) return [3
                        /*break*/
                        , 9];
                        this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
                        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'switchView', JSON.stringify({
                          whiteboardID: whiteboardID
                        }));
                        return [4
                        /*yield*/
                        , this.zegoWhiteboard.attachView(whiteboardView, res.viewID)];

                      case 7:
                        _b.sent(); // 发送切换白板的信令


                        return [4
                        /*yield*/
                        , this.zegoWhiteboard.switchView(whiteboardID)];

                      case 8:
                        // 发送切换白板的信令
                        _b.sent();

                        _b.label = 9;

                      case 9:
                        resolve(subView.getModel());
                        return [3
                        /*break*/
                        , 15];

                      case 10:
                        return [4
                        /*yield*/
                        , this.createAndAttachFileView(uniqueID, whiteboardID, res)];

                      case 11:
                        whiteboardView = _b.sent();
                        subView = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"]([whiteboardView], [docsView], this.localSwitch);
                        this.subViews.push(subView);
                        if (!this.isUseBoardView) return [3
                        /*break*/
                        , 14];
                        this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
                        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager'], 'switchView', JSON.stringify({
                          whiteboardID: whiteboardID
                        }));
                        return [4
                        /*yield*/
                        , this.zegoWhiteboard.attachView(whiteboardView, res.viewID)];

                      case 12:
                        _b.sent(); // 发送切换白板的信令


                        return [4
                        /*yield*/
                        , this.zegoWhiteboard.switchView(whiteboardID)];

                      case 13:
                        // 发送切换白板的信令
                        _b.sent();

                        _b.label = 14;

                      case 14:
                        resolve(subView.getModel());
                        _b.label = 15;

                      case 15:
                        return [3
                        /*break*/
                        , 17];

                      case 16:
                        error_3 = _b.sent();
                        error_3 = Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_3.code, error_3.msg);
                        reject(error_3);
                        return [3
                        /*break*/
                        , 17];

                      case 17:
                        return [2
                        /*return*/
                        ];
                    }
                  });
                });
              };

              if (!(fileInfo.fileType == _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeVideo || fileInfo.fileType == _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeAudio)) return [3
              /*break*/
              , 7];
              return [4
              /*yield*/
              , docsView.loadFile(fileID, '')];

            case 6:
              res = _b.sent(); // @ts-ignore

              return [2
              /*return*/
              , resolve(res.fileUrls)];

            case 7:
              if (this.isUseBoardView) {
                this.zegoDocsService.setDocsViewParent(docsView, parentDomID);
                docsView.loadFile(fileID, '', onCreateView)["catch"](function (error) {
                  reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error.code, error.msg));
                });
              } else {
                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'getDocsViewFileInfo', JSON.stringify({
                  fileID: fileID
                }));
                this.zegoDocsService.getDocsViewFileInfo(docsView, fileID).then(onCreateView)["catch"](function (error) {
                  reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error.code, error.msg));
                });
              }

              _b.label = 8;

            case 8:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.destroySuperBoardSubView = function (uniqueID) {
    var _this = this;

    var _a;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'destroySuperBoardSubView', JSON.stringify({
      uniqueID: uniqueID
    }));
    var index = this.subViews.findIndex(function (view) {
      return view.getModel().uniqueID == uniqueID;
    });

    if (index != -1) {
      // 当前显示的白板
      var curUniqueID_1 = (_a = this.getSuperBoardView().getCurrentSuperBoardSubView()) === null || _a === void 0 ? void 0 : _a.getModel().uniqueID;
      var tasks = this.subViews.splice(index, 1)[0].getWhiteboardViewList().map(function (view) {
        return __awaiter(_this, void 0, void 0, function () {
          return __generator(this, function (_a) {
            switch (_a.label) {
              case 0:
                return [4
                /*yield*/
                , this.zegoWhiteboard.destroyView(view)];

              case 1:
                _a.sent();

                return [2
                /*return*/
                ];
            }
          });
        });
      });
      return Promise.all(tasks).then(function () {
        return __awaiter(_this, void 0, void 0, function () {
          return __generator(this, function (_a) {
            switch (_a.label) {
              case 0:
                return [4
                /*yield*/
                , this.findZorderSubView(curUniqueID_1)];

              case 1:
                _a.sent();

                return [2
                /*return*/
                ];
            }
          });
        });
      })["catch"](function (error) {
        console.log(error);
      });
    } else {
      return Promise.reject(new Error('白板不存在'));
    }
  };

  ZegoSuperBoardService.prototype.findZorderSubView = function (curUniqueID) {
    return __awaiter(this, void 0, void 0, function () {
      var _a, nextUniqueID_1, whiteboardID_1, subView, sheetIndex;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            if (!this.isUseBoardView) return [2
            /*return*/
            ];
            if (!(this.subViews.length !== 0)) return [3
            /*break*/
            , 2];
            _a = this.zegoWhiteboard.getCurrentActivitedView(), nextUniqueID_1 = _a[0], whiteboardID_1 = _a[1];
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'CurrentActivitedView', JSON.stringify({
              UniqueID: nextUniqueID_1,
              whiteboardID: whiteboardID_1
            }));
            subView = this.subViews.find(function (view) {
              return view.getModel().uniqueID == nextUniqueID_1;
            }); // 删除的不是当前显示的白板，无需切换

            if (!subView || curUniqueID === nextUniqueID_1) return [2
            /*return*/
            ];
            sheetIndex = subView.getWhiteboardViewList().findIndex(function (view) {
              return view.getID() == whiteboardID_1;
            });
            return [4
            /*yield*/
            , this.onSyncSwitchViewEvent(nextUniqueID_1, sheetIndex)];

          case 1:
            _b.sent();

            return [3
            /*break*/
            , 3];

          case 2:
            this.getSuperBoardView().setCurrentSuperBoardSubView(null, 0);
            _b.label = 3;

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.querySuperBoardSubViewModelList = function () {
    var _a;

    return __awaiter(this, void 0, void 0, function () {
      var modelList_1, whiteboardViews, uniqueIDMap, uniqueIDList, _loop_1, this_1, i, _b, uniqueID, whiteboardID, subView, sheetIndex, modelList;

      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            if (this.subViews.length) {
              modelList_1 = this.subViews.map(function (view) {
                return view.getModel();
              });
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'querySuperBoardSubViewModelList', JSON.stringify({
                modelList: modelList_1
              }));
              return [2
              /*return*/
              , Promise.resolve(modelList_1)];
            }

            return [4
            /*yield*/
            , this.zegoWhiteboard.getViewList()];

          case 1:
            whiteboardViews = _c.sent();
            uniqueIDMap = {};
            whiteboardViews.forEach(function (view) {
              var whiteboardView = view;
              var uniqueID = whiteboardView.getUniqueID();

              if (uniqueIDMap[uniqueID]) {
                uniqueIDMap[uniqueID].push(whiteboardView);
              } else {
                uniqueIDMap[uniqueID] = [whiteboardView];
              }
            });
            uniqueIDList = Object.keys(uniqueIDMap);

            _loop_1 = function _loop_1(i) {
              var uniqueID_1, views, docsViews, subView_1;
              return __generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    uniqueID_1 = uniqueIDList[i];
                    if (!!this_1.subViews.find(function (view) {
                      return view.getModel().uniqueID === uniqueID_1;
                    })) return [3
                    /*break*/
                    , 2];
                    views = uniqueIDMap[uniqueID_1];
                    return [4
                    /*yield*/
                    , this_1.generateDocsViews(views, (_a = views[0].getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileID)];

                  case 1:
                    docsViews = _a.sent();
                    subView_1 = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"](views, docsViews, this_1.localSwitch);
                    this_1.subViews.push(subView_1);
                    _a.label = 2;

                  case 2:
                    return [2
                    /*return*/
                    ];
                }
              });
            };

            this_1 = this;
            i = 0;
            _c.label = 2;

          case 2:
            if (!(i < uniqueIDList.length)) return [3
            /*break*/
            , 5];
            return [5
            /*yield**/
            , _loop_1(i)];

          case 3:
            _c.sent();

            _c.label = 4;

          case 4:
            i++;
            return [3
            /*break*/
            , 2];

          case 5:
            _b = this.zegoWhiteboard.getCurrentActivitedView(), uniqueID = _b[0], whiteboardID = _b[1];
            subView = this.subViews.find(function (view) {
              return view.getModel().uniqueID == uniqueID;
            });

            if (subView) {
              sheetIndex = subView.getWhiteboardViewList().findIndex(function (view) {
                return view.getID() == whiteboardID;
              });
              this.getSuperBoardView().setCurrentSuperBoardSubView(subView, sheetIndex);
            } else {
              this.getSuperBoardView().setCurrentSuperBoardSubView(null, 0);
            }

            this.isLoginAttached = true;
            modelList = this.subViews.map(function (view) {
              return view.getModel();
            });
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'querySuperBoardSubViewModelList', JSON.stringify({
              modelList: modelList
            }));
            return [2
            /*return*/
            , Promise.resolve(modelList)];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.clearCache = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'clearCache');
    return this.zegoWhiteboard.clear();
  };

  ZegoSuperBoardService.prototype.setDeferredRenderingTime = function (delay) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'clearCasetDeferredRenderingTimeche', JSON.stringify({
      delay: delay
    }));
    this.zegoWhiteboard.setDeferredRenderingTime(delay);
  };

  ZegoSuperBoardService.prototype.enableSyncScale = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableSyncScale', JSON.stringify({
      enable: enable
    }));
    this.zegoWhiteboard.enableSyncScale(enable);
  };

  ZegoSuperBoardService.prototype.enableResponseScale = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableResponseScale', JSON.stringify({
      enable: enable
    }));
    this.zegoWhiteboard.enableResponseScale(enable);
  };

  ZegoSuperBoardService.prototype.enableHandwriting = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableHandwriting', JSON.stringify({
      enable: enable
    }));
    this.zegoWhiteboard.enableHandwriting(enable);
  };

  ZegoSuperBoardService.prototype.enableCustomCursor = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableCustomCursor', JSON.stringify({
      enable: enable
    }));
    this.zegoWhiteboard.enableCustomCursor(enable);
  };

  ZegoSuperBoardService.prototype.enableRemoteCursorVisible = function (enable) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableRemoteCursorVisible', JSON.stringify({
      enable: enable
    }));
    this.zegoWhiteboard.enableRemoteCursorVisible(enable);
  };

  ZegoSuperBoardService.prototype.setCustomCursorAttribute = function (type, attr) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'enableCustomCursor', JSON.stringify({
      type: type,
      attr: attr
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, e_1;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.zegoWhiteboard.setCustomCursorAttribute(type, attr)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              e_1 = _a.sent();
              reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(e_1.code, e_1.msg));
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.setToolType = function (type) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setToolType', JSON.stringify({
      type: type
    }));
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setToolType"])(type);

    if (val) {
      this.zegoWhiteboard.getActivitedViews().forEach(function (view) {
        return view.setToolType(type);
      });
    }

    return val;
  };

  ZegoSuperBoardService.prototype.getToolType = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["getToolType"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getToolType', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setFontBold = function (isBold) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setFontBold', JSON.stringify({
      isBold: isBold
    }));
    return Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setFontBold"])(isBold);
  };

  ZegoSuperBoardService.prototype.isFontBold = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["isFontBold"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getToolType', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setFontItalic = function (isItalic) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setFontItalic', JSON.stringify({
      isItalic: isItalic
    }));
    return Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setFontItalic"])(isItalic);
  };

  ZegoSuperBoardService.prototype.isFontItalic = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["isFontItalic"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'isFontItalic', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setFontSize = function (size) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setFontSize', JSON.stringify({
      size: size
    }));
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setFontSize"])(size);

    if (val) {
      this.zegoWhiteboard.getActivitedViews().forEach(function (view) {
        return view.setFontSize(size);
      });
    }

    return val;
  };

  ZegoSuperBoardService.prototype.getFontSize = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["getFontSize"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getFontSize', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setBrushSize = function (size) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setBrushSize', JSON.stringify({
      size: size
    }));
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setBrushSize"])(size);

    if (val) {
      this.zegoWhiteboard.getActivitedViews().forEach(function (view) {
        return view.setBrushSize(size);
      });
    }

    return val;
  };

  ZegoSuperBoardService.prototype.getBrushSize = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["getBrushSize"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getBrushSize', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setBrushColor = function (color) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setBrushColor', JSON.stringify({
      color: color
    }));
    return Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setBrushColor"])(color);
  };

  ZegoSuperBoardService.prototype.getBrushColor = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["getBrushColor"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getBrushColor', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.setWhiteboardBackgroundColor = function (color) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'setWhiteboardBackgroundColor', JSON.stringify({
      color: color
    }));
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["setBackgroundColor"])(color);

    if (val) {
      this.zegoWhiteboard.getActivitedViews().forEach(function (view) {
        return view.setBackgroundColor(color);
      });
    }

    return val;
  };

  ZegoSuperBoardService.prototype.isHandwritingEnabled = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["isHandwritingEnabled"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'isHandwritingEnabled', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.getWhiteboardBackgroundColor = function () {
    var val = Object(_whiteboard_view_utils_store__WEBPACK_IMPORTED_MODULE_27__["getBackgroundColor"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'getBackgroundColor', JSON.stringify({
      val: val
    }));
    return val;
  };

  ZegoSuperBoardService.prototype.uploadFile = function (file, renderType, listener) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'uploadFile', JSON.stringify({
      file: file,
      renderType: renderType
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_4;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.zegoDocsService.uploadFile(file, renderType, {}, listener)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_4 = _a.sent();
              reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_4.code, error_4.msg));
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.cancelUploadFile = function (fileHash) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'cancelUploadFile', JSON.stringify({
      fileHash: fileHash
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_5;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.zegoDocsService.cancelUploadFile(fileHash)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_5 = _a.sent();
              reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_5.code, error_5.msg));
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.uploadH5File = function (file, config, listener) {
    var _this = this;

    var fileObject = function fileObject() {
      return {
        lastModified: file.lastModified,
        name: file.name,
        size: file.size,
        type: file.type
      };
    };

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'uploadH5File', JSON.stringify({
      fileObject: fileObject,
      config: config
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_6;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.zegoDocsService.uploadH5File(file, config, listener)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_6 = _a.sent();
              reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_6.code, error_6.msg));
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.cacheFile = function (fileID) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'API'], 'cacheFile', JSON.stringify({
      fileID: fileID
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_7;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.zegoDocsService.cacheFile(fileID)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_7 = _a.sent();
              reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_7.code, error_7.msg));
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardService.prototype.setLogConfig = function (config) {
    if (config.logLevel) this.logConfig.logLevel = config.logLevel;
    if (config.remoteLogLevel) this.logConfig.remoteLogLevel = config.remoteLogLevel;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().setLogConfig(this.logConfig);
  };

  ZegoSuperBoardService.prototype.renewToken = function (token) {
    return this.zegoDocsService.renewToken(token);
  };

  ZegoSuperBoardService.prototype.createAndAttachFileView = function (uniqueID, whiteboardID, res) {
    return __awaiter(this, void 0, void 0, function () {
      var model, whiteboardView;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            model = {
              uniqueID: uniqueID,
              name: Object(_utils__WEBPACK_IMPORTED_MODULE_29__["sliceWhiteboardName"])(res.name || res.fileName),
              aspectWidth: res.width,
              aspectHeight: res.height,
              pageCount: res.pageCount,
              fileInfo: {
                fileID: res.fileID,
                fileName: res.fileName,
                fileType: res.fileType
              }
            };
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'createAndAttachFileView', JSON.stringify({
              model: model,
              whiteboardID: whiteboardID,
              viewID: res.viewID
            }));
            return [4
            /*yield*/
            , this.zegoWhiteboard.createView(model, whiteboardID)];

          case 1:
            whiteboardView = _a.sent();
            return [2
            /*return*/
            , whiteboardView];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.createExcelRestFileView = function (parentDomID, uniqueID, fileID, sheetName) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      var whiteboardID = Object(_utils__WEBPACK_IMPORTED_MODULE_29__["createModId"])();

      var docsView = _this.zegoDocsService.createView(whiteboardID, sheetName);

      _this.isUseBoardView && _this.zegoDocsService.setDocsViewParent(docsView, parentDomID);

      _this.zegoDocsService.getDocsViewFileInfo(docsView, fileID).then(function (res) {
        return __awaiter(_this, void 0, void 0, function () {
          var model, whiteboardView, error_8;
          return __generator(this, function (_a) {
            switch (_a.label) {
              case 0:
                model = {
                  uniqueID: uniqueID,
                  name: Object(_utils__WEBPACK_IMPORTED_MODULE_29__["sliceWhiteboardName"])(res.name),
                  aspectWidth: res.width,
                  aspectHeight: res.height,
                  pageCount: res.pageCount,
                  fileInfo: {
                    fileID: res.fileID,
                    fileName: sheetName,
                    fileType: res.fileType
                  }
                };
                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'createExcelRestFileView', JSON.stringify({
                  model: model,
                  whiteboardID: whiteboardID
                }));
                _a.label = 1;

              case 1:
                _a.trys.push([1, 3,, 4]);

                return [4
                /*yield*/
                , this.zegoWhiteboard.createView(model, whiteboardID)];

              case 2:
                whiteboardView = _a.sent();
                resolve([whiteboardView, docsView]);
                return [3
                /*break*/
                , 4];

              case 3:
                error_8 = _a.sent();
                reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_8.code, error_8.msg));
                return [3
                /*break*/
                , 4];

              case 4:
                return [2
                /*return*/
                ];
            }
          });
        });
      });
    });
  };
  /**
   * 使用 SuperBoardView 时，切换白板时，如当前是动态 ppt 或者 h5，暂停音视频
   */


  ZegoSuperBoardService.prototype.stopVideo = function () {
    var curSubView = this.getSuperBoardView().getCurrentSuperBoardSubView();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'stopVideo', JSON.stringify({
      fileID: curSubView === null || curSubView === void 0 ? void 0 : curSubView.getModel().fileID,
      fileType: curSubView === null || curSubView === void 0 ? void 0 : curSubView.getModel().fileType
    }));

    if (curSubView) {
      var shouldStopVideo = curSubView.getModel().fileID && curSubView.getModel().fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardFileType"].CustomH5 || curSubView.getModel().fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardFileType"].DynamicPPTH5;
      shouldStopVideo && curSubView.stopPlayPPTVideo(0);
    }
  };

  ZegoSuperBoardService.prototype.generateDocsViews = function (whiteboardViews, fileID) {
    var _this = this;

    if (fileID) {
      var tasks = whiteboardViews.map(function (view, i) {
        var docsView = _this.zegoDocsService.createView(view.getID(), i);

        return _this.zegoDocsService.getDocsViewFileInfo(docsView, fileID).then(function () {
          return docsView;
        });
      });
      return Promise.all(tasks);
    }

    return Promise.resolve([]);
  };

  ZegoSuperBoardService.prototype.emitRemoteSubViewAddEvent = function (uniqueID, whiteboardView, docsView) {
    var subView = this.subViews.find(function (view) {
      return view.getModel().uniqueID === uniqueID;
    });

    if (!subView) {
      subView = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"]([whiteboardView], docsView ? [docsView] : [], this.localSwitch);
      this.subViews.push(subView);
    }

    if (this.isUseBoardView) this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'RemoteSubViewAdd', JSON.stringify({
      uniqueID: uniqueID
    }));
    _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewAdd, uniqueID);
  };

  ZegoSuperBoardService.prototype.onSyncSwitchViewEvent = function (uniqueID, sheetIndex, resolve, reject) {
    return __awaiter(this, void 0, void 0, function () {
      var subView, sheets, whiteboardView_2, whiteboardID, parentDomID, fileID, docsView, error_9;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            // 没有使用 SuperBoardView 时
            if (!this.isUseBoardView) return [2
            /*return*/
            , reject && reject(false)];
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'onSyncSwitchViewEvent', JSON.stringify({
              uniqueID: uniqueID,
              sheetIndex: sheetIndex
            }));
            subView = this.subViews.find(function (view) {
              return view.getModel().uniqueID == uniqueID;
            });
            if (!subView) return [3
            /*break*/
            , 8];
            _a.label = 1;

          case 1:
            _a.trys.push([1, 6,, 7]);

            if (subView.getModel().fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardFileType"].ELS) {
              sheets = subView.getExcelSheetNameList();
              sheetIndex = typeof sheetIndex == 'number' ? sheetIndex : +sheets.findIndex(function (sheet) {
                return sheet === subView.getCurrentSheetName();
              });
            } else {
              sheetIndex = 0;
            }

            whiteboardView_2 = subView.findWhiteboardView(sheetIndex);
            whiteboardID = whiteboardView_2.getID(); // 发送切换白板的信令

            return [4
            /*yield*/
            , this.zegoWhiteboard.switchView(whiteboardID)];

          case 2:
            // 发送切换白板的信令
            _a.sent();

            parentDomID = this.getSuperBoardView().getParentDomID();
            fileID = subView.getModel().fileID;
            if (!fileID) return [3
            /*break*/
            , 3];
            docsView = this.zegoDocsService.createView(whiteboardID, sheetIndex);
            this.zegoDocsService.setDocsViewParent(docsView, parentDomID);
            this.getSuperBoardView().setCurrentSuperBoardSubView(subView, sheetIndex);
            docsView.loadFile(fileID, '', function (res) {
              return __awaiter(_this, void 0, void 0, function () {
                var error_10;
                return __generator(this, function (_a) {
                  switch (_a.label) {
                    case 0:
                      _a.trys.push([0, 2,, 3]);

                      return [4
                      /*yield*/
                      , this.zegoWhiteboard.attachView(whiteboardView_2, res.viewID)];

                    case 1:
                      _a.sent();

                      resolve && resolve(true);
                      return [3
                      /*break*/
                      , 3];

                    case 2:
                      error_10 = _a.sent();
                      reject && reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_10.code, error_10.msg));
                      return [3
                      /*break*/
                      , 3];

                    case 3:
                      return [2
                      /*return*/
                      ];
                  }
                });
              });
            });
            return [3
            /*break*/
            , 5];

          case 3:
            this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
            return [4
            /*yield*/
            , this.zegoWhiteboard.attachView(whiteboardView_2, parentDomID)];

          case 4:
            _a.sent();

            resolve && resolve(true);
            _a.label = 5;

          case 5:
            this.lastSwitchUniqueID = uniqueID;
            this.lastSwitchWhiteboardID = whiteboardID;
            return [3
            /*break*/
            , 7];

          case 6:
            error_9 = _a.sent();
            reject && reject(Object(_utils__WEBPACK_IMPORTED_MODULE_29__["transError"])(error_9.code, error_9.msg));
            return [3
            /*break*/
            , 7];

          case 7:
            return [3
            /*break*/
            , 9];

          case 8:
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().error(['SuperBorad_Manager', 'Inner'], 'onSyncSwitchViewEvent_error', '白板不存在');
            reject && reject(new Error('白板不存在'));
            _a.label = 9;

          case 9:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.onRemoteSwitchViewEvent = function (uniqueID, whiteboardID) {
    // 没有使用 SuperBoardView 时
    // 切换与上一次比较，如果相同则不处理
    if (!this.isUseBoardView || this.lastSwitchUniqueID === uniqueID && this.lastSwitchWhiteboardID === whiteboardID) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().warn(['SuperBorad_Manager', 'Inner'], 'onRemoteSwitchViewEvent', '切换白板与当前展示相同');
      return Promise.resolve();
    }

    return this.switchView(uniqueID, whiteboardID);
  };

  ZegoSuperBoardService.prototype.switchView = function (uniqueID, whiteboardID) {
    return __awaiter(this, void 0, void 0, function () {
      var subView, sheetIndex_1, whiteboardView_3, parentDomID, fileID, docsView;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'switchView', JSON.stringify({
              uniqueID: uniqueID,
              whiteboardID: whiteboardID
            }));
            this.stopVideo();
            subView = this.subViews.find(function (view) {
              return view.getModel().uniqueID == uniqueID;
            });
            if (!subView) return [3
            /*break*/
            , 4];
            sheetIndex_1 = subView.getWhiteboardViewList().findIndex(function (view) {
              return view.getID() == whiteboardID;
            });
            whiteboardView_3 = subView.findWhiteboardView(sheetIndex_1);
            parentDomID = this.getSuperBoardView().getParentDomID();
            fileID = subView.getModel().fileID;
            if (!fileID) return [3
            /*break*/
            , 1];
            docsView = this.zegoDocsService.createView(whiteboardID, sheetIndex_1);
            this.zegoDocsService.setDocsViewParent(docsView, parentDomID);
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'switchView', JSON.stringify({
              whiteboardID: whiteboardView_3.getID(),
              uniqueID: uniqueID,
              fileID: fileID,
              msg: '切换文件白板'
            }));
            docsView.loadFile(fileID, '', function (res) {
              return __awaiter(_this, void 0, void 0, function () {
                var oldSubView;
                return __generator(this, function (_a) {
                  switch (_a.label) {
                    case 0:
                      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'switchView_loadFile', JSON.stringify({
                        viewID: res.viewID
                      }));
                      this.getSuperBoardView().setCurrentSuperBoardSubView(subView, sheetIndex_1);
                      return [4
                      /*yield*/
                      , this.zegoWhiteboard.attachView(whiteboardView_3, res.viewID)];

                    case 1:
                      _a.sent();

                      oldSubView = this.getSuperBoardView().getCurrentSuperBoardSubView();

                      if ((oldSubView === null || oldSubView === void 0 ? void 0 : oldSubView.getModel().uniqueID) == uniqueID) {
                        _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewExcelSwitched, uniqueID, sheetIndex_1);
                      } else {
                        _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewSwitched, uniqueID);
                      }

                      return [2
                      /*return*/
                      ];
                  }
                });
              });
            });
            return [3
            /*break*/
            , 3];

          case 1:
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'switchView', JSON.stringify({
              whiteboardID: whiteboardView_3.getID(),
              uniqueID: uniqueID,
              msg: '切换白板'
            }));
            this.getSuperBoardView().setCurrentSuperBoardSubView(subView, 0);
            return [4
            /*yield*/
            , this.zegoWhiteboard.attachView(whiteboardView_3, parentDomID)];

          case 2:
            _a.sent();

            _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewSwitched, uniqueID);
            _a.label = 3;

          case 3:
            this.lastSwitchUniqueID = uniqueID;
            this.lastSwitchWhiteboardID = whiteboardID;
            _a.label = 4;

          case 4:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.onRemoteModAddEvent = function (whiteboardView) {
    return __awaiter(this, void 0, void 0, function () {
      var parentDomID, whiteboardID, file, uniqueID, curSubView, fileID, fileName_1, fileType, sheets, sheetIndex, docsView, hadCreateSheetCount, fileID, fileName_2, fileType, docsView, res, sheets, sheetIndex, subView, whiteboardViews, docsViews, docsView, error_11;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!this.isLoginAttached) return [2
            /*return*/
            ];
            parentDomID = this.getSuperBoardView().getParentDomID();
            whiteboardID = whiteboardView.getID();
            file = whiteboardView.getFileInfo();
            uniqueID = whiteboardView.getUniqueID();
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'onRemoteModAddEvent', JSON.stringify({
              uniqueID: uniqueID,
              whiteboardID: whiteboardID,
              file: file
            }));
            curSubView = this.subViews.find(function (subView) {
              return subView.getModel().uniqueID === uniqueID;
            });
            if (!curSubView) return [3
            /*break*/
            , 9];
            if (!file) return [3
            /*break*/
            , 7];
            fileID = file.fileID, fileName_1 = file.fileName, fileType = file.fileType;
            if (!(fileType === _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS)) return [3
            /*break*/
            , 5];
            sheets = curSubView.getExcelSheetNameList();
            sheetIndex = sheets.findIndex(function (sheet) {
              return sheet === fileName_1;
            });
            docsView = this.zegoDocsService.createView(whiteboardID, fileName_1);
            this.isUseBoardView && this.zegoDocsService.setDocsViewParent(docsView, parentDomID);
            hadCreateSheetCount = curSubView.getWhiteboardViewList().reduce(function (num, item) {
              return item ? ++num : num;
            }, 0);
            if (!(hadCreateSheetCount + 1 < sheets.length)) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , this.zegoDocsService.getDocsViewFileInfo(docsView, fileID)];

          case 1:
            _a.sent();

            curSubView.insertView(sheetIndex, whiteboardView, docsView);
            return [3
            /*break*/
            , 4];

          case 2:
            return [4
            /*yield*/
            , this.zegoDocsService.getDocsViewFileInfo(docsView, fileID)];

          case 3:
            _a.sent();

            curSubView.insertView(sheetIndex, whiteboardView, docsView);
            curSubView.switchWhiteboardView(0);
            _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewAdd, uniqueID);
            _a.label = 4;

          case 4:
            return [3
            /*break*/
            , 6];

          case 5:
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'RemoteSubViewAdd', JSON.stringify({
              uniqueID: uniqueID
            }));
            _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewAdd, uniqueID);
            _a.label = 6;

          case 6:
            return [3
            /*break*/
            , 8];

          case 7:
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'RemoteSubViewAdd', JSON.stringify({
              uniqueID: uniqueID
            }));
            _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewAdd, uniqueID);
            _a.label = 8;

          case 8:
            return [3
            /*break*/
            , 18];

          case 9:
            if (!file) return [3
            /*break*/
            , 17];
            fileID = file.fileID, fileName_2 = file.fileName, fileType = file.fileType;
            if (!(fileType === _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_28__["ZegoDocsViewFileType"].ZegoDocsViewFileTypeELS)) return [3
            /*break*/
            , 11];
            docsView = this.zegoDocsService.createView(whiteboardID, fileName_2);
            this.isUseBoardView && this.zegoDocsService.setDocsViewParent(docsView, parentDomID);
            return [4
            /*yield*/
            , this.zegoDocsService.getDocsViewFileInfo(docsView, fileID)];

          case 10:
            res = _a.sent();
            sheets = res.sheets;
            sheetIndex = sheets.findIndex(function (sheet) {
              return sheet === fileName_2;
            });
            subView = this.subViews.find(function (view) {
              return view.getModel().uniqueID === uniqueID;
            });

            if (!subView) {
              whiteboardViews = [];
              docsViews = [];
              whiteboardViews[sheetIndex] = whiteboardView;
              docsViews[sheetIndex] = docsView;
              subView = new _ZegoSuperBoardSubViewImpl__WEBPACK_IMPORTED_MODULE_31__["ZegoSuperBoardSubViewImpl"](whiteboardViews, docsViews, this.localSwitch);
              this.subViews.push(subView);
              subView.switchWhiteboardView(sheetIndex);
              this.getSuperBoardView().setCurrentSuperBoardSubView(subView, sheetIndex);
              sheets.length === 1 && this.emitRemoteSubViewAddEvent(uniqueID, whiteboardView, docsView);
            }

            return [3
            /*break*/
            , 16];

          case 11:
            docsView = this.zegoDocsService.createView(whiteboardID);
            _a.label = 12;

          case 12:
            _a.trys.push([12, 14,, 15]);

            return [4
            /*yield*/
            , this.zegoDocsService.getDocsViewFileInfo(docsView, fileID)];

          case 13:
            _a.sent();

            return [3
            /*break*/
            , 15];

          case 14:
            error_11 = _a.sent();
            console.error(error_11);
            return [3
            /*break*/
            , 15];

          case 15:
            this.emitRemoteSubViewAddEvent(uniqueID, whiteboardView, docsView);
            _a.label = 16;

          case 16:
            return [3
            /*break*/
            , 18];

          case 17:
            this.emitRemoteSubViewAddEvent(uniqueID, whiteboardView);
            _a.label = 18;

          case 18:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  ZegoSuperBoardService.prototype.onRemoteModRemovedEvent = function (uniqueID, whiteboardID) {
    var index = this.subViews.findIndex(function (subView) {
      return subView.getModel().uniqueID === uniqueID;
    });

    if (index == -1) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'RemoteSubViewRemoved', JSON.stringify({
        uniqueID: uniqueID
      }));
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewRemoved, uniqueID);
    } else {
      var subView = this.subViews[index];

      var _a = subView.getModel(),
          fileType = _a.fileType,
          fileID = _a.fileID;

      if (fileID && fileType == _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardFileType"].ELS) {
        var whiteboardViews = subView.getWhiteboardViewList();
        var sheetIndex = whiteboardViews.findIndex(function (view) {
          return view.getID() == whiteboardID;
        });
        whiteboardViews.splice(sheetIndex, 1); // 检查已经删除过的 sheet 数量，直到最后一个时通知外部

        if (whiteboardViews.reduce(function (num, item) {
          return item ? ++num : num;
        }, 0) !== 0) return;
      }

      this.subViews.splice(index, 1);

      if (this.isUseBoardView && this.subViews.length === 0) {
        this.getSuperBoardView().setCurrentSuperBoardSubView(null, 0);
      }

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_25__["Logger"].getInstance().info(['SuperBorad_Manager', 'Inner'], 'RemoteSubViewRemoved', JSON.stringify({
        uniqueID: uniqueID
      }));
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_26__["ZegoSuperBoardEventType"].RemoteSubViewRemoved, uniqueID);
    }
  };

  return ZegoSuperBoardService;
}();



/***/ }),

/***/ "./sdk/superboard/impl/ZegoSuperBoardSubViewImpl.ts":
/*!**********************************************************!*\
  !*** ./sdk/superboard/impl/ZegoSuperBoardSubViewImpl.ts ***!
  \**********************************************************/
/*! exports provided: ZegoSuperBoardSubViewImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardSubViewImpl", function() { return ZegoSuperBoardSubViewImpl; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.object.freeze.js */ "./node_modules/core-js/modules/es.object.freeze.js");
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../ZegoSuperBoardEntity */ "./sdk/superboard/ZegoSuperBoardEntity.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils */ "./sdk/superboard/impl/utils.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");












var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var ZegoSuperBoardSubViewImpl =
/** @class */
function () {
  function ZegoSuperBoardSubViewImpl(whiteboardViews, docsViews, localSwitch) {
    var _a;

    this.curDocsView = null;
    this.whiteboardViews = whiteboardViews;
    this.docsViews = docsViews; // 找出数组里第一个有效的白板的索引

    var sheetIndex = whiteboardViews.findIndex(function (view) {
      return !!view;
    });
    this.switchWhiteboardView(sheetIndex);
    var file = this.curWhiteboardView.getFileInfo();
    var uniqueID;
    var whiteboardIDList = [];

    if (localSwitch) {
      if (file && file.fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_11__["ZegoSuperBoardFileType"].ELS) {
        var sheets = (_a = this.curDocsView) === null || _a === void 0 ? void 0 : _a.getExcelSheetNameList(); // 对老版本创建Excel sheet 顺序（倒序，顺序）不确定，重新排序一次。

        sheets && sheets.findIndex(function (sheet, index) {
          whiteboardViews.map(function (item) {
            var _a;

            if (((_a = item.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileName) == sheet) {
              whiteboardIDList.push(item.getID());
            }
          });
        });
      } else {
        whiteboardIDList.push(this.curWhiteboardView.getID());
      }
    }

    uniqueID = this.curWhiteboardView.getUniqueID();

    if (!uniqueID) {
      file && file.fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_11__["ZegoSuperBoardFileType"].ELS ? uniqueID = file.fileID : uniqueID = this.curWhiteboardView.getID();
    }

    this.model = Object.freeze({
      uniqueID: uniqueID,
      name: this.curWhiteboardView.getName(),
      createTime: this.curWhiteboardView.getCreateTime(),
      fileID: file ? file.fileID : '',
      fileType: file ? file.fileType : 0,
      whiteboardIDList: localSwitch ? whiteboardIDList : whiteboardViews.map(function (item) {
        return item.getID();
      })
    });
  }

  ZegoSuperBoardSubViewImpl.prototype.getWhiteboardViewList = function () {
    return this.whiteboardViews;
  };

  ZegoSuperBoardSubViewImpl.prototype.getCurrentWhiteboardView = function () {
    return this.curWhiteboardView;
  };

  ZegoSuperBoardSubViewImpl.prototype.findWhiteboardView = function (sheetIndex) {
    return this.whiteboardViews[sheetIndex] || this.whiteboardViews[0];
  };

  ZegoSuperBoardSubViewImpl.prototype.switchWhiteboardView = function (sheetIndex) {
    this.curWhiteboardView = this.whiteboardViews[sheetIndex];
    this.curDocsView = this.docsViews[sheetIndex];
  };

  ZegoSuperBoardSubViewImpl.prototype.insertView = function (sheetIndex, whiteboardView, docsView) {
    this.whiteboardViews[sheetIndex] = whiteboardView;
    this.docsViews[sheetIndex] = docsView;
    this.model.whiteboardIDList[sheetIndex] = whiteboardView.getID();
  };
  /** 对外的 API **/


  ZegoSuperBoardSubViewImpl.prototype.getModel = function () {
    return this.model;
  };

  ZegoSuperBoardSubViewImpl.prototype.getPageCount = function () {
    var pageCount = this.curWhiteboardView.getPageCount();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getPageCount', JSON.stringify({
      pageCount: pageCount
    }));
    return pageCount;
  };

  ZegoSuperBoardSubViewImpl.prototype.getCurrentPage = function () {
    var currentPage = this.curWhiteboardView.getCurrentPage();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getCurrentPage', JSON.stringify({
      currentPage: currentPage
    }));
    return currentPage;
  };

  ZegoSuperBoardSubViewImpl.prototype.getCurrentStep = function () {
    var currentStep = this.curDocsView ? this.curDocsView.getCurrentStep() : 1;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getCurrentStep', JSON.stringify({
      currentStep: currentStep
    }));
    return currentStep;
  };

  ZegoSuperBoardSubViewImpl.prototype.getVisibleSize = function () {
    var visibleSize = this.curWhiteboardView.getVisibleSize();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getVisibleSize', JSON.stringify({
      visibleSize: visibleSize
    }));
    return visibleSize;
  };

  ZegoSuperBoardSubViewImpl.prototype.flipToPage = function (page) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.flipToPage', JSON.stringify({
      page: page
    }));
    var percent = (page - 1) / this.getPageCount();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'flipToPage', JSON.stringify({
      percent: percent
    }));

    if (this.model.fileID) {
      return this.curWhiteboardView.scroll(0, percent);
    } else {
      return this.curWhiteboardView.scroll(percent, 0);
    }
  };

  ZegoSuperBoardSubViewImpl.prototype.flipToPrePage = function () {
    var page = this.getCurrentPage();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.flipToPrePage', JSON.stringify({
      page: page - 1
    }));

    if (page > 1) {
      return this.flipToPage(page - 1);
    } else {
      return false;
    }
  };

  ZegoSuperBoardSubViewImpl.prototype.flipToNextPage = function () {
    var page = this.getCurrentPage();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.flipToNextPage', JSON.stringify({
      page: page + 1
    }));

    if (page < this.getPageCount()) {
      return this.flipToPage(page + 1);
    } else {
      return false;
    }
  };

  ZegoSuperBoardSubViewImpl.prototype.preStep = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.preStep');
    this.curDocsView && this.curDocsView.previousStep();
  };

  ZegoSuperBoardSubViewImpl.prototype.nextStep = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.nextStep');
    this.curDocsView && this.curDocsView.nextStep();
  };

  ZegoSuperBoardSubViewImpl.prototype.addText = function (text, positionX, positionY) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.addText', JSON.stringify({
      text: text,
      positionX: positionX,
      positionY: positionY
    }));
    this.curWhiteboardView.addText(text, positionX, positionY);
  };

  ZegoSuperBoardSubViewImpl.prototype.addImage = function (type, positionX, positionY, address, listener) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.addImage', JSON.stringify({
      type: type,
      positionX: positionX,
      positionY: positionY,
      address: address
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_1, transErr;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.curWhiteboardView.addImage(type, positionX, positionY, address, listener)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_1 = _a.sent();
              transErr = Object(_utils__WEBPACK_IMPORTED_MODULE_12__["transError"])(error_1.code, error_1.msg);
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().error(['SuperBorad_SubView'], 'API.addImage', JSON.stringify({
                transErr: transErr
              }));
              reject(transErr);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardSubViewImpl.prototype.setBackgroundImage = function (address, mode, listener) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.setBackgroundImage', JSON.stringify({
      address: address,
      mode: mode
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, error_2, transErr;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              _a.trys.push([0, 2,, 3]);

              return [4
              /*yield*/
              , this.curWhiteboardView.setBackgroundImage(address, mode, listener)];

            case 1:
              res = _a.sent();
              resolve(res);
              return [3
              /*break*/
              , 3];

            case 2:
              error_2 = _a.sent();
              transErr = Object(_utils__WEBPACK_IMPORTED_MODULE_12__["transError"])(error_2.code, error_2.msg);
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().error(['SuperBorad_SubView'], 'API.setBackgroundImage', JSON.stringify(transErr));
              reject(transErr);
              return [3
              /*break*/
              , 3];

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  };

  ZegoSuperBoardSubViewImpl.prototype.clearBackgroundImage = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.clearBackgroundImage');
    this.curWhiteboardView.clearBackgroundImage();
  };

  ZegoSuperBoardSubViewImpl.prototype.clearAllPage = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.clearAllPage');
    return this.curWhiteboardView.clear();
  };

  ZegoSuperBoardSubViewImpl.prototype.clearCurrentPage = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.clearCurrentPage');
    this.curWhiteboardView.clearCurrentPage();
  };

  ZegoSuperBoardSubViewImpl.prototype.clearSelected = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.clearSelected');
    this.curWhiteboardView.deleteSelectedGraphics();
  };

  ZegoSuperBoardSubViewImpl.prototype.undo = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.undo');
    this.curWhiteboardView.undo();
  };

  ZegoSuperBoardSubViewImpl.prototype.redo = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.redo');
    this.curWhiteboardView.redo();
  };

  ZegoSuperBoardSubViewImpl.prototype.setScaleFactor = function (scaleFactor, scaleOffsetX, scaleOffsetY) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.setScaleFactor', JSON.stringify({
      scaleFactor: scaleFactor,
      scaleOffsetX: scaleOffsetX,
      scaleOffsetY: scaleOffsetY
    }));
    this.curWhiteboardView.setScaleFactor(scaleFactor, scaleOffsetX, scaleOffsetY);
  };

  ZegoSuperBoardSubViewImpl.prototype.getScaleFactor = function () {
    var scaleFactor = this.curWhiteboardView.getScaleFactor();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getScaleFactor', JSON.stringify({
      scaleFactor: scaleFactor
    }));
    return scaleFactor;
  };

  ZegoSuperBoardSubViewImpl.prototype.setOperationMode = function (mode) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.setOperationMode', JSON.stringify({
      mode: mode
    }));
    this.curWhiteboardView.setWhiteboardOperationMode(mode);
  };

  ZegoSuperBoardSubViewImpl.prototype.snapshot = function (customData) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.snapshot', JSON.stringify({
      customData: customData
    }));
    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var res, transErr;
        return __generator(this, function (_a) {
          try {
            res = this.curWhiteboardView.snapshot(customData);
            resolve(res);
          } catch (error) {
            transErr = Object(_utils__WEBPACK_IMPORTED_MODULE_12__["transError"])(error.code, error.msg);
            reject(transErr);
          }

          return [2
          /*return*/
          ];
        });
      });
    });
  };

  ZegoSuperBoardSubViewImpl.prototype.reloadView = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.reloadView');
    this.curWhiteboardView.reloadView();
  };

  ZegoSuperBoardSubViewImpl.prototype.getCurrentSheetName = function () {
    var currentSheetName = this.model.fileID && this.model.fileType === _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_11__["ZegoSuperBoardFileType"].ELS ? this.curWhiteboardView.getFileInfo().fileName : '';
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getCurrentSheetName', JSON.stringify({
      currentSheetName: currentSheetName
    }));
    return currentSheetName;
  };

  ZegoSuperBoardSubViewImpl.prototype.getExcelSheetNameList = function () {
    var list = this.curDocsView ? this.curDocsView.getExcelSheetNameList() : [];
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getExcelSheetNameList', JSON.stringify({
      list: list
    }));
    return list;
  };

  ZegoSuperBoardSubViewImpl.prototype.getThumbnailUrlList = function () {
    var list = this.curDocsView ? this.curDocsView.getThumbnailUrlList() : [];
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getThumbnailUrlList', JSON.stringify({
      list: list
    }));
    return list;
  };

  ZegoSuperBoardSubViewImpl.prototype.getPPTNotes = function (page) {
    var notes = this.curDocsView ? this.curDocsView.getPPTNotes(page) : '';
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.getPPTNotes', JSON.stringify({
      page: page,
      notes: notes
    }));
    return notes;
  };

  ZegoSuperBoardSubViewImpl.prototype.stopPlayPPTVideo = function (page) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_13__["Logger"].getInstance().info(['SuperBorad_SubView'], 'API.stopPlayPPTVideo', JSON.stringify({
      page: page
    }));
    this.curDocsView && this.curDocsView.stopPlay(page);
  };

  return ZegoSuperBoardSubViewImpl;
}();



/***/ }),

/***/ "./sdk/superboard/impl/ZegoSuperBoardViewImpl.ts":
/*!*******************************************************!*\
  !*** ./sdk/superboard/impl/ZegoSuperBoardViewImpl.ts ***!
  \*******************************************************/
/*! exports provided: ZegoSuperBoardViewImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardViewImpl", function() { return ZegoSuperBoardViewImpl; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");





var ZegoSuperBoardViewImpl =
/** @class */
function () {
  function ZegoSuperBoardViewImpl() {
    this.parentDomID = '';
    this.isUseBoardView = true;
    this.curSubView = null;
    if (ZegoSuperBoardViewImpl.instance) return ZegoSuperBoardViewImpl.instance;
    ZegoSuperBoardViewImpl.instance = this;
  }

  ZegoSuperBoardViewImpl.getInstance = function () {
    return this.instance || (this.instance = new ZegoSuperBoardViewImpl());
  };

  ZegoSuperBoardViewImpl.prototype.setParentDomID = function (parentDomID) {
    this.parentDomID = parentDomID;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().info(['SuperBorad_BoardView'], 'setParentDomID', JSON.stringify({
      parentDomID: parentDomID
    }));
    return this;
  };

  ZegoSuperBoardViewImpl.prototype.getParentDomID = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().info(['SuperBorad_BoardView'], 'getParentDomID', JSON.stringify({
      parentDomID: this.parentDomID
    }));
    return this.parentDomID;
  };

  ZegoSuperBoardViewImpl.prototype.enableUseBoardView = function (enable) {
    this.isUseBoardView = enable;
  };

  ZegoSuperBoardViewImpl.prototype.setCurrentSuperBoardSubView = function (subView, sheetIndex) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().info(['SuperBorad_BoardView'], 'setCurrentSuperBoardSubView', JSON.stringify({
      subView: subView === null || subView === void 0 ? void 0 : subView.getModel(),
      sheetIndex: sheetIndex
    }));

    if (this.isUseBoardView) {
      this.curSubView = subView;
      this.curSubView && this.curSubView.switchWhiteboardView(sheetIndex);
    } else {
      this.curSubView = null;
    }

    return this;
  };
  /** 对外的 API **/


  ZegoSuperBoardViewImpl.prototype.getCurrentSuperBoardSubView = function () {
    var _a;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().info(['SuperBorad_BoardView'], 'API.getCurrentSuperBoardSubView', JSON.stringify({
      curSubView: (_a = this.curSubView) === null || _a === void 0 ? void 0 : _a.getModel()
    }));
    return this.curSubView;
  };

  ZegoSuperBoardViewImpl.prototype.switchSuperBoardSubView = function (uniqueID, sheetIndex) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().info(['SuperBorad_BoardView'], 'API.switchSuperBoardSubView', JSON.stringify({
      uniqueID: uniqueID,
      sheetIndex: sheetIndex
    }));
    return new Promise(function (resolve, reject) {
      _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_2__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardEventType"].SyncSwitchMod, uniqueID, sheetIndex, resolve, reject);
    });
  };

  return ZegoSuperBoardViewImpl;
}();



/***/ }),

/***/ "./sdk/superboard/impl/error.ts":
/*!**************************************!*\
  !*** ./sdk/superboard/impl/error.ts ***!
  \**************************************/
/*! exports provided: ErrorCodeData, oldCodeData, transSuperCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorCodeData", function() { return ErrorCodeData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "oldCodeData", function() { return oldCodeData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transSuperCode", function() { return transSuperCode; });
/* harmony import */ var _docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../docsview/code/zh/ZegoDocsViewEntity */ "./sdk/docsview/code/zh/ZegoDocsViewEntity.ts");
/* harmony import */ var _whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../whiteboard/code/zh/ZegoExpressEntity */ "./sdk/whiteboard/code/zh/ZegoExpressEntity.ts");
/* harmony import */ var _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ZegoSuperBoardEntity */ "./sdk/superboard/ZegoSuperBoardEntity.ts");
var _a, _b;



 // 接口调用错误码

var ErrorCodeData = (_a = {},
/**
 * 公共错误码
 */
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInternal] = '内部错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorParamInvalid] = '参数错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkTimeout] = '网络超时', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkDisconnect] = '网络断开', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorResponse] = '网络回包错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRequestTooFrequent] = '请求过于频繁', // 房间相关错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoLoginRoom] = '未登录房间', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUserNotExist] = '用户不存在', // 白板 view 相关错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNotExist] = '白板view不存在', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewCreateFail] = '创建白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewModifyFail] = '修改白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNameLimit] = '白板view名称或者content过长', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewParentNotExist] = '白板view的parent不存在', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNumLimit] = '超过白板最大数量限制', // 图元相关错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicNotExist] = '图元不存在', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicCreateFail] = '创建图元错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicModifyFail] = '修改图元错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicUnableDraw] = '未开启绘制', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicDataLimit] = '图元数据大小超过限制', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicNumLimit] = '超过图元最大数量限制', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicTextLimit] = '文本字数超过上限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicImageSizeLimit] = '图片图元大小超限制', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicImageTypeNotSupport] = '不支持的图片类型', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicIllegalAddress] = '无效图片地址', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit] = '光标设置偏移值超出限制', // 接口调用错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInitFail] = '初始化失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGetListFail] = '拉取白板view列表失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCreateFail] = '创建白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDestroyFail] = '销毁白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAttachFail] = 'attach白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorClearFail] = '清空白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorScrollFail] = '滚动白板view失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUndoFail] = '撤销操作失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRedoFail] = '重做操作失败', // 权限错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthScale] = '无白板缩放权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthScroll] = '无白板滚动权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthCreateGraphic] = '无图元创建权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthUpdateGraphic] = '无图元编辑权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthMoveGraphic] = '无图元移动权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthDeleteGraphic] = '无图元删除权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthClearGraphic] = '无白板清空权限', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAnimationInfoLimit] = '动画信息过长', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileNotExist] = '找不到对应的本地文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadFailed] = '上传失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUnsupportRenderType] = '不支持渲染模式', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileEncrypt] = '需要转码的文件被加密', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileSizeLimit] = '文件内容过大', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileSheetLimit] = '文件页数过多', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFail] = '格式转换失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertCancel] = '格式转换被取消', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileContentEmpty] = '文件内容为空', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileReadOnly] = '文件为只读模式', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertElementNotSupported] = '	源文件中存在不支持转码的元素', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFileTypeInvalid] = '文件后缀名不符合 ZEGO 定义的文件规范', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileCorruption] = '文件损坏', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileContentIncomplete] = '文件内容不完整', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAuthParamInvalid] = '认证参数错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInitFailed] = '初始化失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFreeSpaceLimit] = '本地空间不足', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadNotSupported] = '不支持文件上传功能', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadDuplicated] = '正在上传相同文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorEmptyDomain] = '空域名', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorSizeInvalid] = '无法获取当前 view 宽高', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorServerFileNotExist] = '找不到对应的转码后文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCacheNotSupported] = '不支持预加载该文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCacheFailed] = '预加载失败', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorZipFileInvalid] = '无效的 ZIP 文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorH5FileInvalid] = '无效的 H5 文件', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFileUnsafe] = '源文件中存在安全隐患，无法正常打开', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertElementNotExported] = '转码结束后存在图片、音视频文件未正常导出', // 文件 View 相关错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInternal] = '内部错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkTimeout] = '网络超时', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDuplicateInit] = '已初始化', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRequestFailure] = '请求失败', //H5 桥接层错误码
_a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoBridgeErrorNotReady] = 'H5 没有调用 getReady', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoBridgeErrorParamInvalid] = '参数错误', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoBridgeErrorRecordListLimit] = 'recordList 字节长度超过限制', _a[_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoBridgeErrorH5] = 'H5 内部代码执行出错', _a);
var oldCodeData = (_b = {}, // 白板sdk错误码
_b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInternal, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorParamInvalid, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkTimeout, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkDisconnect] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkDisconnect, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorResponse, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorRequestTooMany] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRequestTooFrequent, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorVersionMismatch] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorVersionMismatch, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoLoginRoom, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUserNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUserNotExist, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNotExist, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewCreateFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewCreateFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewModifyFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewModifyFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNameLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNameLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewParentNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewParentNotExist, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNumLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorViewNumLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAnimationInfoLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAnimationInfoLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicNotExist, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCreateFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicCreateFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicModifyFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicUnableDraw] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicUnableDraw, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicDataLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNumLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicNumLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicTextLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicTextLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicImageSizeLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicImageTypeNotSupport, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInitFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInitFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGetListFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGetListFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorCreateFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCreateFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorDestroyFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDestroyFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAttachFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAttachFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorClearFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorClearFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorScrollFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorScrollFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUndoFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUndoFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorRedoFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRedoFail, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScale] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthScale, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthScroll, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthCreateGraphic, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthUpdateGraphic, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthMoveGraphic] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthMoveGraphic, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthDeleteGraphic] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthDeleteGraphic, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthClearGraphic] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNoAuthClearGraphic, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorGraphicIllegalAddress, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorLogFolderNotAccess] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorLogFolderNotAccess, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorCacheFolderNotAccess] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCacheFolderNotAccess, _b[_whiteboard_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_1__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorTokenInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorWhiteboardTokenInvalid, // 文件sdk错误码
_b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInternal] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInternal, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorNetworkTimeout] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorNetworkTimeout, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorParamInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDocParamInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileNotExist, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadFailed] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadFailed, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUnsupportRenderType] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUnsupportRenderType, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileEncrypt] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileEncrypt, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSizeLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileSizeLimit, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileSheetLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileSheetLimit, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFail] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFail, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertCancel] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertCancel, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentEmpty] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileContentEmpty, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileReadOnly] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileReadOnly, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotSupported] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertElementNotSupported, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileTypeInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFileTypeInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileCorruption] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileCorruption, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFileContentIncomplete] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFileContentIncomplete, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorAuthParamInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorAuthParamInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFilePathNotAccess] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFilePathNotAccess, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorInitFailed] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorInitFailed, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorSizeInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorSizeInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorFreeSpaceLimit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorFreeSpaceLimit, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadNotSupported] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadNotSupported, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorUploadDuplicated] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorUploadDuplicated, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorEmptyDomain] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorEmptyDomain, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorServerFileNotExist] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorServerFileNotExist, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheNotSupported] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCacheNotSupported, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorCacheFailed] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorCacheFailed, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorZipFileInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorZipFileInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorH5FileInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorH5FileInvalid, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorHaveInit] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDuplicateInit, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertFileUnsafe] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertFileUnsafe, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorConvertElementNotExported] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorConvertElementNotExported, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorRequestFailure] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorRequestFailure, _b[_docsview_code_zh_ZegoDocsViewEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoDocsViewError"].ZegoDocsViewErrorTokenInvalid] = _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_2__["ZegoSuperBoardError"].ZegoSuperBoardErrorDocsTokenInvalid,
/**
 * H5 桥接层错误码
 */
_b[10001] = 'H5 没有调用 getReady', _b[10002] = '参数错误', _b[10003] = 'recordList 字节长度超过限制', _b[10006] = 'H5 内部代码执行出错', _b);
var transSuperCode = function transSuperCode(code) {
  return oldCodeData[code] || code;
};

/***/ }),

/***/ "./sdk/superboard/impl/utils.ts":
/*!**************************************!*\
  !*** ./sdk/superboard/impl/utils.ts ***!
  \**************************************/
/*! exports provided: createUniqueId, createModId, transError, emitError, sliceWhiteboardName */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUniqueId", function() { return createUniqueId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createModId", function() { return createModId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transError", function() { return transError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "emitError", function() { return emitError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sliceWhiteboardName", function() { return sliceWhiteboardName; });
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! md5 */ "./node_modules/md5/md5.js");
/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _whiteboard_view_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../whiteboard/view/utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../whiteboard/view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ZegoSuperBoardEntity */ "./sdk/superboard/ZegoSuperBoardEntity.ts");
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./error */ "./sdk/superboard/impl/error.ts");






var createUniqueId = function createUniqueId() {
  return md5__WEBPACK_IMPORTED_MODULE_1___default()("webSuperboard" + (new Date().getTime() + Math.round(Math.random() * 1000)));
};
var createModId = function createModId() {
  return Object(_whiteboard_view_utils__WEBPACK_IMPORTED_MODULE_2__["createGraphicId"])();
};
var transError = function transError(aceptCode, message) {
  /**
   * 统一将白板，文件错误码 按照下列规则加一层转换为 Superboard Error code
   * 错误码规则：aabbccc
   * aa: 项目ID  superboard 为 31
   * bb: 错误码分类  白板错误码为 b0   文件错误码为 b1  h5桥接层错误码为 12
   * ccc: 错误码值
   * */
  var code;
  code = Object(_error__WEBPACK_IMPORTED_MODULE_5__["transSuperCode"])(aceptCode);
  message = _error__WEBPACK_IMPORTED_MODULE_5__["ErrorCodeData"][code] || message || _error__WEBPACK_IMPORTED_MODULE_5__["ErrorCodeData"][_ZegoSuperBoardEntity__WEBPACK_IMPORTED_MODULE_4__["ZegoSuperBoardError"].ZegoSuperBoardErrorInternal];
  return {
    code: code,
    message: message
  };
};
var emitError = function emitError(code, msg) {
  var error = transError(code, msg);
  _whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_3__["default"].emit(_whiteboard_view_services_event__WEBPACK_IMPORTED_MODULE_3__["ZegoEventType"].Error, error);
  return error;
};

function getBytesLength(name) {
  var size;

  try {
    size = new Blob([name]).size;
  } catch (error) {
    size = unescape(encodeURIComponent(name)).length;
  }

  return size;
}
/**
 * 白板名称超过128字节时，创建白板会失败
 * @note 一个中文占3字节，英文、字母等占1字节
 */


var sliceWhiteboardName = function sliceWhiteboardName(name) {
  var size = getBytesLength(name);
  if (size <= 128) return name;
  var mid = name.length / 2 | 0;

  for (var i = mid, j = mid + 1; i > 0 && j < name.length;) {
    var str = name.substr(0, i) + "..." + name.substr(j);
    var size_1 = getBytesLength(str);
    if (size_1 <= 128) return str;
    i--;
    j++;
  }

  return name;
};

/***/ }),

/***/ "./sdk/whiteboard/code/zh/ZegoExpressEntity.ts":
/*!*****************************************************!*\
  !*** ./sdk/whiteboard/code/zh/ZegoExpressEntity.ts ***!
  \*****************************************************/
/*! exports provided: ZegoWhiteboardError, ZegoWhiteboardTool, ZegoWhiteboardOperationMode, ZegoWhiteboardViewImageType, ZegoWhiteboardViewImageFitMode, ZegoWhiteboardViewScrollDirection, ZegoWhiteboardCursorType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardError", function() { return ZegoWhiteboardError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardTool", function() { return ZegoWhiteboardTool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardOperationMode", function() { return ZegoWhiteboardOperationMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewImageType", function() { return ZegoWhiteboardViewImageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewImageFitMode", function() { return ZegoWhiteboardViewImageFitMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewScrollDirection", function() { return ZegoWhiteboardViewScrollDirection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardCursorType", function() { return ZegoWhiteboardCursorType; });
/**
 * ZegoWhiteboardError 错误码
 *
 */
var ZegoWhiteboardError;

(function (ZegoWhiteboardError) {
  /**
   * 执行成功
   */
  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewSuccess"] = 0] = "ZegoWhiteboardViewSuccess";
  /**
   * 内部错误
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorInternal"] = 3000001] = "ZegoWhiteboardViewErrorInternal";
  /**
   * 参数错误
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorParamInvalid"] = 3000002] = "ZegoWhiteboardViewErrorParamInvalid";
  /**
   * 网络超时
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNetworkTimeout"] = 3000003] = "ZegoWhiteboardViewErrorNetworkTimeout";
  /**
   * 网络断开
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNetworkDisconnect"] = 3000004] = "ZegoWhiteboardViewErrorNetworkDisconnect";
  /**
   * 网络回包错误
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorInvalidRsp"] = 3000005] = "ZegoWhiteboardViewErrorInvalidRsp";
  /**
   * 请求过于频繁
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorRequestTooMany"] = 3000006] = "ZegoWhiteboardViewErrorRequestTooMany";
  /**
   * 白板和 liveroom 版本不匹配
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorVersionMismatch"] = 3000007] = "ZegoWhiteboardViewErrorVersionMismatch";
  /**
   * token 过期
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorTokenInvalid"] = 3000009] = "ZegoWhiteboardViewErrorTokenInvalid";
  /**
   * 未登录房间
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoLoginRoom"] = 3010001] = "ZegoWhiteboardViewErrorNoLoginRoom";
  /**
   * 用户不存在
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorUserNotExist"] = 3010002] = "ZegoWhiteboardViewErrorUserNotExist";
  /**
   * 白板 view 不存在
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewNotExist"] = 3020001] = "ZegoWhiteboardViewErrorViewNotExist";
  /**
   * 创建白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewCreateFail"] = 3020002] = "ZegoWhiteboardViewErrorViewCreateFail";
  /**
   * 修改白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewModifyFail"] = 3020003] = "ZegoWhiteboardViewErrorViewModifyFail";
  /**
   * 白板 view 名称或者 content 过长
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewNameLimit"] = 3020004] = "ZegoWhiteboardViewErrorViewNameLimit";
  /**
   * 白板 view 的 parent 不存在
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewParentNotExist"] = 3020005] = "ZegoWhiteboardViewErrorViewParentNotExist";
  /**
   * 超过白板最大数量限制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorViewNumLimit"] = 3020006] = "ZegoWhiteboardViewErrorViewNumLimit";
  /**
   * 动画信息过长
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorAnimationInfoLimit"] = 3020007] = "ZegoWhiteboardViewErrorAnimationInfoLimit";
  /**
   * 图元不存在
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicNotExist"] = 3030001] = "ZegoWhiteboardViewErrorGraphicNotExist";
  /**
   * 创建图元错误
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicCreateFail"] = 3030002] = "ZegoWhiteboardViewErrorGraphicCreateFail";
  /**
   * 修改图元错误
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicModifyFail"] = 3030003] = "ZegoWhiteboardViewErrorGraphicModifyFail";
  /**
   * 未开启绘制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicUnableDraw"] = 3030004] = "ZegoWhiteboardViewErrorGraphicUnableDraw";
  /**
   * 单个图元数据大小超过限制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicDataLimit"] = 3030005] = "ZegoWhiteboardViewErrorGraphicDataLimit";
  /**
   * 超过图元最大数量限制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicNumLimit"] = 3030006] = "ZegoWhiteboardViewErrorGraphicNumLimit";
  /**
   * 文本字数超过上限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicTextLimit"] = 3030007] = "ZegoWhiteboardViewErrorGraphicTextLimit";
  /**
   * 图片图元大小超限制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicImageSizeLimit"] = 3030008] = "ZegoWhiteboardViewErrorGraphicImageSizeLimit";
  /**
   * 不支持的图片类型
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicImageTypeNotSupport"] = 3030009] = "ZegoWhiteboardViewErrorGraphicImageTypeNotSupport";
  /**
   * 非法图片 url
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicIllegalUrl"] = 3030010] = "ZegoWhiteboardViewErrorGraphicIllegalUrl";
  /**
   * 光标设置偏移值超出限制
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGraphicCursorOffsetLimit"] = 3030011] = "ZegoWhiteboardViewErrorGraphicCursorOffsetLimit";
  /**
   * 初始化失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorInitFail"] = 3040001] = "ZegoWhiteboardViewErrorInitFail";
  /**
   * 拉取白板 view 列表失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorGetListFail"] = 3040002] = "ZegoWhiteboardViewErrorGetListFail";
  /**
   * 创建白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorCreateFail"] = 3040003] = "ZegoWhiteboardViewErrorCreateFail";
  /**
   * 销毁白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorDestroyFail"] = 3040004] = "ZegoWhiteboardViewErrorDestroyFail";
  /**
   * attach 白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorAttachFail"] = 3040005] = "ZegoWhiteboardViewErrorAttachFail";
  /**
   * 清空白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorClearFail"] = 3040006] = "ZegoWhiteboardViewErrorClearFail";
  /**
   * 滚动白板 view 失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorScrollFail"] = 3040007] = "ZegoWhiteboardViewErrorScrollFail";
  /**
   * 撤销操作失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorUndoFail"] = 3040008] = "ZegoWhiteboardViewErrorUndoFail";
  /**
   * 重做操作失败
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorRedoFail"] = 3040009] = "ZegoWhiteboardViewErrorRedoFail";
  /**
   * 日志目录无法创建或写入
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorLogFolderNotAccess"] = 3040010] = "ZegoWhiteboardViewErrorLogFolderNotAccess";
  /**
   * 缓存目录无法创建或写入
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorCacheFolderNotAccess"] = 3040011] = "ZegoWhiteboardViewErrorCacheFolderNotAccess";
  /**
   * 无白板缩放权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthScale"] = 3050001] = "ZegoWhiteboardViewErrorNoAuthScale";
  /**
   * 无白板滚动权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthScroll"] = 3050002] = "ZegoWhiteboardViewErrorNoAuthScroll";
  /**
   * 无图元创建权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthCreateGraphic"] = 3050003] = "ZegoWhiteboardViewErrorNoAuthCreateGraphic";
  /**
   * 无图元编辑权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthUpdateGraphic"] = 3050004] = "ZegoWhiteboardViewErrorNoAuthUpdateGraphic";
  /**
   * 无图元移动权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthMoveGraphic"] = 3050005] = "ZegoWhiteboardViewErrorNoAuthMoveGraphic";
  /**
   * 无图元删除权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthDeleteGraphic"] = 3050006] = "ZegoWhiteboardViewErrorNoAuthDeleteGraphic";
  /**
   * 无白板清空权限
   */

  ZegoWhiteboardError[ZegoWhiteboardError["ZegoWhiteboardViewErrorNoAuthClearGraphic"] = 3050007] = "ZegoWhiteboardViewErrorNoAuthClearGraphic";
})(ZegoWhiteboardError || (ZegoWhiteboardError = {}));
/**
 * 白板操作工具（教具）
 *
 */


var ZegoWhiteboardTool;

(function (ZegoWhiteboardTool) {
  /**
   * 涂鸦
   */
  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolPen"] = 1] = "ZegoWhiteboardViewToolPen";
  /**
   * 文本框
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolText"] = 2] = "ZegoWhiteboardViewToolText";
  /**
   * 直线
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolLine"] = 4] = "ZegoWhiteboardViewToolLine";
  /**
   * 空心矩形
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolRect"] = 8] = "ZegoWhiteboardViewToolRect";
  /**
   * 空心椭圆
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolEllipse"] = 16] = "ZegoWhiteboardViewToolEllipse";
  /**
   * 选择工具
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolSelector"] = 32] = "ZegoWhiteboardViewToolSelector";
  /**
   * 橡皮擦
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolEraser"] = 64] = "ZegoWhiteboardViewToolEraser";
  /**
   * 激光笔
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolLaser"] = 128] = "ZegoWhiteboardViewToolLaser";
  /**
   * 动态ppt点击工具
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhiteboardViewToolClick"] = 256] = "ZegoWhiteboardViewToolClick";
  /**
   * 自定义图形工具
   */

  ZegoWhiteboardTool[ZegoWhiteboardTool["ZegoWhitebaordViewToolCustomImage"] = 512] = "ZegoWhitebaordViewToolCustomImage";
})(ZegoWhiteboardTool || (ZegoWhiteboardTool = {}));
/**
 * 操作模式
 */


var ZegoWhiteboardOperationMode;

(function (ZegoWhiteboardOperationMode) {
  /**
   * 不可操作模式，如果与其他模式混合，则依然是不可操作模式
   */
  ZegoWhiteboardOperationMode[ZegoWhiteboardOperationMode["ZegoWhiteboardOperationModeNone"] = 1] = "ZegoWhiteboardOperationModeNone";
  /**
   * 滚动模式，此模式下可以进行滚动翻页，并同步到其他端
   */

  ZegoWhiteboardOperationMode[ZegoWhiteboardOperationMode["ZegoWhiteboardOperationModeScroll"] = 2] = "ZegoWhiteboardOperationModeScroll";
  /**
   * 绘制模式，此模式下将会响应图元绘制操作，并同步图元到其他端
   */

  ZegoWhiteboardOperationMode[ZegoWhiteboardOperationMode["ZegoWhiteboardOperationModeDraw"] = 4] = "ZegoWhiteboardOperationModeDraw";
  /**
   * 放缩模式，此模式下可以对白板内容进行放大
   */

  ZegoWhiteboardOperationMode[ZegoWhiteboardOperationMode["ZegoWhiteboardOperationModeZoom"] = 8] = "ZegoWhiteboardOperationModeZoom";
})(ZegoWhiteboardOperationMode || (ZegoWhiteboardOperationMode = {}));
/**
 * 图片类型
 *
 */


var ZegoWhiteboardViewImageType;

(function (ZegoWhiteboardViewImageType) {
  /**
   * 图片图元
   */
  ZegoWhiteboardViewImageType[ZegoWhiteboardViewImageType["ZegoWhiteboardViewImageGraphic"] = 0] = "ZegoWhiteboardViewImageGraphic";
  /**
   * 自定义图形
   */

  ZegoWhiteboardViewImageType[ZegoWhiteboardViewImageType["ZegoWhiteboardViewImageCustom"] = 1] = "ZegoWhiteboardViewImageCustom";
})(ZegoWhiteboardViewImageType || (ZegoWhiteboardViewImageType = {}));
/**
 * 白板背景图填充模式
 *
 */


var ZegoWhiteboardViewImageFitMode;

(function (ZegoWhiteboardViewImageFitMode) {
  //靠左对齐按宽或按高等比放大或缩小
  ZegoWhiteboardViewImageFitMode[ZegoWhiteboardViewImageFitMode["ZegoWhiteboardViewImageFitModeLeft"] = 0] = "ZegoWhiteboardViewImageFitModeLeft"; //靠右对齐按宽或按高等比放大或缩小

  ZegoWhiteboardViewImageFitMode[ZegoWhiteboardViewImageFitMode["ZegoWhiteboardViewImageFitModeRight"] = 1] = "ZegoWhiteboardViewImageFitModeRight"; //底部对齐按宽或按高等比放大或缩小

  ZegoWhiteboardViewImageFitMode[ZegoWhiteboardViewImageFitMode["ZegoWhiteboardViewImageFitModeBottom"] = 2] = "ZegoWhiteboardViewImageFitModeBottom"; //顶部对齐按宽或按高等比放大或缩小

  ZegoWhiteboardViewImageFitMode[ZegoWhiteboardViewImageFitMode["ZegoWhiteboardViewImageFitModeTop"] = 3] = "ZegoWhiteboardViewImageFitModeTop"; //居中对齐按宽或按高等比放大或缩小

  ZegoWhiteboardViewImageFitMode[ZegoWhiteboardViewImageFitMode["ZegoWhiteboardViewImageFitModeCenter"] = 4] = "ZegoWhiteboardViewImageFitModeCenter";
})(ZegoWhiteboardViewImageFitMode || (ZegoWhiteboardViewImageFitMode = {}));
/**
 * 白板滚动方向
 *
 */


var ZegoWhiteboardViewScrollDirection;

(function (ZegoWhiteboardViewScrollDirection) {
  /**
   * 没有滚动
   */
  ZegoWhiteboardViewScrollDirection[ZegoWhiteboardViewScrollDirection["Center"] = 0] = "Center";
  /**
   * 水平滚动
   */

  ZegoWhiteboardViewScrollDirection[ZegoWhiteboardViewScrollDirection["Horizontal"] = 1] = "Horizontal";
  /**
   * 垂直滚动
   */

  ZegoWhiteboardViewScrollDirection[ZegoWhiteboardViewScrollDirection["Vertical"] = 2] = "Vertical";
})(ZegoWhiteboardViewScrollDirection || (ZegoWhiteboardViewScrollDirection = {}));

var ZegoWhiteboardCursorType;

(function (ZegoWhiteboardCursorType) {
  ZegoWhiteboardCursorType[ZegoWhiteboardCursorType["pen"] = 1] = "pen";
})(ZegoWhiteboardCursorType || (ZegoWhiteboardCursorType = {}));

/***/ }),

/***/ "./sdk/whiteboard/services/cmd.ts":
/*!****************************************!*\
  !*** ./sdk/whiteboard/services/cmd.ts ***!
  \****************************************/
/*! exports provided: CmdCenter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CmdCenter", function() { return CmdCenter; });
var CmdCenter = {
  Exprsss: {
    ModifyMod: '/eduv1/modify_mod',
    DestroyMod: '/eduv1/destroy_mod',
    CreateMod: '/eduv1/create_mod',
    GetMod: '/eduv1/get_mod',
    GetModList: '/eduv1/get_mod_list',
    GetPageGraphics: '/eduv1/get_page_graphics',
    ClearPageGraphics: '/eduv1/clear_page_graphics',
    DrawPageGraphics: '/eduv1/draw_page_graphics',
    // 权限
    Sync: '/eduv1/sync',
    GetRoomAuth: '/eduv1/get_room_auth',
    GetUserAuth: '/eduv1/get_user_auth'
  },
  Liveroom: {
    ModifyMod: ''
  },
  // 私有化
  Private: {
    ModifyMod: ''
  }
};

/***/ }),

/***/ "./sdk/whiteboard/services/entity.ts":
/*!*******************************************!*\
  !*** ./sdk/whiteboard/services/entity.ts ***!
  \*******************************************/
/*! exports provided: RequestType, TaskStatus, SendResultType, PushType, ModAction, SetModAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestType", function() { return RequestType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskStatus", function() { return TaskStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SendResultType", function() { return SendResultType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushType", function() { return PushType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModAction", function() { return ModAction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetModAction", function() { return SetModAction; });
var RequestType;

(function (RequestType) {
  RequestType[RequestType["Initiative"] = 1] = "Initiative";
  RequestType[RequestType["Inner"] = 2] = "Inner"; // 内部调用
})(RequestType || (RequestType = {}));

var TaskStatus;

(function (TaskStatus) {
  TaskStatus[TaskStatus["InProgress"] = 1] = "InProgress";
  TaskStatus[TaskStatus["Pending"] = 2] = "Pending";
  TaskStatus[TaskStatus["Resolve"] = 3] = "Resolve";
  TaskStatus[TaskStatus["Reject"] = 4] = "Reject";
})(TaskStatus || (TaskStatus = {}));

var SendResultType;

(function (SendResultType) {
  SendResultType[SendResultType["success"] = 0] = "success";
  SendResultType[SendResultType["error"] = 1] = "error";
})(SendResultType || (SendResultType = {}));

var PushType;

(function (PushType) {
  PushType[PushType["SetMod"] = 1] = "SetMod";
  PushType[PushType["ClearPageGraphics"] = 2] = "ClearPageGraphics";
  PushType[PushType["DrawPageGraphics"] = 3] = "DrawPageGraphics";
  PushType[PushType["SetRoomAuth"] = 4] = "SetRoomAuth";
  PushType[PushType["SetUserAuth"] = 5] = "SetUserAuth";
})(PushType || (PushType = {}));

var ModAction;

(function (ModAction) {
  ModAction[ModAction["Add"] = 1] = "Add";
  ModAction[ModAction["Removed"] = 2] = "Removed";
  ModAction[ModAction["Modify"] = 3] = "Modify";
})(ModAction || (ModAction = {}));

var SetModAction;

(function (SetModAction) {
  SetModAction[SetModAction["Scroll"] = 1] = "Scroll";
  SetModAction[SetModAction["AppendH5Extra"] = 2] = "AppendH5Extra";
  SetModAction[SetModAction["Scale"] = 3] = "Scale";
  SetModAction[SetModAction["Other"] = 4] = "Other";
})(SetModAction || (SetModAction = {})); // ========================== native转换来 end ==========================

/***/ }),

/***/ "./sdk/whiteboard/services/execute.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/services/execute.ts ***!
  \********************************************/
/*! exports provided: Execute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Execute", function() { return Execute; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entity */ "./sdk/whiteboard/services/entity.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ "./sdk/whiteboard/services/utils.ts");
/* harmony import */ var _view_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../view/utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _view_services_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../view/services/event */ "./sdk/whiteboard/view/services/event.ts");









/**
 * @class Execute
 * @constructor
 * @description {对接数据流回放模块}
 */

var Execute =
/** @class */
function () {
  function Execute(module) {
    this.module = module;
  }

  Execute.prototype.actionListener = function (type) {
    var args = [];

    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }

    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(type, args);
  };

  Execute.prototype.bindListener = function (type, callBack) {
    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].on(type, callBack);
  };

  Execute.prototype.pushRemovedMod = function (mod_id) {
    this.module.pushRemovedMod(mod_id);
  };

  Execute.prototype.pushAddMod = function (pushSetModAction) {
    this.module.pushAddMod(pushSetModAction);
  };

  Execute.prototype.pushModifyMod = function (pushSetModAction) {
    if (!pushSetModAction) return;
    var mod_id = pushSetModAction.mod_id,
        mod_seq = pushSetModAction.mod_seq,
        mod_title = pushSetModAction.mod_title,
        mod_horizontal_percent = pushSetModAction.mod_horizontal_percent,
        mod_vertical_percent = pushSetModAction.mod_vertical_percent,
        mod_reserve = pushSetModAction.mod_reserve,
        mod_extra = pushSetModAction.mod_extra,
        mod_scale = pushSetModAction.mod_scale,
        is_modify_mod_vertical_percent = pushSetModAction.is_modify_mod_vertical_percent,
        is_modify_mod_horizontal_percent = pushSetModAction.is_modify_mod_horizontal_percent,
        is_modify_mod_reserve = pushSetModAction.is_modify_mod_reserve,
        is_modify_mod_title = pushSetModAction.is_modify_mod_title,
        is_modify_mod_extra = pushSetModAction.is_modify_mod_extra,
        is_modify_mod_scale = pushSetModAction.is_modify_mod_scale;
    var curr = this.module.getMap(mod_id);
    if (!curr) return;
    var setModSendSwitch = this.module.getModSendSwitch(mod_id);

    if (setModSendSwitch) {
      // 直接更新
      var temp = {
        whiteboardID: mod_id,
        modSeq: mod_seq
      };
      this.module.updateMap(temp);
      this.updateMapByModifyModOption(pushSetModAction, mod_seq, true);
    } else {
      // 存入队列
      var data = {
        mod_id: mod_id
      };

      if (is_modify_mod_title) {
        Object.assign(data, {
          mod_title: mod_title,
          is_modify_mod_title: is_modify_mod_title
        });
      }

      if (is_modify_mod_extra) {
        Object.assign(data, {
          mod_extra: mod_extra,
          is_modify_mod_extra: is_modify_mod_extra
        });
      }

      if (is_modify_mod_horizontal_percent) {
        Object.assign(data, {
          mod_horizontal_percent: mod_horizontal_percent,
          is_modify_mod_horizontal_percent: is_modify_mod_horizontal_percent
        });
      } // mod_reserve：动态PPT步数与mod_vertical_percent：纵向滚动比例绑定


      if (is_modify_mod_vertical_percent) {
        Object.assign(data, {
          mod_vertical_percent: mod_vertical_percent,
          is_modify_mod_vertical_percent: is_modify_mod_vertical_percent,
          mod_reserve: mod_reserve,
          is_modify_mod_reserve: is_modify_mod_reserve
        });
      }

      if (is_modify_mod_reserve) {
        Object.assign(data, {
          mod_reserve: mod_reserve,
          is_modify_mod_reserve: is_modify_mod_reserve
        });
      }

      if (is_modify_mod_scale) {
        Object.assign(data, {
          mod_scale: mod_scale,
          is_modify_mod_scale: is_modify_mod_scale
        });
      } // 更新任务列表


      this.module.updateModifyModTaskList({
        status: _entity__WEBPACK_IMPORTED_MODULE_5__["TaskStatus"].Pending,
        data: data,
        push: true,
        pushModSeq: mod_seq
      });
    }
  };

  Execute.prototype.updateMapByModifyModOption = function (modifyModOption, modSeq, push) {
    var mod_id = modifyModOption.mod_id,
        mod_title = modifyModOption.mod_title,
        mod_horizontal_percent = modifyModOption.mod_horizontal_percent,
        mod_vertical_percent = modifyModOption.mod_vertical_percent,
        mod_reserve = modifyModOption.mod_reserve,
        mod_scale = modifyModOption.mod_scale,
        is_modify_mod_horizontal_percent = modifyModOption.is_modify_mod_horizontal_percent,
        is_modify_mod_vertical_percent = modifyModOption.is_modify_mod_vertical_percent,
        is_modify_mod_reserve = modifyModOption.is_modify_mod_reserve,
        is_modify_mod_title = modifyModOption.is_modify_mod_title,
        is_modify_mod_extra = modifyModOption.is_modify_mod_extra,
        is_modify_mod_scale = modifyModOption.is_modify_mod_scale;
    var mod_extra = this.module.decodeH5Extra(modifyModOption.mod_extra); // 获取原 seq 值
    // 获取原 horizontalPercent, verticalPercent, pptStep

    var _a = this.module.getMap(mod_id),
        horizontalPercent = _a.horizontalPercent,
        verticalPercent = _a.verticalPercent,
        pptStep = _a.pptStep; // push 至 view 数据


    var pushData = {
      isPushScroll: false,
      horizontalPercent: horizontalPercent,
      verticalPercent: verticalPercent,
      pptStep: pptStep
    };
    var result; // 更新水平滚动条

    if (is_modify_mod_horizontal_percent) {
      pushData.isPushScroll = true;
      pushData.horizontalPercent = +mod_horizontal_percent || 0;
      var temp1 = {
        whiteboardID: mod_id,
        horizontalPercent: pushData.horizontalPercent,
        modPropSeq: {
          mod_horizontal_percent: modSeq
        }
      };
      this.module.updateMap(temp1);
    } // 更新垂直滚动条


    if (is_modify_mod_vertical_percent) {
      pushData.isPushScroll = true;
      pushData.verticalPercent = +mod_vertical_percent || 0;
      pushData.pptStep = +mod_reserve;
      var temp2 = {
        whiteboardID: mod_id,
        verticalPercent: pushData.verticalPercent,
        pptStep: pushData.pptStep,
        modPropSeq: {
          mod_vertical_percent: modSeq
        }
      };
      this.module.updateMap(temp2);
    } // 更新 step


    if (is_modify_mod_reserve) {
      pushData.isPushScroll = true;
      pushData.pptStep = +mod_reserve;
      var temp3 = {
        whiteboardID: mod_id,
        pptStep: pushData.pptStep,
        modPropSeq: {
          mod_reserve: modSeq
        }
      };
      this.module.updateMap(temp3);
    }

    if (pushData.isPushScroll && push) {
      this.module.pushScrollHandle(mod_id, pushData.horizontalPercent, pushData.verticalPercent, pushData.pptStep); // 被动切页后清空 h5Extra

      this.module.updateMap({
        whiteboardID: mod_id,
        modExtra: ''
      });
      result = modifyModOption;
    } // 更新 name


    if (is_modify_mod_title) {
      var temp4 = {
        whiteboardID: mod_id,
        name: mod_title,
        modPropSeq: {
          mod_title: modSeq
        }
      };
      this.module.updateMap(temp4);
    } // 更新 mod_extra


    if (is_modify_mod_extra) {
      var temp5 = {
        whiteboardID: mod_id,
        modExtra: mod_extra,
        modPropSeq: {
          mod_extra: modSeq
        }
      };

      if (push) {
        // 校验远端push动画
        var increment = this.module.checkH5Extra(mod_id, mod_extra, true); // 过滤空动画：翻页时动画会清空

        if (increment) {
          this.module.pushExtraHandle(mod_id, increment);
          result = modifyModOption;
        }
      }

      this.module.updateMap(temp5);
    } // 更新 mod_scale


    if (is_modify_mod_scale) {
      var modScale = JSON.parse(mod_scale);
      var temp5 = {
        whiteboardID: mod_id,
        modScale: modScale,
        modPropSeq: {
          mod_scale: modSeq
        }
      };

      if (push) {
        this.module.pushScaleHandle(mod_id, modScale.scale, modScale.ofs_x, modScale.ofs_y);
      }

      this.module.updateMap(temp5);
    }

    return result;
  };

  Execute.prototype.parseGraphicsHandle = function (resData) {
    var _this = this;

    var page_graphics = resData.page_graphics,
        whiteboardID = resData.mod_id;
    var curr = this.module.checkModInfo(whiteboardID);
    if (!curr) return;
    var viewWidth = curr.width;
    var graphicListSeqs = {},
        delGraphicIdList = [];
    var graphicList = []; // 解析图元数据

    page_graphics.forEach(function (element) {
      var del_graphic_id_list = element.del_graphic_id_list,
          graphic_list = element.graphic_list,
          action_seq = element.action_seq,
          page = element.page;

      _this.transGraphicList(graphicList, graphic_list, viewWidth);

      del_graphic_id_list && delGraphicIdList.push.apply(delGraphicIdList, del_graphic_id_list);
      graphicListSeqs[page] = action_seq;
    });
    graphicList = JSON.parse(JSON.stringify(graphicList));
    return {
      whiteboardID: whiteboardID,
      graphicList: graphicList,
      delGraphicIdList: delGraphicIdList,
      graphicListSeqs: graphicListSeqs
    };
  };

  Execute.prototype.pushDrawPageGraphicsHandle = function (resData) {
    var whiteboardID = resData.whiteboardID,
        graphicListSeqs = resData.graphicListSeqs,
        graphicList = resData.graphicList,
        delGraphicIdList = resData.delGraphicIdList;
    this.module.updateMapByGraphicListSeqs(whiteboardID, graphicListSeqs);
    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].PushDrawPageGraphics, whiteboardID, graphicList, delGraphicIdList);
  };

  Execute.prototype.transGraphicList = function (result, graphicList, width) {
    var _this = this;

    if (graphicList && graphicList.length) {
      // @ts-ignore
      // this.module.setGraphicMap(graphicList);
      graphicList.forEach(function (item) {
        if (result.some(function (subitem) {
          return subitem.graphic_id === item.graphic_id;
        })) return; // 去重

        if (item.zorder > _this.module.zorderSeq) _this.module.zorderSeq = item.zorder; // @ts-ignore

        Object(_utils__WEBPACK_IMPORTED_MODULE_6__["transBase64Data"])(item, true); // @ts-ignore

        _this.module.setGraphicItem(item); // @ts-ignore


        Object(_utils__WEBPACK_IMPORTED_MODULE_6__["calPlaceHandle"])(item, width, true); // @ts-ignore

        item.color = Object(_view_utils__WEBPACK_IMPORTED_MODULE_7__["transColor"])(item.color, true);
        result.push(item);
      });
    }
  };

  Execute.prototype.pushClearPageGraphicsHandle = function (resData) {
    this.module.pushClearPageGraphicsHandle(resData);
  };

  return Execute;
}();



/***/ }),

/***/ "./sdk/whiteboard/services/graphics.ts":
/*!*********************************************!*\
  !*** ./sdk/whiteboard/services/graphics.ts ***!
  \*********************************************/
/*! exports provided: Graphic */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Graphic", function() { return Graphic; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _docsview_docs_zego_docs_wb__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../docsview/docs/zego.docs.wb */ "./sdk/docsview/docs/zego.docs.wb.ts");
/* harmony import */ var _cmd__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./cmd */ "./sdk/whiteboard/services/cmd.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils */ "./sdk/whiteboard/services/utils.ts");
/* harmony import */ var _view_entities_error__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../view/entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _view_entities_view__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../view/entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _view_utils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../view/utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
















var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var Graphic =
/** @class */
function () {
  function Graphic(socket, module) {
    this.socket = socket;
    this.module = module; // 获取日志、房间数据中心、sendCustomCommand、whiteboardError

    this.docsService = new _docsview_docs_zego_docs_wb__WEBPACK_IMPORTED_MODULE_15__["ZegoWhiteboardDocs"]();
  }
  /**
   * 和其他端保持方案一致：服务端 新data.x = data.x + 偏移量
   * reloadView 本地图元 move 时还原 data
   */


  Graphic.prototype.updateRemoteImageGraphicData = function (graphicList, reloadView) {
    graphicList = JSON.parse(JSON.stringify(graphicList));
    graphicList.forEach(function (item) {
      var type = item.type,
          action = item.action,
          x = item.x,
          y = item.y;

      if (type == _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Image && (!reloadView && (action == _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Update || action == _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Create) || reloadView && action == _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Move)) {
        var data = item.data;
        data.x -= x;
        data.y -= y;
        data.ex -= x;
        data.ey -= y;
      }
    });
    return graphicList;
  };

  Graphic.prototype.posToPageNum = function (innerDirection, innerPageCount, innerPageSize, nx, ny, offsetX, offsetY) {
    var cx = innerPageSize.cx,
        cy = innerPageSize.cy;
    var pageNum = 0;

    if (cx && cy) {
      nx += offsetX;
      ny += offsetY;

      if (innerDirection === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["ZegoWhiteboardViewScrollDirection"].Horizontal) {
        if (nx <= 0) {
          pageNum = 0;
        } else {
          pageNum = Math.floor(nx / cx);
        }
      } else {
        if (ny <= 0) {
          pageNum = 0;
        } else {
          pageNum = Math.floor(ny / cy);
        }
      }

      pageNum = pageNum > innerPageCount - 1 ? innerPageCount - 1 : pageNum; // 图元移出容器

      pageNum = pageNum > 99 ? 99 : pageNum;
    }

    return pageNum;
  };

  Graphic.prototype.mapPageNumList = function (pageNums) {
    var pageNumList = [];
    var minPage = Math.min.apply(Math, pageNums);
    var maxPage = Math.max.apply(Math, pageNums);

    for (var index = minPage; index <= maxPage; index++) {
      pageNumList.push(index);
    }

    return pageNumList;
  };

  Graphic.prototype.judgeGraphicPage = function (whiteboardID, protoGraphic) {
    var _this = this;

    var _a = this.module.getMap(whiteboardID),
        innerDirection = _a.innerDirection,
        innerPageSize = _a.innerPageSize,
        innerPageCount = _a.innerPageCount;

    var type = protoGraphic.type,
        x = protoGraphic.x,
        y = protoGraphic.y;
    var pageNumList = [];

    switch (type) {
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Text:
        var _b = Object(_view_utils__WEBPACK_IMPORTED_MODULE_20__["splitTextHandle"])(protoGraphic.data),
            beginX = _b.beginX,
            beginY = _b.beginY;

        var pageNum = this.posToPageNum(innerDirection, innerPageCount, innerPageSize, Number(beginX), Number(beginY), x, y);
        pageNumList = this.mapPageNumList([pageNum]);
        break;

      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Pencil:
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Line:
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Rect:
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Ellipse:
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Laser:
      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Cursor:
        var temp_1 = [];
        protoGraphic.data.forEach(function (item, key, arr) {
          if (!(key % 2)) {
            temp_1.push(_this.posToPageNum(innerDirection, innerPageCount, innerPageSize, arr[key], arr[key + 1], x, y));
          }
        });
        pageNumList = this.mapPageNumList(temp_1);
        break;

      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Image:
        var _c = protoGraphic.data,
            sx = _c.x,
            sy = _c.y,
            ex = _c.ex,
            ey = _c.ey;
        var pageNum4 = this.posToPageNum(innerDirection, innerPageCount, innerPageSize, sx, sy, 0, 0);
        var pageNum5 = this.posToPageNum(innerDirection, innerPageCount, innerPageSize, ex, ey, 0, 0);
        pageNumList = this.mapPageNumList([pageNum4, pageNum5]);
        break;

      case _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].BgImage:
        pageNumList.push(0);
        break;

      default:
        break;
    }

    return pageNumList;
  };

  Graphic.prototype.checkProtoGraphic = function (protoGraphic) {
    var action = protoGraphic.action,
        action_type = protoGraphic.action_type,
        graphic_id = protoGraphic.graphic_id,
        type = protoGraphic.type,
        data = protoGraphic.data,
        color = protoGraphic.color,
        size = protoGraphic.size,
        x = protoGraphic.x,
        y = protoGraphic.y,
        zorder = protoGraphic.zorder,
        attributes = protoGraphic.attributes,
        operate_id = protoGraphic.operate_id,
        is_end_draw = protoGraphic.is_end_draw,
        layer = protoGraphic.layer,
        creator_id = protoGraphic.creator_id;
    var result = {
      graphic_id: graphic_id,
      action: action,
      action_type: action_type,
      type: type,
      is_end_draw: !!is_end_draw,
      layer: layer || 0,
      zorder: zorder,
      creator_id: creator_id,
      operate_id: operate_id
    };

    if (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Create || action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Append) {
      result.x = x;
      result.y = y;
      result.data = data;
      result.color = color;
      result.size = size;

      if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Text || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Pencil || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Cursor) {
        result.attributes = attributes;
      }
    } else if (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Update) {
      result.x = x;
      result.y = y;
      result.data = data;

      if (type !== _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Image || type !== _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Cursor) {
        result.color = color;
        result.size = size;
      }

      if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Text || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Pencil || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Cursor) {
        result.attributes = attributes;
      }
    } else if (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Move) {
      result.x = x;
      result.y = y;
    } // 校验图元类型：是否属于涂鸦的create、append、is_end_draw = false


    if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].Pencil && !is_end_draw && (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Create || action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Append)) {
      result.type = _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].RealTime;
    }

    return result;
  };

  Graphic.prototype.mapDrawPages = function (whiteboardID, graphicList) {
    var _this = this;

    var curr = this.module.getMap(whiteboardID);
    if (!curr) return [];
    var isSendPB = this.socket.isSendPB;
    var width = curr.width;
    var height = curr.height;
    var viewHeight = curr.viewHeight;
    var drawPages = [];
    var pages = [];
    graphicList === null || graphicList === void 0 ? void 0 : graphicList.forEach(function (item) {
      var pageNumList = _this.judgeGraphicPage(whiteboardID, item); // @ts-ignore


      item.color = Object(_view_utils__WEBPACK_IMPORTED_MODULE_20__["transColor"])(item.color, false);
      var deviate = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calculateDeviateValue"])(width, height, viewHeight, _this.module.fileInfo);
      Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calPlaceHandle"])(item, width, false, -deviate, height);
      isSendPB ? Object(_utils__WEBPACK_IMPORTED_MODULE_17__["transPbData"])(item, false) : Object(_utils__WEBPACK_IMPORTED_MODULE_17__["transBase64Data"])(item, false);
      var temp = false; // 是否需要置空data

      var protoGraphic = _this.checkProtoGraphic(item);

      pageNumList.forEach(function (pageNum) {
        if (!pages.includes(pageNum)) pages.push(pageNum);
        var graphicListSeq = curr.graphicListSeqs[pageNum];

        var copy = __assign({}, protoGraphic);

        temp && item.type === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["GraphicType"].RealTime && item.action === _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Append && (copy.data = '');
        drawPages.push({
          page: pageNum,
          graphic_list_seq: graphicListSeq,
          draw_list: [copy]
        });
        temp = true;
      });
    });
    var drawPages_ = [];
    pages.forEach(function (page) {
      var drawPage = {
        page: page,
        draw_list: []
      };
      drawPages.forEach(function (item) {
        if (item.page === page) {
          drawPage.draw_list = drawPage.draw_list.concat(item.draw_list);
          drawPage.graphic_list_seq = item.graphic_list_seq;
        }
      });
      drawPages_.push(drawPage);
    });
    return drawPages_;
  };

  Graphic.prototype.handleClearRsp = function (whiteboardID, layers, resData, originReslove, originReject) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var pages = body.pages,
          graphic_list_seqs_1 = body.graphic_list_seqs;
      var graphicListSeqs_1 = {};
      pages && pages.forEach(function (val, i) {
        return graphicListSeqs_1[val] = graphic_list_seqs_1[i];
      });
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['WhiteBoard_Service'], 'graph_update_seq', JSON.stringify({
        whiteboardID: whiteboardID,
        graphicListSeqs: graphicListSeqs_1,
        body: body,
        actionMsg: 'clear cb success'
      }));
      this.module.updateMapByGraphicListSeqs(body.mod_id, graphicListSeqs_1);
      this.module.updateMap({
        whiteboardID: whiteboardID,
        operateTimes: 0
      });
      this.module.clearGraphicMap();
      originReslove(whiteboardID);
    } else {
      // retry 5 times
      var curr = this.module.getMap(whiteboardID);

      if (curr && ++curr.operateTimes < 5) {
        this.clearViewHandle(whiteboardID, layers, originReslove, originReject);
      } else {
        var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_18__["transError"])(code, message);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().error(['WhiteBoard_Service'], 'mod_clear_cb', JSON.stringify({
          errorData: errorData
        }));
        originReject(errorData);
      }
    }
  };

  Graphic.prototype.handleUpdateToRemoteRsp = function (whiteboardID, graphicList, resData, success, error) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var pages = body.pages,
          graphic_list_seqs_2 = body.graphic_list_seqs;
      var graphicListSeqs_2 = {};
      pages && pages.forEach(function (val, i) {
        return graphicListSeqs_2[val] = graphic_list_seqs_2[i];
      });
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['WhiteBoard_Service'], 'graph_update_seq', JSON.stringify({
        whiteboardID: whiteboardID,
        graphicListSeqs: graphicListSeqs_2,
        actionMsg: 'draw cb success'
      }));
      this.module.updateMapByGraphicListSeqs(body.mod_id, graphicListSeqs_2);
      this.module.updateGraphicMap(whiteboardID, graphicList);
      success();
    } else {
      var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_18__["transError"])(code, message);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().error(['WhiteBoard_Service'], 'graph_draw_cb', JSON.stringify({
        errorData: errorData
      }));
      error(errorData);
    }
  };

  Graphic.prototype.clearViewHandle = function (whiteboardID, layers, originReslove, originReject) {
    return __awaiter(this, void 0, void 0, function () {
      var resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_16__["CmdCenter"].Exprsss.ClearPageGraphics, {
              mod_id: whiteboardID,
              layers: layers
            })];

          case 1:
            resData = _a.sent();
            this.handleClearRsp(whiteboardID, layers, resData, originReslove, originReject);
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Graphic.prototype.updateToRemoteHandle = function (whiteboardID, graphicList, success, error) {
    return __awaiter(this, void 0, void 0, function () {
      var reloadViewGraphicList, checkBody, size, code, errorData, reqBody, resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            graphicList = this.updateRemoteImageGraphicData(graphicList);
            reloadViewGraphicList = this.updateRemoteImageGraphicData(graphicList, true);
            checkBody = {
              mod_id: whiteboardID,
              // 拷贝一份，避免数据污染
              draw_pages: this.mapDrawPages(whiteboardID, JSON.parse(JSON.stringify(graphicList)))
            };

            if (!checkBody.draw_pages.length) {
              // 返回图元数据有误
              error(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_18__["transError"])(_view_entities_view__WEBPACK_IMPORTED_MODULE_19__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail));
              return [2
              /*return*/
              ];
            }

            return [4
            /*yield*/
            , this.socket.checkSendLength(checkBody, graphicList[0].action)];

          case 1:
            size = _a.sent();

            if (graphicList.length > 1 && size) {
              code = _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNumLimit;
              errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_18__["transError"])(code);
              error(errorData);
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().error(['WhiteBoard_Service'], 'graph_draw_cb', JSON.stringify({
                errorData: errorData,
                size: size
              }));
              return [2
              /*return*/
              ];
            }

            reqBody = {
              mod_id: whiteboardID,
              draw_pages: this.mapDrawPages(whiteboardID, graphicList)
            };
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_16__["CmdCenter"].Exprsss.DrawPageGraphics, reqBody)];

          case 2:
            resData = _a.sent();
            this.handleUpdateToRemoteRsp(whiteboardID, reloadViewGraphicList, resData, success, error);
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Graphic.prototype.clearView = function (whiteboardID, layers) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      _this.clearViewHandle(whiteboardID, layers, resolve, reject);
    });
  };

  Graphic.prototype.uploadImage = function (file, listener) {
    if (!this.docsService.isConfiged()) {
      var _a = _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().getConfig(),
          appID = _a.appID,
          userID = _a.userID,
          token = _a.token,
          isTestEnv = _a.isTestEnv;

      this.docsService.setConfig({
        appID: appID,
        userID: userID,
        token: token,
        isTestEnv: isTestEnv
      });
    }

    return this.docsService.uploadImage(file, listener);
  }; // 获取图元是否结束绘制


  Graphic.prototype.getGraphicIsEndDraw = function (graphic_id) {
    try {
      var _a = this.module.getGraphicItem(graphic_id),
          is_end_draw = _a.is_end_draw,
          server_timestamp = _a.server_timestamp;

      var interval = server_timestamp * 1000 - this.socket.getServerTimeOffset();
      return !!(is_end_draw || new Date().getTime() < interval);
    } catch (error) {
      return true;
    }
  }; // 涂鸦 Append 时，检测 socket 传输大小是否超过 5KB


  Graphic.prototype.isAppendPathLimit = function (whiteboardID, graphic) {
    graphic = JSON.parse(JSON.stringify(graphic));
    graphic.action = _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["Action"].Update;
    graphic.action_type = _view_entities_view__WEBPACK_IMPORTED_MODULE_19__["ActionType"].Single;
    graphic.is_end_draw = true;
    graphic.data = graphic.oldData;
    var length = graphic.data.length;
    return this.socket.checkSendLength({
      mod_id: whiteboardID,
      draw_pages: this.mapDrawPages(whiteboardID, [graphic])
    }, graphic.action).then(function (size) {
      size && _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().warn(['WhiteBoard_Service'], 'graph_draw_limit', JSON.stringify({
        size: size,
        length: length
      }));
      return !!size;
    });
  };

  return Graphic;
}();



/***/ }),

/***/ "./sdk/whiteboard/services/module.ts":
/*!*******************************************!*\
  !*** ./sdk/whiteboard/services/module.ts ***!
  \*******************************************/
/*! exports provided: Module */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Module", function() { return Module; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.object.freeze.js */ "./node_modules/core-js/modules/es.object.freeze.js");
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ "./node_modules/core-js/modules/es.object.keys.js");
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.object.values.js */ "./node_modules/core-js/modules/es.object.values.js");
/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.date.now.js */ "./node_modules/core-js/modules/es.date.now.js");
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.array.sort.js */ "./node_modules/core-js/modules/es.array.sort.js");
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
/* harmony import */ var _cmd__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./cmd */ "./sdk/whiteboard/services/cmd.ts");
/* harmony import */ var _view_services_event__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../code/zh/ZegoExpressEntity */ "./sdk/whiteboard/code/zh/ZegoExpressEntity.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./utils */ "./sdk/whiteboard/services/utils.ts");
/* harmony import */ var _view_entities_error__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../view/entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _view_entities_view__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../view/entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _view_utils__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../view/utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./entity */ "./sdk/whiteboard/services/entity.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
































var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
}; // import { getLogAction, Logger } from '../../docsview/view/Logger';










 // const logAction = getLogAction.bind(null, 'wb.s.');

var Module =
/** @class */
function () {
  function Module(socket) {
    this.modListSeq = 0;
    this.modIdMapData = {};
    this.zorderSeq = 1;
    this.zorderStep = Object(_view_utils__WEBPACK_IMPORTED_MODULE_37__["createZorderStep"])();
    this.modLimit = 50;
    this.defaultModListSeq = 0; // 为0表示拉取所有

    this.marker = '';
    this.defaultModType = 1; // 1：白板 2：其他

    this.defaultModSubtype = 1;
    this.defaultModDeleteFlag = 0; // 是否在 module 创建者退出房间后自动删除 module

    this.defaultHPercent = 0;
    this.defaultVPercent = 0;
    this.defaultModReserve = 1;
    this.graphicLimit = 30; // 每次拉取图元个数

    this.graphicMap = {};
    this.fileInfo = {};
    this.userAuthMap = {
      roomSeq: 0,
      userSeq: 0,
      syncTaskId: 0,
      model: Object.freeze({
        scale: 1,
        scroll: 1,
        update: 1,
        "delete": 1,
        move: 1,
        clear: 1,
        create: 1
      })
    };
    this.socket = socket;
  }

  Module.prototype.updateModifyModTaskList = function (modifyModTask) {
    // 更新完成，任务列表至多只有两个 pending 任务，且第二个任务是执行动画
    var status = modifyModTask.status,
        push = modifyModTask.push,
        setModAction = modifyModTask.setModAction,
        data = modifyModTask.data;
    var curr = this.getMap(data.mod_id);

    if (status === _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].InProgress) {
      curr.modifyModTaskList.splice(0, curr.modifyModTaskList.length, modifyModTask);
    } else if (status === _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].Pending) {
      if (push) {
        // push 按顺序追加，不 merge
        curr.modifyModTaskList.push(modifyModTask);
      } else {
        // step1: 查找最后一个 pending 任务
        curr.modifyModTaskList.reverse();
        var lastIndex = curr.modifyModTaskList.findIndex(function (item) {
          return !item.push && item.status === _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].Pending;
        });

        if (lastIndex !== -1) {
          lastIndex = curr.modifyModTaskList.length - lastIndex - 1;
          curr.modifyModTaskList.reverse();
        } // step2: 根据 setModAction 进行 merge


        if (lastIndex === -1) {
          // 没有 pending 任务，直接 push
          curr.modifyModTaskList.push(modifyModTask);
        } else {
          var lastTask = curr.modifyModTaskList[lastIndex];

          if (lastTask.setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].AppendH5Extra) {
            // 最后一个任务是执行动画
            if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Other) {
              // 当前任务是其他任务，merge 到最后一个任务中
              Object.assign(lastTask.data, modifyModTask.data);
            } else {
              // 当前任务是切页、动画，覆盖最后一个任务，保留其他任务相关属性
              Object.assign(lastTask.data, modifyModTask.data);
            }
          } else if (lastTask.setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scroll) {
            // 最后一个任务是切页
            if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Other) {
              // 当前任务是其他任务，merge 到最后一个任务中
              Object.assign(lastTask.data, modifyModTask.data);
            } else if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scroll) {
              // 当前任务是切页，覆盖最后一个任务，保留其他任务相关属性
              Object.assign(lastTask.data, modifyModTask.data);
            } else {
              // 当前任务是动画，追加在后面
              curr.modifyModTaskList.splice(lastIndex + 1, 0, modifyModTask);
            }
          } else if (lastTask.setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scale) {
            if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scale) {
              // 当前任务是缩放，覆盖最后一个任务，保留其他任务相关属性
              Object.assign(lastTask.data, modifyModTask.data);
            } else {
              // 追加在后面
              curr.modifyModTaskList.splice(lastIndex + 1, 0, modifyModTask);
            }
          } else {
            // 最后一个任务是其他任务，将当前任务 merge 到最后一个任务中，并修改 setModAction 为当前任务
            Object.assign(lastTask.data, modifyModTask.data);
            lastTask.setModAction = modifyModTask.setModAction;
          }
        }
      }
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['DocsView_Service'], 'module_update_task_list', JSON.stringify(curr.modifyModTaskList));
  };

  Module.prototype.getOldModInfoByModifyModOption = function (modifyModOption) {
    var curr = this.getMap(modifyModOption.mod_id);
    var result = {};
    Object.keys(modifyModOption).forEach(function (key) {
      if (key === 'mod_title') {
        result[key] = curr.name;
      } else if (key === 'mod_extra') {
        result[key] = curr.modExtra;
      } else if (key === 'mod_reserve') {
        result[key] = curr.pptStep;
      } else if (key === 'mod_horizontal_percent') {
        result[key] = curr.horizontalPercent;
      } else if (key === 'mod_vertical_percent') {
        result[key] = curr.verticalPercent;
      } else if (key === 'mod_scale') {
        result[key] = curr.modScale;
      }
    });
    return result;
  }; // 返回当前是否可以发送


  Module.prototype.setModBefore = function (setModAction, setModOption) {
    var mod_id = setModOption.mod_id;
    var setModSendSwitch = this.getModSendSwitch(mod_id);
    var modifyModTask = {
      setModAction: setModAction,
      data: setModOption,
      push: false,
      status: setModSendSwitch ? _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].InProgress : _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].Pending
    };
    this.updateModifyModTaskList(modifyModTask);
    return setModSendSwitch;
  };

  Module.prototype.cachePushModifyModTaskHandle = function (pushModifyModTaskList) {
    var _this = this;

    var pushTaskDataMap;
    pushModifyModTaskList.forEach(function (pushModifyModTask) {
      var pushModSeq = pushModifyModTask.pushModSeq,
          data = pushModifyModTask.data;
      var mod_id = data.mod_id;

      var modSeq = _this.getMap(mod_id).modSeq;

      if (pushModSeq > modSeq) {
        _this.updateMap({
          modSeq: pushModSeq,
          whiteboardID: mod_id
        });
      }

      var result = _this.updateMapByModifyModOption(data, pushModSeq, true);

      if (result) {
        pushTaskDataMap = pushTaskDataMap || {};
        Object.assign(pushTaskDataMap, result);
      }
    });
    return pushTaskDataMap;
  };

  Module.prototype.setModRspAfter = function (afterParams) {
    var setModOption = afterParams.setModOption,
        sendResultType = afterParams.sendResultType,
        setModAction = afterParams.setModAction;
    var whiteboardID = setModOption.mod_id;
    var curr = this.getMap(whiteboardID);
    var errorData = afterParams.errorData; // 处理回包

    if (sendResultType === _entity__WEBPACK_IMPORTED_MODULE_38__["SendResultType"].success) {
      // 不处理
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb', 'success');
    } else {
      console.error('setModRspAfter:', afterParams); // 抛出回退信息

      var oldData = this.getOldModInfoByModifyModOption(setModOption);

      if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scroll) {
        var temp = __assign(__assign({}, errorData), {
          whiteboardID: whiteboardID,
          horizontalPercent: oldData.mod_horizontal_percent,
          verticalPercent: oldData.mod_vertical_percent,
          step: oldData.mod_reserve
        });

        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].Scroll, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb', JSON.stringify(temp));
      } else if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].AppendH5Extra) {
        // @ts-ignore
        if ((errorData === null || errorData === void 0 ? void 0 : errorData.code) === 3) {
          // 处理长度超出限制错误
          errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAnimationInfoLimit);
        }

        var isH5 = oldData.mod_extra.includes('H5_record');

        if (isH5) {
          // 自定义 H5 修改操作类型为 102
          oldData.mod_extra = JSON.parse(oldData.mod_extra);
          oldData.mod_extra.H5_record.t = 102;
          oldData.mod_extra = JSON.stringify(oldData.mod_extra);
        }

        var temp = __assign(__assign({}, errorData), {
          modExtra: oldData.mod_extra,
          whiteboardID: whiteboardID,
          isH5: isH5
        });

        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].AppendH5Extra, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb', JSON.stringify(temp));
      } else if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scale) {
        var temp = __assign(__assign({}, errorData), {
          whiteboardID: whiteboardID,
          mod_scale: oldData.mod_scale
        });

        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].Scale, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().warn(['WhiteBoard_Service'], 'module_set_mod_cb', JSON.stringify(temp));
      }
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_tasks', JSON.stringify(curr.modifyModTaskList)); // 清除当前执行完成的任务

    curr.modifyModTaskList.splice(0, 1); // 执行 push 任务

    var pushTaskList = curr.modifyModTaskList.filter(function (item) {
      return item.push;
    });
    var pushTaskDataMap = this.cachePushModifyModTaskHandle(pushTaskList);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_push_map', pushTaskDataMap ? JSON.stringify(pushTaskDataMap) : ''); // 清除所有 push 任务

    curr.modifyModTaskList = curr.modifyModTaskList.filter(function (item) {
      return !item.push;
    }); // 取出缓存任务中第一个 pending

    var nextTask = curr.modifyModTaskList[0];

    if (nextTask) {
      // 判断本地缓存的任务是否发给后台
      if (!pushTaskDataMap) {
        // 无 push：发送给后台
        nextTask.status = _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].InProgress;
        this.setModHandle(nextTask.setModAction, nextTask.data);
      } else {
        // 有 push：当做操作冲突场景
        this.cacheCallback(pushTaskDataMap);
      }
    }
  };

  Module.prototype.cacheCallback = function (pushTaskDataMap) {
    // 判断 cache、push 是否有交集，cacheModifyModTasks 中至多只有两个任务
    var push_is_is_modify_mod_scale = pushTaskDataMap.is_modify_mod_scale,
        push_is_modify_mod_extra = pushTaskDataMap.is_modify_mod_extra,
        push_is_modify_mod_horizontal_percent = pushTaskDataMap.is_modify_mod_horizontal_percent,
        push_is_modify_mod_vertical_percent = pushTaskDataMap.is_modify_mod_vertical_percent,
        push_is_modify_mod_reserve = pushTaskDataMap.is_modify_mod_reserve,
        push_mod_extra = pushTaskDataMap.mod_extra,
        whiteboardID = pushTaskDataMap.mod_id;
    var curr = this.getMap(whiteboardID);
    var currCacheModifyModTask = curr.modifyModTaskList[0];
    if (!currCacheModifyModTask) return;
    var setModAction = currCacheModifyModTask.setModAction;
    var isSend = false;

    if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scroll) {
      if (!push_is_modify_mod_horizontal_percent && !push_is_modify_mod_vertical_percent && !push_is_modify_mod_reserve) {
        var temp = {
          code: 1112,
          msg: '',
          whiteboardID: whiteboardID,
          horizontalPercent: curr.horizontalPercent,
          verticalPercent: curr.verticalPercent,
          step: curr.pptStep
        };
        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].Scroll, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_cache', JSON.stringify(temp)); // 执行下一个

        curr.modifyModTaskList.splice(0, 1);
        this.cacheCallback(pushTaskDataMap);
      } else {
        isSend = true;
      }
    } else if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].AppendH5Extra) {
      if (push_is_modify_mod_extra && push_mod_extra) {
        var isH5 = curr.modExtra.includes('H5_record');
        var temp = {
          code: 1112,
          msg: '',
          modExtra: curr.modExtra,
          whiteboardID: whiteboardID,
          isH5: isH5
        };
        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].AppendH5Extra, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_cache', JSON.stringify(temp)); // 执行下一个

        curr.modifyModTaskList.splice(0, 1);
        this.cacheCallback(pushTaskDataMap);
      } else {
        isSend = true;
      }
    } else if (setModAction === _entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scale) {
      if (push_is_is_modify_mod_scale) {
        var temp = {
          code: 1112,
          msg: '',
          whiteboardID: whiteboardID,
          mod_scale: curr.modScale
        };
        _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].Scale, temp);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_cache', JSON.stringify(temp)); // 执行下一个

        curr.modifyModTaskList.splice(0, 1);
        this.cacheCallback(pushTaskDataMap);
      } else {
        isSend = true;
      }
    } else {
      isSend = true;
    }

    if (isSend) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_mod_cb_cache', 'next set mod');
      currCacheModifyModTask.status = _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].InProgress;
      this.setModHandle(currCacheModifyModTask.setModAction, currCacheModifyModTask.data);
    }
  };

  Module.prototype.getModSendSwitch = function (whiteboardID) {
    var curr = this.modIdMapData[whiteboardID];
    return curr ? !curr.modifyModTaskList.some(function (item) {
      return !item.push;
    }) : true;
  };

  Module.prototype.transModInfo = function (modContentStr, modPosStr, modScaleStr, modId) {
    var modContent = {
      room_id: '',
      zorder: 0
    };
    var modPos = {
      x: 0,
      y: 0,
      z: 0,
      w: 0,
      h: 0,
      ar_w: 1,
      ar_h: 1
    };
    var modScale = {
      scale: 1,
      ofs_x: 0,
      ofs_y: 0
    };

    if (modContentStr) {
      try {
        var temp = JSON.parse(modContentStr);
        var fileInfo = temp.file_info;

        if (fileInfo) {
          temp.file_info = {
            fileID: fileInfo.file_id,
            fileName: fileInfo.file_name,
            fileType: +fileInfo.file_type
          };
        } // 普通白板/普通文件 unique_id 为该白板ID，Excel 则为 fileid。兼容 roomkit 没使用 superboard 场景


        if (!temp.unique_id) {
          temp.unique_id = (fileInfo === null || fileInfo === void 0 ? void 0 : fileInfo.file_type) === 4 ? fileInfo.file_id : modId;
        }

        modContent = temp;
      } catch (e) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_trans', JSON.stringify({
          error: e.message,
          modContentStr: modContentStr
        }));
      }
    }

    if (modPosStr) {
      try {
        modPos = JSON.parse(modPosStr);
      } catch (e) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_trans', JSON.stringify({
          error: e.message,
          modPosStr: modPosStr
        }));
      }
    }

    if (modScaleStr) {
      try {
        modScale = JSON.parse(modScaleStr);
        modScale.scale = Math.max(modScale.scale, 1);
      } catch (e) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_trans', JSON.stringify({
          error: e.message,
          modScaleStr: modScaleStr
        }));
      }
    }

    return {
      modContent: modContent,
      modPos: modPos,
      modScale: modScale
    };
  }; // 校验相关view层设置的白板信息，增加容错性，view没有设置时返回错误码


  Module.prototype.checkModInfo = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    if (!curr || !curr.width || !curr.height) return false;
    return curr;
  };
  /**
   *
   * @param whiteboardID
   */


  Module.prototype.deleteMap = function (whiteboardID) {
    delete this.modIdMapData[whiteboardID];
  };

  Module.prototype.getModPropSeq = function (whiteboardID) {
    var curr = this.modIdMapData[whiteboardID];
    return curr.modPropSeq;
  };

  Module.prototype.decodeH5Extra = function (mod_extra) {
    mod_extra = mod_extra || '';
    return mod_extra.includes('H5_') ? mod_extra : Object(_utils__WEBPACK_IMPORTED_MODULE_34__["decodeStringBase64"])(mod_extra);
  };

  Module.prototype.checkH5Extra = function (modID, modExtra, push) {
    try {
      var result = '';
      var currH5Extra = this.getH5Extra(modID, true);

      if (currH5Extra) {
        var currH5ExtraObj = JSON.parse(currH5Extra); // 判断当前是自定义 H5 课件，还是动态 PPT

        if (currH5ExtraObj.H5_target) {
          if (modExtra) {
            // 动态 PPT
            var modExtraObj = JSON.parse(modExtra);
            var _a = currH5ExtraObj.H5_target,
                s = _a.s,
                p = _a.p,
                e_1 = _a.e; // local

            var _b = modExtraObj.H5_target,
                s_r = _b.s,
                p_r = _b.p,
                e_r_1 = _b.e; // remote

            if (s_r === s && p_r === p) {
              if (!push) {
                var index = e_1.findIndex(function (item) {
                  return item.s && e_r_1[0].id === item.id;
                });

                if (index !== -1) {
                  e_1.splice(index, 1);
                }

                currH5ExtraObj.H5_target.e = e_1.concat(e_r_1);
                result = JSON.stringify(currH5ExtraObj);
              } else {
                if (e_r_1.length < e_1.length) {
                  result = modExtra;
                } else if (e_r_1.length > e_1.length) {
                  modExtraObj.H5_target.e = e_r_1.slice(e_1.length);
                  result = JSON.stringify(modExtraObj);
                } else {
                  var temp_1 = [];
                  e_r_1.forEach(function (item, key) {
                    var index = e_1.findIndex(function (subitem) {
                      return item.id === subitem.id;
                    });
                    index !== key && temp_1.push(item);
                  });
                  var last = e_r_1[e_r_1.length - 1];
                  result = !temp_1.length ? last.s ? (modExtraObj.H5_target.e = [last], JSON.stringify(modExtraObj)) : '' : (modExtraObj.H5_target.e = temp_1, JSON.stringify(modExtraObj));
                }
              }
            } else {
              result = modExtra;
            }
          } else {
            result = '';
          }
        } else {
          // 自定义 H5
          result = modExtra;
        }
      } else {
        result = modExtra;
      }

      return result;
    } catch (error) {
      return '';
    }
  };

  Module.prototype.updateMapByModifyModOption = function (modifyModOption, modSeq, push) {
    var mod_id = modifyModOption.mod_id,
        mod_title = modifyModOption.mod_title,
        mod_horizontal_percent = modifyModOption.mod_horizontal_percent,
        mod_vertical_percent = modifyModOption.mod_vertical_percent,
        mod_reserve = modifyModOption.mod_reserve,
        mod_scale = modifyModOption.mod_scale,
        mod_content = modifyModOption.mod_content,
        is_modify_mod_horizontal_percent = modifyModOption.is_modify_mod_horizontal_percent,
        is_modify_mod_vertical_percent = modifyModOption.is_modify_mod_vertical_percent,
        is_modify_mod_reserve = modifyModOption.is_modify_mod_reserve,
        is_modify_mod_title = modifyModOption.is_modify_mod_title,
        is_modify_mod_extra = modifyModOption.is_modify_mod_extra,
        is_modify_mod_scale = modifyModOption.is_modify_mod_scale,
        is_modify_mod_content = modifyModOption.is_modify_mod_content;
    var mod_extra = this.decodeH5Extra(modifyModOption.mod_extra); // 获取原 seq 值

    var _a = this.getModPropSeq(mod_id),
        mod_horizontal_percent_seq = _a.mod_horizontal_percent,
        mod_vertical_percent_seq = _a.mod_vertical_percent,
        mod_reserve_seq = _a.mod_reserve,
        mod_title_seq = _a.mod_title,
        mod_extra_seq = _a.mod_extra,
        mod_scale_seq = _a.mod_scale,
        mod_content_seq = _a.mod_content; // 获取原 horizontalPercent, verticalPercent, pptStep


    var _b = this.getMap(mod_id),
        horizontalPercent = _b.horizontalPercent,
        verticalPercent = _b.verticalPercent,
        pptStep = _b.pptStep; // push 至 view 数据


    var pushData = {
      isPushScroll: false,
      horizontalPercent: horizontalPercent,
      verticalPercent: verticalPercent,
      pptStep: pptStep
    };
    var result; // 更新水平滚动条

    if (is_modify_mod_horizontal_percent && modSeq > mod_horizontal_percent_seq) {
      pushData.isPushScroll = true;
      pushData.horizontalPercent = +mod_horizontal_percent || 0;
      var temp1 = {
        whiteboardID: mod_id,
        horizontalPercent: pushData.horizontalPercent,
        modPropSeq: {
          mod_horizontal_percent: modSeq
        }
      };
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_h_percent', JSON.stringify({
        temp1: temp1
      }));
      this.updateMap(temp1);
    } // 更新垂直滚动条


    if (is_modify_mod_vertical_percent && modSeq > mod_vertical_percent_seq) {
      pushData.isPushScroll = true;
      pushData.verticalPercent = +mod_vertical_percent || 0;
      pushData.pptStep = +mod_reserve || 1;
      var temp2 = {
        whiteboardID: mod_id,
        verticalPercent: pushData.verticalPercent,
        pptStep: pushData.pptStep,
        modPropSeq: {
          mod_vertical_percent: modSeq
        }
      };
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_v_percent', JSON.stringify({
        temp2: temp2
      }));
      this.updateMap(temp2);
    } // 更新 step


    if (is_modify_mod_reserve && modSeq > mod_reserve_seq) {
      pushData.isPushScroll = true;
      pushData.pptStep = +mod_reserve || 1;
      var temp3 = {
        whiteboardID: mod_id,
        pptStep: pushData.pptStep,
        modPropSeq: {
          mod_reserve: modSeq
        }
      };
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_step', JSON.stringify({
        temp3: temp3
      }));
      this.updateMap(temp3);
    }

    if (pushData.isPushScroll && push) {
      this.pushScrollHandle(mod_id, pushData.horizontalPercent, pushData.verticalPercent, pushData.pptStep); // 被动切页后清空 h5Extra

      this.updateMap({
        whiteboardID: mod_id,
        modExtra: ''
      });
      result = modifyModOption;
    } // 更新 name


    if (is_modify_mod_title && modSeq > mod_title_seq) {
      var temp4 = {
        whiteboardID: mod_id,
        name: mod_title,
        modPropSeq: {
          mod_title: modSeq
        }
      };
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_name', JSON.stringify({
        temp4: temp4
      }));
      this.updateMap(temp4);
    } // 更新 mod_extra


    if (is_modify_mod_extra && modSeq > mod_extra_seq) {
      var temp5 = {
        whiteboardID: mod_id,
        modExtra: mod_extra,
        modPropSeq: {
          mod_extra: modSeq
        }
      };

      if (push) {
        // 校验远端push动画
        var increment = this.checkH5Extra(mod_id, mod_extra, true); // 过滤空动画：翻页时动画会清空

        if (increment) {
          this.pushExtraHandle(mod_id, increment);
          result = modifyModOption;
        }
      }

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_h5extra', JSON.stringify({
        temp5: temp5
      }));
      this.updateMap(temp5);
    } // 更新 mod_scale


    if (is_modify_mod_scale && modSeq > mod_scale_seq) {
      var modScale = JSON.parse(mod_scale);
      var temp5 = {
        whiteboardID: mod_id,
        modScale: modScale,
        modPropSeq: {
          mod_scale: modSeq
        }
      };

      if (push) {
        this.pushScaleHandle(mod_id, modScale.scale, modScale.ofs_x, modScale.ofs_y);
      }

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_scale', JSON.stringify({
        temp5: temp5
      }));
      this.updateMap(temp5);
    } // 更新 mod_content


    if (is_modify_mod_content && modSeq > mod_content_seq) {
      var modContent = JSON.parse(mod_content);
      var temp5 = {
        whiteboardID: mod_id,
        zorder: modContent.zorder,
        modPropSeq: {
          mod_content: modSeq
        }
      };
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_content', JSON.stringify({
        temp5: temp5
      }));
      this.updateMap(temp5);

      if (push) {
        this.pushSwitchViewHandle();
      }
    }

    return result;
  };
  /**
   *
   * @param mod 白板全量信息，用于更新本地
   */


  Module.prototype.updateMapByMod = function (mod) {
    var _a = this.transModInfo(mod.mod_content, mod.mod_pos, mod.mod_scale, mod.mod_id),
        modContent = _a.modContent,
        modPos = _a.modPos,
        modScale = _a.modScale;

    this.updateMap({
      whiteboardID: mod.mod_id,
      name: mod.mod_title,
      aspectWidth: modPos.ar_w,
      aspectHeight: modPos.ar_h,
      roomID: modContent.room_id,
      uniqueID: modContent.unique_id,
      zorder: modContent.zorder,
      fileInfo: Object.freeze(modContent.file_info),
      createTime: mod.mod_create_time ? +mod.mod_create_time : 0,
      horizontalPercent: mod.mod_horizontal_percent || 0,
      verticalPercent: mod.mod_vertical_percent || 0,
      pptStep: mod.mod_reserve || 1,
      modScale: modScale,
      modType: mod.mod_type,
      modSubtype: mod.mod_subtype,
      modSeq: mod.mod_seq,
      modExtra: this.decodeH5Extra(mod.mod_extra),
      outPageCount: modContent.whiteboard_page_count,
      outZorder: modContent.zorder,
      modPropSeq: {
        mod_title: mod.mod_seq,
        mod_type: mod.mod_seq,
        mod_subtype: mod.mod_seq,
        mod_pos: mod.mod_seq,
        mod_status: mod.mod_seq,
        mod_content: mod.mod_seq,
        mod_extra: mod.mod_seq,
        mod_reserve: mod.mod_seq,
        mod_delete_flag: mod.mod_seq,
        mod_horizontal_percent: mod.mod_seq,
        mod_vertical_percent: mod.mod_seq,
        mod_scale: mod.mod_seq
      }
    });
  };

  Module.prototype.updateModListSeq = function (modListSeq) {
    modListSeq && (this.modListSeq = modListSeq);
  };

  Module.prototype.splitPage = function (whiteboardID, width, height) {
    var curr = this.getMap(whiteboardID);
    if (!curr || !width || !height) return;
    var innerPageCount = 1,
        innerPageCx = 0,
        innerPageCy = 0;

    if (width >= height) {
      // 水平分页
      innerPageCy = height;
      innerPageCx = innerPageCy;
      innerPageCount = Math.ceil(width / height);

      if (innerPageCount > 100) {
        innerPageCx = Math.ceil(width / 99); // 先分99页，多余的算第100页

        innerPageCount = 100;
      }

      curr.innerDirection = _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardViewScrollDirection"].Horizontal;
    } else {
      // 垂直分页
      innerPageCx = width;
      innerPageCy = innerPageCx;
      innerPageCount = Math.ceil(height / width);

      if (innerPageCount > 100) {
        innerPageCy = Math.ceil(height / 99); // 先分99页，多余的算第100页

        innerPageCount = 100;
      }

      curr.innerDirection = _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardViewScrollDirection"].Vertical;
    }

    curr.innerPageCount = innerPageCount; // 更新graphicListSeqs+pullMarks

    for (var index = 0; index < innerPageCount; index++) {
      // reloadView 渲染的是本地图元，已同步的seq不能清零，否则再次操作图元会失败（seq小于服务端seq）
      if (!curr.graphicListSeqs[index]) curr.graphicListSeqs[index] = 0;
      curr.pullMarks[index] = false;
    } // 更新innerPageSize


    curr.innerPageSize.cx = innerPageCx;
    curr.innerPageSize.cy = innerPageCy;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_split_page', JSON.stringify({
      whiteboardID: whiteboardID,
      width: width,
      height: height,
      innerPageCx: innerPageCx,
      innerPageCy: innerPageCy,
      innerPageCount: innerPageCount
    }));
  };

  Module.prototype.setFileInfo = function (info) {
    this.fileInfo = info;
  };

  Module.prototype.transGraphicList = function (result, graphicList, width, height, viewHeight) {
    var _this = this;

    if (graphicList && graphicList.length) {
      var isSendPB_1 = this.socket.isSendPB;
      var deviate_1 = Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calculateDeviateValue"])(width, height, viewHeight, this.fileInfo);
      graphicList.forEach(function (item) {
        if (result.some(function (subitem) {
          return subitem.graphic_id === item.graphic_id;
        })) return; // 去重

        if (item.zorder > _this.zorderSeq) _this.zorderSeq = item.zorder; // @ts-ignore

        isSendPB_1 ? Object(_utils__WEBPACK_IMPORTED_MODULE_34__["transPbData"])(item, true) : Object(_utils__WEBPACK_IMPORTED_MODULE_34__["transBase64Data"])(item, true); // @ts-ignore

        _this.setGraphicItem(item); // @ts-ignore


        Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calPlaceHandle"])(item, width, true, deviate_1, height); // @ts-ignore

        item.color = Object(_view_utils__WEBPACK_IMPORTED_MODULE_37__["transColor"])(item.color, true);
        result.push(item);
      });
    }
  };

  Module.prototype.pushScrollHandle = function (modID, modHPercent, modVPercent, step) {
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushScroll, modID, modHPercent, modVPercent, step);
  };

  Module.prototype.pushScaleHandle = function (modID, scale, ofsX, ofsY) {
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushScale, modID, scale, ofsX, ofsY);
  };

  Module.prototype.pushExtraHandle = function (modID, modExtra) {
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushH5ExtraAppended, modID, modExtra);
  };

  Module.prototype.pushSwitchViewHandle = function () {
    var _a = this.getCurrentActivitedView(),
        uniqueID = _a[0],
        mod_id = _a[1];

    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoSuperBoardEventType"].RemoteSwitchMod, uniqueID, mod_id);
  };

  Module.prototype.pushSetModHandle = function (resData) {
    var mod_list_seq = resData.mod_list_seq,
        action_list = resData.action_list;
    var currAction = action_list[0];
    var action = currAction.action;

    if (action === _entity__WEBPACK_IMPORTED_MODULE_38__["ModAction"].Removed) {
      this.pushRemovedMod(currAction.mod_id);
    } else if (action === _entity__WEBPACK_IMPORTED_MODULE_38__["ModAction"].Add) {
      this.pushAddMod(currAction);
    }

    if (mod_list_seq >= this.modListSeq) {
      this.updateModListSeq(mod_list_seq);

      if (action === _entity__WEBPACK_IMPORTED_MODULE_38__["ModAction"].Modify) {
        this.pushModifyMod(currAction);
      }
    } else {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().warn(['WhiteBoard_Service'], 'module_remote', JSON.stringify({
        localModListSeq: this.modListSeq,
        remoteModListSeq: mod_list_seq,
        msg: 'throw away'
      }));
    }
  };

  Module.prototype.pushClearPageGraphicsHandle = function (resData) {
    var action_seqs = resData.action_seqs,
        pages = resData.pages,
        layers = resData.layers,
        whiteboardID = resData.mod_id;
    if (!this.checkModInfo(whiteboardID)) return;
    var graphicListSeqs = {};
    pages && pages.forEach(function (val, i) {
      return graphicListSeqs[val] = action_seqs[i];
    });
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
      whiteboardID: whiteboardID,
      graphicListSeqs: graphicListSeqs,
      layers: layers,
      actionMsg: 'remote clear'
    }));
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushClearPageGraphics, whiteboardID, layers);
    this.updateMapByGraphicListSeqs(whiteboardID, graphicListSeqs);
    this.updateMap({
      whiteboardID: whiteboardID,
      operateTimes: 0
    });
  };

  Module.prototype.pushClearUserGraphicListHandle = function (resData) {
    var id_name = resData.id_name,
        mods = resData.mods;
    var userID = this.socket.getUserID();
    if (id_name == userID) return;
    mods.forEach(function (e) {
      var whiteboardID = e.mod_id,
          graphic_ids = e.graphic_ids;
      _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushDrawPageGraphics, whiteboardID, [], graphic_ids);
    });
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_delete_graphic', JSON.stringify({
      id_name: id_name,
      mods: mods,
      actionMsg: 'remote delete graphic'
    }));
  };

  Module.prototype.pushDrawPageGraphicsHandle = function (resData) {
    var _this = this;

    var page_graphics = resData.page_graphics,
        whiteboardID = resData.mod_id;
    var curr = this.checkModInfo(whiteboardID);
    if (!curr) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_remote_draw', JSON.stringify({
      drawPages: page_graphics
    }));
    var width = curr.width;
    var height = curr.height;
    var viewHeight = curr.viewHeight;
    var graphicListSeqs = {},
        graphicList = [],
        delGraphicIdList = []; // 解析图元数据

    page_graphics.forEach(function (element) {
      var del_graphic_id_list = element.del_graphic_id_list,
          graphic_list = element.graphic_list,
          action_seq = element.action_seq,
          page = element.page; // 丢弃action_seq比本地小的数据

      if (!curr.graphicListSeqs[page] || action_seq > curr.graphicListSeqs[page]) {
        _this.transGraphicList(graphicList, graphic_list, width, height, viewHeight);

        del_graphic_id_list && delGraphicIdList.push.apply(delGraphicIdList, del_graphic_id_list);
        graphicListSeqs[page] = action_seq;
      }
    });
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
      whiteboardID: whiteboardID,
      graphicListSeqs: graphicListSeqs,
      actionMsg: 'remote_draw'
    }));
    this.updateMapByGraphicListSeqs(whiteboardID, graphicListSeqs);
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushDrawPageGraphics, whiteboardID, graphicList, delGraphicIdList);
  };

  Module.prototype.pushAddMod = function (pushSetModAction) {
    var mod_id = pushSetModAction.mod_id;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_remote_add', JSON.stringify({
      whiteboardID: mod_id
    }));
    this.updateMapByMod(pushSetModAction);
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushAddMod, mod_id, this.getMap(mod_id).uniqueID);
  };

  Module.prototype.pushRemovedMod = function (mod_id) {
    var uniqueID = this.getMap(mod_id).uniqueID;
    this.deleteMap(mod_id);
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushRemovedMod, mod_id, uniqueID);
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].RemoteDelMod);
  };

  Module.prototype.pushModifyMod = function (pushSetModAction) {
    if (!pushSetModAction.mod_horizontal_percent) pushSetModAction.mod_horizontal_percent = 0;
    if (!pushSetModAction.mod_vertical_percent) pushSetModAction.mod_vertical_percent = 0;
    var mod_id = pushSetModAction.mod_id,
        mod_seq = pushSetModAction.mod_seq,
        mod_title = pushSetModAction.mod_title,
        mod_horizontal_percent = pushSetModAction.mod_horizontal_percent,
        mod_vertical_percent = pushSetModAction.mod_vertical_percent,
        mod_reserve = pushSetModAction.mod_reserve,
        mod_extra = pushSetModAction.mod_extra,
        mod_scale = pushSetModAction.mod_scale,
        mod_content = pushSetModAction.mod_content,
        is_modify_mod_vertical_percent = pushSetModAction.is_modify_mod_vertical_percent,
        is_modify_mod_horizontal_percent = pushSetModAction.is_modify_mod_horizontal_percent,
        is_modify_mod_reserve = pushSetModAction.is_modify_mod_reserve,
        is_modify_mod_title = pushSetModAction.is_modify_mod_title,
        is_modify_mod_extra = pushSetModAction.is_modify_mod_extra,
        is_modify_mod_scale = pushSetModAction.is_modify_mod_scale,
        is_modify_mod_content = pushSetModAction.is_modify_mod_content;
    var curr = this.getMap(mod_id);
    if (!curr) return;
    var setModSendSwitch = this.getModSendSwitch(mod_id);

    if (setModSendSwitch) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_remote_modify', 'immediate update'); // 直接更新

      if (mod_seq > curr.modSeq) {
        var temp = {
          whiteboardID: mod_id,
          modSeq: mod_seq
        };
        this.updateMap(temp);
      }

      this.updateMapByModifyModOption(pushSetModAction, mod_seq, true);
    } else {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_remote_modify', 'cache'); // 存入队列

      var data = {
        mod_id: mod_id
      };

      if (is_modify_mod_title) {
        Object.assign(data, {
          mod_title: mod_title,
          is_modify_mod_title: is_modify_mod_title
        });
      }

      if (is_modify_mod_extra) {
        Object.assign(data, {
          mod_extra: mod_extra,
          is_modify_mod_extra: is_modify_mod_extra
        });
      }

      if (is_modify_mod_horizontal_percent) {
        Object.assign(data, {
          mod_horizontal_percent: mod_horizontal_percent,
          is_modify_mod_horizontal_percent: is_modify_mod_horizontal_percent
        });
      } // mod_reserve：动态PPT步数与mod_vertical_percent：纵向滚动比例绑定


      if (is_modify_mod_vertical_percent) {
        Object.assign(data, {
          mod_vertical_percent: mod_vertical_percent,
          is_modify_mod_vertical_percent: is_modify_mod_vertical_percent,
          mod_reserve: mod_reserve,
          is_modify_mod_reserve: is_modify_mod_reserve
        });
      }

      if (is_modify_mod_reserve) {
        Object.assign(data, {
          mod_reserve: mod_reserve,
          is_modify_mod_reserve: is_modify_mod_reserve
        });
      }

      if (is_modify_mod_scale) {
        Object.assign(data, {
          mod_scale: mod_scale,
          is_modify_mod_scale: is_modify_mod_scale
        });
      }

      if (is_modify_mod_content) {
        Object.assign(data, {
          mod_content: mod_content,
          is_modify_mod_content: is_modify_mod_content
        });
      } // 更新任务列表


      this.updateModifyModTaskList({
        status: _entity__WEBPACK_IMPORTED_MODULE_38__["TaskStatus"].Pending,
        data: data,
        push: true,
        pushModSeq: mod_seq
      });
    }
  }; // 清除拉取图元标记


  Module.prototype.clearPullMarks = function (whiteboardID) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_clear_pull_mark', 'init pull mark');
    var temp = whiteboardID ? [whiteboardID] : Object.keys(this.modIdMapData);
    Object.values(temp).forEach(function (whiteboardID) {
      var curr = _this.modIdMapData[whiteboardID];
      curr && Object.keys(curr.pullMarks).forEach(function (page) {
        curr.pullMarks[+page] = false;
      });
    });
  };

  Module.prototype.createModInfo = function (view) {
    var modContent = {};

    if (view.fileInfo) {
      var _a = view.fileInfo,
          fileID = _a.fileID,
          fileName = _a.fileName,
          fileType = _a.fileType;
      modContent.file_info = {
        file_id: fileID,
        file_name: fileName,
        file_type: fileType
      };
    }

    if (view.pageCount) {
      modContent.whiteboard_page_count = view.pageCount;
    } // superboard 需要 zorder, unique_id
    // @ts-ignore


    var uniqueID = view.uniqueID;

    if (uniqueID) {
      modContent.unique_id = uniqueID;
      modContent.zorder = Date.now() + this.socket.getServerTimeOffset();
    }

    var modPos = {
      x: 0,
      y: 0,
      z: 0,
      w: 0,
      h: 0,
      ar_w: view.aspectWidth,
      ar_h: view.aspectHeight
    };
    var modScale = {
      scale: 1,
      ofs_x: 0,
      ofs_y: 0
    };
    return {
      modContent: modContent,
      modPos: modPos,
      modScale: modScale
    };
  };

  Module.prototype.compareHandle = function (type, modList) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_compare', 'compare local with server');
    var keys = Object.keys(this.modIdMapData);
    modList.forEach(function (mod) {
      var mod_id = mod.mod_id,
          mod_horizontal_percent = mod.mod_horizontal_percent,
          mod_vertical_percent = mod.mod_vertical_percent,
          mod_reserve = mod.mod_reserve;
      mod_id = mod_id + '';
      mod_horizontal_percent = mod_horizontal_percent || 0;
      mod_vertical_percent = mod_vertical_percent || 0;
      mod_reserve = mod_reserve || 1;
      Object.assign(mod, {
        mod_horizontal_percent: mod_horizontal_percent,
        mod_vertical_percent: mod_vertical_percent,
        mod_reserve: mod_reserve
      });

      if (keys.indexOf(mod_id) === -1) {
        // add
        if (type === _entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Inner) {
          _this.pushAddMod(mod);
        } else {
          _this.updateMapByMod(mod);
        }
      } else {
        // update
        var _a = _this.getMap(mod_id),
            oldHPercent = _a.horizontalPercent,
            oldVPercent = _a.verticalPercent,
            pptStep = _a.pptStep;

        _this.updateMapByMod(mod);

        if (oldHPercent !== mod_horizontal_percent || oldVPercent !== mod_vertical_percent || mod_reserve !== pptStep) {
          _this.pushScrollHandle(mod_id, mod_horizontal_percent, mod_vertical_percent, mod_reserve);
        }
      }
    });
    keys.forEach(function (whiteboardID) {
      if (modList.findIndex(function (mod) {
        return mod.mod_id === whiteboardID;
      }) === -1) {
        // delete
        if (type === _entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Inner) {
          _this.pushRemovedMod(whiteboardID);
        } else {
          _this.deleteMap(whiteboardID);
        }
      }
    });
  }; // 获取白板列表，只处理通用任务


  Module.prototype.handleGetModListDetailsRsp = function (resData, type) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var mod_list_seq = body.mod_list_seq;
      var mod_list = body.mod_list; // 更新 mod_list_seq

      mod_list_seq && this.updateModListSeq(mod_list_seq);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
        modListSeq: mod_list_seq,
        actionMsg: 'get list cb success'
      }));
      mod_list = mod_list || []; // 按时间降序

      mod_list.sort(function (mod1, mod2) {
        return +mod2.mod_create_time - +mod1.mod_create_time;
      });
      this.compareHandle(type, mod_list);
      return Promise.resolve(mod_list);
    } else {
      var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_get_list_cb', JSON.stringify({
        errorData: errorData
      }));
      return Promise.reject(errorData);
    }
  };

  Module.prototype.handleDestroyModRsp = function (resData) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var mod_list_seq = body.mod_list_seq,
          mod_id = body.mod_id;
      this.updateModListSeq(mod_list_seq);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
        modListSeq: mod_list_seq,
        actionMsg: 'destroy cb success'
      }));
      this.deleteMap(mod_id);
      return Promise.resolve();
    } else {
      var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_destroy_cb', JSON.stringify({
        errorData: errorData
      }));
      return Promise.reject(errorData);
    }
  };

  Module.prototype.handleCreateModRsp = function (resData) {
    return __awaiter(this, void 0, void 0, function () {
      var header, body, code, message, mod_list_seq, mod_id, modList, mod, data_1, _code, errorData;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            header = resData.header, body = resData.body;
            code = header.code, message = header.message;
            if (!(code === 0)) return [3
            /*break*/
            , 5];
            mod_list_seq = body.mod_list_seq, mod_id = body.mod_id;
            this.updateModListSeq(mod_list_seq);
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
              modListSeq: mod_list_seq,
              actionMsg: 'create cb success'
            }));
            _a.label = 1;

          case 1:
            _a.trys.push([1, 3,, 4]);

            return [4
            /*yield*/
            , this.getModInfo([mod_id])];

          case 2:
            modList = _a.sent();
            mod = modList[0];
            this.updateMapByMod(mod);
            return [2
            /*return*/
            , mod.mod_id];

          case 3:
            data_1 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(data_1)];

          case 4:
            return [3
            /*break*/
            , 6];

          case 5:
            _code = code === 3 ? _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNameLimit : code;
            errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(_code, message);
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_create_cb', JSON.stringify({
              errorData: errorData
            }));
            return [2
            /*return*/
            , Promise.reject(errorData)];

          case 6:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Module.prototype.handleGetModInfoRsp = function (resData) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var mod_list = body.mod_list;
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_get_info_cb', JSON.stringify(mod_list || []));
      return Promise.resolve(mod_list || []);
    } else {
      var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_get_info_cb', JSON.stringify(errorData));
      return Promise.reject(errorData);
    }
  };

  Module.prototype.handleSetModRsp = function (setModAction, setModOption, resData) {
    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var mod_list_seq = body.mod_list_seq,
          mod_seq = body.mod_seq,
          mod_id = body.mod_id;
      this.modListSeq = mod_list_seq; // 更新 mod_seq

      this.updateMap({
        whiteboardID: mod_id,
        modSeq: mod_seq
      }); // 更新 module 中对应字段的 mod_seq

      this.updateMapByModifyModOption(setModOption, mod_seq, false);
      this.setModRspAfter({
        setModAction: setModAction,
        setModOption: setModOption,
        sendResultType: _entity__WEBPACK_IMPORTED_MODULE_38__["SendResultType"].success
      });
    } else {
      // code 为 3 表示参数长度超过限制，透传至 setMod 调用处处理
      this.setModRspAfter({
        setModAction: setModAction,
        setModOption: setModOption,
        sendResultType: _entity__WEBPACK_IMPORTED_MODULE_38__["SendResultType"].error,
        errorData: code === 3 ? {
          code: code,
          msg: message
        } : Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message)
      });
    }
  };

  Module.prototype.handleGetPageGraphicsListRsp = function (whiteboardID, resData) {
    var _this = this;

    var header = resData.header,
        body = resData.body;
    var code = header.code,
        message = header.message;

    if (code === 0) {
      var curr = this.checkModInfo(whiteboardID);
      if (!curr) return;
      var width_1 = curr.width;
      var height_1 = curr.height;
      var viewHeight_1 = curr.viewHeight;
      var pages = body.pages;
      var incrementPages_1 = [],
          incrementSeqs_1 = [];
      var graphicListSeqs_1 = {},
          graphicList_1 = [],
          delGraphicIdList_1 = [];
      pages.forEach(function (item) {
        var page = item.page,
            ret_graphic_list_seq = item.ret_graphic_list_seq,
            svr_graphic_list_seq = item.svr_graphic_list_seq,
            graphic_list = item.graphic_list,
            del_graphic_id_list = item.del_graphic_id_list;

        _this.transGraphicList(graphicList_1, graphic_list, width_1, height_1, viewHeight_1);

        del_graphic_id_list && delGraphicIdList_1.push.apply(delGraphicIdList_1, del_graphic_id_list);
        graphicListSeqs_1[page] = svr_graphic_list_seq; // 判断是否继续拉取

        if (svr_graphic_list_seq !== ret_graphic_list_seq && ret_graphic_list_seq !== 0) {
          incrementPages_1.push(page);
          incrementSeqs_1.push(ret_graphic_list_seq);
        } else {
          _this.getMap(whiteboardID).pullMarks[page] = true;
        }
      });
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_update_seq', JSON.stringify({
        whiteboardID: whiteboardID,
        graphicListSeqs: graphicListSeqs_1,
        actionMsg: 'get list cb success'
      }));
      this.updateMapByGraphicListSeqs(whiteboardID, graphicListSeqs_1);
      _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].GetPageGraphicsList, whiteboardID, graphicList_1, delGraphicIdList_1); // 继续拉取

      if (incrementPages_1.length) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_get_list_cb', 'increment get');
        this.getPageGraphicsList(whiteboardID, incrementPages_1, incrementSeqs_1);
      }
    } else {
      var errorData = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'module_get_list_cb', JSON.stringify(errorData));
    }
  };

  Module.prototype.getModInfo = function (mod_id_list) {
    return __awaiter(this, void 0, void 0, function () {
      var resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.GetMod, {
              mod_id_list: mod_id_list
            })];

          case 1:
            resData = _a.sent();
            return [2
            /*return*/
            , this.handleGetModInfoRsp(resData)];
        }
      });
    });
  };

  Module.prototype.getModListDetails = function (type, modListSeq) {
    if (type === void 0) {
      type = _entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Initiative;
    }

    if (modListSeq === void 0) {
      modListSeq = this.defaultModListSeq;
    }

    return __awaiter(this, void 0, void 0, function () {
      var resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.GetModList, {
              mod_list_seq: modListSeq,
              limit: this.modLimit,
              marker: this.marker,
              mod_type: this.defaultModType
            })];

          case 1:
            resData = _a.sent();
            return [2
            /*return*/
            , this.handleGetModListDetailsRsp(resData, type)];
        }
      });
    });
  };

  Module.prototype.setModHandle = function (setModAction, setModOption) {
    return __awaiter(this, void 0, void 0, function () {
      var mod_id, resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            mod_id = setModOption.mod_id;
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.ModifyMod, __assign({
              mod_seq: this.getMap(mod_id).modSeq
            }, setModOption))];

          case 1:
            resData = _a.sent();
            this.handleSetModRsp(setModAction, setModOption, resData);
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Module.prototype.setMod = function (setModAction, setModOption) {
    var setModSendSwitch = this.setModBefore(setModAction, setModOption);
    if (!setModSendSwitch) return;
    this.setModHandle(setModAction, setModOption);
  };

  Module.prototype.checkScroll = function (whiteboardID, hPercent, vPercent, pptStep) {
    var curr = this.getMap(whiteboardID);

    if (curr) {
      var horizontalPercent = curr.horizontalPercent,
          verticalPercent = curr.verticalPercent,
          _pptStep = curr.pptStep;
      var diff = false;
      var temp = {
        mod_id: whiteboardID
      };

      if (hPercent !== horizontalPercent) {
        temp.mod_horizontal_percent = hPercent;
        temp.is_modify_mod_horizontal_percent = true;
        diff = temp;
      }

      if (vPercent !== verticalPercent || pptStep !== _pptStep) {
        temp.mod_vertical_percent = vPercent; // 后台权限会判断是否有修改滚动百分百，如果是当前页改变步数，其值要设置为false

        temp.is_modify_mod_vertical_percent = vPercent !== verticalPercent;
        temp.mod_reserve = pptStep;
        temp.is_modify_mod_reserve = true;
        diff = temp;
      }

      return diff;
    } else {
      return false;
    }
  };

  Module.prototype.checkScale = function (whiteboardID, scale, ofsX, ofsY) {
    var curr = this.getMap(whiteboardID);

    if (curr) {
      var temp = {
        mod_id: whiteboardID,
        mod_scale: JSON.stringify({
          scale: scale,
          ofs_x: ofsX,
          ofs_y: ofsY
        }),
        is_modify_mod_scale: true
      };
      return temp;
    } else {
      return false;
    }
  };

  Module.prototype.checkSwitchView = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);

    if (curr) {
      var json = {
        unique_id: curr.uniqueID,
        whiteboard_page_count: curr.outPageCount,
        zorder: Date.now() + this.socket.getServerTimeOffset()
      };

      if (curr.fileInfo) {
        var _a = curr.fileInfo,
            fileID = _a.fileID,
            fileName = _a.fileName,
            fileType = _a.fileType;
        json.file_info = {
          file_id: fileID,
          file_name: fileName,
          file_type: fileType
        };
      }

      var temp = {
        mod_id: whiteboardID,
        mod_content: JSON.stringify(json),
        is_modify_mod_content: true
      };
      return temp;
    } else {
      return false;
    }
  }; // 根据当前滚动比例计算当前所跨页


  Module.prototype.getCurrentPages = function (whiteboardID, hPercent, vPercent) {
    var curr = this.getMap(whiteboardID);
    var width = curr.width,
        height = curr.height,
        innerPageSize = curr.innerPageSize,
        viewWidth = curr.viewWidth,
        viewHeight = curr.viewHeight,
        innerDirection = curr.innerDirection;
    var minPage, maxPage;

    if (innerDirection === _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardViewScrollDirection"].Horizontal) {
      minPage = Math.floor(width * hPercent / innerPageSize.cx);
      maxPage = Math.floor((viewWidth + width * hPercent) / innerPageSize.cx);
    } else {
      minPage = Math.floor(height * vPercent / innerPageSize.cy);
      maxPage = Math.floor((viewHeight + height * vPercent) / innerPageSize.cy);
    } // 上下多拉取 maxPage - minPage 页


    var stridePage = maxPage - minPage + 1;
    minPage = Math.max(0, minPage - stridePage);
    maxPage += stridePage;
    maxPage = maxPage > 99 ? 99 : Math.min(maxPage, curr.innerPageCount - 1);
    return {
      minPage: minPage,
      maxPage: maxPage
    };
  };

  Module.prototype.initUserAuthMap = function () {
    if (this.userAuthMap.syncTaskId) {
      window.clearInterval(this.userAuthMap.syncTaskId);
    }

    this.userAuthMap.roomSeq = 0;
    this.userAuthMap.userSeq = 0;
    this.userAuthMap.syncTaskId = 0;
    this.userAuthMap.model = Object.freeze({
      scale: 1,
      scroll: 1,
      update: 1,
      "delete": 1,
      move: 1,
      clear: 1,
      create: 1
    });
    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushAuthChange, {
      scale: 1,
      scroll: 1
    }, {
      update: 1,
      "delete": 1,
      move: 1,
      clear: 1,
      create: 1
    });
  };

  Module.prototype.getRemoteRoomUserAuth = function (type) {
    return __awaiter(this, void 0, void 0, function () {
      var cmd, res, _a, code, message, error;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            cmd = type == 'room' ? _cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.GetRoomAuth : _cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.GetUserAuth;
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(cmd, {})];

          case 1:
            res = _b.sent();
            _a = res.header, code = _a.code, message = _a.message;

            if (code === 0) {
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], "mod.get_" + type + "_auth_cb", 'success');
              return [2
              /*return*/
              , res.body];
            } else {
              error = Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(code, message);
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], "mod.get_" + type + "_auth_cb", JSON.stringify(error));
              return [2
              /*return*/
              , Promise.reject(error)];
            }

            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Module.prototype.setUserAuthMap = function (res) {
    res.auth_seq = res.auth_seq || 0;
    if (res.auth_seq <= 0) return; // 权限有更改时才同步到本地

    if (res.id_name) {
      this.userAuthMap.userSeq = res.auth_seq;
    } else {
      this.userAuthMap.roomSeq = res.auth_seq;
    } // 1. 后台修改了用户权限
    // 2. 后台一直没有修改用户权限，房间权限修改后需要同步到用户


    if (res.id_name || this.userAuthMap.userSeq == 0) {
      var oldModel = JSON.parse(JSON.stringify(this.userAuthMap.model));
      var model = {
        scale: 1,
        scroll: 1,
        update: 1,
        "delete": 1,
        move: 1,
        clear: 1,
        create: 1
      }; // 0:none, 1:scale, 2:page

      var list = res.module_auth || [];
      model.scale = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewAuth"].Scale);
      model.scroll = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewAuth"].Scroll); // 0:none, 1:append, 2:update, 4:delete, 8:move, 16:clear, 32:create

      list = res.graphic_auth || [];
      model.update = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewGraphicAuth"].Update);
      model["delete"] = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewGraphicAuth"].Delete);
      model.move = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewGraphicAuth"].Move);
      model.clear = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewGraphicAuth"].Clear);
      model.create = +list.includes(_view_entities_view__WEBPACK_IMPORTED_MODULE_36__["ZegoWhiteboardViewGraphicAuth"].Create);
      this.userAuthMap.model = Object.freeze(model);
      this.onPushAuthChange(this.userAuthMap.model, oldModel);
    }
  };

  Module.prototype.onPushAuthChange = function (cur, old) {
    var whiteboard;
    var graphic;

    if (cur.scale != old.scale || cur.scroll != old.scroll) {
      whiteboard = {
        scale: cur.scale,
        scroll: cur.scroll
      };
    }

    if (cur.update != old.update || cur["delete"] != old["delete"] || cur.move != old.move || cur.clear != old.clear || cur.create != old.create) {
      graphic = {
        update: cur.update,
        "delete": cur["delete"],
        move: cur.move,
        clear: cur.clear,
        create: cur.create
      };
    }

    _view_services_event__WEBPACK_IMPORTED_MODULE_32__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_32__["ZegoServiceEventType"].PushAuthChange, whiteboard, graphic);
  };

  Module.prototype.pushUserAuthHandle = function (res) {
    var _this = this;

    var userID = this.socket.getUserID();
    var userSeq = this.userAuthMap.userSeq;
    res.user_auth.some(function (v) {
      if (v.id_name === userID && v.auth_seq > userSeq) {
        _this.setUserAuthMap(v);

        return true;
      }

      return false;
    });
  };

  Module.prototype.syncRemoteSeq = function () {
    return __awaiter(this, void 0, void 0, function () {
      var res, _a, sync_interval, room_auth_seq, user_auth_seq, mod_list_seq;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.Sync, {})];

          case 1:
            res = _b.sent();

            if (res.header.code === 0) {
              _a = res.body, sync_interval = _a.sync_interval, room_auth_seq = _a.room_auth_seq, user_auth_seq = _a.user_auth_seq, mod_list_seq = _a.mod_list_seq; // 启动心跳

              if (!this.userAuthMap.syncTaskId) {
                this.userAuthMap.syncTaskId = window.setInterval(function () {
                  _this.syncRemoteSeq();
                }, (sync_interval || 30) * 1000);
              }

              this.syncRoomUserAuth(room_auth_seq, user_auth_seq);
              this.syncModuleHandle(mod_list_seq);
            }

            return [2
            /*return*/
            ];
        }
      });
    });
  }; // 按页分批拉取图元


  Module.prototype.getPageGraphicsList = function (whiteboardID, pages, graphicListSeqs) {
    return __awaiter(this, void 0, void 0, function () {
      var curr, currGraphicListSeqs, resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            curr = this.getMap(whiteboardID), currGraphicListSeqs = curr.graphicListSeqs; // 增加背景图的页码 0

            !pages.includes(0) && pages.unshift(0);

            if (!graphicListSeqs) {
              // 从本地最新 seq 开始拉取，如果从来没拉取过，则从 0 开始
              graphicListSeqs = pages.map(function (page) {
                return !curr.pullMarks[page] ? 0 : currGraphicListSeqs[page] || 0;
              });
            } // 增加背景图的页码 seq


            graphicListSeqs.length < pages.length && graphicListSeqs.unshift(currGraphicListSeqs[0] || 0);
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.GetPageGraphics, {
              mod_id: whiteboardID,
              pages: pages,
              graphic_list_seqs: graphicListSeqs,
              limit: this.graphicLimit
            })];

          case 1:
            resData = _a.sent();
            this.handleGetPageGraphicsListRsp(whiteboardID, resData);
            return [2
            /*return*/
            ];
        }
      });
    });
  }; // 房间白板变更处理


  Module.prototype.syncModuleHandle = function (modListSeq) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], "module_get_list_sync", JSON.stringify({
      localModListSeq: this.modListSeq,
      svrModListSeq: modListSeq
    }));

    if (modListSeq > this.modListSeq) {
      // 拉取白板列表
      this.getModListDetails(_entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Inner, !this.modListSeq ? this.defaultModListSeq : this.modListSeq);
    }
  };

  Module.prototype.syncRoomUserAuth = function (room_auth_seq, user_auth_seq) {
    var _this = this;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], "module_sync_room_user_auth_cb", JSON.stringify({
      localRoom: this.userAuthMap.roomSeq,
      serverRoom: room_auth_seq,
      localUser: this.userAuthMap.userSeq,
      serverUser: user_auth_seq
    }));
    room_auth_seq = room_auth_seq || 0;
    user_auth_seq = user_auth_seq || 0; // 服务端有更新，同步权限

    if (room_auth_seq > this.userAuthMap.roomSeq) {
      this.userAuthMap.roomSeq = room_auth_seq;
      this.getRemoteRoomUserAuth('room').then(function (res) {
        return _this.setUserAuthMap(res);
      });
    }

    if (user_auth_seq > this.userAuthMap.userSeq) {
      this.userAuthMap.userSeq = user_auth_seq;
      this.getRemoteRoomUserAuth('user').then(function (res) {
        return _this.setUserAuthMap(res);
      });
    }
  };

  Module.prototype.checkLogin = function () {
    var roomState = this.socket.getRoomState();

    if (roomState !== 'CONNECTED') {
      // 未登录、断线重连中、已断线
      return Promise.reject(Object(_view_entities_error__WEBPACK_IMPORTED_MODULE_35__["transError"])(_code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom));
    }

    return true;
  };

  Module.prototype.getModList = function () {
    return __awaiter(this, void 0, void 0, function () {
      var checkResult, modList, errorData_1;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            checkResult = this.checkLogin();
            if (checkResult !== true) return [2
            /*return*/
            , checkResult];
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], "module_get_list", JSON.stringify({
              localModListSeq: this.modListSeq
            }));
            return [4
            /*yield*/
            , this.getModListDetails(_entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Initiative)];

          case 1:
            modList = _a.sent();
            return [2
            /*return*/
            , Promise.resolve(modList.map(function (item) {
              return item.mod_id;
            }))];

          case 2:
            errorData_1 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(errorData_1)];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  Module.prototype.destroyMod = function (whiteboardID) {
    return __awaiter(this, void 0, void 0, function () {
      var checkResult, resData;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            checkResult = this.checkLogin();
            if (checkResult !== true) return [2
            /*return*/
            , checkResult];
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.DestroyMod, {
              mod_id: whiteboardID
            })];

          case 1:
            resData = _a.sent();
            return [2
            /*return*/
            , this.handleDestroyModRsp(resData)];
        }
      });
    });
  };

  Module.prototype.createMod = function (view, whiteboardID) {
    return __awaiter(this, void 0, void 0, function () {
      var checkResult, _a, modContent, modPos, modScale, options, resData;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            checkResult = this.checkLogin();
            if (checkResult !== true) return [2
            /*return*/
            , checkResult];
            _a = this.createModInfo(view), modContent = _a.modContent, modPos = _a.modPos, modScale = _a.modScale;
            options = {
              mod_id: whiteboardID || Object(_view_utils__WEBPACK_IMPORTED_MODULE_37__["createGraphicId"])(),
              mod_title: view.name,
              mod_type: this.defaultModType,
              mod_subtype: this.defaultModSubtype,
              mod_delete_flag: this.defaultModDeleteFlag,
              mod_content: JSON.stringify(modContent),
              mod_horizontal_percent: this.defaultHPercent,
              mod_vertical_percent: this.defaultVPercent,
              mod_reserve: this.defaultModReserve,
              mod_pos: JSON.stringify(modPos),
              mod_scale: JSON.stringify(modScale)
            };
            return [4
            /*yield*/
            , this.socket.queueWSCmdHandler(_cmd__WEBPACK_IMPORTED_MODULE_31__["CmdCenter"].Exprsss.CreateMod, options)];

          case 1:
            resData = _b.sent();
            return [2
            /*return*/
            , this.handleCreateModRsp(resData)];
        }
      });
    });
  };

  Module.prototype.getUserAuth = function () {
    return this.userAuthMap.model;
  };

  Module.prototype.updateMapByGraphicListSeqs = function (whiteboardID, graphicListSeqs) {
    var curr = this.getMap(whiteboardID).graphicListSeqs;
    Object.keys(graphicListSeqs).forEach(function (page) {
      curr[+page] = graphicListSeqs[+page];
    });
  }; // 根据图元列表更新is_end_draw、server_timestamp，拉取图元、操作图元成功、收到图元push时更新


  Module.prototype.setGraphicItem = function (graphic) {
    var operate_id = graphic.operate_id,
        data = graphic.data;
    this.graphicMap[graphic.graphic_id] = {
      is_end_draw: operate_id ? graphic.is_end_draw : true,
      server_timestamp: +graphic.server_timestamp || 0,
      operate_id: operate_id,
      type: graphic.type,
      pointData: {
        x: graphic.x || 0,
        y: graphic.y || 0,
        px: graphic.px || 0,
        py: graphic.py || 0,
        data: _typeof(data) == 'object' ? JSON.parse(JSON.stringify(data)) : data
      }
    };
  };

  Module.prototype.getGraphicItem = function (graphic_id) {
    return this.graphicMap[graphic_id];
  };

  Module.prototype.clearGraphicMap = function () {
    this.graphicMap = {};
  };

  Module.prototype.updateGraphicMap = function (whiteboardID, graphicList) {
    var _this = this;

    var width = this.getMap(whiteboardID).width;
    var height = this.getMap(whiteboardID).height;
    var viewHeight = this.getMap(whiteboardID).viewHeight;
    var deviate = Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calculateDeviateValue"])(width, height, viewHeight, this.fileInfo);
    graphicList.forEach(function (item) {
      Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calPlaceHandle"])(item, width, false, -deviate, height);

      _this.setGraphicItem(item);
    });
  };

  Module.prototype.reloadViewGraphics = function (whiteboardID, graphics) {
    var _this = this;

    var width = this.getMap(whiteboardID).width;
    var height = this.getMap(whiteboardID).height;
    var viewHeight = this.getMap(whiteboardID).viewHeight;
    var deviate = Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calculateDeviateValue"])(width, height, viewHeight, this.fileInfo);
    graphics.forEach(function (item) {
      if (item.type === _view_entities_view__WEBPACK_IMPORTED_MODULE_36__["GraphicType"].Cursor) {
        var graphicCursor = _this.getGraphicItem(item.graphic_id);

        if (graphicCursor) {
          var data = graphicCursor.pointData.data;
          item.data = _typeof(data) == 'object' ? JSON.parse(JSON.stringify(data)) : data;
          Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calPlaceHandle"])(item, width, true, deviate, height);
        }
      } else {
        var _a = _this.getGraphicItem(item.graphic_id).pointData,
            x = _a.x,
            y = _a.y,
            px = _a.px,
            py = _a.py,
            data = _a.data;

        item.x = x;
        item.y = y;
        item.px = px;
        item.py = py;
        item.data = _typeof(data) == 'object' ? JSON.parse(JSON.stringify(data)) : data;
        Object(_utils__WEBPACK_IMPORTED_MODULE_34__["calPlaceHandle"])(item, width, true, deviate, height);
      }
    });
  };
  /**
   *
   * @param options 更新本地白板信息
   */


  Module.prototype.updateMap = function (options) {
    var curr = this.getMap(options.whiteboardID);

    if (curr) {
      var modPropSeq = options.modPropSeq;

      if (modPropSeq) {
        Object.assign(curr.modPropSeq || {}, modPropSeq);
      }

      delete options.modPropSeq;
      Object.assign(curr, options);
    } else {
      this.modIdMapData[options.whiteboardID] = __assign({
        graphicListSeqs: {
          0: 0
        },
        pullMarks: {
          0: false
        },
        modSeq: 0,
        width: 0,
        height: 0,
        viewWidth: 0,
        viewHeight: 0,
        innerPageCount: 1,
        innerDirection: _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_33__["ZegoWhiteboardViewScrollDirection"].Horizontal,
        innerPageSize: {
          cx: 0,
          cy: 0
        },
        modType: this.defaultModType,
        modSubtype: this.defaultModSubtype,
        operateTimes: 0,
        inProgress: false,
        graphicSendSwitch: true,
        modifyModTaskList: [],
        moveTaskList: []
      }, options);
    }
  };
  /**
   *
   * @param whiteboardID
   * @returns 白板信息
   */


  Module.prototype.getMap = function (whiteboardID) {
    return this.modIdMapData[whiteboardID];
  }; // 追加H5动画信息


  Module.prototype.appendH5Extra = function (whiteboardID, modExtra) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_append_extra_origin', modExtra);
    var result = this.checkH5Extra(whiteboardID, modExtra, false);
    if (!result) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_append_extra_new', result); // 判断是动态 PPT 还是自定义 H5

    var isH5 = result.includes('H5_record');
    var setModOption = {
      mod_id: whiteboardID,
      mod_extra: isH5 ? Object(_utils__WEBPACK_IMPORTED_MODULE_34__["encodeStringBase64"])(result) : result,
      is_modify_mod_extra: true
    };
    this.setMod(_entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].AppendH5Extra, setModOption);
  }; // 更新水平百分比、垂直百分比、步数、动画（清空）


  Module.prototype.scroll = function (whiteboardID, hPercent, vPercent, pptStep, scaleModel) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_scroll_origin', JSON.stringify({
      hPercent: hPercent,
      vPercent: vPercent,
      pptStep: pptStep
    }));
    var setModOption = this.checkScroll(whiteboardID, hPercent, vPercent, pptStep);
    if (!setModOption) return; // H5 翻页、切步，清除动画信息

    setModOption.mod_extra = '';
    setModOption.is_modify_mod_extra = true; // 绑定操作：清除垂直偏移
    // TODO: 后台禁用缩放权限时，此时修改会失败（后续修改缩放方案和移动端一致）

    if (scaleModel) {
      var _a = this.getMap(whiteboardID).modScale,
          scale = _a.scale,
          ofs_x = _a.ofs_x;
      var scaleFactor = scaleModel.scaleFactor,
          scaleOffsetX = scaleModel.scaleOffsetX,
          scaleOffsetY = scaleModel.scaleOffsetY; // scaleOffsetY 1:发送当前缩放值 0:发送service里的缩放值

      var mod_scale = scaleOffsetY ? {
        scale: scaleFactor,
        ofs_x: scaleOffsetX,
        ofs_y: 0
      } : {
        scale: scale,
        ofs_x: ofs_x,
        ofs_y: 0
      };
      setModOption.mod_scale = JSON.stringify(mod_scale);
      setModOption.is_modify_mod_scale = true;
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_scroll_new', JSON.stringify({
      setModOption: setModOption
    }));
    this.setMod(_entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scroll, setModOption);
  };

  Module.prototype.scale = function (whiteboardID, scale, ofs_x, ofs_y) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_scale_origin', JSON.stringify({
      scale: scale,
      ofs_x: ofs_x,
      ofs_y: ofs_y
    }));
    var setModOption = this.checkScale(whiteboardID, scale, ofs_x, ofs_y);
    if (!setModOption) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_scale_new', JSON.stringify({
      setModOption: setModOption
    }));
    this.setMod(_entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Scale, setModOption);
  };

  Module.prototype.getAspectRatio = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return curr.aspectWidth + ":" + curr.aspectHeight;
  };

  Module.prototype.getFileInfo = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return curr && curr.fileInfo || null;
  };

  Module.prototype.getScrollPercent = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return {
      horizontalPercent: curr.horizontalPercent,
      verticalPercent: curr.verticalPercent,
      pptStep: curr.pptStep,
      direction: curr.innerDirection
    };
  };

  Module.prototype.getScale = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return {
      scaleFactor: curr.modScale.scale,
      scaleOffsetX: curr.modScale.ofs_x,
      scaleOffsetY: curr.modScale.ofs_y
    };
  };

  Module.prototype.loadCurrentGraphics = function (whiteboardID, hPercent, vPercent) {
    // 分页拉取
    var curr = this.getMap(whiteboardID);

    var _a = this.getCurrentPages(whiteboardID, hPercent, vPercent),
        minPage = _a.minPage,
        maxPage = _a.maxPage; //     minPage = 0,
    //     maxPage = curr.innerPageCount - 1;


    var pageNumList = [];

    for (var index = minPage; index <= maxPage; index++) {
      var pullMark = curr.pullMarks[index];
      !pullMark && pageNumList.push(index);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module.load_by_percent', JSON.stringify({
      horizontalPercent: hPercent,
      verticalPercent: vPercent,
      minPage: minPage,
      maxPage: maxPage,
      pageNumList: pageNumList
    }));
    pageNumList.length && this.getPageGraphicsList(whiteboardID, pageNumList);
  }; // 重新加载本地所有白板，主动调用、内部断网重连调用


  Module.prototype.reload = function () {
    var _this = this;

    this.syncRemoteSeq();
    this.clearPullMarks();
    this.getModListDetails(_entity__WEBPACK_IMPORTED_MODULE_38__["RequestType"].Inner); // 重新拉取当前渲染白板的图元
    // const activeMod = Object.values(this.modIdMapData).filter((element) => {
    //     return element.renderStatus === 1;
    // })[0];
    // activeMod &&
    //     this.loadCurrentGraphics(activeMod.whiteboardID, activeMod.horizontalPercent, activeMod.verticalPercent);
    // 重新注册 push 回调

    this.onRemotePush();
    this.getRemoteAuth(); // 重新拉取所有白板的图元

    try {
      Object.values(this.modIdMapData).forEach(function (element) {
        _this.loadCurrentGraphics(element.whiteboardID, element.horizontalPercent, element.verticalPercent);
      });
    } catch (error) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().error(['WhiteBoard_Service'], 'reload_graphics', JSON.stringify({
        error: error
      }));
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'reload_graphics', 'reload whiteboard');
  }; // 断开时清除相关资源


  Module.prototype.unload = function () {
    if (this.userAuthMap.syncTaskId) {
      window.clearInterval(this.userAuthMap.syncTaskId);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'unload', 'unload whiteboard');
  }; // 注册远程推送


  Module.prototype.onRemotePush = function () {
    var _this = this; // 注册远程回调


    this.socket.registerWbMessage(function (res) {
      var sub_cmd = res.sub_cmd,
          msg_body = res.msg_body;

      switch (sub_cmd) {
        case 291101:
          _this.pushSetModHandle(msg_body);

          break;

        case 291203:
          _this.pushDrawPageGraphicsHandle(msg_body);

          break;

        case 291204:
          _this.pushClearPageGraphicsHandle(msg_body);

          break;

        case 291501:
          _this.pushUserAuthHandle(msg_body);

          break;

        case 291502:
          _this.setUserAuthMap(msg_body);

          break;

        case 291205:
          _this.pushClearUserGraphicListHandle(msg_body);

      }
    });
  };

  Module.prototype.getRemoteAuth = function () {
    var _this = this;

    this.initUserAuthMap();
    this.getRemoteRoomUserAuth('room').then(function (res) {
      _this.setUserAuthMap(res);

      _this.syncRemoteSeq();
    });
    this.getRemoteRoomUserAuth('user').then(function (res) {
      _this.setUserAuthMap(res);
    });
  };

  Module.prototype.getModName = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return (curr === null || curr === void 0 ? void 0 : curr.name) || '';
  }; // 获取白板 创建时间


  Module.prototype.getCreateTime = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return (curr === null || curr === void 0 ? void 0 : curr.createTime) || 0;
  }; // 获取白板 roomID


  Module.prototype.getRoomID = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return (curr === null || curr === void 0 ? void 0 : curr.roomID) || '';
  };

  Module.prototype.getUniqueID = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return (curr === null || curr === void 0 ? void 0 : curr.uniqueID) || '';
  }; // 获取白板页数


  Module.prototype.getPageCount = function (whiteboardID) {
    var curr = this.getMap(whiteboardID);
    return (curr === null || curr === void 0 ? void 0 : curr.outPageCount) || 1;
  };

  Module.prototype.setSize = function (whiteboardID, width, height) {
    var curr = this.getMap(whiteboardID);

    if (curr && width && height) {
      curr.width = width;
      curr.height = height;
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_view_size', JSON.stringify({
        whiteboardID: whiteboardID,
        width: width,
        height: height
      }));
      this.splitPage(whiteboardID, width, height);
      return true;
    }

    return false;
  };

  Module.prototype.setViewSize = function (whiteboardID, viewWidth, viewHeight) {
    var curr = this.getMap(whiteboardID);

    if (curr && viewWidth && viewHeight) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_set_viewpoart_size', JSON.stringify({
        whiteboardID: whiteboardID,
        viewWidth: viewWidth,
        viewHeight: viewHeight
      }));
      curr.viewHeight = viewHeight;
      curr.viewWidth = viewWidth;
      return true;
    }

    return false;
  }; // 设置当前白板的激活状态


  Module.prototype.setRenderStatus = function (whiteboardID, renderStatus) {
    if (renderStatus !== undefined) {
      // 修改其他白板为未激活状态
      Object.values(this.modIdMapData).forEach(function (element) {
        if (renderStatus) {
          if (element.whiteboardID === whiteboardID) {
            element.renderStatus = 1;
          } else {
            element.renderStatus = 0;
          }
        } else {
          if (element.whiteboardID === whiteboardID) {
            element.renderStatus = 0;
          }
        }
      });
      return true;
    } else {
      return false;
    }
  }; // 获取白板当前H5动画信息


  Module.prototype.getH5Extra = function (whiteboardID, innerCall) {
    var curr = this.getMap(whiteboardID);
    var modExtra = curr ? curr.modExtra : '';
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_get_h5extra', JSON.stringify({
      whiteboardID: whiteboardID,
      modExtra: modExtra
    }));

    if (modExtra && !innerCall) {
      var modExtraObj = JSON.parse(modExtra); // 自定义 H5 后进房场景，修改操作类型为 101

      if (modExtraObj.H5_record) {
        modExtraObj.H5_record.t = 101;
        modExtra = JSON.stringify(modExtraObj);
      }
    }

    return modExtra;
  };

  Module.prototype.createZorder = function () {
    return this.zorderSeq += this.zorderStep;
  };

  Module.prototype.switchView = function (whiteboardID) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_switch_view_origin', whiteboardID);
    var setModOption = this.checkSwitchView(whiteboardID);
    if (!setModOption) return Promise.reject();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_switch_view_new', JSON.stringify(setModOption));
    return this.setModHandle(_entity__WEBPACK_IMPORTED_MODULE_38__["SetModAction"].Other, setModOption);
  };

  Module.prototype.getCurrentActivitedView = function () {
    // 找出 zorder 最大的 mod
    var zorder = 0;
    var mod_id = '';
    Object.values(this.modIdMapData).forEach(function (mod) {
      if (mod.zorder && mod.zorder > zorder) {
        zorder = mod.zorder;
        mod_id = mod.whiteboardID;
      }
    });
    var arr = mod_id ? [this.modIdMapData[mod_id].uniqueID, mod_id] : [];
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_30__["Logger"].getInstance().info(['WhiteBoard_Service'], 'module_switch_view_remote', JSON.stringify(arr));
    return arr;
  };

  return Module;
}();



/***/ }),

/***/ "./sdk/whiteboard/services/pbjs.ts":
/*!*****************************************!*\
  !*** ./sdk/whiteboard/services/pbjs.ts ***!
  \*****************************************/
/*! exports provided: EduProtobuf */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EduProtobuf", function() { return EduProtobuf; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array-buffer.slice.js */ "./node_modules/core-js/modules/es.array-buffer.slice.js");
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.typed-array.uint8-array.js */ "./node_modules/core-js/modules/es.typed-array.uint8-array.js");
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.typed-array.copy-within.js */ "./node_modules/core-js/modules/es.typed-array.copy-within.js");
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.typed-array.every.js */ "./node_modules/core-js/modules/es.typed-array.every.js");
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.typed-array.fill.js */ "./node_modules/core-js/modules/es.typed-array.fill.js");
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.typed-array.filter.js */ "./node_modules/core-js/modules/es.typed-array.filter.js");
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.typed-array.find.js */ "./node_modules/core-js/modules/es.typed-array.find.js");
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-index.js */ "./node_modules/core-js/modules/es.typed-array.find-index.js");
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.typed-array.for-each.js */ "./node_modules/core-js/modules/es.typed-array.for-each.js");
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.typed-array.includes.js */ "./node_modules/core-js/modules/es.typed-array.includes.js");
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.typed-array.index-of.js */ "./node_modules/core-js/modules/es.typed-array.index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.typed-array.iterator.js */ "./node_modules/core-js/modules/es.typed-array.iterator.js");
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.typed-array.join.js */ "./node_modules/core-js/modules/es.typed-array.join.js");
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.typed-array.last-index-of.js */ "./node_modules/core-js/modules/es.typed-array.last-index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.typed-array.map.js */ "./node_modules/core-js/modules/es.typed-array.map.js");
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce.js */ "./node_modules/core-js/modules/es.typed-array.reduce.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce-right.js */ "./node_modules/core-js/modules/es.typed-array.reduce-right.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.typed-array.reverse.js */ "./node_modules/core-js/modules/es.typed-array.reverse.js");
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ "./node_modules/core-js/modules/es.typed-array.set.js");
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.typed-array.slice.js */ "./node_modules/core-js/modules/es.typed-array.slice.js");
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/es.typed-array.some.js */ "./node_modules/core-js/modules/es.typed-array.some.js");
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.typed-array.sort.js */ "./node_modules/core-js/modules/es.typed-array.sort.js");
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! core-js/modules/es.typed-array.subarray.js */ "./node_modules/core-js/modules/es.typed-array.subarray.js");
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_30__);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-locale-string.js */ "./node_modules/core-js/modules/es.typed-array.to-locale-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-string.js */ "./node_modules/core-js/modules/es.typed-array.to-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_33__);
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! core-js/modules/es.typed-array.from.js */ "./node_modules/core-js/modules/es.typed-array.from.js");
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_34__);
/* harmony import */ var core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! core-js/modules/es.typed-array.int32-array.js */ "./node_modules/core-js/modules/es.typed-array.int32-array.js");
/* harmony import */ var core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_36__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_37__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_38___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_38__);
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_40___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_40__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_41___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_41__);
/* harmony import */ var long__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! long */ "./node_modules/long/src/long.js");
/* harmony import */ var long__WEBPACK_IMPORTED_MODULE_42___default = /*#__PURE__*/__webpack_require__.n(long__WEBPACK_IMPORTED_MODULE_42__);
/* harmony import */ var _proto_edu_v1_js_proto_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./proto_edu_v1_js/proto.js */ "./sdk/whiteboard/services/proto_edu_v1_js/proto.js");











































var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

 // @ts-ignore



var EduProtobuf =
/** @class */
function () {
  function EduProtobuf() {
    this.proto = _proto_edu_v1_js_proto_js__WEBPACK_IMPORTED_MODULE_43__["default"];
    this.protocol = new Uint8Array(['0'.charCodeAt(0), '1'.charCodeAt(0)]);
    this.cmdReqMap = {
      '/eduv1/sync': 'proto_sync',
      '/eduv1/get_room_auth': 'proto_get_room_auth_req',
      '/eduv1/get_user_auth': 'proto_get_user_auth_req',
      '/eduv1/create_mod': 'proto_create_mod',
      '/eduv1/destroy_mod': 'proto_destroy_mod',
      '/eduv1/get_mod': 'proto_get_mod',
      '/eduv1/get_mod_list': 'proto_get_mod_list',
      '/eduv1/modify_mod': 'proto_modify_mod',
      '/eduv1/get_page_graphics': 'proto_get_page_graphics',
      '/eduv1/clear_page_graphics': 'proto_clear_page_graphics',
      '/eduv1/draw_page_graphics': 'proto_draw_page_graphics'
    };
    this.cmdRspMap = {
      '/eduv1/sync': 'proto_sync_rsp',
      '/eduv1/get_room_auth': 'proto_get_room_auth_rsp',
      '/eduv1/get_user_auth': 'proto_get_user_auth_rsp',
      '/eduv1/create_mod': 'proto_create_mod_rsp',
      '/eduv1/destroy_mod': 'proto_destroy_mod_rsp',
      '/eduv1/get_mod': 'proto_get_mod_rsp',
      '/eduv1/get_mod_list': 'proto_get_mod_list_rsp',
      '/eduv1/modify_mod': 'proto_modify_mod_rsp',
      '/eduv1/get_page_graphics': 'proto_get_page_graphics_rsp',
      '/eduv1/clear_page_graphics': 'proto_clear_page_graphics_rsp',
      '/eduv1/draw_page_graphics': 'proto_draw_page_graphics_rsp'
    };
    this.cmdPushMap = {
      '291101': 'push_set_mod',
      '291203': 'push_draw_page_graphics',
      '291204': 'push_clear_page_graphics',
      '291501': 'push_user_auth',
      '291502': 'push_room_auth',
      '291205': 'push_clear_user_graphic_list'
    };
    this.cmdMsg = {
      reqHeader: 'proto_req_header',
      reqBody: 'proto_biz_channel',
      reqBodyBody: 'req',
      rspHeader: 'proto_rsp_header',
      rspBody: 'proto_biz_channel_rsp',
      rspBodyBody: 'rsp',
      pushHeader: 'proto_push_header',
      pushBody: 'proto_push_biz_channel',
      pushBodyBody: 'proto_push_biz_hannel_req'
    };
  }

  EduProtobuf.prototype.encodeMsg = function (cmd, header, reqBody) {
    return __awaiter(this, void 0, void 0, function () {
      var json, unit8_header, len_header, unit8_edu, unit8_req_body, unit8_body, len_body, unit8;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.formatEduBody(reqBody.body);
            json = JSON.stringify(reqBody);
            return [4
            /*yield*/
            , this.encode(this.proto.proto_access_pb, this.cmdMsg.reqHeader, header)];

          case 1:
            unit8_header = _a.sent();
            len_header = unit8_header.length;
            return [4
            /*yield*/
            , this.encode(this.proto.proto_edu_v1_web, this.cmdReqMap[cmd], reqBody.body)];

          case 2:
            unit8_edu = _a.sent();
            return [4
            /*yield*/
            , this.encode(this.proto.proto_biz_channel, this.cmdMsg.reqBodyBody, {
              req_header: reqBody.header,
              body: unit8_edu
            })];

          case 3:
            unit8_req_body = _a.sent();
            return [4
            /*yield*/
            , this.encode(this.proto.proto_access_pb, this.cmdMsg.reqBody, {
              channel: 'edu',
              cmd: cmd,
              req_body: unit8_req_body
            })];

          case 4:
            unit8_body = _a.sent();
            len_body = unit8_body.length;
            unit8 = new Uint8Array(2 + 2 + 4 + len_header + len_body);
            unit8.set(this.protocol); // headerLen

            unit8[2] = len_header >> 8;
            unit8[3] = len_header - (unit8[2] << 8);
            unit8.set(new Uint8Array(Int32Array.from([len_body]).buffer).reverse(), 4); // bodyLen

            unit8.set(unit8_header, 8); // header

            unit8.set(unit8_body, 8 + len_header); // body

            console.log('===PB req:', cmd, header.seq, unit8.length, json);
            return [2
            /*return*/
            , unit8];
        }
      });
    });
  };

  EduProtobuf.prototype.decodeMsg = function (buffer) {
    return __awaiter(this, void 0, void 0, function () {
      var uint8, len_header, header, res, err_1, res;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            uint8 = new Uint8Array(buffer);
            len_header = (uint8[2] << 8) + uint8[3];
            _a.label = 1;

          case 1:
            _a.trys.push([1, 4,, 7]);

            return [4
            /*yield*/
            , this.decode(this.proto.proto_access_pb, this.cmdMsg.rspHeader, uint8.slice(8, 8 + len_header))];

          case 2:
            header = _a.sent();
            return [4
            /*yield*/
            , this.decodeRspMsg(uint8.slice(8 + len_header), header.seq)];

          case 3:
            res = _a.sent();
            return [2
            /*return*/
            , res];

          case 4:
            err_1 = _a.sent();
            return [4
            /*yield*/
            , this.decode(this.proto.proto_access_pb, this.cmdMsg.pushHeader, uint8.slice(8, 8 + len_header))];

          case 5:
            _a.sent();

            return [4
            /*yield*/
            , this.decodePushMsg(uint8.slice(8 + len_header))];

          case 6:
            res = _a.sent();
            return [2
            /*return*/
            , res];

          case 7:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  EduProtobuf.prototype.checkSendLength = function (cmd, reqBody) {
    return __awaiter(this, void 0, void 0, function () {
      var unit8_edu, unit8_req_body, unit8_body, lenth;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.formatEduBody(reqBody.body);
            return [4
            /*yield*/
            , this.encode(this.proto.proto_edu_v1_web, this.cmdReqMap[cmd], reqBody.body)];

          case 1:
            unit8_edu = _a.sent();
            return [4
            /*yield*/
            , this.encode(this.proto.proto_biz_channel, this.cmdMsg.reqBodyBody, {
              req_header: reqBody.header,
              body: unit8_edu
            })];

          case 2:
            unit8_req_body = _a.sent();
            return [4
            /*yield*/
            , this.encode(this.proto.proto_access_pb, this.cmdMsg.reqBody, {
              channel: 'edu',
              cmd: cmd,
              req_body: unit8_req_body
            })];

          case 3:
            unit8_body = _a.sent();
            lenth = unit8_body.length;
            return [2
            /*return*/
            , lenth > 5000 ? lenth : 0];
        }
      });
    });
  };

  EduProtobuf.prototype.createUnknownError = function (seq, cmd) {
    return {
      cmd: cmd,
      header: {
        seq: seq,
        code: 1,
        message: 'unknown error'
      },
      body: {}
    };
  };
  /**
   * mod_id: string -> number
   * graphic_id: string -> number
   * unit64、int64 用 Long 存储
   */


  EduProtobuf.prototype.formatEduBody = function (body) {
    if (body.mod_id) body.mod_id = long__WEBPACK_IMPORTED_MODULE_42___default.a.fromString(body.mod_id, true); // if (body.mod_id_list) body.mod_id_list = body.mod_id_list.map((v: string) => Long.fromString(v, true));

    if (body.draw_pages) {
      body.draw_pages.forEach(function (v) {
        v.draw_list.forEach(function (v2) {
          var id = v2.graphic_id;
          if (id && typeof id == 'string') v2.graphic_id = long__WEBPACK_IMPORTED_MODULE_42___default.a.fromString(id, true);
        });
      });
    }
  };

  EduProtobuf.prototype.mergeModList = function (list) {
    list && list.forEach(function (v, i) {
      list[i] = Object.assign({
        mod_seq: 0,
        graphic_list_seq: 0,
        sync_interval: 0,
        mod_reserve: 1,
        mod_horizontal_percent: 0,
        mod_vertical_percent: 0,
        mod_extra: '',
        mod_scale: JSON.stringify({
          scale: 1,
          ofs_x: 0,
          ofs_y: 0
        })
      }, v);
    });
  };

  EduProtobuf.prototype.mergePageGraphics = function (pages, graphic_list_seqs) {
    pages && pages.forEach(function (v, i) {
      pages[i] = v || 0;
      graphic_list_seqs && (graphic_list_seqs[i] = graphic_list_seqs[i] || 0);
    });
  };

  EduProtobuf.prototype.mergeGraphicList = function (list) {
    list && list.forEach(function (v, i) {
      list[i] = Object.assign({
        action_seq: 0,
        zorder: 1,
        x: 0,
        y: 0,
        size: 0,
        color: 0,
        layer: 0
      }, v);
    });
  };

  EduProtobuf.prototype.mergeRspBody = function (body, cmd) {
    var _this = this;

    switch (cmd) {
      case '/eduv1/sync':
        body = Object.assign({
          sync_interval: 0,
          room_auth_seq: 0,
          user_auth_seq: 0,
          mod_list_seq: 0
        }, body);
        return body;

      case '/eduv1/get_room_auth':
        body.auth_seq = body.auth_seq || 0;
        return body;

      case '/eduv1/get_user_auth':
        body.auth_seq = body.auth_seq || 0;
        return body;

      case '/eduv1/create_mod':
        body.mod_seq = body.mod_seq || 0;
        body.mod_list_seq = body.mod_list_seq || 0;
        return body;

      case '/eduv1/destroy_mod':
        body.mod_list_seq = body.mod_list_seq || 0;
        return body;

      case '/eduv1/get_mod':
        this.mergeModList(body.mod_list);
        return body;

      case '/eduv1/get_mod_list':
        body.mod_list_seq = body.mod_list_seq || 0;
        this.mergeModList(body.mod_list);
        return body;

      case '/eduv1/modify_mod':
        body.mod_seq = body.mod_seq || 0;
        body.mod_list_seq = body.mod_list_seq || 0;
        return body;

      case '/eduv1/get_page_graphics':
        body.pages && body.pages.forEach(function (v) {
          v.page = v.page || 0;
          v.ret_graphic_list_seq = v.ret_graphic_list_seq || 0;
          v.svr_graphic_list_seq = v.svr_graphic_list_seq || 0;

          _this.mergeGraphicList(v.graphic_list);
        });
        return body;

      case '/eduv1/clear_page_graphics':
        this.mergePageGraphics(body.pages, body.graphic_list_seqs);
        return body;

      case '/eduv1/draw_page_graphics':
        this.mergePageGraphics(body.pages, body.graphic_list_seqs);
        return body;
    }
  };

  EduProtobuf.prototype.mergePushBody = function (body, cmd) {
    var _this = this;

    switch (cmd) {
      case 291101:
        // set_mod
        body.mod_list_seq = body.mod_list_seq || 0;
        body.action_list && body.action_list.forEach(function (v) {
          if (v.is_modify_mod_extra) v.mod_extra = v.mod_extra || '';
          if (v.is_modify_mod_reserve) v.mod_reserve = v.mod_reserve || 1;
          if (v.is_modify_mod_horizontal_percent) v.mod_horizontal_percent = v.mod_horizontal_percent || 0;
          if (v.is_modify_mod_vertical_percent) v.mod_vertical_percent = v.mod_vertical_percent || 0;
          if (v.is_modify_mod_scale) v.mod_scale = v.mod_scale || JSON.stringify({
            scale: 1,
            ofs_x: 0,
            ofs_y: 0
          });
        });
        return body;

      case 291203:
        // draw_page_graphics
        body.page_graphics && body.page_graphics.forEach(function (v) {
          v.page = v.page || 0;
          v.action_seq = v.action_seq || 0;

          _this.mergeGraphicList(v.graphic_list);
        });
        return body;

      case 291204:
        // clear_page_graphics
        body.pages && body.pages.forEach(function (v, i) {
          body.pages[i] = v || 0;
          body.action_seqs && (body.action_seqs[i] = body.action_seqs[i] || 0);
        });
        return body;

      case 291501:
        // user_auth
        body.auth_seq = body.auth_seq || 0;
        return body;

      case 291502:
        // room_auth
        body.auth_seq = body.auth_seq || 0;
        return body;

      default:
        return body;
    }
  };

  EduProtobuf.prototype.encode = function (root, msg, payload) {
    return __awaiter(this, void 0, void 0, function () {
      var msgInstance;
      return __generator(this, function (_a) {
        msgInstance = root[msg]; // --no-verify 去掉验证，精简代码
        // const err = msgInstance.verify(payload);
        // if (err) throw Error(err);

        return [2
        /*return*/
        , msgInstance.encode(msgInstance.create(payload)).finish()];
      });
    });
  };

  EduProtobuf.prototype.decode = function (root, msg, buffer) {
    return __awaiter(this, void 0, void 0, function () {
      var msgInstance;
      return __generator(this, function (_a) {
        msgInstance = root[msg];
        return [2
        /*return*/
        , msgInstance.toObject(msgInstance.decode(buffer), {
          longs: String
        })];
      });
    });
  };

  EduProtobuf.prototype.decodeRspMsg = function (buffer, seq) {
    return __awaiter(this, void 0, void 0, function () {
      var body, cmd, temp, temp_1, err_2;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.decode(this.proto.proto_access_pb, this.cmdMsg.rspBody, buffer)];

          case 1:
            body = _a.sent();
            cmd = body.cmd;
            if (!body.rsp_body) return [3
            /*break*/
            , 9];
            return [4
            /*yield*/
            , this.decode(this.proto.proto_biz_channel, this.cmdMsg.rspBodyBody, body.rsp_body)];

          case 2:
            temp = _a.sent();
            body.rsp_body = temp;
            body.rsp_body.cmd = cmd;

            if (!body.rsp_body.header.code) {
              body.rsp_body.header.code = body.err_code ? +String(body.err_code).replace(/^10+/g, '') : 0;
            }

            if (!body.rsp_body.body) return [3
            /*break*/
            , 7];
            _a.label = 3;

          case 3:
            _a.trys.push([3, 5,, 6]);

            return [4
            /*yield*/
            , this.decode(this.proto.proto_edu_v1_web, this.cmdRspMap[cmd], body.rsp_body.body)];

          case 4:
            temp_1 = _a.sent();
            body.rsp_body.body = this.mergeRspBody(temp_1, cmd);
            return [3
            /*break*/
            , 6];

          case 5:
            err_2 = _a.sent();
            console.error('===PB rsp: decode edu error', cmd, body.rsp_body.body, err_2);
            return [3
            /*break*/
            , 6];

          case 6:
            return [3
            /*break*/
            , 8];

          case 7:
            body.rsp_body.body = {};
            console.warn('===PB rsp: rsp_body.body is null', cmd);
            _a.label = 8;

          case 8:
            return [3
            /*break*/
            , 10];

          case 9:
            body.rsp_body = this.createUnknownError(seq, cmd);
            console.warn('===PB rsp: rsp_body is null', cmd);
            _a.label = 10;

          case 10:
            console.log('===PB rsp:', cmd, seq, buffer.length, JSON.stringify(body));
            return [2
            /*return*/
            , body.rsp_body];
        }
      });
    });
  };

  EduProtobuf.prototype.decodePushMsg = function (buffer) {
    return __awaiter(this, void 0, void 0, function () {
      var body, temp, cmd_1, temp_2, err_3, cmd;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.decode(this.proto.proto_access_pb, this.cmdMsg.pushBody, buffer)];

          case 1:
            body = _a.sent();
            if (!body.req_body) return [3
            /*break*/
            , 9];
            return [4
            /*yield*/
            , this.decode(this.proto.proto_access_pb, this.cmdMsg.pushBodyBody, body.req_body)];

          case 2:
            temp = _a.sent();
            body.req_body = temp;
            cmd_1 = this.cmdPushMap[body.req_body.sub_cmd];
            if (!body.req_body.msg_body) return [3
            /*break*/
            , 7];
            _a.label = 3;

          case 3:
            _a.trys.push([3, 5,, 6]);

            return [4
            /*yield*/
            , this.decode(this.proto.proto_edu_v1_web, cmd_1, body.req_body.msg_body)];

          case 4:
            temp_2 = _a.sent();
            body.req_body.msg_body = this.mergePushBody(temp_2, body.req_body.sub_cmd);
            return [3
            /*break*/
            , 6];

          case 5:
            err_3 = _a.sent();
            console.error('===PB push: decode edu error', cmd_1, body.req_body.sub_cmd, body.req_body.msg_body, err_3);
            return [3
            /*break*/
            , 6];

          case 6:
            return [3
            /*break*/
            , 8];

          case 7:
            body.req_body.msg_body = {};
            console.warn('===PB push: req_body.msg_body is null', cmd_1);
            _a.label = 8;

          case 8:
            return [3
            /*break*/
            , 10];

          case 9:
            body.req_body = {
              msg_body: {},
              sub_cmd: 0
            };
            console.warn('===PB push: req_body is null');
            _a.label = 10;

          case 10:
            cmd = this.cmdPushMap[body.req_body.sub_cmd] || '';
            console.log('===PB push:', cmd, buffer.length, JSON.stringify(body));
            return [2
            /*return*/
            , body.req_body];
        }
      });
    });
  };

  return EduProtobuf;
}();



/***/ }),

/***/ "./sdk/whiteboard/services/proto_edu_v1_js/proto.js":
/*!**********************************************************!*\
  !*** ./sdk/whiteboard/services/proto_edu_v1_js/proto.js ***!
  \**********************************************************/
/*! exports provided: proto_access_pb, proto_biz_channel, proto_edu_v1_web, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "proto_access_pb", function() { return proto_access_pb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "proto_biz_channel", function() { return proto_biz_channel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "proto_edu_v1_web", function() { return proto_edu_v1_web; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return $root; });
/* harmony import */ var protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! protobufjs/minimal */ "./node_modules/protobufjs/minimal.js");
/* harmony import */ var protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__);
/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/


const $Reader = protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["Reader"], $Writer = protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["Writer"], $util = protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"];

const $root = protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["roots"]["default"] || (protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["roots"]["default"] = {});

const proto_access_pb = $root.proto_access_pb = (() => {

    const proto_access_pb = {};

    proto_access_pb.proto_req_header = (function() {

        function proto_req_header(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_req_header.prototype.protocol = "";
        proto_req_header.prototype.cmd = "";
        proto_req_header.prototype.appid = 0;
        proto_req_header.prototype.seq = 0;
        proto_req_header.prototype.user_id = "";
        proto_req_header.prototype.session_id = "";
        proto_req_header.prototype.room_id = "";
        proto_req_header.prototype.room_session_id = "";
        proto_req_header.prototype.biz_version = "";

        proto_req_header.create = function create(properties) {
            return new proto_req_header(properties);
        };

        proto_req_header.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.protocol != null && Object.hasOwnProperty.call(message, "protocol"))
                writer.uint32(10).string(message.protocol);
            if (message.cmd != null && Object.hasOwnProperty.call(message, "cmd"))
                writer.uint32(18).string(message.cmd);
            if (message.appid != null && Object.hasOwnProperty.call(message, "appid"))
                writer.uint32(24).uint32(message.appid);
            if (message.seq != null && Object.hasOwnProperty.call(message, "seq"))
                writer.uint32(32).uint32(message.seq);
            if (message.user_id != null && Object.hasOwnProperty.call(message, "user_id"))
                writer.uint32(42).string(message.user_id);
            if (message.session_id != null && Object.hasOwnProperty.call(message, "session_id"))
                writer.uint32(50).string(message.session_id);
            if (message.room_id != null && Object.hasOwnProperty.call(message, "room_id"))
                writer.uint32(58).string(message.room_id);
            if (message.room_session_id != null && Object.hasOwnProperty.call(message, "room_session_id"))
                writer.uint32(66).string(message.room_session_id);
            if (message.biz_version != null && Object.hasOwnProperty.call(message, "biz_version"))
                writer.uint32(74).string(message.biz_version);
            return writer;
        };

        return proto_req_header;
    })();

    proto_access_pb.proto_biz_channel = (function() {

        function proto_biz_channel(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_biz_channel.prototype.channel = "";
        proto_biz_channel.prototype.cmd = "";
        proto_biz_channel.prototype.req_body = $util.newBuffer([]);
        proto_biz_channel.prototype.is_retry_req = 0;

        proto_biz_channel.create = function create(properties) {
            return new proto_biz_channel(properties);
        };

        proto_biz_channel.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.channel != null && Object.hasOwnProperty.call(message, "channel"))
                writer.uint32(10).string(message.channel);
            if (message.cmd != null && Object.hasOwnProperty.call(message, "cmd"))
                writer.uint32(18).string(message.cmd);
            if (message.req_body != null && Object.hasOwnProperty.call(message, "req_body"))
                writer.uint32(26).bytes(message.req_body);
            if (message.is_retry_req != null && Object.hasOwnProperty.call(message, "is_retry_req"))
                writer.uint32(32).uint32(message.is_retry_req);
            return writer;
        };

        return proto_biz_channel;
    })();

    proto_access_pb.proto_rsp_header = (function() {

        function proto_rsp_header(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_rsp_header.prototype.protocol = "";
        proto_rsp_header.prototype.cmd = "";
        proto_rsp_header.prototype.appid = 0;
        proto_rsp_header.prototype.seq = 0;
        proto_rsp_header.prototype.user_id = "";
        proto_rsp_header.prototype.session_id = "";
        proto_rsp_header.prototype.room_id = "";
        proto_rsp_header.prototype.room_session_id = "";
        proto_rsp_header.prototype.biz_version = "";

        proto_rsp_header.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_access_pb.proto_rsp_header();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.protocol = reader.string();
                    break;
                case 2:
                    message.cmd = reader.string();
                    break;
                case 3:
                    message.appid = reader.uint32();
                    break;
                case 4:
                    message.seq = reader.uint32();
                    break;
                case 5:
                    message.user_id = reader.string();
                    break;
                case 6:
                    message.session_id = reader.string();
                    break;
                case 7:
                    message.room_id = reader.string();
                    break;
                case 8:
                    message.room_session_id = reader.string();
                    break;
                case 9:
                    message.biz_version = reader.string();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_rsp_header.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_access_pb.proto_rsp_header)
                return object;
            let message = new $root.proto_access_pb.proto_rsp_header();
            if (object.protocol != null)
                message.protocol = String(object.protocol);
            if (object.cmd != null)
                message.cmd = String(object.cmd);
            if (object.appid != null)
                message.appid = object.appid >>> 0;
            if (object.seq != null)
                message.seq = object.seq >>> 0;
            if (object.user_id != null)
                message.user_id = String(object.user_id);
            if (object.session_id != null)
                message.session_id = String(object.session_id);
            if (object.room_id != null)
                message.room_id = String(object.room_id);
            if (object.room_session_id != null)
                message.room_session_id = String(object.room_session_id);
            if (object.biz_version != null)
                message.biz_version = String(object.biz_version);
            return message;
        };

        proto_rsp_header.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.protocol = "";
                object.cmd = "";
                object.appid = 0;
                object.seq = 0;
                object.user_id = "";
                object.session_id = "";
                object.room_id = "";
                object.room_session_id = "";
                object.biz_version = "";
            }
            if (message.protocol != null && message.hasOwnProperty("protocol"))
                object.protocol = message.protocol;
            if (message.cmd != null && message.hasOwnProperty("cmd"))
                object.cmd = message.cmd;
            if (message.appid != null && message.hasOwnProperty("appid"))
                object.appid = message.appid;
            if (message.seq != null && message.hasOwnProperty("seq"))
                object.seq = message.seq;
            if (message.user_id != null && message.hasOwnProperty("user_id"))
                object.user_id = message.user_id;
            if (message.session_id != null && message.hasOwnProperty("session_id"))
                object.session_id = message.session_id;
            if (message.room_id != null && message.hasOwnProperty("room_id"))
                object.room_id = message.room_id;
            if (message.room_session_id != null && message.hasOwnProperty("room_session_id"))
                object.room_session_id = message.room_session_id;
            if (message.biz_version != null && message.hasOwnProperty("biz_version"))
                object.biz_version = message.biz_version;
            return object;
        };

        proto_rsp_header.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_rsp_header;
    })();

    proto_access_pb.proto_biz_channel_rsp = (function() {

        function proto_biz_channel_rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_biz_channel_rsp.prototype.err_code = 0;
        proto_biz_channel_rsp.prototype.err_message = "";
        proto_biz_channel_rsp.prototype.channel = "";
        proto_biz_channel_rsp.prototype.cmd = "";
        proto_biz_channel_rsp.prototype.rsp_body = $util.newBuffer([]);

        proto_biz_channel_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_access_pb.proto_biz_channel_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.err_code = reader.int32();
                    break;
                case 2:
                    message.err_message = reader.string();
                    break;
                case 3:
                    message.channel = reader.string();
                    break;
                case 4:
                    message.cmd = reader.string();
                    break;
                case 5:
                    message.rsp_body = reader.bytes();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_biz_channel_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_access_pb.proto_biz_channel_rsp)
                return object;
            let message = new $root.proto_access_pb.proto_biz_channel_rsp();
            if (object.err_code != null)
                message.err_code = object.err_code | 0;
            if (object.err_message != null)
                message.err_message = String(object.err_message);
            if (object.channel != null)
                message.channel = String(object.channel);
            if (object.cmd != null)
                message.cmd = String(object.cmd);
            if (object.rsp_body != null)
                if (typeof object.rsp_body === "string")
                    $util.base64.decode(object.rsp_body, message.rsp_body = $util.newBuffer($util.base64.length(object.rsp_body)), 0);
                else if (object.rsp_body.length)
                    message.rsp_body = object.rsp_body;
            return message;
        };

        proto_biz_channel_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.err_code = 0;
                object.err_message = "";
                object.channel = "";
                object.cmd = "";
                if (options.bytes === String)
                    object.rsp_body = "";
                else {
                    object.rsp_body = [];
                    if (options.bytes !== Array)
                        object.rsp_body = $util.newBuffer(object.rsp_body);
                }
            }
            if (message.err_code != null && message.hasOwnProperty("err_code"))
                object.err_code = message.err_code;
            if (message.err_message != null && message.hasOwnProperty("err_message"))
                object.err_message = message.err_message;
            if (message.channel != null && message.hasOwnProperty("channel"))
                object.channel = message.channel;
            if (message.cmd != null && message.hasOwnProperty("cmd"))
                object.cmd = message.cmd;
            if (message.rsp_body != null && message.hasOwnProperty("rsp_body"))
                object.rsp_body = options.bytes === String ? $util.base64.encode(message.rsp_body, 0, message.rsp_body.length) : options.bytes === Array ? Array.prototype.slice.call(message.rsp_body) : message.rsp_body;
            return object;
        };

        proto_biz_channel_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_biz_channel_rsp;
    })();

    proto_access_pb.proto_push_header = (function() {

        function proto_push_header(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_push_header.prototype.protocol = "";
        proto_push_header.prototype.cmd = "";
        proto_push_header.prototype.appid = 0;
        proto_push_header.prototype.user_id = "";
        proto_push_header.prototype.session_id = "";
        proto_push_header.prototype.room_id = "";
        proto_push_header.prototype.push_seq = 0;
        proto_push_header.prototype.from_user_id = "";
        proto_push_header.prototype.qos_flag = 0;

        proto_push_header.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_access_pb.proto_push_header();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.protocol = reader.string();
                    break;
                case 2:
                    message.cmd = reader.string();
                    break;
                case 3:
                    message.appid = reader.uint32();
                    break;
                case 4:
                    message.user_id = reader.string();
                    break;
                case 5:
                    message.session_id = reader.string();
                    break;
                case 6:
                    message.room_id = reader.string();
                    break;
                case 7:
                    message.push_seq = reader.uint32();
                    break;
                case 8:
                    message.from_user_id = reader.string();
                    break;
                case 9:
                    message.qos_flag = reader.uint32();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_push_header.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_access_pb.proto_push_header)
                return object;
            let message = new $root.proto_access_pb.proto_push_header();
            if (object.protocol != null)
                message.protocol = String(object.protocol);
            if (object.cmd != null)
                message.cmd = String(object.cmd);
            if (object.appid != null)
                message.appid = object.appid >>> 0;
            if (object.user_id != null)
                message.user_id = String(object.user_id);
            if (object.session_id != null)
                message.session_id = String(object.session_id);
            if (object.room_id != null)
                message.room_id = String(object.room_id);
            if (object.push_seq != null)
                message.push_seq = object.push_seq >>> 0;
            if (object.from_user_id != null)
                message.from_user_id = String(object.from_user_id);
            if (object.qos_flag != null)
                message.qos_flag = object.qos_flag >>> 0;
            return message;
        };

        proto_push_header.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.protocol = "";
                object.cmd = "";
                object.appid = 0;
                object.user_id = "";
                object.session_id = "";
                object.room_id = "";
                object.push_seq = 0;
                object.from_user_id = "";
                object.qos_flag = 0;
            }
            if (message.protocol != null && message.hasOwnProperty("protocol"))
                object.protocol = message.protocol;
            if (message.cmd != null && message.hasOwnProperty("cmd"))
                object.cmd = message.cmd;
            if (message.appid != null && message.hasOwnProperty("appid"))
                object.appid = message.appid;
            if (message.user_id != null && message.hasOwnProperty("user_id"))
                object.user_id = message.user_id;
            if (message.session_id != null && message.hasOwnProperty("session_id"))
                object.session_id = message.session_id;
            if (message.room_id != null && message.hasOwnProperty("room_id"))
                object.room_id = message.room_id;
            if (message.push_seq != null && message.hasOwnProperty("push_seq"))
                object.push_seq = message.push_seq;
            if (message.from_user_id != null && message.hasOwnProperty("from_user_id"))
                object.from_user_id = message.from_user_id;
            if (message.qos_flag != null && message.hasOwnProperty("qos_flag"))
                object.qos_flag = message.qos_flag;
            return object;
        };

        proto_push_header.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_push_header;
    })();

    proto_access_pb.proto_push_biz_channel = (function() {

        function proto_push_biz_channel(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_push_biz_channel.prototype.channel = "";
        proto_push_biz_channel.prototype.cmd = "";
        proto_push_biz_channel.prototype.req_body = $util.newBuffer([]);

        proto_push_biz_channel.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_access_pb.proto_push_biz_channel();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.channel = reader.string();
                    break;
                case 2:
                    message.cmd = reader.string();
                    break;
                case 3:
                    message.req_body = reader.bytes();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_push_biz_channel.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_access_pb.proto_push_biz_channel)
                return object;
            let message = new $root.proto_access_pb.proto_push_biz_channel();
            if (object.channel != null)
                message.channel = String(object.channel);
            if (object.cmd != null)
                message.cmd = String(object.cmd);
            if (object.req_body != null)
                if (typeof object.req_body === "string")
                    $util.base64.decode(object.req_body, message.req_body = $util.newBuffer($util.base64.length(object.req_body)), 0);
                else if (object.req_body.length)
                    message.req_body = object.req_body;
            return message;
        };

        proto_push_biz_channel.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.channel = "";
                object.cmd = "";
                if (options.bytes === String)
                    object.req_body = "";
                else {
                    object.req_body = [];
                    if (options.bytes !== Array)
                        object.req_body = $util.newBuffer(object.req_body);
                }
            }
            if (message.channel != null && message.hasOwnProperty("channel"))
                object.channel = message.channel;
            if (message.cmd != null && message.hasOwnProperty("cmd"))
                object.cmd = message.cmd;
            if (message.req_body != null && message.hasOwnProperty("req_body"))
                object.req_body = options.bytes === String ? $util.base64.encode(message.req_body, 0, message.req_body.length) : options.bytes === Array ? Array.prototype.slice.call(message.req_body) : message.req_body;
            return object;
        };

        proto_push_biz_channel.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_push_biz_channel;
    })();

    proto_access_pb.proto_push_biz_hannel_req = (function() {

        function proto_push_biz_hannel_req(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_push_biz_hannel_req.prototype.sub_cmd = 0;
        proto_push_biz_hannel_req.prototype.sub_seq = 0;
        proto_push_biz_hannel_req.prototype.qos_flag = 0;
        proto_push_biz_hannel_req.prototype.msg_id = "";
        proto_push_biz_hannel_req.prototype.sender_id = "";
        proto_push_biz_hannel_req.prototype.msg_body = $util.newBuffer([]);

        proto_push_biz_hannel_req.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_access_pb.proto_push_biz_hannel_req();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.sub_cmd = reader.uint32();
                    break;
                case 2:
                    message.sub_seq = reader.uint32();
                    break;
                case 3:
                    message.qos_flag = reader.uint32();
                    break;
                case 4:
                    message.msg_id = reader.string();
                    break;
                case 5:
                    message.sender_id = reader.string();
                    break;
                case 6:
                    message.msg_body = reader.bytes();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_push_biz_hannel_req.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_access_pb.proto_push_biz_hannel_req)
                return object;
            let message = new $root.proto_access_pb.proto_push_biz_hannel_req();
            if (object.sub_cmd != null)
                message.sub_cmd = object.sub_cmd >>> 0;
            if (object.sub_seq != null)
                message.sub_seq = object.sub_seq >>> 0;
            if (object.qos_flag != null)
                message.qos_flag = object.qos_flag >>> 0;
            if (object.msg_id != null)
                message.msg_id = String(object.msg_id);
            if (object.sender_id != null)
                message.sender_id = String(object.sender_id);
            if (object.msg_body != null)
                if (typeof object.msg_body === "string")
                    $util.base64.decode(object.msg_body, message.msg_body = $util.newBuffer($util.base64.length(object.msg_body)), 0);
                else if (object.msg_body.length)
                    message.msg_body = object.msg_body;
            return message;
        };

        proto_push_biz_hannel_req.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.sub_cmd = 0;
                object.sub_seq = 0;
                object.qos_flag = 0;
                object.msg_id = "";
                object.sender_id = "";
                if (options.bytes === String)
                    object.msg_body = "";
                else {
                    object.msg_body = [];
                    if (options.bytes !== Array)
                        object.msg_body = $util.newBuffer(object.msg_body);
                }
            }
            if (message.sub_cmd != null && message.hasOwnProperty("sub_cmd"))
                object.sub_cmd = message.sub_cmd;
            if (message.sub_seq != null && message.hasOwnProperty("sub_seq"))
                object.sub_seq = message.sub_seq;
            if (message.qos_flag != null && message.hasOwnProperty("qos_flag"))
                object.qos_flag = message.qos_flag;
            if (message.msg_id != null && message.hasOwnProperty("msg_id"))
                object.msg_id = message.msg_id;
            if (message.sender_id != null && message.hasOwnProperty("sender_id"))
                object.sender_id = message.sender_id;
            if (message.msg_body != null && message.hasOwnProperty("msg_body"))
                object.msg_body = options.bytes === String ? $util.base64.encode(message.msg_body, 0, message.msg_body.length) : options.bytes === Array ? Array.prototype.slice.call(message.msg_body) : message.msg_body;
            return object;
        };

        proto_push_biz_hannel_req.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_push_biz_hannel_req;
    })();

    return proto_access_pb;
})();

const proto_biz_channel = $root.proto_biz_channel = (() => {

    const proto_biz_channel = {};

    proto_biz_channel.req_header = (function() {

        function req_header(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        req_header.prototype.sdk_version = 0;
        req_header.prototype.id_name = "";

        req_header.create = function create(properties) {
            return new req_header(properties);
        };

        req_header.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.sdk_version != null && Object.hasOwnProperty.call(message, "sdk_version"))
                writer.uint32(8).uint32(message.sdk_version);
            if (message.id_name != null && Object.hasOwnProperty.call(message, "id_name"))
                writer.uint32(18).string(message.id_name);
            return writer;
        };

        return req_header;
    })();

    proto_biz_channel.req = (function() {

        function req(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        req.prototype.req_header = null;
        req.prototype.body = $util.newBuffer([]);

        req.create = function create(properties) {
            return new req(properties);
        };

        req.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.req_header != null && Object.hasOwnProperty.call(message, "req_header"))
                $root.proto_biz_channel.req_header.encode(message.req_header, writer.uint32(10).fork()).ldelim();
            if (message.body != null && Object.hasOwnProperty.call(message, "body"))
                writer.uint32(18).bytes(message.body);
            return writer;
        };

        return req;
    })();

    proto_biz_channel.rsp_header = (function() {

        function rsp_header(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        rsp_header.prototype.code = 0;
        rsp_header.prototype.seq = 0;
        rsp_header.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,false) : 0;

        rsp_header.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_biz_channel.rsp_header();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.code = reader.int32();
                    break;
                case 2:
                    message.seq = reader.uint32();
                    break;
                case 3:
                    message.timestamp = reader.int64();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        rsp_header.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_biz_channel.rsp_header)
                return object;
            let message = new $root.proto_biz_channel.rsp_header();
            if (object.code != null)
                message.code = object.code | 0;
            if (object.seq != null)
                message.seq = object.seq >>> 0;
            if (object.timestamp != null)
                if ($util.Long)
                    (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = false;
                else if (typeof object.timestamp === "string")
                    message.timestamp = parseInt(object.timestamp, 10);
                else if (typeof object.timestamp === "number")
                    message.timestamp = object.timestamp;
                else if (typeof object.timestamp === "object")
                    message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber();
            return message;
        };

        rsp_header.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.code = 0;
                object.seq = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, false);
                    object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.timestamp = options.longs === String ? "0" : 0;
            }
            if (message.code != null && message.hasOwnProperty("code"))
                object.code = message.code;
            if (message.seq != null && message.hasOwnProperty("seq"))
                object.seq = message.seq;
            if (message.timestamp != null && message.hasOwnProperty("timestamp"))
                if (typeof message.timestamp === "number")
                    object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
                else
                    object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber() : message.timestamp;
            return object;
        };

        rsp_header.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return rsp_header;
    })();

    proto_biz_channel.rsp = (function() {

        function rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        rsp.prototype.header = null;
        rsp.prototype.body = $util.newBuffer([]);

        rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_biz_channel.rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.header = $root.proto_biz_channel.rsp_header.decode(reader, reader.uint32());
                    break;
                case 2:
                    message.body = reader.bytes();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_biz_channel.rsp)
                return object;
            let message = new $root.proto_biz_channel.rsp();
            if (object.header != null) {
                if (typeof object.header !== "object")
                    throw TypeError(".proto_biz_channel.rsp.header: object expected");
                message.header = $root.proto_biz_channel.rsp_header.fromObject(object.header);
            }
            if (object.body != null)
                if (typeof object.body === "string")
                    $util.base64.decode(object.body, message.body = $util.newBuffer($util.base64.length(object.body)), 0);
                else if (object.body.length)
                    message.body = object.body;
            return message;
        };

        rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.header = null;
                if (options.bytes === String)
                    object.body = "";
                else {
                    object.body = [];
                    if (options.bytes !== Array)
                        object.body = $util.newBuffer(object.body);
                }
            }
            if (message.header != null && message.hasOwnProperty("header"))
                object.header = $root.proto_biz_channel.rsp_header.toObject(message.header, options);
            if (message.body != null && message.hasOwnProperty("body"))
                object.body = options.bytes === String ? $util.base64.encode(message.body, 0, message.body.length) : options.bytes === Array ? Array.prototype.slice.call(message.body) : message.body;
            return object;
        };

        rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return rsp;
    })();

    return proto_biz_channel;
})();

const proto_edu_v1_web = $root.proto_edu_v1_web = (() => {

    const proto_edu_v1_web = {};

    proto_edu_v1_web.proto_sync = (function() {

        function proto_sync(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_sync.create = function create(properties) {
            return new proto_sync(properties);
        };

        proto_sync.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            return writer;
        };

        return proto_sync;
    })();

    proto_edu_v1_web.proto_create_mod = (function() {

        function proto_create_mod(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_create_mod.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_create_mod.prototype.mod_title = "";
        proto_create_mod.prototype.mod_type = 0;
        proto_create_mod.prototype.mod_subtype = 0;
        proto_create_mod.prototype.mod_pos = "";
        proto_create_mod.prototype.mod_status = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_create_mod.prototype.mod_content = "";
        proto_create_mod.prototype.mod_extra = "";
        proto_create_mod.prototype.mod_reserve = 0;
        proto_create_mod.prototype.mod_delete_flag = 0;
        proto_create_mod.prototype.mod_horizontal_percent = 0;
        proto_create_mod.prototype.mod_vertical_percent = 0;
        proto_create_mod.prototype.mod_scale = "";

        proto_create_mod.create = function create(properties) {
            return new proto_create_mod(properties);
        };

        proto_create_mod.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(8).uint64(message.mod_id);
            if (message.mod_title != null && Object.hasOwnProperty.call(message, "mod_title"))
                writer.uint32(18).string(message.mod_title);
            if (message.mod_type != null && Object.hasOwnProperty.call(message, "mod_type"))
                writer.uint32(24).uint32(message.mod_type);
            if (message.mod_subtype != null && Object.hasOwnProperty.call(message, "mod_subtype"))
                writer.uint32(32).uint32(message.mod_subtype);
            if (message.mod_pos != null && Object.hasOwnProperty.call(message, "mod_pos"))
                writer.uint32(42).string(message.mod_pos);
            if (message.mod_status != null && Object.hasOwnProperty.call(message, "mod_status"))
                writer.uint32(48).uint64(message.mod_status);
            if (message.mod_content != null && Object.hasOwnProperty.call(message, "mod_content"))
                writer.uint32(58).string(message.mod_content);
            if (message.mod_extra != null && Object.hasOwnProperty.call(message, "mod_extra"))
                writer.uint32(66).string(message.mod_extra);
            if (message.mod_reserve != null && Object.hasOwnProperty.call(message, "mod_reserve"))
                writer.uint32(72).uint32(message.mod_reserve);
            if (message.mod_delete_flag != null && Object.hasOwnProperty.call(message, "mod_delete_flag"))
                writer.uint32(80).int32(message.mod_delete_flag);
            if (message.mod_horizontal_percent != null && Object.hasOwnProperty.call(message, "mod_horizontal_percent"))
                writer.uint32(93).float(message.mod_horizontal_percent);
            if (message.mod_vertical_percent != null && Object.hasOwnProperty.call(message, "mod_vertical_percent"))
                writer.uint32(101).float(message.mod_vertical_percent);
            if (message.mod_scale != null && Object.hasOwnProperty.call(message, "mod_scale"))
                writer.uint32(106).string(message.mod_scale);
            return writer;
        };

        return proto_create_mod;
    })();

    proto_edu_v1_web.proto_destroy_mod = (function() {

        function proto_destroy_mod(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_destroy_mod.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;

        proto_destroy_mod.create = function create(properties) {
            return new proto_destroy_mod(properties);
        };

        proto_destroy_mod.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(8).uint64(message.mod_id);
            return writer;
        };

        return proto_destroy_mod;
    })();

    proto_edu_v1_web.proto_modify_mod = (function() {

        function proto_modify_mod(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_modify_mod.prototype.mod_seq = 0;
        proto_modify_mod.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_modify_mod.prototype.mod_title = "";
        proto_modify_mod.prototype.mod_pos = "";
        proto_modify_mod.prototype.mod_status = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_modify_mod.prototype.mod_content = "";
        proto_modify_mod.prototype.mod_extra = "";
        proto_modify_mod.prototype.mod_reserve = 0;
        proto_modify_mod.prototype.is_modify_mod_title = false;
        proto_modify_mod.prototype.is_modify_mod_pos = false;
        proto_modify_mod.prototype.is_modify_mod_status = false;
        proto_modify_mod.prototype.is_modify_mod_content = false;
        proto_modify_mod.prototype.is_modify_mod_extra = false;
        proto_modify_mod.prototype.is_modify_mod_reserve = false;
        proto_modify_mod.prototype.mod_horizontal_percent = 0;
        proto_modify_mod.prototype.mod_vertical_percent = 0;
        proto_modify_mod.prototype.is_modify_mod_horizontal_percent = false;
        proto_modify_mod.prototype.is_modify_mod_vertical_percent = false;
        proto_modify_mod.prototype.is_modify_mod_scale = false;
        proto_modify_mod.prototype.mod_scale = "";

        proto_modify_mod.create = function create(properties) {
            return new proto_modify_mod(properties);
        };

        proto_modify_mod.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_seq != null && Object.hasOwnProperty.call(message, "mod_seq"))
                writer.uint32(8).uint32(message.mod_seq);
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(16).uint64(message.mod_id);
            if (message.mod_title != null && Object.hasOwnProperty.call(message, "mod_title"))
                writer.uint32(26).string(message.mod_title);
            if (message.mod_pos != null && Object.hasOwnProperty.call(message, "mod_pos"))
                writer.uint32(34).string(message.mod_pos);
            if (message.mod_status != null && Object.hasOwnProperty.call(message, "mod_status"))
                writer.uint32(40).uint64(message.mod_status);
            if (message.mod_content != null && Object.hasOwnProperty.call(message, "mod_content"))
                writer.uint32(50).string(message.mod_content);
            if (message.mod_extra != null && Object.hasOwnProperty.call(message, "mod_extra"))
                writer.uint32(58).string(message.mod_extra);
            if (message.mod_reserve != null && Object.hasOwnProperty.call(message, "mod_reserve"))
                writer.uint32(64).uint32(message.mod_reserve);
            if (message.is_modify_mod_title != null && Object.hasOwnProperty.call(message, "is_modify_mod_title"))
                writer.uint32(72).bool(message.is_modify_mod_title);
            if (message.is_modify_mod_pos != null && Object.hasOwnProperty.call(message, "is_modify_mod_pos"))
                writer.uint32(80).bool(message.is_modify_mod_pos);
            if (message.is_modify_mod_status != null && Object.hasOwnProperty.call(message, "is_modify_mod_status"))
                writer.uint32(88).bool(message.is_modify_mod_status);
            if (message.is_modify_mod_content != null && Object.hasOwnProperty.call(message, "is_modify_mod_content"))
                writer.uint32(96).bool(message.is_modify_mod_content);
            if (message.is_modify_mod_extra != null && Object.hasOwnProperty.call(message, "is_modify_mod_extra"))
                writer.uint32(104).bool(message.is_modify_mod_extra);
            if (message.is_modify_mod_reserve != null && Object.hasOwnProperty.call(message, "is_modify_mod_reserve"))
                writer.uint32(112).bool(message.is_modify_mod_reserve);
            if (message.mod_horizontal_percent != null && Object.hasOwnProperty.call(message, "mod_horizontal_percent"))
                writer.uint32(125).float(message.mod_horizontal_percent);
            if (message.mod_vertical_percent != null && Object.hasOwnProperty.call(message, "mod_vertical_percent"))
                writer.uint32(133).float(message.mod_vertical_percent);
            if (message.is_modify_mod_horizontal_percent != null && Object.hasOwnProperty.call(message, "is_modify_mod_horizontal_percent"))
                writer.uint32(136).bool(message.is_modify_mod_horizontal_percent);
            if (message.is_modify_mod_vertical_percent != null && Object.hasOwnProperty.call(message, "is_modify_mod_vertical_percent"))
                writer.uint32(144).bool(message.is_modify_mod_vertical_percent);
            if (message.is_modify_mod_scale != null && Object.hasOwnProperty.call(message, "is_modify_mod_scale"))
                writer.uint32(152).bool(message.is_modify_mod_scale);
            if (message.mod_scale != null && Object.hasOwnProperty.call(message, "mod_scale"))
                writer.uint32(162).string(message.mod_scale);
            return writer;
        };

        return proto_modify_mod;
    })();

    proto_edu_v1_web.proto_get_mod = (function() {

        function proto_get_mod(properties) {
            this.mod_id_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_mod.prototype.mod_id_list = $util.emptyArray;

        proto_get_mod.create = function create(properties) {
            return new proto_get_mod(properties);
        };

        proto_get_mod.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id_list != null && message.mod_id_list.length)
                for (let i = 0; i < message.mod_id_list.length; ++i)
                    writer.uint32(10).string(message.mod_id_list[i]);
            return writer;
        };

        return proto_get_mod;
    })();

    proto_edu_v1_web.proto_get_mod_list = (function() {

        function proto_get_mod_list(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_mod_list.prototype.mod_list_seq = 0;
        proto_get_mod_list.prototype.limit = 0;
        proto_get_mod_list.prototype.marker = "";
        proto_get_mod_list.prototype.mod_type = 0;

        proto_get_mod_list.create = function create(properties) {
            return new proto_get_mod_list(properties);
        };

        proto_get_mod_list.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_list_seq != null && Object.hasOwnProperty.call(message, "mod_list_seq"))
                writer.uint32(8).uint32(message.mod_list_seq);
            if (message.limit != null && Object.hasOwnProperty.call(message, "limit"))
                writer.uint32(16).uint32(message.limit);
            if (message.marker != null && Object.hasOwnProperty.call(message, "marker"))
                writer.uint32(26).string(message.marker);
            if (message.mod_type != null && Object.hasOwnProperty.call(message, "mod_type"))
                writer.uint32(32).uint32(message.mod_type);
            return writer;
        };

        return proto_get_mod_list;
    })();

    proto_edu_v1_web.proto_draw_page_graphics = (function() {

        function proto_draw_page_graphics(properties) {
            this.draw_pages = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_draw_page_graphics.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_draw_page_graphics.prototype.draw_pages = $util.emptyArray;
        proto_draw_page_graphics.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;

        proto_draw_page_graphics.create = function create(properties) {
            return new proto_draw_page_graphics(properties);
        };

        proto_draw_page_graphics.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(8).uint64(message.mod_id);
            if (message.draw_pages != null && message.draw_pages.length)
                for (let i = 0; i < message.draw_pages.length; ++i)
                    $root.proto_edu_v1_web.proto_draw_page.encode(message.draw_pages[i], writer.uint32(18).fork()).ldelim();
            if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
                writer.uint32(24).uint64(message.timestamp);
            return writer;
        };

        return proto_draw_page_graphics;
    })();

    proto_edu_v1_web.proto_draw_page = (function() {

        function proto_draw_page(properties) {
            this.draw_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_draw_page.prototype.page = 0;
        proto_draw_page.prototype.graphic_list_seq = 0;
        proto_draw_page.prototype.draw_list = $util.emptyArray;

        proto_draw_page.create = function create(properties) {
            return new proto_draw_page(properties);
        };

        proto_draw_page.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.page != null && Object.hasOwnProperty.call(message, "page"))
                writer.uint32(8).uint32(message.page);
            if (message.graphic_list_seq != null && Object.hasOwnProperty.call(message, "graphic_list_seq"))
                writer.uint32(16).uint32(message.graphic_list_seq);
            if (message.draw_list != null && message.draw_list.length)
                for (let i = 0; i < message.draw_list.length; ++i)
                    $root.proto_edu_v1_web.proto_draw.encode(message.draw_list[i], writer.uint32(26).fork()).ldelim();
            return writer;
        };

        return proto_draw_page;
    })();

    proto_edu_v1_web.proto_draw = (function() {

        function proto_draw(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_draw.prototype.graphic_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_draw.prototype.action = 0;
        proto_draw.prototype.action_type = 0;
        proto_draw.prototype.type = 0;
        proto_draw.prototype.zorder = 0;
        proto_draw.prototype.x = 0;
        proto_draw.prototype.y = 0;
        proto_draw.prototype.px = 0;
        proto_draw.prototype.py = 0;
        proto_draw.prototype.data = $util.newBuffer([]);
        proto_draw.prototype.size = 0;
        proto_draw.prototype.color = 0;
        proto_draw.prototype.width = 0;
        proto_draw.prototype.height = 0;
        proto_draw.prototype.attributes = "";
        proto_draw.prototype.operate_id = "";
        proto_draw.prototype.is_end_draw = false;
        proto_draw.prototype.layer = 0;

        proto_draw.create = function create(properties) {
            return new proto_draw(properties);
        };

        proto_draw.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.graphic_id != null && Object.hasOwnProperty.call(message, "graphic_id"))
                writer.uint32(8).uint64(message.graphic_id);
            if (message.action != null && Object.hasOwnProperty.call(message, "action"))
                writer.uint32(16).int32(message.action);
            if (message.action_type != null && Object.hasOwnProperty.call(message, "action_type"))
                writer.uint32(24).int32(message.action_type);
            if (message.type != null && Object.hasOwnProperty.call(message, "type"))
                writer.uint32(32).int32(message.type);
            if (message.zorder != null && Object.hasOwnProperty.call(message, "zorder"))
                writer.uint32(40).int32(message.zorder);
            if (message.x != null && Object.hasOwnProperty.call(message, "x"))
                writer.uint32(48).int32(message.x);
            if (message.y != null && Object.hasOwnProperty.call(message, "y"))
                writer.uint32(56).int32(message.y);
            if (message.px != null && Object.hasOwnProperty.call(message, "px"))
                writer.uint32(64).int32(message.px);
            if (message.py != null && Object.hasOwnProperty.call(message, "py"))
                writer.uint32(72).int32(message.py);
            if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                writer.uint32(82).bytes(message.data);
            if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                writer.uint32(88).int32(message.size);
            if (message.color != null && Object.hasOwnProperty.call(message, "color"))
                writer.uint32(96).uint32(message.color);
            if (message.width != null && Object.hasOwnProperty.call(message, "width"))
                writer.uint32(104).int32(message.width);
            if (message.height != null && Object.hasOwnProperty.call(message, "height"))
                writer.uint32(112).int32(message.height);
            if (message.attributes != null && Object.hasOwnProperty.call(message, "attributes"))
                writer.uint32(122).string(message.attributes);
            if (message.operate_id != null && Object.hasOwnProperty.call(message, "operate_id"))
                writer.uint32(130).string(message.operate_id);
            if (message.is_end_draw != null && Object.hasOwnProperty.call(message, "is_end_draw"))
                writer.uint32(136).bool(message.is_end_draw);
            if (message.layer != null && Object.hasOwnProperty.call(message, "layer"))
                writer.uint32(144).uint32(message.layer);
            return writer;
        };

        return proto_draw;
    })();

    proto_edu_v1_web.proto_clear_page_graphics = (function() {

        function proto_clear_page_graphics(properties) {
            this.layers = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_clear_page_graphics.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_clear_page_graphics.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_clear_page_graphics.prototype.layers = $util.emptyArray;

        proto_clear_page_graphics.create = function create(properties) {
            return new proto_clear_page_graphics(properties);
        };

        proto_clear_page_graphics.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(8).uint64(message.mod_id);
            if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
                writer.uint32(16).uint64(message.timestamp);
            if (message.layers != null && message.layers.length) {
                writer.uint32(26).fork();
                for (let i = 0; i < message.layers.length; ++i)
                    writer.uint32(message.layers[i]);
                writer.ldelim();
            }
            return writer;
        };

        return proto_clear_page_graphics;
    })();

    proto_edu_v1_web.proto_get_page_graphics = (function() {

        function proto_get_page_graphics(properties) {
            this.pages = [];
            this.graphic_list_seqs = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_page_graphics.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_get_page_graphics.prototype.pages = $util.emptyArray;
        proto_get_page_graphics.prototype.graphic_list_seqs = $util.emptyArray;
        proto_get_page_graphics.prototype.limit = 0;

        proto_get_page_graphics.create = function create(properties) {
            return new proto_get_page_graphics(properties);
        };

        proto_get_page_graphics.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.mod_id != null && Object.hasOwnProperty.call(message, "mod_id"))
                writer.uint32(8).uint64(message.mod_id);
            if (message.pages != null && message.pages.length) {
                writer.uint32(18).fork();
                for (let i = 0; i < message.pages.length; ++i)
                    writer.uint32(message.pages[i]);
                writer.ldelim();
            }
            if (message.graphic_list_seqs != null && message.graphic_list_seqs.length) {
                writer.uint32(26).fork();
                for (let i = 0; i < message.graphic_list_seqs.length; ++i)
                    writer.uint32(message.graphic_list_seqs[i]);
                writer.ldelim();
            }
            if (message.limit != null && Object.hasOwnProperty.call(message, "limit"))
                writer.uint32(32).uint32(message.limit);
            return writer;
        };

        return proto_get_page_graphics;
    })();

    proto_edu_v1_web.proto_get_user_auth_req = (function() {

        function proto_get_user_auth_req(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_user_auth_req.create = function create(properties) {
            return new proto_get_user_auth_req(properties);
        };

        proto_get_user_auth_req.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            return writer;
        };

        return proto_get_user_auth_req;
    })();

    proto_edu_v1_web.proto_get_room_auth_req = (function() {

        function proto_get_room_auth_req(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_room_auth_req.create = function create(properties) {
            return new proto_get_room_auth_req(properties);
        };

        proto_get_room_auth_req.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            return writer;
        };

        return proto_get_room_auth_req;
    })();

    proto_edu_v1_web.proto_mod = (function() {

        function proto_mod(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_mod.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_mod.prototype.mod_seq = 0;
        proto_mod.prototype.mod_title = "";
        proto_mod.prototype.mod_type = 0;
        proto_mod.prototype.mod_subtype = 0;
        proto_mod.prototype.mod_pos = "";
        proto_mod.prototype.mod_status = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_mod.prototype.mod_content = "";
        proto_mod.prototype.mod_extra = "";
        proto_mod.prototype.mod_reserve = 0;
        proto_mod.prototype.mod_create_time = $util.Long ? $util.Long.fromBits(0,0,false) : 0;
        proto_mod.prototype.graphic_list_seq = 0;
        proto_mod.prototype.sync_interval = 0;
        proto_mod.prototype.mod_horizontal_percent = 0;
        proto_mod.prototype.mod_vertical_percent = 0;
        proto_mod.prototype.mod_scale = "";

        proto_mod.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_mod();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    message.mod_seq = reader.uint32();
                    break;
                case 3:
                    message.mod_title = reader.string();
                    break;
                case 4:
                    message.mod_type = reader.uint32();
                    break;
                case 5:
                    message.mod_subtype = reader.uint32();
                    break;
                case 6:
                    message.mod_pos = reader.string();
                    break;
                case 7:
                    message.mod_status = reader.uint64();
                    break;
                case 8:
                    message.mod_content = reader.string();
                    break;
                case 9:
                    message.mod_extra = reader.string();
                    break;
                case 10:
                    message.mod_reserve = reader.uint32();
                    break;
                case 11:
                    message.mod_create_time = reader.int64();
                    break;
                case 12:
                    message.graphic_list_seq = reader.uint32();
                    break;
                case 13:
                    message.sync_interval = reader.uint32();
                    break;
                case 14:
                    message.mod_horizontal_percent = reader.float();
                    break;
                case 15:
                    message.mod_vertical_percent = reader.float();
                    break;
                case 16:
                    message.mod_scale = reader.string();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_mod.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_mod)
                return object;
            let message = new $root.proto_edu_v1_web.proto_mod();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.mod_seq != null)
                message.mod_seq = object.mod_seq >>> 0;
            if (object.mod_title != null)
                message.mod_title = String(object.mod_title);
            if (object.mod_type != null)
                message.mod_type = object.mod_type >>> 0;
            if (object.mod_subtype != null)
                message.mod_subtype = object.mod_subtype >>> 0;
            if (object.mod_pos != null)
                message.mod_pos = String(object.mod_pos);
            if (object.mod_status != null)
                if ($util.Long)
                    (message.mod_status = $util.Long.fromValue(object.mod_status)).unsigned = true;
                else if (typeof object.mod_status === "string")
                    message.mod_status = parseInt(object.mod_status, 10);
                else if (typeof object.mod_status === "number")
                    message.mod_status = object.mod_status;
                else if (typeof object.mod_status === "object")
                    message.mod_status = new $util.LongBits(object.mod_status.low >>> 0, object.mod_status.high >>> 0).toNumber(true);
            if (object.mod_content != null)
                message.mod_content = String(object.mod_content);
            if (object.mod_extra != null)
                message.mod_extra = String(object.mod_extra);
            if (object.mod_reserve != null)
                message.mod_reserve = object.mod_reserve >>> 0;
            if (object.mod_create_time != null)
                if ($util.Long)
                    (message.mod_create_time = $util.Long.fromValue(object.mod_create_time)).unsigned = false;
                else if (typeof object.mod_create_time === "string")
                    message.mod_create_time = parseInt(object.mod_create_time, 10);
                else if (typeof object.mod_create_time === "number")
                    message.mod_create_time = object.mod_create_time;
                else if (typeof object.mod_create_time === "object")
                    message.mod_create_time = new $util.LongBits(object.mod_create_time.low >>> 0, object.mod_create_time.high >>> 0).toNumber();
            if (object.graphic_list_seq != null)
                message.graphic_list_seq = object.graphic_list_seq >>> 0;
            if (object.sync_interval != null)
                message.sync_interval = object.sync_interval >>> 0;
            if (object.mod_horizontal_percent != null)
                message.mod_horizontal_percent = Number(object.mod_horizontal_percent);
            if (object.mod_vertical_percent != null)
                message.mod_vertical_percent = Number(object.mod_vertical_percent);
            if (object.mod_scale != null)
                message.mod_scale = String(object.mod_scale);
            return message;
        };

        proto_mod.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.mod_seq = 0;
                object.mod_title = "";
                object.mod_type = 0;
                object.mod_subtype = 0;
                object.mod_pos = "";
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_status = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_status = options.longs === String ? "0" : 0;
                object.mod_content = "";
                object.mod_extra = "";
                object.mod_reserve = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, false);
                    object.mod_create_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_create_time = options.longs === String ? "0" : 0;
                object.graphic_list_seq = 0;
                object.sync_interval = 0;
                object.mod_horizontal_percent = 0;
                object.mod_vertical_percent = 0;
                object.mod_scale = "";
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.mod_seq != null && message.hasOwnProperty("mod_seq"))
                object.mod_seq = message.mod_seq;
            if (message.mod_title != null && message.hasOwnProperty("mod_title"))
                object.mod_title = message.mod_title;
            if (message.mod_type != null && message.hasOwnProperty("mod_type"))
                object.mod_type = message.mod_type;
            if (message.mod_subtype != null && message.hasOwnProperty("mod_subtype"))
                object.mod_subtype = message.mod_subtype;
            if (message.mod_pos != null && message.hasOwnProperty("mod_pos"))
                object.mod_pos = message.mod_pos;
            if (message.mod_status != null && message.hasOwnProperty("mod_status"))
                if (typeof message.mod_status === "number")
                    object.mod_status = options.longs === String ? String(message.mod_status) : message.mod_status;
                else
                    object.mod_status = options.longs === String ? $util.Long.prototype.toString.call(message.mod_status) : options.longs === Number ? new $util.LongBits(message.mod_status.low >>> 0, message.mod_status.high >>> 0).toNumber(true) : message.mod_status;
            if (message.mod_content != null && message.hasOwnProperty("mod_content"))
                object.mod_content = message.mod_content;
            if (message.mod_extra != null && message.hasOwnProperty("mod_extra"))
                object.mod_extra = message.mod_extra;
            if (message.mod_reserve != null && message.hasOwnProperty("mod_reserve"))
                object.mod_reserve = message.mod_reserve;
            if (message.mod_create_time != null && message.hasOwnProperty("mod_create_time"))
                if (typeof message.mod_create_time === "number")
                    object.mod_create_time = options.longs === String ? String(message.mod_create_time) : message.mod_create_time;
                else
                    object.mod_create_time = options.longs === String ? $util.Long.prototype.toString.call(message.mod_create_time) : options.longs === Number ? new $util.LongBits(message.mod_create_time.low >>> 0, message.mod_create_time.high >>> 0).toNumber() : message.mod_create_time;
            if (message.graphic_list_seq != null && message.hasOwnProperty("graphic_list_seq"))
                object.graphic_list_seq = message.graphic_list_seq;
            if (message.sync_interval != null && message.hasOwnProperty("sync_interval"))
                object.sync_interval = message.sync_interval;
            if (message.mod_horizontal_percent != null && message.hasOwnProperty("mod_horizontal_percent"))
                object.mod_horizontal_percent = options.json && !isFinite(message.mod_horizontal_percent) ? String(message.mod_horizontal_percent) : message.mod_horizontal_percent;
            if (message.mod_vertical_percent != null && message.hasOwnProperty("mod_vertical_percent"))
                object.mod_vertical_percent = options.json && !isFinite(message.mod_vertical_percent) ? String(message.mod_vertical_percent) : message.mod_vertical_percent;
            if (message.mod_scale != null && message.hasOwnProperty("mod_scale"))
                object.mod_scale = message.mod_scale;
            return object;
        };

        proto_mod.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_mod;
    })();

    proto_edu_v1_web.proto_graphic = (function() {

        function proto_graphic(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_graphic.prototype.id_name = "";
        proto_graphic.prototype.nick_name = "";
        proto_graphic.prototype.graphic_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_graphic.prototype.action_seq = 0;
        proto_graphic.prototype.type = 0;
        proto_graphic.prototype.zorder = 0;
        proto_graphic.prototype.x = 0;
        proto_graphic.prototype.y = 0;
        proto_graphic.prototype.data = $util.newBuffer([]);
        proto_graphic.prototype.size = 0;
        proto_graphic.prototype.color = 0;
        proto_graphic.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_graphic.prototype.width = 0;
        proto_graphic.prototype.height = 0;
        proto_graphic.prototype.attributes = "";
        proto_graphic.prototype.operate_id = "";
        proto_graphic.prototype.is_end_draw = false;
        proto_graphic.prototype.server_timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_graphic.prototype.creator_id = "";
        proto_graphic.prototype.layer = 0;

        proto_graphic.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_graphic();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id_name = reader.string();
                    break;
                case 2:
                    message.nick_name = reader.string();
                    break;
                case 3:
                    message.graphic_id = reader.uint64();
                    break;
                case 4:
                    message.action_seq = reader.uint32();
                    break;
                case 5:
                    message.type = reader.int32();
                    break;
                case 7:
                    message.zorder = reader.int32();
                    break;
                case 8:
                    message.x = reader.int32();
                    break;
                case 9:
                    message.y = reader.int32();
                    break;
                case 10:
                    message.data = reader.bytes();
                    break;
                case 11:
                    message.size = reader.int32();
                    break;
                case 12:
                    message.color = reader.uint32();
                    break;
                case 13:
                    message.timestamp = reader.uint64();
                    break;
                case 14:
                    message.width = reader.int32();
                    break;
                case 15:
                    message.height = reader.int32();
                    break;
                case 16:
                    message.attributes = reader.string();
                    break;
                case 17:
                    message.operate_id = reader.string();
                    break;
                case 18:
                    message.is_end_draw = reader.bool();
                    break;
                case 19:
                    message.server_timestamp = reader.uint64();
                    break;
                case 20:
                    message.creator_id = reader.string();
                    break;
                case 21:
                    message.layer = reader.uint32();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_graphic.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_graphic)
                return object;
            let message = new $root.proto_edu_v1_web.proto_graphic();
            if (object.id_name != null)
                message.id_name = String(object.id_name);
            if (object.nick_name != null)
                message.nick_name = String(object.nick_name);
            if (object.graphic_id != null)
                if ($util.Long)
                    (message.graphic_id = $util.Long.fromValue(object.graphic_id)).unsigned = true;
                else if (typeof object.graphic_id === "string")
                    message.graphic_id = parseInt(object.graphic_id, 10);
                else if (typeof object.graphic_id === "number")
                    message.graphic_id = object.graphic_id;
                else if (typeof object.graphic_id === "object")
                    message.graphic_id = new $util.LongBits(object.graphic_id.low >>> 0, object.graphic_id.high >>> 0).toNumber(true);
            if (object.action_seq != null)
                message.action_seq = object.action_seq >>> 0;
            if (object.type != null)
                message.type = object.type | 0;
            if (object.zorder != null)
                message.zorder = object.zorder | 0;
            if (object.x != null)
                message.x = object.x | 0;
            if (object.y != null)
                message.y = object.y | 0;
            if (object.data != null)
                if (typeof object.data === "string")
                    $util.base64.decode(object.data, message.data = $util.newBuffer($util.base64.length(object.data)), 0);
                else if (object.data.length)
                    message.data = object.data;
            if (object.size != null)
                message.size = object.size | 0;
            if (object.color != null)
                message.color = object.color >>> 0;
            if (object.timestamp != null)
                if ($util.Long)
                    (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
                else if (typeof object.timestamp === "string")
                    message.timestamp = parseInt(object.timestamp, 10);
                else if (typeof object.timestamp === "number")
                    message.timestamp = object.timestamp;
                else if (typeof object.timestamp === "object")
                    message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
            if (object.width != null)
                message.width = object.width | 0;
            if (object.height != null)
                message.height = object.height | 0;
            if (object.attributes != null)
                message.attributes = String(object.attributes);
            if (object.operate_id != null)
                message.operate_id = String(object.operate_id);
            if (object.is_end_draw != null)
                message.is_end_draw = Boolean(object.is_end_draw);
            if (object.server_timestamp != null)
                if ($util.Long)
                    (message.server_timestamp = $util.Long.fromValue(object.server_timestamp)).unsigned = true;
                else if (typeof object.server_timestamp === "string")
                    message.server_timestamp = parseInt(object.server_timestamp, 10);
                else if (typeof object.server_timestamp === "number")
                    message.server_timestamp = object.server_timestamp;
                else if (typeof object.server_timestamp === "object")
                    message.server_timestamp = new $util.LongBits(object.server_timestamp.low >>> 0, object.server_timestamp.high >>> 0).toNumber(true);
            if (object.creator_id != null)
                message.creator_id = String(object.creator_id);
            if (object.layer != null)
                message.layer = object.layer >>> 0;
            return message;
        };

        proto_graphic.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.id_name = "";
                object.nick_name = "";
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.graphic_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.graphic_id = options.longs === String ? "0" : 0;
                object.action_seq = 0;
                object.type = 0;
                object.zorder = 0;
                object.x = 0;
                object.y = 0;
                if (options.bytes === String)
                    object.data = "";
                else {
                    object.data = [];
                    if (options.bytes !== Array)
                        object.data = $util.newBuffer(object.data);
                }
                object.size = 0;
                object.color = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.timestamp = options.longs === String ? "0" : 0;
                object.width = 0;
                object.height = 0;
                object.attributes = "";
                object.operate_id = "";
                object.is_end_draw = false;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.server_timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.server_timestamp = options.longs === String ? "0" : 0;
                object.creator_id = "";
                object.layer = 0;
            }
            if (message.id_name != null && message.hasOwnProperty("id_name"))
                object.id_name = message.id_name;
            if (message.nick_name != null && message.hasOwnProperty("nick_name"))
                object.nick_name = message.nick_name;
            if (message.graphic_id != null && message.hasOwnProperty("graphic_id"))
                if (typeof message.graphic_id === "number")
                    object.graphic_id = options.longs === String ? String(message.graphic_id) : message.graphic_id;
                else
                    object.graphic_id = options.longs === String ? $util.Long.prototype.toString.call(message.graphic_id) : options.longs === Number ? new $util.LongBits(message.graphic_id.low >>> 0, message.graphic_id.high >>> 0).toNumber(true) : message.graphic_id;
            if (message.action_seq != null && message.hasOwnProperty("action_seq"))
                object.action_seq = message.action_seq;
            if (message.type != null && message.hasOwnProperty("type"))
                object.type = message.type;
            if (message.zorder != null && message.hasOwnProperty("zorder"))
                object.zorder = message.zorder;
            if (message.x != null && message.hasOwnProperty("x"))
                object.x = message.x;
            if (message.y != null && message.hasOwnProperty("y"))
                object.y = message.y;
            if (message.data != null && message.hasOwnProperty("data"))
                object.data = options.bytes === String ? $util.base64.encode(message.data, 0, message.data.length) : options.bytes === Array ? Array.prototype.slice.call(message.data) : message.data;
            if (message.size != null && message.hasOwnProperty("size"))
                object.size = message.size;
            if (message.color != null && message.hasOwnProperty("color"))
                object.color = message.color;
            if (message.timestamp != null && message.hasOwnProperty("timestamp"))
                if (typeof message.timestamp === "number")
                    object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
                else
                    object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
            if (message.width != null && message.hasOwnProperty("width"))
                object.width = message.width;
            if (message.height != null && message.hasOwnProperty("height"))
                object.height = message.height;
            if (message.attributes != null && message.hasOwnProperty("attributes"))
                object.attributes = message.attributes;
            if (message.operate_id != null && message.hasOwnProperty("operate_id"))
                object.operate_id = message.operate_id;
            if (message.is_end_draw != null && message.hasOwnProperty("is_end_draw"))
                object.is_end_draw = message.is_end_draw;
            if (message.server_timestamp != null && message.hasOwnProperty("server_timestamp"))
                if (typeof message.server_timestamp === "number")
                    object.server_timestamp = options.longs === String ? String(message.server_timestamp) : message.server_timestamp;
                else
                    object.server_timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.server_timestamp) : options.longs === Number ? new $util.LongBits(message.server_timestamp.low >>> 0, message.server_timestamp.high >>> 0).toNumber(true) : message.server_timestamp;
            if (message.creator_id != null && message.hasOwnProperty("creator_id"))
                object.creator_id = message.creator_id;
            if (message.layer != null && message.hasOwnProperty("layer"))
                object.layer = message.layer;
            return object;
        };

        proto_graphic.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_graphic;
    })();

    proto_edu_v1_web.proto_sync_rsp = (function() {

        function proto_sync_rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_sync_rsp.prototype.sync_interval = 0;
        proto_sync_rsp.prototype.room_extra_info_seq = 0;
        proto_sync_rsp.prototype.user_list_seq = 0;
        proto_sync_rsp.prototype.user_extra_info_seq = 0;
        proto_sync_rsp.prototype.joinlive_seq = 0;
        proto_sync_rsp.prototype.mod_list_seq = 0;
        proto_sync_rsp.prototype.user_auth_seq = 0;
        proto_sync_rsp.prototype.room_auth_seq = 0;

        proto_sync_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_sync_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.sync_interval = reader.uint32();
                    break;
                case 2:
                    message.room_extra_info_seq = reader.uint32();
                    break;
                case 3:
                    message.user_list_seq = reader.uint32();
                    break;
                case 4:
                    message.user_extra_info_seq = reader.uint32();
                    break;
                case 5:
                    message.joinlive_seq = reader.uint32();
                    break;
                case 6:
                    message.mod_list_seq = reader.uint32();
                    break;
                case 7:
                    message.user_auth_seq = reader.uint32();
                    break;
                case 8:
                    message.room_auth_seq = reader.uint32();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_sync_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_sync_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_sync_rsp();
            if (object.sync_interval != null)
                message.sync_interval = object.sync_interval >>> 0;
            if (object.room_extra_info_seq != null)
                message.room_extra_info_seq = object.room_extra_info_seq >>> 0;
            if (object.user_list_seq != null)
                message.user_list_seq = object.user_list_seq >>> 0;
            if (object.user_extra_info_seq != null)
                message.user_extra_info_seq = object.user_extra_info_seq >>> 0;
            if (object.joinlive_seq != null)
                message.joinlive_seq = object.joinlive_seq >>> 0;
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            if (object.user_auth_seq != null)
                message.user_auth_seq = object.user_auth_seq >>> 0;
            if (object.room_auth_seq != null)
                message.room_auth_seq = object.room_auth_seq >>> 0;
            return message;
        };

        proto_sync_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.sync_interval = 0;
                object.room_extra_info_seq = 0;
                object.user_list_seq = 0;
                object.user_extra_info_seq = 0;
                object.joinlive_seq = 0;
                object.mod_list_seq = 0;
                object.user_auth_seq = 0;
                object.room_auth_seq = 0;
            }
            if (message.sync_interval != null && message.hasOwnProperty("sync_interval"))
                object.sync_interval = message.sync_interval;
            if (message.room_extra_info_seq != null && message.hasOwnProperty("room_extra_info_seq"))
                object.room_extra_info_seq = message.room_extra_info_seq;
            if (message.user_list_seq != null && message.hasOwnProperty("user_list_seq"))
                object.user_list_seq = message.user_list_seq;
            if (message.user_extra_info_seq != null && message.hasOwnProperty("user_extra_info_seq"))
                object.user_extra_info_seq = message.user_extra_info_seq;
            if (message.joinlive_seq != null && message.hasOwnProperty("joinlive_seq"))
                object.joinlive_seq = message.joinlive_seq;
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            if (message.user_auth_seq != null && message.hasOwnProperty("user_auth_seq"))
                object.user_auth_seq = message.user_auth_seq;
            if (message.room_auth_seq != null && message.hasOwnProperty("room_auth_seq"))
                object.room_auth_seq = message.room_auth_seq;
            return object;
        };

        proto_sync_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_sync_rsp;
    })();

    proto_edu_v1_web.proto_create_mod_rsp = (function() {

        function proto_create_mod_rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_create_mod_rsp.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_create_mod_rsp.prototype.mod_seq = 0;
        proto_create_mod_rsp.prototype.mod_list_seq = 0;
        proto_create_mod_rsp.prototype.mod_create_time = $util.Long ? $util.Long.fromBits(0,0,false) : 0;

        proto_create_mod_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_create_mod_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    message.mod_seq = reader.uint32();
                    break;
                case 3:
                    message.mod_list_seq = reader.uint32();
                    break;
                case 4:
                    message.mod_create_time = reader.int64();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_create_mod_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_create_mod_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_create_mod_rsp();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.mod_seq != null)
                message.mod_seq = object.mod_seq >>> 0;
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            if (object.mod_create_time != null)
                if ($util.Long)
                    (message.mod_create_time = $util.Long.fromValue(object.mod_create_time)).unsigned = false;
                else if (typeof object.mod_create_time === "string")
                    message.mod_create_time = parseInt(object.mod_create_time, 10);
                else if (typeof object.mod_create_time === "number")
                    message.mod_create_time = object.mod_create_time;
                else if (typeof object.mod_create_time === "object")
                    message.mod_create_time = new $util.LongBits(object.mod_create_time.low >>> 0, object.mod_create_time.high >>> 0).toNumber();
            return message;
        };

        proto_create_mod_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.mod_seq = 0;
                object.mod_list_seq = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, false);
                    object.mod_create_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_create_time = options.longs === String ? "0" : 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.mod_seq != null && message.hasOwnProperty("mod_seq"))
                object.mod_seq = message.mod_seq;
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            if (message.mod_create_time != null && message.hasOwnProperty("mod_create_time"))
                if (typeof message.mod_create_time === "number")
                    object.mod_create_time = options.longs === String ? String(message.mod_create_time) : message.mod_create_time;
                else
                    object.mod_create_time = options.longs === String ? $util.Long.prototype.toString.call(message.mod_create_time) : options.longs === Number ? new $util.LongBits(message.mod_create_time.low >>> 0, message.mod_create_time.high >>> 0).toNumber() : message.mod_create_time;
            return object;
        };

        proto_create_mod_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_create_mod_rsp;
    })();

    proto_edu_v1_web.proto_destroy_mod_rsp = (function() {

        function proto_destroy_mod_rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_destroy_mod_rsp.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_destroy_mod_rsp.prototype.mod_list_seq = 0;

        proto_destroy_mod_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_destroy_mod_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    message.mod_list_seq = reader.uint32();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_destroy_mod_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_destroy_mod_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_destroy_mod_rsp();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            return message;
        };

        proto_destroy_mod_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.mod_list_seq = 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            return object;
        };

        proto_destroy_mod_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_destroy_mod_rsp;
    })();

    proto_edu_v1_web.proto_modify_mod_rsp = (function() {

        function proto_modify_mod_rsp(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_modify_mod_rsp.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_modify_mod_rsp.prototype.mod_seq = 0;
        proto_modify_mod_rsp.prototype.mod_list_seq = 0;

        proto_modify_mod_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_modify_mod_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    message.mod_seq = reader.uint32();
                    break;
                case 3:
                    message.mod_list_seq = reader.uint32();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_modify_mod_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_modify_mod_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_modify_mod_rsp();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.mod_seq != null)
                message.mod_seq = object.mod_seq >>> 0;
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            return message;
        };

        proto_modify_mod_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.mod_seq = 0;
                object.mod_list_seq = 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.mod_seq != null && message.hasOwnProperty("mod_seq"))
                object.mod_seq = message.mod_seq;
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            return object;
        };

        proto_modify_mod_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_modify_mod_rsp;
    })();

    proto_edu_v1_web.proto_get_mod_rsp = (function() {

        function proto_get_mod_rsp(properties) {
            this.mod_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_mod_rsp.prototype.mod_list = $util.emptyArray;

        proto_get_mod_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_mod_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    if (!(message.mod_list && message.mod_list.length))
                        message.mod_list = [];
                    message.mod_list.push($root.proto_edu_v1_web.proto_mod.decode(reader, reader.uint32()));
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_mod_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_mod_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_mod_rsp();
            if (object.mod_list) {
                if (!Array.isArray(object.mod_list))
                    throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: array expected");
                message.mod_list = [];
                for (let i = 0; i < object.mod_list.length; ++i) {
                    if (typeof object.mod_list[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: object expected");
                    message.mod_list[i] = $root.proto_edu_v1_web.proto_mod.fromObject(object.mod_list[i]);
                }
            }
            return message;
        };

        proto_get_mod_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.mod_list = [];
            if (message.mod_list && message.mod_list.length) {
                object.mod_list = [];
                for (let j = 0; j < message.mod_list.length; ++j)
                    object.mod_list[j] = $root.proto_edu_v1_web.proto_mod.toObject(message.mod_list[j], options);
            }
            return object;
        };

        proto_get_mod_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_mod_rsp;
    })();

    proto_edu_v1_web.proto_get_mod_list_rsp = (function() {

        function proto_get_mod_list_rsp(properties) {
            this.mod_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_mod_list_rsp.prototype.mod_list_seq = 0;
        proto_get_mod_list_rsp.prototype.marker = "";
        proto_get_mod_list_rsp.prototype.mod_type = 0;
        proto_get_mod_list_rsp.prototype.mod_list = $util.emptyArray;

        proto_get_mod_list_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_mod_list_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_list_seq = reader.uint32();
                    break;
                case 2:
                    message.marker = reader.string();
                    break;
                case 3:
                    message.mod_type = reader.uint32();
                    break;
                case 4:
                    if (!(message.mod_list && message.mod_list.length))
                        message.mod_list = [];
                    message.mod_list.push($root.proto_edu_v1_web.proto_mod.decode(reader, reader.uint32()));
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_mod_list_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_mod_list_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_mod_list_rsp();
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            if (object.marker != null)
                message.marker = String(object.marker);
            if (object.mod_type != null)
                message.mod_type = object.mod_type >>> 0;
            if (object.mod_list) {
                if (!Array.isArray(object.mod_list))
                    throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: array expected");
                message.mod_list = [];
                for (let i = 0; i < object.mod_list.length; ++i) {
                    if (typeof object.mod_list[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: object expected");
                    message.mod_list[i] = $root.proto_edu_v1_web.proto_mod.fromObject(object.mod_list[i]);
                }
            }
            return message;
        };

        proto_get_mod_list_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.mod_list = [];
            if (options.defaults) {
                object.mod_list_seq = 0;
                object.marker = "";
                object.mod_type = 0;
            }
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            if (message.marker != null && message.hasOwnProperty("marker"))
                object.marker = message.marker;
            if (message.mod_type != null && message.hasOwnProperty("mod_type"))
                object.mod_type = message.mod_type;
            if (message.mod_list && message.mod_list.length) {
                object.mod_list = [];
                for (let j = 0; j < message.mod_list.length; ++j)
                    object.mod_list[j] = $root.proto_edu_v1_web.proto_mod.toObject(message.mod_list[j], options);
            }
            return object;
        };

        proto_get_mod_list_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_mod_list_rsp;
    })();

    proto_edu_v1_web.proto_draw_page_graphics_rsp = (function() {

        function proto_draw_page_graphics_rsp(properties) {
            this.pages = [];
            this.graphic_list_seqs = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_draw_page_graphics_rsp.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_draw_page_graphics_rsp.prototype.pages = $util.emptyArray;
        proto_draw_page_graphics_rsp.prototype.graphic_list_seqs = $util.emptyArray;
        proto_draw_page_graphics_rsp.prototype.commit_time = $util.Long ? $util.Long.fromBits(0,0,false) : 0;

        proto_draw_page_graphics_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_draw_page_graphics_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    if (!(message.pages && message.pages.length))
                        message.pages = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.pages.push(reader.uint32());
                    } else
                        message.pages.push(reader.uint32());
                    break;
                case 3:
                    if (!(message.graphic_list_seqs && message.graphic_list_seqs.length))
                        message.graphic_list_seqs = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_list_seqs.push(reader.uint32());
                    } else
                        message.graphic_list_seqs.push(reader.uint32());
                    break;
                case 4:
                    message.commit_time = reader.int64();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_draw_page_graphics_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_draw_page_graphics_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_draw_page_graphics_rsp();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.pages) {
                if (!Array.isArray(object.pages))
                    throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.pages: array expected");
                message.pages = [];
                for (let i = 0; i < object.pages.length; ++i)
                    message.pages[i] = object.pages[i] >>> 0;
            }
            if (object.graphic_list_seqs) {
                if (!Array.isArray(object.graphic_list_seqs))
                    throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.graphic_list_seqs: array expected");
                message.graphic_list_seqs = [];
                for (let i = 0; i < object.graphic_list_seqs.length; ++i)
                    message.graphic_list_seqs[i] = object.graphic_list_seqs[i] >>> 0;
            }
            if (object.commit_time != null)
                if ($util.Long)
                    (message.commit_time = $util.Long.fromValue(object.commit_time)).unsigned = false;
                else if (typeof object.commit_time === "string")
                    message.commit_time = parseInt(object.commit_time, 10);
                else if (typeof object.commit_time === "number")
                    message.commit_time = object.commit_time;
                else if (typeof object.commit_time === "object")
                    message.commit_time = new $util.LongBits(object.commit_time.low >>> 0, object.commit_time.high >>> 0).toNumber();
            return message;
        };

        proto_draw_page_graphics_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.pages = [];
                object.graphic_list_seqs = [];
            }
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, false);
                    object.commit_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.commit_time = options.longs === String ? "0" : 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.pages && message.pages.length) {
                object.pages = [];
                for (let j = 0; j < message.pages.length; ++j)
                    object.pages[j] = message.pages[j];
            }
            if (message.graphic_list_seqs && message.graphic_list_seqs.length) {
                object.graphic_list_seqs = [];
                for (let j = 0; j < message.graphic_list_seqs.length; ++j)
                    object.graphic_list_seqs[j] = message.graphic_list_seqs[j];
            }
            if (message.commit_time != null && message.hasOwnProperty("commit_time"))
                if (typeof message.commit_time === "number")
                    object.commit_time = options.longs === String ? String(message.commit_time) : message.commit_time;
                else
                    object.commit_time = options.longs === String ? $util.Long.prototype.toString.call(message.commit_time) : options.longs === Number ? new $util.LongBits(message.commit_time.low >>> 0, message.commit_time.high >>> 0).toNumber() : message.commit_time;
            return object;
        };

        proto_draw_page_graphics_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_draw_page_graphics_rsp;
    })();

    proto_edu_v1_web.proto_clear_page_graphics_rsp = (function() {

        function proto_clear_page_graphics_rsp(properties) {
            this.pages = [];
            this.graphic_list_seqs = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_clear_page_graphics_rsp.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        proto_clear_page_graphics_rsp.prototype.pages = $util.emptyArray;
        proto_clear_page_graphics_rsp.prototype.graphic_list_seqs = $util.emptyArray;

        proto_clear_page_graphics_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_clear_page_graphics_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    if (!(message.pages && message.pages.length))
                        message.pages = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.pages.push(reader.uint32());
                    } else
                        message.pages.push(reader.uint32());
                    break;
                case 3:
                    if (!(message.graphic_list_seqs && message.graphic_list_seqs.length))
                        message.graphic_list_seqs = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_list_seqs.push(reader.uint32());
                    } else
                        message.graphic_list_seqs.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_clear_page_graphics_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_clear_page_graphics_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_clear_page_graphics_rsp();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.pages) {
                if (!Array.isArray(object.pages))
                    throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.pages: array expected");
                message.pages = [];
                for (let i = 0; i < object.pages.length; ++i)
                    message.pages[i] = object.pages[i] >>> 0;
            }
            if (object.graphic_list_seqs) {
                if (!Array.isArray(object.graphic_list_seqs))
                    throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.graphic_list_seqs: array expected");
                message.graphic_list_seqs = [];
                for (let i = 0; i < object.graphic_list_seqs.length; ++i)
                    message.graphic_list_seqs[i] = object.graphic_list_seqs[i] >>> 0;
            }
            return message;
        };

        proto_clear_page_graphics_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.pages = [];
                object.graphic_list_seqs = [];
            }
            if (options.defaults)
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.pages && message.pages.length) {
                object.pages = [];
                for (let j = 0; j < message.pages.length; ++j)
                    object.pages[j] = message.pages[j];
            }
            if (message.graphic_list_seqs && message.graphic_list_seqs.length) {
                object.graphic_list_seqs = [];
                for (let j = 0; j < message.graphic_list_seqs.length; ++j)
                    object.graphic_list_seqs[j] = message.graphic_list_seqs[j];
            }
            return object;
        };

        proto_clear_page_graphics_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_clear_page_graphics_rsp;
    })();

    proto_edu_v1_web.proto_get_page_graphics_rsp = (function() {

        function proto_get_page_graphics_rsp(properties) {
            this.pages = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_page_graphics_rsp.prototype.pages = $util.emptyArray;
        proto_get_page_graphics_rsp.prototype.operate_expire_time = $util.Long ? $util.Long.fromBits(0,0,true) : 0;

        proto_get_page_graphics_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_page_graphics_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    if (!(message.pages && message.pages.length))
                        message.pages = [];
                    message.pages.push($root.proto_edu_v1_web.proto_get_page_graphics_info.decode(reader, reader.uint32()));
                    break;
                case 2:
                    message.operate_expire_time = reader.uint64();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_page_graphics_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_page_graphics_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_page_graphics_rsp();
            if (object.pages) {
                if (!Array.isArray(object.pages))
                    throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: array expected");
                message.pages = [];
                for (let i = 0; i < object.pages.length; ++i) {
                    if (typeof object.pages[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: object expected");
                    message.pages[i] = $root.proto_edu_v1_web.proto_get_page_graphics_info.fromObject(object.pages[i]);
                }
            }
            if (object.operate_expire_time != null)
                if ($util.Long)
                    (message.operate_expire_time = $util.Long.fromValue(object.operate_expire_time)).unsigned = true;
                else if (typeof object.operate_expire_time === "string")
                    message.operate_expire_time = parseInt(object.operate_expire_time, 10);
                else if (typeof object.operate_expire_time === "number")
                    message.operate_expire_time = object.operate_expire_time;
                else if (typeof object.operate_expire_time === "object")
                    message.operate_expire_time = new $util.LongBits(object.operate_expire_time.low >>> 0, object.operate_expire_time.high >>> 0).toNumber(true);
            return message;
        };

        proto_get_page_graphics_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.pages = [];
            if (options.defaults)
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.operate_expire_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.operate_expire_time = options.longs === String ? "0" : 0;
            if (message.pages && message.pages.length) {
                object.pages = [];
                for (let j = 0; j < message.pages.length; ++j)
                    object.pages[j] = $root.proto_edu_v1_web.proto_get_page_graphics_info.toObject(message.pages[j], options);
            }
            if (message.operate_expire_time != null && message.hasOwnProperty("operate_expire_time"))
                if (typeof message.operate_expire_time === "number")
                    object.operate_expire_time = options.longs === String ? String(message.operate_expire_time) : message.operate_expire_time;
                else
                    object.operate_expire_time = options.longs === String ? $util.Long.prototype.toString.call(message.operate_expire_time) : options.longs === Number ? new $util.LongBits(message.operate_expire_time.low >>> 0, message.operate_expire_time.high >>> 0).toNumber(true) : message.operate_expire_time;
            return object;
        };

        proto_get_page_graphics_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_page_graphics_rsp;
    })();

    proto_edu_v1_web.proto_get_page_graphics_info = (function() {

        function proto_get_page_graphics_info(properties) {
            this.graphic_list = [];
            this.del_graphic_id_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_page_graphics_info.prototype.page = 0;
        proto_get_page_graphics_info.prototype.ret_graphic_list_seq = 0;
        proto_get_page_graphics_info.prototype.svr_graphic_list_seq = 0;
        proto_get_page_graphics_info.prototype.graphic_list = $util.emptyArray;
        proto_get_page_graphics_info.prototype.del_graphic_id_list = $util.emptyArray;

        proto_get_page_graphics_info.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_page_graphics_info();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.page = reader.uint32();
                    break;
                case 2:
                    message.ret_graphic_list_seq = reader.uint32();
                    break;
                case 3:
                    message.svr_graphic_list_seq = reader.uint32();
                    break;
                case 4:
                    if (!(message.graphic_list && message.graphic_list.length))
                        message.graphic_list = [];
                    message.graphic_list.push($root.proto_edu_v1_web.proto_graphic.decode(reader, reader.uint32()));
                    break;
                case 5:
                    if (!(message.del_graphic_id_list && message.del_graphic_id_list.length))
                        message.del_graphic_id_list = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.del_graphic_id_list.push(reader.uint64());
                    } else
                        message.del_graphic_id_list.push(reader.uint64());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_page_graphics_info.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_page_graphics_info)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_page_graphics_info();
            if (object.page != null)
                message.page = object.page >>> 0;
            if (object.ret_graphic_list_seq != null)
                message.ret_graphic_list_seq = object.ret_graphic_list_seq >>> 0;
            if (object.svr_graphic_list_seq != null)
                message.svr_graphic_list_seq = object.svr_graphic_list_seq >>> 0;
            if (object.graphic_list) {
                if (!Array.isArray(object.graphic_list))
                    throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: array expected");
                message.graphic_list = [];
                for (let i = 0; i < object.graphic_list.length; ++i) {
                    if (typeof object.graphic_list[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: object expected");
                    message.graphic_list[i] = $root.proto_edu_v1_web.proto_graphic.fromObject(object.graphic_list[i]);
                }
            }
            if (object.del_graphic_id_list) {
                if (!Array.isArray(object.del_graphic_id_list))
                    throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.del_graphic_id_list: array expected");
                message.del_graphic_id_list = [];
                for (let i = 0; i < object.del_graphic_id_list.length; ++i)
                    if ($util.Long)
                        (message.del_graphic_id_list[i] = $util.Long.fromValue(object.del_graphic_id_list[i])).unsigned = true;
                    else if (typeof object.del_graphic_id_list[i] === "string")
                        message.del_graphic_id_list[i] = parseInt(object.del_graphic_id_list[i], 10);
                    else if (typeof object.del_graphic_id_list[i] === "number")
                        message.del_graphic_id_list[i] = object.del_graphic_id_list[i];
                    else if (typeof object.del_graphic_id_list[i] === "object")
                        message.del_graphic_id_list[i] = new $util.LongBits(object.del_graphic_id_list[i].low >>> 0, object.del_graphic_id_list[i].high >>> 0).toNumber(true);
            }
            return message;
        };

        proto_get_page_graphics_info.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.graphic_list = [];
                object.del_graphic_id_list = [];
            }
            if (options.defaults) {
                object.page = 0;
                object.ret_graphic_list_seq = 0;
                object.svr_graphic_list_seq = 0;
            }
            if (message.page != null && message.hasOwnProperty("page"))
                object.page = message.page;
            if (message.ret_graphic_list_seq != null && message.hasOwnProperty("ret_graphic_list_seq"))
                object.ret_graphic_list_seq = message.ret_graphic_list_seq;
            if (message.svr_graphic_list_seq != null && message.hasOwnProperty("svr_graphic_list_seq"))
                object.svr_graphic_list_seq = message.svr_graphic_list_seq;
            if (message.graphic_list && message.graphic_list.length) {
                object.graphic_list = [];
                for (let j = 0; j < message.graphic_list.length; ++j)
                    object.graphic_list[j] = $root.proto_edu_v1_web.proto_graphic.toObject(message.graphic_list[j], options);
            }
            if (message.del_graphic_id_list && message.del_graphic_id_list.length) {
                object.del_graphic_id_list = [];
                for (let j = 0; j < message.del_graphic_id_list.length; ++j)
                    if (typeof message.del_graphic_id_list[j] === "number")
                        object.del_graphic_id_list[j] = options.longs === String ? String(message.del_graphic_id_list[j]) : message.del_graphic_id_list[j];
                    else
                        object.del_graphic_id_list[j] = options.longs === String ? $util.Long.prototype.toString.call(message.del_graphic_id_list[j]) : options.longs === Number ? new $util.LongBits(message.del_graphic_id_list[j].low >>> 0, message.del_graphic_id_list[j].high >>> 0).toNumber(true) : message.del_graphic_id_list[j];
            }
            return object;
        };

        proto_get_page_graphics_info.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_page_graphics_info;
    })();

    proto_edu_v1_web.proto_get_user_auth_rsp = (function() {

        function proto_get_user_auth_rsp(properties) {
            this.module_auth = [];
            this.graphic_auth = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_user_auth_rsp.prototype.id_name = "";
        proto_get_user_auth_rsp.prototype.auth_seq = 0;
        proto_get_user_auth_rsp.prototype.module_auth = $util.emptyArray;
        proto_get_user_auth_rsp.prototype.graphic_auth = $util.emptyArray;

        proto_get_user_auth_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_user_auth_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id_name = reader.string();
                    break;
                case 2:
                    message.auth_seq = reader.uint32();
                    break;
                case 3:
                    if (!(message.module_auth && message.module_auth.length))
                        message.module_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.module_auth.push(reader.uint32());
                    } else
                        message.module_auth.push(reader.uint32());
                    break;
                case 4:
                    if (!(message.graphic_auth && message.graphic_auth.length))
                        message.graphic_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_auth.push(reader.uint32());
                    } else
                        message.graphic_auth.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_user_auth_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_user_auth_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_user_auth_rsp();
            if (object.id_name != null)
                message.id_name = String(object.id_name);
            if (object.auth_seq != null)
                message.auth_seq = object.auth_seq >>> 0;
            if (object.module_auth) {
                if (!Array.isArray(object.module_auth))
                    throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.module_auth: array expected");
                message.module_auth = [];
                for (let i = 0; i < object.module_auth.length; ++i)
                    message.module_auth[i] = object.module_auth[i] >>> 0;
            }
            if (object.graphic_auth) {
                if (!Array.isArray(object.graphic_auth))
                    throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.graphic_auth: array expected");
                message.graphic_auth = [];
                for (let i = 0; i < object.graphic_auth.length; ++i)
                    message.graphic_auth[i] = object.graphic_auth[i] >>> 0;
            }
            return message;
        };

        proto_get_user_auth_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.module_auth = [];
                object.graphic_auth = [];
            }
            if (options.defaults) {
                object.id_name = "";
                object.auth_seq = 0;
            }
            if (message.id_name != null && message.hasOwnProperty("id_name"))
                object.id_name = message.id_name;
            if (message.auth_seq != null && message.hasOwnProperty("auth_seq"))
                object.auth_seq = message.auth_seq;
            if (message.module_auth && message.module_auth.length) {
                object.module_auth = [];
                for (let j = 0; j < message.module_auth.length; ++j)
                    object.module_auth[j] = message.module_auth[j];
            }
            if (message.graphic_auth && message.graphic_auth.length) {
                object.graphic_auth = [];
                for (let j = 0; j < message.graphic_auth.length; ++j)
                    object.graphic_auth[j] = message.graphic_auth[j];
            }
            return object;
        };

        proto_get_user_auth_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_user_auth_rsp;
    })();

    proto_edu_v1_web.proto_get_room_auth_rsp = (function() {

        function proto_get_room_auth_rsp(properties) {
            this.module_auth = [];
            this.graphic_auth = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        proto_get_room_auth_rsp.prototype.auth_seq = 0;
        proto_get_room_auth_rsp.prototype.module_auth = $util.emptyArray;
        proto_get_room_auth_rsp.prototype.graphic_auth = $util.emptyArray;

        proto_get_room_auth_rsp.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.proto_get_room_auth_rsp();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.auth_seq = reader.uint32();
                    break;
                case 2:
                    if (!(message.module_auth && message.module_auth.length))
                        message.module_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.module_auth.push(reader.uint32());
                    } else
                        message.module_auth.push(reader.uint32());
                    break;
                case 3:
                    if (!(message.graphic_auth && message.graphic_auth.length))
                        message.graphic_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_auth.push(reader.uint32());
                    } else
                        message.graphic_auth.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        proto_get_room_auth_rsp.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.proto_get_room_auth_rsp)
                return object;
            let message = new $root.proto_edu_v1_web.proto_get_room_auth_rsp();
            if (object.auth_seq != null)
                message.auth_seq = object.auth_seq >>> 0;
            if (object.module_auth) {
                if (!Array.isArray(object.module_auth))
                    throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.module_auth: array expected");
                message.module_auth = [];
                for (let i = 0; i < object.module_auth.length; ++i)
                    message.module_auth[i] = object.module_auth[i] >>> 0;
            }
            if (object.graphic_auth) {
                if (!Array.isArray(object.graphic_auth))
                    throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.graphic_auth: array expected");
                message.graphic_auth = [];
                for (let i = 0; i < object.graphic_auth.length; ++i)
                    message.graphic_auth[i] = object.graphic_auth[i] >>> 0;
            }
            return message;
        };

        proto_get_room_auth_rsp.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.module_auth = [];
                object.graphic_auth = [];
            }
            if (options.defaults)
                object.auth_seq = 0;
            if (message.auth_seq != null && message.hasOwnProperty("auth_seq"))
                object.auth_seq = message.auth_seq;
            if (message.module_auth && message.module_auth.length) {
                object.module_auth = [];
                for (let j = 0; j < message.module_auth.length; ++j)
                    object.module_auth[j] = message.module_auth[j];
            }
            if (message.graphic_auth && message.graphic_auth.length) {
                object.graphic_auth = [];
                for (let j = 0; j < message.graphic_auth.length; ++j)
                    object.graphic_auth[j] = message.graphic_auth[j];
            }
            return object;
        };

        proto_get_room_auth_rsp.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return proto_get_room_auth_rsp;
    })();

    proto_edu_v1_web.push_set_mod = (function() {

        function push_set_mod(properties) {
            this.action_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_set_mod.prototype.room_id = "";
        push_set_mod.prototype.mod_list_seq = 0;
        push_set_mod.prototype.action_list = $util.emptyArray;

        push_set_mod.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_set_mod();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.room_id = reader.string();
                    break;
                case 2:
                    message.mod_list_seq = reader.uint32();
                    break;
                case 3:
                    if (!(message.action_list && message.action_list.length))
                        message.action_list = [];
                    message.action_list.push($root.proto_edu_v1_web.push_set_mod_action.decode(reader, reader.uint32()));
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_set_mod.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_set_mod)
                return object;
            let message = new $root.proto_edu_v1_web.push_set_mod();
            if (object.room_id != null)
                message.room_id = String(object.room_id);
            if (object.mod_list_seq != null)
                message.mod_list_seq = object.mod_list_seq >>> 0;
            if (object.action_list) {
                if (!Array.isArray(object.action_list))
                    throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: array expected");
                message.action_list = [];
                for (let i = 0; i < object.action_list.length; ++i) {
                    if (typeof object.action_list[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: object expected");
                    message.action_list[i] = $root.proto_edu_v1_web.push_set_mod_action.fromObject(object.action_list[i]);
                }
            }
            return message;
        };

        push_set_mod.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.action_list = [];
            if (options.defaults) {
                object.room_id = "";
                object.mod_list_seq = 0;
            }
            if (message.room_id != null && message.hasOwnProperty("room_id"))
                object.room_id = message.room_id;
            if (message.mod_list_seq != null && message.hasOwnProperty("mod_list_seq"))
                object.mod_list_seq = message.mod_list_seq;
            if (message.action_list && message.action_list.length) {
                object.action_list = [];
                for (let j = 0; j < message.action_list.length; ++j)
                    object.action_list[j] = $root.proto_edu_v1_web.push_set_mod_action.toObject(message.action_list[j], options);
            }
            return object;
        };

        push_set_mod.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_set_mod;
    })();

    proto_edu_v1_web.push_set_mod_action = (function() {

        function push_set_mod_action(properties) {
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_set_mod_action.prototype.action = 0;
        push_set_mod_action.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        push_set_mod_action.prototype.mod_type = 0;
        push_set_mod_action.prototype.mod_subtype = 0;
        push_set_mod_action.prototype.mod_seq = 0;
        push_set_mod_action.prototype.mod_title = "";
        push_set_mod_action.prototype.mod_pos = "";
        push_set_mod_action.prototype.mod_status = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        push_set_mod_action.prototype.mod_content = "";
        push_set_mod_action.prototype.mod_extra = "";
        push_set_mod_action.prototype.mod_reserve = 0;
        push_set_mod_action.prototype.mod_create_time = $util.Long ? $util.Long.fromBits(0,0,false) : 0;
        push_set_mod_action.prototype.is_modify_mod_title = false;
        push_set_mod_action.prototype.is_modify_mod_pos = false;
        push_set_mod_action.prototype.is_modify_mod_status = false;
        push_set_mod_action.prototype.is_modify_mod_content = false;
        push_set_mod_action.prototype.is_modify_mod_extra = false;
        push_set_mod_action.prototype.is_modify_mod_reserve = false;
        push_set_mod_action.prototype.mod_horizontal_percent = 0;
        push_set_mod_action.prototype.mod_vertical_percent = 0;
        push_set_mod_action.prototype.is_modify_mod_horizontal_percent = false;
        push_set_mod_action.prototype.is_modify_mod_vertical_percent = false;
        push_set_mod_action.prototype.is_modify_mod_scale = false;
        push_set_mod_action.prototype.mod_scale = "";

        push_set_mod_action.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_set_mod_action();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.action = reader.uint32();
                    break;
                case 2:
                    message.mod_id = reader.uint64();
                    break;
                case 3:
                    message.mod_type = reader.uint32();
                    break;
                case 4:
                    message.mod_subtype = reader.uint32();
                    break;
                case 5:
                    message.mod_seq = reader.uint32();
                    break;
                case 6:
                    message.mod_title = reader.string();
                    break;
                case 7:
                    message.mod_pos = reader.string();
                    break;
                case 8:
                    message.mod_status = reader.uint64();
                    break;
                case 9:
                    message.mod_content = reader.string();
                    break;
                case 10:
                    message.mod_extra = reader.string();
                    break;
                case 11:
                    message.mod_reserve = reader.uint32();
                    break;
                case 12:
                    message.mod_create_time = reader.int64();
                    break;
                case 13:
                    message.is_modify_mod_title = reader.bool();
                    break;
                case 14:
                    message.is_modify_mod_pos = reader.bool();
                    break;
                case 15:
                    message.is_modify_mod_status = reader.bool();
                    break;
                case 16:
                    message.is_modify_mod_content = reader.bool();
                    break;
                case 17:
                    message.is_modify_mod_extra = reader.bool();
                    break;
                case 18:
                    message.is_modify_mod_reserve = reader.bool();
                    break;
                case 19:
                    message.mod_horizontal_percent = reader.float();
                    break;
                case 20:
                    message.mod_vertical_percent = reader.float();
                    break;
                case 21:
                    message.is_modify_mod_horizontal_percent = reader.bool();
                    break;
                case 22:
                    message.is_modify_mod_vertical_percent = reader.bool();
                    break;
                case 23:
                    message.is_modify_mod_scale = reader.bool();
                    break;
                case 24:
                    message.mod_scale = reader.string();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_set_mod_action.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_set_mod_action)
                return object;
            let message = new $root.proto_edu_v1_web.push_set_mod_action();
            if (object.action != null)
                message.action = object.action >>> 0;
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.mod_type != null)
                message.mod_type = object.mod_type >>> 0;
            if (object.mod_subtype != null)
                message.mod_subtype = object.mod_subtype >>> 0;
            if (object.mod_seq != null)
                message.mod_seq = object.mod_seq >>> 0;
            if (object.mod_title != null)
                message.mod_title = String(object.mod_title);
            if (object.mod_pos != null)
                message.mod_pos = String(object.mod_pos);
            if (object.mod_status != null)
                if ($util.Long)
                    (message.mod_status = $util.Long.fromValue(object.mod_status)).unsigned = true;
                else if (typeof object.mod_status === "string")
                    message.mod_status = parseInt(object.mod_status, 10);
                else if (typeof object.mod_status === "number")
                    message.mod_status = object.mod_status;
                else if (typeof object.mod_status === "object")
                    message.mod_status = new $util.LongBits(object.mod_status.low >>> 0, object.mod_status.high >>> 0).toNumber(true);
            if (object.mod_content != null)
                message.mod_content = String(object.mod_content);
            if (object.mod_extra != null)
                message.mod_extra = String(object.mod_extra);
            if (object.mod_reserve != null)
                message.mod_reserve = object.mod_reserve >>> 0;
            if (object.mod_create_time != null)
                if ($util.Long)
                    (message.mod_create_time = $util.Long.fromValue(object.mod_create_time)).unsigned = false;
                else if (typeof object.mod_create_time === "string")
                    message.mod_create_time = parseInt(object.mod_create_time, 10);
                else if (typeof object.mod_create_time === "number")
                    message.mod_create_time = object.mod_create_time;
                else if (typeof object.mod_create_time === "object")
                    message.mod_create_time = new $util.LongBits(object.mod_create_time.low >>> 0, object.mod_create_time.high >>> 0).toNumber();
            if (object.is_modify_mod_title != null)
                message.is_modify_mod_title = Boolean(object.is_modify_mod_title);
            if (object.is_modify_mod_pos != null)
                message.is_modify_mod_pos = Boolean(object.is_modify_mod_pos);
            if (object.is_modify_mod_status != null)
                message.is_modify_mod_status = Boolean(object.is_modify_mod_status);
            if (object.is_modify_mod_content != null)
                message.is_modify_mod_content = Boolean(object.is_modify_mod_content);
            if (object.is_modify_mod_extra != null)
                message.is_modify_mod_extra = Boolean(object.is_modify_mod_extra);
            if (object.is_modify_mod_reserve != null)
                message.is_modify_mod_reserve = Boolean(object.is_modify_mod_reserve);
            if (object.mod_horizontal_percent != null)
                message.mod_horizontal_percent = Number(object.mod_horizontal_percent);
            if (object.mod_vertical_percent != null)
                message.mod_vertical_percent = Number(object.mod_vertical_percent);
            if (object.is_modify_mod_horizontal_percent != null)
                message.is_modify_mod_horizontal_percent = Boolean(object.is_modify_mod_horizontal_percent);
            if (object.is_modify_mod_vertical_percent != null)
                message.is_modify_mod_vertical_percent = Boolean(object.is_modify_mod_vertical_percent);
            if (object.is_modify_mod_scale != null)
                message.is_modify_mod_scale = Boolean(object.is_modify_mod_scale);
            if (object.mod_scale != null)
                message.mod_scale = String(object.mod_scale);
            return message;
        };

        push_set_mod_action.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.defaults) {
                object.action = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.mod_type = 0;
                object.mod_subtype = 0;
                object.mod_seq = 0;
                object.mod_title = "";
                object.mod_pos = "";
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_status = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_status = options.longs === String ? "0" : 0;
                object.mod_content = "";
                object.mod_extra = "";
                object.mod_reserve = 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, false);
                    object.mod_create_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_create_time = options.longs === String ? "0" : 0;
                object.is_modify_mod_title = false;
                object.is_modify_mod_pos = false;
                object.is_modify_mod_status = false;
                object.is_modify_mod_content = false;
                object.is_modify_mod_extra = false;
                object.is_modify_mod_reserve = false;
                object.mod_horizontal_percent = 0;
                object.mod_vertical_percent = 0;
                object.is_modify_mod_horizontal_percent = false;
                object.is_modify_mod_vertical_percent = false;
                object.is_modify_mod_scale = false;
                object.mod_scale = "";
            }
            if (message.action != null && message.hasOwnProperty("action"))
                object.action = message.action;
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.mod_type != null && message.hasOwnProperty("mod_type"))
                object.mod_type = message.mod_type;
            if (message.mod_subtype != null && message.hasOwnProperty("mod_subtype"))
                object.mod_subtype = message.mod_subtype;
            if (message.mod_seq != null && message.hasOwnProperty("mod_seq"))
                object.mod_seq = message.mod_seq;
            if (message.mod_title != null && message.hasOwnProperty("mod_title"))
                object.mod_title = message.mod_title;
            if (message.mod_pos != null && message.hasOwnProperty("mod_pos"))
                object.mod_pos = message.mod_pos;
            if (message.mod_status != null && message.hasOwnProperty("mod_status"))
                if (typeof message.mod_status === "number")
                    object.mod_status = options.longs === String ? String(message.mod_status) : message.mod_status;
                else
                    object.mod_status = options.longs === String ? $util.Long.prototype.toString.call(message.mod_status) : options.longs === Number ? new $util.LongBits(message.mod_status.low >>> 0, message.mod_status.high >>> 0).toNumber(true) : message.mod_status;
            if (message.mod_content != null && message.hasOwnProperty("mod_content"))
                object.mod_content = message.mod_content;
            if (message.mod_extra != null && message.hasOwnProperty("mod_extra"))
                object.mod_extra = message.mod_extra;
            if (message.mod_reserve != null && message.hasOwnProperty("mod_reserve"))
                object.mod_reserve = message.mod_reserve;
            if (message.mod_create_time != null && message.hasOwnProperty("mod_create_time"))
                if (typeof message.mod_create_time === "number")
                    object.mod_create_time = options.longs === String ? String(message.mod_create_time) : message.mod_create_time;
                else
                    object.mod_create_time = options.longs === String ? $util.Long.prototype.toString.call(message.mod_create_time) : options.longs === Number ? new $util.LongBits(message.mod_create_time.low >>> 0, message.mod_create_time.high >>> 0).toNumber() : message.mod_create_time;
            if (message.is_modify_mod_title != null && message.hasOwnProperty("is_modify_mod_title"))
                object.is_modify_mod_title = message.is_modify_mod_title;
            if (message.is_modify_mod_pos != null && message.hasOwnProperty("is_modify_mod_pos"))
                object.is_modify_mod_pos = message.is_modify_mod_pos;
            if (message.is_modify_mod_status != null && message.hasOwnProperty("is_modify_mod_status"))
                object.is_modify_mod_status = message.is_modify_mod_status;
            if (message.is_modify_mod_content != null && message.hasOwnProperty("is_modify_mod_content"))
                object.is_modify_mod_content = message.is_modify_mod_content;
            if (message.is_modify_mod_extra != null && message.hasOwnProperty("is_modify_mod_extra"))
                object.is_modify_mod_extra = message.is_modify_mod_extra;
            if (message.is_modify_mod_reserve != null && message.hasOwnProperty("is_modify_mod_reserve"))
                object.is_modify_mod_reserve = message.is_modify_mod_reserve;
            if (message.mod_horizontal_percent != null && message.hasOwnProperty("mod_horizontal_percent"))
                object.mod_horizontal_percent = options.json && !isFinite(message.mod_horizontal_percent) ? String(message.mod_horizontal_percent) : message.mod_horizontal_percent;
            if (message.mod_vertical_percent != null && message.hasOwnProperty("mod_vertical_percent"))
                object.mod_vertical_percent = options.json && !isFinite(message.mod_vertical_percent) ? String(message.mod_vertical_percent) : message.mod_vertical_percent;
            if (message.is_modify_mod_horizontal_percent != null && message.hasOwnProperty("is_modify_mod_horizontal_percent"))
                object.is_modify_mod_horizontal_percent = message.is_modify_mod_horizontal_percent;
            if (message.is_modify_mod_vertical_percent != null && message.hasOwnProperty("is_modify_mod_vertical_percent"))
                object.is_modify_mod_vertical_percent = message.is_modify_mod_vertical_percent;
            if (message.is_modify_mod_scale != null && message.hasOwnProperty("is_modify_mod_scale"))
                object.is_modify_mod_scale = message.is_modify_mod_scale;
            if (message.mod_scale != null && message.hasOwnProperty("mod_scale"))
                object.mod_scale = message.mod_scale;
            return object;
        };

        push_set_mod_action.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_set_mod_action;
    })();

    proto_edu_v1_web.push_draw_page_graphics = (function() {

        function push_draw_page_graphics(properties) {
            this.page_graphics = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_draw_page_graphics.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        push_draw_page_graphics.prototype.page_graphics = $util.emptyArray;
        push_draw_page_graphics.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;

        push_draw_page_graphics.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_draw_page_graphics();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    if (!(message.page_graphics && message.page_graphics.length))
                        message.page_graphics = [];
                    message.page_graphics.push($root.proto_edu_v1_web.push_draw_graphics_info.decode(reader, reader.uint32()));
                    break;
                case 3:
                    message.timestamp = reader.uint64();
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_draw_page_graphics.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_draw_page_graphics)
                return object;
            let message = new $root.proto_edu_v1_web.push_draw_page_graphics();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.page_graphics) {
                if (!Array.isArray(object.page_graphics))
                    throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: array expected");
                message.page_graphics = [];
                for (let i = 0; i < object.page_graphics.length; ++i) {
                    if (typeof object.page_graphics[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: object expected");
                    message.page_graphics[i] = $root.proto_edu_v1_web.push_draw_graphics_info.fromObject(object.page_graphics[i]);
                }
            }
            if (object.timestamp != null)
                if ($util.Long)
                    (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
                else if (typeof object.timestamp === "string")
                    message.timestamp = parseInt(object.timestamp, 10);
                else if (typeof object.timestamp === "number")
                    message.timestamp = object.timestamp;
                else if (typeof object.timestamp === "object")
                    message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
            return message;
        };

        push_draw_page_graphics.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.page_graphics = [];
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.timestamp = options.longs === String ? "0" : 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.page_graphics && message.page_graphics.length) {
                object.page_graphics = [];
                for (let j = 0; j < message.page_graphics.length; ++j)
                    object.page_graphics[j] = $root.proto_edu_v1_web.push_draw_graphics_info.toObject(message.page_graphics[j], options);
            }
            if (message.timestamp != null && message.hasOwnProperty("timestamp"))
                if (typeof message.timestamp === "number")
                    object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
                else
                    object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
            return object;
        };

        push_draw_page_graphics.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_draw_page_graphics;
    })();

    proto_edu_v1_web.push_draw_graphics_info = (function() {

        function push_draw_graphics_info(properties) {
            this.graphic_list = [];
            this.del_graphic_id_list = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_draw_graphics_info.prototype.page = 0;
        push_draw_graphics_info.prototype.action_seq = 0;
        push_draw_graphics_info.prototype.graphic_list = $util.emptyArray;
        push_draw_graphics_info.prototype.del_graphic_id_list = $util.emptyArray;

        push_draw_graphics_info.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_draw_graphics_info();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.page = reader.uint32();
                    break;
                case 2:
                    message.action_seq = reader.uint32();
                    break;
                case 3:
                    if (!(message.graphic_list && message.graphic_list.length))
                        message.graphic_list = [];
                    message.graphic_list.push($root.proto_edu_v1_web.proto_graphic.decode(reader, reader.uint32()));
                    break;
                case 4:
                    if (!(message.del_graphic_id_list && message.del_graphic_id_list.length))
                        message.del_graphic_id_list = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.del_graphic_id_list.push(reader.uint64());
                    } else
                        message.del_graphic_id_list.push(reader.uint64());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_draw_graphics_info.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_draw_graphics_info)
                return object;
            let message = new $root.proto_edu_v1_web.push_draw_graphics_info();
            if (object.page != null)
                message.page = object.page >>> 0;
            if (object.action_seq != null)
                message.action_seq = object.action_seq >>> 0;
            if (object.graphic_list) {
                if (!Array.isArray(object.graphic_list))
                    throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: array expected");
                message.graphic_list = [];
                for (let i = 0; i < object.graphic_list.length; ++i) {
                    if (typeof object.graphic_list[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: object expected");
                    message.graphic_list[i] = $root.proto_edu_v1_web.proto_graphic.fromObject(object.graphic_list[i]);
                }
            }
            if (object.del_graphic_id_list) {
                if (!Array.isArray(object.del_graphic_id_list))
                    throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.del_graphic_id_list: array expected");
                message.del_graphic_id_list = [];
                for (let i = 0; i < object.del_graphic_id_list.length; ++i)
                    if ($util.Long)
                        (message.del_graphic_id_list[i] = $util.Long.fromValue(object.del_graphic_id_list[i])).unsigned = true;
                    else if (typeof object.del_graphic_id_list[i] === "string")
                        message.del_graphic_id_list[i] = parseInt(object.del_graphic_id_list[i], 10);
                    else if (typeof object.del_graphic_id_list[i] === "number")
                        message.del_graphic_id_list[i] = object.del_graphic_id_list[i];
                    else if (typeof object.del_graphic_id_list[i] === "object")
                        message.del_graphic_id_list[i] = new $util.LongBits(object.del_graphic_id_list[i].low >>> 0, object.del_graphic_id_list[i].high >>> 0).toNumber(true);
            }
            return message;
        };

        push_draw_graphics_info.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.graphic_list = [];
                object.del_graphic_id_list = [];
            }
            if (options.defaults) {
                object.page = 0;
                object.action_seq = 0;
            }
            if (message.page != null && message.hasOwnProperty("page"))
                object.page = message.page;
            if (message.action_seq != null && message.hasOwnProperty("action_seq"))
                object.action_seq = message.action_seq;
            if (message.graphic_list && message.graphic_list.length) {
                object.graphic_list = [];
                for (let j = 0; j < message.graphic_list.length; ++j)
                    object.graphic_list[j] = $root.proto_edu_v1_web.proto_graphic.toObject(message.graphic_list[j], options);
            }
            if (message.del_graphic_id_list && message.del_graphic_id_list.length) {
                object.del_graphic_id_list = [];
                for (let j = 0; j < message.del_graphic_id_list.length; ++j)
                    if (typeof message.del_graphic_id_list[j] === "number")
                        object.del_graphic_id_list[j] = options.longs === String ? String(message.del_graphic_id_list[j]) : message.del_graphic_id_list[j];
                    else
                        object.del_graphic_id_list[j] = options.longs === String ? $util.Long.prototype.toString.call(message.del_graphic_id_list[j]) : options.longs === Number ? new $util.LongBits(message.del_graphic_id_list[j].low >>> 0, message.del_graphic_id_list[j].high >>> 0).toNumber(true) : message.del_graphic_id_list[j];
            }
            return object;
        };

        push_draw_graphics_info.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_draw_graphics_info;
    })();

    proto_edu_v1_web.push_clear_page_graphics = (function() {

        function push_clear_page_graphics(properties) {
            this.pages = [];
            this.action_seqs = [];
            this.layers = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_clear_page_graphics.prototype.mod_id = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        push_clear_page_graphics.prototype.pages = $util.emptyArray;
        push_clear_page_graphics.prototype.action_seqs = $util.emptyArray;
        push_clear_page_graphics.prototype.id_name = "";
        push_clear_page_graphics.prototype.nick_name = "";
        push_clear_page_graphics.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;
        push_clear_page_graphics.prototype.layers = $util.emptyArray;

        push_clear_page_graphics.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_clear_page_graphics();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.mod_id = reader.uint64();
                    break;
                case 2:
                    if (!(message.pages && message.pages.length))
                        message.pages = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.pages.push(reader.uint32());
                    } else
                        message.pages.push(reader.uint32());
                    break;
                case 3:
                    if (!(message.action_seqs && message.action_seqs.length))
                        message.action_seqs = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.action_seqs.push(reader.uint32());
                    } else
                        message.action_seqs.push(reader.uint32());
                    break;
                case 4:
                    message.id_name = reader.string();
                    break;
                case 5:
                    message.nick_name = reader.string();
                    break;
                case 6:
                    message.timestamp = reader.uint64();
                    break;
                case 7:
                    if (!(message.layers && message.layers.length))
                        message.layers = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.layers.push(reader.uint32());
                    } else
                        message.layers.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_clear_page_graphics.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_clear_page_graphics)
                return object;
            let message = new $root.proto_edu_v1_web.push_clear_page_graphics();
            if (object.mod_id != null)
                if ($util.Long)
                    (message.mod_id = $util.Long.fromValue(object.mod_id)).unsigned = true;
                else if (typeof object.mod_id === "string")
                    message.mod_id = parseInt(object.mod_id, 10);
                else if (typeof object.mod_id === "number")
                    message.mod_id = object.mod_id;
                else if (typeof object.mod_id === "object")
                    message.mod_id = new $util.LongBits(object.mod_id.low >>> 0, object.mod_id.high >>> 0).toNumber(true);
            if (object.pages) {
                if (!Array.isArray(object.pages))
                    throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.pages: array expected");
                message.pages = [];
                for (let i = 0; i < object.pages.length; ++i)
                    message.pages[i] = object.pages[i] >>> 0;
            }
            if (object.action_seqs) {
                if (!Array.isArray(object.action_seqs))
                    throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.action_seqs: array expected");
                message.action_seqs = [];
                for (let i = 0; i < object.action_seqs.length; ++i)
                    message.action_seqs[i] = object.action_seqs[i] >>> 0;
            }
            if (object.id_name != null)
                message.id_name = String(object.id_name);
            if (object.nick_name != null)
                message.nick_name = String(object.nick_name);
            if (object.timestamp != null)
                if ($util.Long)
                    (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
                else if (typeof object.timestamp === "string")
                    message.timestamp = parseInt(object.timestamp, 10);
                else if (typeof object.timestamp === "number")
                    message.timestamp = object.timestamp;
                else if (typeof object.timestamp === "object")
                    message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
            if (object.layers) {
                if (!Array.isArray(object.layers))
                    throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.layers: array expected");
                message.layers = [];
                for (let i = 0; i < object.layers.length; ++i)
                    message.layers[i] = object.layers[i] >>> 0;
            }
            return message;
        };

        push_clear_page_graphics.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.pages = [];
                object.action_seqs = [];
                object.layers = [];
            }
            if (options.defaults) {
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.mod_id = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.mod_id = options.longs === String ? "0" : 0;
                object.id_name = "";
                object.nick_name = "";
                if ($util.Long) {
                    let long = new $util.Long(0, 0, true);
                    object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
                } else
                    object.timestamp = options.longs === String ? "0" : 0;
            }
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                if (typeof message.mod_id === "number")
                    object.mod_id = options.longs === String ? String(message.mod_id) : message.mod_id;
                else
                    object.mod_id = options.longs === String ? $util.Long.prototype.toString.call(message.mod_id) : options.longs === Number ? new $util.LongBits(message.mod_id.low >>> 0, message.mod_id.high >>> 0).toNumber(true) : message.mod_id;
            if (message.pages && message.pages.length) {
                object.pages = [];
                for (let j = 0; j < message.pages.length; ++j)
                    object.pages[j] = message.pages[j];
            }
            if (message.action_seqs && message.action_seqs.length) {
                object.action_seqs = [];
                for (let j = 0; j < message.action_seqs.length; ++j)
                    object.action_seqs[j] = message.action_seqs[j];
            }
            if (message.id_name != null && message.hasOwnProperty("id_name"))
                object.id_name = message.id_name;
            if (message.nick_name != null && message.hasOwnProperty("nick_name"))
                object.nick_name = message.nick_name;
            if (message.timestamp != null && message.hasOwnProperty("timestamp"))
                if (typeof message.timestamp === "number")
                    object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
                else
                    object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
            if (message.layers && message.layers.length) {
                object.layers = [];
                for (let j = 0; j < message.layers.length; ++j)
                    object.layers[j] = message.layers[j];
            }
            return object;
        };

        push_clear_page_graphics.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_clear_page_graphics;
    })();

    proto_edu_v1_web.push_user_auth = (function() {

        function push_user_auth(properties) {
            this.user_auth = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_user_auth.prototype.user_auth = $util.emptyArray;

        push_user_auth.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_user_auth();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    if (!(message.user_auth && message.user_auth.length))
                        message.user_auth = [];
                    message.user_auth.push($root.proto_edu_v1_web.push_user_auth_data.decode(reader, reader.uint32()));
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_user_auth.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_user_auth)
                return object;
            let message = new $root.proto_edu_v1_web.push_user_auth();
            if (object.user_auth) {
                if (!Array.isArray(object.user_auth))
                    throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: array expected");
                message.user_auth = [];
                for (let i = 0; i < object.user_auth.length; ++i) {
                    if (typeof object.user_auth[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: object expected");
                    message.user_auth[i] = $root.proto_edu_v1_web.push_user_auth_data.fromObject(object.user_auth[i]);
                }
            }
            return message;
        };

        push_user_auth.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.user_auth = [];
            if (message.user_auth && message.user_auth.length) {
                object.user_auth = [];
                for (let j = 0; j < message.user_auth.length; ++j)
                    object.user_auth[j] = $root.proto_edu_v1_web.push_user_auth_data.toObject(message.user_auth[j], options);
            }
            return object;
        };

        push_user_auth.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_user_auth;
    })();

    proto_edu_v1_web.push_user_auth_data = (function() {

        function push_user_auth_data(properties) {
            this.module_auth = [];
            this.graphic_auth = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_user_auth_data.prototype.id_name = "";
        push_user_auth_data.prototype.auth_seq = 0;
        push_user_auth_data.prototype.module_auth = $util.emptyArray;
        push_user_auth_data.prototype.graphic_auth = $util.emptyArray;

        push_user_auth_data.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_user_auth_data();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id_name = reader.string();
                    break;
                case 2:
                    message.auth_seq = reader.uint32();
                    break;
                case 3:
                    if (!(message.module_auth && message.module_auth.length))
                        message.module_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.module_auth.push(reader.uint32());
                    } else
                        message.module_auth.push(reader.uint32());
                    break;
                case 4:
                    if (!(message.graphic_auth && message.graphic_auth.length))
                        message.graphic_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_auth.push(reader.uint32());
                    } else
                        message.graphic_auth.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_user_auth_data.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_user_auth_data)
                return object;
            let message = new $root.proto_edu_v1_web.push_user_auth_data();
            if (object.id_name != null)
                message.id_name = String(object.id_name);
            if (object.auth_seq != null)
                message.auth_seq = object.auth_seq >>> 0;
            if (object.module_auth) {
                if (!Array.isArray(object.module_auth))
                    throw TypeError(".proto_edu_v1_web.push_user_auth_data.module_auth: array expected");
                message.module_auth = [];
                for (let i = 0; i < object.module_auth.length; ++i)
                    message.module_auth[i] = object.module_auth[i] >>> 0;
            }
            if (object.graphic_auth) {
                if (!Array.isArray(object.graphic_auth))
                    throw TypeError(".proto_edu_v1_web.push_user_auth_data.graphic_auth: array expected");
                message.graphic_auth = [];
                for (let i = 0; i < object.graphic_auth.length; ++i)
                    message.graphic_auth[i] = object.graphic_auth[i] >>> 0;
            }
            return message;
        };

        push_user_auth_data.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.module_auth = [];
                object.graphic_auth = [];
            }
            if (options.defaults) {
                object.id_name = "";
                object.auth_seq = 0;
            }
            if (message.id_name != null && message.hasOwnProperty("id_name"))
                object.id_name = message.id_name;
            if (message.auth_seq != null && message.hasOwnProperty("auth_seq"))
                object.auth_seq = message.auth_seq;
            if (message.module_auth && message.module_auth.length) {
                object.module_auth = [];
                for (let j = 0; j < message.module_auth.length; ++j)
                    object.module_auth[j] = message.module_auth[j];
            }
            if (message.graphic_auth && message.graphic_auth.length) {
                object.graphic_auth = [];
                for (let j = 0; j < message.graphic_auth.length; ++j)
                    object.graphic_auth[j] = message.graphic_auth[j];
            }
            return object;
        };

        push_user_auth_data.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_user_auth_data;
    })();

    proto_edu_v1_web.push_room_auth = (function() {

        function push_room_auth(properties) {
            this.module_auth = [];
            this.graphic_auth = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_room_auth.prototype.auth_seq = 0;
        push_room_auth.prototype.module_auth = $util.emptyArray;
        push_room_auth.prototype.graphic_auth = $util.emptyArray;

        push_room_auth.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_room_auth();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.auth_seq = reader.uint32();
                    break;
                case 2:
                    if (!(message.module_auth && message.module_auth.length))
                        message.module_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.module_auth.push(reader.uint32());
                    } else
                        message.module_auth.push(reader.uint32());
                    break;
                case 3:
                    if (!(message.graphic_auth && message.graphic_auth.length))
                        message.graphic_auth = [];
                    if ((tag & 7) === 2) {
                        let end2 = reader.uint32() + reader.pos;
                        while (reader.pos < end2)
                            message.graphic_auth.push(reader.uint32());
                    } else
                        message.graphic_auth.push(reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        push_room_auth.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_room_auth)
                return object;
            let message = new $root.proto_edu_v1_web.push_room_auth();
            if (object.auth_seq != null)
                message.auth_seq = object.auth_seq >>> 0;
            if (object.module_auth) {
                if (!Array.isArray(object.module_auth))
                    throw TypeError(".proto_edu_v1_web.push_room_auth.module_auth: array expected");
                message.module_auth = [];
                for (let i = 0; i < object.module_auth.length; ++i)
                    message.module_auth[i] = object.module_auth[i] >>> 0;
            }
            if (object.graphic_auth) {
                if (!Array.isArray(object.graphic_auth))
                    throw TypeError(".proto_edu_v1_web.push_room_auth.graphic_auth: array expected");
                message.graphic_auth = [];
                for (let i = 0; i < object.graphic_auth.length; ++i)
                    message.graphic_auth[i] = object.graphic_auth[i] >>> 0;
            }
            return message;
        };

        push_room_auth.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults) {
                object.module_auth = [];
                object.graphic_auth = [];
            }
            if (options.defaults)
                object.auth_seq = 0;
            if (message.auth_seq != null && message.hasOwnProperty("auth_seq"))
                object.auth_seq = message.auth_seq;
            if (message.module_auth && message.module_auth.length) {
                object.module_auth = [];
                for (let j = 0; j < message.module_auth.length; ++j)
                    object.module_auth[j] = message.module_auth[j];
            }
            if (message.graphic_auth && message.graphic_auth.length) {
                object.graphic_auth = [];
                for (let j = 0; j < message.graphic_auth.length; ++j)
                    object.graphic_auth[j] = message.graphic_auth[j];
            }
            return object;
        };

        push_room_auth.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_room_auth;
    })();

    proto_edu_v1_web.mod = (function() {

        function mod(properties) {
            this.graphic_ids = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        mod.prototype.mod_id = 0;
        mod.prototype.graphic_ids = $util.emptyArray;

        mod.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.mod();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                    case 1:
                        message.mod_id = reader.uint32();
                        break;
                    case 2:
                        if (!(message.graphic_ids && message.graphic_ids.length))
                            message.graphic_ids = [];
                        if ((tag & 7) === 2) {
                            let end2 = reader.uint32() + reader.pos;
                            while (reader.pos < end2)
                                message.graphic_ids.push(reader.uint32());
                        } else
                            message.graphic_ids.push(reader.uint32());
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                }
            }
            return message;
        };

        mod.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.mod)
                return object;
            let message = new $root.proto_edu_v1_web.mod();
            if (object.mod_id != null)
                message.mod_id = object.mod_id >>> 0;
            if (object.graphic_ids) {
                if (!Array.isArray(object.graphic_ids))
                    throw TypeError(".proto_edu_v1_web.mod.graphic_ids: array expected");
                message.graphic_ids = [];
                for (let i = 0; i < object.graphic_ids.length; ++i)
                    message.graphic_ids[i] = object.graphic_ids[i] >>> 0;
            }
            return message;
        };

        mod.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.graphic_ids = [];
            if (options.defaults)
                object.mod_id = 0;
            if (message.mod_id != null && message.hasOwnProperty("mod_id"))
                object.mod_id = message.mod_id;
            if (message.graphic_ids && message.graphic_ids.length) {
                object.graphic_ids = [];
                for (let j = 0; j < message.graphic_ids.length; ++j)
                    object.graphic_ids[j] = message.graphic_ids[j];
            }
            return object;
        };

        mod.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return mod;
    })();

    proto_edu_v1_web.push_clear_user_graphic_list = (function() {

        function push_clear_user_graphic_list(properties) {
            this.mods = [];
            if (properties)
                for (let keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        push_clear_user_graphic_list.prototype.id_name = "";
        push_clear_user_graphic_list.prototype.mods = $util.emptyArray;

        push_clear_user_graphic_list.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            let end = length === undefined ? reader.len : reader.pos + length, message = new $root.proto_edu_v1_web.push_clear_user_graphic_list();
            while (reader.pos < end) {
                let tag = reader.uint32();
                switch (tag >>> 3) {
                    case 1:
                        message.id_name = reader.string();
                        break;
                    case 2:
                        if (!(message.mods && message.mods.length))
                            message.mods = [];
                        message.mods.push($root.proto_edu_v1_web.mod.decode(reader, reader.uint32()));
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                }
            }
            return message;
        };

        push_clear_user_graphic_list.fromObject = function fromObject(object) {
            if (object instanceof $root.proto_edu_v1_web.push_clear_user_graphic_list)
                return object;
            let message = new $root.proto_edu_v1_web.push_clear_user_graphic_list();
            if (object.id_name != null)
                message.id_name = String(object.id_name);
            if (object.mods) {
                if (!Array.isArray(object.mods))
                    throw TypeError(".proto_edu_v1_web.push_clear_user_graphic_list.mods: array expected");
                message.mods = [];
                for (let i = 0; i < object.mods.length; ++i) {
                    if (typeof object.mods[i] !== "object")
                        throw TypeError(".proto_edu_v1_web.push_clear_user_graphic_list.mods: object expected");
                    message.mods[i] = $root.proto_edu_v1_web.mod.fromObject(object.mods[i]);
                }
            }
            return message;
        };

        push_clear_user_graphic_list.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            let object = {};
            if (options.arrays || options.defaults)
                object.mods = [];
            if (options.defaults)
                object.id_name = "";
            if (message.id_name != null && message.hasOwnProperty("id_name"))
                object.id_name = message.id_name;
            if (message.mods && message.mods.length) {
                object.mods = [];
                for (let j = 0; j < message.mods.length; ++j)
                    object.mods[j] = $root.proto_edu_v1_web.mod.toObject(message.mods[j], options);
            }
            return object;
        };

        push_clear_user_graphic_list.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, protobufjs_minimal__WEBPACK_IMPORTED_MODULE_0__["util"].toJSONOptions);
        };

        return push_clear_user_graphic_list;
    })();

    return proto_edu_v1_web;
})();




/***/ }),

/***/ "./sdk/whiteboard/services/socket.ts":
/*!*******************************************!*\
  !*** ./sdk/whiteboard/services/socket.ts ***!
  \*******************************************/
/*! exports provided: Socket */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Socket", function() { return Socket; });
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _pbjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pbjs */ "./sdk/whiteboard/services/pbjs.ts");
/* harmony import */ var _cmd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cmd */ "./sdk/whiteboard/services/cmd.ts");
/* harmony import */ var _view_services_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
/* harmony import */ var _view_entities_view__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../view/entities/view */ "./sdk/whiteboard/view/entities/view.ts");








 // import { getLogAction, Logger } from '../../docsview/view/Logger';




var Socket =
/** @class */
function () {
  function Socket(zegoWebEngin) {
    this.roomState = 'DISCONNECTED';
    this.pbReqCallbackMap = {};
    this.isRegistedEvent = false;
    this.timeoutNum = 12000;
    this.isSendPB = false;
    this.timerMap = {};
    this.zegoWebEngin = zegoWebEngin;
    this.zegoWebRTC = this.getRTC();
    this.webrtcVersion = zegoWebEngin.getVersion();
    console.error('webrtcVersion', this.webrtcVersion); // 暂时判断不支持统一接入白板 + 支持统一接入 RTC 处理

    if ("2.2.3" <= '2.3.0' && !(this.webrtcVersion < '2.15.0')) {
      this.zegoWebRTC.setAccess(false);
    }

    this.init();
  }

  Socket.prototype.getRTC = function () {
    if (this.zegoWebEngin.getVersion() < '2.0') {
      if (this.zegoWebEngin.zegoWebRTC) {
        return this.zegoWebEngin.zegoWebRTC;
      } else {
        return this.zegoWebEngin.RTC;
      }
    } else {
      if (this.zegoWebEngin.zegoWebRTM) {
        return this.zegoWebEngin.zegoWebRTM;
      } else {
        return this.zegoWebEngin.RTM;
      }
    }
  };

  Socket.prototype.init = function () {
    // 关闭 alert 调试
    this.zegoWebRTC.setDebugVerbose && this.zegoWebRTC.setDebugVerbose(false); // 是否支持 PB 请求

    this.isSendPB = !!this.zegoWebRTC.sendPB && !!this.zegoWebRTC.setProtoFormat;

    if (this.isSendPB) {
      this.eduProtobuf = new _pbjs__WEBPACK_IMPORTED_MODULE_6__["EduProtobuf"](); // 登录前需要设置 白板请求协议类型

      this.zegoWebRTC.setProtoFormat('pb');
    } // 登录前需要设置 白板 edu 集群


    this.zegoWebRTC.setSdkLoginRelateService && this.zegoWebRTC.setSdkLoginRelateService(['edusvr']); // 注册房间状态变更回调

    this.bindRoomStateUpdate();
  };

  Socket.prototype.bindRoomStateUpdate = function () {
    var _this = this;

    var onRoomStateUpdate = function onRoomStateUpdate(roomID, state) {
      var _a;

      _this.roomState = state;

      if (state === 'CONNECTED') {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().initRoomInfo({
          roomID: roomID,
          logLevel: (_a = _this.zegoWebRTC.logger) === null || _a === void 0 ? void 0 : _a.logLevel
        }); // 通知 service reload

        _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].RoomConnected);
      } else if (state === 'DISCONNECTED') {
        // 通知 service unload
        _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].RoomDisConnected);
      }
    };

    if (this.webrtcVersion < '2.0') {
      this.zegoWebRTC.bindListener('roomStateUpdate', onRoomStateUpdate);
    } else {
      this.zegoWebRTC._on('_roomStateUpdate', onRoomStateUpdate);
    }
  };

  Socket.prototype.getSocket = function () {
    var _a;

    return this.zegoWebRTC.socketCenter || ((_a = this.zegoWebRTC.modules) === null || _a === void 0 ? void 0 : _a.service);
  };

  Socket.prototype.getState = function () {
    return this.zegoWebRTC.stateCenter;
  };

  Socket.prototype.getServer = function () {
    return this.getState().server;
  };

  Socket.prototype.getAppID = function () {
    return this.getState().appid;
  };

  Socket.prototype.createJsonReqBody = function (bodyData) {
    return {
      header: {
        sdk_version: 1,
        id_name: this.getUserID()
      },
      body: JSON.stringify(bodyData)
    };
  };

  Socket.prototype.createPbReqBody = function (body) {
    return {
      header: {
        sdk_version: 1,
        id_name: this.getUserID()
      },
      body: body
    };
  };
  /**
   *
   * @param reqCmd 请求cmd
   * @param reqBody 请求内容
   * @param cb 请求回调
   */


  Socket.prototype.sendJsonMessage = function (reqCmd, reqBody, cb) {
    var _this = this;

    var header = this.zegoWebRTC.getHeader('biz_channel');

    if (!!(header === null || header === void 0 ? void 0 : header.seq) && !this.timerMap[header.seq]) {
      this.timerMap[header.seq] = setTimeout(function () {
        cb({
          header: {
            code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout
          }
        });
      }, this.timeoutNum);
    } else {
      cb({
        header: {
          code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal
        }
      });
    }

    this.getSocket().sendMessage('biz_channel', {
      channel: 'edu',
      cmd: reqCmd,
      req_body: JSON.stringify(this.createJsonReqBody(reqBody))
    }, function (param1, param2, param3) {
      try {
        var msgData = void 0;

        if (_this.webrtcVersion < '2.0') {
          // headerSeq: number, bodyCmd: string, bodyRspBody: any
          msgData = _this.rspSuccessHandle(param3);
        } else {
          // msg: PushMsgData, cmdSeq: number
          msgData = _this.rspSuccessHandle(param1.body.rsp_body);
        }

        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_response', "cmd=" + reqCmd + ",body=" + JSON.stringify(msgData));
        cb(msgData);
      } catch (err) {
        console.error(err);
      }
    }, function (param1, param2, param3, param4) {
      try {
        var msgData = void 0;

        if (_this.webrtcVersion < '2.0') {
          // errCode: any, // { code: xx ; msg: 'xx' } | xx
          // headerSeq: number,
          // bodyRspBody: string, // "{"header": {"code": xx, "message": "xx", "seq": xx, "timestamp": "xx"}}"
          // isRetry: boolean
          if (Object.prototype.toString.call(param1) === '[object Object]') {
            msgData = {
              header: {
                code: param1.code,
                message: param1.msg
              }
            };
          } else {
            msgData = _this.rspErrorHandle(param3);
          }
        } else {
          // msg: PushMsgData, cmdSeq: number
          msgData = _this.rspErrorHandle(param1.body.rsp_body);
        }

        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_response', "cmd=" + reqCmd + ",body=" + JSON.stringify(msgData));
        cb(msgData);
      } catch (err) {
        console.error(err);
      }
    });
  };
  /**
   *
   * @param reqCmd 请求cmd
   * @param reqBody 请求内容
   * @param cb 请求回调
   */


  Socket.prototype.sendPbMessage = function (reqCmd, reqBody, cb) {
    var _this = this;

    var roomState = this.getRoomState();

    if (roomState === 'DISCONNECTED') {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().warn(['WhiteBoard_Service'], 'sendPbMessage', "room state is DISCONNECTED");
      return;
    }

    var header = this.zegoWebRTC.getHeader('biz_channel');

    if (!header) {
      console.error('===sendpb header', reqCmd, header);
    }

    if (!!(header === null || header === void 0 ? void 0 : header.seq) && !this.timerMap[header.seq]) {
      this.timerMap[header.seq] = setTimeout(function () {
        cb({
          header: {
            code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout
          }
        });
      }, this.timeoutNum);
    } else {
      cb({
        header: {
          code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal
        }
      });
    }

    this.eduProtobuf.encodeMsg(reqCmd, header, this.createPbReqBody(reqBody)).then(function (u8) {
      var sendResult = _this.zegoWebRTC.sendPB(u8);

      if (sendResult === false) {
        // 请求异常，直接回包，并构造socket断开的回包数据
        cb({
          header: {
            code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkDisconnect
          }
        });
      } else {
        // 记录回调，等待回包
        _this.pbReqCallbackMap[header.seq] = cb;
      }
    })["catch"](function (err) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().error(['WhiteBoard_Service'], 'socket_req', err);
    });
  };

  Socket.prototype.handleJsonResponse = function (res, pushCallback) {
    try {
      var reqBody = JSON.parse(res.body.req_body);
      reqBody.msg_body = JSON.parse(reqBody.msg_body);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_push', JSON.stringify(reqBody));
      pushCallback(reqBody);
    } catch (err) {
      console.error(err);
    }
  };

  Socket.prototype.handlePbResponse = function (buffer, pushCallback) {
    var _this = this;

    this.eduProtobuf.decodeMsg(buffer).then(function (res) {
      var _a, _b;

      if (res.cmd && res.header) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_response', "cmd=" + res.cmd + ",body=" + JSON.stringify(res));
        var seq = (_a = res.header) === null || _a === void 0 ? void 0 : _a.seq;
        _this.pbReqCallbackMap[seq] && _this.pbReqCallbackMap[seq](res);
        delete _this.pbReqCallbackMap[seq];

        if ((_b = _this.timerMap) === null || _b === void 0 ? void 0 : _b[seq]) {
          clearTimeout(_this.timerMap[seq]);
          _this.timerMap[seq] = null;
          delete _this.timerMap[seq];
        }
      } else {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_push', JSON.stringify(res));
        pushCallback(res);
      }
    })["catch"](function (err) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().error(['WhiteBoard_Service'], 'socket_response', err);
    });
  };

  Socket.prototype.rspSuccessHandle = function (bodyRspBody) {
    var msgData = JSON.parse(bodyRspBody);
    msgData.body = msgData.body ? JSON.parse(msgData.body) : {};
    return msgData;
  };

  Socket.prototype.rspErrorHandle = function (bodyRspBody) {
    var msgData = JSON.parse(bodyRspBody);
    var _a = msgData.header,
        code = _a.code,
        message = _a.message;
    return {
      header: {
        code: code,
        message: message
      }
    };
  };

  Socket.prototype.loginRoom = function (roomID, token, user, config) {
    return this.zegoWebRTC.loginRoom(roomID, token, user, config);
  };

  Socket.prototype.logoutRoom = function (roomID) {
    // 退出登录前清除本地所有定时请求、队列请求任务（目前 module 没有队列）
    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].RoomDisConnected);
    this.zegoWebRTC.logoutRoom(roomID);
  };
  /**
   * 检查 socket 发送的数据包大小，上限 5KB
   *
   * JSOP：ws发送的信息中，reqBody是经过两次序列化的，所以在拦截判断的时候也需要经过两次序列化。
   *       两次序列化后的reqBody和ws发送的完整的消息之间大小的差距是360左右。
   *
   * PB：计算 body bytes 大小
   */


  Socket.prototype.checkSendLength = function (body, action) {
    var cmd = _cmd__WEBPACK_IMPORTED_MODULE_7__["CmdCenter"].Exprsss.DrawPageGraphics;
    var length = JSON.stringify({
      body: {
        channel: 'edu',
        cmd: cmd,
        req_body: JSON.stringify(this.createJsonReqBody(body))
      }
    }).length;

    if (length > (this.isSendPB ? 50000 : 4800) && action == _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["Action"].Update) {
      return Promise.resolve(length);
    } else if (!this.isSendPB && length > 4800) {
      return Promise.resolve(length);
    }

    if (this.isSendPB) return this.eduProtobuf.checkSendLength(cmd, this.createPbReqBody(body));
    return Promise.resolve(0);
  };
  /**
   *
   * @param cb 请求回调，透传msg
   */


  Socket.prototype.registerWbMessage = function (cb) {
    var _this = this;

    if (this.isSendPB) {
      this.isRegistedEvent && this.zegoWebRTC.off('_protobufResponse');
      this.zegoWebRTC.on('_protobufResponse', function (res) {
        return _this.handlePbResponse(res, cb);
      });
      this.isRegistedEvent = true;
    } // 同时保留 JSON 的消息通道


    var fn = this.webrtcVersion < '2.0' ? 'registerRouter' : 'on';
    this.getSocket()[fn]('push_biz_channel', function (res) {
      return _this.handleJsonResponse(res, cb);
    });
  };
  /**
   *
   * @param reqCmd 请求cmd
   * @param rspCmd 响应cmd
   * @param reqBody 请求内容
   * @param cmdCallBack 请求回调
   */


  Socket.prototype.queueWSCmdHandler = function (reqCmd, reqBody) {
    var _this = this;

    var promiseReq = new Promise(function (resolve) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard_Service'], 'socket_req', "cmd=" + reqCmd + ",body=" + JSON.stringify(reqBody));

      if (_this.isSendPB) {
        _this.sendPbMessage(reqCmd, reqBody, resolve);
      } else {
        _this.sendJsonMessage(reqCmd, reqBody, resolve);
      }
    });
    var promiseTimeout = new Promise(function (resolve) {
      setTimeout(function () {
        var header = _this.zegoWebRTC.getHeader('biz_channel');

        if (!!(header === null || header === void 0 ? void 0 : header.seq) && _this.pbReqCallbackMap[header.seq]) {
          delete _this.pbReqCallbackMap[header.seq];
          resolve({
            header: {
              code: _view_entities_view__WEBPACK_IMPORTED_MODULE_10__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout
            }
          });
        }
      }, _this.timeoutNum);
    });
    return Promise.race([promiseReq, promiseTimeout]);
  }; // 获取当前用户ID


  Socket.prototype.getUserID = function () {
    return this.getState().idName;
  };

  Socket.prototype.getRoomID = function () {
    return this.getState().roomid;
  }; // 获取当前offsetTime


  Socket.prototype.getServerTimeOffset = function () {
    return this.getState().serverTimeOffset || 0;
  }; // 获取当前 roomState


  Socket.prototype.getRoomState = function () {
    return this.roomState;
  };

  return Socket;
}();



/***/ }),

/***/ "./sdk/whiteboard/services/utils.ts":
/*!******************************************!*\
  !*** ./sdk/whiteboard/services/utils.ts ***!
  \******************************************/
/*! exports provided: transBase64Data, transPbData, encodeStringBase64, decodeStringBase64, calPlaceHandle, calculateDeviateValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transBase64Data", function() { return transBase64Data; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transPbData", function() { return transPbData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "encodeStringBase64", function() { return encodeStringBase64; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeStringBase64", function() { return decodeStringBase64; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calPlaceHandle", function() { return calPlaceHandle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateDeviateValue", function() { return calculateDeviateValue; });
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array-buffer.slice.js */ "./node_modules/core-js/modules/es.array-buffer.slice.js");
/* harmony import */ var core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.typed-array.uint8-array.js */ "./node_modules/core-js/modules/es.typed-array.uint8-array.js");
/* harmony import */ var core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.typed-array.copy-within.js */ "./node_modules/core-js/modules/es.typed-array.copy-within.js");
/* harmony import */ var core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.typed-array.every.js */ "./node_modules/core-js/modules/es.typed-array.every.js");
/* harmony import */ var core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.typed-array.fill.js */ "./node_modules/core-js/modules/es.typed-array.fill.js");
/* harmony import */ var core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.typed-array.filter.js */ "./node_modules/core-js/modules/es.typed-array.filter.js");
/* harmony import */ var core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.typed-array.find.js */ "./node_modules/core-js/modules/es.typed-array.find.js");
/* harmony import */ var core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-index.js */ "./node_modules/core-js/modules/es.typed-array.find-index.js");
/* harmony import */ var core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.typed-array.for-each.js */ "./node_modules/core-js/modules/es.typed-array.for-each.js");
/* harmony import */ var core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.typed-array.includes.js */ "./node_modules/core-js/modules/es.typed-array.includes.js");
/* harmony import */ var core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.typed-array.index-of.js */ "./node_modules/core-js/modules/es.typed-array.index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.typed-array.iterator.js */ "./node_modules/core-js/modules/es.typed-array.iterator.js");
/* harmony import */ var core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.typed-array.join.js */ "./node_modules/core-js/modules/es.typed-array.join.js");
/* harmony import */ var core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.typed-array.last-index-of.js */ "./node_modules/core-js/modules/es.typed-array.last-index-of.js");
/* harmony import */ var core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.typed-array.map.js */ "./node_modules/core-js/modules/es.typed-array.map.js");
/* harmony import */ var core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce.js */ "./node_modules/core-js/modules/es.typed-array.reduce.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.typed-array.reduce-right.js */ "./node_modules/core-js/modules/es.typed-array.reduce-right.js");
/* harmony import */ var core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.typed-array.reverse.js */ "./node_modules/core-js/modules/es.typed-array.reverse.js");
/* harmony import */ var core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ "./node_modules/core-js/modules/es.typed-array.set.js");
/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.typed-array.slice.js */ "./node_modules/core-js/modules/es.typed-array.slice.js");
/* harmony import */ var core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.typed-array.some.js */ "./node_modules/core-js/modules/es.typed-array.some.js");
/* harmony import */ var core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.typed-array.sort.js */ "./node_modules/core-js/modules/es.typed-array.sort.js");
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! core-js/modules/es.typed-array.subarray.js */ "./node_modules/core-js/modules/es.typed-array.subarray.js");
/* harmony import */ var core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-locale-string.js */ "./node_modules/core-js/modules/es.typed-array.to-locale-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! core-js/modules/es.typed-array.to-string.js */ "./node_modules/core-js/modules/es.typed-array.to-string.js");
/* harmony import */ var core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! core-js/modules/es.array.from.js */ "./node_modules/core-js/modules/es.array.from.js");
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_30__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_31__);
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! core-js/modules/es.typed-array.from.js */ "./node_modules/core-js/modules/es.typed-array.from.js");
/* harmony import */ var core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_from_js__WEBPACK_IMPORTED_MODULE_32__);
/* harmony import */ var core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! core-js/modules/es.typed-array.int32-array.js */ "./node_modules/core-js/modules/es.typed-array.int32-array.js");
/* harmony import */ var core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_int32_array_js__WEBPACK_IMPORTED_MODULE_33__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_34__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var _view_entities_store__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../view/entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _view_utils__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../view/utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _view_entities_view__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../view/entities/view */ "./sdk/whiteboard/view/entities/view.ts");







































var placeWidth = _view_entities_store__WEBPACK_IMPORTED_MODULE_36__["default"].calStandard.placeWidth;

var reverseUint8Array = function reverseUint8Array(u8array, s, e) {
  var tmp = u8array[s];
  u8array[s] = u8array[e];
  u8array[e] = tmp;
};

var reverseUint8ArrayString = function reverseUint8ArrayString(u8array, s, e, str) {
  var tmp = str.charCodeAt(s);
  u8array[s] = str.charCodeAt(e);
  u8array[e] = tmp;
};

var encodeBase64 = function encodeBase64(u8) {
  // @ts-ignore
  return btoa(String.fromCharCode.apply(null, u8));
};

var encodeString = function encodeString(data) {
  var u8array = unescape(encodeURIComponent(data)).split('').map(function (val) {
    return val.charCodeAt(0);
  });
  return new Uint8Array(u8array);
};

var decodeString = function decodeString(u8array) {
  return decodeURIComponent(escape(String.fromCharCode.apply(String, Array.from(u8array))));
};

var encodeText = function encodeText(data) {
  var arr = data.split(',');
  var u8arrayPoint = new Uint8Array(Int32Array.from([+arr[0], +arr[1]]).buffer);

  for (var i = 0; i < u8arrayPoint.length; i += 4) {
    reverseUint8Array(u8arrayPoint, i, i + 3);
    reverseUint8Array(u8arrayPoint, i + 1, i + 2);
  }

  var u8arrayText = encodeString(arr.slice(2).join(','));
  var u8array = new Uint8Array(u8arrayPoint.length + u8arrayText.length);
  u8array.set(u8arrayPoint);
  u8array.set(u8arrayText, u8arrayPoint.length);
  return u8array;
};

var decodeText = function decodeText(u8array) {
  var i = 0;

  for (; i < 8; i += 4) {
    reverseUint8Array(u8array, i, i + 3);
    reverseUint8Array(u8array, i + 1, i + 2);
  }

  var points = new Int32Array(u8array.slice(0, 8).buffer);
  return points[0] + "," + points[1] + "," + decodeString(u8array.slice(8));
};

var decodeTextBase64 = function decodeTextBase64(data) {
  var str = atob(data);
  var u8array = new Uint8Array(str.length);
  var i = 0;

  for (; i < 8; i += 4) {
    reverseUint8ArrayString(u8array, i, i + 3, str);
    reverseUint8ArrayString(u8array, i + 1, i + 2, str);
  }

  for (; i < str.length; i++) {
    u8array[i] = str.charCodeAt(i);
  }

  var points = new Int32Array(u8array.slice(0, 8).buffer);
  return points[0] + "," + points[1] + "," + decodeString(u8array.slice(8));
};

var encodeStringBase64 = function encodeStringBase64(data) {
  return encodeBase64(encodeString(data));
};

var decodeStringBase64 = function decodeStringBase64(data) {
  var str = atob(data);
  var u8array = new Uint8Array(str.length);

  for (var i = 0; i < str.length; i++) {
    u8array[i] = str.charCodeAt(i);
  }

  return decodeString(u8array);
}; // data转换（字符串、数组 <-> base64）


var transBase64Data = function transBase64Data(graphic, remote) {
  var type = graphic.type,
      action = graphic.action,
      is_end_draw = graphic.is_end_draw;
  var data = graphic.data; // data = data as string | Uint8Array | number[];
  // @ts-ignore

  if (Object.prototype.toString.call(data) == '[object Uint8Array]') {
    data = btoa(Array.prototype.map.call(data, function (ch) {
      return String.fromCharCode(ch);
    }).join(''));
  }

  if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Text) {
    if (remote) {
      graphic.data = decodeTextBase64(data);
    } else {
      graphic.data = encodeBase64(encodeText(data));
    }
  } else if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Image || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].BgImage) {
    if (remote) {
      graphic.data = JSON.parse(decodeStringBase64(data));
    } else {
      graphic.data = encodeBase64(encodeString(JSON.stringify(data)));
    }
  } else {
    if (remote) {
      // 适配数据流回放
      if (Object.prototype.toString.call(data) == '[object Array]') {
        graphic.data = data;
      } else {
        var str = atob(data || '');
        var u8array = new Uint8Array(str.length);

        for (var i = 0; i < str.length; i += 4) {
          reverseUint8ArrayString(u8array, i, i + 3, str);
          reverseUint8ArrayString(u8array, i + 1, i + 2, str);
        }

        graphic.data = Array.from(new Int32Array(u8array.buffer));
        graphic.data = graphic.data.slice(type !== _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].RealTime && graphic.data.length % 2 ? 1 : 0);
      }
    } else {
      var _data = data.slice();

      !(type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Pencil && !is_end_draw && (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["Action"].Create || action === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["Action"].Append)) && _data.unshift(_data.length / 2); // 规则：
      // 1：存储的数据格式为：点数,x1,y1,x2,y2
      // 2：每个数据4个字节反转

      var u8array = new Uint8Array(Int32Array.from(_data).buffer);

      for (var i = 0; i < u8array.length; i += 4) {
        reverseUint8Array(u8array, i, i + 3);
        reverseUint8Array(u8array, i + 1, i + 2);
      }

      graphic.data = encodeBase64(u8array);
    }
  }
}; // data转换（字符串、数组 <-> Uint8Array）


var transPbData = function transPbData(graphic, remote) {
  var type = graphic.type,
      data = graphic.data,
      action = graphic.action,
      is_end_draw = graphic.is_end_draw;

  if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Text) {
    if (remote) {
      // @ts-ignore
      graphic.data = decodeText(data);
    } else {
      // @ts-ignore
      graphic.data = encodeText(data);
    }
  } else if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Image || type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].BgImage) {
    if (remote) {
      // @ts-ignore
      graphic.data = JSON.parse(decodeString(data));
    } else {
      // @ts-ignore
      graphic.data = encodeString(JSON.stringify(data));
    }
  } else {
    if (remote) {
      // @ts-ignore
      var u8array = data;

      for (var i = 0; i < u8array.length; i += 4) {
        reverseUint8Array(u8array, i, i + 3);
        reverseUint8Array(u8array, i + 1, i + 2);
      }

      graphic.data = Array.from(new Int32Array(u8array.slice().buffer));
      graphic.data = graphic.data.slice(type !== _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].RealTime && graphic.data.length % 2 ? 1 : 0);
    } else {
      var _data = data.slice();

      !(type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Pencil && !is_end_draw && (action === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["Action"].Create || action === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["Action"].Append)) && _data.unshift(_data.length / 2); // 规则：
      // 1：存储的数据格式为：点数,x1,y1,x2,y2
      // 2：每个数据4个字节反转

      var u8array = new Uint8Array(Int32Array.from(_data).buffer);

      for (var i = 0; i < u8array.length; i += 4) {
        reverseUint8Array(u8array, i, i + 3);
        reverseUint8Array(u8array, i + 1, i + 2);
      } // @ts-ignore


      graphic.data = u8array;
    }
  }
}; // formula: width/sizeWidth = place/standPlace


var getPlaceValue = function getPlaceValue(place, width, placeWidth, remote, isFloat, k, // 偏移量
height) {
  if (k === void 0) {
    k = 0;
  }

  if (height === void 0) {
    height = 1;
  }

  var num = 0;

  if (remote) {
    num = place * width / placeWidth + place * width / placeWidth * k / height;
  } else {
    k = place * k / height;
    num = (place + k) * placeWidth / width;
  }

  return remote && isFloat ? num : Math.round(num);
}; // 计算图元位置时用 width


var calPlaceHandle = function calPlaceHandle(graphic, width, remote, k, height) {
  if (k === void 0) {
    k = 0;
  }

  if (height === void 0) {
    height = 1;
  }

  var type = graphic.type,
      px = graphic.px,
      py = graphic.py,
      x = graphic.x,
      y = graphic.y;
  var isFloat = Object(_view_utils__WEBPACK_IMPORTED_MODULE_37__["isFloatGraphic"])(graphic); // 修改偏移值

  px && (graphic.px = getPlaceValue(px, width, placeWidth, remote, false));
  py && (graphic.py = getPlaceValue(py, width, placeWidth, remote, false, k, height));
  graphic.x = getPlaceValue(x || 0, width, placeWidth, remote, false);
  graphic.y = getPlaceValue(y || 0, width, placeWidth, remote, false, k, height); // 修改 data

  if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].BgImage) return;

  if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Text) {
    var arr = graphic.data.split(',');
    arr[0] = getPlaceValue(+arr[0], width, placeWidth, remote, isFloat) + '';
    arr[1] = getPlaceValue(+arr[1], width, placeWidth, remote, isFloat, k, height) + '';
    graphic.data = arr.join(',');
  } else if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Image) {
    var data = graphic.data;
    data.x = getPlaceValue(data.x, width, placeWidth, remote, isFloat);
    data.y = getPlaceValue(data.y, width, placeWidth, remote, isFloat, k, height);
    data.ex = getPlaceValue(data.ex, width, placeWidth, remote, isFloat);
    data.ey = getPlaceValue(data.ey, width, placeWidth, remote, isFloat, k, height);

    if (remote) {
      // 和其他端保持方案一致：本端 新data.x = data.x + 偏移量
      graphic.initX = data.x;
      graphic.initY = data.y;
      data.x += graphic.x;
      data.y += graphic.y;
      data.ex += graphic.x;
      data.ey += graphic.y;
    } else {
      graphic.data = data;
    }
  } else if (type === _view_entities_view__WEBPACK_IMPORTED_MODULE_38__["GraphicType"].Cursor) {
    // console.warn('===Cursor 计算图元位置');
    graphic.data = graphic.data.map(function (item, index) {
      if (index % 2 == 0) {
        return getPlaceValue(item, width, placeWidth, remote, isFloat, 0);
      } else {
        return getPlaceValue(item, width, placeWidth, remote, isFloat, k, height);
      }
    });
  } else {
    graphic.data = graphic.data.map(function (item, index) {
      if (index % 2 == 0) {
        return getPlaceValue(item, width, placeWidth, remote, isFloat, 0);
      } else {
        return getPlaceValue(item, width, placeWidth, remote, isFloat, k, height);
      }
    });
  }
}; // 计算文件白板图元偏离值 - Y轴


var calculateDeviateValue = function calculateDeviateValue(width, height, viewHeight, fileInfo) {
  var filePageSize = fileInfo.filePageSize,
      pageCount = fileInfo.pageCount;
  var h = (filePageSize === null || filePageSize === void 0 ? void 0 : filePageSize.fillPPT) ? height : viewHeight * pageCount;
  return filePageSize && h - filePageSize.height * width * pageCount / filePageSize.width || 0;
};



/***/ }),

/***/ "./sdk/whiteboard/view/assets/index.css":
/*!**********************************************!*\
  !*** ./sdk/whiteboard/view/assets/index.css ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js!./index.css */ "./node_modules/css-loader/dist/cjs.js!./sdk/whiteboard/view/assets/index.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./sdk/whiteboard/view/baseManager.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/view/baseManager.ts ***!
  \********************************************/
/*! exports provided: ZegoWhiteboardManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardManager", function() { return ZegoWhiteboardManager; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.object.values.js */ "./node_modules/core-js/modules/es.object.values.js");
/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ "./node_modules/core-js/modules/es.object.keys.js");
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.array.sort.js */ "./node_modules/core-js/modules/es.array.sort.js");
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.string.starts-with.js */ "./node_modules/core-js/modules/es.string.starts-with.js");
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var _assets_index_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./assets/index.css */ "./sdk/whiteboard/view/assets/index.css");
/* harmony import */ var _assets_index_css__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_assets_index_css__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _docsview_view_assets_polyfill_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../docsview/view/assets/polyfill.js */ "./sdk/docsview/view/assets/polyfill.js");
/* harmony import */ var _docsview_view_assets_polyfill_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_docsview_view_assets_polyfill_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _views_viewMod__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./views/viewMod */ "./sdk/whiteboard/view/views/viewMod.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _services_event__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");






















var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};








 // 对外接口 白板控制中心

var ZegoWhiteboardManager =
/** @class */
function () {
  function ZegoWhiteboardManager(serviceHandle) {
    // 实例列表
    this.modIdMapInstance = {}; // 文件信息

    this.fileInfoMap = {};
    this.signallingDelay = 0;
    this.serviceHandle = serviceHandle;
    this.registerLoadfileListener();
    this.registerPushCallbackHandle();
    this.registerPullCallbackHandle();
  }

  ZegoWhiteboardManager.prototype.registerLoadfileListener = function () {
    var _this = this;

    document.body.addEventListener('loadfile', function (e) {
      var fileID = e.detail.fileID;
      _this.fileInfoMap[fileID] = e.detail;
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'Inner'], 'update_file_info', JSON.stringify({
        fileID: fileID,
        detail: e.detail
      }));
    });
  };

  ZegoWhiteboardManager.prototype.registerPushCallbackHandle = function () {
    var _this = this;

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushClearPageGraphics, function (whiteboardID, layers) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.clearGraphicsPushCallback(whiteboardID, layers);
        }, _this.signallingDelay);
      } else {
        _this.clearGraphicsPushCallback(whiteboardID, layers);
      }
    });
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushDrawPageGraphics, function (whiteboardID, graphicList, delGraphicIdList) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.drawGraphicsPushCallback(whiteboardID, graphicList, delGraphicIdList);
        }, _this.signallingDelay);
      } else {
        _this.drawGraphicsPushCallback(whiteboardID, graphicList, delGraphicIdList);
      }
    });
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushAddMod, function (whiteboardID, uniqueID) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.addModPushCallback(whiteboardID, uniqueID);
        }, _this.signallingDelay);
      } else {
        _this.addModPushCallback(whiteboardID, uniqueID);
      }
    });
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushRemovedMod, function (whiteboardID, uniqueID) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.removedModPushCallback(whiteboardID, uniqueID);
        }, _this.signallingDelay);
      } else {
        _this.removedModPushCallback(whiteboardID, uniqueID);
      }
    });
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushScroll, function (whiteboardID, horizontalPercent, verticalPercent, step) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.scrollPushCallback(whiteboardID, horizontalPercent, verticalPercent, step);
        }, _this.signallingDelay);
      } else {
        _this.scrollPushCallback(whiteboardID, horizontalPercent, verticalPercent, step);
      }
    });
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushScale, function (whiteboardID, scale, ofsX, ofsY) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.scalePushCallback(whiteboardID, scale, ofsX, ofsY);
        }, _this.signallingDelay);
      } else {
        _this.scalePushCallback(whiteboardID, scale, ofsX, ofsY);
      }
    }); // 注册远端执行H5动画通知回调

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushH5ExtraAppended, function (whiteboardID, modExtra) {
      if (_this.signallingDelay) {
        setTimeout(function () {
          _this.h5ExtraAppendedPushCallback(whiteboardID, modExtra);
        }, _this.signallingDelay);
      } else {
        _this.h5ExtraAppendedPushCallback(whiteboardID, modExtra);
      }
    }); // 权限变更

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].PushAuthChange, function (whiteboard, graphic) {
      _this.onPushAuthChange(whiteboard, graphic);
    });
  };

  ZegoWhiteboardManager.prototype.registerPullCallbackHandle = function () {
    var _this = this;

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].GetPageGraphicsList, function (whiteboardID, graphicList, delGraphicIdList) {
      var currInstance = _this.getMapInstance(whiteboardID);

      if (!currInstance) return;
      currInstance.updateRemoteToLocal(graphicList, delGraphicIdList);
    }); // 注册追加H5动画信息回调

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].AppendH5Extra, function (data) {
      var whiteboardID = data.whiteboardID,
          code = data.code,
          msg = data.msg,
          modExtra = data.modExtra,
          isH5 = data.isH5;

      if (code !== 0) {
        // 处理回退
        if (code === _entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAnimationInfoLimit) {
          // 动画超出长度限制抛出错误
          _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].Error, {
            code: code,
            msg: msg
          });
        } else {
          if (isH5) {
            // 自定义 H5 执行回退
            _this.h5ExtraAppendedPushCallback(whiteboardID, modExtra);
          } else {
            // 动态 PPT，当前动画无法回退
            _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].Error, {
              code: code,
              msg: msg
            });
          }
        }
      }
    }); // 注册scroll回调

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].Scroll, function (data) {
      var whiteboardID = data.whiteboardID,
          code = data.code,
          horizontalPercent = data.horizontalPercent,
          verticalPercent = data.verticalPercent,
          step = data.step;

      if (code !== 0) {
        // 切页、切步回退，不抛出错误
        _this.scrollPushCallback(whiteboardID, horizontalPercent, verticalPercent, step);
      }
    }); // 注册 Scale 回调

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].Scale, function (data) {
      var whiteboardID = data.whiteboardID,
          code = data.code,
          mod_scale = data.mod_scale;

      if (code !== 0) {
        _this.scalePushCallback(whiteboardID, mod_scale.scale, mod_scale.ofs_x, mod_scale.ofs_y);
      }
    });
  };

  ZegoWhiteboardManager.prototype.addModPushCallback = function (whiteboardID, uniqueID) {
    var currInstance = this.getMapInstance(whiteboardID);

    if (!currInstance) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'Inner'], 'remote_add', JSON.stringify({
        whiteboardID: whiteboardID
      }));
      currInstance = new _views_viewMod__WEBPACK_IMPORTED_MODULE_23__["ZegoWhiteboardViewImpl"](whiteboardID, this.serviceHandle);
      this.setMapInstance(currInstance);
    }

    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoSuperBoardEventType"].RemoteModAdd, currInstance);
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].ViewAdd, currInstance);
  };

  ZegoWhiteboardManager.prototype.removedModPushCallback = function (whiteboardID, uniqueID) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'Inner'], 'remote_removed', JSON.stringify({
      whiteboardID: whiteboardID
    }));
    currInstance.destroyDomHandle();
    currInstance = null;
    this.deleteMapInstance(whiteboardID);
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoSuperBoardEventType"].RemoteModRemoved, uniqueID, whiteboardID);
    _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].ViewRemoved, whiteboardID);
  };

  ZegoWhiteboardManager.prototype.scrollPushCallback = function (whiteboardID, horizontalPercent, verticalPercent, step) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().warn(['Whiteboard_Manager', 'Inner'], 'remote_scroll', "whiteboardID=" + whiteboardID + ",hPercent=" + horizontalPercent + ",vPercent=" + verticalPercent + ",step=" + step);
    currInstance.scrollToHandle(horizontalPercent, verticalPercent, step, false);
  };

  ZegoWhiteboardManager.prototype.scalePushCallback = function (whiteboardID, scale, ofsX, ofsY) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().warn(['Whiteboard_Manager', 'Inner'], 'remote_scale', "whiteboardID=" + whiteboardID + ",scale=" + scale + ",ofsX=" + ofsX + ",ofsY=" + ofsY);
    if (_entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].scaleModes.response) currInstance.scaleToHandle(scale, ofsX, ofsY, false);
  };

  ZegoWhiteboardManager.prototype.h5ExtraAppendedPushCallback = function (whiteboardID, modExtra) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().warn(['Whiteboard_Manager', 'Inner'], 'remote_extra', "whiteboardID=" + whiteboardID + ",modExtra=" + modExtra);
    currInstance.playAnimation(modExtra, true);
  };

  ZegoWhiteboardManager.prototype.clearGraphicsPushCallback = function (whiteboardID, layers) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    currInstance.clearLocalHandle(layers); // 收到清空通知，停止本端绘制操作

    currInstance.stopLocalDrawHandle(this.serviceHandle.getScrollPercent(whiteboardID).verticalPercent);
  };

  ZegoWhiteboardManager.prototype.drawGraphicsPushCallback = function (whiteboardID, graphicList, delGraphicIdList) {
    var currInstance = this.getMapInstance(whiteboardID);
    if (!currInstance) return;
    (graphicList.length !== 0 || delGraphicIdList) && currInstance.updateRemoteToLocal(graphicList, delGraphicIdList);
  };

  ZegoWhiteboardManager.prototype.onPushAuthChange = function (whiteboard, graphic) {
    // whiteboard: {scale: 1, scroll: 0}
    // graphic: {update: 1, delete: 1, move: 1, clear: 1, create: 1}
    if (graphic) {
      _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].WhiteboardGraphicAuthChange, graphic);
      _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoSuperBoardEventType"].RemoteGraphicAuthChange, graphic);
    }

    if (whiteboard) {
      _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoEventType"].WhiteboardAuthChange, whiteboard);
      _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoSuperBoardEventType"].RemoteAuthChange, whiteboard);
      whiteboard && Object.values(this.modIdMapInstance).forEach(function (item) {
        return item && item.onAuthChange();
      });
    }
  };

  ZegoWhiteboardManager.prototype.setFileInfo = function (view) {
    var _a;

    if (view.fileInfo) {
      var _b = view.fileInfo,
          fileID = _b.fileID,
          fileName = _b.fileName;
      var res = this.fileInfoMap[fileID];
      res = res && res[fileName];

      if (res) {
        view.aspectWidth = res.width;
        view.aspectHeight = res.height;
        view.pageCount = res.pageCount;
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'Inner'], 'update_file_info', JSON.stringify({
          fileID: fileID,
          detail: (_a = {
            fileID: fileID
          }, _a[fileName] = res, _a)
        }));
      }
    }
  };

  ZegoWhiteboardManager.prototype.deleteMapInstance = function (whiteboardID) {
    delete this.modIdMapInstance[whiteboardID];
  };

  ZegoWhiteboardManager.prototype.getMapInstance = function (whiteboardID) {
    return this.modIdMapInstance[whiteboardID];
  };

  ZegoWhiteboardManager.prototype.setMapInstance = function (whiteboardView) {
    this.modIdMapInstance[whiteboardView.getID()] = whiteboardView;
  };

  ZegoWhiteboardManager.prototype.setActivitedView = function (whiteboardID, rootDomID) {
    if (this.serviceHandle.isPlayback) {
      _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_25__["ZegoServiceEventType"].AttachedView, []);
      return;
    }

    Object.values(this.modIdMapInstance).forEach(function (item) {
      item.setActivited(item.getID() == whiteboardID, rootDomID);
    });
  };

  ZegoWhiteboardManager.prototype.getActivitedViews = function () {
    return Object.values(this.modIdMapInstance).filter(function (item) {
      return item.getActivited();
    });
  };

  ZegoWhiteboardManager.prototype.checkAttachingParent = function (parent) {
    return !!document.getElementById(parent);
  };

  ZegoWhiteboardManager.prototype.checkCreatingView = function (view) {
    return !(!view || // !view.roomID ||
    !view.name || isNaN(+view.aspectWidth) || !+view.aspectWidth || isNaN(+view.aspectHeight) || !+view.aspectHeight || isNaN(+view.pageCount) || !+view.pageCount);
  };

  ZegoWhiteboardManager.prototype.setViewSize = function (whiteboardID) {
    var view = this.getMapInstance(whiteboardID);

    if (view) {
      var _a = view.getContentSize(),
          width = _a.width,
          height = _a.height;

      this.serviceHandle.setSize(whiteboardID, width, height);
    }
  };

  ZegoWhiteboardManager.prototype.createErrorStr = function (errorData) {
    var errorDataStr;

    if (errorData.code !== undefined) {
      errorDataStr = JSON.stringify(errorData);
    } else {
      errorDataStr = '' + errorData;
    }

    return errorDataStr;
  };

  ZegoWhiteboardManager.prototype.loginRoom = function (roomID, token, user, config) {
    return this.serviceHandle.loginRoom(roomID, token, user, config);
  };

  ZegoWhiteboardManager.prototype.logoutRoom = function (roomID) {
    return this.serviceHandle.logoutRoom(roomID);
  };

  ZegoWhiteboardManager.prototype.getCurrentActivitedView = function () {
    return this.serviceHandle.getCurrentActivitedView();
  };

  ZegoWhiteboardManager.prototype.setDeferredRenderingTime = function (delay) {
    this.signallingDelay = delay || 0;
  }; // 内部清理资源


  ZegoWhiteboardManager.prototype.clear = function (userID) {
    Object.values(this.modIdMapInstance).forEach(function (item) {
      // 清除激光笔
      item && item.clearLaserHandle(userID);
    });
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'clear', JSON.stringify({
      userID: userID
    }));
  };

  ZegoWhiteboardManager.prototype.getViewList = function () {
    return __awaiter(this, void 0, void 0, function () {
      var whiteboardIDList_1, errorData_1;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            return [4
            /*yield*/
            , this.serviceHandle.getModList()];

          case 1:
            whiteboardIDList_1 = _a.sent();
            Object.keys(this.modIdMapInstance).forEach(function (whiteboardID) {
              if (whiteboardIDList_1.indexOf(whiteboardID) === -1) {
                _this.deleteMapInstance(whiteboardID);
              }
            });
            whiteboardIDList_1.forEach(function (whiteboardID) {
              if (!_this.modIdMapInstance[whiteboardID]) {
                _this.setMapInstance(new _views_viewMod__WEBPACK_IMPORTED_MODULE_23__["ZegoWhiteboardViewImpl"](whiteboardID, _this.serviceHandle));
              }

              _this.setViewSize(whiteboardID);
            });
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'getViewList', JSON.stringify(Object.keys(this.modIdMapInstance))); // createTime 倒序

            return [2
            /*return*/
            , Object.values(this.modIdMapInstance).sort(function (wb1, wb2) {
              return _this.serviceHandle.getCreateTime(wb2.getID()) - _this.serviceHandle.getCreateTime(wb1.getID());
            })];

          case 2:
            errorData_1 = _a.sent();
            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'getViewList', this.createErrorStr(errorData_1));
            return [2
            /*return*/
            , Promise.reject(errorData_1.code !== undefined ? errorData_1 : Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGetListFail))];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  }; // 创建view


  ZegoWhiteboardManager.prototype.createView = function (whiteboardModel, whiteboardID) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var errorData, wbID, whiteboardView, errorData_2;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!this.checkCreatingView(whiteboardModel)) {
                errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误：roomID、name为字符串，aspectWidth、aspectHeight、pageCount为正整数', true);
                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'createView', this.createErrorStr(errorData));
                reject(errorData);
                return [2
                /*return*/
                ];
              } // 文件白板重设宽高比


              this.setFileInfo(whiteboardModel);
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'createView', JSON.stringify({
                whiteboardModel: whiteboardModel
              }));
              _a.label = 1;

            case 1:
              _a.trys.push([1, 3,, 4]);

              return [4
              /*yield*/
              , this.serviceHandle.createMod(whiteboardModel, whiteboardID)];

            case 2:
              wbID = _a.sent();
              whiteboardView = this.getMapInstance(wbID);

              if (!whiteboardView) {
                whiteboardView = new _views_viewMod__WEBPACK_IMPORTED_MODULE_23__["ZegoWhiteboardViewImpl"](wbID, this.serviceHandle);
                this.setMapInstance(whiteboardView);
                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'createView', 'success');
              }

              resolve(whiteboardView);
              return [3
              /*break*/
              , 4];

            case 3:
              errorData_2 = _a.sent();
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'createView', this.createErrorStr(errorData_2));
              reject(errorData_2.code !== undefined ? errorData_2 : Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewCreateFail));
              return [3
              /*break*/
              , 4];

            case 4:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  }; // 销毁view


  ZegoWhiteboardManager.prototype.destroyView = function (whiteboardView) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var errorData, whiteboardID, errorData_3;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!whiteboardView || !whiteboardView.getID) {
                errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist);
                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'destroyView', JSON.stringify({
                  whiteboardView: whiteboardView,
                  errorData: errorData
                }));
                reject(errorData);
                return [2
                /*return*/
                ];
              }

              _a.label = 1;

            case 1:
              _a.trys.push([1, 3,, 4]);

              whiteboardID = whiteboardView.getID();
              return [4
              /*yield*/
              , this.serviceHandle.destroyMod(whiteboardID)];

            case 2:
              _a.sent();

              this.deleteMapInstance(whiteboardID);
              whiteboardView.destroyDomHandle(); // @ts-ignore

              whiteboardView = null;
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'destroyView', 'success');
              resolve();
              return [3
              /*break*/
              , 4];

            case 3:
              errorData_3 = _a.sent();
              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'destroyView', this.createErrorStr(errorData_3));
              reject(errorData_3.code !== undefined ? errorData_3 : Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorDestroyFail));
              return [3
              /*break*/
              , 4];

            case 4:
              return [2
              /*return*/
              ];
          }
        });
      });
    });
  }; // 添加view到视图


  ZegoWhiteboardManager.prototype.attachView = function (whiteboardView, parent) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      if (!_this.checkAttachingParent(parent)) {
        var errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewParentNotExist);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'attachView', JSON.stringify({
          parent: parent,
          errorData: errorData
        }));
        reject(errorData);
        return;
      }

      if (!whiteboardView || !whiteboardView.getID) {
        var errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'attachView', JSON.stringify({
          whiteboardView: whiteboardView,
          errorData: errorData
        }));
        reject(errorData);
        return;
      }

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'attachView', JSON.stringify({
        whiteboardID: whiteboardView.getID(),
        parent: parent
      }));

      try {
        var view = whiteboardView;
        var fileInfo = view.getFileInfo();

        if (fileInfo === null || fileInfo === void 0 ? void 0 : fileInfo.fileID) {
          _this.serviceHandle.setFileInfo(_this.fileInfoMap[fileInfo.fileID].data);
        } else {
          _this.serviceHandle.setFileInfo({});
        }

        var vid = view.getID();
        view.init(parent);

        _this.setMapInstance(view);

        _this.setActivitedView(vid, view.getRootDomID());

        view.clearCanvasCache();

        var _a = _this.serviceHandle.getScrollPercent(vid),
            horizontalPercent = _a.horizontalPercent,
            verticalPercent = _a.verticalPercent,
            pptStep = _a.pptStep;

        view.scrollToHandle(horizontalPercent, verticalPercent, pptStep, false);
        view.clearCanvasCache(); // view.setViewCursorHandle();

        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'attachView', 'success');
        resolve();
      } catch (error) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'attachView', _this.createErrorStr(error));
        reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAttachFail));
      }
    });
  };
  /**
   * 是否将缩放同步给房间内其他成员
   */


  ZegoWhiteboardManager.prototype.enableSyncScale = function (enable) {
    _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].scaleModes.sync = !!enable;

    if (enable) {
      this.getActivitedViews().forEach(function (view) {
        return view.syncScaleToHandle();
      });
    }
  };
  /**
   * 是否响应房间内其他成员的缩放
   */


  ZegoWhiteboardManager.prototype.enableResponseScale = function (enable) {
    var _this = this;

    _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].scaleModes.response = !!enable;

    if (enable) {
      this.getActivitedViews().forEach(function (view) {
        var _a = _this.serviceHandle.getScale(view.getID()),
            scaleFactor = _a.scaleFactor,
            scaleOffsetX = _a.scaleOffsetX,
            scaleOffsetY = _a.scaleOffsetY;

        view.scaleToHandle(scaleFactor, scaleOffsetX, scaleOffsetY, false);
      });
    }
  };
  /**
   * 设置白板是否开启笔锋
   */


  ZegoWhiteboardManager.prototype.enableHandwriting = function (enable) {
    if (typeof enable !== 'boolean') {
      var errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误', true);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'enableHandwriting', this.createErrorStr(errorData));
      return;
    }

    var attributes = _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].basicState.attributes;
    var attributesData = JSON.parse(attributes);
    attributesData.stroke = !!enable;
    _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].basicState.attributes = JSON.stringify(attributesData);
    this.serviceHandle.enableHandwriting(attributesData.stroke);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'enableHandwriting', 'success');
  };
  /**
   * 是否开启自定义光标
   */


  ZegoWhiteboardManager.prototype.enableCustomCursor = function (enable) {
    if (typeof enable !== 'boolean') {
      var errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误', true);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'enableCustomCursor', this.createErrorStr(errorData));
      return;
    }

    var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].customCursor;
    customCursor.enable = enable;
    Object.values(this.modIdMapInstance).forEach(function (item) {
      item.setViewCursorHandle();

      if (!enable) {
        item.hideViewCursorHandle();
      }
    });
  };
  /**
   * 是否显示远端光标
   */


  ZegoWhiteboardManager.prototype.enableRemoteCursorVisible = function (visible) {
    if (typeof visible !== 'boolean') {
      var errorData = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误', true);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().error(['Whiteboard_Manager', 'API'], 'enableCustomCursor', this.createErrorStr(errorData));
      return;
    }

    var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].customCursor;
    customCursor.remoteVisible = visible;
  };

  ZegoWhiteboardManager.prototype.setCustomCursorAttribute = function (type, attr) {
    var _this = this;

    var image_limit = 50 * 1024;
    var address = attr.iconPath;

    if (typeof address === 'string') {
      var url_1 = address;

      if (!url_1.startsWith('https://')) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl);
        return Promise.reject(error);
      }

      return new Promise(function (resolve, reject) {
        var flag = true;
        var xhr = new XMLHttpRequest();
        xhr.open('HEAD', url_1, true);

        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4) {
            if (xhr.status != 200) {
              flag = false;
              var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
              return reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(code));
            }

            var mediaType = (xhr.getResponseHeader('Content-Type') || '').replace('image/', '');
            var size = +xhr.getResponseHeader('Content-Length');

            if (!'png'.includes(mediaType)) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
              return reject(error);
            }

            if (size > image_limit) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
              return reject(error);
            }

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.setCursorImage', JSON.stringify({
              params: {
                address: address
              }
            }));
            var image_1 = new Image();

            image_1.onload = function () {
              console.warn({
                width: image_1.width,
                height: image_1.height,
                attr: attr
              });

              if (Math.abs(attr.offsetX) > image_1.width || Math.abs(attr.offsetY) > image_1.height) {
                var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit);
                return reject(error);
              }

              var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].customCursor;
              var attributes = JSON.parse(customCursor.attributes);
              customCursor.type = type;
              attributes.url = address;
              attributes.pox_x = attr.offsetX;
              attributes.pox_y = attr.offsetY;
              customCursor.attributes = JSON.stringify(attributes);
              Object.values(_this.modIdMapInstance).forEach(function (item) {
                item.setViewCursorHandle();
              });
              resolve();
              image_1 = null;
            };

            image_1.src = address;
          }
        };

        xhr.onerror = function () {
          if (flag) {
            var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
            reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(code));
          }
        };

        xhr.send(null);
      });
    } else {
      // 上传本地图片
      address = address;
      var mediaType = address.type.replace('image/', '');

      if (!'png'.includes(mediaType)) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
        return Promise.reject(error);
      }

      if (address.size > image_limit) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
        return Promise.reject(error);
      }

      return new Promise(function (resolve, reject) {
        _this.serviceHandle.uploadImage(address, function () {}).then(function (res) {
          var image = new Image();

          image.onload = function () {
            console.warn({
              width: image.width,
              height: image.height,
              attr: attr
            });

            if (Math.abs(attr.offsetX) > image.width || Math.abs(attr.offsetY) > image.height) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_27__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_26__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit);
              return reject(error);
            }

            var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_24__["default"].customCursor;
            var attributes = JSON.parse(customCursor.attributes);
            customCursor.type = type;
            attributes.url = res;
            attributes.pox_x = attr.offsetX;
            attributes.pox_y = attr.offsetY;
            customCursor.attributes = JSON.stringify(attributes);
            Object.values(_this.modIdMapInstance).forEach(function (item) {
              item.setViewCursorHandle();
            });
            resolve();
            image = null;
          };

          image.src = res;
        });
      });
    }
  };
  /**
   * 数据流回放清空回退
   */


  ZegoWhiteboardManager.prototype.undoClearAction = function () {
    this.getActivitedViews().forEach(function (view) {
      return view._undoClear();
    });
  };
  /**
   * 切换白板
   * @param whiteboardID
   */


  ZegoWhiteboardManager.prototype.switchView = function (whiteboardID) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_28__["Logger"].getInstance().info(['Whiteboard_Manager', 'API'], 'switchView', JSON.stringify({
      whiteboardID: whiteboardID
    }));
    return this.serviceHandle.switchView(whiteboardID);
  };

  ZegoWhiteboardManager.prototype.on = function (event, callBack) {
    return _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].on(event, callBack);
  };

  ZegoWhiteboardManager.prototype.off = function (event, callBack) {
    return _services_event__WEBPACK_IMPORTED_MODULE_25__["default"].off(event, callBack);
  };

  return ZegoWhiteboardManager;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/entities/error.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/entities/error.ts ***!
  \***********************************************/
/*! exports provided: transError, emitError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transError", function() { return transError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "emitError", function() { return emitError; });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _services_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./view */ "./sdk/whiteboard/view/entities/view.ts");


var _a;


 // 接口调用错误码

var ErrorCodeData = (_a = {}, // 公共错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal] = '内部错误', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid] = '参数错误', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout] = '网络超时', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkDisconnect] = '网络断开', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp] = '网络回包错误', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorRequestTooMany] = '请求过于频繁', // 房间相关错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom] = '未登录房间', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUserNotExist] = '用户不存在', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorTokenInvalid] = 'Token authentication failed', // 白板 view 相关错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist] = '白板view不存在', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewCreateFail] = '创建白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewModifyFail] = '修改白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNameLimit] = '白板view名称或者content过长', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewParentNotExist] = '白板view的parent不存在', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNumLimit] = '超过白板最大数量限制', // 图元相关错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNotExist] = '图元不存在', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCreateFail] = '创建图元错误', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail] = '修改图元错误', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicUnableDraw] = '未开启绘制', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit] = '图元数据大小超过限制', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNumLimit] = '超过图元最大数量限制', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicTextLimit] = '文本字数超过上限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit] = '图片图元大小超限制', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport] = '不支持的图片类型', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl] = '无效图片地址', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCursorOffsetLimit] = '光标设置偏移值超出限制', // 接口调用错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInitFail] = '初始化失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGetListFail] = '拉取白板view列表失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorCreateFail] = '创建白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorDestroyFail] = '销毁白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorAttachFail] = 'attach白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorClearFail] = '清空白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorScrollFail] = '滚动白板view失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUndoFail] = '撤销操作失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorRedoFail] = '重做操作失败', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorLogFolderNotAccess] = '日志目录无法创建或写入', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorCacheFolderNotAccess] = '缓目录径无法创建或写入', // 权限错误码
_a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScale] = '无白板缩放权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll] = '无白板滚动权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic] = '无图元创建权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic] = '无图元编辑权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthMoveGraphic] = '无图元移动权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthDeleteGraphic] = '无图元删除权限', _a[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthClearGraphic] = '无白板清空权限', _a); // 映射关系

var ErrorCodeMap = {
  // web socket
  1003: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom,
  1014: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUserNotExist,
  1101: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist,
  1102: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewCreateFail,
  1104: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewModifyFail,
  1114: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNumLimit,
  1201: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  1202: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  1212: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCreateFail,
  1217: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit,
  1219: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  1222: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit,
  1223: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNumLimit,
  60003001: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp,
  // electron native
  10001000: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal,
  10001001: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid,
  110000001: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl,
  110000003: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport,
  110000004: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit,
  110000005: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl,
  110000007: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorLogFolderNotAccess,
  110000008: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorCacheFolderNotAccess,
  110000009: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNameLimit,
  111001001: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkDisconnect,
  111001002: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNetworkTimeout,
  111101001: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorRequestTooMany,
  112001003: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom,
  112001014: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorUserNotExist,
  112001101: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNotExist,
  112001102: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewCreateFail,
  112001104: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewModifyFail,
  112001114: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewNumLimit,
  112001201: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  112001202: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  112001212: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicCreateFail,
  112001217: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit,
  112001219: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicModifyFail,
  112001222: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicDataLimit,
  112001223: _view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicNumLimit
};
var transError = function transError(code, msg, replace) {
  if ([1201, 1202, 1219, 1212].includes(code)) {
    console.warn('========后台抛出错误码', code);
  }

  code = ErrorCodeMap[code] || code;
  msg = ErrorCodeData[code] && replace && msg ? msg : ErrorCodeData[code] || msg || ErrorCodeData[_view__WEBPACK_IMPORTED_MODULE_2__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInternal];
  return {
    code: code,
    msg: msg
  };
};
var emitError = function emitError(code, msg, replace) {
  var error = transError(code, msg, replace);
  _services_event__WEBPACK_IMPORTED_MODULE_1__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_1__["ZegoEventType"].Error, error);
  return error;
};

/***/ }),

/***/ "./sdk/whiteboard/view/entities/store.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/entities/store.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view */ "./sdk/whiteboard/view/entities/view.ts");

var isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0; // 所有view公共数据

/* harmony default export */ __webpack_exports__["default"] = ({
  reservedPrefix: {
    whiteboardZoom: 'zego-whiteboard-zoom',
    fileWhiteboardCon: 'zego-docsview-con',
    whiteboardCon: 'zego-whiteboard-con',
    whiteboard: 'zego-whiteboard',
    laserContainer: 'zego-other-container',
    graphicsBgContainer: 'zego-graphics-bg-container',
    graphicsBgImageContainer: 'zego-graphics-bgImage-container',
    graphicsContainer: 'zego-graphics-container',
    graphicsSvg: 'zego-svg',
    textareaCon: 'zego-textarea',
    laserCon: 'zego-laser',
    cursorCon: 'zego-cursor',
    graphics: 'zego-graphics',
    boxContainer: 'zego-box-container',
    graphicsBox: 'zego-graphics-box' // graphics box css selector prefix

  },
  // 工具状态，覆盖图元的数据
  basicState: {
    type: _view__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen,
    size: 6,
    fontSize: 24,
    color: '#f54326',
    bgColor: 'rgb(241, 243, 244)',
    attributes: '{"bold": false, "italic": false, "stroke": false}' // 扩展属性

  },
  basicExtraState: {
    drawSize: 0,
    drawFontSize: 0,
    customImage: {
      url: '',
      w: 80,
      h: 80
    },
    defaultFileBgColor: 'rgb(255, 255, 255, 0)'
  },
  // 实时绘制常量
  realTimeState: {
    localDrawCount: 5 * 2,
    remoteDrawDelay: 4,
    remoteDrawCount: 1 * 2,
    remoteDrawEndDelay: 10 * 1000 // 远端实时绘制结束时间间隔

  },
  // 自定义光标
  customCursor: {
    enable: false,
    remoteVisible: true,
    type: _view__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardCursorType"].pen,
    attributes: '{"url": "", "pox_x": 0, "pox_y": 0 }'
  },
  // 缩放同步模式
  scaleModes: {
    sync: false,
    response: false
  },
  // 笔锋相关因子
  handWritingFactor: {
    step: 0.016,
    max_speed: 1.2,
    min_speed: 0.05,
    max_width_factor: 1.2,
    min_width_factor: 0.5,
    last_size: 0,
    lastX: 0,
    lastY: 0
  },
  // 笔锋上下边
  svgPath: {
    tops: [],
    bottoms: []
  },
  isTouch: isTouch,
  boxPadding: 0,
  textareaBoxPadding: 24,
  textareaHPadding: 0,
  textareaVPadding: 0,
  textareaConBorderWidth: 1,
  lineHeight: 1,
  boxBorderWidth: 2,
  selectedBorderCss: '2px solid #b0b3b8',
  unSelectedBorderCss: '2px solid transparent',
  maxlength: 200,
  scrollbarSize: 20,
  initLaserX: 0,
  initLaserY: 0,
  hiddenLaserX: -100,
  hiddenLaserY: -100,
  hiddenLaserDelay: 5000,
  mouseEvents: {
    down: 'mousedown',
    move: 'mousemove',
    up: 'mouseup',
    leave: 'mouseleave',
    mousedown: 'touchstart',
    mousemove: 'touchmove',
    mouseup: 'touchend',
    mouseleave: 'touchcancel'
  },
  calStandard: {
    sizeWidth: 1280,
    placeWidth: 1280000,
    minFontSize: isTouch ? 1 : 12,
    maxFontSize: 100,
    minLineWidth: 1,
    maxLineWidth: 100
  }
});

/***/ }),

/***/ "./sdk/whiteboard/view/entities/view.ts":
/*!**********************************************!*\
  !*** ./sdk/whiteboard/view/entities/view.ts ***!
  \**********************************************/
/*! exports provided: ZegoWhiteboardError, ZegoWhiteboardTool, ZegoWhiteboardOperationMode, ZegoWhiteboardViewImageType, ZegoWhiteboardViewImageFitMode, ZegoWhiteboardViewScrollDirection, ZegoWhiteboardCursorType, FileType, ActionType, Action, GraphicOperateType, GraphicType, Platform, DrawState, ResultType, TaskStatus, DeleteGraphicAction, ZegoWhiteboardViewAuth, ZegoWhiteboardViewGraphicAuth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileType", function() { return FileType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionType", function() { return ActionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Action", function() { return Action; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphicOperateType", function() { return GraphicOperateType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphicType", function() { return GraphicType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Platform", function() { return Platform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DrawState", function() { return DrawState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultType", function() { return ResultType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskStatus", function() { return TaskStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeleteGraphicAction", function() { return DeleteGraphicAction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewAuth", function() { return ZegoWhiteboardViewAuth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewGraphicAuth", function() { return ZegoWhiteboardViewGraphicAuth; });
/* harmony import */ var _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../code/zh/ZegoExpressEntity */ "./sdk/whiteboard/code/zh/ZegoExpressEntity.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardError", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardTool", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardTool"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardOperationMode", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardOperationMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewImageType", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardViewImageType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewImageFitMode", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardViewImageFitMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewScrollDirection", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardViewScrollDirection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardCursorType", function() { return _code_zh_ZegoExpressEntity__WEBPACK_IMPORTED_MODULE_0__["ZegoWhiteboardCursorType"]; });


var FileType;

(function (FileType) {
  FileType[FileType["PPT"] = 1] = "PPT";
  FileType[FileType["DOC"] = 2] = "DOC";
  FileType[FileType["ELS"] = 4] = "ELS";
  FileType[FileType["PDF"] = 8] = "PDF";
  FileType[FileType["IMG"] = 16] = "IMG";
  FileType[FileType["TXT"] = 32] = "TXT";
  FileType[FileType["PPTH5"] = 512] = "PPTH5";
  FileType[FileType["CUSTOM_H5"] = 4096] = "CUSTOM_H5";
})(FileType || (FileType = {})); // 1:针对单个图元操作 2:针对多个图元操作 4: 其他


var ActionType;

(function (ActionType) {
  ActionType[ActionType["Single"] = 1] = "Single";
  ActionType[ActionType["Multi"] = 2] = "Multi";
  ActionType[ActionType["Other"] = 4] = "Other";
})(ActionType || (ActionType = {})); // 2:update 4:delete，删除指定图元 8:move，移动指定图元 32:create，新增一个图元


var Action;

(function (Action) {
  Action[Action["Append"] = 1] = "Append";
  Action[Action["Update"] = 2] = "Update";
  Action[Action["Delete"] = 4] = "Delete";
  Action[Action["Move"] = 8] = "Move";
  Action[Action["Create"] = 32] = "Create";
})(Action || (Action = {}));

var GraphicOperateType;

(function (GraphicOperateType) {
  GraphicOperateType[GraphicOperateType["Local"] = 0] = "Local";
  GraphicOperateType[GraphicOperateType["Remote"] = 1] = "Remote";
  GraphicOperateType[GraphicOperateType["UnReDo"] = 2] = "UnReDo";
  GraphicOperateType[GraphicOperateType["Reload"] = 3] = "Reload";
})(GraphicOperateType || (GraphicOperateType = {}));

var GraphicType;

(function (GraphicType) {
  GraphicType[GraphicType["Pencil"] = 1] = "Pencil";
  GraphicType[GraphicType["Text"] = 2] = "Text";
  GraphicType[GraphicType["Line"] = 4] = "Line";
  GraphicType[GraphicType["Rect"] = 8] = "Rect";
  GraphicType[GraphicType["Ellipse"] = 16] = "Ellipse";
  GraphicType[GraphicType["Laser"] = 128] = "Laser";
  GraphicType[GraphicType["Image"] = 256] = "Image";
  GraphicType[GraphicType["BgImage"] = 512] = "BgImage";
  GraphicType[GraphicType["RealTime"] = 999] = "RealTime";
  GraphicType[GraphicType["Cursor"] = 1024] = "Cursor";
})(GraphicType || (GraphicType = {}));

var Platform;

(function (Platform) {
  Platform[Platform["Pc"] = 1] = "Pc";
  Platform[Platform["Mobile"] = 2] = "Mobile";
})(Platform || (Platform = {}));

var DrawState;

(function (DrawState) {
  DrawState[DrawState["Init"] = 1] = "Init";
  DrawState[DrawState["Down"] = 2] = "Down";
  DrawState[DrawState["Move"] = 3] = "Move";
  DrawState[DrawState["DownMove"] = 4] = "DownMove";
  DrawState[DrawState["DownMoveUp"] = 5] = "DownMoveUp";
  DrawState[DrawState["DownNoMoveUp"] = 6] = "DownNoMoveUp";
  DrawState[DrawState["Leave"] = 7] = "Leave";
  DrawState[DrawState["DownLeave"] = 8] = "DownLeave"; // 按下离开
})(DrawState || (DrawState = {})); // 图元操作任务相关类型


var ResultType;

(function (ResultType) {
  ResultType[ResultType["success"] = 1] = "success";
  ResultType[ResultType["error"] = 2] = "error";
})(ResultType || (ResultType = {}));

var TaskStatus;

(function (TaskStatus) {
  TaskStatus[TaskStatus["InProgress"] = 1] = "InProgress";
  TaskStatus[TaskStatus["Pending"] = 2] = "Pending";
})(TaskStatus || (TaskStatus = {}));

var DeleteGraphicAction;

(function (DeleteGraphicAction) {
  DeleteGraphicAction[DeleteGraphicAction["BatchSelete"] = 0] = "BatchSelete";
  DeleteGraphicAction[DeleteGraphicAction["ClearPage"] = 1] = "ClearPage";
  DeleteGraphicAction[DeleteGraphicAction["EraserTool"] = 2] = "EraserTool";
})(DeleteGraphicAction || (DeleteGraphicAction = {}));
/**
 * 白板权限
 *
 */


var ZegoWhiteboardViewAuth;

(function (ZegoWhiteboardViewAuth) {
  ZegoWhiteboardViewAuth[ZegoWhiteboardViewAuth["None"] = 0] = "None";
  ZegoWhiteboardViewAuth[ZegoWhiteboardViewAuth["Scale"] = 1] = "Scale";
  ZegoWhiteboardViewAuth[ZegoWhiteboardViewAuth["Scroll"] = 2] = "Scroll";
})(ZegoWhiteboardViewAuth || (ZegoWhiteboardViewAuth = {}));
/**
 * 白板图元权限
 *
 */


var ZegoWhiteboardViewGraphicAuth;

(function (ZegoWhiteboardViewGraphicAuth) {
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["None"] = 0] = "None";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Append"] = 1] = "Append";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Update"] = 2] = "Update";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Delete"] = 4] = "Delete";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Move"] = 8] = "Move";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Clear"] = 16] = "Clear";
  ZegoWhiteboardViewGraphicAuth[ZegoWhiteboardViewGraphicAuth["Create"] = 32] = "Create";
})(ZegoWhiteboardViewGraphicAuth || (ZegoWhiteboardViewGraphicAuth = {}));

/***/ }),

/***/ "./sdk/whiteboard/view/services/base.ts":
/*!**********************************************!*\
  !*** ./sdk/whiteboard/view/services/base.ts ***!
  \**********************************************/
/*! exports provided: ZegoWhiteboardServiceBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardServiceBase", function() { return ZegoWhiteboardServiceBase; });
// 白板server层，负责与后台数据交互
var ZegoWhiteboardServiceBase =
/** @class */
function () {
  function ZegoWhiteboardServiceBase(platform) {
    this.isElectron = false;
    this.isPlayback = false; // 数据流回放

    this.isElectron = platform === 'electron';
  }

  return ZegoWhiteboardServiceBase;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/services/event.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/services/event.ts ***!
  \***********************************************/
/*! exports provided: ZegoDocsEventType, ZegoEventType, ZegoServiceEventType, ZegoSuperBoardEventType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoDocsEventType", function() { return ZegoDocsEventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoEventType", function() { return ZegoEventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoServiceEventType", function() { return ZegoServiceEventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoSuperBoardEventType", function() { return ZegoSuperBoardEventType; });
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__);





var ZegoDocsEventType;

(function (ZegoDocsEventType) {
  ZegoDocsEventType["Upload"] = "onUpload";
  ZegoDocsEventType["LoadFile"] = "onLoadFile";
  ZegoDocsEventType["StepChange"] = "onStepChange";
  ZegoDocsEventType["Scroll"] = "onScroll";
  ZegoDocsEventType["PlayAnimation"] = "onPlayAnimation";
  ZegoDocsEventType["TokenWillExpire"] = "onTokenWillExpire";
})(ZegoDocsEventType || (ZegoDocsEventType = {}));

var ZegoEventType;

(function (ZegoEventType) {
  ZegoEventType["Error"] = "error";
  ZegoEventType["ViewAdd"] = "viewAdd";
  ZegoEventType["ViewRemoved"] = "viewRemoved";
  ZegoEventType["ViewScroll"] = "viewScroll";
  ZegoEventType["ViewScale"] = "viewScale";
  ZegoEventType["WhiteboardAuthChange"] = "whiteboardAuthChange";
  ZegoEventType["WhiteboardGraphicAuthChange"] = "whiteboardGraphicAuthChange";
})(ZegoEventType || (ZegoEventType = {}));

var ZegoServiceEventType;

(function (ZegoServiceEventType) {
  // push
  ZegoServiceEventType["PushAddMod"] = "pushAddMod";
  ZegoServiceEventType["PushRemovedMod"] = "pushRemovedMod";
  ZegoServiceEventType["PushDrawPageGraphics"] = "pushDrawPageGraphics";
  ZegoServiceEventType["PushClearPageGraphics"] = "pushClearPageGraphics";
  ZegoServiceEventType["PushScroll"] = "pushScroll";
  ZegoServiceEventType["PushScale"] = "pushScale";
  ZegoServiceEventType["PushH5ExtraAppended"] = "pushH5ExtraAppended";
  ZegoServiceEventType["PushAuthChange"] = "pushAuthChange";
  ZegoServiceEventType["RemoteDelMod"] = "remoteDelMod"; // pull

  ZegoServiceEventType["GetPageGraphicsList"] = "getPageGraphicsList";
  ZegoServiceEventType["AppendH5Extra"] = "appendH5Extra";
  ZegoServiceEventType["Scroll"] = "scroll";
  ZegoServiceEventType["Scale"] = "scale"; // room

  ZegoServiceEventType["RoomConnected"] = "roomConnected";
  ZegoServiceEventType["RoomDisConnected"] = "roomDisConnected"; // playback

  ZegoServiceEventType["AttachedView"] = "attachedView"; // superboard room

  ZegoServiceEventType["SuperRoomConnected"] = "SuperRoomConnected";
  ZegoServiceEventType["SuperRoomDisConnected"] = "SuperRoomDisConnected"; // SuperLogoutRoom = 'SuperLogoutRoom',

  ZegoServiceEventType["SuperDocsLogoutRoom"] = "SuperDocsLogoutRoom";
})(ZegoServiceEventType || (ZegoServiceEventType = {}));

var ZegoSuperBoardEventType;

(function (ZegoSuperBoardEventType) {
  // 对外的事件
  ZegoSuperBoardEventType["SubViewScrollChanged"] = "superBoardSubViewScrollChanged";
  ZegoSuperBoardEventType["SubViewScaleChanged"] = "superBoardSubViewScaleChanged";
  ZegoSuperBoardEventType["RemoteSubViewAdd"] = "remoteSuperBoardSubViewAdded";
  ZegoSuperBoardEventType["RemoteSubViewRemoved"] = "remoteSuperBoardSubViewRemoved";
  ZegoSuperBoardEventType["RemoteSubViewSwitched"] = "remoteSuperBoardSubViewSwitched";
  ZegoSuperBoardEventType["RemoteSubViewExcelSwitched"] = "remoteSuperBoardSubViewExcelSwitched";
  ZegoSuperBoardEventType["RemoteAuthChange"] = "remoteSuperBoardAuthChanged";
  ZegoSuperBoardEventType["RemoteGraphicAuthChange"] = "remoteSuperBoardGraphicAuthChanged"; // 内部事件

  ZegoSuperBoardEventType["SyncSwitchMod"] = "syncSwitchMod";
  ZegoSuperBoardEventType["RemoteSwitchMod"] = "remoteSwitchMod";
  ZegoSuperBoardEventType["RemoteModAdd"] = "remoteModAdd";
  ZegoSuperBoardEventType["RemoteModRemoved"] = "remoteModRemoved";
  ZegoSuperBoardEventType["SyncSwitchModWithWhiteboardID"] = "SyncSwitchModWithWhiteboardID";
})(ZegoSuperBoardEventType || (ZegoSuperBoardEventType = {}));

var ZegoEventEmitter =
/** @class */
function () {
  function ZegoEventEmitter() {
    var _a;

    this.listeners = (_a = {}, // 公共
    _a[ZegoEventType.Error] = [], // docs
    _a[ZegoDocsEventType.LoadFile] = [], _a[ZegoDocsEventType.Upload] = [], _a[ZegoDocsEventType.Scroll] = [], _a[ZegoDocsEventType.StepChange] = [], _a[ZegoDocsEventType.PlayAnimation] = [], _a[ZegoDocsEventType.TokenWillExpire] = [], // board service
    _a[ZegoServiceEventType.PushAddMod] = [], _a[ZegoServiceEventType.PushRemovedMod] = [], _a[ZegoServiceEventType.PushDrawPageGraphics] = [], _a[ZegoServiceEventType.PushClearPageGraphics] = [], _a[ZegoServiceEventType.PushScroll] = [], _a[ZegoServiceEventType.PushScale] = [], _a[ZegoServiceEventType.PushH5ExtraAppended] = [], _a[ZegoServiceEventType.PushAuthChange] = [], _a[ZegoServiceEventType.GetPageGraphicsList] = [], _a[ZegoServiceEventType.AppendH5Extra] = [], _a[ZegoServiceEventType.Scroll] = [], _a[ZegoServiceEventType.Scale] = [], _a[ZegoServiceEventType.RoomConnected] = [], _a[ZegoServiceEventType.RoomDisConnected] = [], _a[ZegoServiceEventType.AttachedView] = [], _a[ZegoServiceEventType.SuperRoomConnected] = [], _a[ZegoServiceEventType.SuperRoomDisConnected] = [], _a[ZegoServiceEventType.RemoteDelMod] = [], // [ZegoServiceEventType.SuperLogoutRoom]: [],
    _a[ZegoServiceEventType.SuperDocsLogoutRoom] = [], // whiteboard
    _a[ZegoEventType.ViewAdd] = [], _a[ZegoEventType.ViewRemoved] = [], _a[ZegoEventType.ViewScroll] = [], _a[ZegoEventType.ViewScale] = [], _a[ZegoEventType.WhiteboardAuthChange] = [], _a[ZegoEventType.WhiteboardGraphicAuthChange] = [], // superboard
    _a[ZegoSuperBoardEventType.RemoteSubViewAdd] = [], _a[ZegoSuperBoardEventType.RemoteSubViewRemoved] = [], _a[ZegoSuperBoardEventType.RemoteSubViewSwitched] = [], _a[ZegoSuperBoardEventType.RemoteSubViewExcelSwitched] = [], _a[ZegoSuperBoardEventType.RemoteAuthChange] = [], _a[ZegoSuperBoardEventType.RemoteGraphicAuthChange] = [], _a[ZegoSuperBoardEventType.SyncSwitchMod] = [], _a[ZegoSuperBoardEventType.SyncSwitchModWithWhiteboardID] = [], _a[ZegoSuperBoardEventType.RemoteSwitchMod] = [], _a[ZegoSuperBoardEventType.RemoteModAdd] = [], _a[ZegoSuperBoardEventType.RemoteModRemoved] = [], _a[ZegoSuperBoardEventType.SubViewScrollChanged] = [], _a[ZegoSuperBoardEventType.SubViewScaleChanged] = [], _a);
  }

  ZegoEventEmitter.prototype.on = function (event, callBack) {
    var multiple = [ZegoServiceEventType.RoomDisConnected];

    if (!this.listeners[event]) {
      return false;
    }

    if (typeof callBack !== 'function') {
      return false;
    }

    if (multiple.indexOf(event) !== -1) {
      this.listeners[event].indexOf(callBack) == -1 && this.listeners[event].push(callBack);
    } else {
      this.listeners[event][0] = callBack;
    }

    return true;
  };

  ZegoEventEmitter.prototype.off = function (event, callBack) {
    if (!this.listeners[event]) {
      return false;
    }

    var li = this.listeners[event];

    if (callBack) {
      li.splice(li.indexOf(callBack), 1);
    } else {
      this.listeners[event] = [];
    }

    return true;
  };

  ZegoEventEmitter.prototype.emit = function (event) {
    var args = [];

    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }

    this.listeners[event] && this.listeners[event].forEach(function (func) {
      func.apply(void 0, args);
    });
  };

  return ZegoEventEmitter;
}();

/* harmony default export */ __webpack_exports__["default"] = (new ZegoEventEmitter());

/***/ }),

/***/ "./sdk/whiteboard/view/utils/index.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/view/utils/index.ts ***!
  \********************************************/
/*! exports provided: isNumber, createGraphicId, removeElement, getElementChild, calSizeHandle, mapGraphicsData, setAttributeHandle, createSvgElementHandle, simplifyPathData, splitTextHandle, addTextBeginPlace, bindStopsEvents, getOffsetData, getScrollData, transGraphicsData, transColor, transBezierBypointList, createZorderStep, mapHandWritingGraphicsData, isFloatGraphic, isMobile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNumber", function() { return isNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGraphicId", function() { return createGraphicId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeElement", function() { return removeElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getElementChild", function() { return getElementChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calSizeHandle", function() { return calSizeHandle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapGraphicsData", function() { return mapGraphicsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAttributeHandle", function() { return setAttributeHandle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSvgElementHandle", function() { return createSvgElementHandle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simplifyPathData", function() { return simplifyPathData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitTextHandle", function() { return splitTextHandle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addTextBeginPlace", function() { return addTextBeginPlace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bindStopsEvents", function() { return bindStopsEvents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOffsetData", function() { return getOffsetData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScrollData", function() { return getScrollData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transGraphicsData", function() { return transGraphicsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transColor", function() { return transColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transBezierBypointList", function() { return transBezierBypointList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createZorderStep", function() { return createZorderStep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapHandWritingGraphicsData", function() { return mapHandWritingGraphicsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFloatGraphic", function() { return isFloatGraphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return isMobile; });
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.parse-int.js */ "./node_modules/core-js/modules/es.parse-int.js");
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.parse-float.js */ "./node_modules/core-js/modules/es.parse-float.js");
/* harmony import */ var core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ "./node_modules/core-js/modules/es.regexp.to-string.js");
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.string.pad-start.js */ "./node_modules/core-js/modules/es.string.pad-start.js");
/* harmony import */ var core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.string.match.js */ "./node_modules/core-js/modules/es.string.match.js");
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/esm-browser/index.js");
/* harmony import */ var simplify_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! simplify-js */ "./node_modules/simplify-js/simplify.js");
/* harmony import */ var simplify_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(simplify_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var murmurhash_js_murmurhash3_gc__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! murmurhash-js/murmurhash3_gc */ "./node_modules/murmurhash-js/murmurhash3_gc.js");
/* harmony import */ var murmurhash_js_murmurhash3_gc__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(murmurhash_js_murmurhash3_gc__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");























var createGraphicId = function createGraphicId() {
  return "" + murmurhash_js_murmurhash3_gc__WEBPACK_IMPORTED_MODULE_19___default()(uuid__WEBPACK_IMPORTED_MODULE_17__["v4"]());
};

var createZorderStep = function createZorderStep() {
  var num = Math.sqrt(Math.sqrt(+murmurhash_js_murmurhash3_gc__WEBPACK_IMPORTED_MODULE_19___default()(uuid__WEBPACK_IMPORTED_MODULE_17__["v4"]()))) * Math.random() | 0;
  return num > 99 ? num * 0.3 | 0 : num < 3 ? num + Math.random() * 10 | 0 : num;
};

var removeElement = function removeElement(element) {
  if (!element) return;
  var parent = element.parentNode;

  if (parent) {
    parent.removeChild(element);
  } else {
    // @ts-ignore
    element.remove ? element.remove() : element.removeNode();
  }
};

var getElementChild = function getElementChild(element) {
  return element.children || element.childNodes;
}; // 计算图元线条大小时用 viewWidth


var calSizeHandle = function calSizeHandle(size, type, viewWidth, reverse) {
  var _a = _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].calStandard,
      sizeWidth = _a.sizeWidth,
      minFontSize = _a.minFontSize,
      minLineWidth = _a.minLineWidth;
  var result; // formula: viewWidth/sizeWidth = size/standSize

  if (!reverse) {
    result = Math.round(viewWidth * size / sizeWidth);

    if (_entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Text === type) {
      result < minFontSize && (result = minFontSize);
    } else {
      result < minLineWidth && (result = minLineWidth);
    }
  } else {
    result = Math.round(size * sizeWidth / viewWidth);
  }

  return result;
}; // 根据 path point 数组计算 svg path d


var transPathByPointList = function transPathByPointList(pointList) {
  var size = pointList.length,
      k = 0.1,
      // 拟合系数, 数字
  last = size - 4;
  var path = "M" + pointList[0] + ", " + pointList[1];

  for (var i = 0; i < size - 2; i += 2) {
    var x0 = i ? pointList[i - 2] : pointList[0],
        y0 = i ? pointList[i - 1] : pointList[1],
        x1 = pointList[i + 0],
        y1 = pointList[i + 1],
        x2 = pointList[i + 2],
        y2 = pointList[i + 3],
        x3 = i !== last ? pointList[i + 4] : x2,
        y3 = i !== last ? pointList[i + 5] : y2,
        cp1x = Number(x1) + (x2 - x0) / 6 * k,
        cp1y = Number(y1) + (y2 - y0) / 6 * k,
        cp2x = Number(x2) - (x3 - x1) / 6 * k,
        cp2y = Number(y2) - (y3 - y1) / 6 * k;
    path += " C" + cp1x + "," + cp1y + "," + cp2x + "," + cp2y + "," + x2 + "," + y2;
  }

  return path;
}; // 根据绘制起始点计算图元左上角点


var getLeftTopPoint = function getLeftTopPoint(data) {
  var originX = data[0],
      originY = data[1],
      endX = data[2],
      endY = data[3];
  return [Math.min(originX, endX || originX), Math.min(originY, endY || originY)];
}; // 转换成绘制对应图元所需数据


var mapGraphicsData = function mapGraphicsData(type, data) {
  var result;

  switch (type) {
    case _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Pencil:
      result = transPathByPointList(data);
      break;

    case _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Line:
      result = {
        x1: data[0],
        y1: data[1],
        x2: data[2] || data[0],
        y2: data[3] || data[1]
      };
      break;

    case _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Rect:
      var width = Math.abs((data[2] || data[0]) - data[0]) || 1,
          height = Math.abs((data[3] || data[1]) - data[1]) || 1,
          leftTopPlace1 = getLeftTopPoint(data);
      result = {
        x: leftTopPlace1[0],
        y: leftTopPlace1[1],
        width: width,
        height: height
      };
      break;

    case _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Ellipse:
      var halfWidth = Math.abs((data[2] || data[0]) - data[0]) / 2 || 0.5,
          halfHeight = Math.abs((data[3] || data[1]) - data[1]) / 2 || 0.5,
          leftTopPlace2 = getLeftTopPoint(data);
      result = {
        cx: leftTopPlace2[0] + halfWidth,
        cy: leftTopPlace2[1] + halfHeight,
        rx: halfWidth,
        ry: halfHeight
      };
      break;

    default:
      result = '';
      break;
  }

  return result;
}; // 转换成笔锋所需数据


var mapHandWritingGraphicsData = function mapHandWritingGraphicsData(protoGraphic, getSize, viewWidth) {
  var valuePoint = 1; // 有效连点数

  var _a = _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].handWritingFactor,
      step = _a.step,
      max_width_factor = _a.max_width_factor,
      min_width_factor = _a.min_width_factor,
      max_speed = _a.max_speed,
      min_speed = _a.min_speed;
  var _b = _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].handWritingFactor,
      lastX = _b.lastX,
      lastY = _b.lastY;
  var data = protoGraphic.data;
  var len = data.length;
  var isFistPoint = true; // 每次通过接收全量点数据重新计算路径

  _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops = [];
  _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.bottoms = [];
  var point = {
    // 原点右边点，上边
    tx1: 0,
    ty1: 0,
    tx2: 0,
    ty2: 0,
    // 原点左边点，下边
    bx1: 0,
    by1: 0,
    bx2: 0,
    by2: 0,
    // 中点
    mtx1: 0,
    mty1: 0,
    mbx1: 0,
    mby1: 0
  }; // 每个原点计算左右两点

  for (var i = 2; i < len; i += 2) {
    if (i === 2) {
      lastX = data[0];
      lastY = data[1];
    }

    var x1 = lastX,
        y1 = lastY,
        x2 = data[i],
        y2 = data[i + 1];
    var x_dist = x2 - x1,
        y_dist = y2 - y1; // 两点距离计算

    var dist = Math.sqrt(Math.pow(x_dist, 2) + Math.pow(y_dist, 2)); // 舍弃距离小于指定距离的点

    var dist_tolerance = 3 * (viewWidth / 1280) * 2.5;
    if (dist < dist_tolerance) continue;
    valuePoint++; // 起点和末点如果只有两个点，不绘制。

    if (i === len - 2 && valuePoint == 2) return; // 速度计算

    var speed = dist * step;
    if (speed > max_speed) speed = max_speed;
    if (speed < min_speed) speed = min_speed; // 线宽计算

    var maxSize = max_width_factor * getSize;
    var minSize = min_width_factor * getSize; // 多端统一计算线宽公式

    var size = (maxSize - minSize) * (1 - speed / max_speed) + minSize;
    if (size > maxSize) size = maxSize;
    if (size < minSize) size = minSize;
    var xw = void 0,
        xh = void 0; // 计算原点左右两点的偏移

    xw = size / 2 * y_dist / dist, xh = size / 2 * x_dist / dist; // 原点的右边坐标

    point.tx1 = lastX + xw;
    point.ty1 = lastY - xh;
    point.tx2 = data[i] + xw;
    point.ty2 = data[i + 1] - xh; // 原点的左边坐标

    point.bx1 = lastX - xw;
    point.by1 = lastY + xh;
    point.bx2 = data[i] - xw;
    point.by2 = data[i + 1] + xh; // 起点

    if (isFistPoint) {
      point.tx1 = lastX;
      point.ty1 = lastY;
      point.bx1 = lastX;
      point.by1 = lastY;
    } // 计算两点之间的中点作为连接点，原本计算出来的点作为控制点


    point.mtx1 = (point.tx1 + point.tx2) / 2;
    point.mty1 = (point.ty1 + point.ty2) / 2;
    point.mbx1 = (point.bx1 + point.bx2) / 2;
    point.mby1 = (point.by1 + point.by2) / 2; // 第一个点

    if (isFistPoint) {
      _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.push("M" + lastX + " " + lastY + " L" + point.mtx1 + " " + point.mty1);
      _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.bottoms.unshift("Q" + point.bx2 + " " + point.by2 + " " + point.mbx1 + " " + point.mby1 + " L" + lastX + " " + lastY);
    } else {
      if (_entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.join('').indexOf('M') < 0) {
        _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.push("M" + point.mtx1 + " " + point.mty1);
      }

      if (i === len - 2) {
        // 最后一个点连接
        var e_x1 = data[len - 2],
            e_y1 = data[len - 1];

        if (speed === min_speed) {
          _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.push("Q" + e_x1 + " " + e_y1 + " " + e_x1 + " " + e_y1);
        } else {
          _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.push("Q" + point.tx1 + " " + point.ty1 + " " + e_x1 + " " + e_y1);
        }
      } else {
        // 中间使用贝塞尔曲线连接
        _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.push("Q" + point.tx1 + " " + point.ty1 + " " + point.mtx1 + " " + point.mty1);
        _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.bottoms.unshift("Q" + point.bx2 + " " + point.by2 + " " + point.mbx1 + " " + point.mby1);
      }
    }

    lastX = data[i];
    lastY = data[i + 1];
    isFistPoint = false;
  }

  var path = _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.tops.concat(_entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].svgPath.bottoms).join(' ');
  return path;
}; // 批量设置 dom 属性


var setAttributeHandle = function setAttributeHandle(el, attrDataList) {
  attrDataList.forEach(function (item) {
    el.setAttribute(item.attr, item.value);
  });
}; // 创建svg元素


var createSvgElementHandle = function createSvgElementHandle(svgDomId, graphicDomId, tagName, zorder) {
  var svgDom = document.querySelector("#" + svgDomId);
  var graphicDom;

  if (svgDom) {
    zorder && svgDom.setAttribute('data-z', zorder + '');
    graphicDom = svgDom.querySelector("#" + graphicDomId);
    return [graphicDom];
  } else {
    svgDom = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    var gDom = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    graphicDom = document.createElementNS('http://www.w3.org/2000/svg', tagName);
    svgDom.id = svgDomId;
    svgDom.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
    svgDom.setAttribute('version', '1.1');
    zorder && svgDom.setAttribute('data-z', zorder + '');
    graphicDom.id = graphicDomId;
    gDom.appendChild(graphicDom);
    svgDom.appendChild(gDom);
    return [graphicDom, svgDom];
  }
}; // 简化路径，并返回简化后pointList [x1, y1, x2, y2...]


var simplifyPathData = function simplifyPathData(pointList, tolerance) {
  if (tolerance === void 0) {
    tolerance = 1;
  }

  var result = [];
  var simplifyPoints = []; // [x1, y1, x2, y2...] -> [{ x: x1, y: y1 }, { x: x2, y: y2 }...]

  pointList.forEach(function (item, key, arr) {
    key % 2 === 0 && simplifyPoints.push({
      x: item,
      y: arr[key + 1]
    });
  }); // simplify(points [Array], tolerance [Number], highQuality [Boolean])

  simplify_js__WEBPACK_IMPORTED_MODULE_18___default()(simplifyPoints, tolerance).forEach(function (element) {
    result = result.concat([element.x, element.y]);
  });
  return result;
}; // 从data中拆分begin点


var splitTextHandle = function splitTextHandle(data) {
  var arr = data.split(',');
  return {
    beginX: arr[0],
    beginY: arr[1],
    text: arr.slice(2).join(',')
  };
}; // 从data中添加begin点


var addTextBeginPlace = function addTextBeginPlace(data, beginX, beginY) {
  return parseInt(beginX) + "," + parseInt(beginY) + "," + data;
};

var bindStopsEvents = function bindStopsEvents(dom, eventList) {
  // event stop bubbling
  eventList.forEach(function (element) {
    dom.addEventListener(element, function (event) {
      if (event.stopPropagation) {
        event.stopPropagation();
      } else {
        event.cancelBubble = true;
      }
    });
  });
};

var getOffsetData = function getOffsetData(conDom) {
  var offsetTop = 0,
      offsetLeft = 0;

  if (conDom) {
    offsetTop += conDom.offsetTop;
    offsetLeft += conDom.offsetLeft;

    while (conDom.offsetParent) {
      offsetTop += conDom.offsetParent.offsetTop;
      offsetLeft += conDom.offsetParent.offsetLeft;
      conDom = conDom.offsetParent;
    }
  }

  return {
    offsetTop: offsetTop,
    offsetLeft: offsetLeft
  };
};

var getScrollData = function getScrollData(conDom) {
  var scrollTop = 0,
      scrollLeft = 0;

  if (conDom) {
    scrollTop += conDom.scrollTop;
    scrollLeft += conDom.scrollLeft;

    while (conDom.parentNode) {
      scrollTop += conDom.parentNode.scrollTop || 0;
      scrollLeft += conDom.parentNode.scrollLeft || 0;
      conDom = conDom.parentNode;
    }
  }

  return {
    scrollTop: scrollTop,
    scrollLeft: scrollLeft
  };
}; // 处理数据 -> 推送


var transGraphicsData = function transGraphicsData(graphicList, action) {
  var actionType = graphicList.length > 1 ? _entities_view__WEBPACK_IMPORTED_MODULE_21__["ActionType"].Multi : _entities_view__WEBPACK_IMPORTED_MODULE_21__["ActionType"].Single;
  var sendData = JSON.parse(JSON.stringify(graphicList));
  sendData.forEach(function (item) {
    item.action_type = actionType;
    action && (item.action = action); // 删除多余字段

    delete item.selected;
    delete item.fontSize;
    delete item.bgColor;
  });
  return sendData;
}; // color：rgba转16进制


var transRgbTo16 = function transRgbTo16(colorRgba) {
  // 16进制则直接返回（#fff）
  if (colorRgba.indexOf('#') === 0) {
    return colorRgba;
  }

  var values = colorRgba.replace(/rgba?/, '').replace(/\(/, '').replace(/\)/, '').replace(/[\s+]/g, '').split(',');
  var a = parseFloat(values[3] || '1'),
      r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255),
      g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255),
      b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);
  return '#' + ('0' + r.toString(16)).slice(-2) + ('0' + g.toString(16)).slice(-2) + ('0' + b.toString(16)).slice(-2);
}; // color转换（ARGB<->16进制）


var transColor = function transColor(color, remote) {
  if (!remote) {
    color = transRgbTo16(color); // #0044ff -> 0xff0044ff -> 4278207743  默认透明度1
    // @ts-ignore

    return parseInt("0xFF" + color.split('#')[1]);
  } else {
    // 4278207743 -> ff0044ff -> #0044ff
    if (!color) return _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].basicState.color; // @ts-ignore

    color = color.toString(16);
    return "#" + color.slice(2).padStart(6, '0');
  }
};

var isNumber = function isNumber(val) {
  return typeof val === 'number' && !isNaN(val);
}; // canvas 截图相关
// 根据 path point 数组计算 canvas 三次贝塞尔曲线的六个坐标


var transBezierBypointList = function transBezierBypointList(pointList) {
  var size = pointList.length,
      k = 0.1,
      // 拟合系数, 数字
  last = size - 4;
  var moveTo = [pointList[0], pointList[1]];
  var path = [];

  for (var i = 0; i < size - 2; i += 2) {
    var x0 = i ? pointList[i - 2] : pointList[0],
        y0 = i ? pointList[i - 1] : pointList[1],
        x1 = pointList[i + 0],
        y1 = pointList[i + 1],
        x2 = pointList[i + 2],
        y2 = pointList[i + 3],
        x3 = i !== last ? pointList[i + 4] : x2,
        y3 = i !== last ? pointList[i + 5] : y2,
        cp1x = Number(x1) + (x2 - x0) / 6 * k,
        cp1y = Number(y1) + (y2 - y0) / 6 * k,
        cp2x = Number(x2) - (x3 - x1) / 6 * k,
        cp2y = Number(y2) - (y3 - y1) / 6 * k;
    path.push([cp1x, cp1y, cp2x, cp2y, x2, y2]);
  }

  return {
    moveTo: moveTo,
    path: path
  };
};

var isFloatGraphic = function isFloatGraphic(graphic) {
  var type = graphic.type,
      attributes = graphic.attributes;
  return type == _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].Pencil || type == _entities_view__WEBPACK_IMPORTED_MODULE_21__["GraphicType"].RealTime ? JSON.parse(attributes || _entities_store__WEBPACK_IMPORTED_MODULE_20__["default"].basicState.attributes).stroke : false;
};

var isMobile = function isMobile() {
  if (window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) {
    return true; // 移动端
  } else {
    return false; // PC端
  }
};



/***/ }),

/***/ "./sdk/whiteboard/view/utils/store.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/view/utils/store.ts ***!
  \********************************************/
/*! exports provided: getToolType, getBrushColor, getBrushSize, getFontSize, isFontBold, isFontItalic, getBackgroundColor, isHandwritingEnabled, setToolType, setBrushColor, setBrushSize, setFontSize, setFontBold, setFontItalic, setBackgroundColor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getToolType", function() { return getToolType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrushColor", function() { return getBrushColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrushSize", function() { return getBrushSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFontSize", function() { return getFontSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFontBold", function() { return isFontBold; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFontItalic", function() { return isFontItalic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBackgroundColor", function() { return getBackgroundColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isHandwritingEnabled", function() { return isHandwritingEnabled; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setToolType", function() { return setToolType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setBrushColor", function() { return setBrushColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setBrushSize", function() { return setBrushSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFontSize", function() { return setFontSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFontBold", function() { return setFontBold; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFontItalic", function() { return setFontItalic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setBackgroundColor", function() { return setBackgroundColor; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.bold.js */ "./node_modules/core-js/modules/es.string.bold.js");
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.italics.js */ "./node_modules/core-js/modules/es.string.italics.js");
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ "./node_modules/core-js/modules/es.object.keys.js");
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");










var checkColor = function checkColor(color) {
  return /^#[0-9a-fA-F]{6}|rgba?\(*.+\d\)$/.test(color);
};

var checkBrushSize = function checkBrushSize(thin) {
  return /^([1-9]|[1-9]\d|100)$/.test("" + thin) && typeof thin === 'number';
};

var checkFontSize = function checkFontSize(thin) {
  return /^([1-9]|[1-9]\d|100)$/.test("" + thin) && typeof thin === 'number'; // return /^([1-9]|[1-9]\d|100)$/.test(`${thin}`) && thin >= 12;
};

function getToolType() {
  return _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.type || null;
} // 画笔颜色

function getBrushColor() {
  return _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.color;
} // 画笔大小

function getBrushSize() {
  return _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.size;
} // 文本字体大小

function getFontSize() {
  return _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.fontSize;
} // 文本是否加粗

function isFontBold() {
  return JSON.parse(_entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes).bold;
} // 文本是否斜体

function isFontItalic() {
  return JSON.parse(_entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes).italic;
} // 获取白板背景色，返回color：16进制、rgba

function getBackgroundColor() {
  return _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.bgColor;
} // 是否开启笔锋

function isHandwritingEnabled() {
  return JSON.parse(_entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes).stroke;
}
function setToolType(type) {
  if (!type || Object.keys(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardTool"]).includes(String(type))) {
    _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.type = type || 0;
    return true;
  } else {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
    return false;
  }
} // 设置画笔颜色

function setBrushColor(color) {
  if (!checkColor(color)) {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误：color仅支持16进制、rgba', true);
    return false;
  }

  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.color = color;
  return true;
} // 设置画笔粗细

function setBrushSize(size) {
  if (!checkBrushSize(size)) {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误: 画笔粗细为100内的正整数', true);
    return false;
  }

  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.size = size;
  return true;
} // 设置文本大小

function setFontSize(size) {
  if (!checkFontSize(size)) {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误: 文本大小为100内的正整数', true);
    return false;
  }

  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.fontSize = size;
  return true;
} // 设置文本加粗

function setFontBold(bold) {
  if (typeof bold !== 'boolean') {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
    return false;
  }

  var attributes = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes;
  var attributesData = JSON.parse(attributes);
  attributesData.bold = bold;
  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes = JSON.stringify(attributesData);
  return true;
} // 设置文本斜体

function setFontItalic(italic) {
  if (typeof italic !== 'boolean') {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
    return false;
  }

  var attributes = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes;
  var attributesData = JSON.parse(attributes);
  attributesData.italic = italic;
  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.attributes = JSON.stringify(attributesData);
  return true;
} // 设置白板背景色，color支持16进制、rgba

function setBackgroundColor(color) {
  if (!checkColor(color)) {
    Object(_entities_error__WEBPACK_IMPORTED_MODULE_7__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_8__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误: color仅支持16进制、rgba', true);
    return false;
  }

  _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState.bgColor = color;
  return true;
}

/***/ }),

/***/ "./sdk/whiteboard/view/views/background.ts":
/*!*************************************************!*\
  !*** ./sdk/whiteboard/view/views/background.ts ***!
  \*************************************************/
/*! exports provided: Background */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Background", function() { return Background; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.string.starts-with.js */ "./node_modules/core-js/modules/es.string.starts-with.js");
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }



















var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




 // import { getLogAction, Logger } from '../../../docsview/view/Logger';
// const logAction = getLogAction.bind(null, 'wb.v.');



var Background =
/** @class */
function () {
  function Background(toolInstance, parentDom) {
    this.isRemote = false;
    this.backgroundInfo = {
      image: '',
      pos: '',
      mode: 0
    };
    this.toolInstance = toolInstance;
    this.createContainer(parentDom);
  }

  Background.prototype.createContainer = function (parentDom) {
    var _a;

    if (this.graphicsBgConNode) {
      this.graphicsBgConNode.innerHTML = '';
    }

    var _b = this.toolInstance,
        whiteboardID = _b.whiteboardID,
        viewInfo = _b.viewInfo;
    var _c = _entities_store__WEBPACK_IMPORTED_MODULE_17__["default"].reservedPrefix,
        graphicsBgContainer = _c.graphicsBgContainer,
        graphicsBgImageContainer = _c.graphicsBgImageContainer;
    var dom = document.createElement('div');
    dom.id = "" + graphicsBgContainer + whiteboardID;

    for (var i = 0, l = viewInfo.pageCount || 1; i < l; i++) {
      var ele = document.createElement('div');
      ele.id = graphicsBgImageContainer + i + whiteboardID;
      dom.appendChild(ele);
    }

    this.graphicsBgConNode = dom;
    var direction = this.toolInstance.viewInfo.direction;

    if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewScrollDirection"].Vertical) {
      this.graphicsBgConNode.style.flexDirection = 'column';
    }

    (_a = parentDom.firstChild) === null || _a === void 0 ? void 0 : _a.before(dom);
  };

  Background.prototype.drawBackgroundImage = function (url, mode) {
    var _this = this;

    var pos = '';

    switch (mode) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewImageFitMode"].ZegoWhiteboardViewImageFitModeLeft:
        pos = 'left';
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewImageFitMode"].ZegoWhiteboardViewImageFitModeRight:
        pos = 'right';
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewImageFitMode"].ZegoWhiteboardViewImageFitModeBottom:
        pos = 'bottom';
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewImageFitMode"].ZegoWhiteboardViewImageFitModeTop:
        pos = 'top';
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardViewImageFitMode"].ZegoWhiteboardViewImageFitModeCenter:
        pos = 'center';
        break;
    } // 白板截图 canvas 跨域污染问题，保证首次访问 OSS 资源时请求头里有 Origin 字段


    var img = new Image();
    img.setAttribute('crossOrigin', 'anonymous');

    img.onload = function () {
      var backgrounds = _this.graphicsBgConNode.childNodes;

      for (var i = 0, l = backgrounds.length; i < l; i++) {
        var node = backgrounds[i];
        node.style.backgroundImage = "url(" + url + ")";
        node.style.backgroundPosition = pos;
        node.style.backgroundRepeat = 'no-repeat';
        node.style.backgroundSize = 'contain';
      }

      _this.backgroundInfo.image = url;
      _this.backgroundInfo.pos = pos;
      _this.backgroundInfo.mode = mode;
    };

    img.src = url;
  };

  Background.prototype.clearBackgroundImageLocal = function () {
    var _this = this;

    var graphicList = this.toolInstance.graphicList;
    var graphics = graphicList.filter(function (g) {
      return g.type === _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage;
    });
    this.backgroundInfo.image = '';
    this.backgroundInfo.pos = '';
    this.backgroundInfo.mode = 0;
    graphics.map(function (g) {
      _this.toolInstance.deleteHandle(g.graphic_id);
    });
    var backgrounds = this.graphicsBgConNode.childNodes;

    for (var i = 0, l = backgrounds.length; i < l; i++) {
      var node = backgrounds[i];
      node.style.backgroundImage = 'none';
    }
  };

  Background.prototype.backgroundImageUpdateToRemote = function (graphic, isCreate) {
    if (!this.isRemote) {
      var action = isCreate ? _entities_view__WEBPACK_IMPORTED_MODULE_18__["Action"].Update : _entities_view__WEBPACK_IMPORTED_MODULE_18__["Action"].Create;
      this.toolInstance.updateToRemoteNewHandle([graphic], action);
    } else {
      this.isRemote = false;
    }
  };

  Background.prototype.updateToLocal = function (isRemote) {
    this.isRemote = isRemote;
    return this;
  };

  Background.prototype.setBackgroundColor = function (color) {
    this.graphicsBgConNode.style.backgroundColor = color;
  };

  Background.prototype.setBackgroundImage = function (address, mode, listener) {
    var _this = this;

    if (!address || mode > 4) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
      return Promise.reject(error);
    }

    if (!this.toolInstance.enableDraw) return Promise.reject({});

    if (!this.toolInstance.getUserAuth().create) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
      return Promise.reject(error);
    }

    var isUpdate = !!this.backgroundInfo.image;
    var bgGraphic = this.toolInstance.graphicList.find(function (g) {
      return g.type == _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage;
    });

    if (isUpdate && bgGraphic && !this.toolInstance.getUserAuth().update && bgGraphic.creator_id !== this.toolInstance.getUserID()) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic);
      return Promise.reject(error);
    }

    var limit = 10 * 1024 * 1024; // 网络图片

    if (typeof address === 'string') {
      var url_1 = address;

      if (!url_1.startsWith('https://')) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl);
        return Promise.reject(error);
      } // 检查网络图片内容大小


      return new Promise(function (resolve, reject) {
        var flag = true;
        var xhr = new XMLHttpRequest();
        xhr.open('HEAD', url_1, true);

        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4) {
            if (xhr.status != 200) {
              flag = false;
              var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
              return reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(code));
            }

            var mediaType_1 = (xhr.getResponseHeader('Content-Type') || '').replace('image/', '');
            var size = +xhr.getResponseHeader('Content-Length');

            if (!'jpg,jpeg,png'.includes(mediaType_1)) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
              return reject(error);
            }

            if (size > limit) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
              return reject(error);
            }

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.setBackgroundImage', JSON.stringify({
              params: {
                address: address
              }
            }));

            _this.addBackgroundImageGraphic(url_1, mode);
          }
        };

        xhr.onerror = function () {
          if (flag) {
            var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
            reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(code));
          }
        };

        xhr.send(null);
      });
    }

    if (this.toolInstance.serviceHandle.isElectron) {
      if (_typeof(address) == 'object') {
        address = address;

        if (!/(\.jpg|\.jpeg|\.png)$/.test(address.path)) {
          var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
          return Promise.reject(error);
        }

        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.setBackgroundImage', JSON.stringify({
          params: {
            address: address.path
          }
        }));
        return this.toolInstance.serviceHandle.uploadImage(address.path, listener).then(function (res) {
          return _this.addBackgroundImageGraphic(res, mode);
        });
      }
    } // 上传本地图片


    address = address;
    var mediaType = address.type.replace('image/', '');

    if (!'jpg,jpeg,png'.includes(mediaType)) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
      return Promise.reject(error);
    }

    if (address.size > limit) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
      return Promise.reject(error);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.setBackgroundImage', JSON.stringify({
      params: {
        address: address.name
      }
    }));
    return this.toolInstance.serviceHandle.uploadImage(address, listener).then(function (res) {
      return _this.addBackgroundImageGraphic(res, mode);
    });
  };

  Background.prototype.remoteAddBackgroundImageGraphic = function (graphic) {
    var graphicList = this.toolInstance.graphicList;
    var bgImageGraphic = graphicList.find(function (g) {
      return g.type === _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage;
    });

    if (!bgImageGraphic) {
      graphicList.push(graphic);
    } else {
      bgImageGraphic = Object.assign(bgImageGraphic, graphic);
      this.toolInstance.setDataToGraphicList(bgImageGraphic.graphic_id, {
        data: bgImageGraphic.data
      });
    }

    var _a = graphic.data,
        url = _a.url,
        fit_mode = _a.fit_mode;
    this.drawBackgroundImage(url, fit_mode);
  };

  Background.prototype.addBackgroundImageGraphic = function (url, mode) {
    var graphicList = this.toolInstance.graphicList;
    var data = {
      x: 0,
      y: 0,
      ex: 0,
      ey: 0,
      url: url,
      fit_mode: mode,
      hash: ''
    };
    var id = Object(_utils__WEBPACK_IMPORTED_MODULE_19__["createGraphicId"])();
    var bgImageGraphic = graphicList.find(function (g) {
      return g.type === _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage;
    });
    var isCreate = !!bgImageGraphic;

    if (!bgImageGraphic) {
      bgImageGraphic = __assign(__assign({
        graphic_id: id,
        operate_id: id,
        creator_id: this.toolInstance.getUserID()
      }, _entities_store__WEBPACK_IMPORTED_MODULE_17__["default"].basicState), {
        type: _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage,
        x: 0,
        y: 0,
        initX: 0,
        initY: 0,
        data: data,
        oldData: {},
        zorder: 0,
        layer: 1,
        is_end_draw: true
      });
      var graphic = JSON.parse(JSON.stringify(bgImageGraphic));
      graphicList.push(graphic);
    } else {
      var oldData = bgImageGraphic.data;
      bgImageGraphic = __assign(__assign({}, bgImageGraphic), {
        data: data,
        oldData: oldData,
        operate_id: Object(_utils__WEBPACK_IMPORTED_MODULE_19__["createGraphicId"])()
      });
      this.toolInstance.setDataToGraphicList(bgImageGraphic.graphic_id, {
        data: data
      });
    }

    this.drawBackgroundImage(url, mode);
    this.backgroundImageUpdateToRemote(bgImageGraphic, isCreate);
    return Promise.resolve(url);
  };

  Background.prototype.clearBackgroundImage = function () {
    return __awaiter(this, void 0, void 0, function () {
      var bgGraphic;
      return __generator(this, function (_a) {
        if (this.isRemote) {
          this.clearBackgroundImageLocal();
          this.isRemote = false;
          return [2
          /*return*/
          ];
        }

        if (!this.toolInstance.enableDraw) return [2
        /*return*/
        ];
        bgGraphic = this.toolInstance.graphicList.find(function (g) {
          return g.type == _entities_view__WEBPACK_IMPORTED_MODULE_18__["GraphicType"].BgImage;
        });

        if (this.backgroundInfo.image && bgGraphic && !this.toolInstance.getUserAuth()["delete"] && bgGraphic.creator_id !== this.toolInstance.getUserID()) {
          Object(_entities_error__WEBPACK_IMPORTED_MODULE_20__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_18__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthDeleteGraphic);
          return [2
          /*return*/
          ];
        }

        if (bgGraphic) {
          bgGraphic.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_19__["createGraphicId"])();
          this.clearBackgroundImageLocal();
          this.toolInstance.updateToRemoteNewHandle([bgGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_18__["Action"].Delete);
        }

        return [2
        /*return*/
        ];
      });
    });
  };

  return Background;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/cursor.ts":
/*!*********************************************!*\
  !*** ./sdk/whiteboard/view/views/cursor.ts ***!
  \*********************************************/
/*! exports provided: Cursor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cursor", function() { return Cursor; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _view_services_event__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");











var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};









var Cursor =
/** @class */
function () {
  function Cursor(toolInstance) {
    var _a;

    var _this = this;

    this.defaultCursorMap = (_a = {}, _a[_entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen] = {
      url: 'https://storage.zego.im/goclass/wbCursor/defaultCursor.png',
      offsetX: 0,
      offsetY: 18
    }, _a);
    this.defaultCursorPen = this.defaultCursorMap[_entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState.type];
    this.authFlag = true;
    this.roomFlag = true;

    this.mousemoveHandle = function (event) {
      // Safari 浏览器新建白板会多一次触发
      if (!_this.cursorInied) {
        _this.cursorInied = true;
        return;
      }

      var roomState = _this.toolInstance.serviceHandle.getRoomState();

      if (roomState === 'DISCONNECTED') {
        _this.toolInstance.whiteboardNode.style.cursor = 'initial'; // 只抛出一次错误

        if (_this.roomFlag) {
          Object(_entities_error__WEBPACK_IMPORTED_MODULE_13__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoLoginRoom);
          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_15__["Logger"].getInstance().warn(['Whiteboard_View'], 'cursor.mousemoveHandle', 'room state is DISCONNECTED');
        }

        _this.roomFlag = false;
        return;
      } // 用户无创建图元权限


      if (!_this.toolInstance.getUserAuth().create) {
        // move 无权限时只抛出一次错误
        _this.authFlag && Object(_entities_error__WEBPACK_IMPORTED_MODULE_13__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
        _this.authFlag = false;
        return;
      }

      var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
      var cursorAttr = JSON.parse(customCursor.attributes);

      if (!customCursor.enable || !cursorAttr.url || _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState.type !== _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen) {
        _this.hide();

        return;
      } //pc 端自定义光标修改系统样式


      !Object(_utils__WEBPACK_IMPORTED_MODULE_11__["isMobile"])() && _this.show();

      _this.toolInstance.updateOffsetAndScrollHandle();

      var point = _this.getMouseChangedPoint(event);

      var cursorData = _this.addCursorHandle(undefined, point);

      cursorData.data = [point.clientX, point.clientY];
      var attributes = JSON.parse(cursorData.attributes);
      attributes.cursor = __assign({
        type: _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.type
      }, cursorAttr);
      attributes.hidden = false;
      cursorData.attributes = JSON.stringify(attributes);
      cursorData.is_end_draw = false;

      _this.drawGraphicsHandle(cursorData, true); // this.switched = false;


      if (!_this.sendTimer) {
        _this.sendTimer = window.setTimeout(function () {
          _this.toolInstance.updateToRemoteNewHandle([_this.calCursorPlaceHandle(cursorData)], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update, true, {
            isUndoAndRedo: true
          }, void 0, function (err) {
            console.warn('======move error'); // this.removeEventsHandle();
          });

          clearTimeout(_this.sendTimer);
          _this.sendTimer = null;
        }, 100);
      }

      if (_this.hideTimer) {
        clearTimeout(_this.hideTimer);
        _this.hideTimer = null;
      }

      _this.hideTimer = window.setTimeout(function () {
        _this.hide();
      }, 3000);
    };

    this.mouseleaveHandle = function () {
      if (!_this.toolInstance.getUserAuth().create) return;

      _this.hide();
    };

    this.toolInstance = toolInstance;
    this.init();
    this.bindEventsHandle();
  }

  Cursor.prototype.init = function () {
    var _this = this;

    this.cursorInied = false;
    var cursor = this.defaultCursorMap[_entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState.type];
    var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
    var attributes = JSON.parse(customCursor.attributes);

    if (!attributes.url) {
      attributes.url = cursor.url;
      attributes.pox_x = cursor.offsetX;
      attributes.pox_y = cursor.offsetY;
      customCursor.attributes = JSON.stringify(attributes);
    }

    _view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].on(_view_services_event__WEBPACK_IMPORTED_MODULE_14__["ZegoServiceEventType"].RoomDisConnected, function () {
      _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState.type = _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen;
      _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor = {
        enable: false,
        remoteVisible: true,
        type: _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardCursorType"].pen,
        attributes: '{"url": "", "pox_x": 0, "pox_y": 0 }'
      };
      _this.toolInstance.whiteboardNode.style.cursor = 'initial';
      clearTimeout(_this.sendTimer);
      _this.sendTimer = null;
      clearTimeout(_this.hideTimer);
      _this.hideTimer = null;
    });
    _view_services_event__WEBPACK_IMPORTED_MODULE_14__["default"].on(_view_services_event__WEBPACK_IMPORTED_MODULE_14__["ZegoServiceEventType"].RemoteDelMod, function () {
      // this.switched = true;
      clearTimeout(_this.sendTimer);
      _this.sendTimer = null;
      clearTimeout(_this.hideTimer);
      _this.hideTimer = null;
    });
  };

  Cursor.prototype.bindEventsHandle = function () {
    var mouseEvents = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].mouseEvents; // this.cursorConNode = null;

    this.toolInstance.toolAddEL(this.toolInstance.whiteboardNode, mouseEvents.move, this.mousemoveHandle);
    this.toolInstance.toolAddEL(this.toolInstance.whiteboardNode, mouseEvents.leave, this.mouseleaveHandle);
  };

  Cursor.prototype.removeEventsHandle = function () {
    var userId = this.toolInstance.getUserID();
    this.toolInstance.graphicList.splice(this.toolInstance.graphicList.findIndex(function (item) {
      return item.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Cursor && item.creator_id === userId;
    }), 1);
  };

  Cursor.prototype.transLocationHandle = function (point) {
    // 不考虑白板缩放、拖拽、滚动
    var clientX = point.clientX,
        clientY = point.clientY;
    var _a = this.toolInstance,
        offsetData = _a.offsetData,
        scrollData = _a.scrollData;
    var offsetLeft = offsetData.offsetLeft,
        offsetTop = offsetData.offsetTop;
    var scrollTop = scrollData.scrollTop,
        scrollLeft = scrollData.scrollLeft; // 减去自身（zego-whiteboard-con、zego-docsview-con）的offset、scroll

    var _b = this.toolInstance.conNode,
        scrollLeft_ = _b.scrollLeft,
        scrollTop_ = _b.scrollTop;
    var result = {
      clientX: Math.round(clientX - offsetLeft + scrollLeft - scrollLeft_),
      clientY: Math.round(clientY - offsetTop + scrollTop - scrollTop_)
    };
    return result;
  };

  Cursor.prototype.getMouseChangedPoint = function (event) {
    var result;

    if (event instanceof MouseEvent) {
      var _a = event,
          clientX = _a.clientX,
          clientY = _a.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      });
    } else {
      var _b = event.changedTouches[0],
          clientX = _b.clientX,
          clientY = _b.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      });
    }

    return result;
  };

  Cursor.prototype.toggleOtherCursorHandle = function (protoGraphic) {
    var cursorCon = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].reservedPrefix.cursorCon;
    var id = "" + cursorCon + protoGraphic.graphic_id;
    var cursorConNode = this.toolInstance.whiteboardNode.querySelector("#" + id);

    if (cursorConNode) {
      var remoteVisible = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.remoteVisible;
      cursorConNode.style.display = remoteVisible ? 'block' : 'none';
      return !remoteVisible;
    }

    return false;
  };

  Cursor.prototype.addCursorHandle = function (protoGraphic, point) {
    var _this = this;

    var graphicList = this.toolInstance.graphicList;

    if (!protoGraphic) {
      // 查找自己的光标
      var cursorData = this.findSelfCursorHandle();
      if (cursorData) return cursorData; // @ts-ignore

      protoGraphic = __assign(__assign({
        graphic_id: Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createGraphicId"])(),
        creator_id: this.toolInstance.getUserID(),
        operate_id: Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createGraphicId"])()
      }, _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState), {
        type: _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Cursor,
        x: 0,
        y: 0,
        px: 0,
        py: 0,
        data: [],
        layer: 2,
        size: 0,
        zorder: this.toolInstance.serviceHandle.createZorder(),
        is_end_draw: false
      });
    }

    protoGraphic = protoGraphic;
    protoGraphic.data = [(point === null || point === void 0 ? void 0 : point.clientX) || 0, (point === null || point === void 0 ? void 0 : point.clientY) || 0];
    var attributes = JSON.parse(protoGraphic.attributes);
    var cursorAttr = JSON.parse(_entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.attributes);
    attributes.cursor = __assign({
      type: _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.type
    }, cursorAttr);
    protoGraphic.attributes = JSON.stringify(attributes);
    graphicList.push(protoGraphic);
    this.drawGraphicsHandle(protoGraphic, true);
    this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Create, true, {
      isUndoAndRedo: true
    }, void 0, function (err) {
      _this.removeEventsHandle();
    });
    return protoGraphic;
  };

  Cursor.prototype.findSelfCursorHandle = function (graphicID) {
    var userId = this.toolInstance.getUserID();
    var cursorData = this.toolInstance.graphicList.find(function (item) {
      return graphicID ? item.graphic_id === graphicID : item.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Cursor && item.creator_id === userId;
    });
    return cursorData;
  };

  Cursor.prototype.drawGraphicsHandle = function (protoGraphic, local) {
    if (!Object(_utils__WEBPACK_IMPORTED_MODULE_11__["isMobile"])() && local) {
      return;
    }

    var userId = this.toolInstance.getUserID();
    var graphic_id = protoGraphic.graphic_id,
        creator_id = protoGraphic.creator_id;
    if (creator_id === userId) return;
    var attr = JSON.parse(protoGraphic.attributes);

    if (!attr) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_15__["Logger"].getInstance().info(['Whiteboard_View'], 'cursor.drawGraphicsHandle', 'no attr');
      return;
    }

    var cursor = attr.cursor;

    if (creator_id !== userId) {
      var hidden = this.toggleOtherCursorHandle(protoGraphic);

      if (hidden) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_15__["Logger"].getInstance().info(['Whiteboard_View'], 'cursor.drawGraphicsHandle', '对端隐藏的光标');
        return;
      }
    } else {
      if (!this.toolInstance.getUserAuth().create) {
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_15__["Logger"].getInstance().info(['Whiteboard_View'], 'cursor.drawGraphicsHandle', '无创建图元权限');
        this.hide();
        return;
      }
    }

    var whiteboardNode = this.toolInstance.whiteboardNode;
    var cursorCon = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].reservedPrefix.cursorCon;
    var cursorConNode = whiteboardNode.querySelector("#" + cursorCon + graphic_id);

    if (!cursorConNode) {
      var id = "" + cursorCon + graphic_id;
      cursorConNode = document.createElement('div');
      cursorConNode = cursorConNode;
      cursorConNode.id = id;
      var image_1 = new Image();
      image_1.setAttribute('crossOrigin', 'anonymous');

      image_1.onload = function () {
        image_1.width = image_1.width;
        image_1.height = image_1.height; // @ts-ignore

        cursorConNode.appendChild(image_1);
      };

      image_1.src = cursor.url;
      if (whiteboardNode) whiteboardNode.appendChild(cursorConNode);

      if (userId == creator_id) {
        var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
        customCursor.enable = true;
        customCursor.attributes = JSON.stringify(cursor);
      }
    } else {
      var image_2 = cursorConNode.childNodes[0];

      if (image_2 && image_2.src !== cursor.url) {
        image_2.parentNode.removeChild(image_2);
        image_2 = new Image();
        image_2.setAttribute('crossOrigin', 'anonymous');

        image_2.onload = function () {
          image_2.width = image_2.width;
          image_2.height = image_2.height;
          cursorConNode.appendChild(image_2);
        };

        image_2.src = cursor.url;
      }
    }

    var _a = protoGraphic.data,
        x = _a[0],
        y = _a[1];

    if (attr.hidden) {
      x = -1024;
      y = -1024;
    } // 重新拉取到自己的图元，当本端图元处理


    if (creator_id === userId) {
      // @ts-ignore
      this.cursorConNode = cursorConNode;

      if (!local) {
        var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
        var attributes = JSON.parse(customCursor.attributes);

        if (cursor) {
          attributes.url = cursor.url;
          attributes.pox_x = cursor.pox_x;
          attributes.pox_y = cursor.pox_y;
          customCursor.attributes = JSON.stringify(attributes);
        }
      }
    }

    cursorConNode.style.cssText = "transform:translate(" + (x || 0) + "px, " + (y || 0) + "px) scale(" + 1 / this.toolInstance.viewInfo.zoom + ");" + 'transform-origin:0 0;' + ("left:" + -cursor.pox_x / this.toolInstance.viewInfo.zoom + "px;") + ("top: " + -cursor.pox_y / this.toolInstance.viewInfo.zoom + "px;");
  }; // 显示本端光标


  Cursor.prototype.show = function () {
    var _a;

    var v = this.findSelfCursorHandle();

    if (v) {
      this.toolInstance.whiteboardNode.style.cursor = 'initial';
      var cursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
      var attr = JSON.parse(cursor.attributes); // 兼容 Safari 浏览器无法设置图片边界点

      var x = attr.pox_x ? Number(attr.pox_x) - 1 : 0;
      var y = attr.pox_y ? Number(attr.pox_y) - 1 : 0;

      if ((_a = this.defaultCursorPen) === null || _a === void 0 ? void 0 : _a.url) {
        /* 作为备用 */
        this.toolInstance.whiteboardNode.style.cursor = "url(" + this.defaultCursorPen.url + ") " + this.defaultCursorPen.offsetX + " " + this.defaultCursorPen.offsetY + ", auto";
      }

      this.toolInstance.whiteboardNode.style.cursor = "url(" + attr.url + ") " + x + " " + y + ", auto";
    }
  }; // 隐藏光标


  Cursor.prototype.hide = function () {
    var cursorData = this.findSelfCursorHandle();

    if (cursorData) {
      var isPen = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].basicState.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen;
      this.cursorConNode && (this.cursorConNode.style.display = 'none');
      var customCursorEnble = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.enable;
      customCursorEnble && isPen ? this.toolInstance.whiteboardNode.style.cursor = 'none' : this.toolInstance.whiteboardNode.style.cursor = 'initial';
      var attr = JSON.parse(cursorData.attributes);
      attr.hidden = true;
      cursorData.attributes = JSON.stringify(attr);
      cursorData.data = [-1024, -1024]; // cursorData.is_end_draw = false;

      this.toolInstance.updateToRemoteNewHandle([cursorData], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update, true, {
        isUndoAndRedo: true
      }, void 0, function (err) {// this.removeEventsHandle();
      });
    }
  }; // 删除光标


  Cursor.prototype.deleteCursorElement = function (graphic_id) {
    var _a, _b;

    var whiteboardNode = this.toolInstance.whiteboardNode;
    var cursorCon = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].reservedPrefix.cursorCon;
    var cursorConNode = whiteboardNode.querySelector("#" + cursorCon + graphic_id);

    if (cursorConNode) {
      if (cursorConNode.id == ((_a = this.cursorConNode) === null || _a === void 0 ? void 0 : _a.id)) {
        this.cursorConNode = null;
      }

      (_b = cursorConNode === null || cursorConNode === void 0 ? void 0 : cursorConNode.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(cursorConNode);
    }
  }; // 更新光标


  Cursor.prototype.updateCursorAttr = function (notify) {
    if (notify === void 0) {
      notify = false;
    }

    var customCursor = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor;
    var cursorAttr = JSON.parse(customCursor.attributes); // const cursorData = this.addCursorHandle(undefined);

    var cursorData = this.findSelfCursorHandle();

    if (cursorData) {
      var attributes = JSON.parse(cursorData.attributes);
      attributes.cursor = __assign({
        type: _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].customCursor.type
      }, cursorAttr);
      attributes.hidden = false;
      cursorData.attributes = JSON.stringify(attributes);
      this.drawGraphicsHandle(cursorData, true);
      notify && this.toolInstance.updateToRemoteNewHandle([cursorData], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update, true, {
        isUndoAndRedo: true
      });
    }
  }; // 反向缩放对端光标


  Cursor.prototype.updateOtherCursor = function () {
    var _this = this;

    var cursorCon = _entities_store__WEBPACK_IMPORTED_MODULE_10__["default"].reservedPrefix.cursorCon;
    var _a = this.toolInstance,
        whiteboardNode = _a.whiteboardNode,
        graphicList = _a.graphicList;
    var userId = this.toolInstance.getUserID();
    var cursorList = graphicList.filter(function (item) {
      return item.type === 1024 && item.creator_id !== userId;
    });
    cursorList.forEach(function (item) {
      var attr = JSON.parse(item.attributes);
      var cursor = attr.cursor;
      var _a = item.data,
          x = _a[0],
          y = _a[1];
      var cursorConNode = whiteboardNode.querySelector("#" + cursorCon + item.graphic_id);

      if (cursorConNode) {
        cursorConNode.style.cssText = "transform:translate(" + (x || 0) + "px, " + (y || 0) + "px) scale(" + 1 / _this.toolInstance.viewInfo.zoom + ");" + 'transform-origin:0 0;' + ("left:" + -cursor.pox_x / _this.toolInstance.viewInfo.zoom + "px;") + ("top: " + -cursor.pox_y / _this.toolInstance.viewInfo.zoom + "px;");
      }
    });
  }; // 缩放、拖拽、滚动后同步最新的位置到远程


  Cursor.prototype.pushActualPlaceHandle = function () {
    // 找到本端光标
    var cursorData = this.findSelfCursorHandle();

    if (cursorData) {
      var _a = cursorData.data,
          x = _a[0],
          y = _a[1];
      if (x < 0 && y < 0) return;
      this.toolInstance.updateOffsetAndScrollHandle();
      this.toolInstance.updateToRemoteNewHandle([this.calCursorPlaceHandle(cursorData)], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update, true, {
        isUndoAndRedo: true
      });
    }
  }; // 计算本端光标相对白板可视区左上角位置


  Cursor.prototype.calCursorPlaceHandle = function (protoGraphic) {
    protoGraphic = JSON.parse(JSON.stringify(protoGraphic));
    var viewInfo = this.toolInstance.viewInfo;
    var zoom = viewInfo.zoom,
        zoomTX = viewInfo.zoomTX,
        zoomTY = viewInfo.zoomTY,
        offsetPageX = viewInfo.offsetPageX,
        offsetPageY = viewInfo.offsetPageY;
    var _a = protoGraphic.data,
        x = _a[0],
        y = _a[1]; // 加上自身（zego-whiteboard-con、zego-docsview-con）的offset、scroll

    var _b = this.toolInstance.conNode,
        scrollLeft = _b.scrollLeft,
        scrollTop = _b.scrollTop;

    var _x = Math.round((x + scrollLeft - zoomTX) / zoom + offsetPageX);

    var _y = Math.round((y + scrollTop - zoomTY) / zoom + offsetPageY);

    protoGraphic.data = [_x, _y];
    return protoGraphic;
  };

  return Cursor;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/eraser.ts":
/*!*********************************************!*\
  !*** ./sdk/whiteboard/view/views/eraser.ts ***!
  \*********************************************/
/*! exports provided: Eraser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Eraser", function() { return Eraser; });
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");






var Eraser =
/** @class */
function () {
  function Eraser(toolInstance) {
    var _this = this;

    this.bindFlag = false; // 是否绑定标记

    this.mouseInfo = {
      // 触屏设备手指划出 DOM 区域
      touchLeaveRect: {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      }
    };
    this.boxRectMap = {};

    this.mousedownHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return;
      var _a = _this.toolInstance,
          whiteboardNode = _a.whiteboardNode,
          graphicList = _a.graphicList;
      _this.mouseInfo.touchLeaveRect = _this.toolInstance.getWhiteboardNodeRect();
      graphicList.forEach(function (item) {
        if (item.type !== _entities_view__WEBPACK_IMPORTED_MODULE_3__["GraphicType"].Laser) {
          var boxDom = _this.toolInstance.getBoxHandle(item.graphic_id);

          if (boxDom) {
            _this.boxRectMap[item.graphic_id] = boxDom.getBoundingClientRect();
          }
        }
      }); // 点选（不移动）时，删除选中图元

      _this.mousemoveHandle(event);

      _this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.move, _this.mousemoveHandle);
    };

    this.mousemoveHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return;

      var _a = event instanceof MouseEvent ? event : event.changedTouches[0],
          clientX = _a.clientX,
          clientY = _a.clientY; // 触屏设备划出 DOM，模拟 mouseleave


      if (_this.toolInstance.isTouchLeaveWhenMove(event, _this.mouseInfo.touchLeaveRect)) {
        _this.mouseupHandle();

        return;
      } // 查找 zorder 最大的图元


      var zorder = 0;
      var result = '';

      _this.toolInstance.graphicList.forEach(function (item) {
        var rect = _this.boxRectMap[item.graphic_id];
        if (!rect) return;
        var left = rect.left,
            right = rect.right,
            top = rect.top,
            bottom = rect.bottom;

        if (clientX >= left && clientX <= right && clientY >= top && clientY <= bottom) {
          var curZorder = item.zorder || 1;

          if (!zorder || curZorder > zorder) {
            zorder = curZorder;
            result = item.graphic_id;
          }
        }
      }); // 更新 box


      _this.toolInstance.graphicList.forEach(function (item) {
        item.selected = result ? item.graphic_id === result && _this.toolInstance.getGraphicIsEndDraw(item.graphic_id) : false;

        _this.toolInstance.updateBoxBorder(item);
      });
    };

    this.mouseupHandle = function () {
      _this.boxRectMap = {};
      var whiteboardNode = _this.toolInstance.whiteboardNode;

      _this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.move, _this.mousemoveHandle);

      _this.toolInstance.deleteSelectedGraphics(_entities_view__WEBPACK_IMPORTED_MODULE_3__["DeleteGraphicAction"].EraserTool);
    };

    this.toolInstance = toolInstance;
  } // 绑定eraser move、up事件


  Eraser.prototype.bindEventsHandle = function () {
    if (this.bindFlag) return;
    this.bindFlag = true;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.up, this.mouseupHandle);
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.leave, this.mouseupHandle);
  }; // 删除eraser move、up事件


  Eraser.prototype.removeEventsHandle = function () {
    if (!this.bindFlag) return;
    this.bindFlag = false;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.up, this.mouseupHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_4__["default"].mouseEvents.leave, this.mouseupHandle);
  };

  return Eraser;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/image.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/view/views/image.ts ***!
  \********************************************/
/*! exports provided: ImageTool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageTool", function() { return ImageTool; });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.match.js */ "./node_modules/core-js/modules/es.string.match.js");
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.last-index-of.js */ "./node_modules/core-js/modules/es.array.last-index-of.js");
/* harmony import */ var core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
















var ImageTool =
/** @class */
function () {
  function ImageTool(toolInstance) {
    this.editBoxMap = {
      // 鼠标按下时的值
      w: 0,
      h: 0,
      tx: 0,
      ty: 0,
      x: 0,
      y: 0,
      mx: 0,
      my: 0,
      // 当前偏移值
      tx1: 0,
      ty1: 0,
      // 图片初始宽高
      w0: 0,
      h0: 0,
      board: 8,
      wdiff: 9,
      tdiff: 4,
      interrupt: false,
      target: null,
      graphic: null,
      parent: document.createElement('div'),
      box: document.createElement('div'),
      img: document.createElementNS('http://www.w3.org/2000/svg', 'image')
    };
    this.toolInstance = toolInstance;
    this.setEditorBox();
  }

  ImageTool.prototype.startEditTarget = function (event, moveEventCallback) {
    this.endEditTarget();
    var target = event.target;
    var cls = target.className;

    if (cls.includes('operation-point-desktop')) {
      var graphic = this.editBoxMap.graphic;

      if (graphic) {
        // 同步状态
        if (this.toolInstance.getUserAuth().update || graphic.creator_id === this.toolInstance.getUserID()) {
          graphic.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_13__["createGraphicId"])();
          graphic.is_end_draw = false;
          this.toolInstance.updateToRemoteNewHandle([graphic], _entities_view__WEBPACK_IMPORTED_MODULE_14__["Action"].Update);
        }

        Object.assign(graphic.oldData, graphic.data);
      }

      this.editBoxMap.target = target;
      var css = window.getComputedStyle(this.editBoxMap.parent);
      var arr = css.transform.match(/(-?\d+),\s?(-?\d+)\)$/) || [];

      var _a = this.toolInstance.getMouseChangedPoint(event),
          clientX = _a.clientX,
          clientY = _a.clientY;

      this.editBoxMap.w = +css.width.replace('px', '');
      this.editBoxMap.h = +css.height.replace('px', '');
      this.editBoxMap.tx = +arr[1] || 0;
      this.editBoxMap.ty = +arr[2] || 0;
      this.editBoxMap.x = clientX;
      this.editBoxMap.y = clientY;
      var type = cls.substr(cls.lastIndexOf(' ') + 1);

      if (type == 'L') {
        this.editBoxMap.mx = clientX + this.editBoxMap.w;
      } else if (type == 'R') {
        this.editBoxMap.mx = clientX - this.editBoxMap.w;
      } else if (type == 'T') {
        this.editBoxMap.my = clientY + this.editBoxMap.h;
      } else if (type == 'B') {
        this.editBoxMap.my = clientY - this.editBoxMap.h;
      } else if (type == 'LT') {
        this.editBoxMap.mx = clientX + this.editBoxMap.w;
        this.editBoxMap.my = clientY + this.editBoxMap.h;
      } else if (type == 'RB') {
        this.editBoxMap.mx = clientX - this.editBoxMap.w;
        this.editBoxMap.my = clientY - this.editBoxMap.h;
      } else if (type == 'LB') {
        this.editBoxMap.mx = clientX + this.editBoxMap.w;
        this.editBoxMap.my = clientY - this.editBoxMap.h;
      } else if (type == 'RT') {
        this.editBoxMap.mx = clientX - this.editBoxMap.w;
        this.editBoxMap.my = clientY + this.editBoxMap.h;
      }

      var _b = this.toolInstance,
          whiteboardNode = _b.whiteboardNode,
          conNode = _b.conNode;
      this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_11__["default"].mouseEvents.move, moveEventCallback);
      conNode.style.cursor = cls.replace(/.+cursor-(\w+).+/, '$1') + '-resize';
      return false;
    }

    return true;
  };

  ImageTool.prototype.moveEditTarget = function (event) {
    var _a = this.editBoxMap,
        target = _a.target,
        interrupt = _a.interrupt;
    if (!target) return !interrupt;
    var type = target.className.substr(target.className.lastIndexOf(' ') + 1);

    var _b = this.toolInstance.getMouseChangedPoint(event),
        clientX = _b.clientX,
        clientY = _b.clientY; // @ts-ignore


    this['moveEditTarget' + type](clientX, clientY);
    return false;
  }; // 编辑结束后发送


  ImageTool.prototype.endEditTarget = function () {
    var _a = this.editBoxMap,
        target = _a.target,
        graphic = _a.graphic;

    if (target && graphic) {
      // 图片编辑过程中无编辑权限，回滚编辑前状态
      if (!this.toolInstance.getUserAuth().update && graphic.creator_id !== this.toolInstance.getUserID()) {
        Object.assign(graphic.data, graphic.oldData);
        this.initEditBox(graphic);
        var _b = this.editBoxMap,
            w = _b.w,
            h = _b.h,
            tx1 = _b.tx1,
            ty1 = _b.ty1;
        this.updateSVGImageAttr(w, h, tx1, ty1, true);
        Object(_entities_error__WEBPACK_IMPORTED_MODULE_12__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_14__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic);
      } else {
        var _c = graphic.data,
            x = _c.x,
            y = _c.y;
        graphic.initX = x - graphic.x;
        graphic.initY = y - graphic.y;
        graphic.is_end_draw = true;
        this.toolInstance.updateToRemoteNewHandle([graphic], _entities_view__WEBPACK_IMPORTED_MODULE_14__["Action"].Update);
      }
    }

    this.editBoxMap.target = null;
    this.toolInstance.conNode.style.cursor = 'auto';
  };

  ImageTool.prototype.setEditorBox = function () {
    this.editBoxMap.parent = this.toolInstance.whiteboardNode.querySelector('.img-editor-box');
  };

  ImageTool.prototype.initEditBox = function (graphic) {
    var _a;

    var id = graphic.graphic_id;
    var img = (_a = this.toolInstance.getGraphicsHandle(id)) === null || _a === void 0 ? void 0 : _a.children[0];
    if (!img) return;
    var _b = this.editBoxMap,
        parent = _b.parent,
        board = _b.board,
        wdiff = _b.wdiff,
        tdiff = _b.tdiff;
    var data = graphic.data;
    var x = data.x,
        y = data.y;
    var w = data.ex - x + wdiff;
    var h = data.ey - y + wdiff;
    x -= tdiff;
    y -= tdiff;
    x |= 0;
    y |= 0;
    this.editBoxMap.tx1 = x;
    this.editBoxMap.ty1 = y;
    this.editBoxMap.graphic = graphic;
    this.editBoxMap.w0 = +img.getAttribute('width');
    this.editBoxMap.h0 = +img.getAttribute('height');
    this.editBoxMap.img = img;
    this.editBoxMap.box = this.toolInstance.getBoxHandle(id);
    parent.style.cssText += "display:block;width:" + w + "px;height:" + h + "px;transform:translate(" + x + "px," + y + "px);";
    parent.children[4].style.cssText += "left:" + (w / 2 - board) + "px;";
    parent.children[6].style.cssText += "left:" + (w / 2 - board) + "px;";
    parent.children[5].style.cssText += "top:" + (h / 2 - board) + "px;";
    parent.children[7].style.cssText += "top:" + (h / 2 - board) + "px;";
  };

  ImageTool.prototype.hideEditBox = function (interrupt) {
    this.editBoxMap.target = null;
    this.editBoxMap.graphic = null;
    this.editBoxMap.interrupt = !!interrupt;
    var parent = this.editBoxMap.parent;
    parent && (parent.style.display = 'none');
  };

  ImageTool.prototype.hideEditBoxByList = function (list) {
    var _a;

    var id = (_a = this.editBoxMap.graphic) === null || _a === void 0 ? void 0 : _a.graphic_id;

    if (list.some(function (v) {
      return v.graphic_id === id;
    })) {
      // 隐藏本端图片编辑框
      this.hideEditBox();
    }
  };

  ImageTool.prototype.hideEditBoxByIds = function (list) {
    var _a;

    var id = (_a = this.editBoxMap.graphic) === null || _a === void 0 ? void 0 : _a.graphic_id;

    if (list.some(function (v) {
      return v === id;
    })) {
      // 隐藏本端图片编辑框
      this.hideEditBox();
    }
  };

  ImageTool.prototype.moveEditTargetL = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        mx = _a.mx,
        w = _a.w,
        h = _a.h,
        tx = _a.tx,
        ty = _a.ty,
        parent = _a.parent,
        board = _a.board;

    if (cx <= mx) {
      cx = x - cx;
      var w1 = (reverse ? cx - w : cx + w) | 0;
      var tx1 = (reverse ? tx - cx + w : tx - cx) | 0;
      parent.style.cssText += "width:" + w1 + "px;transform:translate(" + tx1 + "px," + ty + "px);";
      parent.children[4].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      this.editBoxMap.tx1 = tx1;
      this.editBoxMap.ty1 = ty;
      this.updateSVGImageAttr(w1, h, tx1, ty);
    } else {
      this.moveEditTargetR(cx, 0, true);
    }
  };

  ImageTool.prototype.moveEditTargetR = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        mx = _a.mx,
        w = _a.w,
        h = _a.h,
        tx1 = _a.tx1,
        ty1 = _a.ty1,
        parent = _a.parent,
        board = _a.board;

    if (cx > mx) {
      cx = (reverse ? cx - x - w : cx - x + w) | 0;
      parent.style.cssText += "width:" + cx + "px;";
      parent.children[4].style.cssText += "left:" + (cx / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (cx / 2 - board) + "px;";
      this.updateSVGImageAttr(cx, h, tx1, ty1);
    } else {
      this.moveEditTargetL(cx, 0, true);
    }
  };

  ImageTool.prototype.moveEditTargetT = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        y = _a.y,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx = _a.tx,
        ty = _a.ty,
        parent = _a.parent,
        board = _a.board;

    if (cy <= my) {
      cy = y - cy;
      var h1 = (reverse ? cy - h : cy + h) | 0;
      var ty1 = (reverse ? ty - cy + h : ty - cy) | 0;
      parent.style.cssText += "height:" + h1 + "px;transform:translate(" + tx + "px," + ty1 + "px);";
      parent.children[5].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      this.editBoxMap.tx1 = tx;
      this.editBoxMap.ty1 = ty1;
      this.updateSVGImageAttr(w, h1, tx, ty1);
    } else {
      this.moveEditTargetB(0, cy, true);
    }
  };

  ImageTool.prototype.moveEditTargetB = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        y = _a.y,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx1 = _a.tx1,
        ty1 = _a.ty1,
        parent = _a.parent,
        board = _a.board;

    if (cy > my) {
      cy = (reverse ? cy - y - h : cy - y + h) | 0;
      parent.style.cssText += "height:" + cy + "px;";
      parent.children[5].style.cssText += "top:" + (cy / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (cy / 2 - board) + "px;";
      this.updateSVGImageAttr(w, cy, tx1, ty1);
    } else {
      this.moveEditTargetT(0, cy, true);
    }
  };

  ImageTool.prototype.moveEditTargetLT = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        y = _a.y,
        mx = _a.mx,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx = _a.tx,
        ty = _a.ty,
        parent = _a.parent,
        board = _a.board;
    if (!(cx > x - 4 && cy > y - 4 || cx < x - 4 && cy < y - 4)) return;
    var f = w <= h && cx <= mx || h < w && cy <= my;

    if (f) {
      var w1 = 0;
      var h1 = 0;
      var tx1 = 0;
      var ty1 = 0;

      if (reverse) {
        cx = Math.min(x - cx - w, y - cy - h);

        if (h < w) {
          h1 = cx;
          w1 = Math.round(w * h1 / h);
          ty1 = ty - cx;
          tx1 = Math.round(tx - w * cx / h);
        } else {
          w1 = cx;
          h1 = Math.round(w1 * h / w);
          tx1 = tx - cx;
          ty1 = Math.round(ty - h * cx / w);
        }
      } else {
        cx -= x;
        cy -= y;
        if (cx < 0 || cy < 0) cx = Math.max(cx, cy);else cx = Math.min(cx, cy);

        if (h < w) {
          h1 = h - cx;
          w1 = Math.round(w * h1 / h);
          ty1 = ty + cx;
          tx1 = Math.round(tx + w * cx / h);
        } else {
          w1 = w - cx;
          h1 = Math.round(w1 * h / w);
          tx1 = tx + cx;
          ty1 = Math.round(ty + h * cx / w);
        }
      }

      if (w1 < 0 || h1 < 0) return;
      w1 |= 0;
      h1 |= 0;
      tx1 |= 0;
      ty1 |= 0;
      parent.style.cssText += "width:" + w1 + "px;height:" + h1 + "px;transform:translate(" + tx1 + "px," + ty1 + "px);";
      parent.children[4].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[5].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      this.editBoxMap.tx1 = tx1;
      this.editBoxMap.ty1 = ty1;
      this.updateSVGImageAttr(w1, h1, tx1, ty1);
    } else {
      this.moveEditTargetRB(cx, cy, true);
    }
  };

  ImageTool.prototype.moveEditTargetRB = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        y = _a.y,
        mx = _a.mx,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx1 = _a.tx1,
        ty1 = _a.ty1,
        parent = _a.parent,
        board = _a.board;
    if (!(cx > x - 4 && cy > y - 4 || cx < x - 4 && cy < y - 4)) return;
    var f = w <= h && cx >= mx || h < w && cy >= my;

    if (f) {
      cx -= x;
      cy -= y;
      var w1 = 0;
      var h1 = 0;

      if (reverse) {
        if (h < w) {
          h1 = Math.min(cx, cy) - h;
          w1 = Math.round(w * h1 / h);
        } else {
          w1 = Math.min(cx, cy) - w;
          h1 = Math.round(w1 * h / w);
        }
      } else {
        if (cx < 0 || cy < 0) cx = Math.max(cx, cy);else cx = Math.min(cx, cy);

        if (h < w) {
          h1 = cx + h;
          w1 = Math.round(w * h1 / h);
        } else {
          w1 = cx + w;
          h1 = Math.round(w1 * h / w);
        }
      }

      if (w1 < 0 || h1 < 0) return;
      w1 |= 0;
      h1 |= 0;
      parent.style.cssText += "width:" + w1 + "px;height:" + h1 + "px;";
      parent.children[4].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[5].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      this.updateSVGImageAttr(w1, h1, tx1, ty1);
    } else {
      this.moveEditTargetLT(cx, cy, true);
    }
  };

  ImageTool.prototype.moveEditTargetLB = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        y = _a.y,
        mx = _a.mx,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx = _a.tx,
        ty = _a.ty,
        parent = _a.parent,
        board = _a.board;
    if (!(cx < x - 4 && cy > y - 4 || cx > x - 4 && cy < y - 4)) return;
    var f = w <= h && cx < mx || h < w && cy > my;

    if (f) {
      var w1 = 0;
      var h1 = 0;
      var tx1 = 0;
      var ty1 = ty;

      if (reverse) {
        cx = Math.min(x - cx - w, cy - y - h);
        cx = Math.abs(cx);

        if (h < w) {
          h1 = cx;
          w1 = Math.round(w * h1 / h);
        } else {
          w1 = cx;
          h1 = Math.round(w1 * h / w);
        }

        tx1 = tx - w1;
        ty1 = ty + h;
      } else {
        cx -= x;
        cy -= y;
        if (cx < 0 || cy > 0) cx = Math.min(-cx, cy);else cx = -Math.min(cx, -cy);

        if (h < w) {
          h1 = h + cx;
          w1 = Math.round(w * h1 / h);
          tx1 = tx + w - w1;
        } else {
          w1 = w + cx;
          h1 = Math.round(w1 * h / w);
          tx1 = tx - cx;
        }
      }

      w1 |= 0;
      h1 |= 0;
      tx1 |= 0;
      ty1 |= 0;
      parent.style.cssText += "width:" + w1 + "px;height:" + h1 + "px;transform:translate(" + tx1 + "px," + ty1 + "px);";
      parent.children[4].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[5].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      this.editBoxMap.tx1 = tx1;
      this.editBoxMap.ty1 = ty1;
      this.updateSVGImageAttr(w1, h1, tx1, ty1);
    } else {
      this.moveEditTargetRT(cx, cy, true);
    }
  };

  ImageTool.prototype.moveEditTargetRT = function (cx, cy, reverse) {
    var _a = this.editBoxMap,
        x = _a.x,
        y = _a.y,
        mx = _a.mx,
        my = _a.my,
        w = _a.w,
        h = _a.h,
        tx = _a.tx,
        ty = _a.ty,
        parent = _a.parent,
        board = _a.board;
    if (!(cx > x - 4 && cy < y - 4 || cx < x - 4 && cy > y - 4)) return;
    var f = w <= h && cx > mx || h < w && cy < my;

    if (f) {
      var w1 = 0;
      var h1 = 0;
      var tx1 = tx;
      var ty1 = 0;

      if (reverse) {
        cx = Math.min(cx - x - w, y - cy - h);
        cx = Math.abs(cx);

        if (h < w) {
          h1 = cx;
          w1 = Math.round(w * h1 / h);
        } else {
          w1 = cx;
          h1 = Math.round(w1 * h / w);
        }

        tx1 = tx + w;
        ty1 = ty - h1;
      } else {
        cx -= x;
        cy -= y;
        if (cx < 0 || cy > 0) cx = -Math.min(-cx, cy);else cx = Math.min(cx, -cy);

        if (h < w) {
          h1 = h + cx;
          w1 = Math.round(w * h1 / h);
          ty1 = ty - cx;
        } else {
          w1 = w + cx;
          h1 = Math.round(w1 * h / w);
          ty1 = ty + h - h1;
        }
      }

      w1 |= 0;
      h1 |= 0;
      tx1 |= 0;
      ty1 |= 0;
      parent.style.cssText += "width:" + w1 + "px;height:" + h1 + "px;transform:translate(" + tx1 + "px," + ty1 + "px);";
      parent.children[4].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[6].style.cssText += "left:" + (w1 / 2 - board) + "px;";
      parent.children[5].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      parent.children[7].style.cssText += "top:" + (h1 / 2 - board) + "px;";
      this.editBoxMap.tx1 = tx1;
      this.editBoxMap.ty1 = ty1;
      this.updateSVGImageAttr(w1, h1, tx1, ty1);
    } else {
      this.moveEditTargetLB(cx, cy, true);
    }
  };

  ImageTool.prototype.updateSVGImageAttr = function (w, h, tx, ty, rollback) {
    var _a = this.editBoxMap,
        w0 = _a.w0,
        h0 = _a.h0,
        wdiff = _a.wdiff,
        tdiff = _a.tdiff,
        img = _a.img,
        box = _a.box,
        graphic = _a.graphic;
    if (!img || !box) return;
    w |= 0;
    h |= 0;
    tx |= 0;
    ty |= 0;
    box.style.cssText += "width:" + w + "px;height:" + h + "px;left:" + tx + "px;top:" + ty + "px;";
    w -= wdiff;
    h -= wdiff;
    tx += tdiff;
    ty += tdiff;
    var sx = Number((w / w0).toFixed(7));
    var sy = Number((h / h0).toFixed(7));
    img.setAttribute('transform', "translate(" + tx + ", " + ty + ") scale(" + sx + ", " + sy + ")");

    if (!rollback) {
      var data = graphic === null || graphic === void 0 ? void 0 : graphic.data;
      data.x = tx;
      data.y = ty;
      data.ex = tx + w;
      data.ey = ty + h;
    }
  };

  return ImageTool;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/laser.ts":
/*!********************************************!*\
  !*** ./sdk/whiteboard/view/views/laser.ts ***!
  \********************************************/
/*! exports provided: Laser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Laser", function() { return Laser; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");







var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};







var Laser =
/** @class */
function () {
  function Laser(toolInstance) {
    var _this = this;

    this.bindFlag = false; // 是否绑定标记

    this.authFlag = true;
    this.laserInfo = {
      hiddenX: -100,
      hiddenY: -100,
      initX: 0,
      initY: 0,
      // 触屏设备手指划出 DOM 区域
      touchLeaveRect: {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      }
    };

    this.mousemoveHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return;

      if (!_this.toolInstance.getUserAuth().create) {
        // move 无权限时只抛出一次错误
        _this.authFlag && Object(_entities_error__WEBPACK_IMPORTED_MODULE_8__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_9__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
        _this.authFlag = false;
        return;
      }

      if (window.TouchEvent && event instanceof TouchEvent) event.preventDefault();

      if (!_this.laserInfo.touchLeaveRect.right) {
        _this.laserInfo.touchLeaveRect = _this.toolInstance.getWhiteboardNodeRect();
      } // 触屏设备划出 DOM，模拟 mouseleave


      if (_this.toolInstance.isTouchLeaveWhenMove(event, _this.laserInfo.touchLeaveRect)) {
        _this.mouseleaveHandle();

        return;
      }

      _this.toolInstance.updateOffsetAndScrollHandle();

      var point = _this.getMouseChangedPoint(event);

      var laserData = _this.addLaserHandle(undefined, point);

      laserData.x = point.clientX;
      laserData.y = point.clientY;
      laserData.is_end_draw = true;
      laserData.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])();

      _this.drawGraphicsHandle(laserData, true); // 计算激光点真实位置


      _this.toolInstance.updateToRemoteNewHandle([_this.calLaserActualPlaceHandle(laserData)], _entities_view__WEBPACK_IMPORTED_MODULE_9__["Action"].Move);
    };

    this.mouseleaveHandle = function () {
      _this.authFlag = true;

      _this.laserHiddenHandle();

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_10__["Logger"].getInstance().info(['Whiteboard_View'], 'Laser.mouseleaveHandle');
    };

    this.wheelHandle = function (event) {
      var _a; // 阻止外部滚动条


      event.preventDefault(); // 通知下层文件滚动

      var whiteboardID = _this.toolInstance.whiteboardID;
      var whiteboard = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].reservedPrefix.whiteboard; // deltaX、deltaY为double

      var scrollDom = (_a = document.querySelector("#" + whiteboard + whiteboardID)) === null || _a === void 0 ? void 0 : _a.parentNode; // viewInfo有误差（viewWidth、viewHeight没有算滚动条的宽、高）

      var _b = scrollDom.getBoundingClientRect(),
          width = _b.width,
          height = _b.height;

      height !== scrollDom.scrollHeight && (scrollDom.scrollTop += Number(event.deltaY.toFixed(7)));
      width !== scrollDom.scrollWidth && (scrollDom.scrollLeft += Number(event.deltaX.toFixed(7)));
    };

    this.toolInstance = toolInstance;
    this.laserContainerNode = this.addLaserConDomHandle();
    this.updateZIndexHandle(-1);
  }

  Laser.prototype.transLocationHandle = function (point) {
    // 不考虑白板缩放、拖拽、滚动
    var clientX = point.clientX,
        clientY = point.clientY;
    var _a = this.toolInstance,
        offsetData = _a.offsetData,
        scrollData = _a.scrollData;
    var offsetLeft = offsetData.offsetLeft,
        offsetTop = offsetData.offsetTop;
    var scrollTop = scrollData.scrollTop,
        scrollLeft = scrollData.scrollLeft; // 减去自身（zego-whiteboard-con、zego-docsview-con）的offset、scroll

    var _b = this.toolInstance.conNode,
        scrollLeft_ = _b.scrollLeft,
        scrollTop_ = _b.scrollTop;
    var result = {
      clientX: Math.round(clientX - offsetLeft + scrollLeft - scrollLeft_),
      clientY: Math.round(clientY - offsetTop + scrollTop - scrollTop_)
    };
    return result;
  };

  Laser.prototype.getMouseChangedPoint = function (event) {
    var result;

    if (event instanceof MouseEvent) {
      var _a = event,
          clientX = _a.clientX,
          clientY = _a.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      });
    } else {
      var _b = event.changedTouches[0],
          clientX = _b.clientX,
          clientY = _b.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      });
    }

    return result;
  };

  Laser.prototype.laserHiddenHandle = function (graphicID) {
    var laserData = this.findLaserHandle(graphicID);
    if (!laserData) return;
    var _a = this.laserInfo,
        hiddenX = _a.hiddenX,
        hiddenY = _a.hiddenY;
    Object.assign(laserData, {
      x: hiddenX,
      y: hiddenY,
      px: 0,
      py: 0
    });
    this.toolInstance.moveGraphicsHandle(laserData.graphic_id, hiddenX, hiddenY);

    if (!graphicID) {
      laserData.is_end_draw = true;
      laserData.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])();
      this.toolInstance.updateToRemoteNewHandle([laserData], _entities_view__WEBPACK_IMPORTED_MODULE_9__["Action"].Move);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_10__["Logger"].getInstance().info(['Whiteboard_View'], 'Laser.laserHiddenHandle', graphicID);
  };

  Laser.prototype.addLaserHandle = function (protoGraphic, point) {
    var graphicList = this.toolInstance.graphicList;

    if (!protoGraphic) {
      // 查找自己的激光笔
      var laserData = this.findLaserHandle();
      if (laserData) return laserData;
      var _a = this.laserInfo,
          initX = _a.initX,
          initY = _a.initY,
          hiddenX = _a.hiddenX,
          hiddenY = _a.hiddenY; // @ts-ignore

      protoGraphic = __assign(__assign({
        graphic_id: Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])(),
        creator_id: this.toolInstance.getUserID()
      }, _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].basicState), {
        type: _entities_view__WEBPACK_IMPORTED_MODULE_9__["GraphicType"].Laser,
        x: hiddenX,
        y: hiddenY,
        px: 0,
        py: 0,
        data: [initX, initY],
        zorder: this.toolInstance.serviceHandle.createZorder()
      });
    }

    protoGraphic = protoGraphic;
    protoGraphic.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])();
    protoGraphic.is_end_draw = true;
    graphicList.push(protoGraphic);
    this.drawGraphicsHandle(protoGraphic, true);
    this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(protoGraphic)], _entities_view__WEBPACK_IMPORTED_MODULE_9__["Action"].Create);
    return protoGraphic;
  };

  Laser.prototype.findLaserHandle = function (graphicID) {
    var userId = this.toolInstance.getUserID();
    return this.toolInstance.graphicList.find(function (item) {
      return graphicID ? item.graphic_id === graphicID : item.type === _entities_view__WEBPACK_IMPORTED_MODULE_9__["GraphicType"].Laser && item.creator_id === userId;
    });
  };

  Laser.prototype.addLaserConDomHandle = function () {
    var whiteboardID = this.toolInstance.whiteboardID;
    var laserContainer = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].reservedPrefix.laserContainer;
    var id = "" + laserContainer + whiteboardID;
    var laserConNode = this.toolInstance.userNode.querySelector("#" + id);
    if (laserConNode) return laserConNode;
    laserConNode = document.createElement('div');
    laserConNode.id = id;
    this.toolInstance.zoomNode.appendChild(laserConNode);
    this.updateLaserConSize(laserConNode);
    return laserConNode;
  }; // private removeLaserConDomHandle(): void { }
  // private updateLaserTimerMap(graphicID: string, interval = 5000): void {
  //     const timer = this.laserTimerMap[graphicID];
  //     timer && clearTimeout(timer);
  //     // @ts-ignore
  //     this.laserTimerMap[graphicID] = setTimeout(() => {
  //         this.laserHiddenHandle(graphicID);
  //     }, interval);
  //     console.log(this.laserTimerMap);
  // }


  Laser.prototype.updateZIndexHandle = function (zIndex) {
    this.laserContainerNode.style.zIndex = "" + zIndex;
    this.laserContainerNode.style.visibility = "" + (zIndex === -1 ? 'hidden' : 'visible');
  };
  /**
   * 绘制激光笔图元
   * 本端: => 后续可使用鼠标样式代替
   * 对端: 与其他图元位置相同
   * @param {ProtoGraphic} protoGraphic
   * @param {boolean} local
   * @memberof Laser
   */


  Laser.prototype.drawGraphicsHandle = function (protoGraphic, local) {
    var userId = this.toolInstance.getUserID();
    var graphic_id = protoGraphic.graphic_id,
        data = protoGraphic.data,
        creator_id = protoGraphic.creator_id;
    var x = protoGraphic.x,
        y = protoGraphic.y; // 重新拉取到自己的图元，当本端图元处理

    if (creator_id === userId && !local) {
      local = true; // 处理x、y

      var _a = this.calLaserPlaceHandle(x, y),
          x_ = _a.x,
          y_ = _a.y;

      protoGraphic.x = x_;
      protoGraphic.y = y_;
      x = x_;
      y = y_;
    }

    var _b = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].reservedPrefix,
        graphics = _b.graphics,
        laserCon = _b.laserCon;
    var str1 = "" + graphics + graphic_id;
    var str2 = "" + laserCon + graphic_id;
    var laserDom = this.toolInstance.userNode.querySelector("#" + str1);

    if (!laserDom) {
      laserDom = document.createElement('div');
      var laserConDom = document.createElement('div');
      laserDom.id = str1;
      laserConDom.id = str2;
      laserConDom.appendChild(laserDom);

      if (!local) {
        this.toolInstance.appendGraphicsDomHandle(laserConDom, _entities_view__WEBPACK_IMPORTED_MODULE_9__["GraphicType"].Laser);
      } else {
        this.laserContainerNode.appendChild(laserConDom);
      }
    } // 对端是point + offset，本端point默认是(0,0)


    var cssText = "transform:translate(" + (x || 0) + "px, " + (y || 0) + "px)" + (!local ? "scale(" + 1 / this.toolInstance.viewInfo.zoom + ");" : ';') + ("left:" + data[0] + "px;top:" + data[1] + "px;");
    laserDom.parentNode.style.cssText = cssText;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_10__["Logger"].getInstance().info(['Whiteboard_View'], 'Laser.drawGraphicsHandle', JSON.stringify({
      protoGraphic: protoGraphic,
      local: local,
      x: x,
      y: y
    }));
  }; // 绑定svg down、move、up、leave事件


  Laser.prototype.bindEventsHandle = function () {
    this.updateZIndexHandle('initial'); // 激光笔容器导致无法触发底层文件白板的滚动事件

    if (this.bindFlag) return;
    this.bindFlag = true;
    var mouseEvents = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].mouseEvents;
    this.toolInstance.toolAddEL(this.laserContainerNode, mouseEvents.move, this.mousemoveHandle);
    this.toolInstance.toolAddEL(this.laserContainerNode, mouseEvents.leave, this.mouseleaveHandle); // 可滚动时（PDF文件白板、可滚动模式普通白板）绑定滚动事件（触摸板上滚动或放大缩小区域时也会触发）

    if (this.toolInstance.viewInfo.isScroll) {
      this.laserContainerNode.addEventListener('wheel', this.wheelHandle);
    }
  }; // 删除svg down、move、up、leave事件


  Laser.prototype.removeEventsHandle = function () {
    if (!this.bindFlag) return;
    this.bindFlag = false;
    this.updateZIndexHandle(-1);
    var mouseEvents = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].mouseEvents;
    this.toolInstance.toolRmEl(this.laserContainerNode, mouseEvents.move, this.mousemoveHandle);
    this.toolInstance.toolRmEl(this.laserContainerNode, mouseEvents.leave, this.mouseleaveHandle);
    this.laserContainerNode.removeEventListener('wheel', this.wheelHandle);
  }; // 计算本端激光笔相对白板真实位置


  Laser.prototype.calLaserActualPlaceHandle = function (protoGraphic) {
    protoGraphic = JSON.parse(JSON.stringify(protoGraphic));
    var x = protoGraphic.x,
        y = protoGraphic.y;
    var viewInfo = this.toolInstance.viewInfo;
    var zoom = viewInfo.zoom,
        zoomTX = viewInfo.zoomTX,
        zoomTY = viewInfo.zoomTY,
        offsetPageX = viewInfo.offsetPageX,
        offsetPageY = viewInfo.offsetPageY; // 加上自身（zego-whiteboard-con、zego-docsview-con）的offset、scroll，计算为以圆心为基准

    var _a = this.toolInstance.conNode,
        scrollLeft = _a.scrollLeft,
        scrollTop = _a.scrollTop;
    protoGraphic.x = Math.round((x + 8 + scrollLeft - zoomTX) / zoom + offsetPageX);
    protoGraphic.y = Math.round((y + 8 + scrollTop - zoomTY) / zoom + offsetPageY);
    return protoGraphic;
  }; // 计算本端激光笔相对白板可视区左上角位置


  Laser.prototype.calLaserPlaceHandle = function (x, y) {
    var viewInfo = this.toolInstance.viewInfo;
    var zoom = viewInfo.zoom,
        zoomTX = viewInfo.zoomTX,
        zoomTY = viewInfo.zoomTY,
        offsetPageX = viewInfo.offsetPageX,
        offsetPageY = viewInfo.offsetPageY; // 加上自身（zego-whiteboard-con、zego-docsview-con）的offset、scroll

    var _a = this.toolInstance.conNode,
        scrollLeft = _a.scrollLeft,
        scrollTop = _a.scrollTop;
    x = Math.round((x - offsetPageX) * zoom + zoomTX - scrollLeft);
    y = Math.round((y - offsetPageY) * zoom + zoomTY - scrollTop);
    return {
      x: x,
      y: y
    };
  }; // 缩放、拖拽、滚动后同步最新的位置到远程


  Laser.prototype.pushActualPlaceHandle = function () {
    // 找到本端激光笔
    var laserData = this.findLaserHandle();

    if (laserData) {
      this.toolInstance.updateOffsetAndScrollHandle();
      laserData.is_end_draw = true;
      laserData.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])();
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_10__["Logger"].getInstance().info(['Whiteboard_View'], 'Laser.pushActualPlaceHandle', JSON.stringify({
        laserData: [this.calLaserActualPlaceHandle(laserData)],
        Action: 'Move'
      }));
      this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(laserData)], _entities_view__WEBPACK_IMPORTED_MODULE_9__["Action"].Move);
    }
  }; // 清除本端或指定userID激光笔


  Laser.prototype.clearLaserHandle = function (userID) {
    var laserData;

    if (!userID) {
      laserData = this.findLaserHandle();
    } else {
      laserData = this.toolInstance.graphicList.filter(function (item) {
        return item.creator_id === userID;
      })[0];
    }

    if (laserData) {
      laserData.is_end_draw = true;
      laserData.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["createGraphicId"])();
      this.toolInstance.deleteHandle(laserData.graphic_id);
      this.toolInstance.updateToRemoteNewHandle([laserData], _entities_view__WEBPACK_IMPORTED_MODULE_9__["Action"].Delete);
    }
  }; // 更新本端激光笔容器的size


  Laser.prototype.updateLaserConSize = function (laserConNode) {
    var _a;

    laserConNode = laserConNode || this.laserContainerNode;
    var cssStr = "z-index:" + (laserConNode.style.zIndex || 'initial') + ";";
    var whiteboardID = this.toolInstance.whiteboardID;
    var whiteboard = _entities_store__WEBPACK_IMPORTED_MODULE_6__["default"].reservedPrefix.whiteboard;
    var scrollDom = (_a = document.querySelector("#" + whiteboard + whiteboardID)) === null || _a === void 0 ? void 0 : _a.parentNode;

    if (this.toolInstance.viewInfo.isScroll) {
      // viewInfo有误差（viewWidth、viewHeight没有算滚动条的宽、高）
      var _b = scrollDom.getBoundingClientRect(),
          width = _b.width,
          height = _b.height;

      height !== scrollDom.scrollHeight && (cssStr += "width:" + (width - 18) + "px;");
      width !== scrollDom.scrollWidth && (cssStr += "height:" + (height - 18) + "px;");
    } else {
      var _c = scrollDom.getBoundingClientRect(),
          width = _c.width,
          height = _c.height;

      cssStr += "width:" + width + "px;";
      cssStr += "height:" + height + "px;";
      cssStr += "top:" + scrollDom.style.top + ";left:" + scrollDom.style.left;
    }

    laserConNode.style.cssText = cssStr;
  };

  return Laser;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/selector.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/views/selector.ts ***!
  \***********************************************/
/*! exports provided: Selector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Selector", function() { return Selector; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.number.max-safe-integer.js */ "./node_modules/core-js/modules/es.number.max-safe-integer.js");
/* harmony import */ var core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _image__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./image */ "./sdk/whiteboard/view/views/image.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");

















var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};








var Selector =
/** @class */
function () {
  function Selector(toolInstance) {
    var _this = this;

    this.bindFlag = false; // 是否绑定标记

    this.authFlag = true;
    this.noMoveUp = true;
    this.isWillMove = false;
    this.mouseInfo = {
      moveCount: 0,
      // 触屏设备手指划出 DOM 区域
      touchLeaveRect: {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      }
    };
    this.moveSelectedGraphicIds = '';
    this.userId = '';
    this.selectBoxMap = {
      l: 0,
      t: 0,
      r: 0,
      b: 0,
      box: document.createElement('div')
    };

    this.mousedownHandle = function (event) {
      if (!_this.toolInstance.enableDraw || !_this.toolInstance.downCommonHandle(event) || !_this.imageTool.startEditTarget(event, _this.mousemoveHandle)) {
        return;
      }

      _this.setGraphicsBox();

      _this.authFlag = true;
      _this.imageTool.editBoxMap.interrupt = false;
      var _a = _this.selectBoxMap,
          l = _a.l,
          t = _a.t,
          r = _a.r,
          b = _a.b;

      var _b = _this.toolInstance.getMouseStartPoint(event),
          clientX = _b.clientX,
          clientY = _b.clientY;

      var authModel = _this.toolInstance.getUserAuth();

      var _c = _this.toolInstance,
          graphicList = _c.graphicList,
          whiteboardNode = _c.whiteboardNode;
      _this.mouseInfo.touchLeaveRect = _this.toolInstance.getWhiteboardNodeRect();

      var result = _this.getCoveredMaxZorderGraphic(event); // 鼠标没有落在图元上


      if (!result) {
        var inner = r > l && l <= clientX && clientX <= r && t <= clientY && clientY <= b;

        if (inner) {
          // 落在选择框中的空白处，表示将要执行移动操作
          _this.isWillMove = true;
          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.mousedownHandle', '落在选择框中的空白处，表示将要执行移动操作');
        } else {
          // 落在非选择框中的空白处，清除所有选中
          _this.hideSelectBox();

          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.mousedownHandle', '落在非选择框中的空白处，清除所有选中');
        }
      } // 鼠标落在图元上
      else {
        var _d = result.rect,
            left = _d.left,
            top_1 = _d.top,
            right = _d.right,
            bottom = _d.bottom;

        var point1 = _this.toolInstance.transLocationHandle({
          clientX: left,
          clientY: top_1
        });

        var point2 = _this.toolInstance.transLocationHandle({
          clientX: right,
          clientY: bottom
        });

        left = point1.clientX;
        top_1 = point1.clientY;
        right = point2.clientX;
        bottom = point2.clientY;
        var _e = result.graphic,
            graphic_id_1 = _e.graphic_id,
            selected = _e.selected,
            type = _e.type,
            creator_id = _e.creator_id;
        var update = authModel.update || creator_id === _this.userId;

        if (!selected) {
          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.mousedownHandle', JSON.stringify({
            GraphicType: type,
            update: true
          })); // 若当前cover图元之前未选中 => 选中cover图元，清除其他选中

          graphicList.forEach(function (item) {
            item.selected = item.graphic_id === graphic_id_1;
          }); // 更新 box

          if (type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Image) {
            // 图片编辑
            if (update) {
              _this.imageTool.initEditBox(result.graphic);

              _this.hideSelectBox(graphic_id_1);
            } else {
              _this.initSelectBox(left, top_1, right, bottom);

              Object(_entities_error__WEBPACK_IMPORTED_MODULE_17__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_20__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic);
            }
          } else {
            // 普通选中
            _this.hideImageEditBox();

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.mousedownHandle', '鼠标落在图元上');

            _this.initSelectBox(left, top_1, right, bottom);
          }
        } // 文本聚焦编辑


        if (selected && type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Text && graphicList.filter(function (v) {
          return v.selected;
        }).length == 1) {
          if (update) {
            // 存储当前将要focus的textarea graphicID
            _this.noMoveUp = graphic_id_1;
            setTimeout(function () {
              return _this.hideSelectBox(graphic_id_1);
            }, 50);
          } else {
            Object(_entities_error__WEBPACK_IMPORTED_MODULE_17__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_20__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthUpdateGraphic);
          }
        }

        _this.isWillMove = true;
      }

      _this.mouseInfo.moveCount = 0;
      _this.moveSelectedGraphicIds = '';

      _this.toolInstance.updateMousePointsHandle(clientX, clientY);

      if (_this.isWillMove) {
        // move: 初始化px、py、is_end_draw、operate_id
        graphicList.forEach(function (item) {
          if (item.selected && (authModel.move || item.creator_id === _this.userId)) {
            // 记录原值
            item.px = item.x;
            item.py = item.y;
            item.is_end_draw = false;
            item.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_19__["createGraphicId"])();
          }
        });
      } else {
        // draw: 鼠标坐标记录的开始点
        _this.toolInstance.updateProtoGraphic(__assign(__assign({
          graphic_id: Object(_utils__WEBPACK_IMPORTED_MODULE_19__["createGraphicId"])()
        }, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].basicState), {
          x: 0,
          y: 0,
          px: 0,
          py: 0,
          data: [clientX, clientY]
        }));

        _this.hideImageEditBox();

        _this.hideSelectBox();
      }

      _this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.move, _this.mousemoveHandle);
    };

    this.mousemoveHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return; // 鼠标漂浮时不绘制

      if (event instanceof MouseEvent && !event.buttons) return _this.resetMouse();
      if (!_this.imageTool.moveEditTarget(event)) return; // 触屏设备划出 DOM，模拟 mouseleave

      if (_this.toolInstance.isTouchLeaveWhenMove(event, _this.mouseInfo.touchLeaveRect)) {
        _this.mouseupHandle();

        return;
      }

      _this.mouseInfo.moveCount++;
      _this.noMoveUp = false;

      var point = _this.toolInstance.getMouseChangedPoint(event);

      if (_this.isWillMove) {
        // move: 移动图元
        _this.updateGraphicsOnMoving(point);
      } else {
        // draw: 捕捉图元
        // 绘制选择框，与绘制rect图元使用相同方法
        _this.toolInstance.updateGraphicsDataHandle(point);

        var graphic = _this.toolInstance.protoGraphic;

        _this.svgTool.drawGraphicsRect(graphic, _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicOperateType"].Local, graphic.color, 0.3);

        _this.mouseInfo.moveCount % 10 == 0 && _this.updateBoxBorderOnSelector();
      }
    };

    this.mouseupHandle = function () {
      if (!_this.toolInstance.enableDraw || _this.noMoveUp === true) {
        _this.imageTool.endEditTarget();

        _this.resetMouse();

        return;
      }

      if (_this.isWillMove) {
        var _a = _this.selectBoxMap,
            l = _a.l,
            t = _a.t,
            r = _a.r,
            b = _a.b;
        _this.selectBoxMap.l = +_this.selectBoxMap.box.style.left.replace('px', '');
        _this.selectBoxMap.t = +_this.selectBoxMap.box.style.top.replace('px', '');
        _this.selectBoxMap.r = _this.selectBoxMap.l + r - l;
        _this.selectBoxMap.b = _this.selectBoxMap.t + b - t; // move 时有限频，最后未达到限频次数的 move 需要同步出去
        // 文本 focus 无需执行 move

        if (!_this.noMoveUp) {
          var list = _this.toolInstance.graphicList.filter(function (item) {
            if (_this.moveSelectedGraphicIds.includes(item.graphic_id)) {
              item.is_end_draw = true;
              return true;
            }

            return false;
          });

          _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.mouseupHandle', JSON.stringify({
            list: list,
            Action: 'Move'
          }));

          _this.toolInstance.updateToRemoteNewHandle(list, _entities_view__WEBPACK_IMPORTED_MODULE_20__["Action"].Move);
        }
      } else {
        // 选择框绘制结束后，框选选中图元
        _this.setSelectBox(true);
      }

      if (!_this.imageTool.editBoxMap.interrupt && _this.noMoveUp && _this.toolInstance.getGraphicIsEndDraw(_this.noMoveUp)) {
        var textTool = _this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_20__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText);

        textTool.focusHandle(_this.noMoveUp);
      }

      _this.resetMouse();
    };

    this.toolInstance = toolInstance;
    this.userId = toolInstance.getUserID();
    this.svgTool = toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_20__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);
    this.imageTool = new _image__WEBPACK_IMPORTED_MODULE_18__["ImageTool"](toolInstance);
    this.setGraphicsBox();
  }

  Selector.prototype.setGraphicsBox = function () {
    this.selectBoxMap.box = this.toolInstance.whiteboardNode.querySelector('.graphics-box');
    this.imageTool.setEditorBox();
  };

  Selector.prototype.initSelectBox = function (l, t, r, b) {
    var _this = this;

    this.selectBoxMap.l = l;
    this.selectBoxMap.t = t;
    this.selectBoxMap.r = r;
    this.selectBoxMap.b = b;
    r -= l;
    b -= t;
    this.toolInstance.graphicList.forEach(function (v) {
      return _this.toolInstance.updateBoxBorder(v);
    });
    var css = "left:" + l + "px;top:" + t + "px;width:" + r + "px;height:" + b + "px;display:block;";
    this.setSelectBoxStyle(css);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_21__["Logger"].getInstance().info(['Whiteboard_View'], 'Selector.initSelectBox', JSON.stringify({
      l: l,
      t: t,
      r: r,
      b: b
    }));
  };

  Selector.prototype.hideSelectBox = function (graphicId) {
    var _this = this;

    this.selectBoxMap.l = 0;
    this.selectBoxMap.t = 0;
    this.selectBoxMap.r = 0;
    this.selectBoxMap.b = 0;
    this.selectBoxMap.box.style.display = 'none';

    if (graphicId) {
      this.toolInstance.graphicList.forEach(function (v) {
        // 文本、图片 单独选中编辑时不显示 border
        if (v.selected && (v.type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Image || v.type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Text)) {
          _this.toolInstance.updateBoxBorder(v, true);
        } else {
          _this.toolInstance.updateBoxBorder(v);
        }
      });
    } else {
      this.toolInstance.graphicList.forEach(function (v) {
        v.selected = false;

        _this.toolInstance.updateBoxBorder(v);
      });
    }
  };

  Selector.prototype.setSelectBox = function (editImage) {
    var _this = this;

    var _a;

    if (((_a = this.imageTool.editBoxMap.parent) === null || _a === void 0 ? void 0 : _a.style.display) !== 'none') return;
    var l = Number.MAX_SAFE_INTEGER;
    var t = Number.MAX_SAFE_INTEGER;
    var r = 0;
    var b = 0;
    var imageCount = 0;
    var selectedCount = 0;
    this.toolInstance.graphicList.forEach(function (v) {
      if (v.selected) {
        var rect = _this.toolInstance.getBoxInfoByGraphic(v);

        if (rect) {
          selectedCount++;
          v.type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Image && imageCount++;
          var x = rect.x,
              y = rect.y,
              width = rect.width,
              height = rect.height;
          l = Math.min(l, x);
          t = Math.min(t, y);
          r = Math.max(r, x + width);
          b = Math.max(b, y + height);
        }
      }

      _this.toolInstance.updateBoxBorder(v);
    });

    if (r > 0 && b > 0) {
      this.selectBoxMap.l = l;
      this.selectBoxMap.t = t;
      this.selectBoxMap.r = r;
      this.selectBoxMap.b = b;
      r -= l;
      b -= t;
      var css = "left:" + l + "px;top:" + t + "px;width:" + r + "px;height:" + b + "px;display:block;"; // 如果框选的只有一个可编辑的图片，显示图片编辑框

      if (editImage && imageCount == 1 && selectedCount == 1) {
        var graphic = this.toolInstance.graphicList.find(function (v) {
          return v.selected && v.type == _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Image;
        });

        if (graphic && (graphic.creator_id == this.userId || this.toolInstance.getUserAuth().update)) {
          css = css.replace('block', 'none');
          this.toolInstance.updateBoxBorder(graphic, true);
          this.imageTool.initEditBox(graphic);
        }
      }

      this.setSelectBoxStyle(css);
    } else {
      this.selectBoxMap.l = 0;
      this.selectBoxMap.t = 0;
      this.selectBoxMap.r = 0;
      this.selectBoxMap.b = 0;
      this.selectBoxMap.box.style.display = 'none';
    }
  };

  Selector.prototype.setSelectBoxStyle = function (css) {
    this.selectBoxMap.box.style.cssText += css;
  };

  Selector.prototype.resetMouse = function () {
    var _a = this.toolInstance,
        protoGraphic = _a.protoGraphic,
        whiteboardNode = _a.whiteboardNode;
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.move, this.mousemoveHandle);
    var selectorSvgDom = this.toolInstance.getGraphicsHandle(protoGraphic.graphic_id);
    Object(_utils__WEBPACK_IMPORTED_MODULE_19__["removeElement"])(selectorSvgDom === null || selectorSvgDom === void 0 ? void 0 : selectorSvgDom.parentElement);
    this.toolInstance.initDrawHandle();
    this.isWillMove = false;
    this.noMoveUp = true;
  };

  Selector.prototype.getCanMovedGraphicList = function () {
    var _this = this;

    var count = 0;
    var count1 = 0;
    var ids = [];
    var firstMove = !this.moveSelectedGraphicIds;
    var move = this.toolInstance.getUserAuth().move;
    var list = this.toolInstance.graphicList.filter(function (item) {
      if (item.selected) {
        count++;

        if (!firstMove && _this.moveSelectedGraphicIds.includes(item.graphic_id)) {
          count1++;
          return true;
        } // 第一次move时记录可移动的图元id


        if (firstMove && (move || item.creator_id === _this.userId)) {
          count1++;
          ids.push(item.graphic_id);
          return true;
        }
      }

      _this.authFlag && _this.toolInstance.updateBoxBorder(item, true);
      return false;
    });
    firstMove && (this.moveSelectedGraphicIds = ids.join(',')); // move 无权限时只抛出一次错误

    if (count !== count1) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_17__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_20__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthMoveGraphic);
      this.authFlag = false;
    }

    return list;
  };

  Selector.prototype.updateGraphicsOnMoving = function (_a) {
    var _this = this;

    var clientX = _a.clientX,
        clientY = _a.clientY;
    var list = this.getCanMovedGraphicList();
    if (!list.length) return; // 移动中不断的传入，再与mousedownHandle中的一个开始坐标。就最少也有两个坐标也就是4个值

    this.toolInstance.updateMousePointsHandle(clientX, clientY);

    var _b = this.toolInstance.calMoveHandle(),
        moveX = _b[0],
        moveY = _b[1];

    var _c = this.imageTool.editBoxMap,
        tdiff = _c.tdiff,
        parent = _c.parent,
        graphic = _c.graphic;
    var imageId = graphic === null || graphic === void 0 ? void 0 : graphic.graphic_id; // 显示编辑框的图片移动时，不显示board

    var isEditImage = list.length == 1 && (list[0].creator_id == this.userId || !!this.toolInstance.getUserAuth().update);
    list.forEach(function (item) {
      _this.toolInstance.updateGraphicsOffsetHandle(item, moveX, moveY);

      var graphic_id = item.graphic_id,
          type = item.type;

      if (type === _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Image) {
        var x = (item.initX || 0) + item.x | 0;
        var y = (item.initY || 0) + item.y | 0;
        var data = item.data;
        var oldData = item.oldData;
        oldData.x = data.x;
        oldData.y = data.y;
        oldData.ex = data.ex;
        oldData.ey = data.ey;
        data.ex = x + data.ex - data.x;
        data.ey = y + data.ey - data.y;
        data.x = x;
        data.y = y;

        _this.toolInstance.moveGraphicsHandle(graphic_id, x, y);

        if (imageId === graphic_id) {
          x -= tdiff;
          y -= tdiff;
          _this.imageTool.editBoxMap.tx1 = x;
          _this.imageTool.editBoxMap.ty1 = y;
          parent.style.cssText += "transform:translate(" + x + "px," + y + "px)";
        }

        _this.toolInstance.updateBoxHandle(item, isEditImage);
      } else if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Laser) {
        _this.toolInstance.moveGraphicsHandle(graphic_id, item.x, item.y);

        _this.toolInstance.updateBoxHandle(item);
      }
    }); // 调整选择框位置

    var _d = this.selectBoxMap,
        l = _d.l,
        t = _d.t;
    var _e = this.toolInstance.mousePoints,
        boxX = _e.boxX,
        boxY = _e.boxY;
    var css = "left:" + (l + boxX) + "px;top:" + (t + boxY) + "px;";
    this.setSelectBoxStyle(css);
    this.mouseInfo.moveCount % 10 == 0 && this.toolInstance.updateToRemoteNewHandle(list, _entities_view__WEBPACK_IMPORTED_MODULE_20__["Action"].Move);
  };

  Selector.prototype.updateBoxBorderOnSelector = function () {
    var _this = this;

    var graphicList = this.toolInstance.graphicList;
    var rectDom = this.toolInstance.getGraphicsHandle(this.toolInstance.protoGraphic.graphic_id);

    if (rectDom) {
      // rectDom 是鼠标滑动出来的选择框
      var _a = rectDom.getBoundingClientRect(),
          _left_1 = _a.left,
          _right_1 = _a.right,
          _top_1 = _a.top,
          _bottom_1 = _a.bottom; // graphicList 是白板容器内的所有图元


      graphicList.forEach(function (item) {
        if (item.type !== _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Laser) {
          // subRectDom 和 boxDom 是经过处理的，白板内的所有图元项的信息
          var subRectDom = _this.toolInstance.getGraphicsHandle(item.graphic_id);

          if (subRectDom) {
            var rect = subRectDom.getBoundingClientRect();
            var left = rect.left,
                top_2 = rect.top;
            var right = rect.right,
                bottom = rect.bottom; // 在图元存在的情况下，左右相等或者上下相等，就意味着垂直或者平行于边界。

            if (left === right) right++;
            if (top_2 === bottom) bottom++;
            item.selected = Math.max(_left_1, left) < Math.min(_right_1, right) && Math.max(_top_1, top_2) < Math.min(_bottom_1, bottom) && _this.toolInstance.getGraphicIsEndDraw(item.graphic_id);
          }
        }
      });
      this.setSelectBox();
    }
  }; // 查找覆盖的zorder最大的图元


  Selector.prototype.getCoveredMaxZorderGraphic = function (event) {
    var _this = this;

    var _a = event instanceof MouseEvent ? event : event.changedTouches[0],
        clientX = _a.clientX,
        clientY = _a.clientY;

    var zorder = 0;
    var graphic = null;
    var rect = null;
    this.toolInstance.graphicList.forEach(function (item) {
      if (item.type !== _entities_view__WEBPACK_IMPORTED_MODULE_20__["GraphicType"].Laser && _this.toolInstance.getGraphicIsEndDraw(item.graphic_id)) {
        var boxDom = _this.toolInstance.getBoxHandle(item.graphic_id);

        if (boxDom) {
          var boxRect = boxDom.getBoundingClientRect();
          var left = boxRect.left,
              top_3 = boxRect.top,
              right = boxRect.right,
              bottom = boxRect.bottom;

          if (clientX >= left && clientX <= right && clientY >= top_3 && clientY <= bottom) {
            var curZorder = item.zorder || 1;

            if (!zorder || curZorder > zorder) {
              zorder = curZorder;
              graphic = item;
              rect = boxRect;
            }
          }
        }
      }
    });
    return graphic && rect ? {
      graphic: graphic,
      rect: rect
    } : null;
  }; // 绑定selector down、move、up、leave事件


  Selector.prototype.bindEventsHandle = function () {
    if (this.bindFlag) return;
    this.bindFlag = true;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.up, this.mouseupHandle);
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.leave, this.mouseupHandle);
  }; // 删除selector down、move、up、leave事件


  Selector.prototype.removeEventsHandle = function () {
    if (!this.bindFlag) return;
    this.bindFlag = false;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.up, this.mouseupHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_16__["default"].mouseEvents.leave, this.mouseupHandle);
  };

  Selector.prototype.hideImageEditBox = function () {
    this.imageTool.hideEditBox();
  };

  Selector.prototype.hideImageEditBoxByList = function (list) {
    this.imageTool.hideEditBoxByList(list);
  };

  Selector.prototype.hideImageEditBoxByIds = function (list) {
    this.imageTool.hideEditBoxByIds(list);
  }; // 收到远端操作时，处理本端选择框


  Selector.prototype.updateSelectorBoxHandle = function (graphicList, delGraphicList) {
    this.hideImageEditBoxByIds(delGraphicList);
    this.hideImageEditBoxByList(graphicList);
    if (this.selectBoxMap.box.style.display == 'none') return; // 若本端框选中包含了对端操作的图元（有交集），则调整本端选择框范围

    var ids = graphicList.map(function (v) {
      return v.graphic_id;
    });
    ids.push.apply(ids, delGraphicList);
    this.toolInstance.graphicList.forEach(function (item) {
      if (ids.includes(item.graphic_id)) {
        item.selected = false;
      }
    });

    if (!this.toolInstance.graphicList.some(function (v) {
      return v.selected;
    })) {
      this.setSelectBox(true);
    }
  };

  return Selector;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/snapshot.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/views/snapshot.ts ***!
  \***********************************************/
/*! exports provided: Snapshot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Snapshot", function() { return Snapshot; });
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.date.now.js */ "./node_modules/core-js/modules/es.date.now.js");
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.string.bold.js */ "./node_modules/core-js/modules/es.string.bold.js");
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.string.italics.js */ "./node_modules/core-js/modules/es.string.italics.js");
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.array.sort.js */ "./node_modules/core-js/modules/es.array.sort.js");
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../docsview/view/Bridge */ "./sdk/docsview/view/Bridge.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
























var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArrays = undefined && undefined.__spreadArrays || function () {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {
    s += arguments[i].length;
  }

  for (var r = Array(s), k = 0, i = 0; i < il; i++) {
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {
      r[k] = a[j];
    }
  }

  return r;
};






var Snapshot =
/** @class */
function () {
  function Snapshot(toolInstance, backgroundInstance) {
    this.snapshotResult = {
      image: ''
    };
    this.canvasRatio = window.devicePixelRatio || 1;
    this.toolInstance = toolInstance;
    this.backgroundInstance = backgroundInstance;
    this.file = this.toolInstance.serviceHandle.getFileInfo(this.toolInstance.whiteboardID);
    this.snapshotId = String(Date.now());
  }

  Snapshot.prototype.snapshot = function (userData) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      return __awaiter(_this, void 0, void 0, function () {
        var _this = this;

        return __generator(this, function (_a) {
          if (userData) this.snapshotResult.userData = userData;
          this.createCtx();
          this.setWbBgColor();
          this.setWbBgImage().then(function () {
            var _a; // 通知docsview进行截图


            if (_this.file) {
              var detail = {
                action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_24__["DomEventAction"].Snapshot,
                ctx: _this.docsCtx,
                snapshotId: _this.snapshotId
              };

              _this.toolInstance.conNode.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_24__["DomEvent"].Whiteboard, {
                detail: detail
              }));
            }

            _this.wbSnapshot(); // 如果是h5，将promise.resolve函数传出去，让h5Snapshot触发。


            var type = (_a = _this.file) === null || _a === void 0 ? void 0 : _a.fileType;

            if (type === _entities_view__WEBPACK_IMPORTED_MODULE_25__["FileType"].PPTH5 || type === _entities_view__WEBPACK_IMPORTED_MODULE_25__["FileType"].CUSTOM_H5) {
              _this.snapshotResolve = resolve;
            } else {
              _this.snapshotResult.image = _this.mergeCanvas();
              resolve(_this.snapshotResult);
            }
          });
          return [2
          /*return*/
          ];
        });
      });
    });
  };

  Snapshot.prototype.getH5Snapshot = function (dataUrl) {
    var _this = this;

    var _a = this.toolInstance.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;
    var img = new Image();
    img.src = dataUrl;

    img.onload = function () {
      _this.docsCtx.drawImage(img, 0, 0, viewWidth, viewHeight);

      _this.snapshotResult.image = _this.mergeCanvas();

      _this.snapshotResolve(_this.snapshotResult);
    };
  }; // 合并两个canvas，输出dataUrl


  Snapshot.prototype.mergeCanvas = function () {
    var _a = this.toolInstance.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;
    var canvas = document.createElement('canvas');
    canvas.width = viewWidth * this.canvasRatio;
    canvas.height = viewHeight * this.canvasRatio;
    var ctx = canvas.getContext('2d');
    ctx.scale(this.canvasRatio, this.canvasRatio);
    ctx.drawImage(this.docsCanvas, 0, 0, viewWidth, viewHeight);
    ctx.drawImage(this.wbCanvas, 0, 0, viewWidth, viewHeight);
    return canvas.toDataURL('image/png', 1);
  }; // 创建canvas上下文


  Snapshot.prototype.createCtx = function () {
    var _a = this.toolInstance.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;
    this.wbCanvas = document.createElement('canvas');
    this.wbCanvas.width = viewWidth * this.canvasRatio;
    this.wbCanvas.height = viewHeight * this.canvasRatio;
    this.wbCtx = this.wbCanvas.getContext('2d');
    this.wbCtx.scale(this.canvasRatio, this.canvasRatio);
    this.docsCanvas = document.createElement('canvas');
    this.docsCanvas.width = viewWidth * this.canvasRatio;
    this.docsCanvas.height = viewHeight * this.canvasRatio;
    this.docsCtx = this.docsCanvas.getContext('2d');
    this.docsCtx.scale(this.canvasRatio, this.canvasRatio); // 设置缩放值，能将坐标体系缩放到正常大小。
  };

  Snapshot.containImg = function (sx, sy, vw, vh, w, h, pos) {
    var dx = sx,
        dy = sy,
        dWidth = vw,
        dHeight = vh;

    if (w > h) {
      dHeight = h / w * dWidth;

      if (w / h <= vw / vh) {
        dWidth = w / h * vh;
      }
    } else if (w <= h) {
      dWidth = w / h * dHeight;
    }

    if (pos == 'top') {
      dy = 0;
      dx = sx + (vw - dWidth) / 2;
    } else if (pos == 'bottom') {
      dy = sy + (vh - dHeight);
      dx = sx + (vw - dWidth) / 2;
    } else if (pos == 'left') {
      dx = 0;
      dy = sy + (vh - dHeight) / 2;
    } else if (pos == 'right') {
      dx = sx + (vw - dWidth);
      dy = sy + (vh - dHeight) / 2;
    } else if (pos == 'center') {
      dx = sx + (vw - dWidth) / 2;
      dy = sy + (vh - dHeight) / 2;
    }

    return {
      dx: dx,
      dy: dy,
      dWidth: dWidth,
      dHeight: dHeight
    };
  };

  Snapshot.prototype.setWbBgColor = function () {
    var color = this.file ? _entities_store__WEBPACK_IMPORTED_MODULE_26__["default"].basicExtraState.defaultFileBgColor : _entities_store__WEBPACK_IMPORTED_MODULE_26__["default"].basicState.bgColor;
    this.setBgColor(this.wbCtx, color);
  };

  Snapshot.prototype.setWbBgImage = function () {
    var _this = this;

    return new Promise(function (resolve) {
      var _a = _this.backgroundInstance.backgroundInfo,
          image = _a.image,
          pos = _a.pos;
      var _b = _this.toolInstance.viewInfo,
          viewWidth = _b.viewWidth,
          height = _b.height;

      if (!image) {
        resolve();
        return;
      }

      var img = new Image();
      img.setAttribute('crossOrigin', 'Anonymous');

      img.onload = function () {
        var imgRect = Snapshot.containImg(0, 0, viewWidth, height, img.width, img.height, pos);

        _this.wbCtx.drawImage(img, imgRect.dx, imgRect.dy, imgRect.dWidth, imgRect.dHeight);

        resolve();
      };

      img.src = image;
    });
  }; // 设置背景颜色


  Snapshot.prototype.setBgColor = function (ctx, color) {
    var _a = this.toolInstance.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, viewWidth, viewHeight);
  }; // 白板截图


  Snapshot.prototype.wbSnapshot = function () {
    var viewportGraphics = this.sortGraphics();
    if (!viewportGraphics) return;

    for (var _i = 0, viewportGraphics_1 = viewportGraphics; _i < viewportGraphics_1.length; _i++) {
      var item = viewportGraphics_1[_i];
      var correctData = this.getCorrectData(item);

      switch (item.type) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Pencil:
        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Line:
          this.renderPencil(item, this.wbCtx, correctData);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Rect:
          this.renderRect(item, this.wbCtx, correctData);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Ellipse:
          this.renderEllipse(item, this.wbCtx, correctData);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Text:
          this.renderText(item, this.wbCtx, correctData);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Image:
          this.renderImage(item, this.wbCtx, correctData);
      }
    }
  }; // 涂鸦渲染


  Snapshot.prototype.renderPencil = function (item, ctx, translatedData) {
    var action = Object(_utils__WEBPACK_IMPORTED_MODULE_23__["transBezierBypointList"])(translatedData); // 样式设置

    this.setCtxStyle(item, ctx);
    ctx.beginPath();
    ctx.moveTo(action.moveTo[0], action.moveTo[1]);
    action.path.forEach(function (pathPoint) {
      ctx.bezierCurveTo(pathPoint[0], pathPoint[1], pathPoint[2], pathPoint[3], pathPoint[4], pathPoint[5]);
    });
    ctx.stroke();
  };

  Snapshot.prototype.renderRect = function (item, ctx, translatedData) {
    var x = translatedData[0],
        y = translatedData[1],
        x1 = translatedData[2],
        y1 = translatedData[3];
    var w = x1 - x,
        h = y1 - y; // 样式设置

    this.setCtxStyle(item, ctx);
    ctx.beginPath();
    ctx.strokeRect(x, y, w, h);
  };

  Snapshot.prototype.renderEllipse = function (item, ctx, translatedData) {
    var x = translatedData[0],
        y = translatedData[1],
        x1 = translatedData[2],
        y1 = translatedData[3],
        // 椭圆的对角线两端的坐标
    rx = (x1 - x) / 2,
        ry = (y1 - y) / 2,
        cx = x + rx,
        cy = y + ry,
        r = rx > ry ? Math.abs(rx) : Math.abs(ry); // 样式设置

    this.setCtxStyle(item, ctx);
    ctx.beginPath();
    ctx.save();
    ctx.translate(cx, cy);
    ctx.scale(rx / r, ry / r);
    ctx.arc(0, 0, r, 0, Math.PI * 2);
    ctx.restore();
    ctx.stroke();
  };

  Snapshot.prototype.renderText = function (item, ctx, correctData) {
    // 样式设置
    this.setCtxStyle(item, ctx);

    var _a = correctData.split(','),
        rowX = _a[0],
        rowY = _a[1],
        text = _a[2];

    var K = 1; // 偏差系数

    var graphicDom = this.toolInstance.getGraphicsHandle(item.graphic_id);
    var fontSize = this.getComputedFs(graphicDom.querySelector('pre') || graphicDom, 'fontSize');
    var lh = this.getComputedLh(graphicDom.querySelector('pre') || graphicDom, 'lineHeight', fontSize);
    var halfLh = (lh - 1) / 2;
    var multiText = text.split('\n');
    var textareaHPadding = _entities_store__WEBPACK_IMPORTED_MODULE_26__["default"].textareaHPadding,
        textareaConBorderWidth = _entities_store__WEBPACK_IMPORTED_MODULE_26__["default"].textareaConBorderWidth;
    multiText.forEach(function (textItem, ind) {
      var x = +rowX + textareaHPadding + textareaConBorderWidth; // 原始坐标 + 行数 * 行高 + 起始高度(去掉文本高度之后的上半个行高的高度)

      var y = +rowY + fontSize * lh * ind + fontSize * halfLh * K + textareaConBorderWidth;
      ctx.fillText("" + textItem, x, y);
    });
  };

  Snapshot.prototype.getComputedStyle = function (dom, key, filter) {
    var styleValue = window.getComputedStyle(dom)[key];

    if (filter) {
      return filter(styleValue);
    }

    return styleValue;
  };

  Snapshot.prototype.getComputedLh = function (dom, key, fontSize) {
    return this.getComputedStyle(dom, key, function (rowLh) {
      var lh = 1.2;

      if (rowLh.includes('px')) {
        lh = +rowLh.replace(/px/, '') / fontSize;
      }

      return lh;
    });
  };

  Snapshot.prototype.getComputedFs = function (dom, key) {
    return this.getComputedStyle(dom, key, function (rowFs) {
      var fs = 12;

      if (rowFs.includes('px')) {
        fs = +rowFs.replace(/px/, '');
      }

      return fs;
    });
  };

  Snapshot.prototype.renderImage = function (item, ctx, translatedData) {
    var x = translatedData[0],
        y = translatedData[1],
        ex = translatedData[2],
        ey = translatedData[3];
    var width = ex - x;
    var height = ey - y;
    var graphicDom = this.toolInstance.graphicsConNode.querySelector("#" + _entities_store__WEBPACK_IMPORTED_MODULE_26__["default"].reservedPrefix.graphics + item.graphic_id);
    if ((graphicDom === null || graphicDom === void 0 ? void 0 : graphicDom.nodeName) !== 'image') return;
    ctx.drawImage(graphicDom, x, y, width, height);
  }; // 设置当次渲染工具的样式


  Snapshot.prototype.setCtxStyle = function (item, ctx) {
    var viewWidth = this.toolInstance.viewInfo.viewWidth;
    var lineWidth = Object(_utils__WEBPACK_IMPORTED_MODULE_23__["calSizeHandle"])(item.size, _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Pencil, viewWidth, false);
    ctx.strokeStyle = item.color;
    ctx.fillStyle = item.color;

    if (item.type !== _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Text) {
      ctx.lineWidth = lineWidth;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
    } else {
      var graphicDom = this.toolInstance.getGraphicsHandle(item.graphic_id);
      var fontSize = this.getComputedFs(graphicDom.querySelector('pre') || graphicDom, 'fontSize') + 'px';
      var fontAtt = typeof item.attributes === 'string' ? JSON.parse(item.attributes) : {};
      var fontWeight = fontAtt.bold ? 'bold' : '';
      var fontStyle = fontAtt.italic ? 'italic' : '';
      var fontFamily = window.getComputedStyle(graphicDom.querySelector('pre') || graphicDom).fontFamily.replace(/"/g, '');
      ctx.textBaseline = 'hanging';
      ctx.font = "" + (fontStyle + ' ') + (fontWeight + ' ') + (fontSize + ' ') + (fontFamily + ' ');
    }
  };

  Snapshot.prototype.sortGraphics = function () {
    var _this = this; // 先获取当前页图元，然后再进行过滤


    var graphicList = JSON.parse(JSON.stringify(this.toolInstance.graphicList)).filter(function (item) {
      return _this.toolInstance.getGraphicsHandle(item.graphic_id);
    });
    return graphicList.sort(function (a, b) {
      return (a.zorder || 0) - (b.zorder || 0);
    });
  }; // 获取去除页数高度+校正偏移后的data坐标


  Snapshot.prototype.getCorrectData = function (protoGraphic) {
    var graphicType = protoGraphic.type;
    var result = protoGraphic.data;

    switch (graphicType) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Image:
        var imageData = protoGraphic.data;
        result = this.correctData([imageData.x, imageData.y, imageData.ex, imageData.ey]);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Pencil:
      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Line:
      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Rect:
      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Ellipse:
        var data = this.correctData(protoGraphic.data);
        result = this.getTransData(protoGraphic, data);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_25__["GraphicType"].Text:
        var textArr = protoGraphic.data.split(',');
        var text = textArr[2];
        var textPath = this.correctData([+textArr[0], +textArr[1]]);
        var correctData = this.getTransData(protoGraphic, __spreadArrays(textPath));
        result = __spreadArrays(correctData, [text]).join(',');
        break;
    }

    return result;
  }; // 去除滚动或者切页的高度


  Snapshot.prototype.correctData = function (data) {
    var _a = this.toolInstance.viewInfo,
        direction = _a.direction,
        page = _a.page,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        isScroll = _a.isScroll,
        zoom = _a.zoom;
    var result;

    if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_25__["ZegoWhiteboardViewScrollDirection"].Center) {
      return data;
    } else if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_25__["ZegoWhiteboardViewScrollDirection"].Horizontal && page) {
      result = data.map(function (point, ind) {
        // data中的 x坐标 - (当前页 - 1) * 视口
        if (ind % 2 === 0) {
          point -= (page - 1) * viewWidth;
        }

        return point;
      });
    } else if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_25__["ZegoWhiteboardViewScrollDirection"].Vertical && page) {
      var scrollTop_1 = this.toolInstance.whiteboardNode.parentNode.scrollTop;
      result = data.map(function (point, ind) {
        // data中的 y坐标 - scrollTop
        if (ind % 2 === 1) {
          point -= isScroll ? scrollTop_1 / zoom : (page - 1) * viewHeight;
        }

        return point;
      });
    }

    return result;
  }; // 获取偏移后的坐标


  Snapshot.prototype.getTransData = function (protoGraphic, data) {
    var x = protoGraphic.x,
        y = protoGraphic.y;
    return data.map(function (point, ind) {
      // 偶数 + translate x值
      if (ind % 2 === 0) {
        point += x;
      } else {
        point += y;
      }

      return point;
    });
  };

  return Snapshot;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/svg.ts":
/*!******************************************!*\
  !*** ./sdk/whiteboard/view/views/svg.ts ***!
  \******************************************/
/*! exports provided: SvgGraphics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SvgGraphics", function() { return SvgGraphics; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");











var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};






var SvgGraphics =
/** @class */
function () {
  function SvgGraphics(toolInstance) {
    var _this = this;

    this.bindFlag = false;
    this.tolerance = 1;
    this.isIos11 = navigator.userAgent.includes('iPhone') && navigator.userAgent.includes('11_4_1');
    this.upSwitch = false; // up执行权限，适配scroll和图元同时操作的场景，down（true） -> up（false）
    // 某些未知情况下，Windows 系统鼠标出现”禁止“符号状态，move 事件触发异常，导致不能正常绘制图元

    this.mouseInfo = {
      moveCount: 0,
      moveTaskId: 0,
      // 触屏设备手指划出 DOM 区域
      touchLeaveRect: {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      },
      // 笔锋
      isHandWriting: false,
      handWritingTimer: 0,
      handWritingLastPoint: null,
      handWritingLastSize: null
    };

    this.mousedownHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return;

      if (!_this.toolInstance.getUserAuth().create) {
        Object(_entities_error__WEBPACK_IMPORTED_MODULE_10__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
        return;
      }

      if (!_this.toolInstance.downCommonHandle(event)) return;
      _this.upSwitch = true; // 笔锋

      _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].svgPath.tops.length = 0;
      _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].svgPath.bottoms.length = 0;
      _this.mouseInfo.isHandWriting = JSON.parse(_entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.attributes).stroke; // 目前仅开启笔锋不开启整数型

      var isFloat = _this.mouseInfo.isHandWriting && _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.type == _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen;

      var _a = _this.toolInstance.getMouseStartPoint(event, isFloat),
          clientX = _a.clientX,
          clientY = _a.clientY;

      var whiteboardNode = _this.toolInstance.whiteboardNode;
      _this.mouseInfo.touchLeaveRect = _this.toolInstance.getWhiteboardNodeRect();
      var url = _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicExtraState.customImage.url;
      var type = _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhitebaordViewToolCustomImage && url ? _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image : _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.type;
      var data = type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image ? {
        x: clientX,
        y: clientY,
        ex: 0,
        ey: 0,
        url: url,
        hash: ''
      } : [clientX, clientY];
      var graphicId = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createGraphicId"])();

      _this.toolInstance.updateMousePointsHandle(clientX, clientY);

      _this.toolInstance.updateProtoGraphic(__assign(__assign({
        creator_id: _this.toolInstance.getUserID(),
        graphic_id: graphicId,
        operate_id: graphicId,
        is_end_draw: false
      }, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState), {
        type: type,
        x: 0,
        y: 0,
        px: 0,
        py: 0,
        data: data,
        zorder: _this.toolInstance.serviceHandle.createZorder()
      }));

      if (type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen) {
        _this.toolInstance.protoGraphic.oldData = [clientX, clientY];
      }

      _this.realTimeStartHandle();

      _this.mouseInfo.moveCount = 0;
      _this.mouseInfo.moveTaskId = 0;

      _this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.move, _this.mousemoveHandle);
    };

    this.mousemoveHandle = function (event) {
      // 以下判断用于处理多点触屏
      if (window.TouchEvent && event instanceof TouchEvent && !_this.toolInstance.downCommonHandle(event)) {
        return console.warn('mousemoveHandle return');
      } // if (this.isMouseMoveWithNoKeydown(this.toolInstance.protoGraphic.graphic_id, event)) return;
      // 触屏设备划出 DOM，模拟 mouseleave


      if (_this.toolInstance.isTouchLeaveWhenMove(event, _this.mouseInfo.touchLeaveRect)) {
        _this.mouseupHandle();

        console.warn('mouseupHandle return');
        return;
      }

      var protoGraphic = _this.toolInstance.protoGraphic; // 是否开启笔锋绘制

      _this.mouseInfo.isHandWriting ? _this.drawGraphicsHandWritingHandle(protoGraphic, event) : _this.drawGraphicsPathHandle(protoGraphic, event);
    };

    this.mouseupHandle = function () {
      if (_this.mouseInfo.handWritingTimer) {
        clearTimeout(_this.mouseInfo.handWritingTimer);
        _this.mouseInfo.handWritingTimer = 0;
      }

      var _a = _this.toolInstance,
          protoGraphic = _a.protoGraphic,
          graphicList = _a.graphicList,
          whiteboardNode = _a.whiteboardNode;
      if (!protoGraphic || !protoGraphic.graphic_id || !_this.upSwitch) return; // up完成清除move事件

      _this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.move, _this.mousemoveHandle);

      _this.upSwitch = false;
      _this.mouseInfo.moveCount = 0;
      _this.mouseInfo.moveTaskId = 0;

      _this.drawGraphicsExceptionHandle(protoGraphic);

      var graphic_id = protoGraphic.graphic_id,
          type = protoGraphic.type;

      if (_this.toolInstance.updateBoxHandle(protoGraphic)) {
        if (type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil) {
          var graphicsDom = _this.toolInstance.getGraphicsHandle(graphic_id);

          if (!graphicsDom) return; // append的点数和全量update时的点数保持一致

          var data = protoGraphic.oldData;
          protoGraphic.data = data.slice();

          if (_this.mouseInfo.isHandWriting) {
            _this.drawGraphicsPencilSegment(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local);
          } else {
            var pathDom = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["getElementChild"])(graphicsDom)[0];
            pathDom.setAttribute('d', Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapGraphicsData"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil, protoGraphic.data));
          }
        } else if (type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image) {
          var data = protoGraphic.data;
          var x = data.x,
              y = data.y,
              ex = data.ex,
              ey = data.ey; // 宽高为0时，不发送
          // 图片绘制结束时无创建权限，不发送

          var create = _this.toolInstance.getUserAuth().create;

          if (x === ex || y === ey || !create) {
            _this.toolInstance.deleteHandle(protoGraphic.graphic_id);

            _this.toolInstance.initDrawHandle();

            var code = _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic;
            !create && Object(_entities_error__WEBPACK_IMPORTED_MODULE_10__["emitError"])(code);
            return;
          }

          _this.checkImageRect(data);

          protoGraphic.initX = data.x;
          protoGraphic.initY = data.y;
          protoGraphic.oldData = __assign({}, data);
        }

        protoGraphic.is_end_draw = true;
        var graphic = JSON.parse(JSON.stringify(protoGraphic));
        var gData = protoGraphic.data; // 笔锋场景下，小于 2 个点的图元不创建不发送

        if (_this.mouseInfo.isHandWriting && gData.length === 4 && type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil && protoGraphic.is_end_draw) {
          _this.toolInstance.deleteHandle(protoGraphic.graphic_id);

          _this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Delete);

          return;
        } else if (type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil && gData.length === 2 || gData.length === 4 && gData[0] == gData[2] && gData[1] == gData[3]) {
          // 1 个点的情况或者发送的头 2 个点均相同 不创建不发送
          _this.toolInstance.deleteHandle(protoGraphic.graphic_id);

          _this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Delete);

          return;
        }

        _this.toolInstance.setGraphicsDomZorder(graphic);

        graphicList.push(graphic);

        _this.realTimeEndHandle();
      } else if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image) {
        protoGraphic.is_end_draw = true;

        _this.realTimeEndHandle();
      }

      _this.toolInstance.initDrawHandle();
    };

    this.toolInstance = toolInstance;
    this.tolerance = this.toolInstance.serviceHandle.isElectron ? 0.3 : 1;
  }
  /**
   * 鼠标按下，立即释放，也创建一个svg元素
   */


  SvgGraphics.prototype.drawGraphicsExceptionHandle = function (protoGraphic) {
    var type = protoGraphic.type;
    var data = protoGraphic.data;

    if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image && data.length < 4) {
      data[2] = data[0] + 1;
      data[3] = data[1] + 1;
      this.drawGraphicsHandle(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local);
    }
  };
  /**
   * 鼠标漂浮时不绘制
   */


  SvgGraphics.prototype.isMouseMoveWithNoKeydown = function (graphic_id, event) {
    if (event instanceof MouseEvent && !event.buttons) {
      this.toolInstance.toolRmEl(this.toolInstance.whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.move, this.mousemoveHandle);
      this.toolInstance.deleteHandle(graphic_id);
      this.toolInstance.initDrawHandle();
      return true;
    }

    return false;
  };
  /**
   * Windows 系统鼠标出现”禁止“符号状态，move 事件触发异常
   * 创建一个 <input> 并使其聚焦，纠正鼠标异常状态
   */


  SvgGraphics.prototype.catchMouseMoveException = function () {
    var _this = this;

    if (!this.mouseInfo.moveTaskId) {
      this.mouseInfo.moveTaskId = window.setTimeout(function () {
        // move 事件触发次数小于 5 时，判断为鼠标异常
        if (_this.mouseInfo.moveCount < 5) {
          var input = _this.toolInstance.userNode.querySelector('#zego-whiteboard-input');

          if (!input) {
            input = document.createElement('input');
            input.id = 'zego-whiteboard-input';
            input.tabIndex = -1;

            _this.toolInstance.userNode.insertBefore(input, _this.toolInstance.userNode.firstChild);
          }

          input.focus();
        }
      }, 200);
    }

    this.mouseInfo.moveCount++;
  };

  SvgGraphics.prototype.realTimeStartHandle = function () {
    var protoGraphic = this.toolInstance.protoGraphic;
    if (protoGraphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image) return;
    this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Create);
  };

  SvgGraphics.prototype.realTimeDrawHandle = function () {
    var protoGraphic = this.toolInstance.protoGraphic;
    if (protoGraphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image) return;

    if (protoGraphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil) {
      this.mouseInfo.isHandWriting ? this.realTimeHandWrittingSend(protoGraphic) : this.readlTimeNormalSend(protoGraphic);
    } else {
      this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update);
    }
  };

  SvgGraphics.prototype.realTimeEndHandle = function () {
    var protoGraphic = this.toolInstance.protoGraphic;
    var action = protoGraphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image ? _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Create : _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Update;
    this.toolInstance.updateToRemoteNewHandle([protoGraphic], action);
  };
  /**
   * 实时绘制过程中检测涂鸦长度是否超过限制
   * web：socket 传输 5KB
   * electron：图元 data 4KB
   */


  SvgGraphics.prototype.appendPath = function (graphic, data) {
    var _a;

    var _this = this;

    if (!data.length) return;
    var increment = JSON.parse(JSON.stringify(graphic));
    increment.data = data;

    (_a = graphic.oldData).push.apply(_a, data);

    this.toolInstance.serviceHandle.isAppendPathLimit(this.toolInstance.whiteboardID, graphic).then(function (res) {
      if (res) {
        // 超过限制强制中断绘制
        graphic.oldData.splice(increment.oldData.length, data.length);

        _this.mouseupHandle();
      } else {
        _this.upSwitch && _this.toolInstance.updateToRemoteNewHandle([increment], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Append);
      }
    });
  }; // 普通涂鸦原点数据发送


  SvgGraphics.prototype.readlTimeNormalSend = function (protoGraphic) {
    var step = _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].realTimeState.localDrawCount;
    var data = protoGraphic.data; // 移动时累加到5个点发送一次

    if (data.length % step === 2) {
      var append = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["simplifyPathData"])(data.slice(data.length - step), this.tolerance);
      this.appendPath(protoGraphic, append);
    }
  }; // 笔锋原点数据发送


  SvgGraphics.prototype.realTimeHandWrittingSend = function (protoGraphic) {
    var data = protoGraphic.data;
    var append = data.slice(protoGraphic.oldData.length, data.length);
    this.appendPath(protoGraphic, append);
  };

  SvgGraphics.prototype.drawGraphicsHandWritingHandle = function (protoGraphic, event) {
    var _this = this;

    if (this.mouseInfo.handWritingTimer) {
      console.warn('handWritingTimer return');
      return;
    }

    this.mouseInfo.handWritingTimer = window.setTimeout(function () {
      _this.drawGraphicsPathHandle(protoGraphic, event);

      clearTimeout(_this.mouseInfo.handWritingTimer);
      _this.mouseInfo.handWritingTimer = 0;
    }, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].handWritingFactor.step);
  }; // 普通绘制


  SvgGraphics.prototype.drawGraphicsPathHandle = function (protoGraphic, event) {
    var isFloat = this.mouseInfo.isHandWriting && protoGraphic.type == _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil;
    var point = this.toolInstance.getMouseChangedPoint(event, isFloat);
    this.toolInstance.updateGraphicsDataHandle(point);
    var type = protoGraphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image ? _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardViewImageType"].ZegoWhiteboardViewImageCustom : undefined;
    this.realTimeDrawHandle();
    this.drawGraphicsHandle(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local, type); // this.catchMouseMoveException();
  };

  SvgGraphics.prototype.isHandWriting = function (protoGraphic, operateType) {
    if (operateType == _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local) return this.mouseInfo.isHandWriting;
    return !!protoGraphic.attributes && JSON.parse(protoGraphic.attributes).stroke;
  }; // 绑定svg down、move、up、leave事件


  SvgGraphics.prototype.bindEventsHandle = function () {
    var _this = this;

    if (this.bindFlag) return;
    this.bindFlag = true;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.up, function () {
      if (_entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.type == _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector) return;

      if (_entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState.type == _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen) {
        window.setTimeout(function () {
          _this.mouseupHandle();
        }, 20);
      } else {
        _this.mouseupHandle();
      }
    });
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.leave, this.mouseupHandle);
  }; // 删除svg down、move、up、leave事件


  SvgGraphics.prototype.removeEventsHandle = function () {
    if (!this.bindFlag) return;
    this.bindFlag = false;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.down, this.mousedownHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.up, this.mouseupHandle);
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].mouseEvents.leave, this.mouseupHandle);
  };

  SvgGraphics.prototype.drawGraphicsHandle = function (protoGraphic, operateType, imageType) {
    var type = protoGraphic.type;

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil:
      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].RealTime:
        this.isHandWriting(protoGraphic, operateType) ? this.drawGraphicsPencilSegment(protoGraphic, operateType) : this.drawGraphicsPath(protoGraphic, operateType);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Line:
        this.drawGraphicsLine(protoGraphic, operateType);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Ellipse:
        this.drawGraphicsEllipse(protoGraphic, operateType);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Rect:
        this.drawGraphicsRect(protoGraphic, operateType);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image:
        if (imageType === _entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardViewImageType"].ZegoWhiteboardViewImageCustom) {
          this.drawLocalCustomImage(protoGraphic);
        } else {
          this.drawReomteGraphicImage(protoGraphic);
        }

        break;

      default:
        break;
    }
  };

  SvgGraphics.prototype.updateGraphicsHandle = function (protoGraphic) {
    var type = protoGraphic.type;

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil:
        this.isHandWriting(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote) ? this.drawGraphicsPencilSegment(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote) : this.drawGraphicsPath(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Line:
        this.drawGraphicsLine(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Ellipse:
        this.drawGraphicsEllipse(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Rect:
        this.drawGraphicsRect(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Remote);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image:
        this.updateGraphicsImage(protoGraphic);
        break;

      default:
        break;
    }
  };

  SvgGraphics.prototype.drawGraphicsLine = function (protoGraphic, type, fill, opacity, strokeLinejoin, strokeLinecap) {
    if (fill === void 0) {
      fill = 'none';
    }

    if (opacity === void 0) {
      opacity = 1;
    }

    if (strokeLinejoin === void 0) {
      strokeLinejoin = 'round';
    }

    if (strokeLinecap === void 0) {
      strokeLinecap = 'round';
    }

    var data = protoGraphic.data,
        graphic_id = protoGraphic.graphic_id,
        color = protoGraphic.color,
        x = protoGraphic.x,
        y = protoGraphic.y;

    var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapGraphicsData"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Line, data),
        x1 = _a.x1,
        y1 = _a.y1,
        x2 = _a.x2,
        y2 = _a.y2;

    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'line', protoGraphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Line);
    this.toolInstance.triggerAnimateHandle(doms[0], type);
    Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
      attr: 'fill',
      value: fill
    }, {
      attr: 'opacity',
      value: opacity
    }, {
      attr: 'stroke',
      value: color
    }, {
      attr: 'stroke-width',
      value: this.getSize(protoGraphic, type)
    }, {
      attr: 'stroke-linejoin',
      value: strokeLinejoin
    }, {
      attr: 'stroke-linecap',
      value: strokeLinecap
    }, {
      attr: 'x1',
      value: x1
    }, {
      attr: 'y1',
      value: y1
    }, {
      attr: 'x2',
      value: x2
    }, {
      attr: 'y2',
      value: y2
    }, {
      attr: 'transform',
      value: "translate(" + (x || 0) + ", " + (y || 0) + ")"
    }]);
  };

  SvgGraphics.prototype.drawGraphicsRect = function (protoGraphic, type, fill, opacity, strokeLinejoin, strokeLinecap) {
    if (fill === void 0) {
      fill = 'none';
    }

    if (opacity === void 0) {
      opacity = 1;
    }

    if (strokeLinejoin === void 0) {
      strokeLinejoin = 'round';
    }

    if (strokeLinecap === void 0) {
      strokeLinecap = 'round';
    }

    var data = protoGraphic.data,
        graphic_id = protoGraphic.graphic_id,
        color = protoGraphic.color,
        x = protoGraphic.x,
        y = protoGraphic.y;

    var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapGraphicsData"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Rect, data),
        width = _a.width,
        height = _a.height,
        dx = _a.x,
        dy = _a.y; // if (!width || !height) return;


    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'rect', protoGraphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Rect);
    this.toolInstance.triggerAnimateHandle(doms[0], type);
    Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
      attr: 'fill',
      value: fill
    }, {
      attr: 'opacity',
      value: opacity
    }, {
      attr: 'stroke',
      value: color
    }, {
      attr: 'stroke-width',
      value: this.getSize(protoGraphic, type)
    }, {
      attr: 'stroke-linejoin',
      value: strokeLinejoin
    }, {
      attr: 'stroke-linecap',
      value: strokeLinecap
    }, {
      attr: 'width',
      value: width
    }, {
      attr: 'height',
      value: height
    }, {
      attr: 'x',
      value: dx
    }, {
      attr: 'y',
      value: dy
    }, {
      attr: 'transform',
      value: "translate(" + (x || 0) + ", " + (y || 0) + ")"
    }]);
  };

  SvgGraphics.prototype.drawGraphicsPath = function (protoGraphic, type, fill, strokeLinejoin, strokeLinecap) {
    if (fill === void 0) {
      fill = 'none';
    }

    if (strokeLinejoin === void 0) {
      strokeLinejoin = 'round';
    }

    if (strokeLinecap === void 0) {
      strokeLinecap = 'round';
    }

    var data = type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local ? protoGraphic.oldData : protoGraphic.data;
    if (!data || !data.length) return;
    var color = protoGraphic.color,
        graphic_id = protoGraphic.graphic_id,
        x = protoGraphic.x,
        y = protoGraphic.y,
        is_end_draw = protoGraphic.is_end_draw;
    var path = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapGraphicsData"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil, data);
    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'path', protoGraphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil);
    this.toolInstance.triggerAnimateHandle(doms[0], type);
    Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
      attr: 'fill',
      value: fill
    }, {
      attr: 'd',
      value: path
    }, {
      attr: 'stroke',
      value: color
    }, {
      attr: 'stroke-width',
      value: this.getSize(protoGraphic, type)
    }, {
      attr: 'stroke-linejoin',
      value: strokeLinejoin
    }, {
      attr: 'stroke-linecap',
      value: strokeLinecap
    }, {
      attr: 'transform',
      value: "translate(" + (x || 0) + ", " + (y || 0) + ")"
    }]);
  }; //笔锋


  SvgGraphics.prototype.drawGraphicsPencilSegment = function (protoGraphic, type) {
    var color = protoGraphic.color,
        graphic_id = protoGraphic.graphic_id,
        x = protoGraphic.x,
        y = protoGraphic.y,
        is_end_draw = protoGraphic.is_end_draw;
    var viewWidth = this.toolInstance.viewInfo.viewWidth;
    var path = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapHandWritingGraphicsData"])(protoGraphic, this.getSize(protoGraphic, type), viewWidth);
    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'path', protoGraphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Pencil);
    this.toolInstance.triggerAnimateHandle(doms[0], type);

    if (path === null || path === void 0 ? void 0 : path.includes('M')) {
      Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
        attr: 'fill',
        value: color
      }, {
        attr: 'd',
        value: path
      }, {
        attr: 'stroke-width',
        value: 0
      }, {
        attr: 'transform',
        value: "translate(" + (x || 0) + ", " + (y || 0) + ")"
      }]);
    }

    if (is_end_draw) {
      _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].svgPath.tops.length = 0;
      _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].svgPath.bottoms.length = 0;
    }
  };

  SvgGraphics.prototype.drawGraphicsEllipse = function (protoGraphic, type, fill, opacity, strokeLinejoin, strokeLinecap) {
    if (fill === void 0) {
      fill = 'none';
    }

    if (opacity === void 0) {
      opacity = 1;
    }

    if (strokeLinejoin === void 0) {
      strokeLinejoin = 'round';
    }

    if (strokeLinecap === void 0) {
      strokeLinecap = 'round';
    }

    var color = protoGraphic.color,
        data = protoGraphic.data,
        graphic_id = protoGraphic.graphic_id,
        x = protoGraphic.x,
        y = protoGraphic.y;

    var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["mapGraphicsData"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Ellipse, data),
        cx = _a.cx,
        cy = _a.cy,
        rx = _a.rx,
        ry = _a.ry;

    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'ellipse', protoGraphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Ellipse);
    this.toolInstance.triggerAnimateHandle(doms[0], type);
    Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
      attr: 'fill',
      value: fill
    }, {
      attr: 'opacity',
      value: opacity
    }, {
      attr: 'stroke',
      value: color
    }, {
      attr: 'stroke-width',
      value: this.getSize(protoGraphic, type)
    }, {
      attr: 'stroke-linejoin',
      value: strokeLinejoin
    }, {
      attr: 'stroke-linecap',
      value: strokeLinecap
    }, {
      attr: 'cx',
      value: cx
    }, {
      attr: 'cy',
      value: cy
    }, {
      attr: 'rx',
      value: rx
    }, {
      attr: 'ry',
      value: ry
    }, {
      attr: 'transform',
      value: "translate(" + (x || 0) + ", " + (y || 0) + ")"
    }]);
  }; // 本端绘制图片


  SvgGraphics.prototype.drawLocalGraphicImage = function (url, x, y) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      if (!_this.toolInstance.getUserAuth().create) {
        return reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_10__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_12__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic));
      }

      var img = new Image();
      img.setAttribute('crossOrigin', 'anonymous');

      img.onload = function () {
        var graphicList = _this.toolInstance.graphicList;

        var _a = _this.getScaleRect(img.width, img.height),
            width = _a.width,
            height = _a.height;

        var data = {
          x: x,
          y: y,
          ex: x + width,
          ey: y + height,
          url: url,
          hash: ''
        };
        var id = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createGraphicId"])();

        var zorder = _this.toolInstance.serviceHandle.createZorder();

        var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + id;
        var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + id;
        var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'image', zorder);
        doms[1] && _this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image);
        Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
          attr: 'width',
          value: width
        }, {
          attr: 'height',
          value: height
        }, {
          attr: 'crossorigin',
          value: 'anonymous'
        }, {
          attr: 'href',
          value: url
        }, {
          attr: 'transform',
          value: "translate(" + x + ", " + y + ")"
        }]); // ios11中 image中设置href属性，无法显示图片。需要改成 xlink:href

        if (_this.isIos11) doms[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', url);

        _this.toolInstance.updateProtoGraphic(__assign(__assign({
          creator_id: _this.toolInstance.getUserID(),
          graphic_id: id,
          operate_id: id,
          is_end_draw: true
        }, _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicState), {
          type: _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image,
          x: 0,
          y: 0,
          px: 0,
          py: 0,
          initX: x,
          initY: y,
          data: data,
          oldData: __assign({}, data),
          zorder: zorder
        })); // 图片加载过程中进行了滚动


        _this.toolInstance.updateOffsetAndScrollHandle();

        var result = _this.toolInstance.updateBoxHandle(_this.toolInstance.protoGraphic);

        if (result) {
          var graphic = JSON.parse(JSON.stringify(_this.toolInstance.protoGraphic));
          graphic.is_end_draw = true;
          graphicList.push(graphic);

          _this.toolInstance.updateToRemoteNewHandle([graphic], _entities_view__WEBPACK_IMPORTED_MODULE_12__["Action"].Create);
        }

        _this.toolInstance.initDrawHandle();

        resolve(url);
      }; // @ts-ignore


      img.onerror = reject;
      img.src = url;
    });
  }; // 本端绘制自定义图形


  SvgGraphics.prototype.drawLocalCustomImage = function (graphic) {
    var graphic_id = graphic.graphic_id;
    var _a = _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicExtraState.customImage,
        w = _a.w,
        h = _a.h;
    var _b = graphic.data,
        x = _b.x,
        y = _b.y,
        ex = _b.ex,
        ey = _b.ey,
        url = _b.url;
    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'image', graphic.zorder);
    doms[1] && this.toolInstance.appendGraphicsDomHandle(doms[1], _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicType"].Image);
    var scaleX = Number((Math.abs(ex - x) / w).toFixed(7));
    var scaleY = Number((Math.abs(ey - y) / h).toFixed(7));
    Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(doms[0], [{
      attr: 'width',
      value: w
    }, {
      attr: 'height',
      value: h
    }, {
      attr: 'crossorigin',
      value: 'anonymous'
    }, {
      attr: 'href',
      value: url
    }, {
      attr: 'transform',
      value: "translate(" + Math.min(x, ex) + ", " + Math.min(y, ey) + ") scale(" + scaleX + ", " + scaleY + ")"
    }]);
    if (this.isIos11) doms[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', url);
  };
  /**
   * 远端绘制图片
   *
   * 图片下载后才能确定原始宽高，为了保证 zorder 的顺序，
   * 下载前需要先创建相关 DOM，下载完成后再更新
   *
   * @param graphic
   */


  SvgGraphics.prototype.drawReomteGraphicImage = function (graphic) {
    var _this = this;

    var graphic_id = graphic.graphic_id,
        zorder = graphic.zorder;
    var data = graphic.data;
    this.checkImageRect(data);
    var sx = data.x,
        sy = data.y,
        ex = data.ex,
        ey = data.ey,
        url = data.url; // 创建 DOM

    this.toolInstance.appendImageDomHandle(graphic_id, zorder); // 更新 DOM

    var img = new Image();
    img.setAttribute('crossOrigin', 'anonymous');

    img.onload = function () {
      var _a = _this.toolInstance.getImageDomHandle(graphic_id),
          graphicDom = _a[0],
          boxDom = _a[1];

      if (!graphicDom || !boxDom) return;

      var _b = _this.getScaleRect(img.width, img.height),
          width = _b.width,
          height = _b.height;

      var scaleX = Number(((ex - sx) / width).toFixed(7));
      var scaleY = Number(((ey - sy) / height).toFixed(7));
      Object(_utils__WEBPACK_IMPORTED_MODULE_11__["setAttributeHandle"])(graphicDom, [{
        attr: 'width',
        value: width
      }, {
        attr: 'height',
        value: height
      }, {
        attr: 'crossorigin',
        value: 'anonymous'
      }, {
        attr: 'href',
        value: url
      }, {
        attr: 'transform',
        value: "translate(" + sx + ", " + sy + ") scale(" + scaleX + ", " + scaleY + ")"
      }]);
      if (_this.isIos11) graphicDom.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', url);

      var rect = _this.toolInstance.getBoxInfoByGraphic(graphic);

      if (rect) {
        var l = rect.x,
            t = rect.y,
            w = rect.width,
            h = rect.height;
        boxDom.style.cssText += "width:" + w + "px;height:" + h + "px;left:" + l + "px;top:" + t + "px;";
      }
    };

    img.src = url;
  }; // 更新图片


  SvgGraphics.prototype.updateGraphicsImage = function (graphic) {
    var graphic_id = graphic.graphic_id;
    var data = graphic.data;
    this.checkImageRect(data);
    var sx = data.x,
        sy = data.y,
        ex = data.ex,
        ey = data.ey;
    var svgDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphicsSvg + graphic_id;
    var graphicDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].reservedPrefix.graphics + graphic_id;
    var dom = Object(_utils__WEBPACK_IMPORTED_MODULE_11__["createSvgElementHandle"])(svgDomId, graphicDomId, 'image', graphic.zorder)[0];
    if (!dom) return;
    var w = +dom.getAttribute('width');
    var h = +dom.getAttribute('height');
    var scaleX = Number(((ex - sx) / w).toFixed(7));
    var scaleY = Number(((ey - sy) / h).toFixed(7));
    dom.setAttribute('transform', "translate(" + sx + ", " + sy + ") scale(" + scaleX + ", " + scaleY + ")");
  };

  SvgGraphics.prototype.checkImageRect = function (data) {
    var x = data.x,
        y = data.y,
        ex = data.ex,
        ey = data.ey;

    if (x > ex) {
      data.x = ex;
      data.ex = x;
    }

    if (y > ey) {
      data.y = ey;
      data.ey = y;
    }
  };

  SvgGraphics.prototype.getScaleRect = function (width, height) {
    var _a = this.toolInstance.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;

    if (width > viewWidth || height > viewHeight) {
      var rate = Math.min(viewWidth / width, viewHeight / height);
      width = width * rate | 0;
      height = height * rate | 0;
    }

    return {
      width: width,
      height: height
    };
  };

  SvgGraphics.prototype.getSize = function (graphic, type) {
    return type === _entities_view__WEBPACK_IMPORTED_MODULE_12__["GraphicOperateType"].Local ? _entities_store__WEBPACK_IMPORTED_MODULE_13__["default"].basicExtraState.drawSize : Object(_utils__WEBPACK_IMPORTED_MODULE_11__["calSizeHandle"])(graphic.size, graphic.type, this.toolInstance.viewInfo.viewWidth, false);
  };

  return SvgGraphics;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/textarea.ts":
/*!***********************************************!*\
  !*** ./sdk/whiteboard/view/views/textarea.ts ***!
  \***********************************************/
/*! exports provided: TextareaGraphics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextareaGraphics", function() { return TextareaGraphics; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.bold.js */ "./node_modules/core-js/modules/es.string.bold.js");
/* harmony import */ var core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_bold_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.italics.js */ "./node_modules/core-js/modules/es.string.italics.js");
/* harmony import */ var core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_italics_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");

















var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};







var TextareaGraphics =
/** @class */
function () {
  function TextareaGraphics(toolInstance) {
    var _this = this;

    this.bindFlag = false; // 是否绑定标记

    this.canCreate = true; // 当前点击空白（包括失焦）地方是否允许创建文本输入框

    this.chInput = false; // 使用中文输入法输入，中文输入完成后才同步对端

    this.allowTouchEnd = true;

    this.mouseupHandle = function (event) {
      // 执行顺序：blur -> up
      if (event instanceof MouseEvent) {
        _this.upEventHandle(event);
      } else if (_this.allowTouchEnd) {
        _this.upEventHandle(event);

        _this.allowTouchEnd = false;
      }
    };

    this.upEventHandle = function (event) {
      if (!_this.toolInstance.enableDraw) return;

      if (!_this.toolInstance.getUserAuth().create) {
        Object(_entities_error__WEBPACK_IMPORTED_MODULE_19__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_16__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
        return;
      }

      if (!_this.toolInstance.downCommonHandle(event)) return;

      if (!_this.canCreate) {
        _this.canCreate = true;
      } else {
        var _a = _this.toolInstance.getMouseChangedPoint(event),
            clientX = _a.clientX,
            clientY = _a.clientY;

        var checkResult = _this.checkAddHandle(clientX, clientY);

        if (!checkResult) return;

        _this.addTextGraphics('', clientX, clientY);
      }
    };

    this.toolInstance = toolInstance;
  } // 根据内容计算换行符插入位置，并更新内容


  TextareaGraphics.prototype.updateContentHandle = function (textareaDom) {
    var textareaHPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaHPadding;
    var value = textareaDom.value,
        preDom = textareaDom.previousSibling,
        maxWidth = Number(preDom.style.maxWidth.split('px')[0]) - textareaHPadding * 2,
        parent = preDom.parentNode;
    var span = document.createElement('span');
    span.style.cssText = 'position: absolute; z-index: -100; font-size: inherit; font-family: inherit; visibility: hidden; display: inline-block;line-height: 1;';
    parent.appendChild(span); // 插入换行符

    var result = '',
        total = 0;

    for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {
      var str = value_1[_i];

      if (str === '\n') {
        result += '\n';
        total = 0;
      } else {
        var strWidth = this.textSizeHandle(span, str).width;
        total += strWidth;

        if (total > maxWidth) {
          // 添加换行符 + 文字
          result += "\n" + str; // 下一行的起始宽度即为该字符。

          total = strWidth;
        } else {
          result += str;
        }
      }
    }

    parent.removeChild(span);
    preDom.innerHTML = result;
    textareaDom.value = result;
  };

  TextareaGraphics.prototype.addTextareaDomHandle = function (protoGraphic) {
    var graphic_id = protoGraphic.graphic_id,
        data = protoGraphic.data;
    var textareaDom = document.createElement('textarea'),
        textareaId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.graphics + graphic_id;
    textareaDom.setAttribute('id', textareaId); // 增加唯一 id

    textareaDom.setAttribute('tabindex', '-1');
    textareaDom.setAttribute('spellcheck', 'false');
    textareaDom.setAttribute('maxlength', "" + _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].maxlength); // 在iphone6 11.4.1系统版本的safari上，textarea前后都多出了3px的间距。为了兼容这样的问题将textarea的书写范围增大3px

    if (navigator.userAgent.includes('iPhone') && navigator.userAgent.includes('11_4_1')) {
      textareaDom.style.padding = "0 " + Math.max(_entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaHPadding - 3, 0) + "px";
    }

    var text = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data).text;
    textareaDom.value = text;
    return textareaDom;
  };

  TextareaGraphics.prototype.addPreDomHandle = function (protoGraphic) {
    var size = protoGraphic.size,
        data = protoGraphic.data,
        type = protoGraphic.type;
    var text = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data).text;
    var preDom = document.createElement('pre');
    preDom.innerHTML = text;
    var drawSize = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calSizeHandle"])(size, type, this.toolInstance.viewInfo.viewWidth, false);
    var textareaHPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaHPadding,
        textareaVPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaVPadding;
    textareaHPadding *= 2;
    textareaVPadding *= 2;
    preDom.style.cssText = "min-height:" + (drawSize * _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].lineHeight + textareaVPadding) + "px;" + ("min-width:" + (drawSize + textareaHPadding) + "px;");
    return preDom;
  };

  TextareaGraphics.prototype.addTextareaConDomHandle = function (protoGraphic) {
    var size = protoGraphic.size,
        color = protoGraphic.color,
        data = protoGraphic.data,
        graphic_id = protoGraphic.graphic_id,
        type = protoGraphic.type,
        attributes = protoGraphic.attributes,
        zorder = protoGraphic.zorder;

    var _a = JSON.parse(attributes || _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].basicState.attributes),
        bold = _a.bold,
        italic = _a.italic;

    var drawSize = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calSizeHandle"])(size, type, this.toolInstance.viewInfo.viewWidth, false);

    var _b = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data),
        beginX = _b.beginX,
        beginY = _b.beginY;

    var containerDom = document.createElement('div'),
        containerDomId = "" + _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.textareaCon + graphic_id;
    containerDom.setAttribute('id', containerDomId);
    zorder && containerDom.setAttribute('data-z', zorder + '');
    containerDom.style.cssText = "font-size:" + drawSize + "px;" + ("font-style:" + (italic ? 'italic' : 'normal') + ";") + ("font-weight:" + (bold ? 'bold' : 'normal') + ";") + ("left:" + beginX + "px;") + ("top:" + beginY + "px;") + ("color:" + color + ";") + ("caret-color:" + color + ";");
    return containerDom;
  };

  TextareaGraphics.prototype.textSizeHandle = function (span, str) {
    // span.innerHtml被赋值" "不会产生空格 也没有宽度。
    if (str === ' ') str = str.replace(/ /g, '&nbsp');
    span.innerHTML = str;
    return {
      width: span.getBoundingClientRect().width,
      height: span.getBoundingClientRect().height
    };
  };

  TextareaGraphics.prototype.checkValueHandle = function (value) {
    var maxlength = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].maxlength; // 超过限制长度

    if (value.length > maxlength) {
      value = value.slice(0, maxlength);
    } // 超过最大尺寸


    return value;
  };

  TextareaGraphics.prototype.initHeightHandle = function (textareaDom) {
    var preDom = textareaDom.previousSibling;
    textareaDom.scrollTop = 0;
    textareaDom.style.height = 'initial';
    preDom.style.height = 'initial';
    preDom.style.maxHeight = 'initial';
  };

  TextareaGraphics.prototype.updateHeightHandle = function (textareaDom) {
    var textareaHPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaHPadding;
    var lineHeight = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].lineHeight;
    var zoom = this.toolInstance.viewInfo.zoom;
    var preDom = textareaDom.previousSibling,
        heightStr = preDom.style.height,
        maxHeight = Number(preDom.style.maxHeight.split('px')[0]),
        maxWidth = (Number(preDom.style.maxWidth.split('px')[0]) + textareaHPadding * 2) / zoom,
        parent = textareaDom.parentNode,
        fontSizeStr = parent.style.fontSize,
        fontSize = Number(fontSizeStr.split('px')[0]);
    textareaDom.style.maxWidth = maxWidth + "px"; // 触发重新计算 scrollHeight

    textareaDom.style.height = fontSize * lineHeight + "px";
    var heightStr_ = textareaDom.scrollHeight + "px";

    if (textareaDom.scrollHeight * zoom > maxHeight) {
      heightStr_ = heightStr;
    }

    preDom.style.height = heightStr_;
    textareaDom.style.height = heightStr_;
  };

  TextareaGraphics.prototype.inputCallbackHandle = function (event) {
    var target = event.target,
        preDom = target.previousSibling,
        result = this.checkValueHandle(target.value);
    target.value = result;
    preDom.innerHTML = result;
    this.updateHeightHandle(target);
    !this.chInput && this.updateToRemoteHandle(event);
  };

  TextareaGraphics.prototype.chInputCallbackHandle = function (event) {
    this.chInput = false;
    this.updateToRemoteHandle(event);
  };

  TextareaGraphics.prototype.updateToRemoteHandle = function (event) {
    var textarea = event.target;
    var parent = textarea.parentNode;
    var graphicList = this.toolInstance.graphicList;
    var graphic_id = textarea.id.split(_entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.graphics)[1];
    var value = textarea.value;
    var data = this.toolInstance.getDataFromGraphicList(graphic_id, 'data').data;

    var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data),
        beginX = _a.beginX,
        beginY = _a.beginY;

    var currIndex = graphicList.findIndex(function (item) {
      return item.graphic_id === graphic_id;
    });
    var protoGraphic = graphicList[currIndex];
    if (!protoGraphic) return;

    if (event.type === 'blur') {
      protoGraphic.is_end_draw = true;

      if (!value) {
        Object(_utils__WEBPACK_IMPORTED_MODULE_17__["removeElement"])(parent); // remove box dom 在鼠标点击的时候就产生盒子了，所以需要没有内容就要删除

        Object(_utils__WEBPACK_IMPORTED_MODULE_17__["removeElement"])(this.toolInstance.getBoxHandle(graphic_id)); // 更新图元列表

        graphicList.splice(currIndex, 1);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.updateToRemoteHandle', JSON.stringify({
          protoGraphic: [protoGraphic],
          type: event.type,
          Action: 'Delete'
        }));
        this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_16__["Action"].Delete);
      } else {
        this.updateContentHandle(textarea); // 文本失焦就只更新盒子的大小，不更新盒子的位置

        this.toolInstance.updateBoxHandle(protoGraphic, 'blur');
        protoGraphic.data = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["addTextBeginPlace"])(textarea.value, beginX, beginY);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.updateToRemoteHandle', JSON.stringify({
          protoGraphic: [protoGraphic],
          type: event.type,
          Action: 'Update'
        }));
        this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_16__["Action"].Update);
      }

      this.toolInstance.initDrawHandle(); // init
    } else {
      if (this.toolInstance.getUserAuth().update || protoGraphic.creator_id === this.toolInstance.getUserID()) {
        this.updateContentHandle(textarea);
        protoGraphic.data = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["addTextBeginPlace"])(textarea.value, beginX, beginY);
        protoGraphic.is_end_draw = false;
        protoGraphic.data = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["addTextBeginPlace"])(textarea.value, beginX, beginY);
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.updateToRemoteHandle', JSON.stringify({
          protoGraphic: [protoGraphic],
          type: event.type,
          Action: 'Update'
        }));
        this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_16__["Action"].Update);
      } else {
        textarea.blur();
      }
    }
  };

  TextareaGraphics.prototype.bindTextareaInputEventHandle = function (textarea) {
    var _this = this;

    textarea.addEventListener('input', function (event) {
      // 受 user-select: none + chrome 版本的影响，部分输入法在compositionend执行完成后，还会执行一次input，比如：微软拼音
      // chrome 最新版本已验证没有问题
      // 正常执行顺序应为：keydown -> compositionstart -> input -> keydown -> input -> compositionend
      _this.inputCallbackHandle(event);
    });
    textarea.addEventListener('compositionstart', function (event) {
      _this.chInput = true;
    });
    textarea.addEventListener('compositionend', function (event) {
      _this.chInputCallbackHandle(event);
    });
    textarea.addEventListener('keydown', function (event) {
      event.keyCode === 9 && event.preventDefault();
    });
  };

  TextareaGraphics.prototype.bindTextareaFocusEvent = function (textareaDom, protoGraphic) {
    var _this = this;

    var data = protoGraphic.data;

    var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data),
        beginX = _a.beginX,
        beginY = _a.beginY;

    textareaDom.addEventListener('focus', function (event) {
      var target = event.target,
          parent = target.parentNode;
      parent.style.borderColor = 'red'; // this.updateHeightHandle(target);

      var graphicId = target.id.split(_entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.graphics)[1];

      _this.toolInstance.setDataToGraphicList(graphicId, {
        oldData: Object(_utils__WEBPACK_IMPORTED_MODULE_17__["addTextBeginPlace"])(target.value, beginX, beginY)
      });
    });
  };

  TextareaGraphics.prototype.bindTextareaBlurEvents = function (textarea) {
    var _this = this;

    var blurEventHandle = function blurEventHandle(event) {
      // 执行顺序：blur -> up
      var graphicsBoxConNode = _this.toolInstance.graphicsBoxConNode;
      var target = event.target;
      var parent = target.parentNode;
      var graphic_id = target.id.split(_entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.graphics)[1];

      _this.initHeightHandle(target);

      _this.updatePointerEvents(2, graphicsBoxConNode.querySelector(_this.toolInstance.getBoxSelHandle(graphic_id)));

      parent.style.borderColor = 'transparent';
      _this.canCreate = false;

      _this.updateToRemoteHandle(event);

      if (!_this.allowTouchEnd) {
        _this.allowTouchEnd = true;
      }
    };

    textarea.addEventListener('blur', blurEventHandle);
  };

  TextareaGraphics.prototype.updatePointerEvents = function (type, boxDom) {
    var _this = this; // update children after update parent


    var graphicsBoxConNode = this.toolInstance.graphicsBoxConNode;

    if (type === 1) {
      Array.prototype.slice.call(Object(_utils__WEBPACK_IMPORTED_MODULE_17__["getElementChild"])(graphicsBoxConNode), 0).forEach(function (item) {
        var instanceDom = _this.toolInstance.getGraphicsHandle(item.id.split(_entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].reservedPrefix.graphicsBox)[1]);

        if (instanceDom && instanceDom.nodeName === 'DIV') {
          item.style.pointerEvents = 'initial';
        }
      });
      graphicsBoxConNode.style.pointerEvents = 'none';

      if (boxDom) {
        boxDom.style.pointerEvents = 'none';
      }
    } else {
      graphicsBoxConNode.style.pointerEvents = 'initial';

      if (boxDom) {
        boxDom.style.pointerEvents = 'initial';
      }
    }
  }; // 检查当前位置是否能新增文本图元


  TextareaGraphics.prototype.checkAddHandle = function (clientX, clientY) {
    var _a = this.calMaxSizeHandle(clientX, clientY),
        maxWidth = _a.maxWidth,
        maxHeight = _a.maxHeight;

    var viewWidth = this.toolInstance.viewInfo.viewWidth;
    var textareaHPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaHPadding,
        basicState = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].basicState,
        lineHeight = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].lineHeight,
        textareaVPadding = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaVPadding;
    var drawSize = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calSizeHandle"])(basicState.fontSize, _entities_view__WEBPACK_IMPORTED_MODULE_16__["GraphicType"].Text, viewWidth, false);
    var minWidth = textareaHPadding * 2 + drawSize + 12;
    var minHeight = textareaVPadding * 2 + drawSize * lineHeight + 12;
    return minWidth < maxWidth && minHeight < maxHeight;
  }; // 绑定textarea up事件


  TextareaGraphics.prototype.bindEventsHandle = function () {
    if (this.bindFlag) return;
    this.bindFlag = true;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolAddEL(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].mouseEvents.up, this.mouseupHandle);
  }; // 删除textarea up事件


  TextareaGraphics.prototype.removeEventsHandle = function () {
    if (!this.bindFlag) return;
    this.bindFlag = false;
    var whiteboardNode = this.toolInstance.whiteboardNode;
    this.toolInstance.toolRmEl(whiteboardNode, _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].mouseEvents.up, this.mouseupHandle);
  };

  TextareaGraphics.prototype.addTextGraphics = function (text, clientX, clientY) {
    var _a = this.toolInstance,
        protoGraphic = _a.protoGraphic,
        graphicList = _a.graphicList;
    var graphicId = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["createGraphicId"])();
    this.toolInstance.updateProtoGraphic(__assign(__assign({
      creator_id: this.toolInstance.getUserID(),
      graphic_id: graphicId,
      operate_id: graphicId,
      is_end_draw: !!text,
      x: 0,
      y: 0,
      px: 0,
      py: 0,
      zorder: this.toolInstance.serviceHandle.createZorder(),
      data: Object(_utils__WEBPACK_IMPORTED_MODULE_17__["addTextBeginPlace"])(text, clientX + '', clientY + '')
    }, _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].basicState), {
      size: _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].basicState.fontSize
    }));

    var copy = __assign({}, protoGraphic);

    graphicList.push(copy);
    this.drawGraphicsHandle(copy, !text);
    this.toolInstance.setGraphicsDomZorder(copy); // 在鼠标点击之后，就开始确定文本盒子的位置。 之后在失焦的时候就只更新盒子的大小不修改盒子的位置。

    var boxDom = this.toolInstance.updateBoxHandle(copy); // 为空表示添加文本后需要focus，需要调整调整pointer-events

    !text && this.updatePointerEvents(1, boxDom);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.addTextGraphics', JSON.stringify({
      text: [copy],
      action: 'Create'
    }));
    this.toolInstance.updateToRemoteNewHandle([copy], _entities_view__WEBPACK_IMPORTED_MODULE_16__["Action"].Create);
  };

  TextareaGraphics.prototype.drawGraphicsHandle = function (protoGraphic, focus) {
    var x = protoGraphic.x,
        y = protoGraphic.y;
    var textareaDom = this.addTextareaDomHandle(protoGraphic),
        preDom = this.addPreDomHandle(protoGraphic),
        containerDom = this.addTextareaConDomHandle(protoGraphic);
    containerDom.appendChild(preDom);
    containerDom.appendChild(textareaDom);
    containerDom.style.transform = "translate(" + (x || 0) + "px, " + (y || 0) + "px)";
    this.toolInstance.appendGraphicsDomHandle(containerDom, _entities_view__WEBPACK_IMPORTED_MODULE_16__["GraphicType"].Text);
    this.bindTextareaInputEventHandle(textareaDom);
    this.bindTextareaFocusEvent(textareaDom, protoGraphic); // stop events bubbling

    var mouseEvents = _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].mouseEvents;
    Object(_utils__WEBPACK_IMPORTED_MODULE_17__["bindStopsEvents"])(textareaDom, [mouseEvents.down, mouseEvents.move, mouseEvents.up]);

    if (focus) {
      this.initMaxSizeHandle(textareaDom);
      textareaDom.focus();
      this.updatePointerEvents(1, null);
    }

    this.bindTextareaBlurEvents(textareaDom);
  };

  TextareaGraphics.prototype.updateGraphicsHandle = function (protoGraphic) {
    var graphic_id = protoGraphic.graphic_id,
        data = protoGraphic.data,
        size = protoGraphic.size,
        color = protoGraphic.color,
        x = protoGraphic.x,
        y = protoGraphic.y,
        type = protoGraphic.type,
        attributes = protoGraphic.attributes;

    var _a = JSON.parse(attributes || _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].basicState.attributes),
        bold = _a.bold,
        italic = _a.italic;

    var drawSize = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["calSizeHandle"])(size, type, this.toolInstance.viewInfo.viewWidth, false);

    var _b = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data),
        beginX = _b.beginX,
        beginY = _b.beginY,
        text = _b.text;

    var containerDom = this.toolInstance.getGraphicsHandle(graphic_id);

    if (containerDom) {
      var _c = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["getElementChild"])(containerDom),
          preDom = _c[0],
          textareaDom = _c[1];

      textareaDom.value = text;
      containerDom.style.cssText = "font-size: " + drawSize + "px;" + ("font-style:" + (italic ? 'italic' : 'normal') + ";") + ("font-weight:" + (bold ? 'bold' : 'normal') + ";") + ("left: " + beginX + "px;") + ("top: " + beginY + "px;") + ("color: " + color + ";") + ("transform: translate(" + x + "px, " + y + "px);") + ("caret-color:" + color + ";");
      var lines = text.split('\n').length;
      var height = lines * drawSize * _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].lineHeight + _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].textareaVPadding * 2;
      preDom.innerHTML = text;
      preDom.style.height = height + "px";
      preDom.style.maxWidth = 'initial';
      preDom.style.maxHeight = 'initial';
      textareaDom.value = text;
      textareaDom.style.height = height + "px";
    }
  };

  TextareaGraphics.prototype.focusHandle = function (graphicID) {
    this.toolInstance.setDataToGraphicList(graphicID, {
      selected: false
    });
    var boxDom = this.toolInstance.getBoxHandle(graphicID);
    boxDom && (boxDom.style.borderColor = 'transparent');
    this.updatePointerEvents(1, boxDom); // focus textarea

    var textareaConDom = this.toolInstance.getGraphicsHandle(graphicID);

    if (textareaConDom) {
      var textareaDom = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["getElementChild"])(textareaConDom)[1];
      this.initMaxSizeHandle(textareaDom);
      textareaConDom.style.borderColor = 'red';
      textareaDom.style.height = '100%';
      textareaDom.focus(); // 更新 operate_id is_end_draw

      var protoGraphic = this.toolInstance.graphicList.filter(function (item) {
        return item.graphic_id === graphicID;
      })[0];
      protoGraphic.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["createGraphicId"])();
      protoGraphic.is_end_draw = false;
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.focusHandle', JSON.stringify({
        graphic: [protoGraphic],
        action: 'Update'
      })); // 同步状态

      this.toolInstance.updateToRemoteNewHandle([protoGraphic], _entities_view__WEBPACK_IMPORTED_MODULE_16__["Action"].Update);
    }
  }; // 回退update


  TextareaGraphics.prototype.backUpdateGraphicsHandle = function (protoGraphic) {
    var graphic_id = protoGraphic.graphic_id,
        data = protoGraphic.data;
    var text = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["splitTextHandle"])(data).text;
    var containerDom = this.toolInstance.getGraphicsHandle(graphic_id);

    if (containerDom) {
      var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_17__["getElementChild"])(containerDom),
          preDom = _a[0],
          textareaDom = _a[1];

      textareaDom.value = text;
      preDom.innerHTML = text;

      var _b = containerDom.getBoundingClientRect(),
          width = _b.width,
          height = _b.height;

      var boxDom = this.toolInstance.getBoxHandle(graphic_id);
      boxDom && (boxDom.style.cssText += "width:" + width + "px;height:" + height + "px;");
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_20__["Logger"].getInstance().info(['Whiteboard_View'], 'TextArea.backUpdateGraphicsHandle', JSON.stringify({
        graphic_id: graphic_id,
        data: data
      }));
      this.toolInstance.setDataToGraphicList(graphic_id, {
        data: data
      });
    }
  }; // 初始化 textarea 的 maxSize


  TextareaGraphics.prototype.initMaxSizeHandle = function (textareaDom) {
    var _a = textareaDom.getBoundingClientRect(),
        left = _a.left,
        top = _a.top;

    var _b = this.toolInstance.transLocationHandle({
      clientX: left,
      clientY: top
    }),
        clientX = _b.clientX,
        clientY = _b.clientY;

    var _c = this.calMaxSizeHandle(clientX, clientY),
        maxWidth = _c.maxWidth,
        maxHeight = _c.maxHeight; // 包括padding在内的最大尺寸


    var preDom = textareaDom.previousSibling;
    preDom.style.maxHeight = maxHeight + "px";
    preDom.style.maxWidth = maxWidth + "px";
  }; // 计算 maxSize


  TextareaGraphics.prototype.calMaxSizeHandle = function (clientX, clientY) {
    var _a = this.toolInstance.viewInfo,
        isScroll = _a.isScroll,
        isOriginScroll = _a.isOriginScroll,
        width = _a.width,
        height = _a.height,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        zoom = _a.zoom,
        zoomTX = _a.zoomTX,
        zoomTY = _a.zoomTY,
        offsetPageX = _a.offsetPageX,
        offsetPageY = _a.offsetPageY;
    var maxWidth,
        maxHeight = 0;

    if (!isScroll) {
      // PPT、动态PP文件白板以及翻页模式的普通白板 => 不管是否缩放以白板可视区边界来计算
      maxWidth = Math.floor(viewWidth - clientX * zoom + offsetPageX * zoom - zoomTX);
      maxHeight = Math.floor(viewHeight - clientY * zoom + offsetPageY * zoom - zoomTY);
    } else {
      // 其他文件白板（默认都是滚动模式）、滚动模式的普通白板 => 以实际白板边界计算
      // 预留滚动条的宽、高20, 还要考虑textarea父级的边框
      maxWidth = Math.floor(width - clientX);
      maxHeight = Math.floor(height - clientY); // isOriginScroll: 在未缩放的情况下是否有滚动条，这里为了统一，不判断具体的滚动方向

      if (isOriginScroll) {
        maxWidth -= _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].scrollbarSize;
        maxHeight -= _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].scrollbarSize;
      }
    } // 减去box的边框


    maxWidth -= 2 * _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].boxBorderWidth * zoom;
    maxHeight -= 2 * _entities_store__WEBPACK_IMPORTED_MODULE_18__["default"].boxBorderWidth * zoom;
    return {
      maxWidth: maxWidth,
      maxHeight: maxHeight
    };
  };

  return TextareaGraphics;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/tool.ts":
/*!*******************************************!*\
  !*** ./sdk/whiteboard/view/views/tool.ts ***!
  \*******************************************/
/*! exports provided: Tool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tool", function() { return Tool; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.match.js */ "./node_modules/core-js/modules/es.string.match.js");
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
/* harmony import */ var core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.date.now.js */ "./node_modules/core-js/modules/es.date.now.js");
/* harmony import */ var core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_now_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.date.to-string.js */ "./node_modules/core-js/modules/es.date.to-string.js");
/* harmony import */ var core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_date_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.slice.js */ "./node_modules/core-js/modules/es.array.slice.js");
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.array.find-index.js */ "./node_modules/core-js/modules/es.array.find-index.js");
/* harmony import */ var core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ "./node_modules/core-js/modules/es.array.reverse.js");
/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.array.splice.js */ "./node_modules/core-js/modules/es.array.splice.js");
/* harmony import */ var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/es.array.sort.js */ "./node_modules/core-js/modules/es.array.sort.js");
/* harmony import */ var core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.array.from.js */ "./node_modules/core-js/modules/es.array.from.js");
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.array.fill.js */ "./node_modules/core-js/modules/es.array.fill.js");
/* harmony import */ var core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _services_event__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _laser__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./laser */ "./sdk/whiteboard/view/views/laser.ts");
/* harmony import */ var _svg__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./svg */ "./sdk/whiteboard/view/views/svg.ts");
/* harmony import */ var _textarea__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./textarea */ "./sdk/whiteboard/view/views/textarea.ts");
/* harmony import */ var _eraser__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./eraser */ "./sdk/whiteboard/view/views/eraser.ts");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./selector */ "./sdk/whiteboard/view/views/selector.ts");
/* harmony import */ var _background__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./background */ "./sdk/whiteboard/view/views/background.ts");
/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./cursor */ "./sdk/whiteboard/view/views/cursor.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");




























var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArrays = undefined && undefined.__spreadArrays || function () {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {
    s += arguments[i].length;
  }

  for (var r = Array(s), k = 0, i = 0; i < il; i++) {
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {
      r[k] = a[j];
    }
  }

  return r;
};












 // import { getLogAction, Logger } from '../../../docsview/view/Logger';
// const logAction = getLogAction.bind(null, 'wb.v.');



var Tool =
/** @class */
function () {
  function Tool(options) {
    this.mousePoints = {
      sx: -1,
      sy: -1,
      ex: -1,
      ey: -1,
      boxX: 0,
      boxY: 0
    };
    this.graphicList = [];
    this.enableDraw = true; // 白板是否有权限绘制图元

    this.graphicTaskList = [];
    this.undoList = []; // 撤销列表

    this.clearUndoData = null; // 数据流清空回退数据

    this.redoList = []; // 重做列表

    this.doTaskSeq = 0; // undo、redo操作seq

    this.canDo = true; // 表示当前是否能执行undo、redo

    this.isReloading = false;
    this.graphicExtraMap = {};
    this.customCursor = null;
    this.instancesMap = {};
    var whiteboardID = options.whiteboardID,
        zoomNode = options.zoomNode,
        conNode = options.conNode,
        serviceHandle = options.serviceHandle,
        graphicsConNode = options.graphicsConNode,
        graphicsBoxConNode = options.graphicsBoxConNode,
        viewInfo = options.viewInfo,
        whiteboardNode = options.whiteboardNode;
    this.whiteboardID = whiteboardID;
    this.conNode = conNode;
    this.zoomNode = zoomNode;
    this.userNode = zoomNode.parentNode;
    this.graphicsConNode = graphicsConNode;
    this.whiteboardNode = whiteboardNode;
    this.graphicsBoxConNode = graphicsBoxConNode;
    this.serviceHandle = serviceHandle;
    this.viewInfo = viewInfo; // 初始化offset、scroll数据

    this.updateOffsetAndScrollHandle(); // 初始化绘制相关

    this.initDrawHandle();
  }

  Tool.prototype.getTranslateXY = function (str) {
    if (!str) return {
      x: 0,
      y: 0
    }; // Firefox: translate(0px)  Chorme: translate(0px, 0px)

    var transformReg = /translate\((-?\d*.?\d*)px(\,\s*(-?\d*.?\d*)px)?\)/;
    var result = str.match(transformReg);
    var _a = result,
        x = _a[1],
        y = _a[3];
    return {
      x: +x || 0,
      y: +y || 0
    };
  };

  Tool.prototype.clearRealTimeInterval = function (graphic_id) {
    clearInterval(this.graphicExtraMap[graphic_id].realTimeId);
    delete this.graphicExtraMap[graphic_id];
  };
  /**
   * 实时绘制处理push数据
   */


  Tool.prototype.realTimeHandle = function (svgTool, protoGraphic) {
    var _a;

    var _this = this;

    var _b;

    var graphic_id = protoGraphic.graphic_id,
        is_end_draw = protoGraphic.is_end_draw,
        operate_id = protoGraphic.operate_id;
    var curGraphic = this.graphicList.find(function (item) {
      return item.graphic_id == graphic_id && item.operate_id == operate_id;
    });
    if (!curGraphic) return;
    var _c = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].realTimeState,
        remoteDrawDelay = _c.remoteDrawDelay,
        remoteDrawCount = _c.remoteDrawCount,
        remoteDrawEndDelay = _c.remoteDrawEndDelay;

    if (!is_end_draw) {
      //接收端，开启定时任务绘制
      if (!this.graphicExtraMap[graphic_id] || !this.graphicExtraMap[graphic_id].realTimeId) {
        this.graphicExtraMap[graphic_id] = this.graphicExtraMap[graphic_id] || {};
        this.graphicExtraMap[graphic_id].realTimeIndex = 0;
        this.graphicExtraMap[graphic_id].realTimeId = setInterval(function (id) {
          var _a;

          var increment = _this.graphicList.find(function (v) {
            return v.graphic_id === id;
          });

          if (increment && _this.graphicExtraMap[id]) {
            var data = increment.data;
            var isend = _this.graphicExtraMap[id].realTimeIndex >= data.length;

            if (!isend) {
              _this.graphicExtraMap[id].realTimeLast = Date.now();
              increment = JSON.parse(JSON.stringify(increment));
              increment.data = data.slice(0, _this.graphicExtraMap[id].realTimeIndex += remoteDrawCount);
              svgTool.drawGraphicsHandle(increment, _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicOperateType"].Remote);
            } else if (isend && Date.now() - _this.graphicExtraMap[id].realTimeLast > remoteDrawEndDelay) {
              // 没有收到绘制结束消息，结束定时任务
              increment.is_end_draw = true;

              _this.clearRealTimeInterval(id); // Logger.info(logAction('gra.remote_draw_realtime_timeout'), id);


              _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.remote_draw_realtime_timeout', id);
            }
          } else if (!increment && ((_a = _this.graphicExtraMap[id]) === null || _a === void 0 ? void 0 : _a.realTimeId)) {
            // 图元被删除，结束定时任务
            _this.clearRealTimeInterval(id);

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.remote_draw_realtime_deleted', id); // Logger.info(logAction('gra.remote_draw_realtime_deleted'), id);
          }
        }, remoteDrawDelay, graphic_id);
      } else {
        (_a = curGraphic.data).push.apply(_a, protoGraphic.data);
      }
    } else if (is_end_draw && ((_b = this.graphicExtraMap[graphic_id]) === null || _b === void 0 ? void 0 : _b.realTimeId)) {
      //接收端，结束定时任务
      this.clearRealTimeInterval(graphic_id); // Logger.info(logAction('gra.remote_draw_realtime_end'), graphic_id);

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.remote_draw_realtime_end', graphic_id);
    }
  };

  Tool.prototype.createHandle = function (protoGraphic, textTool, svgTool) {
    var id = protoGraphic.graphic_id;
    if (this.graphicList.some(function (v) {
      return v.graphic_id === id;
    })) return;
    this.graphicList.push(protoGraphic);
    var type = protoGraphic.type; // 分发到教具类

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text:
        // 这里为false表示不自动focus
        textTool.drawGraphicsHandle(protoGraphic, false);
        break;

      default:
        svgTool.drawGraphicsHandle(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicOperateType"].UnReDo);
        break;
    }
  };

  Tool.prototype.moveHandle = function (protoGraphic, svgTool) {
    var graphic_id = protoGraphic.graphic_id,
        x = protoGraphic.x,
        y = protoGraphic.y,
        type = protoGraphic.type;

    if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) {
      this.assingImageGraphicData(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move);
      svgTool.updateGraphicsImage(protoGraphic);
    } else {
      this.setDataToGraphicList(graphic_id, {
        x: x,
        y: y
      });
      var zoom = type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser ? '' + 1 / this.viewInfo.zoom : undefined;
      this.moveGraphicsHandle(graphic_id, x, y, zoom);
    }
  };

  Tool.prototype.updateHandle = function (protoGraphic, textTool, svgTool) {
    var type = protoGraphic.type;

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text:
        textTool.backUpdateGraphicsHandle(protoGraphic);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image:
        this.assingImageGraphicData(protoGraphic, _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update);
        svgTool.updateGraphicsImage(protoGraphic);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage:
        this.background.remoteAddBackgroundImageGraphic(protoGraphic);
        break;
    }
  };

  Tool.prototype.assingImageGraphicData = function (graphic, action) {
    var id = graphic.graphic_id;
    this.graphicList.some(function (v) {
      if (v.graphic_id === id) {
        Object.assign(v.data, graphic.data);
        Object.assign(v.oldData, graphic.oldData);

        if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move) {
          v.x = graphic.x;
          v.y = graphic.y;
          v.px = graphic.px;
          v.py = graphic.py;
        } else if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update) {
          var _a = v.data,
              x = _a.x,
              y = _a.y;
          v.initX = x - v.x;
          v.initY = y - v.y;
        }

        return true;
      }

      return false;
    });
  };

  Tool.prototype.reverseGraphicByMove = function (graphic) {
    graphic.x = [graphic.px || 0, graphic.px = graphic.x][0];
    graphic.y = [graphic.py || 0, graphic.py = graphic.y][0]; // 图片类型修改data

    if (graphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) {
      var data = graphic.data;
      var width = data.ex - data.x,
          height = data.ey - data.y;
      data.x = graphic.x + (graphic.initX || 0);
      data.y = graphic.y + (graphic.initY || 0);
      data.ex = data.x + width;
      data.ey = data.y + height;
    }
  };

  Tool.prototype.resetImageGraphicOrigin = function (graphic) {
    var _a = graphic.data,
        x = _a.x,
        y = _a.y;
    graphic.initX = x - graphic.x;
    graphic.initY = y - graphic.y;
  }; // 根据任务构造undo数据，直接修改原数据


  Tool.prototype.createUndoData = function (graphicList) {
    var _this = this;

    graphicList = graphicList.filter(function (g) {
      return g.type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Cursor;
    });
    if (!graphicList.length) return [];
    var copy = JSON.parse(JSON.stringify(graphicList));
    var protoGraphic = copy[0];
    var action = protoGraphic.action,
        type = protoGraphic.type,
        oldData = protoGraphic.oldData,
        data = protoGraphic.data;

    if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create || action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Append || action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update) {
      switch (type) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text:
          // 每次操作一个图元
          var oldText = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["splitTextHandle"])(oldData).text;
          var text = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["splitTextHandle"])(data).text;
          if (!oldText && !text) return [];

          if (!oldText) {
            protoGraphic.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete;
          } else {
            protoGraphic.action = text ? _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update : _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create;
            protoGraphic.data = oldData;
            protoGraphic.oldData = data;
          }

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Pencil: // data 一直为全量

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Line:
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Rect:
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Ellipse:
          // 每次操作一个图元
          protoGraphic.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete;
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image:
          // 每次操作一个图元
          if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create) {
            protoGraphic.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete;
          } else {
            protoGraphic.data = oldData;
            protoGraphic.oldData = data;
            this.resetImageGraphicOrigin(protoGraphic);
          }

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage:
          // 每次操作一个图元
          if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create) {
            protoGraphic.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete;
          } else {
            protoGraphic.data = oldData;
            protoGraphic.oldData = data;
          }

          break;
      }
    } else if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete) {
      // 可能多个图元
      copy.forEach(function (item) {
        item.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create;

        if (item.type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) {
          _this.resetImageGraphicOrigin(item);
        }
      });
    } else if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move) {
      // 可能多个图元
      copy.forEach(function (item) {
        return _this.reverseGraphicByMove(item);
      });
    }

    copy.forEach(function (item) {
      // 更新operate_id、is_end_draw
      item.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["createGraphicId"])();
      item.is_end_draw = true;
    });
    return copy;
  }; // undo、redo取反


  Tool.prototype.reverseData = function (graphicList) {
    var _this = this;

    if (!graphicList.length) return;
    graphicList.forEach(function (item) {
      var action = item.action,
          data = item.data,
          oldData = item.oldData;

      switch (action) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create:
          item.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete;
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete:
          item.action = _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create;
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move:
          _this.reverseGraphicByMove(item);

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update:
          // oldData为当前update过程的初始值
          // @ts-ignore
          item.data = oldData; // @ts-ignore

          item.oldData = data;
          break;

        default:
          break;
      } // 更新operate_id、is_end_draw


      item.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["createGraphicId"])();
      item.is_end_draw = true;
    });
  };

  Tool.prototype.createBackground = function (parentDom, reload) {
    if (!this.background) {
      this.background = new _background__WEBPACK_IMPORTED_MODULE_36__["Background"](this, parentDom);
    }

    reload && this.background.createContainer(parentDom);
  };

  Tool.prototype.setCustomCursor = function (reload) {
    if (reload === void 0) {
      reload = false;
    }

    if (!this.customCursor) {
      this.customCursor = new _cursor__WEBPACK_IMPORTED_MODULE_37__["Cursor"](this);
    } else {
      this.customCursor.updateCursorAttr();
    }
  };

  Tool.prototype.triggerAnimateHandle = function (svgDom, type) {
    type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicOperateType"].Remote ? svgDom.classList.add('transition') : svgDom.classList.remove('transition');
  };

  Tool.prototype.transLocationHandle = function (point, isFloat) {
    // 考虑白板缩放、拖拽、滚动
    var clientX = point.clientX,
        clientY = point.clientY;
    var _a = this.offsetData,
        offsetLeft = _a.offsetLeft,
        offsetTop = _a.offsetTop;
    var _b = this.scrollData,
        scrollLeft = _b.scrollLeft,
        scrollTop = _b.scrollTop;
    var _c = this.viewInfo,
        zoom = _c.zoom,
        zoomTX = _c.zoomTX,
        zoomTY = _c.zoomTY,
        offsetPageX = _c.offsetPageX,
        offsetPageY = _c.offsetPageY;
    var result = {
      clientX: (clientX - offsetLeft + scrollLeft - zoomTX) / zoom + offsetPageX,
      clientY: (clientY - offsetTop + scrollTop - zoomTY) / zoom + offsetPageY
    };

    if (!isFloat) {
      result.clientX = Math.round(result.clientX);
      result.clientY = Math.round(result.clientY);
    }

    return result;
  };

  Tool.prototype.transLocationOrigin = function (point) {
    // 考虑白板缩放、拖拽、滚动
    var clientX = point.clientX,
        clientY = point.clientY;
    var _a = this.viewInfo,
        offsetPageX = _a.offsetPageX,
        offsetPageY = _a.offsetPageY,
        zoom = _a.zoom;
    var _b = this.whiteboardNode.parentNode,
        scrollLeft = _b.scrollLeft,
        scrollTop = _b.scrollTop;
    var result = {
      clientX: Math.round(clientX + scrollLeft / zoom + offsetPageX),
      clientY: Math.round(clientY + scrollTop / zoom + offsetPageY)
    };
    return result;
  };

  Tool.prototype.bindEventsHandle = function (type) {
    this.initDrawHandle();
    var currInstance = this.instancesMap[type];
    currInstance && currInstance.bindEventsHandle();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['WhiteBoard_View'], 'Tool.bindEventsHandle', JSON.stringify({
      type: type
    }));
  };

  Tool.prototype.bindCursorEventsHandle = function () {
    var _a;

    (_a = this.customCursor) === null || _a === void 0 ? void 0 : _a.bindEventsHandle();
  };

  Tool.prototype.removeEventsHandle = function (type) {
    var currInstance = this.instancesMap[type];
    currInstance && currInstance.removeEventsHandle();
  }; // 移动图元


  Tool.prototype.moveGraphicsHandle = function (graphicID, x, y, zoom) {
    var graphicsDom = this.getGraphicsHandle(graphicID);

    if (graphicsDom) {
      // 兼容性处理: 部分浏览器svg可能不支持translate style, 使用修改元素属性替换
      if (graphicsDom.tagName === 'g') {
        var svg = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["getElementChild"])(graphicsDom)[0];
        zoom = svg.getAttribute('transform') || '';
        zoom = zoom && zoom.includes('scale(') ? zoom.replace(/.*(scale\(\d+(.\d+)?,(\s*)?\d+(.\d+)?\)).*/, ' $1') : '';
        svg.setAttribute('transform', "translate(" + (x || 0) + ", " + (y || 0) + ")" + zoom);
      } else {
        // 默认都会添加transform: translate(0px, 0px) 或 transform: translate(-100px, -100px)
        var str = "translate(" + (x || 0) + "px, " + (y || 0) + "px)";
        var result = graphicsDom.style.transform.match(/scale\((\d*.?\d*)\)/);
        var oldScale = result ? result[1] : '';

        if (!zoom && oldScale) {
          str = str + " scale(" + oldScale + ")";
        } else if (zoom) {
          str = str + " scale(" + zoom + ")";
        }

        graphicsDom.style.transform = str;
      }
    }
  };
  /**
   * 获取图元dom
   * svg类图元: <g><rect id="zego-graphics"></rect></g>
   * 文本类图元: <div id="zego-textarea"><pre>xxx</pre><textarea id="zego-graphics"></textarea></div>
   * 激光笔图元: <div id="zego-laser"><div id="zego-graphics"></div></div>
   * @param {string} graphicID
   * @returns {(HTMLElement | null)}
   * @memberof Tool
   */


  Tool.prototype.getGraphicsHandle = function (graphicID, targetParent) {
    if (targetParent === void 0) {
      targetParent = this.userNode;
    }

    var graphicsDom = targetParent.querySelector("#" + _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.graphics + graphicID);

    if (graphicsDom) {
      graphicsDom = graphicsDom.parentNode;
    }

    return graphicsDom;
  };

  Tool.prototype.batchGetGraphicsHandle = function (targetParent, reservedPrefixStr) {
    if (targetParent === void 0) {
      targetParent = this.userNode;
    } // 查询所有指定前缀图元


    return targetParent.querySelectorAll("[id^=" + reservedPrefixStr + "]");
  }; // 获取box选择器（zego-graphics-box）


  Tool.prototype.getBoxSelHandle = function (graphicID) {
    return "#" + _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.graphicsBox + graphicID;
  }; // 更新offset、scroll: 从白板内部容器"zego-whiteboard-con、zego-docsview-con"开始逐层向上计算


  Tool.prototype.updateOffsetAndScrollHandle = function () {
    this.offsetData = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["getOffsetData"])(this.conNode);
    this.scrollData = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["getScrollData"])(this.conNode);
  }; // 更新图元偏移


  Tool.prototype.updateGraphicsOffsetHandle = function (protoGraphic, moveX, moveY) {
    var x = protoGraphic.x,
        y = protoGraphic.y;
    protoGraphic.x = x + moveX;
    protoGraphic.y = y + moveY;
  }; // 根据鼠标点计算当前移动距离


  Tool.prototype.calMoveHandle = function () {
    var _a = this.mousePoints,
        sx = _a.sx,
        sy = _a.sy,
        ex = _a.ex,
        ey = _a.ey;

    if (sx !== -1 && sy !== -1) {
      this.mousePoints.boxX += ex - sx;
      this.mousePoints.boxY += ey - sy;
      return [ex - sx, ey - sy];
    }

    return [0, 0];
  }; // 更新鼠标点


  Tool.prototype.updateMousePointsHandle = function (x, y) {
    if (x == undefined || y == undefined) {
      this.mousePoints = {
        sx: -1,
        sy: -1,
        ex: -1,
        ey: -1,
        boxX: 0,
        boxY: 0
      };
    } else {
      if (this.mousePoints.ex !== -1 && this.mousePoints.ey !== -1) {
        this.mousePoints.sx = this.mousePoints.ex;
        this.mousePoints.sy = this.mousePoints.ey;
      }

      this.mousePoints.ex = x;
      this.mousePoints.ey = y;
    }
  };
  /**
   * 推送到 service
   * @param {ProtoGraphic[]} list
   * @param {Action} action
   * @returns {void}
   * @memberof Tool
   */


  Tool.prototype.updateToRemoteNewHandle = function (list, action, queue, extraInfo, success, error) {
    if (queue === void 0) {
      queue = true;
    }

    if (!list.length) return;

    if (this.pushClear) {
      this.pushClear = false;
      return;
    } // 过滤多余字段，添加操作类型


    var graphicList = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["transGraphicsData"])(list, action);
    (!extraInfo || !extraInfo.isUndoAndRedo) && (this.redoList.length = 0);

    if (queue) {
      // 构建任务数据
      var length_1 = this.graphicTaskList.length;
      var graphicTask = {
        taskStatus: !length_1 ? _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress : _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].Pending,
        graphicList: graphicList
      };
      !length_1 && this.graphicTaskList.push(graphicTask);
      this.syncUpdateToRemoteQueue(graphicTask, error);
    } else {
      this.unSyncUpdateToRemoteQueue(graphicList, extraInfo, success, error);
    }
  }; // 非队列


  Tool.prototype.unSyncUpdateToRemoteQueue = function (graphicList, extraInfo, success, error) {
    var _this = this;

    this.serviceHandle.updateToRemoteHandle(this.whiteboardID, graphicList, function () {
      if (!extraInfo || !extraInfo.isUndoAndRedo) {
        // 加入undo列表
        var undoData = _this.createUndoData(graphicList);

        _this.undoList.push(undoData);
      }

      success && success();
    }, function (errorData) {
      // 抛出错误
      _services_event__WEBPACK_IMPORTED_MODULE_30__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_30__["ZegoEventType"].Error, errorData);
      error && error(errorData);
    });
  }; // 队列


  Tool.prototype.syncUpdateToRemoteQueue = function (graphicTask, errorCallback) {
    var _this = this;

    if (graphicTask.taskStatus === _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].Pending) {
      // 查找当前是否有pending任务
      var index = this.graphicTaskList.findIndex(function (item) {
        return item.taskStatus === _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].Pending;
      });

      if (index === -1) {
        this.graphicTaskList.push(graphicTask);
      } else {
        this.mergegGraphicTaskList(graphicTask);
      }
    } else {
      this.serviceHandle.updateToRemoteHandle(this.whiteboardID, graphicTask.graphicList, function () {
        _this.graphicTaskCallbackHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ResultType"].success);
      }, function (error) {
        _this.graphicTaskCallbackHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ResultType"].error, errorCallback, error);
      });
    }
  }; // 过滤相关操作：操作本地已存在的图元、创建本端不存在的图元


  Tool.prototype.filterUndoAndRedo = function (graphicList) {
    var _this = this;

    return graphicList.filter(function (protoGraphic) {
      var action = protoGraphic.action,
          graphic_id = protoGraphic.graphic_id; // 查找本地是否存在要操作的图元

      var local = _this.graphicList.some(function (item) {
        return item.graphic_id === graphic_id;
      });

      return !local && action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create || local && (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete || action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move || action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update || action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Append);
    });
  };
  /**
   * 清空页面回退: 用于数据流回放模块
   */


  Tool.prototype.undoClearPage = function () {
    this.clearUndoData && this.updatePushLocalHandle(this.clearUndoData, []);
  }; // undo


  Tool.prototype.undoNewHandle = function () {
    var _this = this; // 存在执行中任务，不允许undo


    if (this.graphicTaskList[0] && this.graphicTaskList[0].taskStatus === _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress) return; // undo、redo任务没有执行完成不允许undo

    if (!this.canDo) return;
    var length = this.undoList.length;
    if (!length) return;
    var undoData = this.filterUndoAndRedo(this.undoList[length - 1]);

    if (!undoData.length) {
      // 舍弃
      this.undoList.pop();
    } else {
      // 发送到远端
      this.canDo = false;
      this.updateToRemoteNewHandle(undoData, undefined, false, {
        isUndoAndRedo: true
      }, function () {
        _this.undoList.pop();

        var copy = JSON.parse(JSON.stringify(undoData)); // 更新本地

        _this.updateLocalHandle(copy); // 取反、更新redoList


        _this.reverseData(copy);

        _this.redoList.push(copy);

        _this.canDo = true;
      }, function (errorData) {
        _this.canDo = true;
      });
    }
  }; // redo


  Tool.prototype.redoNewHandle = function () {
    var _this = this; // 存在执行中任务，不允许redo


    if (this.graphicTaskList[0] && this.graphicTaskList[0].taskStatus === _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress) return; // undo、redo任务没有执行完成不允许undo

    if (!this.canDo) return;
    var length = this.redoList.length;
    if (!length) return;
    var redoData = this.filterUndoAndRedo(this.redoList[length - 1]);

    if (!redoData.length) {
      // 舍弃
      this.redoList.pop();
    } else {
      // 发送到远端
      this.canDo = false;
      this.updateToRemoteNewHandle(redoData, undefined, false, {
        isUndoAndRedo: true
      }, function () {
        _this.redoList.pop();

        var copy = JSON.parse(JSON.stringify(redoData)); // 更新本地

        _this.updateLocalHandle(copy); // 取反、更新undoList


        _this.reverseData(copy);

        _this.undoList.push(copy);

        _this.canDo = true;
      }, function (errorData) {
        _this.canDo = true;
      });
    }
  }; // 根据operate_id查找最后一个满足条件的任务


  Tool.prototype.findLastTaskIndex = function (key, value) {
    var temp = this.graphicTaskList.slice(1);
    temp.reverse();
    var index = temp.findIndex(function (item) {
      return item.graphicList[0][key] === value;
    });

    if (index !== -1) {
      return temp.length - index;
    } else {
      return -1;
    }
  }; // merge move 操作：开始到结束都是 move


  Tool.prototype.mergeMoveActionTaskList = function (insetTask) {
    var operate_id = insetTask.graphicList[0].operate_id; // 查找关联的最后一个 pending 任务
    // 用 operate_id 标识当前任务属于哪一次操作
    // 使用当前操作的图元中第一个即可，前提是数组顺序不变

    var relatedIndex = this.findLastTaskIndex('operate_id', operate_id);

    if (relatedIndex === -1) {
      // 没有关联任务，即第一个任务
      this.graphicTaskList.push(insetTask);
    } else {
      // 有关联任务：覆盖原有
      this.graphicTaskList.splice(relatedIndex + 1, 1, insetTask);
    }
  }; // merge 非 move 操作


  Tool.prototype.mergeOtherActionTaskList = function (insetTask) {
    var type = insetTask.graphicList[0].type;

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text:
        this.mergeTextTaskList(insetTask);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Pencil:
        this.mergePathTaskList(insetTask);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Ellipse:
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Rect:
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Line:
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image:
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage:
        this.mergeOtherTaskList(insetTask);
        break;

      default:
        break;
    }
  }; // merge laser 任务


  Tool.prototype.mergeLaserTaskList = function (insetTask) {
    // 暂时只考虑除 move 是 merge，其他是push，所有操作都是一次完整操作
    var _a = insetTask.graphicList[0],
        action = _a.action,
        graphic_id = _a.graphic_id; // 查找 graphic_id 相同的任务

    if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move) {
      var relatedIndex = this.findLastTaskIndex('graphic_id', graphic_id);

      if (relatedIndex === -1) {
        this.graphicTaskList.push(insetTask);
      } else {
        this.graphicTaskList.splice(relatedIndex, 1, insetTask);
      }
    } else {
      this.graphicTaskList.push(insetTask);
    }
  }; // merge 文本操作：直接 delete 或者 [create -> ]update -> update | delete 或者只有 create


  Tool.prototype.mergeTextTaskList = function (insetTask) {
    var operate_id = insetTask.graphicList[0].operate_id; // 查找关联 pending 任务
    // 用 operate_id 标识当前任务属于哪一次操作
    // 使用当前操作的图元中第一个即可，前提是数组顺序不变

    var relatedIndex = this.findLastTaskIndex('operate_id', operate_id);

    if (relatedIndex === -1) {
      // 没有关联任务，即第一个任务或者唯一一个任务
      this.graphicTaskList.push(insetTask);
    } else {
      // 有关联任务：考虑对端更新与本端的同步效果以及本端的低发送频率，暂定直接追加
      this.graphicTaskList.push(insetTask);
    }
  }; // merge 涂鸦操作：直接 delete 或者 create -> append -> update


  Tool.prototype.mergePathTaskList = function (insetTask) {
    var _a = insetTask.graphicList[0],
        operate_id = _a.operate_id,
        action = _a.action; // 查找关联 pending 任务
    // 用 operate_id 标识当前任务属于哪一次操作
    // 使用当前操作的图元中第一个即可，前提是数组顺序不变

    var relatedIndex = this.findLastTaskIndex('operate_id', operate_id);

    if (relatedIndex === -1) {
      // 没有关联任务，即第一个任务或者唯一一个任务
      this.graphicTaskList.push(insetTask);
    } else {
      // 有关联任务：只对 append 进行 merge，需保留 create
      // 判断关联任务 action
      var relatedTask = this.graphicTaskList[relatedIndex];
      var relatedAction = relatedTask.graphicList[0].action;

      if (relatedAction === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create) {
        this.graphicTaskList.push(insetTask);
      } else {
        if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update) {
          this.graphicTaskList.push(insetTask);
        } else {
          // append
          relatedTask.graphicList.forEach(function (item, index) {
            item.data = item.data.concat(insetTask.graphicList[index].data);
          });
        }
      }
    }
  }; // merge 其他图元操作：直接 delete 或者 create [-> update]


  Tool.prototype.mergeOtherTaskList = function (insetTask) {
    var operate_id = insetTask.graphicList[0].operate_id; // 查找关联 pending 任务
    // 用 operate_id 标识当前任务属于哪一次操作
    // 使用当前操作的图元中第一个即可，前提是数组顺序不变

    var relatedIndex = this.findLastTaskIndex('operate_id', operate_id);

    if (relatedIndex === -1) {
      // 没有关联任务，即第一个任务或者唯一一个任务
      this.graphicTaskList.push(insetTask);
    } else {
      // 有关联任务：只对 update 进行 merge，需保留 create
      // 判断关联任务 action
      var relatedAction = this.graphicTaskList[relatedIndex].graphicList[0].action;

      if (relatedAction === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create) {
        this.graphicTaskList.push(insetTask);
      } else {
        this.graphicTaskList.splice(relatedIndex, 1, insetTask);
      }
    }
  }; // merge 任务


  Tool.prototype.mergegGraphicTaskList = function (insetTask) {
    var _a = insetTask.graphicList[0],
        action = _a.action,
        type = _a.type;

    if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser) {
      this.mergeLaserTaskList(insetTask);
    } else {
      if (action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move) {
        this.mergeMoveActionTaskList(insetTask);
      } else {
        this.mergeOtherActionTaskList(insetTask);
      }
    }
  };
  /**
   * 处理实时同步本地推送结果
   * @param {ResultType} resultType
   * @param {any} customInfo
   * @returns {void}
   * @memberof Tool
   */


  Tool.prototype.graphicTaskCallbackHandle = function (resultType, errorCallback, errorData) {
    var firstTask = this.graphicTaskList[0];
    if (!firstTask) return;

    if (firstTask.taskStatus === _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress) {
      var _a = firstTask.graphicList[0],
          is_end_draw = _a.is_end_draw,
          type = _a.type,
          action = _a.action,
          graphic_id = _a.graphic_id;

      if (is_end_draw) {
        if (resultType === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ResultType"].success) {
          // 加入undo
          if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser && type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage) {
            var undoData = this.createUndoData(firstTask.graphicList);
            this.undoList.push(undoData);
          }
        } else {
          // 回退
          if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser) {
            var undoData = this.createUndoData(firstTask.graphicList);
            this.updateLocalHandle(undoData);
          }

          if (errorCallback) {
            errorCallback && errorCallback(errorData);
          } else {
            // 抛出错误
            _services_event__WEBPACK_IMPORTED_MODULE_30__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_30__["ZegoEventType"].Error, errorData);
          }
        }
      } else {
        if (resultType === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ResultType"].error) {
          if (errorCallback) {
            errorCallback && errorCallback(errorData);
          } else {
            // 抛出错误
            _services_event__WEBPACK_IMPORTED_MODULE_30__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_30__["ZegoEventType"].Error, errorData);
          }
        }
      } // 清除执行中任务


      this.graphicTaskList.shift();
      var cacheTask = this.graphicTaskList[0];
      cacheTask && (cacheTask.taskStatus = _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress) && this.syncUpdateToRemoteQueue(cacheTask);
    } else {
      firstTask.taskStatus = _entities_view__WEBPACK_IMPORTED_MODULE_28__["TaskStatus"].InProgress;
      this.syncUpdateToRemoteQueue(firstTask);
    }
  };
  /**
   * 更新本地（本端回退）
   * @param {ProtoGraphic[]} graphicList
   * @param {string[]} [delGraphicList]
   * @memberof Tool
   */


  Tool.prototype.updateLocalHandle = function (graphicList) {
    var _this = this; // Logger.info(logAction('gra.draw_local'), JSON.stringify(graphicList));


    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.draw_local', JSON.stringify(graphicList));
    this.updateOffsetAndScrollHandle();
    var textTool = this.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText);
    var svgTool = this.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);
    var selectorTool = this.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector);
    selectorTool.hideImageEditBox();
    selectorTool.hideSelectBox();
    graphicList.forEach(function (protoGraphic) {
      var action = protoGraphic.action;

      switch (action) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete:
          _this.deleteHandle(protoGraphic.graphic_id, protoGraphic.type);

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create:
          if (protoGraphic.type == _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage) {} else {
            _this.createHandle(protoGraphic, textTool, svgTool);

            _this.updateBoxHandle(protoGraphic);
          }

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Move:
          _this.moveHandle(protoGraphic, svgTool);

          _this.updateBoxHandle(protoGraphic);

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Update:
          if (protoGraphic.type == _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage) {
            _this.updateHandle(protoGraphic, textTool, svgTool);
          } else {
            _this.updateHandle(protoGraphic, textTool, svgTool);

            _this.updateBoxHandle(protoGraphic);
          }

          break;

        default:
          break;
      }
    });
  };

  Tool.prototype.updatePushLocalHandle = function (graphicList, delGraphicList) {
    var _this = this; // Logger.info(
    //     logAction('gra.remote_draw'),
    //     JSON.stringify({ graphicList, delGraphicList, actionMsg: 'transValue' })
    // );


    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.remote_draw', JSON.stringify({
      graphicList: graphicList,
      delGraphicList: delGraphicList,
      actionMsg: 'transValue'
    }));
    this.updateOffsetAndScrollHandle();
    graphicList.sort(function (a, b) {
      return (a.zorder || 0) - (b.zorder || 0);
    });
    delGraphicList.forEach(function (graphicID) {
      return _this.deleteHandle(graphicID);
    });
    var laserTool = this.instancesMap[_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser];
    var textTool = this.instancesMap[_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText];
    var svgTool = this.instancesMap[_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine];
    var selectorTool = this.instancesMap[_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector]; // 收到远端操作时，处理本端选择框

    selectorTool && selectorTool.updateSelectorBoxHandle(graphicList, delGraphicList);
    graphicList.forEach(function (graphic) {
      var _a;

      var graphic_id = graphic.graphic_id,
          type = graphic.type; // 判断本端图元是否已存在

      var isExit = _this.graphicList.some(function (item) {
        if (graphic_id === item.graphic_id) {
          if (graphic.type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].RealTime) {
            Object.assign(item, graphic);

            if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) {
              Object.assign(item.data, graphic.data);
            }
          }

          return true;
        }

        return false;
      });

      if (!isExit) {
        if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) {
          graphic.oldData = __assign({}, graphic.data);
        }

        _this.graphicList.push(graphic);
      }

      var id = "#" + _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.graphicsBox + graphic_id;
      isExit = isExit && !!_this.whiteboardNode.querySelector(id);

      switch (type) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Cursor:
          (_a = _this.customCursor) === null || _a === void 0 ? void 0 : _a.drawGraphicsHandle(graphic, false);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser:
          laserTool.drawGraphicsHandle(graphic, false);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text:
          if (isExit) {
            textTool.updateGraphicsHandle(graphic);
          } else {
            textTool.drawGraphicsHandle(graphic, false);
          }

          _this.updateBoxHandle(graphic);

          break;

        default:
          if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].RealTime) {
            _this.realTimeHandle(svgTool, graphic);
          } else {
            if (isExit) {
              if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Pencil && graphic.is_end_draw && _this.graphicExtraMap[graphic_id]) {
                _this.clearRealTimeInterval(graphic_id); // Logger.info(logAction('gra.remote_draw_realtime_end'), graphic_id);


                _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.remote_draw_realtime_end', graphic_id);
              }

              svgTool.updateGraphicsHandle(graphic);
            } else {
              svgTool.drawGraphicsHandle(graphic, _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicOperateType"].Remote);
            }

            _this.updateBoxHandle(graphic);
          }

          break;
      }
    });
  };
  /**
   * 删除图元相关
   * @param {string} graphicID
   * @memberof Tool
   */


  Tool.prototype.deleteHandle = function (graphicID, type) {
    var _a, _b;

    var graphic = this.graphicList.find(function (g) {
      return g.graphic_id == graphicID;
    });

    if ((graphic === null || graphic === void 0 ? void 0 : graphic.type) == _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Cursor) {
      (_a = this.customCursor) === null || _a === void 0 ? void 0 : _a.deleteCursorElement(graphicID);
    }

    if (type == _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage) {
      this.background.updateToLocal(true).clearBackgroundImage();
    } else {
      // 移除box
      Object(_utils__WEBPACK_IMPORTED_MODULE_27__["removeElement"])(this.getBoxHandle(graphicID)); // 移除图元dom（svg类图元要把svg也移除）

      var dom = this.getGraphicsHandle(graphicID);
      Object(_utils__WEBPACK_IMPORTED_MODULE_27__["removeElement"])((dom === null || dom === void 0 ? void 0 : dom.tagName) === 'g' ? dom.parentNode : dom); // 删除图元data

      var index = this.graphicList.findIndex(function (item) {
        return item.graphic_id === graphicID;
      });

      if (index !== -1) {
        var taskId = (_b = this.graphicExtraMap[graphicID]) === null || _b === void 0 ? void 0 : _b.realTimeId;
        taskId && clearInterval(taskId);
        this.graphicList.splice(index, 1);
      }
    }
  }; // 无则添加，有则更新


  Tool.prototype.updateBoxHandle = function (graphic, eventType) {
    if (graphic.type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser) return null;
    var rect = this.getBoxInfoByGraphic(graphic);
    if (!rect) return null;
    var x = rect.x,
        y = rect.y,
        width = rect.width,
        height = rect.height;
    var type = graphic.type,
        graphic_id = graphic.graphic_id,
        selected = graphic.selected,
        zorder = graphic.zorder;
    var boxDom = this.getBoxHandle(graphic_id);

    if (!boxDom) {
      boxDom = document.createElement('div');
      boxDom.setAttribute('id', "" + _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.graphicsBox + graphic_id);

      if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text) {
        boxDom.style.pointerEvents = 'initial';
      }

      var insert = null;

      if (zorder) {
        var arr = this.graphicsBoxConNode.querySelectorAll('[data-z]');

        for (var i = 0; i < arr.length; i++) {
          if (+(arr[i].getAttribute('data-z') || '') > zorder) {
            insert = arr[i];
            break;
          }
        }
      }

      this.graphicsBoxConNode.insertBefore(boxDom, insert);
      zorder && this.updateGraphicsDomIndex(zorder);
    }

    var border = selected && eventType !== true ? _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].selectedBorderCss : _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].unSelectedBorderCss;
    var css = "width:" + width + "px;height:" + height + "px;border:" + border + ";"; // 在文本失焦后，只更新大小，不更新位置

    if (eventType !== 'blur') {
      css += "left:" + x + "px;top:" + y + "px;";
    }

    boxDom.style.cssText += css;
    zorder && boxDom.setAttribute('data-z', zorder + '');
    return boxDom;
  };

  Tool.prototype.updateBoxBorder = function (graphic, hide) {
    if (graphic.type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser) {
      var boxDom = this.getBoxHandle(graphic.graphic_id);

      if (boxDom) {
        boxDom.style.border = graphic.selected && !hide ? _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].selectedBorderCss : _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].unSelectedBorderCss;
      }
    }
  }; // 同时创建图元时，保证svg的顺序一致


  Tool.prototype.updateGraphicsDomIndex = function (zorder) {
    var _this = this;

    var boxIds = Array.from(this.graphicsBoxConNode.querySelectorAll("[data-z=\"" + zorder + "\"]")).map(function (v) {
      return v.id.replace(/\D/g, '');
    });

    if (boxIds.length > 1) {
      var doms_1 = Array.from(this.graphicsConNode.querySelectorAll("[data-z=\"" + zorder + "\"]"));
      var domIds_1 = doms_1.map(function (v) {
        return v.id.replace(/\D/g, '');
      }); // box 和 svg 的顺序不一致时，重新排序 svg

      if (boxIds.join() !== domIds_1.join()) {
        var insert_1 = doms_1[doms_1.length - 1].nextSibling;
        boxIds.forEach(function (boxId) {
          _this.graphicsConNode.insertBefore(doms_1[domIds_1.findIndex(function (id) {
            return id === boxId;
          })], insert_1);
        });
      }
    }
  };

  Tool.prototype.getInstanceHandle = function (type) {
    var instance = this.instancesMap[type];

    if (!instance) {
      switch (type) {
        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser:
          instance = new _laser__WEBPACK_IMPORTED_MODULE_31__["Laser"](this);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine:
          instance = new _svg__WEBPACK_IMPORTED_MODULE_32__["SvgGraphics"](this);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText:
          instance = new _textarea__WEBPACK_IMPORTED_MODULE_33__["TextareaGraphics"](this);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEraser:
          instance = new _eraser__WEBPACK_IMPORTED_MODULE_34__["Eraser"](this);
          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector:
          instance = new _selector__WEBPACK_IMPORTED_MODULE_35__["Selector"](this);
          break;
      }

      this.instancesMap[type] = instance;
    }

    return instance;
  };

  Tool.prototype.getUserID = function () {
    return this.serviceHandle.getUserID();
  };

  Tool.prototype.getUserAuth = function () {
    return this.serviceHandle.getUserAuth();
  };

  Tool.prototype.getRoomState = function () {
    return this.serviceHandle.getRoomState();
  };
  /**
   * 获取box dom
   * <div id="zego-graphics-box"><div>
   * @param {string} graphicID
   * @returns {(HTMLElement | null)}
   * @memberof Tool
   */


  Tool.prototype.getBoxHandle = function (graphicID) {
    var selector = this.getBoxSelHandle(graphicID);
    return this.userNode.querySelector(selector);
  };

  Tool.prototype.setGraphicsDomZorder = function (graphic) {
    var graphic_id = graphic.graphic_id,
        type = graphic.type,
        zorder = graphic.zorder;
    var _a = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix,
        textareaCon = _a.textareaCon,
        graphicsSvg = _a.graphicsSvg,
        graphicsBox = _a.graphicsBox;
    var id = type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text ? "#" + textareaCon + graphic_id : "#" + graphicsSvg + graphic_id;
    var dom = this.whiteboardNode.querySelector(id);

    if (dom && zorder) {
      dom.setAttribute('data-z', zorder + '');
    }

    id = "#" + graphicsBox + graphic_id;
    dom = this.whiteboardNode.querySelector(id);

    if (dom && zorder) {
      dom.setAttribute('data-z', zorder + '');
    }
  };

  Tool.prototype.appendGraphicsDomHandle = function (graphicsDom, type) {
    if (_entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Laser === type) {
      this.graphicsConNode.appendChild(graphicsDom);
    } else {
      var zorder = +(graphicsDom.getAttribute('data-z') || '');

      if (zorder) {
        var arr = this.graphicsConNode.querySelectorAll('[data-z]');

        for (var i = 0; i < arr.length; i++) {
          if (+(arr[i].getAttribute('data-z') || '') > zorder) {
            this.graphicsConNode.insertBefore(graphicsDom, arr[i]);
            return;
          }
        }
      }

      var insert = this.graphicsConNode.querySelector("[id^=" + _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.laserCon + "]");
      this.graphicsConNode.insertBefore(graphicsDom, insert);
    }
  };

  Tool.prototype.getImageDomHandle = function (id) {
    var _a = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix,
        graphics = _a.graphics,
        graphicsBox = _a.graphicsBox;
    return [this.userNode.querySelector("#" + graphics + id), this.userNode.querySelector("#" + graphicsBox + id)];
  };

  Tool.prototype.appendImageDomHandle = function (id, zorder) {
    var _a = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix,
        graphicsSvg = _a.graphicsSvg,
        graphics = _a.graphics,
        laserCon = _a.laserCon,
        graphicsBox = _a.graphicsBox; // 先创建 <image>，图片下载后更新属性

    var gDom = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    var graphicDom = document.createElementNS('http://www.w3.org/2000/svg', 'image');
    graphicDom.id = "" + graphics + id;
    gDom.appendChild(graphicDom); // 创建 svg

    var svgDom = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svgDom.id = "" + graphicsSvg + id;
    svgDom.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
    svgDom.setAttribute('version', '1.1');
    svgDom.appendChild(gDom); // 创建 box

    var boxDom = document.createElement('div');
    boxDom.id = "" + graphicsBox + id; // 找出插入位置

    if (zorder) {
      svgDom.setAttribute('data-z', zorder + '');
      boxDom.setAttribute('data-z', zorder + '');
      var arr = this.graphicsConNode.querySelectorAll('[data-z]');

      for (var i = 0; i < arr.length; i++) {
        if (+(arr[i].getAttribute('data-z') || '') > zorder) {
          this.graphicsConNode.insertBefore(svgDom, arr[i]);
          var insert_2 = this.graphicsBoxConNode.querySelectorAll('[data-z]')[i];
          this.graphicsBoxConNode.insertBefore(boxDom, insert_2);
          return;
        }
      }
    }

    var insert = this.graphicsConNode.querySelector("[id ^= " + laserCon + "]");
    this.graphicsConNode.insertBefore(svgDom, insert);
    this.graphicsBoxConNode.appendChild(boxDom);
  };

  Tool.prototype.resetImageBox = function () {
    var _this = this; // 校验box位置


    this.graphicList.forEach(function (v) {
      if (v.type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image) return;

      var boxDom = _this.getBoxHandle(v.graphic_id);

      var top = v.y + (v.initY || 0);

      if (boxDom && Math.abs(Number(boxDom.style.top.replace('px', '')) - top) > 3) {
        _this.updateBoxHandle(v);
      }
    });
  };

  Tool.prototype.checkMultipointHandle = function (event) {
    if (event.touches.length > 1) {
      return true;
    } else {
      return false;
    }
  };

  Tool.prototype.downCommonHandle = function (event) {
    if (window.TouchEvent && event instanceof TouchEvent) {
      if (this.checkMultipointHandle(event)) {
        return false;
      } else {
        // 该判断是为了处理selector的touchstart事件被阻止后影响textarea的blur。
        if (event.type !== 'touchstart') {
          // 目的是阻止鼠标拖拽影响页面
          event.preventDefault();
        }
      }
    } else if (event instanceof MouseEvent && (event.button || event.type !== 'mouseup' && !event.buttons)) {
      // 按下右键 或者 鼠标漂浮
      return false;
    }

    this.updateOffsetAndScrollHandle();
    return true;
  };

  Tool.prototype.updateProtoGraphic = function (map) {
    if (!map) {
      //@ts-ignore init
      var type = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].basicState.type;
      this.protoGraphic = __assign(__assign({
        zorder: 0,
        graphic_id: '',
        data: [],
        oldData: '',
        selected: false,
        x: 0,
        y: 0,
        px: 0,
        py: 0
      }, _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].basicState), {
        type: type,
        operate_id: '',
        is_end_draw: true
      });
    } else {
      // update
      Object.assign(this.protoGraphic, map);
    }
  };

  Tool.prototype.updateGraphicsDataHandle = function (point) {
    var data = null;

    switch (this.protoGraphic.type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Pencil:
        data = this.protoGraphic.data;

        if (!(data[data.length - 2] === point.clientX && data[data.length - 1] === point.clientY)) {
          data.push(point.clientX);
          data.push(point.clientY);
        }

        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image:
        data = this.protoGraphic.data;
        data.ex = point.clientX;
        data.ey = point.clientY;
        break;

      default:
        data = this.protoGraphic.data;
        data.splice(2, 2, point.clientX, point.clientY);
        break;
    }
  };

  Tool.prototype.initDrawHandle = function () {
    this.updateProtoGraphic();
    this.updateMousePointsHandle();
  };

  Tool.prototype.getBoxInfoByGraphic = function (graphic) {
    var type = graphic.type,
        graphic_id = graphic.graphic_id;
    var graphicsDom = this.getGraphicsHandle(graphic_id);
    if (!graphicsDom) return null; // 目前仅笔锋的点不需要取整

    var isFloat = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["isFloatGraphic"])(graphic);
    var size = type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Text || type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Image ? 0 : graphic.size || _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].basicState.size;
    var _a = this.viewInfo,
        zoom = _a.zoom,
        offsetPageY = _a.offsetPageY,
        isScroll = _a.isScroll;
    var border = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].boxBorderWidth;

    var _b = graphicsDom.getBoundingClientRect(),
        left = _b.left,
        top = _b.top,
        width = _b.width,
        height = _b.height; // reloadView ppt 文件时，获取的 top 值不对


    if (!isScroll && top > offsetPageY && this.isReloading) {
      top -= offsetPageY;
    }

    var _c = this.transLocationHandle({
      clientX: left,
      clientY: top
    }, isFloat),
        clientX = _c.clientX,
        clientY = _c.clientY;

    left = Math.floor(clientX - border - size / 2);
    top = Math.floor(clientY - border - size / 2);
    width = Math.ceil(width / zoom + size + border);
    height = Math.ceil(height / zoom + size + border);
    return {
      x: left,
      y: top,
      width: width,
      height: height
    };
  };

  Tool.prototype.getMouseStartPoint = function (event, isFloat) {
    var result;

    if (event instanceof MouseEvent) {
      // pc
      var _a = event,
          clientX = _a.clientX,
          clientY = _a.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      }, isFloat);
    } else {
      // mobile
      var _b = event.touches[0],
          clientX = _b.clientX,
          clientY = _b.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      }, isFloat);
    }

    return result;
  };

  Tool.prototype.getMouseChangedPoint = function (event, isFloat) {
    var result;

    if (event instanceof MouseEvent) {
      var _a = event,
          clientX = _a.clientX,
          clientY = _a.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      }, isFloat);
    } else {
      var _b = event.changedTouches[0],
          clientX = _b.clientX,
          clientY = _b.clientY;
      result = this.transLocationHandle({
        clientX: clientX,
        clientY: clientY
      }, isFloat);
    }

    return result;
  }; // 获取白板的视窗的可绘制区域


  Tool.prototype.getWhiteboardNodeRect = function () {
    var _a = this.offsetData,
        offsetLeft = _a.offsetLeft,
        offsetTop = _a.offsetTop;
    var _b = this.viewInfo,
        zoom = _b.zoom,
        viewWidth = _b.viewWidth,
        viewHeight = _b.viewHeight;

    if (zoom > 1) {
      return {
        left: offsetLeft,
        top: offsetTop,
        right: offsetLeft + viewWidth,
        bottom: offsetTop + viewHeight
      };
    } else {
      return this.whiteboardNode.getBoundingClientRect();
    }
  }; // 触屏设备划出 DOM，模拟 mouseleave


  Tool.prototype.isTouchLeaveWhenMove = function (event, touchLeaveRect) {
    if (_entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].isTouch && window.TouchEvent && event instanceof TouchEvent) {
      var _a = event.changedTouches[0],
          clientX = _a.clientX,
          clientY = _a.clientY;
      var left = touchLeaveRect.left,
          right = touchLeaveRect.right,
          top_1 = touchLeaveRect.top,
          bottom = touchLeaveRect.bottom;
      return clientX <= left || clientX >= right || clientY <= top_1 || clientY >= bottom;
    }

    return false;
  };

  Tool.prototype.setDataToGraphicList = function (graphicId) {
    var keyValueMaps = [];

    for (var _i = 1; _i < arguments.length; _i++) {
      keyValueMaps[_i - 1] = arguments[_i];
    }

    for (var index = 0, len = this.graphicList.length; index < len; index++) {
      var item = this.graphicList[index];

      if (graphicId === item.graphic_id) {
        Object.assign.apply(Object, __spreadArrays([item], keyValueMaps));
        break;
      }
    }
  };

  Tool.prototype.getDataFromGraphicList = function (graphicId) {
    var keys = [];

    for (var _i = 1; _i < arguments.length; _i++) {
      keys[_i - 1] = arguments[_i];
    }

    var result = {};

    var _loop_1 = function _loop_1(index, len) {
      var item = this_1.graphicList[index];

      if (graphicId === item.graphic_id) {
        keys.forEach(function (key) {
          // @ts-ignore
          result[key] = item[key];
        });
        return "break";
      }
    };

    var this_1 = this;

    for (var index = 0, len = this.graphicList.length; index < len; index++) {
      var state_1 = _loop_1(index, len);

      if (state_1 === "break") break;
    }

    return result;
  }; // 筛选出本地已存在指定图元数据


  Tool.prototype.filterExistingHandle = function (graphicList) {
    var _this = this;

    return graphicList.filter(function (item) {
      var id = item.graphic_id;
      return item.action === _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Create || _this.graphicList.some(function (v) {
        return v.graphic_id === id;
      });
    });
  };

  Tool.prototype.clearLocalHandle = function () {
    var _a; // 清空本地任务队列


    this.graphicTaskList.length = 0; // 清除当前事件

    var type = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].basicState.type;

    if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick && !type) {
      // 过滤点击、拖拽
      var instance = this.getInstanceHandle(type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen || type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolRect || type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEllipse || type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhitebaordViewToolCustomImage ? _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine : type);
      instance.removeEventsHandle();
      instance.bindEventsHandle();
    } // 清空undo、redo列表


    this.clearUndoData = JSON.parse(JSON.stringify(this.graphicList));
    this.undoList.length = 0;
    this.redoList.length = 0;
    this.pushClear = true; // 查找本端激光笔，用于清空后在原位置重新创建一个

    var laserTool = this.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser);
    var laserData = laserTool.findLaserHandle();
    var bgImageGraphic = this.graphicList.find(function (g) {
      return g.type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage;
    });
    var cursorGraphics = this.graphicList.filter(function (g) {
      return g.type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].Cursor;
    });
    this.graphicList.length = 0;

    if (bgImageGraphic) {
      this.graphicList.push(bgImageGraphic);
    }

    (_a = this.graphicList).push.apply(_a, cursorGraphics);

    this.graphicsConNode.innerHTML = '';
    laserData && laserTool.addLaserHandle(laserData);
  };

  Tool.prototype.reverseZoomHandle = function (type) {
    var _this = this; // 目前只有激光笔需要反向缩放


    if (type === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser) {
      var zoom_1 = this.viewInfo.zoom;
      var laserConDoms = this.batchGetGraphicsHandle(this.graphicsConNode, _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].reservedPrefix.laserCon);
      laserConDoms.forEach(function (item) {
        // 默认都会添加transform: translate(0px, 0px)  或 transform: translate(-100px, -100px)
        var oldTransformStr = item.style.transform;

        var _a = _this.getTranslateXY(oldTransformStr),
            x = _a.x,
            y = _a.y;

        item.style.transform = "translate(" + x + "px, " + y + "px) scale(" + 1 / zoom_1 + ")";
      });
    }
  }; // 获取图元是否已结束绘制


  Tool.prototype.getGraphicIsEndDraw = function (graphic_id) {
    return this.serviceHandle.getGraphicIsEndDraw(graphic_id);
  }; // 清除指定页图元


  Tool.prototype.clearPage = function (page) {
    if (!this.enableDraw) return; // 更新所有图元的页码信息

    this.updateGraphicPage(); // 删除指定页码的图元

    this.graphicList.forEach(function (item) {
      var _a;

      item.selected = (_a = item.page) === null || _a === void 0 ? void 0 : _a.includes(page);
    });
    this.deleteSelectedGraphics(_entities_view__WEBPACK_IMPORTED_MODULE_28__["DeleteGraphicAction"].ClearPage);
  }; // 删除已选图元


  Tool.prototype.deleteSelectedGraphics = function (action) {
    var _this = this;

    if (!this.enableDraw) return;
    var userId = this.getUserID();
    var canDelete = this.getUserAuth()["delete"];
    var count = 0;
    var count1 = 0; // 删除条件：选中 + 有权删除 + 图元已结束操作

    var arr = this.graphicList.filter(function (item) {
      var f = !!item.selected && item.type !== _entities_view__WEBPACK_IMPORTED_MODULE_28__["GraphicType"].BgImage && _this.getGraphicIsEndDraw(item.graphic_id);

      var auth = canDelete || userId === item.creator_id;
      f && count++;
      f && auth && count1++;
      return f && auth;
    }); // 发送无权限错误

    count !== count1 && Object(_entities_error__WEBPACK_IMPORTED_MODULE_38__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthDeleteGraphic);
    if (!arr.length) return;
    var selectorTool = this.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector);
    selectorTool.hideImageEditBox();
    selectorTool.hideSelectBox();
    arr.forEach(function (item) {
      item.is_end_draw = true;
      item.operate_id = Object(_utils__WEBPACK_IMPORTED_MODULE_27__["createGraphicId"])();

      _this.deleteHandle(item.graphic_id);
    }); // Logger.info(
    //     logAction('mod.deleteSelectedGraphics'),
    //     JSON.stringify({ action, page: this.viewInfo.page, params: arr.map((v) => v.graphic_id + ',' + v.page) })
    // );

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_39__["Logger"].getInstance().info(['Whiteboard_View'], 'gra.deleteSelectedGraphics', JSON.stringify({
      action: action,
      page: this.viewInfo.page,
      params: arr.map(function (v) {
        return v.graphic_id + ',' + v.page;
      })
    }));
    this.updateToRemoteNewHandle(arr, _entities_view__WEBPACK_IMPORTED_MODULE_28__["Action"].Delete);
  }; // 更新图元属性中的对应页码


  Tool.prototype.updateGraphicPage = function () {
    var _this = this; // 存在盒子的图元列表


    var existBoxGraphicList = this.graphicList.filter(function (graphicItem) {
      return _this.graphicsBoxConNode.querySelector(_this.getBoxSelHandle(graphicItem.graphic_id));
    });

    if (this.viewInfo.vpageAspecCache) {
      existBoxGraphicList.forEach(function (graphicItem) {
        var graphicBoxDom = _this.graphicsBoxConNode.querySelector(_this.getBoxSelHandle(graphicItem.graphic_id));

        var _a = graphicBoxDom ? graphicBoxDom : {
          offsetTop: 0,
          offsetHeight: 0
        },
            offsetTop = _a.offsetTop,
            offsetHeight = _a.offsetHeight;

        var pages = _this.getPageByAspec(offsetTop, offsetTop + offsetHeight); // 添加页码信息


        graphicItem.page = pages || [_this.viewInfo.page || 1];
      });
    } else {
      var file = this.serviceHandle.getFileInfo(this.whiteboardID);

      if (!file && this.conNode) {
        // 纯白板。
        existBoxGraphicList.forEach(function (graphicItem) {
          var graphicBoxDom = _this.graphicsBoxConNode.querySelector(_this.getBoxSelHandle(graphicItem.graphic_id));

          var pages = []; // 水平

          if (_this.viewInfo.direction === 1) {
            var _a = graphicBoxDom ? graphicBoxDom : {
              offsetLeft: 0,
              offsetWidth: 0
            },
                offsetLeft = _a.offsetLeft,
                offsetWidth = _a.offsetWidth;

            pages = _this.getPageByViewInfo(offsetLeft, offsetLeft + offsetWidth, _this.viewInfo.viewWidth);
          } else {
            // 垂直或单页
            var _b = graphicBoxDom ? graphicBoxDom : {
              offsetTop: 0,
              offsetHeight: 0
            },
                offsetTop = _b.offsetTop,
                offsetHeight = _b.offsetHeight;

            pages = _this.getPageByViewInfo(offsetTop, offsetTop + offsetHeight, _this.viewInfo.viewHeight);
          }

          graphicItem.page = pages || [_this.viewInfo.page || 1];
        });
      } else {
        this.graphicList.forEach(function (graphicItem) {
          // 给当前操作的图元添加页码信息
          graphicItem.page = [_this.viewInfo.page || 1];
        });
      }
    }
  }; // 根据页码间隔确定dom页码,文件白板


  Tool.prototype.getPageByAspec = function (domTop, domBottom) {
    var aspec = this.viewInfo.vpageAspecCache; // 如果只有单页的文件进入则直接返回1

    if (!aspec.hasOwnProperty('2')) return [1]; // 起点页

    var start = aspec.vs; // 累加的值，默认值为第一页的高度

    var accValue = aspec[start].h; // 计算domTop的范围

    while (accValue <= domTop) {
      if (!aspec[start + 1]) {
        break;
      } // 累加下一页的值，而不是当前页的值


      accValue += aspec[start + 1].h;
      start++;
    }

    var end = start;

    while (accValue <= domBottom) {
      if (!aspec[end + 1]) {
        break;
      }

      accValue += aspec[end + 1].h;
      end++;
    } // 如果两个相等就说明在同一页。


    if (end === start) return [aspec[start].p]; // 图元跨2页以上的情况

    if (end - start > 1) {
      var middlePages = new Array(end - start - 1).fill(null);
      middlePages = middlePages.map(function (item, ind) {
        return aspec[start + ind + 1].p;
      });
      return __spreadArrays([aspec[start].p], middlePages, [aspec[end].p]);
    }

    return [aspec[start].p, aspec[end].p];
  }; // 根据白板渲染尺寸确定dom页码。


  Tool.prototype.getPageByViewInfo = function (domStart, domEnd, viewport) {
    var start = Math.floor(domStart / viewport) + 1;
    var end = Math.floor(domEnd / viewport) + 1;
    if (end === start) return [start]; // 白板图元跨两页的情况

    if (end - start > 1) {
      var middlePages = new Array(end - start - 1).fill(null).map(function (item, ind) {
        return start + ind + 1;
      });
      return __spreadArrays([start], middlePages, [end]);
    }

    return [start, end];
  };

  Tool.prototype.toolAddEL = function (dom, eventKey, func) {
    dom.addEventListener(eventKey, func); // @ts-ignore

    var touchEvent = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].mouseEvents[eventKey];
    touchEvent && dom.addEventListener(touchEvent, func);
  };

  Tool.prototype.toolRmEl = function (dom, eventKey, func) {
    dom.removeEventListener(eventKey, func); // @ts-ignore

    var touchEvent = _entities_store__WEBPACK_IMPORTED_MODULE_29__["default"].mouseEvents[eventKey];
    touchEvent && dom.removeEventListener(touchEvent, func);
  }; // 更新 offsetPageX、offsetPage


  Tool.prototype.updateOffsetPage = function () {
    var _a = this.viewInfo,
        page = _a.page,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        direction = _a.direction,
        isScroll = _a.isScroll;

    if (!isScroll) {
      if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_28__["ZegoWhiteboardViewScrollDirection"].Horizontal) {
        this.viewInfo.offsetPageX = (page - 1) * viewWidth;
      } else {
        this.viewInfo.offsetPageY = (page - 1) * viewHeight;
      }
    }
  };

  return Tool;
}();



/***/ }),

/***/ "./sdk/whiteboard/view/views/viewMod.ts":
/*!**********************************************!*\
  !*** ./sdk/whiteboard/view/views/viewMod.ts ***!
  \**********************************************/
/*! exports provided: ZegoWhiteboardViewImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardViewImpl", function() { return ZegoWhiteboardViewImpl; });
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.assign.js */ "./node_modules/core-js/modules/es.object.assign.js");
/* harmony import */ var core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.object.freeze.js */ "./node_modules/core-js/modules/es.object.freeze.js");
/* harmony import */ var core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_freeze_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");
/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ "./node_modules/core-js/modules/es.array.map.js");
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.array.from.js */ "./node_modules/core-js/modules/es.array.from.js");
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "./node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ "./node_modules/core-js/modules/es.string.includes.js");
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! core-js/modules/es.array.some.js */ "./node_modules/core-js/modules/es.array.some.js");
/* harmony import */ var core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_some_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ "./node_modules/core-js/modules/es.array.filter.js");
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");
/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! core-js/modules/es.string.starts-with.js */ "./node_modules/core-js/modules/es.string.starts-with.js");
/* harmony import */ var core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var _entities_store__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../entities/store */ "./sdk/whiteboard/view/entities/store.ts");
/* harmony import */ var _services_event__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _entities_error__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../entities/error */ "./sdk/whiteboard/view/entities/error.ts");
/* harmony import */ var _tool__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./tool */ "./sdk/whiteboard/view/views/tool.ts");
/* harmony import */ var _snapshot__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./snapshot */ "./sdk/whiteboard/view/views/snapshot.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../utils */ "./sdk/whiteboard/view/utils/index.ts");
/* harmony import */ var _utils_store__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../utils/store */ "./sdk/whiteboard/view/utils/store.ts");
/* harmony import */ var _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../docsview/view/Bridge */ "./sdk/docsview/view/Bridge.ts");
/* harmony import */ var _entities_view__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../entities/view */ "./sdk/whiteboard/view/entities/view.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }





























var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









 // const logAction = getLogAction.bind(null, 'wb.v.');



var ZegoWhiteboardViewImpl =
/** @class */
function () {
  function ZegoWhiteboardViewImpl(whiteboardID, serviceHandle) {
    var _this = this; // 白板操作模式


    this.operationModes = Object.freeze({
      none: false,
      scroll: true,
      draw: true,
      scale: true
    });
    this.canDraw = true; // 白板是否可绘制图元

    this.activited = false;
    this.viewInfo = {};
    this.scaleInfo = {
      x: -1,
      y: -1,
      syncTimer: 0
    };
    this.snapshotInstances = {}; // 储存截图实例

    this.handleDragStart = function (event) {
      if (!_this.operationModes.scale || !_this.toolInstance.getUserAuth().scale) return;
      _this.viewInfo.zoomX = _this.viewInfo.zoomY = 0;

      if (_this.viewInfo.zoom > 1 && !_this.canDraw && _this.parentDom) {
        var _a = event instanceof MouseEvent ? event : event.changedTouches[0],
            clientX = _a.clientX,
            clientY = _a.clientY;

        _this.viewInfo.zoomX = clientX;
        _this.viewInfo.zoomY = clientY;
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'handleDragStart', JSON.stringify({
          clientX: clientX,
          clientY: clientY
        }));
      }
    };

    this.handleDragEnd = function (event) {
      _this.handleDragMove(event, true);
    };

    this.handleDragMove = function (event, end) {
      if (!_this.operationModes.scale || !_this.toolInstance.getUserAuth().scale) return;

      if (_this.viewInfo.zoom > 1 && _this.viewInfo.zoomX && !_this.canDraw) {
        // 没有按下鼠标键移动鼠标时，视为无效
        if (event instanceof MouseEvent && !end && event.buttons < 1) return; // 阻止默认事件避免拖拽整个视图

        if (event.type === 'touchmove') event.preventDefault();

        _this.dragPage(event, !!end);
      }
    };

    this.preventDefaultDragEvent = function (event) {
      event.preventDefault();
    };

    this.docsviewEventCallback = function (e) {
      var data = e.detail;
      var action = data.action;

      if (action !== _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].H5Snapshot && action !== _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].DocsAspect) {
        // Logger.info(logAction(DomEvent.Docs), JSON.stringify(data));
        _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Docs, JSON.stringify({
          data: data
        }));
      }

      if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].Page) {
        _this.handleDocsPageEvent(data);
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].Animation) {
        // if (!this.serviceHandle) {
        //     Logger.getInstance().warn(['WhiteBoard_View'], DomEventAction.Animation, 'serviceHandle 不存在');
        //     return;
        // }
        // 动画点击事件
        _this.serviceHandle.appendH5Extra(_this.whiteboardID, data.data);
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].DocsAspect) {
        // 文件每页尺寸，计算图元所在页数
        _this.viewInfo.vpageAspecCache = data.data;
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].H5Snapshot) {
        // H5文件截图
        _this.getH5SnapshotResult(data);
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].ReloadView) {
        // 白板重新渲染（自适应父容器大小）
        _this.reinitView();
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbError) {
        // if (!this.serviceHandle) {
        //     Logger.getInstance().warn(['WhiteBoard_View'], DomEventAction.WbError, 'serviceHandle 不存在');
        //     return;
        // }
        // 监控 loading 状态，向外抛出，数据流录制需要
        if (!_this.serviceHandle.isPlayback && (data.data == 1000 || data.data == 1001)) return; // 文件抛出的白板的错误

        Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(data.data);
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].Step) {
        // 动态PPT切步骤，取消图元选中
        if (_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector) {
          _this.hideSelectBox();
        }
      } else if (action === _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].SyncDrag) {
        var _a = data,
            x = _a.x,
            y = _a.y,
            notify = _a.notify;

        if (!_this.viewInfo.isScroll) {
          _this.viewInfo.zoomTX = x;
          _this.viewInfo.zoomTY = y;
        } // 同步文件拖拽


        notify && _this.emitScaleFactor(x, y);
      }
    };

    this.whiteboardID = whiteboardID;
    this.serviceHandle = serviceHandle;
    this.bindEventUpdate();
  }

  ZegoWhiteboardViewImpl.prototype.bindEventUpdate = function () {
    var _this = this;

    _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].on(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoServiceEventType"].SuperDocsLogoutRoom, function () {
      _this.clearEvent();
    });
  };

  ZegoWhiteboardViewImpl.prototype.setWhiteboardTransform = function (x, y, isMove) {
    if (!isMove) {
      this.viewInfo.zoomTX = x;
      this.viewInfo.zoomTY = y;
    }

    var _a = this.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        zoom = _a.zoom,
        direction = _a.direction;
    var page = this.viewInfo.page || 1;

    if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewScrollDirection"].Horizontal) {
      x = x - (page - 1) * viewWidth * zoom;
    } else {
      y = y - (page - 1) * viewHeight * zoom;
    }

    this.whiteboardNode.style.cssText += "transform:translate(" + x + "px," + y + "px) scale(" + zoom + ");";
  };

  ZegoWhiteboardViewImpl.prototype.dragPage = function (event, end) {
    var _a = this.viewInfo,
        zoom = _a.zoom,
        zoomTX = _a.zoomTX,
        zoomTY = _a.zoomTY,
        zoomX = _a.zoomX,
        zoomY = _a.zoomY,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;

    var _b = event instanceof MouseEvent ? event : event.changedTouches[0],
        clientX = _b.clientX,
        clientY = _b.clientY;

    var x = zoomTX + clientX - zoomX;
    var y = zoomTY + clientY - zoomY;
    var min = viewWidth * (1 - zoom);
    if (x > 0) x = 0;else if (x < min) x = min;
    min = viewHeight * (1 - zoom);
    if (y > 0) y = 0;else if (y < min) y = min;

    if (end) {
      this.viewInfo.zoomX = 0;
      this.viewInfo.zoomY = 0;
      this.emitScaleFactor(x, y);
    }

    this.setWhiteboardTransform(x, y, !end);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'dragPage', JSON.stringify({
      x: x,
      y: y,
      end: !end
    }));
  };

  ZegoWhiteboardViewImpl.prototype.initDragEvents = function () {
    if (!this.viewInfo.hasOwnProperty('offsetPageX')) {
      this.viewInfo.offsetPageX = 0;
      this.viewInfo.offsetPageY = 0;
      this.viewInfo.zoom = 1;
      this.viewInfo.zoomX = 0;
      this.viewInfo.zoomY = 0;
      this.viewInfo.zoomTX = 0;
      this.viewInfo.zoomTY = 0;
    } // 非文件白板 zoom drag


    if (this.parentDom && !this.getFileInfo()) {
      this.parentDom.addEventListener('mousedown', this.handleDragStart);
      this.parentDom.addEventListener('mousemove', this.handleDragMove);
      this.parentDom.addEventListener('mouseup', this.handleDragEnd);
      this.parentDom.addEventListener('mouseleave', this.handleDragEnd);
      this.parentDom.addEventListener('touchstart', this.handleDragStart);
      this.parentDom.addEventListener('touchmove', this.handleDragMove);
      this.parentDom.addEventListener('touchend', this.handleDragEnd);
      this.parentDom.addEventListener('touchcancel', this.handleDragEnd);
    }
  };

  ZegoWhiteboardViewImpl.prototype.updateBindEvents = function () {
    // 初始化绘制实例
    this.toolInstance.removeEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser);
    this.toolInstance.removeEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);
    this.toolInstance.removeEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText);
    this.toolInstance.removeEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector);
    this.toolInstance.removeEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEraser);
    this.toolInstance.bindCursorEventsHandle();
    var type = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type;

    switch (type) {
      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen:
      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine:
      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEllipse:
      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolRect:
      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhitebaordViewToolCustomImage:
        // Line <=> Svg
        this.toolInstance.bindEventsHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser:
        this.toolInstance.bindEventsHandle(type);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText:
        this.toolInstance.bindEventsHandle(type);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector:
        this.toolInstance.getInstanceHandle(type);
        this.toolInstance.bindEventsHandle(type);
        break;

      case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEraser:
        this.toolInstance.getInstanceHandle(type);
        this.toolInstance.bindEventsHandle(type);
        break;

      default:
        break;
    }
  };

  ZegoWhiteboardViewImpl.prototype.initToolHandle = function () {
    // 实例化Tool
    if (!this.toolInstance) {
      this.toolInstance = new _tool__WEBPACK_IMPORTED_MODULE_30__["Tool"]({
        whiteboardID: this.whiteboardID,
        zoomNode: this.zoomNode,
        conNode: this.parentDom,
        graphicsConNode: this.graphicsConNode,
        whiteboardNode: this.whiteboardNode,
        graphicsBoxConNode: this.graphicsBoxConNode,
        serviceHandle: this.serviceHandle,
        viewInfo: this.viewInfo
      }); // 实例化Laser

      this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser); // 实例化SvgGraphics

      this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine); // 实例化TextareaGraphics

      this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText);
      this.setToolType(_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type);
    } else {
      // 更新dom节点的引用
      this.toolInstance.zoomNode = this.zoomNode;
      this.toolInstance.conNode = this.parentDom;
      this.toolInstance.graphicsConNode = this.graphicsConNode;
      this.toolInstance.whiteboardNode = this.whiteboardNode;
      this.toolInstance.graphicsBoxConNode = this.graphicsBoxConNode; // 如果工具实例存在并且是动态ppt，则判断一下是否需要打开穿透

      this.penetrateEventHandle(_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type);

      if (this.getUniqueID()) {
        this.setToolType(_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type);
      } else {
        this.updateBindEvents();
      }
    }
  };

  ZegoWhiteboardViewImpl.prototype.updateStateSizeHandle = function () {
    var viewWidth = this.viewInfo.viewWidth;
    var _a = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState,
        size = _a.size,
        fontSize = _a.fontSize;
    _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.drawSize = Object(_utils__WEBPACK_IMPORTED_MODULE_32__["calSizeHandle"])(size, _entities_view__WEBPACK_IMPORTED_MODULE_35__["GraphicType"].Line, viewWidth, false);
    _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.drawFontSize = Object(_utils__WEBPACK_IMPORTED_MODULE_32__["calSizeHandle"])(fontSize, _entities_view__WEBPACK_IMPORTED_MODULE_35__["GraphicType"].Text, viewWidth, false);
  };

  ZegoWhiteboardViewImpl.prototype.getDocsViewAspect = function (parentDom, file, viewWidth, viewHeight) {
    var docsviewDom = parentDom.firstChild;

    if (docsviewDom) {
      var type = file.fileType;
      var isScroll = parentDom.getAttribute('data-mode') == '0';
      var pageCount = Number(parentDom.getAttribute('data-page'));
      var clientWidth = docsviewDom.clientWidth,
          clientHeight = docsviewDom.clientHeight;

      if (!clientWidth || !clientHeight) {
        clientWidth = +docsviewDom.style.width.replace('px', '');
        clientHeight = +docsviewDom.style.height.replace('px', '');
      }

      if (type === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].PPTH5 || type === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].CUSTOM_H5) {
        var iframeCon = parentDom.previousElementSibling;

        if (iframeCon) {
          iframeCon.style.zIndex = '0';
        }
      }

      var _a = document.getElementById(this.viewInfo.root),
          parentWidth = _a.clientWidth,
          parentHeight = _a.clientHeight;

      var isOriginScroll = isScroll && clientHeight > viewHeight;
      this.updateViewInfo({
        isScroll: isScroll,
        isOriginScroll: isOriginScroll,
        direction: _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewScrollDirection"].Vertical,
        pageCount: pageCount,
        width: clientWidth,
        height: clientHeight,
        viewWidth: viewWidth,
        viewHeight: viewHeight,
        page: this.viewInfo.page || 1,
        zoom: this.viewInfo.zoom || 1,
        parentWidth: parentWidth,
        parentHeight: parentHeight
      });
    }

    return {
      x: 0,
      y: 0,
      width: this.viewInfo.viewWidth,
      height: this.viewInfo.viewHeight
    };
  };

  ZegoWhiteboardViewImpl.prototype.getWhiteboardAspect = function (parentWidth, parentHeight, reload) {
    var _a = this.getAspectRatio().split(':').map(function (v) {
      return +v;
    }),
        aspectWidth = _a[0],
        aspectHeight = _a[1]; // resetSize


    if (reload) {
      var pageCount_1 = this.viewInfo.pageCount;
      var result_1 = this.getWhiteboardLayout(parentWidth, parentHeight, aspectWidth / pageCount_1, aspectHeight);
      var merge_1 = {
        parentWidth: parentWidth,
        parentHeight: parentHeight,
        width: result_1.width * pageCount_1,
        height: result_1.height,
        viewWidth: result_1.width,
        viewHeight: result_1.height
      };
      this.updateViewInfo(merge_1);
      return result_1;
    } // 纯白板页数使用创建白板时用户传进来的字段


    var pageCount = this.serviceHandle.getPageCount(this.whiteboardID);
    var direction = pageCount > 1 ? _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewScrollDirection"].Horizontal : _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewScrollDirection"].Center;
    var merge = {
      zoom: 1,
      page: 1,
      pageCount: pageCount,
      direction: direction,
      parentWidth: parentWidth,
      parentHeight: parentHeight
    }; // 父容器宽高比与传进来的白板宽高比不一致时，计算白板布局

    var result = this.getWhiteboardLayout(parentWidth, parentHeight, aspectWidth / pageCount, aspectHeight);
    merge.width = result.width * pageCount;
    merge.height = result.height;
    merge.viewWidth = result.width;
    merge.viewHeight = result.height;
    this.updateViewInfo(merge);
    return result;
  };

  ZegoWhiteboardViewImpl.prototype.getWhiteboardLayout = function (parentWidth, parentHeight, width, height) {
    var draw_w = parentWidth;
    var draw_h = height * draw_w / width;

    if (draw_h > parentHeight || Math.abs(draw_h - parentHeight) <= 1) {
      draw_w = parentHeight * parentWidth / draw_h | 0;
      draw_h = parentHeight;
    }

    draw_h |= 0;
    return {
      x: (parentWidth - draw_w) / 2,
      y: (parentHeight - draw_h) / 2,
      width: draw_w,
      height: draw_h
    };
  };

  ZegoWhiteboardViewImpl.prototype.checkParentSize = function (clientWidth, clientHeight) {
    if (clientWidth <= 0 || clientHeight <= 0) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorViewParentNotExist);
      _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoEventType"].Error, error);
      throw new Error('无法获取容器宽高');
    }
  };

  ZegoWhiteboardViewImpl.prototype.createModule = function (reload) {
    var _this = this; // 重新渲染前，终止图元绘制


    if (reload && this.toolInstance) {
      this.stopLocalDrawHandle(this.serviceHandle.getScrollPercent(this.whiteboardID).verticalPercent);
    }

    var file = this.getFileInfo(); // 文件白板时 outDom 是白板父节点，纯白板时 outDom 是用户的容器

    var outDom = document.getElementById(this.viewInfo.parent);

    if (!file) {
      this.viewInfo.root = this.viewInfo.parent;
      outDom.style.cssText += 'position:relative;display:inherit!important;';
    } else {
      this.viewInfo.root = outDom.parentNode.parentNode.id;
    }

    var clientWidth = outDom.clientWidth,
        clientHeight = outDom.clientHeight;

    if (!clientWidth || !clientHeight) {
      clientWidth = +outDom.style.width.replace('px', '');
      clientHeight = +outDom.style.height.replace('px', '');
    }

    this.checkParentSize(clientWidth, clientHeight); // 重新计算白板尺寸前，计算偏移百分比

    var percents = reload && !file ? {
      x: this.viewInfo.zoomTX / this.viewInfo.viewWidth,
      y: this.viewInfo.zoomTY / this.viewInfo.viewHeight
    } : {
      x: 0,
      y: 0
    };

    var _a = file ? this.getDocsViewAspect(outDom, file, clientWidth, clientHeight) : this.getWhiteboardAspect(clientWidth, clientHeight, reload),
        x = _a.x,
        y = _a.y;

    var _b = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].reservedPrefix,
        whiteboardZoom = _b.whiteboardZoom,
        whiteboardCon = _b.whiteboardCon,
        whiteboard = _b.whiteboard,
        boxContainer = _b.boxContainer,
        graphicsContainer = _b.graphicsContainer; // 创建白板图元节点

    var fragment = document.createDocumentFragment();
    var temp = [graphicsContainer, boxContainer];
    temp.forEach(function (prefix) {
      var dom = document.createElement('div');
      dom.id = "" + prefix + _this.whiteboardID;
      fragment.appendChild(dom);
    });
    var doms = Object(_utils__WEBPACK_IMPORTED_MODULE_32__["getElementChild"])(fragment);
    this.graphicsConNode = doms[0];
    this.graphicsBoxConNode = doms[1];
    this.createGraphicsBox();
    var _c = this.viewInfo,
        width = _c.width,
        height = _c.height,
        viewWidth = _c.viewWidth,
        viewHeight = _c.viewHeight;
    this.whiteboardNode = document.createElement('div');
    this.whiteboardNode.id = "" + whiteboard + this.whiteboardID;
    this.whiteboardNode.style.cssText += "width:" + width + "px;height:" + height + "px;";
    this.whiteboardNode.appendChild(fragment);

    if (!file) {
      var css = "left:" + x + "px;top:" + y + "px;width:" + viewWidth + "px;height:" + viewHeight + "px;overflow:hidden;"; // resetSize

      this.parentDom = outDom.querySelector("#" + whiteboardCon + this.whiteboardID);

      if (reload && this.parentDom) {
        this.parentDom.innerHTML = '';
        this.parentDom.style.cssText += css;
        this.parentDom.appendChild(this.whiteboardNode);
        this.setWhiteboardTransform(percents.x * viewWidth | 0, percents.y * viewHeight | 0);
      } else {
        var zoomDom = document.createElement('div');
        zoomDom.id = "" + whiteboardZoom + this.whiteboardID;
        this.zoomNode = zoomDom;
        var dom = document.createElement('div');
        dom.id = "" + whiteboardCon + this.whiteboardID; // 父容器宽高比与传进来的白板宽高比不一致时，左右会有边距

        dom.style.cssText = css;
        dom.appendChild(this.whiteboardNode);
        zoomDom.appendChild(dom);
        outDom.appendChild(zoomDom);
        this.parentDom = dom;
      }
    } else {
      this.parentDom = outDom;
      this.zoomNode = outDom.parentNode;
      outDom.innerHTML = '';
      outDom.appendChild(this.whiteboardNode);
      this.handleDocsviewEvent(outDom);
    } // 文本工具不能设置，受 输入法 + 浏览器版本 的影响，设置后会改变输入中文时相关事件的执行顺序


    _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText && (this.parentDom.style.userSelect = 'none');
    this.parentDom.addEventListener('dragenter', this.preventDefaultDragEvent);
    this.serviceHandle.setViewSize(this.whiteboardID, viewWidth, viewHeight);
    this.serviceHandle.setSize(this.whiteboardID, width, height);
  };

  ZegoWhiteboardViewImpl.prototype.activitView = function () {
    var _a;

    if (this.zoomNode) {
      var fileID = ((_a = this.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileID) || ''; // Logger.setExtraConfig({ wbId: this.whiteboardID, fileID });

      var dom = document.getElementById(this.viewInfo.root);

      if (dom) {
        var id_1 = this.zoomNode.id; // @ts-ignore

        Array.from(Object(_utils__WEBPACK_IMPORTED_MODULE_32__["getElementChild"])(dom)).forEach(function (node) {
          node.style.display = node.id === id_1 ? 'block' : 'none';
        });
      } // init bg color


      var color = fileID ? _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.defaultFileBgColor : _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.bgColor;
      this.toolInstance.background.setBackgroundColor(color);
      this.setDragStyle(this.getToolType() || 0);
    }
  };

  ZegoWhiteboardViewImpl.prototype.updateViewInfo = function (keyValueMap) {
    Object.assign(this.viewInfo, keyValueMap);
  }; // 判断是否同一页内切步


  ZegoWhiteboardViewImpl.prototype.isChangeStepInnerPage = function (vPercent) {
    var _a;

    var fileType = (_a = this.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileType;

    if (fileType === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].PPTH5 || fileType === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].CUSTOM_H5) {
      var _b = this.viewInfo,
          page = _b.page,
          pageCount = _b.pageCount;
      var curPage = Math.min(Math.round(vPercent * pageCount) + 1, pageCount);
      return page === curPage;
    }

    return false;
  }; // 只要发生白板位置变更（包括本端和对端滚动、切页、拖拽）立即停止本端绘制操作，并清除绘制流程中的相关数据


  ZegoWhiteboardViewImpl.prototype.stopLocalDrawHandle = function (vPercent) {
    var _a;

    try {
      var type = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type;
      var laser = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser;
      var selector = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector;
      var text = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText;
      var isStep = this.isChangeStepInnerPage(vPercent);

      switch (type) {
        case laser:
          // 同步激光笔新位置
          var laserTool = this.toolInstance.getInstanceHandle(laser);
          !isStep && laserTool && laserTool.pushActualPlaceHandle();
          break;

        case selector:
          var selectorTool = this.toolInstance.getInstanceHandle(selector);

          if (!isStep && selectorTool) {
            var activeElement_1 = document.activeElement;

            if (activeElement_1 && activeElement_1.id && this.whiteboardNode.querySelector("#" + activeElement_1.id) && activeElement_1.tagName === 'TEXTAREA') {
              activeElement_1.blur();
            } else {
              // 先更新scroll、offset
              this.toolInstance.updateOffsetAndScrollHandle(); // 执行两次，但是内部加了限制条件

              selectorTool.mouseupHandle();
              selectorTool.hideImageEditBox();
              selectorTool.hideSelectBox();
            }
          }

          break;

        case text:
          // 强制blur
          var activeElement = document.activeElement;

          if (!isStep && activeElement && activeElement.id && this.whiteboardNode.querySelector("#" + activeElement.id) && activeElement.tagName === 'TEXTAREA') {
            activeElement.blur();
          }

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen:
          var svgTool1 = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);

          if (!isStep && svgTool1) {
            // 先更新scroll、offset
            this.toolInstance.updateOffsetAndScrollHandle(); // 执行两次，但是内部加了限制条件

            svgTool1.mouseupHandle(); // 同步光标新位置

            (_a = this.toolInstance.customCursor) === null || _a === void 0 ? void 0 : _a.pushActualPlaceHandle();
          }

          break;

        case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolRect:
        case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine:
        case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolEllipse:
        case _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhitebaordViewToolCustomImage:
          var svgTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);

          if (!isStep && svgTool) {
            // 先更新scroll、offset
            this.toolInstance.updateOffsetAndScrollHandle(); // 执行两次，但是内部加了限制条件

            svgTool.mouseupHandle();
          }

          break;

        default:
          break;
      } // 滚动时，由于图片图元加载需要时间，导致创建box时获取到的svg->g元素的坐标不是最新的，需要校验box位置


      this.toolInstance.resetImageBox();
    } catch (error) {
      console.error(error);
    }
  };

  ZegoWhiteboardViewImpl.prototype.setClassNameHandle = function (type) {
    var _a;

    var _b = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].reservedPrefix,
        whiteboard = _b.whiteboard,
        whiteboardCon = _b.whiteboardCon,
        whiteboardZoom = _b.whiteboardZoom;
    (_a = this.zoomNode.parentNode) === null || _a === void 0 ? void 0 : _a.querySelectorAll("[id^=" + whiteboard + "]").forEach(function (item) {
      item.id.indexOf("" + whiteboardCon) === -1 && item.id.indexOf("" + whiteboardZoom) === -1 && (item.className = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"][type] || '');
    });
  }; // 判断是否事件穿透


  ZegoWhiteboardViewImpl.prototype.penetrateEventHandle = function (type) {
    var _a;

    var fileType = (_a = this.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileType;

    if ((fileType === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].PPTH5 || fileType === _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].CUSTOM_H5) && this.parentDom) {
      var pointer = !this.operationModes.none && type === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick ? 'none' : 'initial';
      this.parentDom.style.pointerEvents = pointer;
      this.graphicsBoxConNode.style.pointerEvents = pointer;
    }
  }; // 翻页模式


  ZegoWhiteboardViewImpl.prototype.jumpPage = function (hPercent, vPercent) {
    var _a = this.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight,
        pageCount = _a.pageCount,
        direction = _a.direction;

    if (pageCount >= 1) {
      if (direction === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewScrollDirection"].Horizontal) {
        var page = Math.min(Math.round(hPercent * pageCount) + 1, pageCount);

        if (page <= pageCount) {
          this.updateViewInfo({
            offsetPageX: (page - 1) * viewWidth,
            page: page
          });
          this.setWhiteboardTransform(this.viewInfo.zoomTX, this.viewInfo.zoomTY);
        }
      } else {
        var page = Math.min(Math.round(vPercent * pageCount) + 1, pageCount);

        if (page <= pageCount) {
          this.updateViewInfo({
            offsetPageY: (page - 1) * viewHeight,
            page: page
          });
          this.setWhiteboardTransform(this.viewInfo.zoomTX, this.viewInfo.zoomTY);
        }
      }
    }

    this.notifyScrollEvent(this.viewInfo.page, 1, hPercent, vPercent);
  };

  ZegoWhiteboardViewImpl.prototype.handleDocsviewEvent = function (dom) {
    var detail = {
      action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbInit,
      data: this.whiteboardID
    };
    dom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
      detail: detail
    }));
    dom.addEventListener(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Docs, this.docsviewEventCallback);
  }; // docsview 翻页 / 滚动（每一页宽高不一样，页码和滚动距离由docsview计算）


  ZegoWhiteboardViewImpl.prototype.handleDocsPageEvent = function (data) {
    var page = data.page,
        pageCount = data.pageCount,
        step = data.step,
        percent = data.percent,
        notify = data.notify,
        ofsX = data.ofsX;
    var _a = this.viewInfo,
        isScroll = _a.isScroll,
        viewHeight = _a.viewHeight,
        zoom = _a.zoom;
    this.viewInfo.page = page;
    this.viewInfo.pageCount = pageCount; // 翻页白板更改偏移

    if (!isScroll) {
      this.viewInfo.offsetPageY = (page - 1) * viewHeight;
    } // 主动滚动时清除垂直偏移值（scaleOffsetY 1:发送当前缩放值 0:发送service里的缩放值）


    var scale;

    if (notify && isScroll && typeof ofsX == 'number') {
      scale = {
        scaleFactor: zoom,
        scaleOffsetX: ofsX,
        scaleOffsetY: +_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].scaleModes.sync
      };
      this.scaleInfo.y = 0;
    }

    this.emitScroll(0, percent, step, notify, scale);
    this.notifyScrollEvent(page, step, 0, percent);
  };

  ZegoWhiteboardViewImpl.prototype.getH5SnapshotResult = function (data) {
    var dataUrl = data.dataUrl,
        snapshotId = data.snapshotId;
    this.snapshotInstances[snapshotId].getH5Snapshot(dataUrl);
  };

  ZegoWhiteboardViewImpl.prototype.hideSelectBox = function () {
    var selectorTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector);
    selectorTool.hideImageEditBox();
    selectorTool.hideSelectBox();
  };

  ZegoWhiteboardViewImpl.prototype.setDragStyle = function (type) {
    if (!this.parentDom) return;

    var _a = this.toolInstance.getUserAuth(),
        scale = _a.scale,
        scroll = _a.scroll;

    var isDrag = this.operationModes.scale && !!scale && !type;
    this.parentDom.style.cursor = isDrag ? 'move' : 'auto'; // 防止手写笔拖动

    this.parentDom.style.touchAction = isDrag ? 'auto' : 'none'; // notify docsview drag

    var detail = {
      action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbDragTool,
      enable: this.operationModes.scroll && !!scroll,
      remoteScroll: !!scroll,
      isDrag: isDrag
    };
    this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
      detail: detail
    }));
  };

  ZegoWhiteboardViewImpl.prototype.addImageGraphic = function (url, x, y) {
    var svgTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLine);
    var point = this.toolInstance.transLocationOrigin({
      clientX: x,
      clientY: y
    });
    return svgTool.drawLocalGraphicImage(url, point.clientX, point.clientY);
  };

  ZegoWhiteboardViewImpl.prototype.initBackground = function (reload) {
    this.toolInstance.createBackground(this.whiteboardNode, reload);
  };

  ZegoWhiteboardViewImpl.prototype.canReloadView = function () {
    var parent = document.getElementById(this.viewInfo.parent);
    parent.style.cssText += 'position:relative;display:block!important;';
    var clientWidth = parent.clientWidth,
        clientHeight = parent.clientHeight;
    this.checkParentSize(clientWidth, clientHeight);
    var _a = this.viewInfo,
        viewWidth = _a.viewWidth,
        viewHeight = _a.viewHeight;

    var _b = this.getWhiteboardAspect(clientWidth, clientHeight, true),
        x = _b.x,
        y = _b.y,
        width = _b.width,
        height = _b.height;

    if (Math.abs(viewWidth - width) < 5 && Math.abs(viewHeight - height) < 5) {
      this.parentDom.style.cssText += "left:" + x + "px;top:" + y + "px;";
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'reloadViewLayou', JSON.stringify({
        w0: viewWidth,
        h0: viewHeight,
        w: width,
        h: height
      }));
      return false;
    }

    return true;
  };

  ZegoWhiteboardViewImpl.prototype.reinitView = function () {
    this.toolInstance.isReloading = true;
    this.parentDom = null;
    this.init(this.viewInfo.parent, true); // 重新计算本端激光笔容器size

    var laserTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser);
    laserTool.updateLaserConSize();
    this.toolInstance.isReloading = false;
  };

  ZegoWhiteboardViewImpl.prototype.updateLaser = function () {
    this.toolInstance.reverseZoomHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser); // 重新计算本端激光笔容器size

    var laserTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser);
    laserTool.updateLaserConSize();
    laserTool.pushActualPlaceHandle();
  };

  ZegoWhiteboardViewImpl.prototype.remoteUpdateBackgroundImage = function (graphic) {
    this.toolInstance.background.remoteAddBackgroundImageGraphic(graphic);
  };

  ZegoWhiteboardViewImpl.prototype.remoteClearBackgroundImage = function () {
    this.toolInstance.background.updateToLocal(true).clearBackgroundImage();
  };

  ZegoWhiteboardViewImpl.prototype.createGraphicsBox = function () {
    this.graphicsBoxConNode.innerHTML = "\n        <div class=\"img-editor-box\">\n            <div class=\"operation-point-desktop left-top cursor-nwse LT\"></div>\n            <div class=\"operation-point-desktop right-top cursor-nesw RT\"></div>\n            <div class=\"operation-point-desktop left-bottom cursor-nesw LB\"></div>\n            <div class=\"operation-point-desktop right-bottom cursor-nwse RB\"></div>\n            <div class=\"operation-point-desktop top cursor-ns T\"></div>\n            <div class=\"operation-point-desktop right cursor-ew R\"></div>\n            <div class=\"operation-point-desktop bottom cursor-ns B\"></div>\n            <div class=\"operation-point-desktop left cursor-ew L\"></div>\n        </div>\n        <div class=\"graphics-box\"></div>";
  };

  ZegoWhiteboardViewImpl.prototype.emitScroll = function (hPercent, vPercent, step, notify, scale) {
    this.serviceHandle.loadCurrentGraphics(this.whiteboardID, hPercent, vPercent);

    if (notify) {
      this.serviceHandle.scroll(this.whiteboardID, hPercent, vPercent, step, scale);
    }
  };

  ZegoWhiteboardViewImpl.prototype.notifyScrollEvent = function (page, step, hPercent, vPercent) {
    _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoEventType"].ViewScroll, {
      id: this.whiteboardID,
      horizontalPercent: hPercent,
      verticalPercent: vPercent,
      page: page,
      step: step
    });
    var uniqueID = this.getUniqueID();
    _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoSuperBoardEventType"].SubViewScrollChanged, uniqueID, page, step);
  };

  ZegoWhiteboardViewImpl.prototype.emitScaleFactor = function (x, y, syncLast) {
    if (!syncLast) {
      x = Math.abs(x) | 0;
      y = Math.abs(y) | 0;
      var _a = this.viewInfo,
          zoom = _a.zoom,
          width = _a.width,
          height = _a.height;
      x = x && Number((x / width / zoom).toFixed(7));
      y = y && Number((y / height / zoom).toFixed(7));
      this.scaleInfo.x = x;
      this.scaleInfo.y = y;
    }

    if (_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].scaleModes.sync) {
      this.serviceHandle.scale(this.whiteboardID, this.viewInfo.zoom, x, y);
    }
  }; // 处理自定义光标


  ZegoWhiteboardViewImpl.prototype.setViewCursorHandle = function (reload) {
    var _a;

    (_a = this.toolInstance) === null || _a === void 0 ? void 0 : _a.setCustomCursor(reload);
  }; // 处理自定义光标


  ZegoWhiteboardViewImpl.prototype.hideViewCursorHandle = function () {
    var _a;

    (_a = this.toolInstance.customCursor) === null || _a === void 0 ? void 0 : _a.hide();
  }; // 处理缩放


  ZegoWhiteboardViewImpl.prototype.scaleToHandle = function (scale, x, y, notify) {
    var _this = this;

    var _a, _b, _c;

    if (!this.activited) return;
    this.scaleInfo.x = x;
    this.scaleInfo.y = y;
    this.viewInfo.zoom = scale || 1;
    (_a = this.toolInstance.customCursor) === null || _a === void 0 ? void 0 : _a.updateCursorAttr(true);
    (_b = this.toolInstance.customCursor) === null || _b === void 0 ? void 0 : _b.updateOtherCursor();

    if (!this.getFileInfo()) {
      var _d = this.viewInfo,
          viewWidth = _d.viewWidth,
          viewHeight = _d.viewHeight,
          width = _d.width,
          height = _d.height,
          zoom = _d.zoom;
      var tx = -x * width * zoom;
      var ty = -y * height * zoom;

      if (notify) {
        tx = viewWidth * (1 - scale) * 0.5 | 0;
        ty = viewHeight * (1 - scale) * 0.5 | 0;
        this.emitScaleFactor(tx, ty);
      }

      this.setWhiteboardTransform(tx, ty);
      this.updateLaser();
      (_c = this.toolInstance.customCursor) === null || _c === void 0 ? void 0 : _c.pushActualPlaceHandle();
    } else {
      // 限制文件白板缩放频率
      if (this.scaleInfo.syncTimer) clearTimeout(this.scaleInfo.syncTimer);
      var delay = notify ? 50 : 100;
      this.scaleInfo.syncTimer = window.setTimeout(function () {
        var _a; // notify docsview scale


        var detail = {
          action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbScale,
          scale: scale,
          x: x,
          y: y,
          notify: notify
        };
        _this.parentDom && _this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
          detail: detail
        }));

        _this.updateLaser();

        (_a = _this.toolInstance.customCursor) === null || _a === void 0 ? void 0 : _a.pushActualPlaceHandle();
      }, delay);
    }

    _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoEventType"].ViewScale, this.whiteboardID, this.viewInfo.zoom);
    var uniqueID = this.getUniqueID();
    _services_event__WEBPACK_IMPORTED_MODULE_28__["default"].emit(_services_event__WEBPACK_IMPORTED_MODULE_28__["ZegoSuperBoardEventType"].SubViewScaleChanged, uniqueID, this.viewInfo.zoom);
  };

  ZegoWhiteboardViewImpl.prototype.init = function (parent, reload) {
    this.viewInfo.parent = parent;
    var hasDom = document.getElementById("" + _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].reservedPrefix.whiteboard + this.whiteboardID);

    if (!this.parentDom || !hasDom) {
      this.createModule(!!reload);
    }

    this.initToolHandle();
    this.initBackground(!!reload || !hasDom);
    this.updateStateSizeHandle();
    this.initDragEvents();
    this.activitView();

    var _a = this.serviceHandle.getScrollPercent(this.whiteboardID),
        horizontalPercent = _a.horizontalPercent,
        verticalPercent = _a.verticalPercent,
        pptStep = _a.pptStep;

    if (reload) {
      this.toolInstance.updateOffsetAndScrollHandle();
      this.toolInstance.updateOffsetPage();

      if (this.serviceHandle.isElectron) {
        this.emitScroll(horizontalPercent, verticalPercent, pptStep, false);
      } else {
        // Web 渲染本地图元
        this.serviceHandle.reloadViewGraphics(this.whiteboardID, this.toolInstance.graphicList);
        this.updateRemoteToLocal(this.toolInstance.graphicList, []);
      }

      var _b = this.scaleInfo,
          x = _b.x,
          y = _b.y;

      if (x !== -1 && y !== -1) {
        this.scaleToHandle(this.viewInfo.zoom, x, y, false);
      }
    } else {
      this.scrollToHandle(horizontalPercent, verticalPercent, pptStep, false);

      if (_entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].scaleModes.response) {
        var _c = this.serviceHandle.getScale(this.whiteboardID),
            scaleFactor = _c.scaleFactor,
            scaleOffsetX = _c.scaleOffsetX,
            scaleOffsetY = _c.scaleOffsetY;

        this.scaleToHandle(scaleFactor, scaleOffsetX, scaleOffsetY, false);
      }

      this.playAnimation(this.serviceHandle.getH5Extra(this.whiteboardID), false);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View', 'Inner'], 'init', JSON.stringify({
      horizontalPercent: horizontalPercent,
      verticalPercent: verticalPercent,
      step: pptStep
    })); // 切换白板时检测到容器尺寸有改变，自动调整白板

    var _d = this.zoomNode.parentNode,
        clientWidth = _d.clientWidth,
        clientHeight = _d.clientHeight;

    if (!reload && (Math.abs(clientWidth - this.viewInfo.parentWidth) > 5 || Math.abs(clientHeight - this.viewInfo.parentHeight) > 5)) {
      this.reloadView();
    }

    this.setViewCursorHandle(reload);
  };

  ZegoWhiteboardViewImpl.prototype.getContentSize = function () {
    return {
      width: this.viewInfo.width,
      height: this.viewInfo.height
    };
  };

  ZegoWhiteboardViewImpl.prototype.getRootDomID = function () {
    return this.viewInfo.root;
  };

  ZegoWhiteboardViewImpl.prototype.setActivited = function (val, rootDomID) {
    // superboard 多容器的场景下，每个容器有一个可激活的白板
    if (val) {
      this.activited = true;
    } else if (!this.viewInfo.root || this.viewInfo.root == rootDomID) {
      // 和当前白板是同一个父容器的白板才能设置失活状态
      this.activited = false;
    }
  };

  ZegoWhiteboardViewImpl.prototype.getActivited = function () {
    return this.activited;
  }; // 滚动到指定位置


  ZegoWhiteboardViewImpl.prototype.scrollToHandle = function (hPercent, vPercent, step, notify) {
    if (!this.activited) return;
    this.stopLocalDrawHandle(vPercent);

    if (this.getFileInfo()) {
      // 通知 docsview 翻页 / 滚动（每一页宽高不一样，页码和滚动距离由docsview计算）
      var _a = this.serviceHandle.getScale(this.whiteboardID),
          scaleOffsetX = _a.scaleOffsetX,
          scaleOffsetY = _a.scaleOffsetY;

      var detail = {
        action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].Page,
        percent: vPercent,
        step: step || 1,
        ofsX: scaleOffsetX,
        ofsY: scaleOffsetY,
        notify: notify
      };
      this.parentDom && this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
        detail: detail
      }));
    } else {
      this.emitScroll(hPercent, vPercent, 1, notify);
      this.jumpPage(hPercent, vPercent);
    }
  };

  ZegoWhiteboardViewImpl.prototype.syncScaleToHandle = function () {
    var _a = this.scaleInfo,
        x = _a.x,
        y = _a.y;
    if (x !== -1 && y !== -1) this.emitScaleFactor(x, y, true);
  }; // 清除激光笔图元


  ZegoWhiteboardViewImpl.prototype.clearLaserHandle = function (userID) {
    if (!this.toolInstance) return;
    var laserTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolLaser);
    laserTool.clearLaserHandle(userID);
  };

  ZegoWhiteboardViewImpl.prototype.clearLocalHandle = function (layers) {
    if (layers && layers.includes(1)) {
      this.remoteClearBackgroundImage();
    } else {
      this.toolInstance.clearLocalHandle();
      this.createGraphicsBox();
    }
  };

  ZegoWhiteboardViewImpl.prototype.updateRemoteToLocal = function (graphicList, delGraphicIdList) {
    var totalGraphicList = this.toolInstance.graphicList;
    var isDelBgImage = totalGraphicList.some(function (g) {
      return delGraphicIdList.length && delGraphicIdList.includes(g.graphic_id) && g.type == _entities_view__WEBPACK_IMPORTED_MODULE_35__["GraphicType"].BgImage;
    });
    var addBgGraphics = graphicList.filter(function (g) {
      return g.type == _entities_view__WEBPACK_IMPORTED_MODULE_35__["GraphicType"].BgImage;
    });

    if (addBgGraphics.length) {
      var backgroundGraphic = addBgGraphics.pop();
      this.remoteUpdateBackgroundImage(backgroundGraphic);
    }

    if (isDelBgImage) {
      this.remoteClearBackgroundImage();
    }

    graphicList = graphicList.filter(function (g) {
      return g.type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["GraphicType"].BgImage;
    });
    this.toolInstance.updatePushLocalHandle(graphicList, delGraphicIdList);
  }; // 清除dom


  ZegoWhiteboardViewImpl.prototype.destroyDomHandle = function () {
    if (this.parentDom) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'destroy_dom', JSON.stringify({
        domID: this.parentDom.id
      }));
      var detail = {
        action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbDestroy,
        data: this.whiteboardID
      };
      this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
        detail: detail
      }));
      Object(_utils__WEBPACK_IMPORTED_MODULE_32__["removeElement"])(this.parentDom.parentElement);
      this.parentDom = null;
    }
  };

  ZegoWhiteboardViewImpl.prototype.clearCanvasCache = function () {
    if (this.parentDom) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod_clear_canvas', JSON.stringify({
        domID: this.parentDom.id
      }));
      var detail = {
        action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].WbSwitch,
        data: this.whiteboardID
      };
      this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
        detail: detail
      }));
    }
  };

  ZegoWhiteboardViewImpl.prototype.clearEvent = function () {
    if (this.parentDom) {
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'clearEvent');
      var detail = {
        action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].ClearEvent
      };
      this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
        detail: detail
      }));
    }
  }; // 播放动画


  ZegoWhiteboardViewImpl.prototype.playAnimation = function (data, isPush) {
    var _a;

    if (!this.activited) return;
    var detail = {
      action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].Animation,
      data: data,
      notify: !isPush
    };
    (_a = this.parentDom) === null || _a === void 0 ? void 0 : _a.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
      detail: detail
    }));
  };

  ZegoWhiteboardViewImpl.prototype.onAuthChange = function () {
    if (!this.activited) return;
    this.setDragStyle(this.getToolType() || 0);
  }; //----------------------------//
  // 对外接口                    //
  //----------------------------//
  // 清空白板：调用该接口后将会清除整个白板涂鸦


  ZegoWhiteboardViewImpl.prototype.clear = function () {
    var _this = this;

    if (!this.operationModes.draw) return Promise.resolve(false);

    if (!this.toolInstance.getUserAuth().clear) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthClearGraphic);
      return Promise.resolve(false);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.clear', JSON.stringify({
      whiteboardID: this.whiteboardID
    }));
    var selectorTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolSelector);
    selectorTool.hideImageEditBox();
    selectorTool.hideSelectBox();
    return this.serviceHandle.clearView(this.whiteboardID, [0]).then(function () {
      _this.clearLocalHandle();

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.clear_cb', 'success');
      return Promise.resolve(true);
    })["catch"](function (err) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorClearFail);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().error(['WhiteBoard_View'], 'mod.clear_cb', JSON.stringify(error));
      return Promise.resolve(false);
    });
  }; // 滚动百分比取值0~1，horizontalPercent：水平百分比 verticalPercent：垂直百分比
  // 仅用于翻页场景


  ZegoWhiteboardViewImpl.prototype.scroll = function (horizontalPercent, verticalPercent) {
    if (isNaN(+horizontalPercent) || isNaN(+verticalPercent)) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid, '参数错误: horizontalPercent、verticalPercent取值为0~1', true);
      return false;
    }

    if (!this.operationModes.scroll) return false;

    if (!this.toolInstance.getUserAuth().scroll) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScroll);
      return false;
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.scroll', JSON.stringify({
      params: {
        horizontalPercent: horizontalPercent,
        verticalPercent: verticalPercent
      }
    }));
    if (horizontalPercent < 0) horizontalPercent = 0;
    if (horizontalPercent > 1) horizontalPercent = 1;
    if (verticalPercent < 0) verticalPercent = 0;
    if (verticalPercent > 1) verticalPercent = 1;
    horizontalPercent = Number(horizontalPercent.toFixed(7));
    verticalPercent = Number(verticalPercent.toFixed(7));
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.scroll', JSON.stringify({
      params: {
        horizontalPercent: horizontalPercent,
        verticalPercent: verticalPercent
      }
    }));

    if (this.viewInfo.pageCount > 1 && this.viewInfo.page > 0) {
      this.scrollToHandle(horizontalPercent, verticalPercent, 1, true);
      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'mod.scroll', JSON.stringify({
        transParams: {
          horizontalPercent: horizontalPercent,
          verticalPercent: verticalPercent
        },
        status: true
      }));
      return true;
    }

    return false;
  }; // 获取当前滚动百分比


  ZegoWhiteboardViewImpl.prototype.getCurrentScrollPercent = function () {
    var percent = __assign(__assign({}, this.serviceHandle.getScrollPercent(this.whiteboardID)), {
      direction: this.viewInfo.direction
    });

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getCurrentScrollPercent', JSON.stringify({
      percent: percent
    }));
    return percent;
  };

  ZegoWhiteboardViewImpl.prototype.getHorizontalPercent = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getHorizontalPercent', JSON.stringify({
      horizontalPercent: this.getCurrentScrollPercent().horizontalPercent
    }));
    return this.getCurrentScrollPercent().horizontalPercent;
  };

  ZegoWhiteboardViewImpl.prototype.getVerticalPercent = function () {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getVerticalPercent', JSON.stringify({
      verticalPercent: this.getCurrentScrollPercent().verticalPercent
    }));
    return this.getCurrentScrollPercent().verticalPercent;
  }; // 撤销


  ZegoWhiteboardViewImpl.prototype.undo = function () {
    if (!this.operationModes.draw) return;

    if (this.serviceHandle.isElectron) {
      this.serviceHandle.undo(this.whiteboardID);
    } else {
      this.toolInstance.undoNewHandle();
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.undo');
  }; // 重做


  ZegoWhiteboardViewImpl.prototype.redo = function () {
    if (!this.operationModes.draw) return;

    if (this.serviceHandle.isElectron) {
      this.serviceHandle.redo(this.whiteboardID);
    } else {
      this.toolInstance.redoNewHandle();
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.redo');
  }; // 清空撤销


  ZegoWhiteboardViewImpl.prototype._undoClear = function () {
    this.toolInstance.undoClearPage();
  }; // 获取白板页宽高比


  ZegoWhiteboardViewImpl.prototype.getAspectRatio = function () {
    var aspectRatio = this.serviceHandle.getAspectRatio(this.whiteboardID);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getAspectRatio', JSON.stringify({
      aspectRatio: aspectRatio
    }));
    return aspectRatio;
  }; // 获取白板关联的文件信息


  ZegoWhiteboardViewImpl.prototype.getFileInfo = function () {
    var fileInfo = this.serviceHandle.getFileInfo(this.whiteboardID);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getFileInfo', JSON.stringify({
      fileInfo: fileInfo
    }));
    return fileInfo;
  }; // 获取白板唯一ID


  ZegoWhiteboardViewImpl.prototype.getID = function () {
    return this.whiteboardID;
  }; // 获取白板 name


  ZegoWhiteboardViewImpl.prototype.getName = function () {
    return this.serviceHandle.getModName(this.whiteboardID);
  };

  ZegoWhiteboardViewImpl.prototype.getCreateTime = function () {
    return this.serviceHandle.getCreateTime(this.whiteboardID);
  }; // 获取白板 roomID


  ZegoWhiteboardViewImpl.prototype.getRoomID = function () {
    return this.serviceHandle.getRoomID(this.whiteboardID);
  };

  ZegoWhiteboardViewImpl.prototype.getUniqueID = function () {
    // return this.serviceHandle && this.serviceHandle.getUniqueID(this.whiteboardID);
    return this.serviceHandle.getUniqueID(this.whiteboardID);
  }; // 获取白板当前页数


  ZegoWhiteboardViewImpl.prototype.getCurrentPage = function () {
    var cp = this.viewInfo.page || 1;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getCurrentPage', JSON.stringify({
      cp: cp
    }));
    return cp;
  }; // 获取白板总页数


  ZegoWhiteboardViewImpl.prototype.getPageCount = function () {
    var pageCount = this.viewInfo.pageCount || 1;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getPageCount', JSON.stringify({
      pageCount: pageCount
    }));
    return pageCount;
  };

  ZegoWhiteboardViewImpl.prototype.setBackgroundImage = function (address, mode, listener) {
    var fileObj = address instanceof File ? {
      name: address.name,
      size: address.size,
      type: address.type
    } : address;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setBackgroundImage', JSON.stringify({
      address: fileObj,
      mode: mode
    }));
    return this.toolInstance.background.setBackgroundImage(address, mode, listener);
  };

  ZegoWhiteboardViewImpl.prototype.clearBackgroundImage = function () {
    this.toolInstance.background.clearBackgroundImage();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.clearBackgroundImage');
  };

  ZegoWhiteboardViewImpl.prototype.setToolType = function (type) {
    var _a, _b;

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setToolType', JSON.stringify({
      type: type
    }));
    type = type || 0;
    if (!Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setToolType"])(type) || this.operationModes.none) return false;

    if (type === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick) {
      var fileType = (_a = this.getFileInfo()) === null || _a === void 0 ? void 0 : _a.fileType;
      if (fileType !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].PPTH5 && fileType !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["FileType"].CUSTOM_H5) return false;
    }

    _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type = type; // 延迟到初始化后调用

    if (!this.toolInstance) return true;

    if (type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolPen) {
      (_b = this.toolInstance.customCursor) === null || _b === void 0 ? void 0 : _b.hide();
    }

    this.parentDom.style.userSelect = type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText ? 'none' : 'auto';
    this.canDraw = this.operationModes.draw && !!type && type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick;
    this.setClassNameHandle(type);
    this.setDragStyle(type);
    this.penetrateEventHandle(type);
    this.updateBindEvents();
    this.hideSelectBox();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setToolType', 'true');
    return true;
  };

  ZegoWhiteboardViewImpl.prototype.getToolType = function () {
    var toolType = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["getToolType"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getToolType', JSON.stringify({
      toolType: toolType
    }));
    return toolType;
  }; // 设置画笔颜色


  ZegoWhiteboardViewImpl.prototype.setBrushColor = function (color) {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setBrushColor"])(color);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setBrushColor', JSON.stringify({
      color: color,
      res: res
    }));
    return res;
  }; // 获取当前画笔颜色


  ZegoWhiteboardViewImpl.prototype.getBrushColor = function () {
    var color = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["getBrushColor"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getBrushColor', JSON.stringify({
      color: color
    }));
    return color;
  }; // 设置画笔粗细


  ZegoWhiteboardViewImpl.prototype.setBrushSize = function (thin) {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setBrushSize"])(thin);
    res && this.updateStateSizeHandle();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setBrushSize', JSON.stringify({
      thin: thin,
      res: res
    }));
    return res;
  }; // 获取画笔粗细


  ZegoWhiteboardViewImpl.prototype.getBrushSize = function () {
    var size = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["getBrushSize"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getBrushSize', JSON.stringify({
      size: size
    }));
    return size;
  };

  ZegoWhiteboardViewImpl.prototype.setFontSize = function (thin) {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setFontSize"])(thin);
    res && this.updateStateSizeHandle();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setFontSize', JSON.stringify({
      thin: thin,
      res: res
    }));
    return res;
  };

  ZegoWhiteboardViewImpl.prototype.getFontSize = function () {
    var size = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["getFontSize"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getFontSize', JSON.stringify({
      size: size
    }));
    return size;
  }; // 设置文本大小


  ZegoWhiteboardViewImpl.prototype.setTextSize = function (thin) {
    var res = this.setFontSize(thin);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setTextSize', JSON.stringify({
      thin: thin,
      res: res
    }));
    return res;
  }; // 获取文本大小


  ZegoWhiteboardViewImpl.prototype.getTextSize = function () {
    var size = this.getFontSize();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getFontSize', JSON.stringify({
      size: size
    }));
    return this.getFontSize();
  }; // 设置文本加粗


  ZegoWhiteboardViewImpl.prototype.setFontBold = function (bold) {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setFontBold"])(bold);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setFontBold', JSON.stringify({
      bold: bold,
      res: res
    }));
    return res;
  }; // 获取文本是否加粗


  ZegoWhiteboardViewImpl.prototype.isFontBold = function () {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["isFontBold"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.isFontBold', JSON.stringify({
      res: res
    }));
    return res;
  }; // 设置文本斜体


  ZegoWhiteboardViewImpl.prototype.setFontItalic = function (italic) {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setFontItalic"])(italic);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setFontItalic', JSON.stringify({
      italic: italic,
      res: res
    }));
    return res;
  }; // 获取文本是否斜体


  ZegoWhiteboardViewImpl.prototype.isFontItalic = function () {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["isFontItalic"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setFontItalic', JSON.stringify({
      res: res
    }));
    return res;
  }; // 设置白板背景色，color支持16进制、rgba


  ZegoWhiteboardViewImpl.prototype.setBackgroundColor = function (color) {
    if (!Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["setBackgroundColor"])(color) || !this.toolInstance.enableDraw) return false;
    this.toolInstance.background.setBackgroundColor(color);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setBackgroundColor', JSON.stringify({
      color: color
    }));
    return true;
  }; // 获取白板背景色，返回color：16进制、rgba


  ZegoWhiteboardViewImpl.prototype.getBackgroundColor = function () {
    var res = Object(_utils_store__WEBPACK_IMPORTED_MODULE_33__["getBackgroundColor"])();
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getBackgroundColor', JSON.stringify({
      res: res
    }));
    return res;
  };

  ZegoWhiteboardViewImpl.prototype.setScaleFactor = function (scaleFactor, scaleOffsetX, scaleOffsetY) {
    var zoom = +scaleFactor;
    if (!zoom || zoom < 1) zoom = 1;

    if (this.viewInfo.zoom === zoom || !this.operationModes.scale || this.getToolType() === _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick) {
      return;
    }

    if (!this.toolInstance.getUserAuth().scale) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthScale);
      return;
    }

    this.scaleToHandle(zoom, scaleOffsetX || 0, scaleOffsetY || 0, true);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setScaleFactor', JSON.stringify({
      params: {
        zoom: zoom,
        x: scaleOffsetX,
        y: scaleOffsetY
      }
    }));
  };

  ZegoWhiteboardViewImpl.prototype.getScaleFactor = function () {
    var scaleFactor = {
      scaleFactor: this.viewInfo.zoom,
      scaleOffsetX: 0,
      scaleOffsetY: 0
    };
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getScaleFactor', JSON.stringify({
      scaleFactor: scaleFactor
    }));
    return scaleFactor;
  };

  ZegoWhiteboardViewImpl.prototype.getScaleOffsetX = function () {
    var scaleOffsetX = this.getScaleFactor().scaleOffsetX;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getScaleFactor', JSON.stringify({
      scaleOffsetX: scaleOffsetX
    }));
    return scaleOffsetX;
  };

  ZegoWhiteboardViewImpl.prototype.getScaleOffsetY = function () {
    var scaleOffsetY = this.getScaleFactor().scaleOffsetY;
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.getScaleFactor', JSON.stringify({
      scaleOffsetY: scaleOffsetY
    }));
    return scaleOffsetY;
  }; // 清空当前页白板图元


  ZegoWhiteboardViewImpl.prototype.clearCurrentPage = function () {
    this.toolInstance.clearPage(this.viewInfo.page || 1);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.clearCurrentPage', JSON.stringify({
      page: this.viewInfo.page || 1
    }));
  }; // 删除已选图元


  ZegoWhiteboardViewImpl.prototype.deleteSelectedGraphics = function () {
    this.toolInstance.deleteSelectedGraphics(_entities_view__WEBPACK_IMPORTED_MODULE_35__["DeleteGraphicAction"].BatchSelete);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.deleteSelectedGraphics');
  }; // 创建文本图元


  ZegoWhiteboardViewImpl.prototype.addText = function (text, positionX, positionY) {
    if (!this.operationModes.draw || this.getToolType() !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText) return;

    if (!text || !Object(_utils__WEBPACK_IMPORTED_MODULE_32__["isNumber"])(positionX) || !Object(_utils__WEBPACK_IMPORTED_MODULE_32__["isNumber"])(positionY) || positionX < 0 || positionY < 0 || positionX > this.viewInfo.viewWidth || positionY > this.viewInfo.viewHeight) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
      return;
    }

    if (!this.toolInstance.getUserAuth().create) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
      return;
    }

    var textTool = this.toolInstance.getInstanceHandle(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolText);
    this.toolInstance.updateOffsetAndScrollHandle();
    var point = this.toolInstance.transLocationOrigin({
      clientX: positionX,
      clientY: positionY
    });
    positionX = point.clientX;
    positionY = point.clientY;
    textTool.addTextGraphics(text, positionX, positionY);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.addText', JSON.stringify({
      params: {
        text: text,
        positionX: positionX,
        positionY: positionY
      }
    }));
  };

  ZegoWhiteboardViewImpl.prototype.addImage = function (type, positionX, positionY, address, listener) {
    var _this = this;

    var w = this.viewInfo.viewWidth;
    var h = this.viewInfo.viewHeight;
    var graphic = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewImageType"].ZegoWhiteboardViewImageGraphic;
    var custom = _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardViewImageType"].ZegoWhiteboardViewImageCustom;

    if (!address || type !== graphic && type !== custom || !Object(_utils__WEBPACK_IMPORTED_MODULE_32__["isNumber"])(positionX) || !Object(_utils__WEBPACK_IMPORTED_MODULE_32__["isNumber"])(positionY) || type === graphic && (positionX < 0 || positionY < 0 || positionX > w || positionY > h) || type === custom && typeof address !== 'string') {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
      return Promise.reject(error);
    }

    if (!this.operationModes.draw) return Promise.reject({});

    if (!this.toolInstance.getUserAuth().create) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorNoAuthCreateGraphic);
      return Promise.reject(error);
    }

    var limit = type === graphic ? 10 * 1024 * 1024 : 500 * 1024; // 网络图片

    if (typeof address === 'string') {
      var url_1 = address;

      if (!url_1.startsWith('https://')) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl);
        return Promise.reject(error);
      } // 检查网络图片内容大小


      return new Promise(function (resolve, reject) {
        var flag = true;
        var xhr = new XMLHttpRequest();
        xhr.open('HEAD', url_1, true);

        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4) {
            if (xhr.status != 200) {
              flag = false;
              var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
              return reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(code));
            }

            var mediaType_1 = (xhr.getResponseHeader('Content-Type') || '').replace('image/', '');
            var size = +xhr.getResponseHeader('Content-Length');

            if (!'jpg,jpeg,png,svg+xml'.includes(mediaType_1)) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
              return reject(error);
            }

            if (size > limit) {
              var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
              return reject(error);
            }

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.addImage', JSON.stringify({
              params: {
                type: type,
                positionX: positionX,
                positionY: positionY,
                address: address
              }
            }));

            if (type === custom) {
              _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.customImage.url = url_1; // 预下载自定义图片

              var img_1 = new Image();
              img_1.setAttribute('crossOrigin', 'anonymous');

              img_1.onload = function () {
                _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.customImage.w = img_1.width;
                _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicExtraState.customImage.h = img_1.height;
              };

              img_1.src = url_1;
              resolve(url_1);
            } else {
              _this.addImageGraphic(url_1, positionX, positionY).then(resolve);
            }
          }
        };

        xhr.onerror = function () {
          if (flag) {
            var code = xhr.status === 404 ? _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicIllegalUrl : _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorInvalidRsp;
            reject(Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(code));
          }
        };

        xhr.send(null);
      });
    } // Electron 本地图片是一个文件路径


    if (this.serviceHandle.isElectron && type === graphic && _typeof(address) === 'object') {
      address = address;

      if (!/(\.jpg|\.jpeg|\.png|\.svg)$/.test(address.path)) {
        var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
        return Promise.reject(error);
      }

      _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.addImage', JSON.stringify({
        params: {
          type: type,
          positionX: positionX,
          positionY: positionY,
          address: address.path
        }
      }));
      return this.serviceHandle.uploadImage(address.path, listener).then(function (res) {
        return _this.addImageGraphic(res, positionX, positionY);
      });
    } // 上传本地图片


    address = address;
    var mediaType = address.type.replace('image/', '');

    if (!'jpg,jpeg,png,svg+xml'.includes(mediaType)) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);
      return Promise.reject(error);
    }

    if (address.size > limit) {
      var error = Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["transError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorGraphicImageSizeLimit);
      return Promise.reject(error);
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.addImage', JSON.stringify({
      params: {
        type: type,
        positionX: positionX,
        positionY: positionY,
        address: address.name
      }
    }));
    return this.serviceHandle.uploadImage(address, listener).then(function (res) {
      return _this.addImageGraphic(res, positionX, positionY);
    });
  };

  ZegoWhiteboardViewImpl.prototype.setWhiteboardOperationMode = function (operationMode) {
    if (!operationMode || !Object(_utils__WEBPACK_IMPORTED_MODULE_32__["isNumber"])(operationMode)) {
      Object(_entities_error__WEBPACK_IMPORTED_MODULE_29__["emitError"])(_entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardError"].ZegoWhiteboardViewErrorParamInvalid);
      return;
    }

    var none = !!(operationMode % 2);
    var scroll = none ? false : [2, 6, 10, 14].includes(operationMode);
    var draw = none ? false : [4, 6, 12, 14].includes(operationMode);
    var scale = none ? false : [8, 10, 12, 14].includes(operationMode);
    this.operationModes = Object.freeze({
      none: none,
      scroll: scroll,
      draw: draw,
      scale: scale
    });
    var type = _entities_store__WEBPACK_IMPORTED_MODULE_27__["default"].basicState.type;

    if (this.toolInstance) {
      this.toolInstance.enableDraw = draw;
    }

    this.canDraw = draw && !!type && type !== _entities_view__WEBPACK_IMPORTED_MODULE_35__["ZegoWhiteboardTool"].ZegoWhiteboardViewToolClick;
    this.setDragStyle(type);
    this.penetrateEventHandle(type);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.setWhiteboardOperationMode', JSON.stringify({
      params: operationMode,
      result: this.operationModes
    }));
  };

  ZegoWhiteboardViewImpl.prototype.snapshot = function (customData) {
    return __awaiter(this, void 0, void 0, function () {
      var userData, instance, snapshotResult;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            userData = customData === null || customData === void 0 ? void 0 : customData.userData;
            instance = new _snapshot__WEBPACK_IMPORTED_MODULE_31__["Snapshot"](this.toolInstance, this.toolInstance.background);
            this.snapshotInstances[instance.snapshotId] = instance;
            return [4
            /*yield*/
            , instance.snapshot(userData)];

          case 1:
            snapshotResult = _a.sent();
            delete this.snapshotInstances[instance.snapshotId]; // 获取到图片资源后删除该实例。

            _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.snapshot', JSON.stringify({
              snapshotResult: snapshotResult
            }));
            return [2
            /*return*/
            , snapshotResult];
        }
      });
    });
  };

  ZegoWhiteboardViewImpl.prototype.reloadView = function () {
    if (this.getFileInfo()) {
      // 文件白板
      var detail = {
        action: _docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEventAction"].ReloadView,
        data: ''
      };
      this.parentDom && this.parentDom.dispatchEvent(new CustomEvent(_docsview_view_Bridge__WEBPACK_IMPORTED_MODULE_34__["DomEvent"].Whiteboard, {
        detail: detail
      }));
    } else if (this.canReloadView()) {
      // 纯白板：容器大小改变后，白板尺寸有变化才重新渲染
      this.reinitView();
    }

    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.reloadView');
  };

  ZegoWhiteboardViewImpl.prototype.getVisibleSize = function () {
    var size = {
      width: this.viewInfo.viewWidth,
      height: this.viewInfo.viewHeight
    };
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_36__["Logger"].getInstance().info(['WhiteBoard_View'], 'API.reloadView', JSON.stringify({
      size: size
    }));
    return size;
  };

  return ZegoWhiteboardViewImpl;
}();



/***/ }),

/***/ "./sdk/whiteboard/zegoWhiteboardService.ts":
/*!*************************************************!*\
  !*** ./sdk/whiteboard/zegoWhiteboardService.ts ***!
  \*************************************************/
/*! exports provided: ZegoWhiteboardService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZegoWhiteboardService", function() { return ZegoWhiteboardService; });
/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ "./node_modules/core-js/modules/es.object.set-prototype-of.js");
/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.create.js */ "./node_modules/core-js/modules/es.object.create.js");
/* harmony import */ var core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_create_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _services_graphics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/graphics */ "./sdk/whiteboard/services/graphics.ts");
/* harmony import */ var _services_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/module */ "./sdk/whiteboard/services/module.ts");
/* harmony import */ var _services_socket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/socket */ "./sdk/whiteboard/services/socket.ts");
/* harmony import */ var _services_execute__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./services/execute */ "./sdk/whiteboard/services/execute.ts");
/* harmony import */ var _view_services_base__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./view/services/base */ "./sdk/whiteboard/view/services/base.ts");
/* harmony import */ var _view_services_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./view/services/event */ "./sdk/whiteboard/view/services/event.ts");
/* harmony import */ var _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../docsview/view/Logger_new */ "./sdk/docsview/view/Logger_new.ts");




var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (b.hasOwnProperty(p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();









var ZegoWhiteboardService =
/** @class */
function (_super) {
  __extends(ZegoWhiteboardService, _super);

  function ZegoWhiteboardService(zegoWebRTC) {
    var _this = _super.call(this, 'web') || this;

    _this.socket = new _services_socket__WEBPACK_IMPORTED_MODULE_5__["Socket"](zegoWebRTC);
    _this.module = new _services_module__WEBPACK_IMPORTED_MODULE_4__["Module"](_this.socket);
    _this.graphic = new _services_graphics__WEBPACK_IMPORTED_MODULE_3__["Graphic"](_this.socket, _this.module); // @ts-ignore
    // if (window.zegoAddonLogger) {
    //     Logger.getInstance().updateLoggerHeader({ WhiteBoard_VER: $PROTO_VERSION_WHITEBOARD });
    // }

    var logConfig = {
      appID: 1,
      userID: '111',
      token: '111',
      isTestEnv: false
    };
    logConfig.appID = _this.socket.getAppID(); // 初始化日志 SDK

    Object(_docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["initLogger"])(0, logConfig, 'WhiteBoard', {
      WhiteBoard_VER: "2.2.3"
    });

    _this.init();

    return _this;
  }

  ZegoWhiteboardService.prototype.init = function () {
    var _this = this; // 注册 reload、unload 回调


    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].on(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].RoomConnected, function () {
      if (_this.isPlayback) return;

      _this.module.reload();

      _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].SuperRoomConnected);
    });
    _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].on(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].RoomDisConnected, function () {
      _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].SuperDocsLogoutRoom);
      _view_services_event__WEBPACK_IMPORTED_MODULE_8__["default"].emit(_view_services_event__WEBPACK_IMPORTED_MODULE_8__["ZegoServiceEventType"].SuperRoomDisConnected);
      if (_this.isPlayback) return;

      _this.module.unload();
    });
  };

  ZegoWhiteboardService.prototype.setFileInfo = function (info) {
    this.module.setFileInfo(info);
  };

  ZegoWhiteboardService.prototype.enablePlayback = function () {
    this.isPlayback = true;
    this.socket.isSendPB = false;
    this.execute = new _services_execute__WEBPACK_IMPORTED_MODULE_6__["Execute"](this.module);
  };

  ZegoWhiteboardService.prototype.loginRoom = function (roomID, token, user, config) {
    // const logConfig = {
    //     appID: 0,
    //     userID: user.userID
    // };
    // // 初始化日志 SDK
    // initLogger(logConfig, 'WhiteBoard', { WhiteBoard_VER: $PROTO_VERSION_WHITEBOARD });
    // // 开启定时上传
    // Logger.startTimingUpload();
    var logConfig = {
      appID: 0,
      userID: user.userID,
      server: '',
      token: token
    };
    logConfig.server = this.socket.getServer();
    logConfig.appID = this.socket.getAppID();
    var headerConfig = {
      appID: this.socket.getAppID(),
      userID: user.userID,
      token: token,
      isTestEnv: logConfig.server.indexOf('-test') !== -1
    };
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().setLoggerHeader(headerConfig, "2.2.3");
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().setUploadConfig(config);
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard'], 'API.loginRoom', JSON.stringify({
      roomID: roomID,
      user: user,
      config: config
    }));
    return this.socket.loginRoom(roomID, token, user, config);
  };

  ZegoWhiteboardService.prototype.logoutRoom = function (roomID) {
    _docsview_view_Logger_new__WEBPACK_IMPORTED_MODULE_9__["Logger"].getInstance().info(['WhiteBoard'], 'API.logoutRoom', JSON.stringify({
      roomID: roomID
    }));
    return this.socket.logoutRoom(roomID);
  }; // 获取图元是否结束绘制


  ZegoWhiteboardService.prototype.getGraphicIsEndDraw = function (graphic_id) {
    return this.graphic.getGraphicIsEndDraw(graphic_id);
  };

  ZegoWhiteboardService.prototype.updateToRemoteHandle = function (whiteboardID, graphicList, success, error) {
    if (this.isPlayback) {
      success === null || success === void 0 ? void 0 : success();
      return;
    }

    this.graphic.updateToRemoteHandle(whiteboardID, graphicList, success, error);
  };

  ZegoWhiteboardService.prototype.getModName = function (whiteboardID) {
    return this.module.getModName(whiteboardID);
  }; // 获取白板 创建时间


  ZegoWhiteboardService.prototype.getCreateTime = function (whiteboardID) {
    return this.module.getCreateTime(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getRoomID = function (whiteboardID) {
    return this.module.getRoomID(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getUniqueID = function (whiteboardID) {
    return this.module.getUniqueID(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getUserID = function () {
    return this.socket.getUserID();
  };

  ZegoWhiteboardService.prototype.getRoomState = function () {
    return this.socket.getRoomState();
  };

  ZegoWhiteboardService.prototype.getPageCount = function (whiteboardID) {
    return this.module.getPageCount(whiteboardID);
  };

  ZegoWhiteboardService.prototype.setSize = function (whiteboardID, width, height) {
    return this.module.setSize(whiteboardID, width, height);
  };

  ZegoWhiteboardService.prototype.setViewSize = function (whiteboardID, viewWidth, viewHeight) {
    return this.module.setViewSize(whiteboardID, viewWidth, viewHeight);
  };

  ZegoWhiteboardService.prototype.undo = function (whiteboardID) {};

  ZegoWhiteboardService.prototype.redo = function (whiteboardID) {};

  ZegoWhiteboardService.prototype.createMod = function (view, whiteboardID) {
    return this.module.createMod(view, whiteboardID);
  };

  ZegoWhiteboardService.prototype.clearView = function (whiteboardID, layers) {
    return this.graphic.clearView(whiteboardID, layers);
  };

  ZegoWhiteboardService.prototype.scroll = function (whiteboardID, horizontalPercent, verticalPercent, pptStep, scale) {
    if (this.isPlayback) return;
    this.module.scroll(whiteboardID, horizontalPercent, verticalPercent, pptStep, scale);
  };

  ZegoWhiteboardService.prototype.scale = function (whiteboardID, scale, ofsX, ofsY) {
    if (this.isPlayback) return;
    this.module.scale(whiteboardID, scale, ofsX, ofsY);
  };

  ZegoWhiteboardService.prototype.loadCurrentGraphics = function (whiteboardID, hPercent, vPercent) {
    if (this.isPlayback) return;
    this.module.loadCurrentGraphics(whiteboardID, hPercent, vPercent);
  };

  ZegoWhiteboardService.prototype.getScrollPercent = function (whiteboardID) {
    return this.module.getScrollPercent(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getScale = function (whiteboardID) {
    return this.module.getScale(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getAspectRatio = function (whiteboardID) {
    return this.module.getAspectRatio(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getFileInfo = function (whiteboardID) {
    return this.module.getFileInfo(whiteboardID);
  };

  ZegoWhiteboardService.prototype.uploadImage = function (file, listener) {
    return this.graphic.uploadImage(file, listener);
  };

  ZegoWhiteboardService.prototype.createZorder = function () {
    return this.module.createZorder();
  };

  ZegoWhiteboardService.prototype.destroyMod = function (whiteboardID) {
    return this.module.destroyMod(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getModList = function () {
    return this.module.getModList();
  }; // 获取白板当前H5动画信息


  ZegoWhiteboardService.prototype.getH5Extra = function (whiteboardID) {
    return this.module.getH5Extra(whiteboardID);
  }; // 追加H5动画信息


  ZegoWhiteboardService.prototype.appendH5Extra = function (whiteboardID, modExtra) {
    if (this.isPlayback) return;
    this.module.appendH5Extra(whiteboardID, modExtra);
  };

  ZegoWhiteboardService.prototype.getUserAuth = function () {
    return this.module.getUserAuth();
  };

  ZegoWhiteboardService.prototype.enableHandwriting = function () {};

  ZegoWhiteboardService.prototype.isAppendPathLimit = function (whiteboardID, graphic) {
    return this.graphic.isAppendPathLimit(whiteboardID, graphic);
  };

  ZegoWhiteboardService.prototype.reloadViewGraphics = function (whiteboardID, graphics) {
    this.module.reloadViewGraphics(whiteboardID, graphics);
  };

  ZegoWhiteboardService.prototype.switchView = function (whiteboardID) {
    return this.module.switchView(whiteboardID);
  };

  ZegoWhiteboardService.prototype.getCurrentActivitedView = function () {
    return this.module.getCurrentActivitedView();
  };

  return ZegoWhiteboardService;
}(_view_services_base__WEBPACK_IMPORTED_MODULE_7__["ZegoWhiteboardServiceBase"]);



/***/ })

/******/ });
});