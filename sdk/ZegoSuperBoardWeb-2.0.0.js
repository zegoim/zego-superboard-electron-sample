/*! For license information please see ZegoSuperBoardWeb.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=327)}([function(e,t,o){"use strict";o.d(t,"d",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return n})),o.d(t,"e",(function(){return a})),o.d(t,"f",(function(){return s})),o.d(t,"g",(function(){return u})),o.d(t,"h",(function(){return h})),o.d(t,"c",(function(){return d})),o.d(t,"k",(function(){return p})),o.d(t,"l",(function(){return f}));var r,i,n,a,s,c,l,u,h,d,p,f,g=o(92);o.d(t,"i",(function(){return g.a})),o.d(t,"j",(function(){return g.b})),o.d(t,"m",(function(){return g.c})),o.d(t,"n",(function(){return g.d})),o.d(t,"o",(function(){return g.e})),function(e){e[e.PPT=1]="PPT",e[e.DOC=2]="DOC",e[e.ELS=4]="ELS",e[e.PDF=8]="PDF",e[e.IMG=16]="IMG",e[e.TXT=32]="TXT",e[e.PPTH5=512]="PPTH5",e[e.CUSTOM_H5=4096]="CUSTOM_H5"}(r||(r={})),function(e){e[e.Single=1]="Single",e[e.Multi=2]="Multi",e[e.Other=4]="Other"}(i||(i={})),function(e){e[e.Append=1]="Append",e[e.Update=2]="Update",e[e.Delete=4]="Delete",e[e.Move=8]="Move",e[e.Create=32]="Create"}(n||(n={})),function(e){e[e.Local=0]="Local",e[e.Remote=1]="Remote",e[e.UnReDo=2]="UnReDo",e[e.Reload=3]="Reload"}(a||(a={})),function(e){e[e.Pencil=1]="Pencil",e[e.Text=2]="Text",e[e.Line=4]="Line",e[e.Rect=8]="Rect",e[e.Ellipse=16]="Ellipse",e[e.Laser=128]="Laser",e[e.Image=256]="Image",e[e.BgImage=512]="BgImage",e[e.RealTime=999]="RealTime"}(s||(s={})),function(e){e[e.Pc=1]="Pc",e[e.Mobile=2]="Mobile"}(c||(c={})),function(e){e[e.Init=1]="Init",e[e.Down=2]="Down",e[e.Move=3]="Move",e[e.DownMove=4]="DownMove",e[e.DownMoveUp=5]="DownMoveUp",e[e.DownNoMoveUp=6]="DownNoMoveUp",e[e.Leave=7]="Leave",e[e.DownLeave=8]="DownLeave"}(l||(l={})),function(e){e[e.success=1]="success",e[e.error=2]="error"}(u||(u={})),function(e){e[e.InProgress=1]="InProgress",e[e.Pending=2]="Pending"}(h||(h={})),function(e){e[e.BatchSelete=0]="BatchSelete",e[e.ClearPage=1]="ClearPage",e[e.EraserTool=2]="EraserTool"}(d||(d={})),function(e){e[e.None=0]="None",e[e.Scale=1]="Scale",e[e.Scroll=2]="Scroll"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Append=1]="Append",e[e.Update=2]="Update",e[e.Delete=4]="Delete",e[e.Move=8]="Move",e[e.Clear=16]="Clear",e[e.Create=32]="Create"}(f||(f={}))},function(e,t,o){"use strict";var r,i,n,a,s;o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"d",(function(){return a})),o.d(t,"e",(function(){return s})),function(e){e.UnloadVideoSrc="unloadVideoSrc",e.DisableH5ImageDrag="disableH5ImageDrag",e.PptStepMode="pptStepMode",e.ThumbnailMode="thumbnailMode",e.Domain="domain"}(r||(r={})),function(e){e[e.ZegoDocsViewSuccess=0]="ZegoDocsViewSuccess",e[e.ZegoDocsViewErrorInternal=2000001]="ZegoDocsViewErrorInternal",e[e.ZegoDocsViewErrorParamInvalid=2000002]="ZegoDocsViewErrorParamInvalid",e[e.ZegoDocsViewErrorNetworkTimeout=2000003]="ZegoDocsViewErrorNetworkTimeout",e[e.ZegoDocsViewErrorFileNotExist=2010001]="ZegoDocsViewErrorFileNotExist",e[e.ZegoDocsViewErrorUploadFailed=2010002]="ZegoDocsViewErrorUploadFailed",e[e.ZegoDocsViewErrorUnsupportRenderType=2010003]="ZegoDocsViewErrorUnsupportRenderType",e[e.ZegoDocsViewErrorFileEncrypt=2020001]="ZegoDocsViewErrorFileEncrypt",e[e.ZegoDocsViewErrorFileSizeLimit=2020002]="ZegoDocsViewErrorFileSizeLimit",e[e.ZegoDocsViewErrorFileSheetLimit=2020003]="ZegoDocsViewErrorFileSheetLimit",e[e.ZegoDocsViewErrorConvertFail=2020004]="ZegoDocsViewErrorConvertFail",e[e.ZegoDocsViewErrorConvertCancel=2020005]="ZegoDocsViewErrorConvertCancel",e[e.ZegoDocsViewErrorFileContentEmpty=2020006]="ZegoDocsViewErrorFileContentEmpty",e[e.ZegoDocsViewErrorFileReadOnly=2020007]="ZegoDocsViewErrorFileReadOnly",e[e.ZegoDocsViewErrorConvertElementNotSupported=2020008]="ZegoDocsViewErrorConvertElementNotSupported",e[e.ZegoDocsViewErrorConvertFileTypeInvalid=2020009]="ZegoDocsViewErrorConvertFileTypeInvalid",e[e.ZegoDocsViewErrorAuthParamInvalid=2030001]="ZegoDocsViewErrorAuthParamInvalid",e[e.ZegoDocsViewErrorFilePathNotAccess=2030002]="ZegoDocsViewErrorFilePathNotAccess",e[e.ZegoDocsViewErrorInitFailed=2030003]="ZegoDocsViewErrorInitFailed",e[e.ZegoDocsViewErrorSizeInvalid=2030004]="ZegoDocsViewErrorSizeInvalid",e[e.ZegoDocsViewErrorFreeSpaceLimit=2030005]="ZegoDocsViewErrorFreeSpaceLimit",e[e.ZegoDocsViewErrorUploadNotSupported=2030006]="ZegoDocsViewErrorUploadNotSupported",e[e.ZegoDocsViewErrorUploadDuplicated=2030007]="ZegoDocsViewErrorUploadDuplicated",e[e.ZegoDocsViewErrorEmptyDomain=2030008]="ZegoDocsViewErrorEmptyDomain",e[e.ZegoDocsViewErrorHaveInit=2030009]="ZegoDocsViewErrorHaveInit",e[e.ZegoDocsViewErrorServerFileNotExist=2030010]="ZegoDocsViewErrorServerFileNotExist",e[e.ZegoDocsViewErrorCacheNotSupported=2030014]="ZegoDocsViewErrorCacheNotSupported",e[e.ZegoDocsViewErrorCacheFailed=2030015]="ZegoDocsViewErrorCacheFailed",e[e.ZegoDocsViewErrorZipFileInvalid=2030016]="ZegoDocsViewErrorZipFileInvalid",e[e.ZegoDocsViewErrorH5FileInvalid=2030017]="ZegoDocsViewErrorH5FileInvalid"}(i||(i={})),function(e){e[e.ZegoDocsViewFileTypeUnknown=0]="ZegoDocsViewFileTypeUnknown",e[e.ZegoDocsViewFileTypePPT=1]="ZegoDocsViewFileTypePPT",e[e.ZegoDocsViewFileTypeDOC=2]="ZegoDocsViewFileTypeDOC",e[e.ZegoDocsViewFileTypeELS=4]="ZegoDocsViewFileTypeELS",e[e.ZegoDocsViewFileTypePDF=8]="ZegoDocsViewFileTypePDF",e[e.ZegoDocsViewFileTypeIMG=16]="ZegoDocsViewFileTypeIMG",e[e.ZegoDocsViewFileTypeTXT=32]="ZegoDocsViewFileTypeTXT",e[e.ZegoDocsViewFileTypeDynamicPPTH5=512]="ZegoDocsViewFileTypeDynamicPPTH5",e[e.ZegoDocsViewFileTypeAudio=1024]="ZegoDocsViewFileTypeAudio",e[e.ZegoDocsViewFileTypeVideo=2048]="ZegoDocsViewFileTypeVideo",e[e.ZegoDocsViewFileTypeCustomH5=4096]="ZegoDocsViewFileTypeCustomH5"}(n||(n={})),function(e){e[e.ZegoDocsViewRenderTypeVector=1]="ZegoDocsViewRenderTypeVector",e[e.ZegoDocsViewRenderTypeIMG=2]="ZegoDocsViewRenderTypeIMG",e[e.ZegoDocsViewRenderTypeVectorAndIMG=3]="ZegoDocsViewRenderTypeVectorAndIMG",e[e.ZegoDocsViewRenderTypeDynamicPPTH5=6]="ZegoDocsViewRenderTypeDynamicPPTH5"}(a||(a={})),function(e){e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.WAITING=4]="WAITING",e[e.CONVERTING=8]="CONVERTING",e[e.CONVERTED=16]="CONVERTED",e[e.CONVERT_FAIL=32]="CONVERT_FAIL",e[e.CONVERT_CANCEL=64]="CONVERT_CANCEL"}(s||(s={}))},function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return u}));o(49),o(74),o(91),o(48),o(35),o(37),o(50),o(85);var r=function(){return(r=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(){function e(e,t){this.appid="",this.roomid="",this.userid="",this.token="",this.isTestEnv=!0,this.version="",this.platform="",this.extra={},this.isProd=!1,this.isElectron=!1,this.logLevel=1,this.logCacheSend=[],this.logCacheMax=100,this.platform=e||"",this.isElectron=t,this.openLogServer()}return e.prototype.init=function(e){var t=e.appid,o=e.isTestEnv,r=e.version,i=e.isProd,n=e.liveroom;this.appid=(t||this.appid)+"",this.isTestEnv=o,this.version=r||this.version,this.isProd=i,n&&!this.platform.includes("liveroom")&&(this.platform+=",liveroom")},e.prototype.initRoom=function(e){var t=e.roomid,o=e.userid,r=e.token,i=e.logLevel;this.roomid=t||this.roomid,this.userid=o||this.userid,this.token=r||this.token,"number"==typeof i&&(this.logLevel=i)},e.prototype.setExtraConfig=function(e){Object.assign(this.extra,e)},e.prototype.getConfig=function(){return{appid:+this.appid,roomid:this.roomid,userid:this.userid,token:this.token,isTestEnv:this.isTestEnv}},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.log(0,e);if(this.logLevel>0);else{var r=console.debug;r(o)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.log(1,e);if(this.logLevel>1);else{var r=console.info;r(o)}},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.log(2,e);if(this.logLevel>2);else{var r=console.warn;r(o)}},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.log(3,e);if(this.logLevel>3);else{var r=console.error;r(o)}},e.prototype.writeLocalLog=function(e){},e.prototype.log=function(e,t){var o=this.isProd||this.isElectron?this.logParamList(e,t.join("")):t.join("");return this.isProd&&this.remoteWebSocketLog(e,o),this.isElectron&&this.writeLocalLog(o),o},e.prototype.openLogServer=function(){this.stopWebSocketServer(),this.websocket=new WebSocket("wss://weblogger-edu.zego.im/log")},e.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.close(),this.websocket=null)},e.prototype.remoteWebSocketLog=function(e,t){if(!("string"==typeof t&&t.length>4e3))if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState)this.openLogServer(),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(this.logCacheSend.length>0){for(var o="",r=0;r<this.logCacheSend.length;r++)(o+this.logCacheSend[r]).length>4e3&&(this.websocket.send(o),o=""),o=o+this.logCacheSend[r]+"\n";t=o+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},e.prototype.logParamList=function(e,t){var o=(new Date).toLocaleString(),i=t.indexOf(" "),n=t.substr(0,i)||t,a=t.substr(i+1,4500),s=r(r({time:o,level:e,action:n,content:a,appid:this.appid,userid:this.userid,roomid:this.roomid},this.extra),{version:this.version,platform:this.platform});return JSON.stringify(s)},e}(),n=function(e,t,o){var r=!(!e||!e.versions.electron);return{electron:r,platform:(r?e.platform:t)+","+o[o.length-2]+","+o[o.length-1]}}(window.process,navigator.platform,navigator.userAgent.split(" ")),a=n.electron,s=n.platform,c=a?"ec.":"web.";function l(e,t){return""+c+e+t+" "}var u=window.zegoLogger||(window.zegoLogger=new i(s,a))},function(e,t,o){"use strict";var r=o(0),i="ontouchstart"in window||navigator.maxTouchPoints>0;t.a={reservedPrefix:{whiteboardZoom:"zego-whiteboard-zoom",fileWhiteboardCon:"zego-docsview-con",whiteboardCon:"zego-whiteboard-con",whiteboard:"zego-whiteboard",laserContainer:"zego-other-container",graphicsBgContainer:"zego-graphics-bg-container",graphicsBgImageContainer:"zego-graphics-bgImage-container",graphicsContainer:"zego-graphics-container",graphicsSvg:"zego-svg",textareaCon:"zego-textarea",laserCon:"zego-laser",graphics:"zego-graphics",boxContainer:"zego-box-container",graphicsBox:"zego-graphics-box"},basicState:{type:r.j.ZegoWhiteboardViewToolPen,size:6,fontSize:24,color:"#f54326",bgColor:"rgb(241, 243, 244)",attributes:'{"bold": false, "italic": false, "stroke": false}'},basicExtraState:{drawSize:0,drawFontSize:0,customImage:{url:"",w:80,h:80},defaultFileBgColor:"rgb(255, 255, 255, 0)"},realTimeState:{localDrawCount:10,remoteDrawDelay:4,remoteDrawCount:2,remoteDrawEndDelay:1e4},scaleModes:{sync:!1,response:!1},handWritingFactor:{step:.016,max_speed:1.2,min_speed:.05,max_width_factor:1.2,min_width_factor:.5,last_size:0,lastX:0,lastY:0},svgPath:{tops:[],bottoms:[]},isTouch:i,boxPadding:0,textareaBoxPadding:24,textareaHPadding:6,textareaVPadding:0,textareaConBorderWidth:1,lineHeight:1.5,boxBorderWidth:2,selectedBorderCss:"2px solid #b0b3b8",unSelectedBorderCss:"2px solid transparent",maxlength:200,scrollbarSize:20,initLaserX:0,initLaserY:0,hiddenLaserX:-100,hiddenLaserY:-100,hiddenLaserDelay:5e3,mouseEvents:{down:"mousedown",move:"mousemove",up:"mouseup",leave:"mouseleave",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mouseleave:"touchcancel"},calStandard:{sizeWidth:1280,placeWidth:128e4,minFontSize:i?1:12,maxFontSize:100,minLineWidth:1,maxLineWidth:100}}},function(e,t,o){"use strict";o.d(t,"g",(function(){return u})),o.d(t,"l",(function(){return h})),o.d(t,"k",(function(){return d})),o.d(t,"h",(function(){return p})),o.d(t,"i",(function(){return f})),o.d(t,"a",(function(){return g})),o.d(t,"j",(function(){return a})),o.d(t,"b",(function(){return s})),o.d(t,"f",(function(){return c})),o.d(t,"e",(function(){return l}));var r=o(1);o.d(t,"m",(function(){return r.a})),o.d(t,"n",(function(){return r.b})),o.d(t,"o",(function(){return r.c}));var i=o(14);o.d(t,"p",(function(){return i.a})),o.d(t,"q",(function(){return i.b}));var n=o(24);o.d(t,"c",(function(){return n.a})),o.d(t,"d",(function(){return n.b}));var a,s,c,l,u=100,h=1e3,d=2e4,p=62e3,f=2*(window.devicePixelRatio||1),g={zoom:"zego-docsview-zoom",doc:"zego-docsview-con",render:"zego-docsview-render",iframe:"zego-docsview-iframe",wb:"zego-whiteboard"};!function(e){e[e.PDF=0]="PDF",e[e.PPT=1]="PPT",e[e.H5_PPT=2]="H5_PPT",e[e.H5_CUSTOM=3]="H5_CUSTOM"}(a||(a={})),function(e){e.Load="onDocsLoadPdf",e.GetPageImage="onDocsGetPDFPageImage",e.Uploading="onDocsUploading",e.Convert="onDocsConvertStatus",e.Downloading="onDocsDownloading",e.QueryCache="onDocsCachExist",e.CancelCache="onDocsCancelCache",e.DownloadCache="onDocsDownloadCache",e.LoadFile="docsLoad",e.Upload="docsUpload",e.UploadH5File="docsUploadH5File"}(s||(s={})),function(e){e.InitPlatform="initPlatform",e.GetAllPageStepCount="getAllPageStepCount",e.SetCustomizedConfig="setCustomizedConfig",e.GotoPage="gotoPage",e.PreviousStep="previousStep",e.NextStep="nextStep",e.TriggerElementsClick="triggerElementsClick",e.SnapshotForH5="snapshotForH5",e.StopPlay="stopPlay",e.SetVolume="setVolume",e.HideLoadingStyle="hideLoadingStyle"}(c||(c={})),function(e){e.Scale="scale",e.SyncDOMEvent="syncDOMEvent",e.PptOperationAuth="pptOperationAuth"}(l||(l={}))},function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"d",(function(){return a}));var r,i,n,a;o(38),o(74),o(93),o(177),o(39);!function(e){e.Upload="onUpload",e.LoadFile="onLoadFile",e.StepChange="onStepChange",e.Scroll="onScroll",e.PlayAnimation="onPlayAnimation"}(r||(r={})),function(e){e.Error="error",e.ViewAdd="viewAdd",e.ViewRemoved="viewRemoved",e.ViewScroll="viewScroll",e.WhiteboardAuthChange="whiteboardAuthChange",e.WhiteboardGraphicAuthChange="whiteboardGraphicAuthChange"}(i||(i={})),function(e){e.PushAddMod="pushAddMod",e.PushRemovedMod="pushRemovedMod",e.PushDrawPageGraphics="pushDrawPageGraphics",e.PushClearPageGraphics="pushClearPageGraphics",e.PushScroll="pushScroll",e.PushScale="pushScale",e.PushH5ExtraAppended="pushH5ExtraAppended",e.PushAuthChange="pushAuthChange",e.GetPageGraphicsList="getPageGraphicsList",e.AppendH5Extra="appendH5Extra",e.Scroll="scroll",e.Scale="scale",e.AttachedView="attachedView"}(n||(n={})),function(e){e.SubViewScrolled="superBoardSubViewScrolled",e.RemoteSubViewAdd="remoteSuperBoardSubViewAdded",e.RemoteSubViewRemoved="remoteSuperBoardSubViewRemoved",e.RemoteSubViewSwitched="remoteSuperBoardSubViewSwitched",e.RemoteSubViewExcelSwitched="remoteSuperBoardSubViewExcelSwitched",e.RemoteAuthChange="remoteSuperBoardAuthChanged",e.RemoteGraphicAuthChange="remoteSuperBoardGraphicAuthChanged",e.RemoteScaleChanged="remoteScaleChanged",e.SyncSwitchMod="syncSwitchMod",e.RemoteSwitchMod="remoteSwitchMod",e.RemoteModAdd="remoteModAdd",e.RemoteModRemoved="remoteModRemoved"}(a||(a={}));var s=function(){function e(){var e;this.listeners=((e={})[i.Error]=[],e[r.LoadFile]=[],e[r.Upload]=[],e[r.Scroll]=[],e[r.StepChange]=[],e[r.PlayAnimation]=[],e[n.PushAddMod]=[],e[n.PushRemovedMod]=[],e[n.PushDrawPageGraphics]=[],e[n.PushClearPageGraphics]=[],e[n.PushScroll]=[],e[n.PushScale]=[],e[n.PushH5ExtraAppended]=[],e[n.PushAuthChange]=[],e[n.GetPageGraphicsList]=[],e[n.AppendH5Extra]=[],e[n.Scroll]=[],e[n.Scale]=[],e[n.AttachedView]=[],e[i.ViewAdd]=[],e[i.ViewRemoved]=[],e[i.ViewScroll]=[],e[i.WhiteboardAuthChange]=[],e[i.WhiteboardGraphicAuthChange]=[],e[a.RemoteSubViewAdd]=[],e[a.RemoteSubViewRemoved]=[],e[a.RemoteSubViewSwitched]=[],e[a.RemoteSubViewExcelSwitched]=[],e[a.RemoteAuthChange]=[],e[a.RemoteGraphicAuthChange]=[],e[a.SyncSwitchMod]=[],e[a.RemoteSwitchMod]=[],e[a.RemoteModAdd]=[],e[a.RemoteModRemoved]=[],e[a.SubViewScrolled]=[],e[a.RemoteScaleChanged]=[],e)}return e.prototype.on=function(e,t){return!!this.listeners[e]&&("function"==typeof t&&(-1==this.listeners[e].indexOf(t)&&this.listeners[e].push(t),!0))},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var o=this.listeners[e];return t?o.splice(o.indexOf(t),1):this.listeners[e]=[],!0},e.prototype.removeAllListeners=function(){var e=this;return Object.keys(this.listeners).forEach((function(t){e.listeners[t]=[]})),!0},e.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.listeners[e]&&this.listeners[e].forEach((function(e){e.apply(void 0,t)}))},e}();t.e=new s},function(e,t,o){"use strict";o.d(t,"k",(function(){return N})),o.d(t,"d",(function(){return y})),o.d(t,"n",(function(){return b})),o.d(t,"g",(function(){return w})),o.d(t,"c",(function(){return S})),o.d(t,"l",(function(){return x})),o.d(t,"o",(function(){return P})),o.d(t,"e",(function(){return T})),o.d(t,"p",(function(){return D})),o.d(t,"q",(function(){return O})),o.d(t,"a",(function(){return M})),o.d(t,"b",(function(){return A})),o.d(t,"h",(function(){return C})),o.d(t,"i",(function(){return L})),o.d(t,"t",(function(){return k})),o.d(t,"s",(function(){return V})),o.d(t,"r",(function(){return H})),o.d(t,"f",(function(){return v})),o.d(t,"m",(function(){return E})),o.d(t,"j",(function(){return B}));o(222),o(38),o(74),o(91),o(81),o(48),o(88),o(32),o(293),o(295),o(37),o(161),o(297),o(64),o(85),o(39);var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function n(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&a.test(e)},c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(o))throw TypeError("Stringified UUID is invalid");return o};var h=function(e,t,o){var r=(e=e||{}).random||(e.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){o=o||0;for(var i=0;i<16;++i)t[o+i]=r[i];return t}return u(r)},d=o(281),p=o.n(d),f=o(261),g=o.n(f),m=o(3),_=o(0),y=function(){return""+g()(h())},v=function(){var e=Math.sqrt(Math.sqrt(+g()(h())))*Math.random()|0;return e>99?.3*e|0:e<3?e+10*Math.random()|0:e},b=function(e){if(e){var t=e.parentNode;t?t.removeChild(e):e.remove?e.remove():e.removeNode()}},w=function(e){return e.children||e.childNodes},S=function(e,t,o,r){var i,n=m.a.calStandard,a=n.sizeWidth,s=n.minFontSize,c=n.minLineWidth;return r?i=Math.round(e*a/o):(i=Math.round(o*e/a),_.f.Text===t?i<s&&(i=s):i<c&&(i=c)),i},I=function(e){var t=e[0],o=e[1],r=e[2],i=e[3];return[Math.min(t,r||t),Math.min(o,i||o)]},x=function(e,t){var o;switch(e){case _.f.Pencil:o=function(e){for(var t=e.length,o=.1,r=t-4,i="M"+e[0]+", "+e[1],n=0;n<t-2;n+=2){var a=n?e[n-2]:e[0],s=n?e[n-1]:e[1],c=e[n+0],l=e[n+1],u=e[n+2],h=e[n+3],d=n!==r?e[n+4]:u,p=n!==r?e[n+5]:h;i+=" C"+(Number(c)+(u-a)/6*o)+","+(Number(l)+(h-s)/6*o)+","+(Number(u)-(d-c)/6*o)+","+(Number(h)-(p-l)/6*o)+","+u+","+h}return i}(t);break;case _.f.Line:o={x1:t[0],y1:t[1],x2:t[2]||t[0],y2:t[3]||t[1]};break;case _.f.Rect:var r=Math.abs((t[2]||t[0])-t[0])||1,i=Math.abs((t[3]||t[1])-t[1])||1,n=I(t);o={x:n[0],y:n[1],width:r,height:i};break;case _.f.Ellipse:var a=Math.abs((t[2]||t[0])-t[0])/2||.5,s=Math.abs((t[3]||t[1])-t[1])/2||.5,c=I(t);o={cx:c[0]+a,cy:c[1]+s,rx:a,ry:s};break;default:o=""}return o},E=function(e,t,o){var r=m.a.handWritingFactor,i=r.step,n=r.max_width_factor,a=r.min_width_factor,s=r.max_speed,c=r.min_speed,l=m.a.handWritingFactor,u=l.lastX,h=l.lastY,d=e.data,p=d.length,f=!0;m.a.svgPath.tops=[],m.a.svgPath.bottoms=[];for(var g={tx1:0,ty1:0,tx2:0,ty2:0,bx1:0,by1:0,bx2:0,by2:0,mtx1:0,mty1:0,mbx1:0,mby1:0},_=2;_<p;_+=2){2===_&&(u=d[0],h=d[1]);var y=u,v=h,b=d[_]-y,w=d[_+1]-v,S=Math.sqrt(Math.pow(b,2)+Math.pow(w,2));if(!(S<o/1280*3*2.5)){var I=S*i;I>s&&(I=s),I<c&&(I=c);var x=n*t,E=a*t,P=(x-E)*(1-I/s)+E;P>x&&(P=x),P<E&&(P=E);var T,D;if(T=P/2*w/S,D=P/2*b/S,g.tx1=u+T,g.ty1=h-D,g.tx2=d[_]+T,g.ty2=d[_+1]-D,g.bx1=u-T,g.by1=h+D,g.bx2=d[_]-T,g.by2=d[_+1]+D,f&&(g.tx1=u,g.ty1=h,g.bx1=u,g.by1=h),g.mtx1=(g.tx1+g.tx2)/2,g.mty1=(g.ty1+g.ty2)/2,g.mbx1=(g.bx1+g.bx2)/2,g.mby1=(g.by1+g.by2)/2,f)m.a.svgPath.tops.push("M"+u+" "+h+" L"+g.mtx1+" "+g.mty1),m.a.svgPath.bottoms.unshift("Q"+g.bx2+" "+g.by2+" "+g.mbx1+" "+g.mby1+" L"+u+" "+h);else if(m.a.svgPath.tops.join("").indexOf("M")<0&&m.a.svgPath.tops.push("M"+g.mtx1+" "+g.mty1),_===p-2){var O=d[p-2],M=d[p-1];I===c?m.a.svgPath.tops.push("Q"+O+" "+M+" "+O+" "+M):m.a.svgPath.tops.push("Q"+g.tx1+" "+g.ty1+" "+O+" "+M)}else m.a.svgPath.tops.push("Q"+g.tx1+" "+g.ty1+" "+g.mtx1+" "+g.mty1),m.a.svgPath.bottoms.unshift("Q"+g.bx2+" "+g.by2+" "+g.mbx1+" "+g.mby1);u=d[_],h=d[_+1],f=!1}}return m.a.svgPath.tops.concat(m.a.svgPath.bottoms).join(" ")},P=function(e,t){t.forEach((function(t){e.setAttribute(t.attr,t.value)}))},T=function(e,t,o,r){var i,n=document.querySelector("#"+e);if(n)return r&&n.setAttribute("data-z",r+""),[i=n.querySelector("#"+t)];n=document.createElementNS("http://www.w3.org/2000/svg","svg");var a=document.createElementNS("http://www.w3.org/2000/svg","g");return i=document.createElementNS("http://www.w3.org/2000/svg",o),n.id=e,n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("version","1.1"),r&&n.setAttribute("data-z",r+""),i.id=t,a.appendChild(i),n.appendChild(a),[i,n]},D=function(e,t){void 0===t&&(t=1);var o=[],r=[];return e.forEach((function(e,t,o){t%2==0&&r.push({x:e,y:o[t+1]})})),p()(r,t).forEach((function(e){o=o.concat([e.x,e.y])})),o},O=function(e){var t=e.split(",");return{beginX:t[0],beginY:t[1],text:t.slice(2).join(",")}},M=function(e,t,o){return parseInt(t)+","+parseInt(o)+","+e},A=function(e,t){t.forEach((function(t){e.addEventListener(t,(function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}))}))},C=function(e){var t=0,o=0;if(e)for(t+=e.offsetTop,o+=e.offsetLeft;e.offsetParent;)t+=e.offsetParent.offsetTop,o+=e.offsetParent.offsetLeft,e=e.offsetParent;return{offsetTop:t,offsetLeft:o}},L=function(e){var t=0,o=0;if(e)for(t+=e.scrollTop,o+=e.scrollLeft;e.parentNode;)t+=e.parentNode.scrollTop||0,o+=e.parentNode.scrollLeft||0,e=e.parentNode;return{scrollTop:t,scrollLeft:o}},k=function(e,t){var o=e.length>1?_.b.Multi:_.b.Single,r=JSON.parse(JSON.stringify(e));return r.forEach((function(e){e.action_type=o,t&&(e.action=t),delete e.selected,delete e.fontSize,delete e.bgColor})),r},V=function(e,t){return t?e?"#"+(e=e.toString(16)).slice(2).padStart(6,"0"):m.a.basicState.color:(e=function(e){if(0===e.indexOf("#"))return e;var t=e.replace(/rgba?/,"").replace(/\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),o=parseFloat(t[3]||"1"),r=Math.floor(o*parseInt(t[0])+255*(1-o)),i=Math.floor(o*parseInt(t[1])+255*(1-o)),n=Math.floor(o*parseInt(t[2])+255*(1-o));return"#"+("0"+r.toString(16)).slice(-2)+("0"+i.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)}(e),parseInt("0xFF"+e.split("#")[1]))},N=function(e){return"number"==typeof e&&!isNaN(e)},H=function(e){for(var t=e.length,o=.1,r=t-4,i=[e[0],e[1]],n=[],a=0;a<t-2;a+=2){var s=a?e[a-2]:e[0],c=a?e[a-1]:e[1],l=e[a+0],u=e[a+1],h=e[a+2],d=e[a+3],p=a!==r?e[a+4]:h,f=a!==r?e[a+5]:d,g=Number(l)+(h-s)/6*o,m=Number(u)+(d-c)/6*o,_=Number(h)-(p-l)/6*o,y=Number(d)-(f-u)/6*o;n.push([g,m,_,y,h,d])}return{moveTo:i,path:n}},B=function(e){var t=e.type,o=e.attributes;return(t==_.f.Pencil||t==_.f.RealTime)&&JSON.parse(o||m.a.basicState.attributes).stroke}},function(e,t,o){"use strict";o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return l}));var r,i=o(5),n=o(0),a=((r={})[n.i.ZegoWhiteboardViewErrorInternal]="内部错误",r[n.i.ZegoWhiteboardViewErrorParamInvalid]="参数错误",r[n.i.ZegoWhiteboardViewErrorNetworkTimeout]="网络超时",r[n.i.ZegoWhiteboardViewErrorNetworkDisconnect]="网络断开",r[n.i.ZegoWhiteboardViewErrorInvalidRsp]="网络回包错误",r[n.i.ZegoWhiteboardViewErrorRequestTooMany]="请求过于频繁",r[n.i.ZegoWhiteboardViewErrorNoLoginRoom]="未登录房间",r[n.i.ZegoWhiteboardViewErrorUserNotExist]="用户不存在",r[n.i.ZegoWhiteboardViewErrorViewNotExist]="白板view不存在",r[n.i.ZegoWhiteboardViewErrorViewCreateFail]="创建白板view失败",r[n.i.ZegoWhiteboardViewErrorViewModifyFail]="修改白板view失败",r[n.i.ZegoWhiteboardViewErrorViewNameLimit]="白板view名称或者content过长",r[n.i.ZegoWhiteboardViewErrorViewParentNotExist]="白板view的parent不存在",r[n.i.ZegoWhiteboardViewErrorViewNumLimit]="超过白板最大数量限制",r[n.i.ZegoWhiteboardViewErrorGraphicNotExist]="图元不存在",r[n.i.ZegoWhiteboardViewErrorGraphicCreateFail]="创建图元错误",r[n.i.ZegoWhiteboardViewErrorGraphicModifyFail]="修改图元错误",r[n.i.ZegoWhiteboardViewErrorGraphicUnableDraw]="未开启绘制",r[n.i.ZegoWhiteboardViewErrorGraphicDataLimit]="图元数据大小超过限制",r[n.i.ZegoWhiteboardViewErrorGraphicNumLimit]="超过图元最大数量限制",r[n.i.ZegoWhiteboardViewErrorGraphicTextLimit]="文本字数超过上限",r[n.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit]="图片图元大小超限制",r[n.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport]="不支持的图片类型",r[n.i.ZegoWhiteboardViewErrorGraphicIllegalUrl]="无效图片地址",r[n.i.ZegoWhiteboardViewErrorInitFail]="初始化失败",r[n.i.ZegoWhiteboardViewErrorGetListFail]="拉取白板view列表失败",r[n.i.ZegoWhiteboardViewErrorCreateFail]="创建白板view失败",r[n.i.ZegoWhiteboardViewErrorDestroyFail]="销毁白板view失败",r[n.i.ZegoWhiteboardViewErrorAttachFail]="attach白板view失败",r[n.i.ZegoWhiteboardViewErrorClearFail]="清空白板view失败",r[n.i.ZegoWhiteboardViewErrorScrollFail]="滚动白板view失败",r[n.i.ZegoWhiteboardViewErrorUndoFail]="撤销操作失败",r[n.i.ZegoWhiteboardViewErrorRedoFail]="重做操作失败",r[n.i.ZegoWhiteboardViewErrorLogFolderNotAccess]="日志目录无法创建或写入",r[n.i.ZegoWhiteboardViewErrorCacheFolderNotAccess]="缓目录径无法创建或写入",r[n.i.ZegoWhiteboardViewErrorNoAuthScale]="无白板缩放权限",r[n.i.ZegoWhiteboardViewErrorNoAuthScroll]="无白板滚动权限",r[n.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic]="无图元创建权限",r[n.i.ZegoWhiteboardViewErrorNoAuthUpdateGraphic]="无图元编辑权限",r[n.i.ZegoWhiteboardViewErrorNoAuthMoveGraphic]="无图元移动权限",r[n.i.ZegoWhiteboardViewErrorNoAuthDeleteGraphic]="无图元删除权限",r[n.i.ZegoWhiteboardViewErrorNoAuthClearGraphic]="无白板清空权限",r),s={1003:n.i.ZegoWhiteboardViewErrorNoLoginRoom,1014:n.i.ZegoWhiteboardViewErrorUserNotExist,1101:n.i.ZegoWhiteboardViewErrorViewNotExist,1102:n.i.ZegoWhiteboardViewErrorViewCreateFail,1104:n.i.ZegoWhiteboardViewErrorViewModifyFail,1114:n.i.ZegoWhiteboardViewErrorViewNumLimit,1201:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,1202:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,1212:n.i.ZegoWhiteboardViewErrorGraphicCreateFail,1217:n.i.ZegoWhiteboardViewErrorGraphicDataLimit,1219:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,1222:n.i.ZegoWhiteboardViewErrorGraphicDataLimit,1223:n.i.ZegoWhiteboardViewErrorGraphicNumLimit,60003001:n.i.ZegoWhiteboardViewErrorInvalidRsp,10001e3:n.i.ZegoWhiteboardViewErrorInternal,10001001:n.i.ZegoWhiteboardViewErrorParamInvalid,110000001:n.i.ZegoWhiteboardViewErrorGraphicIllegalUrl,110000003:n.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport,110000004:n.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit,110000005:n.i.ZegoWhiteboardViewErrorGraphicIllegalUrl,110000007:n.i.ZegoWhiteboardViewErrorLogFolderNotAccess,110000008:n.i.ZegoWhiteboardViewErrorCacheFolderNotAccess,110000009:n.i.ZegoWhiteboardViewErrorViewNameLimit,111001001:n.i.ZegoWhiteboardViewErrorNetworkDisconnect,111001002:n.i.ZegoWhiteboardViewErrorNetworkTimeout,111101001:n.i.ZegoWhiteboardViewErrorRequestTooMany,112001003:n.i.ZegoWhiteboardViewErrorNoLoginRoom,112001014:n.i.ZegoWhiteboardViewErrorUserNotExist,112001101:n.i.ZegoWhiteboardViewErrorViewNotExist,112001102:n.i.ZegoWhiteboardViewErrorViewCreateFail,112001104:n.i.ZegoWhiteboardViewErrorViewModifyFail,112001114:n.i.ZegoWhiteboardViewErrorViewNumLimit,112001201:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,112001202:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,112001212:n.i.ZegoWhiteboardViewErrorGraphicCreateFail,112001217:n.i.ZegoWhiteboardViewErrorGraphicDataLimit,112001219:n.i.ZegoWhiteboardViewErrorGraphicModifyFail,112001222:n.i.ZegoWhiteboardViewErrorGraphicDataLimit,112001223:n.i.ZegoWhiteboardViewErrorGraphicNumLimit},c=function(e,t,o){return{code:e=s[e]||e,msg:t=a[e]&&o&&t?t:a[e]||t||a[n.i.ZegoWhiteboardViewErrorInternal]}},l=function(e,t,o){var r=c(e,t,o);return i.e.emit(i.b.Error,r),r}},function(e,t,o){var r=o(9),i=o(51).f,n=o(22),a=o(25),s=o(95),c=o(148),l=o(108);e.exports=function(e,t){var o,u,h,d,p,f=e.target,g=e.global,m=e.stat;if(o=g?r:m?r[f]||s(f,{}):(r[f]||{}).prototype)for(u in t){if(d=t[u],h=e.noTargetGet?(p=i(o,u))&&p.value:o[u],!l(g?u:f+(m?".":"#")+u,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(e.sham||h&&h.sham)&&n(d,"sham",!0),a(o,u,d,e)}}},function(e,t,o){(function(t){var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,o(115))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,o){"use strict";var r,i=o(158),n=o(18),a=o(9),s=o(15),c=o(16),l=o(71),u=o(22),h=o(25),d=o(19).f,p=o(77),f=o(58),g=o(12),m=o(66),_=a.Int8Array,y=_&&_.prototype,v=a.Uint8ClampedArray,b=v&&v.prototype,w=_&&p(_),S=y&&p(y),I=Object.prototype,x=I.isPrototypeOf,E=g("toStringTag"),P=m("TYPED_ARRAY_TAG"),T=i&&!!f&&"Opera"!==l(a.opera),D=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},A=function(e){if(!s(e))return!1;var t=l(e);return c(O,t)||c(M,t)};for(r in O)a[r]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(r in O)a[r]&&f(a[r],w);if((!T||!S||S===I)&&(S=w.prototype,T))for(r in O)a[r]&&f(a[r].prototype,S);if(T&&p(b)!==S&&f(b,S),n&&!c(S,E))for(r in D=!0,d(S,E,{get:function(){return s(this)?this[P]:void 0}}),O)a[r]&&u(a[r],P,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:D&&P,aTypedArray:function(e){if(A(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(x.call(w,e))return e}else for(var t in O)if(c(O,r)){var o=a[t];if(o&&(e===o||x.call(o,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,o){if(n){if(o)for(var r in O){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}S[e]&&!o||h(S,e,o?t:T&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,o){var r,i;if(n){if(f){if(o)for(r in O)(i=a[r])&&c(i,e)&&delete i[e];if(w[e]&&!o)return;try{return h(w,e,o?t:T&&_[e]||t)}catch(e){}}for(r in O)!(i=a[r])||i[e]&&!o||h(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=l(e);return"DataView"===t||c(O,t)||c(M,t)},isTypedArray:A,TypedArray:w,TypedArrayPrototype:S}},function(e,t,o){var r=o(9),i=o(97),n=o(16),a=o(66),s=o(100),c=o(151),l=i("wks"),u=r.Symbol,h=c?u:u&&u.withoutSetter||a;e.exports=function(e){return n(l,e)||(s&&n(u,e)?l[e]=u[e]:l[e]=h("Symbol."+e)),l[e]}},function(e,t,o){var r=o(27),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,o){"use strict";o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return i}));var r,i,n=o(1),a=((r={30001:"请求过于频繁",60011:"token无效",60012:"token已过期",60013:"文档转换请求已处理",60014:"不存在的任务ID"})[n.b.ZegoDocsViewSuccess]="执行成功",r[n.b.ZegoDocsViewErrorInternal]="内部错误",r[n.b.ZegoDocsViewErrorParamInvalid]="参数错误",r[n.b.ZegoDocsViewErrorNetworkTimeout]="网络超时",r[n.b.ZegoDocsViewErrorFileNotExist]="找不到对应的本地文件",r[n.b.ZegoDocsViewErrorUploadFailed]="上传失败",r[n.b.ZegoDocsViewErrorUnsupportRenderType]="不支持渲染模式",r[n.b.ZegoDocsViewErrorFileEncrypt]="文件被加密",r[n.b.ZegoDocsViewErrorFileSizeLimit]="文件内容过大",r[n.b.ZegoDocsViewErrorFileSheetLimit]="文件页数过多",r[n.b.ZegoDocsViewErrorConvertFail]="格式转换失败",r[n.b.ZegoDocsViewErrorConvertCancel]="格式转换被取消",r[n.b.ZegoDocsViewErrorFileContentEmpty]="文件内容为空",r[n.b.ZegoDocsViewErrorFileReadOnly]="文件为只读模式",r[n.b.ZegoDocsViewErrorConvertElementNotSupported]="源文件中存在不支持转码的元素",r[n.b.ZegoDocsViewErrorConvertFileTypeInvalid]="文件后缀名不匹配",r[n.b.ZegoDocsViewErrorAuthParamInvalid]="认证参数错误",r[n.b.ZegoDocsViewErrorFilePathNotAccess]="路径权限不足",r[n.b.ZegoDocsViewErrorInitFailed]="初始化失败",r[n.b.ZegoDocsViewErrorSizeInvalid]="无法获取当前 view 宽高",r[n.b.ZegoDocsViewErrorFreeSpaceLimit]="本地空间不足",r[n.b.ZegoDocsViewErrorUploadNotSupported]="不支持文件上传功能",r[n.b.ZegoDocsViewErrorUploadDuplicated]="正在上传相同文件",r[n.b.ZegoDocsViewErrorEmptyDomain]="空域名",r[n.b.ZegoDocsViewErrorHaveInit]="已初始化",r[n.b.ZegoDocsViewErrorServerFileNotExist]="找不到对应的转码后文件",r[n.b.ZegoDocsViewErrorCacheNotSupported]="当前 AppID 不支持动态 PPT 预加载",r[n.b.ZegoDocsViewErrorCacheFailed]="预加载失败",r[n.b.ZegoDocsViewErrorZipFileInvalid]="无效的 ZIP 文件",r[n.b.ZegoDocsViewErrorH5FileInvalid]="无效的 H5 文件，不符合 ZEGO 定义的 H5 文件规范",r),s={4:n.b.ZegoDocsViewErrorParamInvalid,32:n.b.ZegoDocsViewErrorConvertFail,64:n.b.ZegoDocsViewErrorConvertCancel,128:n.b.ZegoDocsViewErrorFileEncrypt,256:n.b.ZegoDocsViewErrorFileSizeLimit,512:n.b.ZegoDocsViewErrorFileSheetLimit,1024:n.b.ZegoDocsViewErrorFileContentEmpty,8192:n.b.ZegoDocsViewErrorFileReadOnly,32768:n.b.ZegoDocsViewErrorConvertElementNotSupported,32769:n.b.ZegoDocsViewErrorConvertFileTypeInvalid,60002:n.b.ZegoDocsViewErrorFileNotExist,60011:n.b.ZegoDocsViewErrorAuthParamInvalid,60013:n.b.ZegoDocsViewErrorConvertCancel,60015:n.b.ZegoDocsViewErrorUnsupportRenderType,60016:n.b.ZegoDocsViewErrorFileSizeLimit,60018:n.b.ZegoDocsViewErrorServerFileNotExist,60021:n.b.ZegoDocsViewErrorUnsupportRenderType,60036:n.b.ZegoDocsViewErrorZipFileInvalid,60037:n.b.ZegoDocsViewErrorFileEncrypt,60038:n.b.ZegoDocsViewErrorH5FileInvalid,"-102":n.b.ZegoDocsViewErrorNetworkTimeout,"-105":n.b.ZegoDocsViewErrorFileNotExist,"-108":n.b.ZegoDocsViewErrorUnsupportRenderType,"-109":n.b.ZegoDocsViewErrorUploadFailed,"-110":n.b.ZegoDocsViewErrorFilePathNotAccess,"-114":n.b.ZegoDocsViewErrorCacheFailed,"-115":n.b.ZegoDocsViewErrorFreeSpaceLimit,"-116":n.b.ZegoDocsViewErrorInitFailed,"-117":n.b.ZegoDocsViewErrorFileSizeLimit,"-118":n.b.ZegoDocsViewErrorUploadNotSupported,"-119":n.b.ZegoDocsViewErrorUploadDuplicated,"-120":n.b.ZegoDocsViewErrorUnsupportRenderType,"-121":n.b.ZegoDocsViewErrorEmptyDomain,"-123":n.b.ZegoDocsViewErrorFileContentEmpty,"-124":n.b.ZegoDocsViewErrorFilePathNotAccess,"-125":n.b.ZegoDocsViewErrorCacheNotSupported,"-126":n.b.ZegoDocsViewErrorFileEncrypt,"-127":n.b.ZegoDocsViewErrorZipFileInvalid,"-128":n.b.ZegoDocsViewErrorFileEncrypt,"-129":n.b.ZegoDocsViewErrorH5FileInvalid,"-130":n.b.ZegoDocsViewErrorConvertElementNotSupported,"-131":n.b.ZegoDocsViewErrorConvertFileTypeInvalid,"-132":n.b.ZegoDocsViewErrorConvertFileTypeInvalid,"-999998":n.b.ZegoDocsViewErrorSizeInvalid,"-999999":n.b.ZegoDocsViewErrorParamInvalid},c=function(e,t){return{code:e=s[e]||e,message:t=a[e]||t||a[n.b.ZegoDocsViewErrorInternal]}};!function(e){e[e.ZegoWhiteboardViewErrorNoAuthScroll=3050002]="ZegoWhiteboardViewErrorNoAuthScroll"}(i||(i={}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var o={}.hasOwnProperty;e.exports=function(e,t){return o.call(e,t)}},function(e,t,o){var r=o(15);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,o){var r=o(10);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,o){var r=o(18),i=o(147),n=o(17),a=o(55),s=Object.defineProperty;t.f=r?s:function(e,t,o){if(n(e),t=a(t,!0),n(o),i)try{return s(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},function(e,t,o){var r=o(62),i=o(61),n=o(23),a=o(13),s=o(116),c=[].push,l=function(e){var t=1==e,o=2==e,l=3==e,u=4==e,h=6==e,d=7==e,p=5==e||h;return function(f,g,m,_){for(var y,v,b=n(f),w=i(b),S=r(g,m,3),I=a(w.length),x=0,E=_||s,P=t?E(f,I):o||d?E(f,0):void 0;I>x;x++)if((p||x in w)&&(v=S(y=w[x],x,b),e))if(t)P[x]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return x;case 2:c.call(P,y)}else switch(e){case 4:return!1;case 7:c.call(P,y)}return h?-1:l||u?u:P}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(e,t,o){"use strict";e.exports=o(301)},function(e,t,o){var r=o(18),i=o(19),n=o(43);e.exports=r?function(e,t,o){return i.f(e,t,n(1,o))}:function(e,t,o){return e[t]=o,e}},function(e,t,o){var r=o(29);e.exports=function(e){return Object(r(e))}},function(e,t,o){"use strict";var r,i;o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),function(e){e.Docs="zegoeventdocs",e.Whiteboard="zegoeventwb"}(r||(r={})),function(e){e.WbInit="wbinit",e.WbDragTool="wbdragtool",e.WbScale="wbscale",e.WbDestroy="wbdestroy",e.WbError="wberror",e.Snapshot="snapshot",e.Page="page",e.Step="step",e.SyncDrag="syncDrag",e.Animation="targetclick",e.H5Snapshot="getH5SnapshotResult",e.DocsAspect="getAspectCache",e.ReloadView="reloadview"}(i||(i={}))},function(e,t,o){var r=o(9),i=o(22),n=o(16),a=o(95),s=o(103),c=o(36),l=c.get,u=c.enforce,h=String(String).split("String");(e.exports=function(e,t,o,s){var c,l=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof o&&("string"!=typeof t||n(o,"name")||i(o,"name",t),(c=u(o)).source||(c.source=h.join("string"==typeof t?t:""))),e!==r?(l?!p&&e[t]&&(d=!0):delete e[t],d?e[t]=o:i(e,t,o)):d?e[t]=o:a(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(e,t,o){"use strict";var r=o(186),i=Object.prototype.toString;function n(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function o(o,r){"object"==typeof t[r]&&"object"==typeof o?t[r]=e(t[r],o):t[r]=o}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],o);return t},deepMerge:function e(){var t={};function o(o,r){"object"==typeof t[r]&&"object"==typeof o?t[r]=e(t[r],o):t[r]="object"==typeof o?e({},o):o}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],o);return t},extend:function(e,t,o){return l(t,(function(t,i){e[i]=o&&"function"==typeof t?r(t,o):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var o=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:o)(e)}},function(e,t,o){var r=o(61),i=o(29);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,o){var r=o(18),i=o(10),n=o(16),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(n(s,e))return s[e];t||(t={});var o=[][e],l=!!n(t,"ACCESSORS")&&t.ACCESSORS,u=n(t,0)?t[0]:c,h=n(t,1)?t[1]:void 0;return s[e]=!!o&&!i((function(){if(l&&!r)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:c}):e[1]=1,o.call(e,u,h)}))}},function(e,t,o){"use strict";var r=o(28),i=o(90),n=o(63),a=o(36),s=o(155),c=a.set,l=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,o=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:r,done:!1}:"values"==o?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},function(e,t,o){var r=o(101),i=o(25),n=o(212);r||i(Object.prototype,"toString",n,{unsafe:!0})},function(e,t,o){var r;e.exports=(r=r||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),r={},i=r.lib={},n=i.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,o=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var n=0;n<i;n++){var a=o[n>>>2]>>>24-n%4*8&255;t[r+n>>>2]|=a<<24-(r+n)%4*8}else for(n=0;n<i;n+=4)t[r+n>>>2]=o[n>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,r=[],i=function(t){t=t;var o=987654321,r=4294967295;return function(){var i=((o=36969*(65535&o)+(o>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},n=0;n<t;n+=4){var s=i(4294967296*(o||e.random()));o=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],i=0;i<o;i++){var n=t[i>>>2]>>>24-i%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r+=2)o[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(o,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],i=0;i<o;i++){var n=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r++)o[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(o,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,r=o.words,i=o.sigBytes,n=this.blockSize,s=i/(4*n),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*n,l=e.min(4*c,i);if(c){for(var u=0;u<c;u+=n)this._doProcessBlock(r,u);var h=r.splice(0,c);o.sigBytes-=l}return new a.init(h,l)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new d.HMAC.init(e,o).finalize(t)}}}),r.algo={});return r}(Math),r)},function(e,t,o){"use strict";o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return u})),o.d(t,"f",(function(){return h})),o.d(t,"g",(function(){return d})),o.d(t,"a",(function(){return p})),o.d(t,"h",(function(){return f})),o.d(t,"o",(function(){return g})),o.d(t,"j",(function(){return m})),o.d(t,"k",(function(){return _})),o.d(t,"n",(function(){return y})),o.d(t,"l",(function(){return v})),o.d(t,"m",(function(){return b})),o.d(t,"i",(function(){return w}));o(49),o(177),o(50),o(260);var r=o(3),i=o(7),n=o(0),a=function(e){return/^#[0-9a-fA-F]{6}|rgba?\(*.+\d\)$/.test(e)};function s(){return r.a.basicState.type||null}function c(){return r.a.basicState.color}function l(){return r.a.basicState.size}function u(){return r.a.basicState.fontSize}function h(){return JSON.parse(r.a.basicState.attributes).bold}function d(){return JSON.parse(r.a.basicState.attributes).italic}function p(){return r.a.basicState.bgColor}function f(){return JSON.parse(r.a.basicState.attributes).stroke}function g(e){return!e||Object.keys(n.j).includes(String(e))?(r.a.basicState.type=e||0,!0):(Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid),!1)}function m(e){return a(e)?(r.a.basicState.color=e,!0):(Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误：color仅支持16进制、rgba",!0),!1)}function _(e){return/^([1-9]|[1-9]\d|100)$/.test(""+(t=e))&&"number"==typeof t?(r.a.basicState.size=e,!0):(Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误: 画笔粗细为100内的正整数",!0),!1);var t}function y(e){return/^([1-9]|[1-9]\d|100)$/.test(""+(t=e))&&"number"==typeof t?(r.a.basicState.fontSize=e,!0):(Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误: 文本大小为100内的正整数",!0),!1);var t}function v(e){if("boolean"!=typeof e)return Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid),!1;var t=r.a.basicState.attributes,o=JSON.parse(t);return o.bold=e,r.a.basicState.attributes=JSON.stringify(o),!0}function b(e){if("boolean"!=typeof e)return Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid),!1;var t=r.a.basicState.attributes,o=JSON.parse(t);return o.italic=e,r.a.basicState.attributes=JSON.stringify(o),!0}function w(e){return a(e)?(r.a.basicState.bgColor=e,!0):(Object(i.a)(n.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误: color仅支持16进制、rgba",!0),!1)}},function(e,t,o){var r=o(8),i=o(172);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,o){var r,i,n,a=o(205),s=o(9),c=o(15),l=o(22),u=o(16),h=o(96),d=o(75),p=o(67),f=s.WeakMap;if(a){var g=h.state||(h.state=new f),m=g.get,_=g.has,y=g.set;r=function(e,t){return t.facade=e,y.call(g,e,t),t},i=function(e){return m.call(g,e)||{}},n=function(e){return _.call(g,e)}}else{var v=d("state");p[v]=!0,r=function(e,t){return t.facade=e,l(e,v,t),t},i=function(e){return u(e,v)?e[v]:{}},n=function(e){return u(e,v)}}e.exports={set:r,get:i,has:n,enforce:function(e){return n(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var o;if(!c(t)||(o=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return o}}}},function(e,t,o){"use strict";var r=o(8),i=o(79);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,o){"use strict";var r=o(8),i=o(154);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,o){var r=o(9),i=o(163),n=o(154),a=o(22);for(var s in i){var c=r[s],l=c&&c.prototype;if(l&&l.forEach!==n)try{a(l,"forEach",n)}catch(e){l.forEach=n}}},function(e,t,o){"use strict";var r,i,n,a,s=o(8),c=o(52),l=o(9),u=o(46),h=o(230),d=o(25),p=o(110),f=o(53),g=o(167),m=o(15),_=o(47),y=o(78),v=o(103),b=o(231),w=o(112),S=o(42),I=o(183).set,x=o(232),E=o(234),P=o(235),T=o(185),D=o(236),O=o(36),M=o(108),A=o(12),C=o(113),L=o(109),k=A("species"),V="Promise",N=O.get,H=O.set,B=O.getterFor(V),j=h,z=l.TypeError,q=l.document,R=l.process,F=u("fetch"),W=T.f,Z=W,G=!!(q&&q.createEvent&&l.dispatchEvent),U="function"==typeof PromiseRejectionEvent,J=M(V,(function(){if(!(v(j)!==String(j))){if(66===L)return!0;if(!C&&!U)return!0}if(c&&!j.prototype.finally)return!0;if(L>=51&&/native code/.test(j))return!1;var e=j.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[k]=t,!(e.then((function(){}))instanceof t)})),X=J||!w((function(e){j.all(e).catch((function(){}))})),Y=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},Q=function(e,t){if(!e.notified){e.notified=!0;var o=e.reactions;x((function(){for(var r=e.value,i=1==e.state,n=0;o.length>n;){var a,s,c,l=o[n++],u=i?l.ok:l.fail,h=l.resolve,d=l.reject,p=l.domain;try{u?(i||(2===e.rejection&&te(e),e.rejection=1),!0===u?a=r:(p&&p.enter(),a=u(r),p&&(p.exit(),c=!0)),a===l.promise?d(z("Promise-chain cycle")):(s=Y(a))?s.call(a,h,d):h(a)):d(r)}catch(e){p&&!c&&p.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&$(e)}))}},K=function(e,t,o){var r,i;G?((r=q.createEvent("Event")).promise=t,r.reason=o,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:o},!U&&(i=l["on"+e])?i(r):"unhandledrejection"===e&&P("Unhandled promise rejection",o)},$=function(e){I.call(l,(function(){var t,o=e.facade,r=e.value;if(ee(e)&&(t=D((function(){C?R.emit("unhandledRejection",r,o):K("unhandledrejection",o,r)})),e.rejection=C||ee(e)?2:1,t.error))throw t.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e){I.call(l,(function(){var t=e.facade;C?R.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)}))},oe=function(e,t,o){return function(r){e(t,r,o)}},re=function(e,t,o){e.done||(e.done=!0,o&&(e=o),e.value=t,e.state=2,Q(e,!0))},ie=function(e,t,o){if(!e.done){e.done=!0,o&&(e=o);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=Y(t);r?x((function(){var o={done:!1};try{r.call(t,oe(ie,o,e),oe(re,o,e))}catch(t){re(o,t,e)}})):(e.value=t,e.state=1,Q(e,!1))}catch(t){re({done:!1},t,e)}}};J&&(j=function(e){y(this,j,V),_(e),r.call(this);var t=N(this);try{e(oe(ie,t),oe(re,t))}catch(e){re(t,e)}},(r=function(e){H(this,{type:V,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(j.prototype,{then:function(e,t){var o=B(this),r=W(S(this,j));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=C?R.domain:void 0,o.parent=!0,o.reactions.push(r),0!=o.state&&Q(o,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=N(e);this.promise=e,this.resolve=oe(ie,t),this.reject=oe(re,t)},T.f=W=function(e){return e===j||e===n?new i(e):Z(e)},c||"function"!=typeof h||(a=h.prototype.then,d(h.prototype,"then",(function(e,t){var o=this;return new j((function(e,t){a.call(o,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof F&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(j,F.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:J},{Promise:j}),f(j,V,!1,!0),g(V),n=u(V),s({target:V,stat:!0,forced:J},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),s({target:V,stat:!0,forced:c||J},{resolve:function(e){return E(c&&this===n?j:this,e)}}),s({target:V,stat:!0,forced:X},{all:function(e){var t=this,o=W(t),r=o.resolve,i=o.reject,n=D((function(){var o=_(t.resolve),n=[],a=0,s=1;b(e,(function(e){var c=a++,l=!1;n.push(void 0),s++,o.call(t,e).then((function(e){l||(l=!0,n[c]=e,--s||r(n))}),i)})),--s||r(n)}));return n.error&&i(n.value),o.promise},race:function(e){var t=this,o=W(t),r=o.reject,i=D((function(){var i=_(t.resolve);b(e,(function(e){i.call(t,e).then(o.resolve,r)}))}));return i.error&&r(i.value),o.promise}})},function(e,t){var o={}.toString;e.exports=function(e){return o.call(e).slice(8,-1)}},function(e,t,o){var r=o(17),i=o(47),n=o(12)("species");e.exports=function(e,t){var o,a=r(e).constructor;return void 0===a||null==(o=r(a)[n])?t:i(o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,o){var r=o(27),i=Math.max,n=Math.min;e.exports=function(e,t){var o=r(e);return o<0?i(o+t,0):n(o,t)}},function(e,t,o){"use strict";var r=o(106).charAt,i=o(36),n=o(155),a=i.set,s=i.getterFor("String Iterator");n(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),o=t.string,i=t.index;return i>=o.length?{value:void 0,done:!0}:(e=r(o,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,o){var r=o(149),i=o(9),n=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?n(r[e])||n(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,o){var r=o(25),i=Date.prototype,n=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var e=a.call(this);return e==e?n.call(this):"Invalid Date"}))},function(e,t,o){"use strict";var r=o(8),i=o(68).includes,n=o(90);r({target:"Array",proto:!0,forced:!o(30)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},function(e,t,o){"use strict";var r=o(8),i=o(198),n=o(29);r({target:"String",proto:!0,forced:!o(199)("includes")},{includes:function(e){return!!~String(n(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){var r=o(18),i=o(89),n=o(43),a=o(28),s=o(55),c=o(16),l=o(147),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return n(!i.f.call(e,t),e[t])}},function(e,t){e.exports=!1},function(e,t,o){var r=o(19).f,i=o(16),n=o(12)("toStringTag");e.exports=function(e,t,o){e&&!i(e=o?e:e.prototype,n)&&r(e,n,{configurable:!0,value:t})}},function(e,t,o){var r,i=o(17),n=o(170),a=o(98),s=o(67),c=o(164),l=o(102),u=o(75),h=u("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var o=a.length;o--;)delete f.prototype[a[o]];return f()};s[h]=!0,e.exports=Object.create||function(e,t){var o;return null!==e?(d.prototype=i(e),o=new d,d.prototype=null,o[h]=e):o=f(),void 0===t?o:n(o,t)}},function(e,t,o){var r=o(15);e.exports=function(e,t){if(!r(e))return e;var o,i;if(t&&"function"==typeof(o=e.toString)&&!r(i=o.call(e)))return i;if("function"==typeof(o=e.valueOf)&&!r(i=o.call(e)))return i;if(!t&&"function"==typeof(o=e.toString)&&!r(i=o.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,o){var r=o(150),i=o(98).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,o){"use strict";var r=o(10);e.exports=function(e,t){var o=[][e];return!!o&&r((function(){o.call(null,t||function(){throw 1},1)}))}},function(e,t,o){var r=o(17),i=o(209);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(o,[]),t=o instanceof Array}catch(e){}return function(o,n){return r(o),i(n),t?e.call(o,n):o.__proto__=n,o}}():void 0)},function(e,t,o){o(8)({target:"Function",proto:!0},{bind:o(211)})},function(e,t,o){var r=o(9),i=o(163),n=o(31),a=o(22),s=o(12),c=s("iterator"),l=s("toStringTag"),u=n.values;for(var h in i){var d=r[h],p=d&&d.prototype;if(p){if(p[c]!==u)try{a(p,c,u)}catch(e){p[c]=u}if(p[l]||a(p,l,h),i[h])for(var f in n)if(p[f]!==n[f])try{a(p,f,n[f])}catch(e){p[f]=n[f]}}}},function(e,t,o){var r=o(10),i=o(41),n="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?n.call(e,""):Object(e)}:Object},function(e,t,o){var r=o(47);e.exports=function(e,t,o){if(r(e),void 0===t)return e;switch(o){case 0:return function(){return e.call(t)};case 1:return function(o){return e.call(t,o)};case 2:return function(o,r){return e.call(t,o,r)};case 3:return function(o,r,i){return e.call(t,o,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,o){"use strict";var r=o(118),i=o(17),n=o(13),a=o(27),s=o(29),c=o(119),l=o(255),u=o(120),h=Math.max,d=Math.min;r("replace",2,(function(e,t,o,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(o,r){var i=s(this),n=null==o?void 0:o[e];return void 0!==n?n.call(o,i,r):t.call(String(i),o,r)},function(e,r){if(!p&&f||"string"==typeof r&&-1===r.indexOf(g)){var s=o(t,e,this,r);if(s.done)return s.value}var m=i(e),_=String(this),y="function"==typeof r;y||(r=String(r));var v=m.global;if(v){var b=m.unicode;m.lastIndex=0}for(var w=[];;){var S=u(m,_);if(null===S)break;if(w.push(S),!v)break;""===String(S[0])&&(m.lastIndex=c(_,n(m.lastIndex),b))}for(var I,x="",E=0,P=0;P<w.length;P++){S=w[P];for(var T=String(S[0]),D=h(d(a(S.index),_.length),0),O=[],M=1;M<S.length;M++)O.push(void 0===(I=S[M])?I:String(I));var A=S.groups;if(y){var C=[T].concat(O,D,_);void 0!==A&&C.push(A);var L=String(r.apply(void 0,C))}else L=l(T,_,D,O,A,r);D>=E&&(x+=_.slice(E,D)+L,E=D+T.length)}return x+_.slice(E)}]}))},function(e,t,o){"use strict";var r=o(8),i=o(9),n=o(46),a=o(52),s=o(18),c=o(100),l=o(151),u=o(10),h=o(16),d=o(72),p=o(15),f=o(17),g=o(23),m=o(28),_=o(55),y=o(43),v=o(54),b=o(76),w=o(56),S=o(207),I=o(99),x=o(51),E=o(19),P=o(89),T=o(22),D=o(25),O=o(97),M=o(75),A=o(67),C=o(66),L=o(12),k=o(152),V=o(153),N=o(53),H=o(36),B=o(20).forEach,j=M("hidden"),z=L("toPrimitive"),q=H.set,R=H.getterFor("Symbol"),F=Object.prototype,W=i.Symbol,Z=n("JSON","stringify"),G=x.f,U=E.f,J=S.f,X=P.f,Y=O("symbols"),Q=O("op-symbols"),K=O("string-to-symbol-registry"),$=O("symbol-to-string-registry"),ee=O("wks"),te=i.QObject,oe=!te||!te.prototype||!te.prototype.findChild,re=s&&u((function(){return 7!=v(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(e,t,o){var r=G(F,t);r&&delete F[t],U(e,t,o),r&&e!==F&&U(F,t,r)}:U,ie=function(e,t){var o=Y[e]=v(W.prototype);return q(o,{type:"Symbol",tag:e,description:t}),s||(o.description=t),o},ne=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ae=function(e,t,o){e===F&&ae(Q,t,o),f(e);var r=_(t,!0);return f(o),h(Y,r)?(o.enumerable?(h(e,j)&&e[j][r]&&(e[j][r]=!1),o=v(o,{enumerable:y(0,!1)})):(h(e,j)||U(e,j,y(1,{})),e[j][r]=!0),re(e,r,o)):U(e,r,o)},se=function(e,t){f(e);var o=m(t),r=b(o).concat(he(o));return B(r,(function(t){s&&!ce.call(o,t)||ae(e,t,o[t])})),e},ce=function(e){var t=_(e,!0),o=X.call(this,t);return!(this===F&&h(Y,t)&&!h(Q,t))&&(!(o||!h(this,t)||!h(Y,t)||h(this,j)&&this[j][t])||o)},le=function(e,t){var o=m(e),r=_(t,!0);if(o!==F||!h(Y,r)||h(Q,r)){var i=G(o,r);return!i||!h(Y,r)||h(o,j)&&o[j][r]||(i.enumerable=!0),i}},ue=function(e){var t=J(m(e)),o=[];return B(t,(function(e){h(Y,e)||h(A,e)||o.push(e)})),o},he=function(e){var t=e===F,o=J(t?Q:m(e)),r=[];return B(o,(function(e){!h(Y,e)||t&&!h(F,e)||r.push(Y[e])})),r};(c||(D((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=C(e),o=function(e){this===F&&o.call(Q,e),h(this,j)&&h(this[j],t)&&(this[j][t]=!1),re(this,t,y(1,e))};return s&&oe&&re(F,t,{configurable:!0,set:o}),ie(t,e)}).prototype,"toString",(function(){return R(this).tag})),D(W,"withoutSetter",(function(e){return ie(C(e),e)})),P.f=ce,E.f=ae,x.f=le,w.f=S.f=ue,I.f=he,k.f=function(e){return ie(L(e),e)},s&&(U(W.prototype,"description",{configurable:!0,get:function(){return R(this).description}}),a||D(F,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),B(b(ee),(function(e){V(e)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=String(e);if(h(K,t))return K[t];var o=W(t);return K[t]=o,$[o]=t,o},keyFor:function(e){if(!ne(e))throw TypeError(e+" is not a symbol");if(h($,e))return $[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?v(e):se(v(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ue,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:u((function(){I.f(1)}))},{getOwnPropertySymbols:function(e){return I.f(g(e))}}),Z)&&r({target:"JSON",stat:!0,forced:!c||u((function(){var e=W();return"[null]"!=Z([e])||"{}"!=Z({a:e})||"{}"!=Z(Object(e))}))},{stringify:function(e,t,o){for(var r,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(r=t,(p(t)||void 0!==e)&&!ne(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ne(t))return t}),i[1]=t,Z.apply(null,i)}});W.prototype[z]||T(W.prototype,z,W.prototype.valueOf),N(W,"Symbol"),A[j]=!0},function(e,t){var o=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++o+r).toString(36)}},function(e,t){e.exports={}},function(e,t,o){var r=o(28),i=o(13),n=o(44),a=function(e){return function(t,o,a){var s,c=r(t),l=i(c.length),u=n(a,l);if(e&&o!=o){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===o)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,o){"use strict";var r=o(8),i=o(18),n=o(9),a=o(16),s=o(15),c=o(19).f,l=o(148),u=n.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(h[t]=!0),t};l(d,u);var p=d.prototype=u.prototype;p.constructor=d;var f=p.toString,g="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(a(h,e))return"";var o=g?t.slice(7,-1):t.replace(m,"$1");return""===o?void 0:o}}),r({global:!0,forced:!0},{Symbol:d})}},function(e,t,o){o(153)("iterator")},function(e,t,o){var r=o(101),i=o(41),n=o(12)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,o,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?o:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,o){var r=o(41);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,o){"use strict";var r=o(8),i=o(20).map,n=o(84),a=o(30),s=n("map"),c=a("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){"use strict";var r=o(8),i=o(68).indexOf,n=o(57),a=o(30),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),u=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){var r=o(97),i=o(66),n=r("keys");e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,o){var r=o(150),i=o(98);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,o){var r=o(16),i=o(23),n=o(75),a=o(208),s=n("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t){e.exports=function(e,t,o){if(!(e instanceof t))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return e}},function(e,t,o){"use strict";var r,i,n=o(160),a=o(213),s=RegExp.prototype.exec,c=String.prototype.replace,l=s,u=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||h)&&(l=function(e){var t,o,r,i,a=this,l=h&&a.sticky,p=n.call(a),f=a.source,g=0,m=e;return l&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(f="(?: "+f+")",m=" "+m,g++),o=new RegExp("^(?:"+f+")",p)),d&&(o=new RegExp("^"+f+"$(?!\\s)",p)),u&&(t=a.lastIndex),r=s.call(l?o:a,m),l?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:u&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),d&&r&&r.length>1&&c.call(r[0],o,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,o){var r=o(8),i=o(9),n=o(82),a=[].slice,s=function(e){return function(t,o){var r=arguments.length>2,i=r?a.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,o)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(n)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(e,t,o){"use strict";var r=o(8),i=o(15),n=o(72),a=o(44),s=o(13),c=o(28),l=o(104),u=o(12),h=o(84),d=o(30),p=h("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),m=[].slice,_=Math.max;r({target:"Array",proto:!0,forced:!p||!f},{slice:function(e,t){var o,r,u,h=c(this),d=s(h.length),p=a(e,d),f=a(void 0===t?d:t,d);if(n(h)&&("function"!=typeof(o=h.constructor)||o!==Array&&!n(o.prototype)?i(o)&&null===(o=o[g])&&(o=void 0):o=void 0,o===Array||void 0===o))return m.call(h,p,f);for(r=new(void 0===o?Array:o)(_(f-p,0)),u=0;p<f;p++,u++)p in h&&l(r,u,h[p]);return r.length=u,r}})},function(e,t,o){var r=o(46);e.exports=r("navigator","userAgent")||""},function(e,t,o){var r=o(71),i=o(63),n=o(12)("iterator");e.exports=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[r(e)]}},function(e,t,o){var r=o(10),i=o(12),n=o(109),a=i("species");e.exports=function(e){return n>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,o){"use strict";var r=o(118),i=o(166),n=o(17),a=o(29),s=o(42),c=o(119),l=o(13),u=o(120),h=o(79),d=o(10),p=[].push,f=Math.min,g=!d((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,o){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var r=String(a(this)),n=void 0===o?4294967295:o>>>0;if(0===n)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,n);for(var s,c,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,d+"g");(s=h.call(g,r))&&!((c=g.lastIndex)>f&&(u.push(r.slice(f,s.index)),s.length>1&&s.index<r.length&&p.apply(u,s.slice(1)),l=s[0].length,f=c,u.length>=n));)g.lastIndex===s.index&&g.lastIndex++;return f===r.length?!l&&g.test("")||u.push(""):u.push(r.slice(f)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:t.call(this,e,o)}:t,[function(t,o){var i=a(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,i,o):r.call(String(i),t,o)},function(e,i){var a=o(r,e,this,i,r!==t);if(a.done)return a.value;var h=n(e),d=String(this),p=s(h,RegExp),m=h.unicode,_=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(g?"y":"g"),y=new p(g?h:"^(?:"+h.source+")",_),v=void 0===i?4294967295:i>>>0;if(0===v)return[];if(0===d.length)return null===u(y,d)?[d]:[];for(var b=0,w=0,S=[];w<d.length;){y.lastIndex=g?w:0;var I,x=u(y,g?d:d.slice(w));if(null===x||(I=f(l(y.lastIndex+(g?0:w)),d.length))===b)w=c(d,w,m);else{if(S.push(d.slice(b,w)),S.length===v)return S;for(var E=1;E<=x.length-1;E++)if(S.push(x[E]),S.length===v)return S;w=b=I}}return S.push(d.slice(b)),S}]}),!g)},function(e,t,o){var r=o(18),i=o(19).f,n=Function.prototype,a=n.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in n)&&i(n,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,o){"use strict";var r=o(8),i=o(20).filter,n=o(84),a=o(30),s=n("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){"use strict";var r=o(18),i=o(9),n=o(108),a=o(25),s=o(16),c=o(41),l=o(173),u=o(55),h=o(10),d=o(54),p=o(56).f,f=o(51).f,g=o(19).f,m=o(218).trim,_=i.Number,y=_.prototype,v="Number"==c(d(y)),b=function(e){var t,o,r,i,n,a,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=m(l)).charCodeAt(0))||45===t){if(88===(o=l.charCodeAt(2))||120===o)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(n=l.slice(2)).length,s=0;s<a;s++)if((c=n.charCodeAt(s))<48||c>i)return NaN;return parseInt(n,r)}return+l};if(n("Number",!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,S=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof S&&(v?h((function(){y.valueOf.call(o)})):"Number"!=c(o))?l(new _(b(t)),o,S):b(t)},I=r?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;I.length>x;x++)s(_,w=I[x])&&!s(S,w)&&g(S,w,f(_,w));S.prototype=y,y.constructor=S,a(i,"Number",S)}},function(e,t,o){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,o){var r=o(12),i=o(54),n=o(19),a=r("unscopables"),s=Array.prototype;null==s[a]&&n.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,o){"use strict";var r=o(8),i=o(61),n=o(28),a=o(57),s=[].join,c=i!=Object,l=a("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(n(this),void 0===e?",":e)}})},function(e,t,o){"use strict";var r,i,n,a,s,c;o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"d",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"e",(function(){return c})),function(e){e[e.ZegoWhiteboardViewSuccess=0]="ZegoWhiteboardViewSuccess",e[e.ZegoWhiteboardViewErrorInternal=3000001]="ZegoWhiteboardViewErrorInternal",e[e.ZegoWhiteboardViewErrorParamInvalid=3000002]="ZegoWhiteboardViewErrorParamInvalid",e[e.ZegoWhiteboardViewErrorNetworkTimeout=3000003]="ZegoWhiteboardViewErrorNetworkTimeout",e[e.ZegoWhiteboardViewErrorNetworkDisconnect=3000004]="ZegoWhiteboardViewErrorNetworkDisconnect",e[e.ZegoWhiteboardViewErrorInvalidRsp=3000005]="ZegoWhiteboardViewErrorInvalidRsp",e[e.ZegoWhiteboardViewErrorRequestTooMany=3000006]="ZegoWhiteboardViewErrorRequestTooMany",e[e.ZegoWhiteboardViewErrorVersionMismatch=3000007]="ZegoWhiteboardViewErrorVersionMismatch",e[e.ZegoWhiteboardViewErrorNoLoginRoom=3010001]="ZegoWhiteboardViewErrorNoLoginRoom",e[e.ZegoWhiteboardViewErrorUserNotExist=3010002]="ZegoWhiteboardViewErrorUserNotExist",e[e.ZegoWhiteboardViewErrorViewNotExist=3020001]="ZegoWhiteboardViewErrorViewNotExist",e[e.ZegoWhiteboardViewErrorViewCreateFail=3020002]="ZegoWhiteboardViewErrorViewCreateFail",e[e.ZegoWhiteboardViewErrorViewModifyFail=3020003]="ZegoWhiteboardViewErrorViewModifyFail",e[e.ZegoWhiteboardViewErrorViewNameLimit=3020004]="ZegoWhiteboardViewErrorViewNameLimit",e[e.ZegoWhiteboardViewErrorViewParentNotExist=3020005]="ZegoWhiteboardViewErrorViewParentNotExist",e[e.ZegoWhiteboardViewErrorViewNumLimit=3020006]="ZegoWhiteboardViewErrorViewNumLimit",e[e.ZegoWhiteboardViewErrorAnimationInfoLimit=3020007]="ZegoWhiteboardViewErrorAnimationInfoLimit",e[e.ZegoWhiteboardViewErrorGraphicNotExist=3030001]="ZegoWhiteboardViewErrorGraphicNotExist",e[e.ZegoWhiteboardViewErrorGraphicCreateFail=3030002]="ZegoWhiteboardViewErrorGraphicCreateFail",e[e.ZegoWhiteboardViewErrorGraphicModifyFail=3030003]="ZegoWhiteboardViewErrorGraphicModifyFail",e[e.ZegoWhiteboardViewErrorGraphicUnableDraw=3030004]="ZegoWhiteboardViewErrorGraphicUnableDraw",e[e.ZegoWhiteboardViewErrorGraphicDataLimit=3030005]="ZegoWhiteboardViewErrorGraphicDataLimit",e[e.ZegoWhiteboardViewErrorGraphicNumLimit=3030006]="ZegoWhiteboardViewErrorGraphicNumLimit",e[e.ZegoWhiteboardViewErrorGraphicTextLimit=3030007]="ZegoWhiteboardViewErrorGraphicTextLimit",e[e.ZegoWhiteboardViewErrorGraphicImageSizeLimit=3030008]="ZegoWhiteboardViewErrorGraphicImageSizeLimit",e[e.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport=3030009]="ZegoWhiteboardViewErrorGraphicImageTypeNotSupport",e[e.ZegoWhiteboardViewErrorGraphicIllegalUrl=3030010]="ZegoWhiteboardViewErrorGraphicIllegalUrl",e[e.ZegoWhiteboardViewErrorInitFail=3040001]="ZegoWhiteboardViewErrorInitFail",e[e.ZegoWhiteboardViewErrorGetListFail=3040002]="ZegoWhiteboardViewErrorGetListFail",e[e.ZegoWhiteboardViewErrorCreateFail=3040003]="ZegoWhiteboardViewErrorCreateFail",e[e.ZegoWhiteboardViewErrorDestroyFail=3040004]="ZegoWhiteboardViewErrorDestroyFail",e[e.ZegoWhiteboardViewErrorAttachFail=3040005]="ZegoWhiteboardViewErrorAttachFail",e[e.ZegoWhiteboardViewErrorClearFail=3040006]="ZegoWhiteboardViewErrorClearFail",e[e.ZegoWhiteboardViewErrorScrollFail=3040007]="ZegoWhiteboardViewErrorScrollFail",e[e.ZegoWhiteboardViewErrorUndoFail=3040008]="ZegoWhiteboardViewErrorUndoFail",e[e.ZegoWhiteboardViewErrorRedoFail=3040009]="ZegoWhiteboardViewErrorRedoFail",e[e.ZegoWhiteboardViewErrorLogFolderNotAccess=3040010]="ZegoWhiteboardViewErrorLogFolderNotAccess",e[e.ZegoWhiteboardViewErrorCacheFolderNotAccess=3040011]="ZegoWhiteboardViewErrorCacheFolderNotAccess",e[e.ZegoWhiteboardViewErrorNoAuthScale=3050001]="ZegoWhiteboardViewErrorNoAuthScale",e[e.ZegoWhiteboardViewErrorNoAuthScroll=3050002]="ZegoWhiteboardViewErrorNoAuthScroll",e[e.ZegoWhiteboardViewErrorNoAuthCreateGraphic=3050003]="ZegoWhiteboardViewErrorNoAuthCreateGraphic",e[e.ZegoWhiteboardViewErrorNoAuthUpdateGraphic=3050004]="ZegoWhiteboardViewErrorNoAuthUpdateGraphic",e[e.ZegoWhiteboardViewErrorNoAuthMoveGraphic=3050005]="ZegoWhiteboardViewErrorNoAuthMoveGraphic",e[e.ZegoWhiteboardViewErrorNoAuthDeleteGraphic=3050006]="ZegoWhiteboardViewErrorNoAuthDeleteGraphic",e[e.ZegoWhiteboardViewErrorNoAuthClearGraphic=3050007]="ZegoWhiteboardViewErrorNoAuthClearGraphic"}(r||(r={})),function(e){e[e.ZegoWhiteboardViewToolPen=1]="ZegoWhiteboardViewToolPen",e[e.ZegoWhiteboardViewToolText=2]="ZegoWhiteboardViewToolText",e[e.ZegoWhiteboardViewToolLine=4]="ZegoWhiteboardViewToolLine",e[e.ZegoWhiteboardViewToolRect=8]="ZegoWhiteboardViewToolRect",e[e.ZegoWhiteboardViewToolEllipse=16]="ZegoWhiteboardViewToolEllipse",e[e.ZegoWhiteboardViewToolSelector=32]="ZegoWhiteboardViewToolSelector",e[e.ZegoWhiteboardViewToolEraser=64]="ZegoWhiteboardViewToolEraser",e[e.ZegoWhiteboardViewToolLaser=128]="ZegoWhiteboardViewToolLaser",e[e.ZegoWhiteboardViewToolClick=256]="ZegoWhiteboardViewToolClick",e[e.ZegoWhitebaordViewToolCustomImage=512]="ZegoWhitebaordViewToolCustomImage"}(i||(i={})),function(e){e[e.ZegoWhiteboardOperationModeNone=1]="ZegoWhiteboardOperationModeNone",e[e.ZegoWhiteboardOperationModeScroll=2]="ZegoWhiteboardOperationModeScroll",e[e.ZegoWhiteboardOperationModeDraw=4]="ZegoWhiteboardOperationModeDraw",e[e.ZegoWhiteboardOperationModeZoom=8]="ZegoWhiteboardOperationModeZoom"}(n||(n={})),function(e){e[e.ZegoWhiteboardViewImageGraphic=0]="ZegoWhiteboardViewImageGraphic",e[e.ZegoWhiteboardViewImageCustom=1]="ZegoWhiteboardViewImageCustom"}(a||(a={})),function(e){e[e.ZegoWhiteboardViewImageFitModeLeft=0]="ZegoWhiteboardViewImageFitModeLeft",e[e.ZegoWhiteboardViewImageFitModeRight=1]="ZegoWhiteboardViewImageFitModeRight",e[e.ZegoWhiteboardViewImageFitModeBottom=2]="ZegoWhiteboardViewImageFitModeBottom",e[e.ZegoWhiteboardViewImageFitModeTop=3]="ZegoWhiteboardViewImageFitModeTop",e[e.ZegoWhiteboardViewImageFitModeCenter=4]="ZegoWhiteboardViewImageFitModeCenter"}(s||(s={})),function(e){e[e.Center=0]="Center",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(c||(c={}))},function(e,t,o){"use strict";var r=o(8),i=o(44),n=o(27),a=o(13),s=o(23),c=o(116),l=o(104),u=o(84),h=o(30),d=u("splice"),p=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var o,r,u,h,d,p,m=s(this),_=a(m.length),y=i(e,_),v=arguments.length;if(0===v?o=r=0:1===v?(o=0,r=_-y):(o=v-2,r=g(f(n(t),0),_-y)),_+o-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=c(m,r),h=0;h<r;h++)(d=y+h)in m&&l(u,h,m[d]);if(u.length=r,o<r){for(h=y;h<_-r;h++)p=h+o,(d=h+r)in m?m[p]=m[d]:delete m[p];for(h=_;h>_-r+o;h--)delete m[h-1]}else if(o>r)for(h=_-r;h>y;h--)p=h+o-1,(d=h+r-1)in m?m[p]=m[d]:delete m[p];for(h=0;h<o;h++)m[h+y]=arguments[h+2];return m.length=_-r+o,u}})},function(e,t,o){var r,i,n;e.exports=(n=o(33),i=(r=n).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,r=this._map;e.clamp();for(var i=[],n=0;n<o;n+=3)for(var a=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,s=0;s<4&&n+.75*s<o;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var n=0;n<o.length;n++)r[o.charCodeAt(n)]=n}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,o){for(var r=[],n=0,a=0;a<t;a++)if(a%4){var s=o[e.charCodeAt(a-1)]<<a%4*2,c=o[e.charCodeAt(a)]>>>6-a%4*2;r[n>>>2]|=(s|c)<<24-n%4*8,n++}return i.create(r,n)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},function(e,t,o){var r=o(9),i=o(22);e.exports=function(e,t){try{i(r,e,t)}catch(o){r[e]=t}return t}},function(e,t,o){var r=o(9),i=o(95),n=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=n},function(e,t,o){var r=o(52),i=o(96);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,o){var r=o(10);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,o){var r={};r[o(12)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,o){var r=o(9),i=o(15),n=r.document,a=i(n)&&i(n.createElement);e.exports=function(e){return a?n.createElement(e):{}}},function(e,t,o){var r=o(96),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,o){"use strict";var r=o(55),i=o(19),n=o(43);e.exports=function(e,t,o){var a=r(t);a in e?i.f(e,a,n(0,o)):e[a]=o}},function(e,t,o){"use strict";o.d(t,"b",(function(){return d})),o.d(t,"a",(function(){return p}));o(81),o(256),o(48),o(32),o(40);var r=o(194),i=o.n(r),n=o(94),a=o.n(n),s=o(195),c=o.n(s),l=o(196),u=o.n(l),h=function(e,t){return a.a.stringify(c()(t,e))},d=function(e){var t=e.access_key_id,o=e.access_key_secret,r=e.bucket_name,n=e.security_token,a=e.endpoint,s=e.object_name,c=e.timeout,l=void 0===c?1:c,u=e.maxSize,d=function(e,t){var o=new Date;o.setHours(o.getHours()+e);var r={expiration:o.toISOString(),conditions:[["content-length-range",0,1024*t*1024]]};return i.a.Base64.encode(JSON.stringify(r))}(l,void 0===u?150:u);return{url:"https://"+r+"."+a,signature:h(o,d),securityToken:n,policy:d,key:s,OSSAccessKeyId:t,successActionStatus:"200",objectName:s}},p=function(e){return new Promise((function(t,o){try{var r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=Math.ceil(e.size/1048576),n=new u.a.ArrayBuffer,a=0,s=new FileReader;s.onload=function(){var e=s.result||s.content;e?(n.append(e),++a<i?c():t(n.end())):o({code:2020006,message:"文件内容为空"})},s.onerror=function(){o({code:2010001,message:"找不到对应的本地文件"})};var c=function(){var t=1048576*a,o=t+1048576>=e.size?e.size:t+1048576,i=r.call(e,t,o);s.readAsArrayBuffer(i)};c()}catch(e){o(e)}}))}},function(e,t,o){var r=o(27),i=o(29),n=function(e){return function(t,o){var n,a,s=String(i(t)),c=r(o),l=s.length;return c<0||c>=l?e?"":void 0:(n=s.charCodeAt(c))<55296||n>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):n:e?s.slice(c,c+2):a-56320+(n-55296<<10)+65536}};e.exports={codeAt:n(!1),charAt:n(!0)}},function(e,t,o){var r=o(12),i=o(63),n=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[n]===e)}},function(e,t,o){var r=o(10),i=/#|\.prototype\./,n=function(e,t){var o=s[a(e)];return o==l||o!=c&&("function"==typeof t?r(t):!!t)},a=n.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=n.data={},c=n.NATIVE="N",l=n.POLYFILL="P";e.exports=n},function(e,t,o){var r,i,n=o(9),a=o(82),s=n.process,c=s&&s.versions,l=c&&c.v8;l?i=(r=l.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,o){var r=o(25);e.exports=function(e,t,o){for(var i in t)r(e,i,t[i],o);return e}},function(e,t,o){"use strict";var r=o(23),i=o(44),n=o(13);e.exports=function(e){for(var t=r(this),o=n(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,l=void 0===c?o:i(c,o);l>s;)t[s++]=e;return t}},function(e,t,o){var r=o(12)("iterator"),i=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var o=!1;try{var n={};n[r]=function(){return{next:function(){return{done:o=!0}}}},e(n)}catch(e){}return o}},function(e,t,o){var r=o(41),i=o(9);e.exports="process"==r(i.process)},function(e,t,o){"use strict";var r=o(8),i=o(20).findIndex,n=o(90),a=o(30),s=!0,c=a("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("findIndex")},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){var r=o(15),i=o(72),n=o(12)("species");e.exports=function(e,t){var o;return i(e)&&("function"!=typeof(o=e.constructor)||o!==Array&&!i(o.prototype)?r(o)&&null===(o=o[n])&&(o=void 0):o=void 0),new(void 0===o?Array:o)(0===t?0:t)}},function(e,t,o){"use strict";var r=o(8),i=o(10),n=o(157),a=o(17),s=o(44),c=o(13),l=o(42),u=n.ArrayBuffer,h=n.DataView,d=u.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(a(this),e);for(var o=a(this).byteLength,r=s(e,o),i=s(void 0===t?o:t,o),n=new(l(this,u))(c(i-r)),p=new h(this),f=new h(n),g=0;r<i;)f.setUint8(g++,p.getUint8(r++));return n}})},function(e,t,o){"use strict";o(37);var r=o(25),i=o(10),n=o(12),a=o(79),s=o(22),c=n("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),h=n("replace"),d=!!/./[h]&&""===/./[h]("a","$0"),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2!==o.length||"a"!==o[0]||"b"!==o[1]}));e.exports=function(e,t,o,h){var f=n(e),g=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=g&&!i((function(){var t=!1,o=/a/;return"split"===e&&((o={}).constructor={},o.constructor[c]=function(){return o},o.flags="",o[f]=/./[f]),o.exec=function(){return t=!0,null},o[f](""),!t}));if(!g||!m||"replace"===e&&(!l||!u||d)||"split"===e&&!p){var _=/./[f],y=o(f,""[e],(function(e,t,o,r,i){return t.exec===a?g&&!i?{done:!0,value:_.call(t,o,r)}:{done:!0,value:e.call(o,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=y[0],b=y[1];r(String.prototype,e,v),r(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}h&&s(RegExp.prototype[f],"sham",!0)}},function(e,t,o){"use strict";var r=o(106).charAt;e.exports=function(e,t,o){return t+(o?r(e,t).length:1)}},function(e,t,o){var r=o(41),i=o(79);e.exports=function(e,t){var o=e.exec;if("function"==typeof o){var n=o.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,o){o(178)("Uint8",(function(e){return function(t,o,r){return e(this,t,o,r)}}))},function(e,t,o){"use strict";var r=o(11),i=o(215),n=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(n(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(20).every,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(111),n=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(n(this),arguments)}))},function(e,t,o){"use strict";var r=o(11),i=o(20).filter,n=o(42),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),o=n(this,this.constructor),r=0,c=t.length,l=new(s(o))(c);c>r;)l[r]=t[r++];return l}))},function(e,t,o){"use strict";var r=o(11),i=o(20).find,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(20).findIndex,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(20).forEach,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(68).includes,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=o(68).indexOf,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(9),i=o(11),n=o(31),a=o(12)("iterator"),s=r.Uint8Array,c=n.values,l=n.keys,u=n.entries,h=i.aTypedArray,d=i.exportTypedArrayMethod,p=s&&s.prototype[a],f=!!p&&("values"==p.name||null==p.name),g=function(){return c.call(h(this))};d("entries",(function(){return u.call(h(this))})),d("keys",(function(){return l.call(h(this))})),d("values",g,!f),d(a,g,!f)},function(e,t,o){"use strict";var r=o(11),i=r.aTypedArray,n=r.exportTypedArrayMethod,a=[].join;n("join",(function(e){return a.apply(i(this),arguments)}))},function(e,t,o){"use strict";var r=o(11),i=o(181),n=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(n(this),arguments)}))},function(e,t,o){"use strict";var r=o(11),i=o(20).map,n=o(42),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(n(e,e.constructor)))(t)}))}))},function(e,t,o){"use strict";var r=o(11),i=o(136).left,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(n(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){var r=o(47),i=o(23),n=o(61),a=o(13),s=function(e){return function(t,o,s,c){r(o);var l=i(t),u=n(l),h=a(l.length),d=e?h-1:0,p=e?-1:1;if(s<2)for(;;){if(d in u){c=u[d],d+=p;break}if(d+=p,e?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:h>d;d+=p)d in u&&(c=o(c,u[d],d,l));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,o){"use strict";var r=o(11),i=o(136).right,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(n(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=r.aTypedArray,n=r.exportTypedArrayMethod,a=Math.floor;n("reverse",(function(){for(var e,t=i(this).length,o=a(t/2),r=0;r<o;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},function(e,t,o){"use strict";var r=o(11),i=o(13),n=o(162),a=o(23),s=o(10),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=n(arguments.length>1?arguments[1]:void 0,1),o=this.length,r=a(e),s=i(r.length),l=0;if(s+t>o)throw RangeError("Wrong length");for(;l<s;)this[t+l]=r[l++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,o){"use strict";var r=o(11),i=o(42),n=o(10),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,l=[].slice;c("slice",(function(e,t){for(var o=l.call(a(this),e,t),r=i(this,this.constructor),n=0,c=o.length,u=new(s(r))(c);c>n;)u[n]=o[n++];return u}),n((function(){new Int8Array(1).slice()})))},function(e,t,o){"use strict";var r=o(11),i=o(20).some,n=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(n(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,o){"use strict";var r=o(11),i=r.aTypedArray,n=r.exportTypedArrayMethod,a=[].sort;n("sort",(function(e){return a.call(i(this),e)}))},function(e,t,o){"use strict";var r=o(11),i=o(13),n=o(44),a=o(42),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var o=s(this),r=o.length,c=n(e,r);return new(a(o,o.constructor))(o.buffer,o.byteOffset+c*o.BYTES_PER_ELEMENT,i((void 0===t?r:n(t,r))-c))}))},function(e,t,o){"use strict";var r=o(9),i=o(11),n=o(10),a=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,l=[].toLocaleString,u=[].slice,h=!!a&&n((function(){l.call(new a(1))}));c("toLocaleString",(function(){return l.apply(h?u.call(s(this)):s(this),arguments)}),n((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!n((function(){a.prototype.toLocaleString.call([1,2])})))},function(e,t,o){"use strict";var r=o(11).exportTypedArrayMethod,i=o(10),n=o(9).Uint8Array,a=n&&n.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var l=a.toString!=s;r("toString",s,l)},function(e,t,o){"use strict";(function(e){var r=t;function i(e,t,o){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&o||(e[r[i]]=t[r[i]]);return e}function n(e){function t(e,o){if(!(this instanceof t))return new t(e,o);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&i(this,o)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=o(302),r.base64=o(303),r.EventEmitter=o(304),r.float=o(305),r.inquire=o(306),r.utf8=o(307),r.pool=o(308),r.LongBits=o(309),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var o=e[t];return!(null==o||!e.hasOwnProperty(t))&&("object"!=typeof o||(Array.isArray(o)?o.length:Object.keys(o).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var o=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(o.lo,o.hi,t):o.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(e){for(var t={},o=0;o<e.length;++o)t[e[o]]=1;return function(){for(var e=Object.keys(this),o=e.length-1;o>-1;--o)if(1===t[e[o]]&&void 0!==this[e[o]]&&null!==this[e[o]])return e[o]}},r.oneOfSetter=function(e){return function(t){for(var o=0;o<e.length;++o)e[o]!==t&&delete this[e[o]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,o){return new e(t,o)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,o(115))},function(e,t,o){var r=o(18),i=o(10),n=o(102);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},function(e,t,o){var r=o(16),i=o(206),n=o(51),a=o(19);e.exports=function(e,t){for(var o=i(t),s=a.f,c=n.f,l=0;l<o.length;l++){var u=o[l];r(e,u)||s(e,u,c(t,u))}}},function(e,t,o){var r=o(9);e.exports=r},function(e,t,o){var r=o(16),i=o(28),n=o(68).indexOf,a=o(67);e.exports=function(e,t){var o,s=i(e),c=0,l=[];for(o in s)!r(a,o)&&r(s,o)&&l.push(o);for(;t.length>c;)r(s,o=t[c++])&&(~n(l,o)||l.push(o));return l}},function(e,t,o){var r=o(100);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,o){var r=o(12);t.f=r},function(e,t,o){var r=o(149),i=o(16),n=o(152),a=o(19).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:n.f(e)})}},function(e,t,o){"use strict";var r=o(20).forEach,i=o(57),n=o(30),a=i("forEach"),s=n("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,o){"use strict";var r=o(8),i=o(171),n=o(77),a=o(58),s=o(53),c=o(22),l=o(25),u=o(12),h=o(52),d=o(63),p=o(156),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=u("iterator"),_=function(){return this};e.exports=function(e,t,o,u,p,y,v){i(o,t,u);var b,w,S,I=function(e){if(e===p&&D)return D;if(!g&&e in P)return P[e];switch(e){case"keys":case"values":case"entries":return function(){return new o(this,e)}}return function(){return new o(this)}},x=t+" Iterator",E=!1,P=e.prototype,T=P[m]||P["@@iterator"]||p&&P[p],D=!g&&T||I(p),O="Array"==t&&P.entries||T;if(O&&(b=n(O.call(new e)),f!==Object.prototype&&b.next&&(h||n(b)===f||(a?a(b,f):"function"!=typeof b[m]&&c(b,m,_)),s(b,x,!0,!0),h&&(d[x]=_))),"values"==p&&T&&"values"!==T.name&&(E=!0,D=function(){return T.call(this)}),h&&!v||P[m]===D||c(P,m,D),d[t]=D,p)if(w={values:I("values"),keys:y?D:I("keys"),entries:I("entries")},v)for(S in w)(g||E||!(S in P))&&l(P,S,w[S]);else r({target:t,proto:!0,forced:g||E},w);return w}},function(e,t,o){"use strict";var r,i,n,a=o(10),s=o(77),c=o(22),l=o(16),u=o(12),h=o(52),d=u("iterator"),p=!1;[].keys&&("next"in(n=[].keys())?(i=s(s(n)))!==Object.prototype&&(r=i):p=!0);var f=null==r||a((function(){var e={};return r[d].call(e)!==e}));f&&(r={}),h&&!f||l(r,d)||c(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(e,t,o){"use strict";var r=o(9),i=o(18),n=o(158),a=o(22),s=o(110),c=o(10),l=o(78),u=o(27),h=o(13),d=o(159),p=o(210),f=o(77),g=o(58),m=o(56).f,_=o(19).f,y=o(111),v=o(53),b=o(36),w=b.get,S=b.set,I=r.ArrayBuffer,x=I,E=r.DataView,P=E&&E.prototype,T=Object.prototype,D=r.RangeError,O=p.pack,M=p.unpack,A=function(e){return[255&e]},C=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},k=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return O(e,23,4)},N=function(e){return O(e,52,8)},H=function(e,t){_(e.prototype,t,{get:function(){return w(this)[t]}})},B=function(e,t,o,r){var i=d(o),n=w(e);if(i+t>n.byteLength)throw D("Wrong index");var a=w(n.buffer).bytes,s=i+n.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},j=function(e,t,o,r,i,n){var a=d(o),s=w(e);if(a+t>s.byteLength)throw D("Wrong index");for(var c=w(s.buffer).bytes,l=a+s.byteOffset,u=r(+i),h=0;h<t;h++)c[l+h]=u[n?h:t-h-1]};if(n){if(!c((function(){I(1)}))||!c((function(){new I(-1)}))||c((function(){return new I,new I(1.5),new I(NaN),"ArrayBuffer"!=I.name}))){for(var z,q=(x=function(e){return l(this,x),new I(d(e))}).prototype=I.prototype,R=m(I),F=0;R.length>F;)(z=R[F++])in x||a(x,z,I[z]);q.constructor=x}g&&f(P)!==T&&g(P,T);var W=new E(new x(2)),Z=P.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||s(P,{setInt8:function(e,t){Z.call(this,e,t<<24>>24)},setUint8:function(e,t){Z.call(this,e,t<<24>>24)}},{unsafe:!0})}else x=function(e){l(this,x,"ArrayBuffer");var t=d(e);S(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},E=function(e,t,o){l(this,E,"DataView"),l(e,x,"DataView");var r=w(e).byteLength,n=u(t);if(n<0||n>r)throw D("Wrong offset");if(n+(o=void 0===o?r-n:h(o))>r)throw D("Wrong length");S(this,{buffer:e,byteLength:o,byteOffset:n}),i||(this.buffer=e,this.byteLength=o,this.byteOffset=n)},i&&(H(x,"byteLength"),H(E,"buffer"),H(E,"byteLength"),H(E,"byteOffset")),s(E.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return k(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return k(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return M(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return M(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){j(this,1,e,A,t)},setUint8:function(e,t){j(this,1,e,A,t)},setInt16:function(e,t){j(this,2,e,C,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){j(this,2,e,C,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){j(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){j(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){j(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){j(this,8,e,N,t,arguments.length>2?arguments[2]:void 0)}});v(x,"ArrayBuffer"),v(E,"DataView"),e.exports={ArrayBuffer:x,DataView:E}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,o){var r=o(27),i=o(13);e.exports=function(e){if(void 0===e)return 0;var t=r(e),o=i(t);if(t!==o)throw RangeError("Wrong length or index");return o}},function(e,t,o){"use strict";var r=o(17);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,o){"use strict";var r=o(25),i=o(17),n=o(10),a=o(160),s=RegExp.prototype,c=s.toString,l=n((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u="toString"!=c.name;(l||u)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),o=e.flags;return"/"+t+"/"+String(void 0===o&&e instanceof RegExp&&!("flags"in s)?a.call(e):o)}),{unsafe:!0})},function(e,t,o){var r=o(214);e.exports=function(e,t){var o=r(e);if(o%t)throw RangeError("Wrong offset");return o}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,o){var r=o(46);e.exports=r("document","documentElement")},function(e,t,o){"use strict";var r=o(8),i=o(20).some,n=o(57),a=o(30),s=n("some"),c=a("some");r({target:"Array",proto:!0,forced:!s||!c},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){var r=o(15),i=o(41),n=o(12)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==i(e))}},function(e,t,o){"use strict";var r=o(46),i=o(19),n=o(12),a=o(18),s=n("species");e.exports=function(e){var t=r(e),o=i.f;a&&t&&!t[s]&&o(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,o){"use strict";var r=o(8),i=o(72),n=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),n.call(this)}})},function(e,t,o){e.exports=o(238)},function(e,t,o){var r=o(18),i=o(19),n=o(17),a=o(76);e.exports=r?Object.defineProperties:function(e,t){n(e);for(var o,r=a(t),s=r.length,c=0;s>c;)i.f(e,o=r[c++],t[o]);return e}},function(e,t,o){"use strict";var r=o(156).IteratorPrototype,i=o(54),n=o(43),a=o(53),s=o(63),c=function(){return this};e.exports=function(e,t,o){var l=t+" Iterator";return e.prototype=i(r,{next:n(1,o)}),a(e,l,!1,!0),s[l]=c,e}},function(e,t,o){"use strict";var r=o(18),i=o(10),n=o(76),a=o(99),s=o(89),c=o(23),l=o(61),u=Object.assign,h=Object.defineProperty;e.exports=!u||i((function(){if(r&&1!==u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},o=Symbol();return e[o]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[o]||"abcdefghijklmnopqrst"!=n(u({},t)).join("")}))?function(e,t){for(var o=c(e),i=arguments.length,u=1,h=a.f,d=s.f;i>u;)for(var p,f=l(arguments[u++]),g=h?n(f).concat(h(f)):n(f),m=g.length,_=0;m>_;)p=g[_++],r&&!d.call(f,p)||(o[p]=f[p]);return o}:u},function(e,t,o){var r=o(15),i=o(58);e.exports=function(e,t,o){var n,a;return i&&"function"==typeof(n=t.constructor)&&n!==o&&r(a=n.prototype)&&a!==o.prototype&&i(e,a),e}},function(e,t,o){o(8)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t,o){"use strict";var r=o(8),i=o(47),n=o(23),a=o(10),s=o(57),c=[],l=c.sort,u=a((function(){c.sort(void 0)})),h=a((function(){c.sort(null)})),d=s("sort");r({target:"Array",proto:!0,forced:u||!h||!d},{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),i(e))}})},function(e,t,o){"use strict";var r=o(8),i=o(27),n=o(272),a=o(202),s=o(10),c=1..toFixed,l=Math.floor,u=function(e,t,o){return 0===t?o:t%2==1?u(e,t-1,o*e):u(e*e,t/2,o)};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(e){var t,o,r,s,c=n(this),h=i(e),d=[0,0,0,0,0,0],p="",f="0",g=function(e,t){for(var o=-1,r=t;++o<6;)r+=e*d[o],d[o]=r%1e7,r=l(r/1e7)},m=function(e){for(var t=6,o=0;--t>=0;)o+=d[t],d[t]=l(o/e),o=o%e*1e7},_=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==d[e]){var o=String(d[e]);t=""===t?o:t+a.call("0",7-o.length)+o}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(o=(t=function(e){for(var t=0,o=e;o>=4096;)t+=12,o/=4096;for(;o>=2;)t+=1,o/=2;return t}(c*u(2,69,1))-69)<0?c*u(2,-t,1):c/u(2,t,1),o*=4503599627370496,(t=52-t)>0){for(g(0,o),r=h;r>=7;)g(1e7,0),r-=7;for(g(u(10,r,1),0),r=t-1;r>=23;)m(1<<23),r-=23;m(1<<r),g(1,1),m(2),f=_()}else g(0,o),g(1<<-t,0),f=_()+a.call("0",h);return f=h>0?p+((s=f.length)<=h?"0."+a.call("0",h-s)+f:f.slice(0,s-h)+"."+f.slice(s-h)):p+f}})},function(e,t,o){var r=o(8),i=o(23),n=o(76);r({target:"Object",stat:!0,forced:o(10)((function(){n(1)}))},{keys:function(e){return n(i(e))}})},function(e,t,o){"use strict";var r=o(8),i=o(9),n=o(18),a=o(179),s=o(11),c=o(157),l=o(78),u=o(43),h=o(22),d=o(13),p=o(159),f=o(162),g=o(55),m=o(16),_=o(71),y=o(15),v=o(54),b=o(58),w=o(56).f,S=o(180),I=o(20).forEach,x=o(167),E=o(19),P=o(51),T=o(36),D=o(173),O=T.get,M=T.set,A=E.f,C=P.f,L=Math.round,k=i.RangeError,V=c.ArrayBuffer,N=c.DataView,H=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,j=s.TypedArray,z=s.TypedArrayPrototype,q=s.aTypedArrayConstructor,R=s.isTypedArray,F=function(e,t){for(var o=0,r=t.length,i=new(q(e))(r);r>o;)i[o]=t[o++];return i},W=function(e,t){A(e,t,{get:function(){return O(this)[t]}})},Z=function(e){var t;return e instanceof V||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},G=function(e,t){return R(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},U=function(e,t){return G(e,t=g(t,!0))?u(2,e[t]):C(e,t)},J=function(e,t,o){return!(G(e,t=g(t,!0))&&y(o)&&m(o,"value"))||m(o,"get")||m(o,"set")||o.configurable||m(o,"writable")&&!o.writable||m(o,"enumerable")&&!o.enumerable?A(e,t,o):(e[t]=o.value,e)};n?(H||(P.f=U,E.f=J,W(z,"buffer"),W(z,"byteOffset"),W(z,"byteLength"),W(z,"length")),r({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:U,defineProperty:J}),e.exports=function(e,t,o){var n=e.match(/\d+$/)[0]/8,s=e+(o?"Clamped":"")+"Array",c="get"+e,u="set"+e,g=i[s],m=g,_=m&&m.prototype,E={},P=function(e,t){A(e,t,{get:function(){return function(e,t){var o=O(e);return o.view[c](t*n+o.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=O(e);o&&(r=(r=L(r))<0?0:r>255?255:255&r),i.view[u](t*n+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};H?a&&(m=t((function(e,t,o,r){return l(e,m,s),D(y(t)?Z(t)?void 0!==r?new g(t,f(o,n),r):void 0!==o?new g(t,f(o,n)):new g(t):R(t)?F(m,t):S.call(m,t):new g(p(t)),e,m)})),b&&b(m,j),I(w(g),(function(e){e in m||h(m,e,g[e])})),m.prototype=_):(m=t((function(e,t,o,r){l(e,m,s);var i,a,c,u=0,h=0;if(y(t)){if(!Z(t))return R(t)?F(m,t):S.call(m,t);i=t,h=f(o,n);var g=t.byteLength;if(void 0===r){if(g%n)throw k("Wrong length");if((a=g-h)<0)throw k("Wrong length")}else if((a=d(r)*n)+h>g)throw k("Wrong length");c=a/n}else c=p(t),i=new V(a=c*n);for(M(e,{buffer:i,byteOffset:h,byteLength:a,length:c,view:new N(i)});u<c;)P(e,u++)})),b&&b(m,j),_=m.prototype=v(z)),_.constructor!==m&&h(_,"constructor",m),B&&h(_,B,s),E[s]=m,r({global:!0,forced:m!=g,sham:!H},E),"BYTES_PER_ELEMENT"in m||h(m,"BYTES_PER_ELEMENT",n),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",n),x(s)}):e.exports=function(){}},function(e,t,o){var r=o(9),i=o(10),n=o(112),a=o(11).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!n((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},function(e,t,o){var r=o(23),i=o(13),n=o(83),a=o(107),s=o(62),c=o(11).aTypedArrayConstructor;e.exports=function(e){var t,o,l,u,h,d,p=r(e),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,_=n(p);if(null!=_&&!a(_))for(d=(h=_.call(p)).next,p=[];!(u=d.call(h)).done;)p.push(u.value);for(m&&f>2&&(g=s(g,arguments[2],2)),o=i(p.length),l=new(c(this))(o),t=0;o>t;t++)l[t]=m?g(p[t],t):p[t];return l}},function(e,t,o){"use strict";var r=o(28),i=o(27),n=o(13),a=o(57),s=o(30),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),p=u||!h||!d;e.exports=p?function(e){if(u)return l.apply(this,arguments)||0;var t=r(this),o=n(t.length),a=o-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=o+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},function(e,t,o){var r=o(17);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,o){var r,i,n,a=o(9),s=o(10),c=o(62),l=o(164),u=o(102),h=o(184),d=o(113),p=a.location,f=a.setImmediate,g=a.clearImmediate,m=a.process,_=a.MessageChannel,y=a.Dispatch,v=0,b={},w=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},S=function(e){return function(){w(e)}},I=function(e){w(e.data)},x=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};f&&g||(f=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return b[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(v),v},g=function(e){delete b[e]},d?r=function(e){m.nextTick(S(e))}:y&&y.now?r=function(e){y.now(S(e))}:_&&!h?(n=(i=new _).port2,i.port1.onmessage=I,r=c(n.postMessage,n,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(x)?(r=x,a.addEventListener("message",I,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),w(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:f,clear:g}},function(e,t,o){var r=o(82);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,o){"use strict";var r=o(47),i=function(e){var t,o;this.promise=new e((function(e,r){if(void 0!==t||void 0!==o)throw TypeError("Bad Promise constructor");t=e,o=r})),this.resolve=r(t),this.reject=r(o)};e.exports.f=function(e){return new i(e)}},function(e,t,o){"use strict";e.exports=function(e,t){return function(){for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];return e.apply(t,o)}}},function(e,t,o){"use strict";var r=o(26);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,o){if(!t)return e;var n;if(o)n=o(t);else if(r.isURLSearchParams(t))n=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),n=a.join("&")}if(n){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},function(e,t,o){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,o){"use strict";(function(t){var r=o(26),i=o(244),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=o(190)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(n)})),e.exports=c}).call(this,o(243))},function(e,t,o){"use strict";var r=o(26),i=o(245),n=o(187),a=o(247),s=o(250),c=o(251),l=o(191);e.exports=function(e){return new Promise((function(t,u){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+btoa(f+":"+g)}var m=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),n(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:o,config:e,request:p};i(t,u,r),p=null}},p.onabort=function(){p&&(u(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(l(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var _=o(252),y=(e.withCredentials||c(m))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),void 0===h&&(h=null),p.send(h)}))}},function(e,t,o){"use strict";var r=o(246);e.exports=function(e,t,o,i,n){var a=new Error(e);return r(a,t,o,i,n)}},function(e,t,o){"use strict";var r=o(26);e.exports=function(e,t){t=t||{};var o={},i=["url","method","params","data"],n=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(o[e]=t[e])})),r.forEach(n,(function(i){r.isObject(t[i])?o[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?o[i]=t[i]:r.isObject(e[i])?o[i]=r.deepMerge(e[i]):void 0!==e[i]&&(o[i]=e[i])})),r.forEach(a,(function(r){void 0!==t[r]?o[r]=t[r]:void 0!==e[r]&&(o[r]=e[r])}));var s=i.concat(n).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?o[r]=t[r]:void 0!==e[r]&&(o[r]=e[r])})),o}},function(e,t,o){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,o){(function(o){var r;!function(o,i){e.exports=function(o){"use strict";var i,n=(o=o||{}).Base64,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},o=0,r=e.length;o<r;o++)t[e.charAt(o)]=o;return t}(a),c=String.fromCharCode,l=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(e){return e.replace(u,l)},d=function(e){var t=[0,2,1][e.length%3],o=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[a.charAt(o>>>18),a.charAt(o>>>12&63),t>=2?"=":a.charAt(o>>>6&63),t>=1?"=":a.charAt(63&o)].join("")},p=o.btoa&&"function"==typeof o.btoa?function(e){return o.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,d)},f=function(e){return p(h(String(e)))},g=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},m=function(e,t){return t?g(f(e)):f(e)};o.Uint8Array&&(i=function(e,t){for(var o="",r=0,i=e.length;r<i;r+=3){var n=e[r],s=e[r+1],c=e[r+2],l=n<<16|s<<8|c;o+=a.charAt(l>>>18)+a.charAt(l>>>12&63)+(void 0!==s?a.charAt(l>>>6&63):"=")+(void 0!==c?a.charAt(63&l):"=")}return t?g(o):o});var _,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(y,v)},w=function(e){var t=e.length,o=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[c(r>>>16),c(r>>>8&255),c(255&r)];return i.length-=[0,0,2,1][o],i.join("")},S=o.atob&&"function"==typeof o.atob?function(e){return o.atob(e)}:function(e){return e.replace(/\S{1,4}/g,w)},I=function(e){return S(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},x=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},E=function(e){return function(e){return b(S(e))}(x(e))};o.Uint8Array&&(_=function(e){return Uint8Array.from(I(x(e)),(function(e){return e.charCodeAt(0)}))});var P=function(){var e=o.Base64;return o.Base64=n,e};if(o.Base64={VERSION:"2.6.4",atob:I,btoa:p,fromBase64:E,toBase64:m,utob:h,encode:m,encodeURI:function(e){return m(e,!0)},btou:b,decode:E,noConflict:P,fromUint8Array:i,toUint8Array:_},"function"==typeof Object.defineProperty){var T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};o.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",T((function(){return E(this)}))),Object.defineProperty(String.prototype,"toBase64",T((function(e){return m(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",T((function(){return m(this,!0)})))}}o.Meteor&&(Base64=o.Base64);e.exports?e.exports.Base64=o.Base64:void 0===(r=function(){return o.Base64}.apply(t,[]))||(e.exports=r);return{Base64:o.Base64}}(o)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:this)}).call(this,o(115))},function(e,t,o){var r;e.exports=(r=o(33),o(200),o(201),r.HmacSHA1)},function(e,t,o){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(e,t){var o=e[0],r=e[1],i=e[2],n=e[3];r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&i|~r&n)+t[0]-680876936|0)<<7|o>>>25)+r|0)&r|~o&i)+t[1]-389564586|0)<<12|n>>>20)+o|0)&o|~n&r)+t[2]+606105819|0)<<17|i>>>15)+n|0)&n|~i&o)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&i|~r&n)+t[4]-176418897|0)<<7|o>>>25)+r|0)&r|~o&i)+t[5]+1200080426|0)<<12|n>>>20)+o|0)&o|~n&r)+t[6]-1473231341|0)<<17|i>>>15)+n|0)&n|~i&o)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&i|~r&n)+t[8]+1770035416|0)<<7|o>>>25)+r|0)&r|~o&i)+t[9]-1958414417|0)<<12|n>>>20)+o|0)&o|~n&r)+t[10]-42063|0)<<17|i>>>15)+n|0)&n|~i&o)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&i|~r&n)+t[12]+1804603682|0)<<7|o>>>25)+r|0)&r|~o&i)+t[13]-40341101|0)<<12|n>>>20)+o|0)&o|~n&r)+t[14]-1502002290|0)<<17|i>>>15)+n|0)&n|~i&o)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&n|i&~n)+t[1]-165796510|0)<<5|o>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|n>>>23)+o|0)&r|o&~r)+t[11]+643717713|0)<<14|i>>>18)+n|0)&o|n&~o)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&n|i&~n)+t[5]-701558691|0)<<5|o>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|n>>>23)+o|0)&r|o&~r)+t[15]-660478335|0)<<14|i>>>18)+n|0)&o|n&~o)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&n|i&~n)+t[9]+568446438|0)<<5|o>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|n>>>23)+o|0)&r|o&~r)+t[3]-187363961|0)<<14|i>>>18)+n|0)&o|n&~o)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r&n|i&~n)+t[13]-1444681467|0)<<5|o>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|n>>>23)+o|0)&r|o&~r)+t[7]+1735328473|0)<<14|i>>>18)+n|0)&o|n&~o)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r^i^n)+t[5]-378558|0)<<4|o>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|n>>>21)+o|0)^o^r)+t[11]+1839030562|0)<<16|i>>>16)+n|0)^n^o)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r^i^n)+t[1]-1530992060|0)<<4|o>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|n>>>21)+o|0)^o^r)+t[7]-155497632|0)<<16|i>>>16)+n|0)^n^o)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r^i^n)+t[13]+681279174|0)<<4|o>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|n>>>21)+o|0)^o^r)+t[3]-722521979|0)<<16|i>>>16)+n|0)^n^o)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((n=((n+=((o=((o+=(r^i^n)+t[9]-640364487|0)<<4|o>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|n>>>21)+o|0)^o^r)+t[15]+530742520|0)<<16|i>>>16)+n|0)^n^o)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((n=((n+=(r^((o=((o+=(i^(r|~n))+t[0]-198630844|0)<<6|o>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|n>>>22)+o|0)^((i=((i+=(o^(n|~r))+t[14]-1416354905|0)<<15|i>>>17)+n|0)|~o))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((n=((n+=(r^((o=((o+=(i^(r|~n))+t[12]+1700485571|0)<<6|o>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|n>>>22)+o|0)^((i=((i+=(o^(n|~r))+t[10]-1051523|0)<<15|i>>>17)+n|0)|~o))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((n=((n+=(r^((o=((o+=(i^(r|~n))+t[8]+1873313359|0)<<6|o>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|n>>>22)+o|0)^((i=((i+=(o^(n|~r))+t[6]-1560198380|0)<<15|i>>>17)+n|0)|~o))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((n=((n+=(r^((o=((o+=(i^(r|~n))+t[4]-145523070|0)<<6|o>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|n>>>22)+o|0)^((i=((i+=(o^(n|~r))+t[2]+718787259|0)<<15|i>>>17)+n|0)|~o))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=o+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=n+e[3]|0}function r(e){var t,o=[];for(t=0;t<64;t+=4)o[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return o}function i(e){var t,o=[];for(t=0;t<64;t+=4)o[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return o}function n(e){var t,i,n,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)o(u,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(o(u,n),t=0;t<16;t+=1)n[t]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,n[14]=s,n[15]=c,o(u,n),u}function a(e){var o,r="";for(o=0;o<4;o+=1)r+=t[e>>8*o+4&15]+t[e>>8*o&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e){var t,o=[],r=e.length;for(t=0;t<r-1;t+=2)o.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,o)}function u(){this.reset()}return s(n("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(o,r){var i,n,a,s,c=this.byteLength,l=t(o,c),u=c;return r!==e&&(u=t(r,c)),l>u?new ArrayBuffer(0):(i=u-l,n=new ArrayBuffer(i),a=new Uint8Array(n),s=new Uint8Array(this,l,i),a.set(s),n)}}(),u.prototype.append=function(e){return this.appendBinary(c(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)o(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},u.prototype.end=function(e){var t,o,r=this._buff,i=r.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)n[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(n,i),o=s(this._hash),e&&(o=l(o)),this.reset(),o},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,t){var r,i,n,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(o(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),n=parseInt(r[1],16)||0,e[14]=i,e[15]=n,o(this._hash,e)},u.hash=function(e,t){return u.hashBinary(c(e),t)},u.hashBinary=function(e,t){var o=s(n(e));return t?l(o):o},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var t,r,n,a,s,c=(r=this._buff.buffer,n=e,a=!0,(s=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),s.set(new Uint8Array(n),r.byteLength),a?s:s.buffer),l=c.length;for(this._length+=e.byteLength,t=64;t<=l;t+=64)o(this._hash,i(c.subarray(t-64,t)));return this._buff=t-64<l?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,o,r=this._buff,i=r.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)n[t>>2]|=r[t]<<(t%4<<3);return this._finish(n,i),o=s(this._hash),e&&(o=l(o)),this.reset(),o},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e,t=u.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var o,r=e.length,i=new ArrayBuffer(r),n=new Uint8Array(i);for(o=0;o<r;o+=1)n[o]=e.charCodeAt(o);return t?n:i}(e.buff,!0),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,t){var r=s(function(e){var t,r,n,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)o(u,i(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(o(u,n),t=0;t<16;t+=1)n[t]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,n[14]=s,n[15]=c,o(u,n),u}(new Uint8Array(e)));return t?l(r):r},u}()},function(e,t,o){var r;e.exports=(r=o(33),r.enc.Hex)},function(e,t,o){var r=o(166);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,o){var r=o(12)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,o){var r,i,n,a,s,c,l,u;e.exports=(u=o(33),i=(r=u).lib,n=i.WordArray,a=i.Hasher,s=r.algo,c=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,r=o[0],i=o[1],n=o[2],a=o[3],s=o[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var h=(r<<5|r>>>27)+s+c[l];h+=l<20?1518500249+(i&n|~i&a):l<40?1859775393+(i^n^a):l<60?(i&n|i&a|n&a)-1894007588:(i^n^a)-899497514,s=a,a=n,n=i<<30|i>>>2,i=r,r=h}o[0]=o[0]+r|0,o[1]=o[1]+i|0,o[2]=o[2]+n|0,o[3]=o[3]+a|0,o[4]=o[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(r+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(l),r.HmacSHA1=a._createHmacHelper(l),u.SHA1)},function(e,t,o){var r,i,n,a;e.exports=(r=o(33),n=(i=r).lib.Base,a=i.enc.Utf8,void(i.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var o=e.blockSize,r=4*o;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),n=this._iKey=t.clone(),s=i.words,c=n.words,l=0;l<o;l++)s[l]^=1549556828,c[l]^=909522486;i.sigBytes=n.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})))},function(e,t,o){"use strict";var r=o(27),i=o(29);e.exports="".repeat||function(e){var t=String(i(this)),o="",n=r(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(o+=t);return o}},function(e,t,o){var r=o(8),i=o(216);r({target:"Array",stat:!0,forced:!o(112)((function(e){Array.from(e)}))},{from:i})},function(e,t,o){"use strict";var r=o(8),i=o(20).find,n=o(90),a=o(30),s=!0,c=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("find")},function(e,t,o){var r=o(9),i=o(103),n=r.WeakMap;e.exports="function"==typeof n&&/native code/.test(i(n))},function(e,t,o){var r=o(46),i=o(56),n=o(99),a=o(17);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),o=n.f;return o?t.concat(o(e)):t}},function(e,t,o){var r=o(28),i=o(56).f,n={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==n.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,o){var r=o(10);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,o){var r=o(15);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t){var o=Math.abs,r=Math.pow,i=Math.floor,n=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var c,l,u,h=new Array(s),d=8*s-t-1,p=(1<<d)-1,f=p>>1,g=23===t?r(2,-24)-r(2,-77):0,m=e<0||0===e&&1/e<0?1:0,_=0;for((e=o(e))!=e||e===1/0?(l=e!=e?1:0,c=p):(c=i(n(e)/a),e*(u=r(2,-c))<1&&(c--,u*=2),(e+=c+f>=1?g/u:g*r(2,1-f))*u>=2&&(c++,u/=2),c+f>=p?(l=0,c=p):c+f>=1?(l=(e*u-1)*r(2,t),c+=f):(l=e*r(2,f-1)*r(2,t),c=0));t>=8;h[_++]=255&l,l/=256,t-=8);for(c=c<<t|l,d+=t;d>0;h[_++]=255&c,c/=256,d-=8);return h[--_]|=128*m,h},unpack:function(e,t){var o,i=e.length,n=8*i-t-1,a=(1<<n)-1,s=a>>1,c=n-7,l=i-1,u=e[l--],h=127&u;for(u>>=7;c>0;h=256*h+e[l],l--,c-=8);for(o=h&(1<<-c)-1,h>>=-c,c+=t;c>0;o=256*o+e[l],l--,c-=8);if(0===h)h=1-s;else{if(h===a)return o?NaN:u?-1/0:1/0;o+=r(2,t),h-=s}return(u?-1:1)*o*r(2,h-t)}}},function(e,t,o){"use strict";var r=o(47),i=o(15),n=[].slice,a={},s=function(e,t,o){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,o)};e.exports=Function.bind||function(e){var t=r(this),o=n.call(arguments,1),a=function(){var r=o.concat(n.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,o){"use strict";var r=o(101),i=o(71);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,o){"use strict";var r=o(10);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,o){var r=o(27);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,o){"use strict";var r=o(23),i=o(44),n=o(13),a=Math.min;e.exports=[].copyWithin||function(e,t){var o=r(this),s=n(o.length),c=i(e,s),l=i(t,s),u=arguments.length>2?arguments[2]:void 0,h=a((void 0===u?s:i(u,s))-l,s-c),d=1;for(l<c&&c<l+h&&(d=-1,l+=h-1,c+=h-1);h-- >0;)l in o?o[c]=o[l]:delete o[c],c+=d,l+=d;return o}},function(e,t,o){"use strict";var r=o(62),i=o(23),n=o(237),a=o(107),s=o(13),c=o(104),l=o(83);e.exports=function(e){var t,o,u,h,d,p,f=i(e),g="function"==typeof this?this:Array,m=arguments.length,_=m>1?arguments[1]:void 0,y=void 0!==_,v=l(f),b=0;if(y&&(_=r(_,m>2?arguments[2]:void 0,2)),null==v||g==Array&&a(v))for(o=new g(t=s(f.length));t>b;b++)p=y?_(f[b],b):f[b],c(o,b,p);else for(d=(h=v.call(f)).next,o=new g;!(u=d.call(h)).done;b++)p=y?n(h,_,[u.value,b],!0):u.value,c(o,b,p);return o.length=b,o}},function(e,t,o){var r=o(13),i=o(202),n=o(29),a=Math.ceil,s=function(e){return function(t,o,s){var c,l,u=String(n(t)),h=u.length,d=void 0===s?" ":String(s),p=r(o);return p<=h||""==d?u:(c=p-h,(l=i.call(d,a(c/d.length))).length>c&&(l=l.slice(0,c)),e?u+l:l+u)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,o){var r=o(29),i="["+o(219)+"]",n=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var o=String(r(t));return 1&e&&(o=o.replace(n,"")),2&e&&(o=o.replace(a,"")),o}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,o){var r=o(8),i=o(226),n=o(10),a=o(15),s=o(273).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:n((function(){c(1)})),sham:!i},{freeze:function(e){return c&&a(e)?c(s(e)):e}})},function(e,t,o){"use strict";var r,i=o(8),n=o(51).f,a=o(13),s=o(198),c=o(29),l=o(199),u=o(52),h="".startsWith,d=Math.min,p=l("startsWith");i({target:"String",proto:!0,forced:!!(u||p||(r=n(String.prototype,"startsWith"),!r||r.writable))&&!p},{startsWith:function(e){var t=String(c(this));s(e);var o=a(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return h?h.call(t,r,o):t.slice(o,o+r.length)===r}})},function(e,t,o){"use strict";var r=o(8),i=o(10),n=o(72),a=o(15),s=o(23),c=o(13),l=o(104),u=o(116),h=o(84),d=o(12),p=o(109),f=d("isConcatSpreadable"),g=p>=51||!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),m=h("concat"),_=function(e){if(!a(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)};r({target:"Array",proto:!0,forced:!g||!m},{concat:function(e){var t,o,r,i,n,a=s(this),h=u(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(_(n=-1===t?a:arguments[t])){if(d+(i=c(n.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(o=0;o<i;o++,d++)o in n&&l(h,d,n[o])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(h,d++,n)}return h.length=d,h}})},function(e,t,o){var r=o(10),i=o(12),n=o(52),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,o="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),o+=r+e})),n&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}))},function(e,t,o){var r,i,n,a,s,c,l,u;e.exports=(u=o(33),o(200),o(201),i=(r=u).lib,n=i.Base,a=i.WordArray,s=r.algo,c=s.MD5,l=s.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,r=o.hasher.create(),i=a.create(),n=i.words,s=o.keySize,c=o.iterations;n.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)l=r.finalize(l),r.reset();i.concat(l)}return i.sigBytes=4*s,i}}),r.EvpKDF=function(e,t,o){return l.create(o).compute(e,t)},u.EvpKDF)},function(e,t,o){var r;e.exports=(r=o(33),o(224),void(r.lib.Cipher||function(e){var t=r,o=t.lib,i=o.Base,n=o.WordArray,a=o.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),l=t.algo.EvpKDF,u=o.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:_}return function(t){return{encrypt:function(o,r,i){return e(r).encrypt(t,o,r,i)},decrypt:function(o,r,i){return e(r).decrypt(t,o,r,i)}}}}()}),h=(o.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=o.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){var e=d.extend();function t(e,t,o){var r=this._iv;if(r){var i=r;this._iv=void 0}else i=this._prevBlock;for(var n=0;n<o;n++)e[t+n]^=i[n]}return e.Encryptor=e.extend({processBlock:function(e,o){var r=this._cipher,i=r.blockSize;t.call(this,e,o,i),r.encryptBlock(e,o),this._prevBlock=e.slice(o,o+i)}}),e.Decryptor=e.extend({processBlock:function(e,o){var r=this._cipher,i=r.blockSize,n=e.slice(o,o+i);r.decryptBlock(e,o),t.call(this,e,o,i),this._prevBlock=n}}),e}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,r=o-e.sigBytes%o,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var c=n.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(o.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:f}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,o=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=o.createEncryptor;else r=o.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(o,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),o.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;if(o)var r=n.create([1398893684,1701076831]).concat(o).concat(t);else r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),o=t.words;if(1398893684==o[0]&&1701076831==o[1]){var r=n.create(o.slice(2,4));o.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:r})}},_=o.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,o,r){r=this.cfg.extend(r);var i=e.createEncryptor(o,r),n=i.finalize(t),a=i.cfg;return g.create({ciphertext:n,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,o,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(o,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,o,r){r||(r=n.random(8));var i=l.create({keySize:t+o}).compute(e,r),a=n.create(i.words.slice(t),4*o);return i.sigBytes=4*t,g.create({key:i,iv:a,salt:r})}},v=o.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:y}),encrypt:function(e,t,o,r){var i=(r=this.cfg.extend(r)).kdf.execute(o,e.keySize,e.ivSize);r.iv=i.iv;var n=_.encrypt.call(this,e,t,i.key,r);return n.mixIn(i),n},decrypt:function(e,t,o,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(o,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,_.decrypt.call(this,e,t,i.key,r)}})}()))},function(e,t,o){var r=o(10);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,o){var r;e.exports=(r=o(33),o(94),o(271),o(224),o(225),function(){var e=r,t=e.lib.BlockCipher,o=e.algo,i=[],n=[],a=[],s=[],c=[],l=[],u=[],h=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,i[o]=f,n[f]=o;var g=e[o],m=e[g],_=e[m],y=257*e[f]^16843008*f;a[o]=y<<24|y>>>8,s[o]=y<<16|y>>>16,c[o]=y<<8|y>>>24,l[o]=y,y=16843009*_^65537*m^257*g^16843008*o,u[f]=y<<24|y>>>8,h[f]=y<<16|y>>>16,d[f]=y<<8|y>>>24,p[f]=y,o?(o=g^e[e[e[_^g]]],r^=e[e[r]]):o=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,r=4*((this._nRounds=o+6)+1),n=this._keySchedule=[],a=0;a<r;a++)if(a<o)n[a]=t[a];else{var s=n[a-1];a%o?o>6&&a%o==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=f[a/o|0]<<24),n[a]=n[a-o]^s}for(var c=this._invKeySchedule=[],l=0;l<r;l++)a=r-l,s=l%4?n[a]:n[a-4],c[l]=l<4||a<=4?s:u[i[s>>>24]]^h[i[s>>>16&255]]^d[i[s>>>8&255]]^p[i[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,i)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,h,d,p,n),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,r,i,n,a,s){for(var c=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],h=e[t+2]^o[2],d=e[t+3]^o[3],p=4,f=1;f<c;f++){var g=r[l>>>24]^i[u>>>16&255]^n[h>>>8&255]^a[255&d]^o[p++],m=r[u>>>24]^i[h>>>16&255]^n[d>>>8&255]^a[255&l]^o[p++],_=r[h>>>24]^i[d>>>16&255]^n[l>>>8&255]^a[255&u]^o[p++],y=r[d>>>24]^i[l>>>16&255]^n[u>>>8&255]^a[255&h]^o[p++];l=g,u=m,h=_,d=y}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^o[p++],m=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[p++],_=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[p++],y=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^o[p++],e[t]=g,e[t+1]=m,e[t+2]=_,e[t+3]=y},keySize:8});e.AES=t._createHelper(g)}(),r.AES)},function(e,t,o){var r;e.exports=(r=o(33),o(225),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},function(e,t,o){"use strict";o.d(t,"a",(function(){return q}));o(65),o(69),o(70),o(49),o(74),o(31),o(59),o(35),o(32),o(40),o(50),o(45),o(60),o(80);var r,i,n,a,s,c,l,u=o(14),h=(o(81),o(117),o(86),o(121),o(122),o(123),o(124),o(125),o(126),o(127),o(128),o(129),o(130),o(131),o(132),o(133),o(134),o(135),o(137),o(138),o(139),o(140),o(141),o(142),o(143),o(144),o(145),o(267),o(169)),d=o.n(h),p=(o(114),o(38),o(73),o(168),o(48),o(37),o(161),o(64),o(85),o(39),o(227)),f=o.n(p),g=o(197),m=o.n(g),_=o(94),y=o.n(_),v=o(228),b=o.n(v),w=o(33),S=o.n(w);!function(e){e[e.TXT=0]="TXT",e[e.MD=1]="MD",e[e.C=2]="C",e[e.CPP=3]="CPP",e[e.H=4]="H",e[e.HPP=5]="HPP",e[e.PY=6]="PY",e[e.JS=7]="JS",e[e.XML=8]="XML"}(r||(r={})),function(e){e[e.JPG=0]="JPG",e[e.JPEG=1]="JPEG",e[e.PNG=2]="PNG",e[e.BMP=3]="BMP",e[e.SVG=4]="SVG",e[e.HEIC=5]="HEIC"}(i||(i={})),function(e){e[e.PDF=0]="PDF"}(n||(n={})),function(e){e[e.XLSX=0]="XLSX",e[e.XLS=1]="XLS"}(a||(a={})),function(e){e[e.DOC=0]="DOC",e[e.DOCX=1]="DOCX"}(s||(s={})),function(e){e[e.PPT=0]="PPT",e[e.PPTX=1]="PPTX"}(c||(c={})),function(e){e[e.PPT=1]="PPT",e[e.DOC=2]="DOC",e[e.ELS=4]="ELS",e[e.PDF=8]="PDF",e[e.IMG=16]="IMG",e[e.TXT=32]="TXT",e[e.H5=64]="H5",e[e.H5PDF=128]="H5PDF",e[e.IMGAndPDF=256]="IMGAndPDF",e[e.PPTH5=512]="PPTH5",e[e.H5ZIP=4096]="H5ZIP"}(l||(l={}));var I=o(1),x=o(2),E=x.b.bind(null,"docs.s."),P=m.a.parse("89c78c018ed563571a3024342073c002"),T=m.a.parse("0d9d89c53bd0a086834b411fe8387946"),D={},O=function(e){return e&&!isNaN(e)&&/^[1-9]\d*$/.test(String(e))},M=function(e){var t=I.c.ZegoDocsViewFileTypeUnknown,o=("string"==typeof e?e:e.name).split(".").pop();switch(o?o.toUpperCase():o){case"XLSX":case"XLS":t=I.c.ZegoDocsViewFileTypeELS;break;case"DOC":case"DOCX":t=I.c.ZegoDocsViewFileTypeDOC;break;case"PPT":case"PPTX":t=I.c.ZegoDocsViewFileTypePPT;break;case"TXT":case"MD":case"C":case"CPP":case"H":case"HPP":case"PY":case"JS":case"XML":t=I.c.ZegoDocsViewFileTypeTXT;break;case"PDF":t=I.c.ZegoDocsViewFileTypePDF;break;case"JPG":case"JPEG":case"PNG":case"BMP":case"SVG":case"HEIC":t=I.c.ZegoDocsViewFileTypeIMG;break;case"ZIP":t=I.c.ZegoDocsViewFileTypeCustomH5}return t};var A=function(e){var t=function(e){for(var t=e.length,o=[],r=0;r<t;r++)o[r>>>2]|=(255&e[r])<<24-r%4*8;return S.a.lib.WordArray.create(o,t)}(e).toString(y.a);return function(e){for(var t=e.words,o=e.sigBytes,r=new Uint8Array(o),i=0;i<o;i++){var n=t[i>>>2]>>>24-i%4*8&255;r[i]=n}return r}(f.a.decrypt(t,P,{iv:T,mode:S.a.mode.CBC,padding:b.a}))};function C(e,t,o){var r,i=D;if(e&&t.length){i[e]=1;var n=(t.findIndex((function(t){return t===e}))+1)%t.length;if(!i[t[n]]){var a=t[n],s=new XMLHttpRequest;if(s.open("GET",a+"/"+o,!1),s.onreadystatechange=function(){if(4==s.readyState)if(200!=s.status){r=!1;var e={status:s.status,src:a+o};x.a.info(E("preload_h5_cdn"),JSON.stringify(e))}else r=!0},s.send(null),!r)return!1}return!0}return!1}var L=o(105),k=function(){function e(){this.axiosInstance=d.a.create({timeout:3e4}),this.getFileName=function(e){return e.name}}return e.prototype.getMd5=function(e){return Object(L.a)(e)},e.prototype.getFileSize=function(e){return Promise.resolve(e.size)},e.prototype.request=function(e){return this.axiosInstance(e)},e.prototype.decryptImage=function(e){return this.request({url:e,method:"get",timeout:3e4,responseType:"arraybuffer"}).then((function(e){var t=new Uint8Array(e.data),o=A(t.slice(0,1024));return URL.createObjectURL(new Blob([o,t.slice(1024)],{type:"image/jpg"}))}))},e.prototype.uploadDoc=function(e,t,o){var r=e.fileServerProvider;return"oss"===r?this.uploadDocToOss(e,t):"sfs"===r?this.uploadDocToSfs(e,o):Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorParamInvalid))},e.prototype.uploadH5File=function(e,t,o,r){var i=e.name,n={app_id:r.app_id,user_id:r.id_name,platform:r.platform,web_token:r.web_token,file_name:i,file_type:I.c.ZegoDocsViewFileTypeCustomH5,width:t.width,height:t.height,page_count:t.pageCount};t.thumbnailList&&t.thumbnailList.length&&(n.thumbnails=t.thumbnailList);var a=new FormData;return a.append("req",new Blob([JSON.stringify(n)],{type:"application/json"})),a.append("document",e),this.axiosInstance({method:"post",url:r.url,data:a,timeout:36e5,onUploadProgress:function(e){if(o){var t=e.total,r=e.loaded;o({fileName:i,uploadPercent:Math.floor(r/t*100),total:t,loaded:r})}}})},e.prototype.uploadDocToOss=function(e,t){var o=e.oss,r=e.file,i=e.onProgress,n=e.fileName,a=e.fileHash,s=Object(L.b)(o),c=new FormData;return c.append("OSSAccessKeyId",s.OSSAccessKeyId),c.append("x-oss-security-token",s.securityToken),c.append("signature",s.signature),c.append("policy",s.policy),c.append("successActionStatus",s.successActionStatus),c.append("key",s.objectName),c.append("file",r),c.append("name",r.name),this.axiosInstance({method:"post",url:s.url,data:c,timeout:36e5,onUploadProgress:function(e){if(i&&!t){var o=e.total,r=e.loaded;i({status:I.e.UPLOADING,fileName:n,fileHash:a,uploadPercent:Math.floor(r/o*100),total:o,loaded:r})}}})},e.prototype.uploadDocToSfs=function(e,t){var o=e.sfs,r=e.fileHash,i=e.file,n=e.onProgress,a=e.fileName,s=o,c=s.token,l=s.expired_timestamp,u=s.api,h=s.object_name,d={app_id:t.app_id,user_id:t.id_name,platform:t.platform,expired_timestamp:l,sfs_token:c,file_name:h,file_hash:r},p=new FormData;return p.append("req",new Blob([JSON.stringify(d)],{type:"application/json"})),p.append("document",i),this.axiosInstance({method:"post",url:u,data:p,timeout:36e5,onUploadProgress:function(e){if(n){var t=e.total,o=e.loaded;n({status:I.e.UPLOADING,fileName:a,fileHash:r,uploadPercent:Math.floor(o/t*100),total:t,loaded:o})}}})},e}(),V=function(){return(V=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},N=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},H=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},B=x.b.bind(null,"docs.s."),j=-1!=="".indexOf("wx")?"wx":"web",z=-1!=="".indexOf("private"),q=function(){function e(e){if(this.commonParams={platform:"wx"===j?16:32,app_id:0,web_token:"",id_name:""},this.stateCenter={env:"",cancelMap:{},preloadPPTH5CDNUsedMap:{}},!e||!e.appID||isNaN(e.appID)||!e.token)throw new Error("constructor parameter error.");this.platformAPI=new k,this.init(e),x.a.init({appid:e.appID,isTestEnv:!!e.isTestEnv,version:this.getVersion(),isProd:!0}),x.a.initRoom({roomid:"",userid:e.userID,token:e.token}),x.a.info(B("new"),JSON.stringify({params:e}))}return e.prototype.init=function(e){var t=e.token,o=e.appID,r=e.userID,i=e.isTestEnv;this.commonParams.app_id=o,this.commonParams.web_token=t,this.commonParams.id_name=r||"",this.config={domain:z?"":this.getDomain("")},this.setTestEnv(!!i)},e.prototype.getDomain=function(e){return"https://docservice"+e+".zego.im"},e.prototype.isInvalidDomain=function(){return!this.stateCenter.env&&!this.config.domain},e.prototype.getVersion=function(){return"2.0.0"},e.prototype.setTestEnv=function(e){"boolean"==typeof e&&(this.stateCenter.env=e?"-test":"");var t=this.stateCenter.env?this.getDomain(this.stateCenter.env):this.config.domain;this.requestUrls={queryStatusUrl:t+"/doc/query_status",createCvtUrl:t+"/doc/cvt_doc",cancelCvtUrl:t+"/doc/cancel_cvt",queryUrl:t+"/doc/access",uploadH5Url:t+"/doc/upload_file"}},e.prototype.setConfig=function(e,t){return!(!e||null==t)&&(["dynamicPPT_HD","dynamicPPT_AutomaticPage",I.a.Domain,I.a.ThumbnailMode].includes(e)?(this.config[e]=t,e===I.a.Domain&&this.setTestEnv()):(this.stateCenter.env="true"===t||!0===t?"-alpha":"-test",this.setTestEnv()),!0)},e.prototype.getConfig=function(e){return this.config[e]},e.prototype.decryptImage=function(e){return this.platformAPI.decryptImage(e)},e.prototype.uploadH5File=function(e,t,o){return N(this,void 0,void 0,(function(){var r,i,n,a,s,c,h,d=this;return H(this,(function(p){switch(p.label){case 0:if(!e||!t||!O(t.width)||!O(t.height)||!O(t.pageCount)||t.thumbnailList&&t.thumbnailList.length&&t.thumbnailList.length!==t.pageCount)return[2,Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorParamInvalid))];p.label=1;case 1:return p.trys.push([1,5,,6]),(r=M(e))!=I.c.ZegoDocsViewFileTypeCustomH5?[2,Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorZipFileInvalid))]:[4,this.platformAPI.getFileSize(e)];case 2:return i=p.sent(),this.checkSizeHandle(r,i)?[4,this.platformAPI.getMd5(e)]:[2,Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorFileSizeLimit))];case 3:return n=p.sent(),[4,this.queryStatus({fileHash:n,fileType:r,expectFileType:l.H5ZIP})];case 4:return a=p.sent(),(s=a.fileID)?[2,Promise.resolve(s)]:[3,6];case 5:return c=p.sent(),h=Object(u.b)(I.b.ZegoDocsViewErrorUploadFailed),[2,Promise.reject(V(V({},h),{error:c}))];case 6:return[2,this.platformAPI.uploadH5File(e,t,o,V(V({},this.commonParams),{url:this.requestUrls.uploadH5Url})).then((function(o){var r,i=o.data;x.a.info(B("uploadH5File"),JSON.stringify({params:t,file:d.platformAPI.getFileName(e),result:i}));var n=null===(r=i.ret)||void 0===r?void 0:r.code;return 0===n?i.file_id:Promise.reject(Object(u.b)(n))})).catch((function(e){var t;throw 413===(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)?Object(u.b)(I.b.ZegoDocsViewErrorFileSizeLimit):e}))]}}))}))},e.prototype.uploadFile=function(e){return!e.file||"number"!=typeof e.renderType||isNaN(e.renderType)?Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorParamInvalid)):e.file instanceof File&&0===e.file.size?Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorFileContentEmpty)):this.isInvalidDomain()?Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorEmptyDomain)):this.uploadProgress(e).then((function(t){return x.a.info(B("uploadFile"),JSON.stringify({params:e,result:t})),t}))},e.prototype.loadFile=function(e){var t=this;return this.isInvalidDomain()?Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorEmptyDomain)):e?new Promise((function(o,r){return N(t,void 0,void 0,(function(){var t,i,n,a;return H(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=V(V({},this.commonParams),{file_id:e}),[4,this.platformAPI.request({url:this.requestUrls.queryUrl,method:"post",timeout:3e4,data:t})];case 1:return i=s.sent(),0===(n=i.data).ret.code?(n.file_urls=n.file_urls||[],n.page_count=n.page_count||n.file_urls.length||1,o(function(e,t){var o=I.c.ZegoDocsViewFileTypeDynamicPPTH5,r=t.file_type,i=t.expect_file_type,n=t.file_name,a=t.width,s=t.height,c=t.split_file_list,l=t.file_urls,u=i===o?o:r,h=u===I.c.ZegoDocsViewFileTypeELS,d={file_id:e,file_name:n,file_type:u,width:a,height:s,file_size:t.file_size,file_hash:t.file_hash,expect_file_type:i,file_urls:l,notes:t.notes||[],thumbnails:t.thumbnails||[],cdn_hosts:t.cdn_hosts||[],preload:t.preload||[]};if(c){var p=1;d.file_list=c.map((function(e){var o={};if(h){var r=Math.floor(e.width),i=Math.floor(e.height);o.name=n,o.file_name=e.file_name.replace(/\.[a-zA-Z]+$/,""),o.page_count=e.file_urls.length,o.page_list=e.file_urls.map((function(e,t){return{width:r,height:i,src:e,virtual_page_list:[{width:r,height:i,virtual_page_number:t+p}]}})),p+=e.file_urls.length}else{var a=0,s=[];e.split_data.forEach((function(e){e.page_data.forEach((function(e){for(var t=Math.floor(e[0]),o=Math.floor(e[1]),r=e[3],i=0;i<r;i++)s.push({width:t,height:o,src:l[a++],virtual_page_list:[{width:t,height:o,virtual_page_number:a}]})}))})),o.file_name=n,o.page_count=t.page_count,o.page_list=s}return o}))}else d.file_list=[{file_name:n,page_count:t.page_count,page_list:l.map((function(e,t){return{width:a,height:s,src:e,virtual_page_list:[{width:a,height:s,virtual_page_number:t+1}]}}))}];return d}(e,n))):r(Object(u.b)(n.ret.code,n.ret.message)),[3,3];case 2:return a=s.sent(),r(a),[3,3];case 3:return[2]}}))}))})):Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorParamInvalid))},e.prototype.cacheFile=function(e){var t=this;return this.isInvalidDomain()?Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorEmptyDomain)):e?new Promise((function(o,r){return N(t,void 0,void 0,(function(){var t,i,n,a,s;return H(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),t=V(V({},this.commonParams),{file_id:e}),[4,this.platformAPI.request({url:this.requestUrls.queryUrl,method:"post",timeout:3e4,data:t})];case 1:return i=c.sent(),0!==(n=i.data).ret.code?[3,3]:[4,(l=n,new Promise((function(e,t){if(l.expect_file_type!==I.c.ZegoDocsViewFileTypeDynamicPPTH5&&l.expect_file_type!==I.c.ZegoDocsViewFileTypeCustomH5||!l.preload)t(Object(u.b)(I.b.ZegoDocsViewErrorCacheNotSupported));else{l.preload.slide_files||e({totalFileNum:0,failedFileNum:0});var o=0,r=0,i=l.file_urls[0].replace("index.html",""),n=l.cdn_hosts.reverse();l.preload.slide_files.forEach((function(e){for(var t in e)e[t].forEach((function(e){var t=new XMLHttpRequest;t.open("GET",i+e.rel,!1),t.onreadystatechange=function(){if(4==t.readyState&&(o++,200!=t.status)){var a={status:t.status,src:i+e.rel};x.a.info(E("preload_h5"),JSON.stringify(a)),!C(i,n,e.rel)&&r++}},t.send(null)}))})),e({totalFileNum:o,failedFileNum:r})}})))];case 2:return a=c.sent(),o(a),[3,4];case 3:r(Object(u.b)(n.ret.code,n.ret.message)),c.label=4;case 4:return[3,6];case 5:return s=c.sent(),r(s),[3,6];case 6:return[2]}var l}))}))})):Promise.reject(Object(u.b)(I.b.ZegoDocsViewErrorParamInvalid))},e.prototype.cancelUploadFile=function(e){var t=this,o=e.fileHash,r=e.taskID;return new Promise(r?function(i,n){return N(t,void 0,void 0,(function(){var t,a,s,c;return H(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=V(V({},this.commonParams),{task_id:r}),[4,this.platformAPI.request({url:this.requestUrls.cancelCvtUrl,method:"post",timeout:3e4,data:t})];case 1:return a=l.sent(),0===(s=a.data).ret.code?(this.stateCenter.cancelMap[o]=r,x.a.info(B("cancelUploadFile"),JSON.stringify({result:e})),i(!0)):n(Object(u.b)(s.ret.code,s.ret.message)),[3,3];case 2:return c=l.sent(),n(c),[3,3];case 3:return[2]}}))}))}:function(e,r){t.stateCenter.cancelMap[o]=!0,e(!0)})},e.prototype.uploadSucceedAfter=function(e){var t=e.result,o=e.onProgress,r=e.resolve;o&&o(t),r&&r(t.fileID)},e.prototype.uploadFailedAfter=function(e,t){e&&e(t)},e.prototype.uploadProgressInit=function(e){return N(this,void 0,void 0,(function(){var t,o,r,i,n,a,s,c,l;return H(this,(function(u){switch(u.label){case 0:return t=e.statusInitSub,o=e.file,r=e.fileName,i=e.onProgress,a=(n=t).oss,s=n.fileServerProvider,c=n.fileHash,l=n.sfs,this.stateCenter.cancelMap[c]?(i&&i({status:I.e.CONVERT_CANCEL,fileName:r,fileHash:c}),this.stateCenter.cancelMap[c]=!1,[2,!1]):[4,this.platformAPI.uploadDoc({file:o,fileServerProvider:s,oss:a,sfs:l,fileHash:c,fileName:r,onProgress:i},this.stateCenter.cancelMap[c],this.commonParams)];case 1:return u.sent(),i&&i({status:I.e.UPLOADED,fileName:r,fileHash:c}),[4,this.uploadProgressCvt(e)];case 2:return u.sent(),[2,!0]}}))}))},e.prototype.uploadProgressCvt=function(e){return N(this,void 0,void 0,(function(){var t,o,r,i,n,a,s,c,l,u,h,d,p,f,g;return H(this,(function(m){switch(m.label){case 0:return t=e.file,o=e.onProgress,r=e.fileType,i=e.fileHash,n=e.fileName,a=e.originReslove,s=e.resolve,c=e.expectFileType,l=e.originReject,u=e.reject,h=this.stateCenter.cancelMap[i],o&&o({status:h?I.e.CONVERT_CANCEL:I.e.UPLOADED,fileName:n,fileHash:i}),h?(this.stateCenter.cancelMap[i]=!1,[2,!1]):(p=this.createCvtDoc,f={},[4,this.platformAPI.getFileSize(t)]);case 1:return[4,p.apply(this,[(f.fileSize=m.sent(),f.fileName=this.platformAPI.getFileName(t),f.fileType=r,f.fileHash=i,f.expectFileType=c,f)])];case 2:return d=m.sent(),g={fileName:n,fileHash:i,taskID:d.taskID,onProgress:o},[4,this.uploadProgress(g,a||s,l||u)];case 3:return m.sent(),[2,!0]}}))}))},e.prototype.checkTypeHandle=function(e){return e!==I.c.ZegoDocsViewFileTypeUnknown},e.prototype.checkRenderTypeHandle=function(e,t){return(t!=I.d.ZegoDocsViewRenderTypeVectorAndIMG&&t!=I.d.ZegoDocsViewRenderTypeIMG||e!=I.c.ZegoDocsViewFileTypeCustomH5)&&(t!=I.d.ZegoDocsViewRenderTypeDynamicPPTH5||e===I.c.ZegoDocsViewFileTypePPT)},e.prototype.checkSizeHandle=function(e,t){var o=!0;switch(e){case I.c.ZegoDocsViewFileTypePPT:case I.c.ZegoDocsViewFileTypeDOC:case I.c.ZegoDocsViewFileTypePDF:case I.c.ZegoDocsViewFileTypeIMG:t>104857600&&(o=!1);break;case I.c.ZegoDocsViewFileTypeELS:t>10485760&&(o=!1);break;case I.c.ZegoDocsViewFileTypeTXT:t>2097152&&(o=!1);break;case I.c.ZegoDocsViewFileTypeCustomH5:t>52428800&&(o=!1)}return o},e.prototype.uploadProgress=function(e,t,o){var r=this;return new Promise((function(i,n){return N(r,void 0,void 0,(function(){var r,a,s,c,h,d,p,f,g,m,_,y,v,b,w=this;return H(this,(function(S){switch(S.label){case 0:r="",a="",s=0,c=I.c.ZegoDocsViewFileTypeUnknown,S.label=1;case 1:return S.trys.push([1,19,,20]),d=(h=e).file,p=h.renderType,f=void 0,g=l.PDF,d?I.d[p]?(c=M(d),this.checkTypeHandle(c)?this.checkRenderTypeHandle(c,p)?[4,this.platformAPI.getFileSize(d)]:[2,n(Object(u.b)(I.b.ZegoDocsViewErrorUnsupportRenderType))]:[2,n(Object(u.b)(I.b.ZegoDocsViewErrorConvertFileTypeInvalid))]):[2,n(Object(u.b)(I.b.ZegoDocsViewErrorUnsupportRenderType))]:[3,5];case 2:return s=S.sent(),this.checkSizeHandle(c,s)?(a=this.platformAPI.getFileName(d),g=function(e,t){var o;switch(e){case I.d.ZegoDocsViewRenderTypeVector:o=l.PDF;break;case I.d.ZegoDocsViewRenderTypeIMG:case I.d.ZegoDocsViewRenderTypeVectorAndIMG:o=t===I.c.ZegoDocsViewFileTypeIMG?l.IMG:l.IMGAndPDF;break;case I.d.ZegoDocsViewRenderTypeDynamicPPTH5:o=l.PPTH5;break;default:o=l.IMGAndPDF}return o}(p,c),[4,this.platformAPI.getMd5(d)]):[2,n(Object(u.b)(I.b.ZegoDocsViewErrorFileSizeLimit))];case 3:return r=S.sent(),[4,this.queryStatus({fileHash:r,fileType:c,expectFileType:g})];case 4:return f=S.sent(),[3,7];case 5:return a=(m=e).fileName,r=m.fileHash,[4,this.queryStatus({taskID:m.taskID})];case 6:f=S.sent(),S.label=7;case 7:switch(_=f.status,_){case I.e.UPLOADING:return[3,8];case I.e.UPLOADED:return[3,10];case I.e.WAITING:case I.e.CONVERTING:return[3,12];case I.e.CONVERTED:return[3,16]}return[3,17];case 8:return[4,this.uploadProgressInit({file:d,expectFileType:g,fileType:c,fileHash:r,fileName:a,statusInitSub:f,onProgress:e.onProgress,originReslove:t,resolve:i,originReject:o,reject:n})];case 9:return S.sent(),[3,18];case 10:return[4,this.uploadProgressCvt({file:d,expectFileType:g,fileType:c,fileHash:r,fileName:a,onProgress:e.onProgress,originReslove:t,resolve:i,originReject:o,reject:n})];case 11:return S.sent(),[3,18];case 12:return y=this.stateCenter.cancelMap[r],v=f.taskID,e.onProgress&&e.onProgress({status:y?I.e.CONVERT_CANCEL:_,fileName:a,fileHash:r,taskID:v}),y?(this.stateCenter.cancelMap[r]=!1,[4,this.cancelUploadFile({fileHash:r,taskID:v})]):[3,14];case 13:return S.sent(),[3,15];case 14:setTimeout((function(){return N(w,void 0,void 0,(function(){return H(this,(function(s){switch(s.label){case 0:return[4,this.uploadProgress({taskID:v,fileName:a,fileHash:r,onProgress:e.onProgress},t||i,o||n)];case 1:return s.sent(),[2]}}))}))}),2e3),S.label=15;case 15:return[3,18];case 16:return this.uploadSucceedAfter({result:{status:f.status,fileID:f.fileID,fileName:a,fileHash:r},onProgress:e.onProgress,resolve:t||i}),[3,18];case 17:return this.uploadFailedAfter(o||n,V({status:_,taskID:v},Object(u.b)(I.b.ZegoDocsViewErrorConvertFail))),[3,18];case 18:return[3,20];case 19:return b=S.sent(),this.uploadFailedAfter(o||n,V(V({status:I.e.CONVERT_FAIL},Object(u.b)(b&&b.code||I.b.ZegoDocsViewErrorConvertFail)),{error:b})),[3,20];case 20:return[2]}}))}))}))},e.prototype.queryStatus=function(e){var t=this,o=V({},this.commonParams);if(e.taskID)o.task_id=e.taskID;else{var r=e,i=r.fileHash,n=r.fileType,a=r.expectFileType;o.file_hash=i,o.file_type=n,o.expect_file_type=a}return new Promise((function(r,i){return N(t,void 0,void 0,(function(){var t,n,a,s,c,l,h,d,p,f,g,m,_;return H(this,(function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,this.platformAPI.request({url:this.requestUrls.queryStatusUrl,method:"post",timeout:e.timeout||3e4,data:o})];case 1:if(t=y.sent(),n=t.data,a=n.ret,s=n.file_type,c=n.status,l=n.file_hash,h=n.file_server_provider,d=n.oss,p=n.sfs,f=n.task_id,g=n.query_interval,m=n.file_id,0===a.code)switch(c){case 32:case 64:case 128:case 256:case 512:case 1024:case 8192:case 32768:case 32769:i(Object(u.b)(c));break;case 1:r({fileType:s,status:c,fileHash:l,fileServerProvider:h,oss:d,sfs:p});break;case 2:r({fileType:s,status:c,fileHash:l});break;case 4:r({fileType:s,status:c,taskID:f,queryInterval:g||1e3});break;case 8:r({fileType:s,status:c,taskID:f});break;case 16:r({fileID:m,status:c});break;default:i(Object(u.b)(I.b.ZegoDocsViewErrorConvertFail))}else i(Object(u.b)(n.ret.code,n.ret.message));return[3,3];case 2:return _=y.sent(),i(_),[3,3];case 3:return[2]}}))}))}))},e.prototype.getCvtH5HighQualityMode=function(){return"true"===String(this.config.dynamicPPT_HD)?1:0},e.prototype.getCvtThumbnailMode=function(){return+this.config.thumbnailMode||1},e.prototype.getCvtH5AutomaticPageMode=function(){var e=this.config.dynamicPPT_AutomaticPage;return null==e||"true"===String(e)?2:1},e.prototype.createCvtDoc=function(e){var t=this,o=e.timeout,r=e.srcFileUrl,i=e.fileName,n=e.fileHash,a=e.fileSize,s=e.fileType,c=e.expectFileType,l=V(V({},this.commonParams),{file_name:i,file_hash:n,file_size:a,file_type:s,expect_file_type:c}),h=this.getCvtThumbnailMode();1!=h&&(l.thumbnail_height_type=h);var d=this.getCvtH5HighQualityMode();0!=d&&(l.export_high_quality_images=d);var p=this.getCvtH5AutomaticPageMode();return 2!=p&&(l.h5_automatic_page_turning=p),r&&(l.src_file_url=r),new Promise((function(e,r){return N(t,void 0,void 0,(function(){var t,i,n;return H(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.platformAPI.request({url:this.requestUrls.createCvtUrl,method:"post",timeout:o||3e4,data:l})];case 1:return t=a.sent(),i=t.data,0===i.ret.code?e({status:i.status,taskID:i.task_id}):r(Object(u.b)(i.ret.code,i.ret.message)),[3,3];case 2:return n=a.sent(),r(n),[3,3];case 3:return[2]}}))}))}))},e}()},function(e,t,o){var r=o(9);e.exports=r.Promise},function(e,t,o){var r=o(17),i=o(107),n=o(13),a=o(62),s=o(83),c=o(182),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,o){var u,h,d,p,f,g,m,_=o&&o.that,y=!(!o||!o.AS_ENTRIES),v=!(!o||!o.IS_ITERATOR),b=!(!o||!o.INTERRUPTED),w=a(t,_,1+y+b),S=function(e){return u&&c(u),new l(!0,e)},I=function(e){return y?(r(e),b?w(e[0],e[1],S):w(e[0],e[1])):b?w(e,S):w(e)};if(v)u=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(d=0,p=n(e.length);p>d;d++)if((f=I(e[d]))&&f instanceof l)return f;return new l(!1)}u=h.call(e)}for(g=u.next;!(m=g.call(u)).done;){try{f=I(m.value)}catch(e){throw c(u),e}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},function(e,t,o){var r,i,n,a,s,c,l,u,h=o(9),d=o(51).f,p=o(183).set,f=o(184),g=o(233),m=o(113),_=h.MutationObserver||h.WebKitMutationObserver,y=h.document,v=h.process,b=h.Promise,w=d(h,"queueMicrotask"),S=w&&w.value;S||(r=function(){var e,t;for(m&&(e=v.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():n=void 0,e}}n=void 0,e&&e.enter()},f||m||g||!_||!y?b&&b.resolve?(l=b.resolve(void 0),u=l.then,a=function(){u.call(l,r)}):a=m?function(){v.nextTick(r)}:function(){p.call(h,r)}:(s=!0,c=y.createTextNode(""),new _(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=S||function(e){var t={fn:e,next:void 0};n&&(n.next=t),i||(i=t,a()),n=t}},function(e,t,o){var r=o(82);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,o){var r=o(17),i=o(15),n=o(185);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var o=n.f(e);return(0,o.resolve)(t),o.promise}},function(e,t,o){var r=o(9);e.exports=function(e,t){var o=r.console;o&&o.error&&(1===arguments.length?o.error(e):o.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,o){var r=o(17),i=o(182);e.exports=function(e,t,o,n){try{return n?t(r(o)[0],o[1]):t(o)}catch(t){throw i(e),t}}},function(e,t,o){"use strict";var r=o(26),i=o(186),n=o(239),a=o(192);function s(e){var t=new n(e),o=i(n.prototype.request,t);return r.extend(o,n.prototype,t),r.extend(o,t),o}var c=s(o(189));c.Axios=n,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=o(193),c.CancelToken=o(253),c.isCancel=o(188),c.all=function(e){return Promise.all(e)},c.spread=o(254),e.exports=c,e.exports.default=c},function(e,t,o){"use strict";var r=o(26),i=o(187),n=o(240),a=o(241),s=o(192);function c(e){this.defaults=e,this.interceptors={request:new n,response:new n}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)o=o.then(t.shift(),t.shift());return o},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,o){return this.request(r.merge(o||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,o,i){return this.request(r.merge(i||{},{method:e,url:t,data:o}))}})),e.exports=c},function(e,t,o){"use strict";var r=o(26);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,o){"use strict";var r=o(26),i=o(242),n=o(188),a=o(189);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return n(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,o){"use strict";var r=o(26);e.exports=function(e,t,o){return r.forEach(o,(function(o){e=o(e,t)})),e}},function(e,t){var o,r,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(o===setTimeout)return setTimeout(e,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:n}catch(e){o=n}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new f(e,t)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,o){"use strict";var r=o(26);e.exports=function(e,t){r.forEach(e,(function(o,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[r])}))}},function(e,t,o){"use strict";var r=o(191);e.exports=function(e,t,o){var i=o.config.validateStatus;!i||i(o.status)?e(o):t(r("Request failed with status code "+o.status,o.config,null,o.request,o))}},function(e,t,o){"use strict";e.exports=function(e,t,o,r,i){return e.config=t,o&&(e.code=o),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,o){"use strict";var r=o(248),i=o(249);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,o){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,o){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,o){"use strict";var r=o(26),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,o,n,a={};return e?(r.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=r.trim(e.substr(0,n)).toLowerCase(),o=r.trim(e.substr(n+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([o]):a[t]?a[t]+", "+o:o}})),a):a}},function(e,t,o){"use strict";var r=o(26);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function i(e){var r=e;return t&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=i(window.location.href),function(t){var o=r.isString(t)?i(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},function(e,t,o){"use strict";var r=o(26);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,o,i,n,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(n)&&s.push("domain="+n),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,o){"use strict";var r=o(193);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var o=this;e((function(e){o.reason||(o.reason=new r(e),t(o.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,o){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,o){var r=o(23),i=Math.floor,n="".replace,a=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,o,c,l,u){var h=o+e.length,d=c.length,p=s;return void 0!==l&&(l=r(l),p=a),n.call(u,p,(function(r,n){var a;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,o);case"'":return t.slice(h);case"<":a=l[n.slice(1,-1)];break;default:var s=+n;if(0===s)return r;if(s>d){var u=i(s/10);return 0===u?r:u<=d?void 0===c[u-1]?n.charAt(1):c[u-1]+n.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},function(e,t,o){var r=o(8),i=o(257);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},function(e,t,o){"use strict";var r=o(10),i=o(217).start,n=Math.abs,a=Date.prototype,s=a.getTime,c=a.toISOString;e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!r((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),o=e<0?"-":e>9999?"+":"";return o+i(n(e),o?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(t,3,0)+"Z"}:c},function(e,t,o){o(8)({target:"Object",stat:!0,sham:!o(18)},{create:o(54)})},function(e,t,o){o(8)({target:"Object",stat:!0},{setPrototypeOf:o(58)})},function(e,t,o){"use strict";var r=o(8),i=o(299);r({target:"String",proto:!0,forced:o(300)("bold")},{bold:function(){return i(this,"b","","")}})},function(e,t,o){e.exports=function(e,t){var o,r,i,n,a,s,c,l;for(o=3&e.length,r=e.length-o,i=t,a=3432918353,s=461845907,l=0;l<r;)c=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(n=5*(65535&(i=(i^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(c=0,o){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:i^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(l)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}},function(e,t){e.exports=r;var o=null;try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,o){this.low=0|e,this.high=0|t,this.unsigned=!!o}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var n={},a={};function s(e,t){var o,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(o=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=o),o):(i=-128<=(e|=0)&&e<128)&&(r=n[e])?r:(o=l(e,e<0?-1:0,!1),i&&(n[e]=o),o)}function c(e,t){if(isNaN(e))return t?y:_;if(t){if(e<0)return y;if(e>=f)return I}else{if(e<=-g)return x;if(e+1>=g)return S}return e<0?c(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,o){return new r(e,t,o)}r.fromInt=s,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function h(e,t,o){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"==typeof t?(o=t,t=!1):t=!!t,(o=o||10)<2||36<o)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,o).neg();for(var i=c(u(o,8)),n=_,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),o);if(s<8){var d=c(u(o,s));n=n.mul(d).add(c(l))}else n=(n=n.mul(i)).add(c(l))}return n.unsigned=t,n}function d(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var p=4294967296,f=p*p,g=f/2,m=s(1<<24),_=s(0);r.ZERO=_;var y=s(0,!0);r.UZERO=y;var v=s(1);r.ONE=v;var b=s(1,!0);r.UONE=b;var w=s(-1);r.NEG_ONE=w;var S=l(-1,2147483647,!1);r.MAX_VALUE=S;var I=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=I;var x=l(0,-2147483648,!1);r.MIN_VALUE=x;var E=r.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=c(e),o=this.div(t),r=o.mul(t).sub(this);return o.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(u(e,6),this.unsigned),n=this,a="";;){var s=n.div(i),l=(n.sub(s.mul(i)).toInt()>>>0).toString(e);if((n=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return i(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(i(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),o=e.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(v)},E.neg=E.negate,E.add=function(e){i(e)||(e=d(e));var t=this.high>>>16,o=65535&this.high,r=this.low>>>16,n=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=n+(65535&e.low))>>>16,h+=(p+=r+c)>>>16,u+=(h+=o+s)>>>16,u+=t+a,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},E.subtract=function(e){return i(e)||(e=d(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return _;if(i(e)||(e=d(e)),o)return l(o.mul(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned);if(e.isZero())return _;if(this.eq(x))return e.isOdd()?x:_;if(e.eq(x))return this.isOdd()?x:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,s=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,g=0,y=0,v=0;return y+=(v+=a*p)>>>16,g+=(y+=n*p)>>>16,y&=65535,g+=(y+=a*h)>>>16,f+=(g+=r*p)>>>16,g&=65535,f+=(g+=n*h)>>>16,g&=65535,f+=(g+=a*u)>>>16,f+=t*p+r*h+n*u+a*s,l((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(i(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,n;if(o)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?o.div_u:o.div_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:_;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;n=y}else{if(this.eq(x))return e.eq(v)||e.eq(w)?x:e.eq(x)?v:(t=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?v:w:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(x))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=_}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),s=a<=48?1:u(2,a-48),h=c(t),p=h.mul(e);p.isNegative()||p.gt(r);)p=(h=c(t-=s,this.unsigned)).mul(e);h.isZero()&&(h=v),n=n.add(h),r=r.sub(p)}return n},E.div=E.divide,E.modulo=function(e){return i(e)||(e=d(e)),o?l((this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return l(~this.low,~this.high,this.unsigned)},E.and=function(e){return i(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return i(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return i(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t){!function(){if(-1!==window.navigator.userAgent.indexOf("Trident")){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e,document.body.scrollTo||(Element.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t}),document.body.scrollBy||(Element.prototype.scrollBy=function(e,t){this.scrollLeft+=e,this.scrollTop+=t}),FileReader.prototype.readAsBinaryString||(FileReader.prototype.readAsBinaryString=function(e){var t=this,o=new FileReader;o.onload=function(e){for(var r="",i=new Uint8Array(o.result),n=i.byteLength,a=0;a<n;a++)r+=String.fromCharCode(i[a]);t.content=r,t.result=r,t.onload()},o.readAsArrayBuffer(e)})}}()},function(e,t,o){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},n=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),a=[];function s(e){for(var t=-1,o=0;o<a.length;o++)if(a[o].identifier===e){t=o;break}return t}function c(e,t){for(var o={},r=[],i=0;i<e.length;i++){var n=e[i],c=t.base?n[0]+t.base:n[0],l=o[c]||0,u="".concat(c," ").concat(l);o[c]=l+1;var h=s(u),d={css:n[1],media:n[2],sourceMap:n[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:u,updater:m(d,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=o.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=n(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,o,r){var i=o?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var n=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n)}}function p(e,t,o){var r=o.css,i=o.media,n=o.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,g=0;function m(e,t){var o,r,i;if(t.singleton){var n=g++;o=f||(f=l(t)),r=d.bind(null,o,n,!1),i=d.bind(null,o,n,!0)}else o=l(t),r=p.bind(null,o,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var o=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<o.length;r++){var i=s(o[r]);a[i].references--}for(var n=c(e,t),l=0;l<o.length;l++){var u=s(o[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}o=n}}}},function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[o].concat(n).concat([i]).join("\n")}var a,s,c;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var n=0;n<this.length;n++){var a=this[n][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(o&&(c[2]?c[2]="".concat(o," and ").concat(c[2]):c[2]=o),t.push(c))}},t}},function(e,t,o){o(8)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,o){"use strict";o(45);var r,i=o(8),n=o(18),a=o(223),s=o(9),c=o(170),l=o(25),u=o(78),h=o(16),d=o(172),p=o(216),f=o(106).codeAt,g=o(268),m=o(53),_=o(269),y=o(36),v=s.URL,b=_.URLSearchParams,w=_.getState,S=y.set,I=y.getterFor("URL"),x=Math.floor,E=Math.pow,P=/[A-Za-z]/,T=/[\d+-.A-Za-z]/,D=/\d/,O=/^(0x|0X)/,M=/^[0-7]+$/,A=/^\d+$/,C=/^[\dA-Fa-f]+$/,L=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,k=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,V=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,H=function(e,t){var o,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(o=j(t.slice(1,-1))))return"Invalid host";e.host=o}else if(U(e)){if(t=g(t),L.test(t))return"Invalid host";if(null===(o=B(t)))return"Invalid host";e.host=o}else{if(k.test(t))return"Invalid host";for(o="",r=p(t),i=0;i<r.length;i++)o+=Z(r[i],q);e.host=o}},B=function(e){var t,o,r,i,n,a,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(o=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(n=10,i.length>1&&"0"==i.charAt(0)&&(n=O.test(i)?16:8,i=i.slice(8==n?1:2)),""===i)a=0;else{if(!(10==n?A:8==n?M:C).test(i))return e;a=parseInt(i,n)}o.push(a)}for(r=0;r<t;r++)if(a=o[r],r==t-1){if(a>=E(256,5-t))return null}else if(a>255)return null;for(s=o.pop(),r=0;r<o.length;r++)s+=o[r]*E(256,3-r);return s},j=function(e){var t,o,r,i,n,a,s,c=[0,0,0,0,0,0,0,0],l=0,u=null,h=0,d=function(){return e.charAt(h)};if(":"==d()){if(":"!=e.charAt(1))return;h+=2,u=++l}for(;d();){if(8==l)return;if(":"!=d()){for(t=o=0;o<4&&C.test(d());)t=16*t+parseInt(d(),16),h++,o++;if("."==d()){if(0==o)return;if(h-=o,l>6)return;for(r=0;d();){if(i=null,r>0){if(!("."==d()&&r<4))return;h++}if(!D.test(d()))return;for(;D.test(d());){if(n=parseInt(d(),10),null===i)i=n;else{if(0==i)return;i=10*i+n}if(i>255)return;h++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;c[l++]=t}else{if(null!==u)return;h++,u=++l}}if(null!==u)for(a=l-u,l=7;0!=l&&a>0;)s=c[l],c[l--]=c[u+a-1],c[u+--a]=s;else if(8!=l)return;return c},z=function(e){var t,o,r,i;if("number"==typeof e){for(t=[],o=0;o<4;o++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,o=1,r=null,i=0,n=0;n<8;n++)0!==e[n]?(i>o&&(t=r,o=i),r=null,i=0):(null===r&&(r=n),++i);return i>o&&(t=r,o=i),t}(e),o=0;o<8;o++)i&&0===e[o]||(i&&(i=!1),r===o?(t+=o?":":"::",i=!0):(t+=e[o].toString(16),o<7&&(t+=":")));return"["+t+"]"}return e},q={},R=d({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),F=d({},R,{"#":1,"?":1,"{":1,"}":1}),W=d({},F,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Z=function(e,t){var o=f(e,0);return o>32&&o<127&&!h(t,e)?e:encodeURIComponent(e)},G={ftp:21,file:null,http:80,https:443,ws:80,wss:443},U=function(e){return h(G,e.scheme)},J=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Y=function(e,t){var o;return 2==e.length&&P.test(e.charAt(0))&&(":"==(o=e.charAt(1))||!t&&"|"==o)},Q=function(e){var t;return e.length>1&&Y(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},K=function(e){var t=e.path,o=t.length;!o||"file"==e.scheme&&1==o&&Y(t[0],!0)||t.pop()},$=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},oe={},re={},ie={},ne={},ae={},se={},ce={},le={},ue={},he={},de={},pe={},fe={},ge={},me={},_e={},ye={},ve={},be={},we=function(e,t,o,i){var n,a,s,c,l,u=o||ee,d=0,f="",g=!1,m=!1,_=!1;for(o||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(V,"")),t=t.replace(N,""),n=p(t);d<=n.length;){switch(a=n[d],u){case ee:if(!a||!P.test(a)){if(o)return"Invalid scheme";u=oe;continue}f+=a.toLowerCase(),u=te;break;case te:if(a&&(T.test(a)||"+"==a||"-"==a||"."==a))f+=a.toLowerCase();else{if(":"!=a){if(o)return"Invalid scheme";f="",u=oe,d=0;continue}if(o&&(U(e)!=h(G,f)||"file"==f&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,o)return void(U(e)&&G[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?u=pe:U(e)&&i&&i.scheme==e.scheme?u=re:U(e)?u=se:"/"==n[d+1]?(u=ie,d++):(e.cannotBeABaseURL=!0,e.path.push(""),u=ye)}break;case oe:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,u=be;break}u="file"==i.scheme?pe:ne;continue;case re:if("/"!=a||"/"!=n[d+1]){u=ne;continue}u=ce,d++;break;case ie:if("/"==a){u=le;break}u=_e;continue;case ne:if(e.scheme=i.scheme,a==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&U(e))u=ae;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",u=ve;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),u=_e;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=be}break;case ae:if(!U(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,u=_e;continue}u=le}else u=ce;break;case se:if(u=ce,"/"!=a||"/"!=f.charAt(d+1))continue;d++;break;case ce:if("/"!=a&&"\\"!=a){u=le;continue}break;case le:if("@"==a){g&&(f="%40"+f),g=!0,s=p(f);for(var y=0;y<s.length;y++){var v=s[y];if(":"!=v||_){var b=Z(v,W);_?e.password+=b:e.username+=b}else _=!0}f=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)){if(g&&""==f)return"Invalid authority";d-=p(f).length+1,f="",u=ue}else f+=a;break;case ue:case he:if(o&&"file"==e.scheme){u=ge;continue}if(":"!=a||m){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)){if(U(e)&&""==f)return"Invalid host";if(o&&""==f&&(J(e)||null!==e.port))return;if(c=H(e,f))return c;if(f="",u=me,o)return;continue}"["==a?m=!0:"]"==a&&(m=!1),f+=a}else{if(""==f)return"Invalid host";if(c=H(e,f))return c;if(f="",u=de,o==he)return}break;case de:if(!D.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)||o){if(""!=f){var w=parseInt(f,10);if(w>65535)return"Invalid port";e.port=U(e)&&w===G[e.scheme]?null:w,f=""}if(o)return;u=me;continue}return"Invalid port"}f+=a;break;case pe:if(e.scheme="file","/"==a||"\\"==a)u=fe;else{if(!i||"file"!=i.scheme){u=_e;continue}if(a==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",u=ve;else{if("#"!=a){Q(n.slice(d).join(""))||(e.host=i.host,e.path=i.path.slice(),K(e)),u=_e;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=be}}break;case fe:if("/"==a||"\\"==a){u=ge;break}i&&"file"==i.scheme&&!Q(n.slice(d).join(""))&&(Y(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),u=_e;continue;case ge:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!o&&Y(f))u=_e;else if(""==f){if(e.host="",o)return;u=me}else{if(c=H(e,f))return c;if("localhost"==e.host&&(e.host=""),o)return;f="",u=me}continue}f+=a;break;case me:if(U(e)){if(u=_e,"/"!=a&&"\\"!=a)continue}else if(o||"?"!=a)if(o||"#"!=a){if(a!=r&&(u=_e,"/"!=a))continue}else e.fragment="",u=be;else e.query="",u=ve;break;case _e:if(a==r||"/"==a||"\\"==a&&U(e)||!o&&("?"==a||"#"==a)){if(".."===(l=(l=f).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(K(e),"/"==a||"\\"==a&&U(e)||e.path.push("")):$(f)?"/"==a||"\\"==a&&U(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Y(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",u=ve):"#"==a&&(e.fragment="",u=be)}else f+=Z(a,F);break;case ye:"?"==a?(e.query="",u=ve):"#"==a?(e.fragment="",u=be):a!=r&&(e.path[0]+=Z(a,q));break;case ve:o||"#"!=a?a!=r&&("'"==a&&U(e)?e.query+="%27":e.query+="#"==a?"%23":Z(a,q)):(e.fragment="",u=be);break;case be:a!=r&&(e.fragment+=Z(a,R))}d++}},Se=function(e){var t,o,r=u(this,Se,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),s=S(r,{type:"URL"});if(void 0!==i)if(i instanceof Se)t=I(i);else if(o=we(t={},String(i)))throw TypeError(o);if(o=we(s,a,null,t))throw TypeError(o);var c=s.searchParams=new b,l=w(c);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(c)||null},n||(r.href=xe.call(r),r.origin=Ee.call(r),r.protocol=Pe.call(r),r.username=Te.call(r),r.password=De.call(r),r.host=Oe.call(r),r.hostname=Me.call(r),r.port=Ae.call(r),r.pathname=Ce.call(r),r.search=Le.call(r),r.searchParams=ke.call(r),r.hash=Ve.call(r))},Ie=Se.prototype,xe=function(){var e=I(this),t=e.scheme,o=e.username,r=e.password,i=e.host,n=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",J(e)&&(l+=o+(r?":"+r:"")+"@"),l+=z(i),null!==n&&(l+=":"+n)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},Ee=function(){var e=I(this),t=e.scheme,o=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&U(e)?t+"://"+z(e.host)+(null!==o?":"+o:""):"null"},Pe=function(){return I(this).scheme+":"},Te=function(){return I(this).username},De=function(){return I(this).password},Oe=function(){var e=I(this),t=e.host,o=e.port;return null===t?"":null===o?z(t):z(t)+":"+o},Me=function(){var e=I(this).host;return null===e?"":z(e)},Ae=function(){var e=I(this).port;return null===e?"":String(e)},Ce=function(){var e=I(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Le=function(){var e=I(this).query;return e?"?"+e:""},ke=function(){return I(this).searchParams},Ve=function(){var e=I(this).fragment;return e?"#"+e:""},Ne=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(n&&c(Ie,{href:Ne(xe,(function(e){var t=I(this),o=String(e),r=we(t,o);if(r)throw TypeError(r);w(t.searchParams).updateSearchParams(t.query)})),origin:Ne(Ee),protocol:Ne(Pe,(function(e){var t=I(this);we(t,String(e)+":",ee)})),username:Ne(Te,(function(e){var t=I(this),o=p(String(e));if(!X(t)){t.username="";for(var r=0;r<o.length;r++)t.username+=Z(o[r],W)}})),password:Ne(De,(function(e){var t=I(this),o=p(String(e));if(!X(t)){t.password="";for(var r=0;r<o.length;r++)t.password+=Z(o[r],W)}})),host:Ne(Oe,(function(e){var t=I(this);t.cannotBeABaseURL||we(t,String(e),ue)})),hostname:Ne(Me,(function(e){var t=I(this);t.cannotBeABaseURL||we(t,String(e),he)})),port:Ne(Ae,(function(e){var t=I(this);X(t)||(""==(e=String(e))?t.port=null:we(t,e,de))})),pathname:Ne(Ce,(function(e){var t=I(this);t.cannotBeABaseURL||(t.path=[],we(t,e+"",me))})),search:Ne(Le,(function(e){var t=I(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",we(t,e,ve)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:Ne(ke),hash:Ne(Ve,(function(e){var t=I(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",we(t,e,be)):t.fragment=null}))}),l(Ie,"toJSON",(function(){return xe.call(this)}),{enumerable:!0}),l(Ie,"toString",(function(){return xe.call(this)}),{enumerable:!0}),v){var He=v.createObjectURL,Be=v.revokeObjectURL;He&&l(Se,"createObjectURL",(function(e){return He.apply(v,arguments)})),Be&&l(Se,"revokeObjectURL",(function(e){return Be.apply(v,arguments)}))}m(Se,"URL"),i({global:!0,forced:!a,sham:!n},{URL:Se})},function(e,t,o){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,n="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(e){return e+22+75*(e<26)},l=function(e,t,o){var r=0;for(e=o?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},u=function(e){var t,o,r=[],i=(e=function(e){for(var t=[],o=0,r=e.length;o<r;){var i=e.charCodeAt(o++);if(i>=55296&&i<=56319&&o<r){var n=e.charCodeAt(o++);56320==(64512&n)?t.push(((1023&i)<<10)+(1023&n)+65536):(t.push(i),o--)}else t.push(i)}return t}(e)).length,u=128,h=0,d=72;for(t=0;t<e.length;t++)(o=e[t])<128&&r.push(s(o));var p=r.length,f=p;for(p&&r.push("-");f<i;){var g=2147483647;for(t=0;t<e.length;t++)(o=e[t])>=u&&o<g&&(g=o);var m=f+1;if(g-u>a((2147483647-h)/m))throw RangeError(n);for(h+=(g-u)*m,u=g,t=0;t<e.length;t++){if((o=e[t])<u&&++h>2147483647)throw RangeError(n);if(o==u){for(var _=h,y=36;;y+=36){var v=y<=d?1:y>=d+26?26:y-d;if(_<v)break;var b=_-v,w=36-v;r.push(s(c(v+b%w))),_=a(b/w)}r.push(s(c(_))),d=l(h,m,f==p),h=0,++f}}++h,++u}return r.join("")};e.exports=function(e){var t,o,n=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)o=a[t],n.push(r.test(o)?"xn--"+u(o):o);return n.join(".")}},function(e,t,o){"use strict";o(31);var r=o(8),i=o(46),n=o(223),a=o(25),s=o(110),c=o(53),l=o(171),u=o(36),h=o(78),d=o(16),p=o(62),f=o(71),g=o(17),m=o(15),_=o(54),y=o(43),v=o(270),b=o(83),w=o(12),S=i("fetch"),I=i("Headers"),x=w("iterator"),E=u.set,P=u.getterFor("URLSearchParams"),T=u.getterFor("URLSearchParamsIterator"),D=/\+/g,O=Array(4),M=function(e){return O[e-1]||(O[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},A=function(e){try{return decodeURIComponent(e)}catch(t){return e}},C=function(e){var t=e.replace(D," "),o=4;try{return decodeURIComponent(t)}catch(e){for(;o;)t=t.replace(M(o--),A);return t}},L=/[!'()~]|%20/g,k={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(e){return k[e]},N=function(e){return encodeURIComponent(e).replace(L,V)},H=function(e,t){if(t)for(var o,r,i=t.split("&"),n=0;n<i.length;)(o=i[n++]).length&&(r=o.split("="),e.push({key:C(r.shift()),value:C(r.join("="))}))},B=function(e){this.entries.length=0,H(this.entries,e)},j=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=l((function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:v(P(e).entries),kind:t})}),"Iterator",(function(){var e=T(this),t=e.kind,o=e.iterator.next(),r=o.value;return o.done||(o.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),o})),q=function(){h(this,q,"URLSearchParams");var e,t,o,r,i,n,a,s,c,l=arguments.length>0?arguments[0]:void 0,u=this,p=[];if(E(u,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:B}),void 0!==l)if(m(l))if("function"==typeof(e=b(l)))for(o=(t=e.call(l)).next;!(r=o.call(t)).done;){if((a=(n=(i=v(g(r.value))).next).call(i)).done||(s=n.call(i)).done||!n.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}else for(c in l)d(l,c)&&p.push({key:c,value:l[c]+""});else H(p,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},R=q.prototype;s(R,{append:function(e,t){j(arguments.length,2);var o=P(this);o.entries.push({key:e+"",value:t+""}),o.updateURL()},delete:function(e){j(arguments.length,1);for(var t=P(this),o=t.entries,r=e+"",i=0;i<o.length;)o[i].key===r?o.splice(i,1):i++;t.updateURL()},get:function(e){j(arguments.length,1);for(var t=P(this).entries,o=e+"",r=0;r<t.length;r++)if(t[r].key===o)return t[r].value;return null},getAll:function(e){j(arguments.length,1);for(var t=P(this).entries,o=e+"",r=[],i=0;i<t.length;i++)t[i].key===o&&r.push(t[i].value);return r},has:function(e){j(arguments.length,1);for(var t=P(this).entries,o=e+"",r=0;r<t.length;)if(t[r++].key===o)return!0;return!1},set:function(e,t){j(arguments.length,1);for(var o,r=P(this),i=r.entries,n=!1,a=e+"",s=t+"",c=0;c<i.length;c++)(o=i[c]).key===a&&(n?i.splice(c--,1):(n=!0,o.value=s));n||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,o,r=P(this),i=r.entries,n=i.slice();for(i.length=0,o=0;o<n.length;o++){for(e=n[o],t=0;t<o;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===o&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,o=P(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<o.length;)r((t=o[i++]).value,t.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),a(R,x,R.entries),a(R,"toString",(function(){for(var e,t=P(this).entries,o=[],r=0;r<t.length;)e=t[r++],o.push(N(e.key)+"="+N(e.value));return o.join("&")}),{enumerable:!0}),c(q,"URLSearchParams"),r({global:!0,forced:!n},{URLSearchParams:q}),n||"function"!=typeof S||"function"!=typeof I||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,o,r,i=[e];return arguments.length>1&&(m(t=arguments[1])&&(o=t.body,"URLSearchParams"===f(o)&&((r=t.headers?new I(t.headers):new I).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=_(t,{body:y(0,String(o)),headers:y(0,r)}))),i.push(t)),S.apply(this,i)}}),e.exports={URLSearchParams:q,getState:P}},function(e,t,o){var r=o(17),i=o(83);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,o){var r;e.exports=(r=o(33),function(e){var t=r,o=t.lib,i=o.WordArray,n=o.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var r=t+o,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var n=this._hash.words,a=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],y=e[t+7],v=e[t+8],b=e[t+9],w=e[t+10],S=e[t+11],I=e[t+12],x=e[t+13],E=e[t+14],P=e[t+15],T=n[0],D=n[1],O=n[2],M=n[3];T=l(T,D,O,M,a,7,s[0]),M=l(M,T,D,O,c,12,s[1]),O=l(O,M,T,D,p,17,s[2]),D=l(D,O,M,T,f,22,s[3]),T=l(T,D,O,M,g,7,s[4]),M=l(M,T,D,O,m,12,s[5]),O=l(O,M,T,D,_,17,s[6]),D=l(D,O,M,T,y,22,s[7]),T=l(T,D,O,M,v,7,s[8]),M=l(M,T,D,O,b,12,s[9]),O=l(O,M,T,D,w,17,s[10]),D=l(D,O,M,T,S,22,s[11]),T=l(T,D,O,M,I,7,s[12]),M=l(M,T,D,O,x,12,s[13]),O=l(O,M,T,D,E,17,s[14]),T=u(T,D=l(D,O,M,T,P,22,s[15]),O,M,c,5,s[16]),M=u(M,T,D,O,_,9,s[17]),O=u(O,M,T,D,S,14,s[18]),D=u(D,O,M,T,a,20,s[19]),T=u(T,D,O,M,m,5,s[20]),M=u(M,T,D,O,w,9,s[21]),O=u(O,M,T,D,P,14,s[22]),D=u(D,O,M,T,g,20,s[23]),T=u(T,D,O,M,b,5,s[24]),M=u(M,T,D,O,E,9,s[25]),O=u(O,M,T,D,f,14,s[26]),D=u(D,O,M,T,v,20,s[27]),T=u(T,D,O,M,x,5,s[28]),M=u(M,T,D,O,p,9,s[29]),O=u(O,M,T,D,y,14,s[30]),T=h(T,D=u(D,O,M,T,I,20,s[31]),O,M,m,4,s[32]),M=h(M,T,D,O,v,11,s[33]),O=h(O,M,T,D,S,16,s[34]),D=h(D,O,M,T,E,23,s[35]),T=h(T,D,O,M,c,4,s[36]),M=h(M,T,D,O,g,11,s[37]),O=h(O,M,T,D,y,16,s[38]),D=h(D,O,M,T,w,23,s[39]),T=h(T,D,O,M,x,4,s[40]),M=h(M,T,D,O,a,11,s[41]),O=h(O,M,T,D,f,16,s[42]),D=h(D,O,M,T,_,23,s[43]),T=h(T,D,O,M,b,4,s[44]),M=h(M,T,D,O,I,11,s[45]),O=h(O,M,T,D,P,16,s[46]),T=d(T,D=h(D,O,M,T,p,23,s[47]),O,M,a,6,s[48]),M=d(M,T,D,O,y,10,s[49]),O=d(O,M,T,D,E,15,s[50]),D=d(D,O,M,T,m,21,s[51]),T=d(T,D,O,M,I,6,s[52]),M=d(M,T,D,O,f,10,s[53]),O=d(O,M,T,D,w,15,s[54]),D=d(D,O,M,T,c,21,s[55]),T=d(T,D,O,M,v,6,s[56]),M=d(M,T,D,O,P,10,s[57]),O=d(O,M,T,D,_,15,s[58]),D=d(D,O,M,T,x,21,s[59]),T=d(T,D,O,M,g,6,s[60]),M=d(M,T,D,O,S,10,s[61]),O=d(O,M,T,D,p,15,s[62]),D=d(D,O,M,T,b,21,s[63]),n[0]=n[0]+T|0,n[1]=n[1]+D|0,n[2]=n[2]+O|0,n[3]=n[3]+M|0},_doFinalize:function(){var t=this._data,o=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;o[i>>>5]|=128<<24-i%32;var n=e.floor(r/4294967296),a=r;o[15+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),o[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(o.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,o,r,i,n,a){var s=e+(t&o|~t&r)+i+a;return(s<<n|s>>>32-n)+t}function u(e,t,o,r,i,n,a){var s=e+(t&r|o&~r)+i+a;return(s<<n|s>>>32-n)+t}function h(e,t,o,r,i,n,a){var s=e+(t^o^r)+i+a;return(s<<n|s>>>32-n)+t}function d(e,t,o,r,i,n,a){var s=e+(o^(t|~r))+i+a;return(s<<n|s>>>32-n)+t}t.MD5=n._createHelper(c),t.HmacMD5=n._createHmacHelper(c)}(Math),r.MD5)},function(e,t,o){var r=o(41);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,o){var r=o(67),i=o(15),n=o(16),a=o(19).f,s=o(66),c=o(226),l=s("meta"),u=0,h=Object.isExtensible||function(){return!0},d=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,l)){if(!h(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},getWeakData:function(e,t){if(!n(e,l)){if(!h(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},onFreeze:function(e){return c&&p.REQUIRED&&h(e)&&!n(e,l)&&d(e),e}};r[l]=!0},function(e,t,o){var r=o(8),i=o(289).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,o){"use strict";var r=o(118),i=o(17),n=o(13),a=o(29),s=o(119),c=o(120);r("match",1,(function(e,t,o){return[function(t){var o=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,o):new RegExp(t)[e](String(o))},function(e){var r=o(t,e,this);if(r.done)return r.value;var a=i(e),l=String(this);if(!a.global)return c(a,l);var u=a.unicode;a.lastIndex=0;for(var h,d=[],p=0;null!==(h=c(a,l));){var f=String(h[0]);d[p]=f,""===f&&(a.lastIndex=s(l,n(a.lastIndex),u)),p++}return 0===p?null:d}]}))},function(e,t,o){var r=o(8),i=o(181);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,o){o(178)("Int32",(function(e){return function(t,o,r){return e(this,t,o,r)}}))},function(e,t,o){"use strict";var r=o(179);(0,o(11).exportTypedArrayStaticMethod)("from",o(180),r)},function(e,t,o){"use strict";e.exports=h;var r,i=o(146),n=i.LongBits,a=i.base64,s=i.utf8;function c(e,t,o){this.fn=e,this.len=t,this.next=void 0,this.val=o}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function p(e,t,o){t[o]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,o){for(;e.hi;)t[o++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[o++]=127&e.lo|128,e.lo=e.lo>>>7;t[o++]=e.lo}function m(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,o){return this.tail=this.tail.next=new c(e,t,o),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,o){for(;e>127;)t[o++]=127&e|128,e>>>=7;t[o]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,n.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=n.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=n.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var _=i.Array.prototype.set?function(e,t,o){t.set(e,o)}:function(e,t,o){for(var r=0;r<e.length;++r)t[o+r]=e[r]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var o=h.alloc(t=a.length(e));a.decode(e,o,0),e=o}return this.uint32(t)._push(_,t,e)},h.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=e.next,this.tail=t,this.len+=o),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),o=0;e;)e.fn(e.val,t,o),o+=e.len,e=e.next;return t},h._configure=function(e){r=e,h.create=d(),r._configure()}},function(e,t,o){"use strict";e.exports=c;var r,i=o(146),n=i.LongBits,a=i.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},h=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function d(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new n(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,o=this.pos+e;if(o>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,o):t===o?new this.buf.constructor(0):this._slice.call(this.buf,t,o)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=h(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,o){var r;!function(){"use strict";function i(e,t,o){var r=t.x,i=t.y,n=o.x-r,a=o.y-i;if(0!==n||0!==a){var s=((e.x-r)*n+(e.y-i)*a)/(n*n+a*a);s>1?(r=o.x,i=o.y):s>0&&(r+=n*s,i+=a*s)}return(n=e.x-r)*n+(a=e.y-i)*a}function n(e,t){var o=e.length-1,r=[e[0]];return function e(t,o,r,n,a){for(var s,c=n,l=o+1;l<r;l++){var u=i(t[l],t[o],t[r]);u>c&&(s=l,c=u)}c>n&&(s-o>1&&e(t,o,s,n,a),a.push(t[s]),r-s>1&&e(t,s,r,n,a))}(e,0,o,t,r),r.push(e[o]),r}function a(e,t,o){if(e.length<=2)return e;var r=void 0!==t?t*t:1;return e=n(e=o?e:function(e,t){for(var o,r,i,n,a,s=e[0],c=[s],l=1,u=e.length;l<u;l++)o=e[l],i=s,n=void 0,a=void 0,n=(r=o).x-i.x,a=r.y-i.y,n*n+a*a>t&&(c.push(o),s=o);return s!==o&&c.push(o),c}(e,r),r)}void 0===(r=function(){return a}.call(t,o,t,e))||(e.exports=r)}()},function(e,t,o){"use strict";o.d(t,"a",(function(){return le}));o(258),o(259),o(65),o(69),o(70),o(222),o(38),o(49),o(31),o(48),o(59),o(88),o(35),o(32),o(40),o(45),o(39),o(60),o(276),o(86),o(80);var r,i,n,a,s,c,l=o(169),u=o.n(l),h=o(105),d=function(){return(d=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},f=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},g=function(){function e(){this.axiosInstance=u.a.create(),this.config=null,this.domains={}}return e.prototype.setConfig=function(e){if(!this.config){var t=e.isTestEnv?"https://docservice-test.zego.im":"https://docservice.zego.im";this.domains={cvt:t+"/doc/cvt_doc",query:t+"/doc/query_status",access:t+"/doc/access"},this.config={platform:32,app_id:e.appID,web_token:e.token,id_name:e.userID}}},e.prototype.isConfiged=function(){return!!this.config},e.prototype.uploadImage=function(e,t){return p(this,void 0,void 0,(function(){var o=this;return f(this,(function(r){return[2,new Promise((function(r,i){return p(o,void 0,void 0,(function(){var o,n,a,s,c,l,u,d,p,g;return f(this,(function(f){switch(f.label){case 0:return f.trys.push([0,9,,10]),o=e.name,n=e.size,a=o.substr(o.lastIndexOf(".")+1).toLowerCase(),[4,Object(h.a)(e)];case 1:return s=f.sent(),[4,this.queryStatus(s)];case 2:return c=f.sent(),l=c.status,u=c.oss,d=c.file_id,1!==l?[3,4]:[4,this.upload(u,e,o,s,a,t,r)];case 3:return f.sent(),[3,8];case 4:return 16!==l?[3,6]:(p=r,[4,this.load(d)]);case 5:return p.apply(void 0,[f.sent()]),[3,8];case 6:return[4,this.repeatQuery(o,s,n,"",r)];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:return!(g=f.sent())||2010001!=g.code&&2020006!=g.code||(g.code=3030010,g.msg=g.message),i(g),[3,10];case 10:return[2]}}))}))}))]}))}))},e.prototype.repeatQuery=function(e,t,o,r,i){return p(this,void 0,void 0,(function(){var n,a,s,c,l=this;return f(this,(function(u){switch(u.label){case 0:return[4,this.queryStatus(t,r)];case 1:return n=u.sent(),a=n.status,s=n.file_id,16===a&&i?(c=i,[4,this.load(s)]):[3,3];case 2:return c.apply(void 0,[u.sent()]),[3,6];case 3:return 2!==a?[3,5]:[4,this.cvt(e,t,o,i)];case 4:return u.sent(),[3,6];case 5:4!==a&&8!==a||setTimeout((function(){return p(l,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,this.repeatQuery(e,t,o,r,i)];case 1:return n.sent(),[2]}}))}))}),2e3),u.label=6;case 6:return[2]}}))}))},e.prototype.queryStatus=function(e,t){return p(this,void 0,void 0,(function(){var o,r,i,n,a,s;return f(this,(function(c){switch(c.label){case 0:return o=d(d({},this.config),t?{task_id:t}:{file_hash:e,file_type:16,expect_file_type:16}),[4,this.axiosInstance({method:"post",url:this.domains.query,timeout:3e4,data:o})];case 1:return r=c.sent().data,i=r.ret,n=r.status,a=r.file_id,s=r.oss,0===i.code?[2,{status:n,file_id:a,oss:s}]:[2]}}))}))},e.prototype.upload=function(e,t,o,r,i,n,a){return p(this,void 0,void 0,(function(){var s,c,l;return f(this,(function(u){switch(u.label){case 0:return s=e.host+"/"+e.object_name+"?."+i,c=Object(h.b)(e),(l=new FormData).append("OSSAccessKeyId",c.OSSAccessKeyId),l.append("x-oss-security-token",c.securityToken),l.append("signature",c.signature),l.append("policy",c.policy),l.append("successActionStatus",c.successActionStatus),l.append("key",c.objectName),l.append("file",t),l.append("name",o),[4,this.axiosInstance({method:"post",url:c.url,data:l,timeout:6e5,onUploadProgress:function(e){if(n){var t=e.total,i=e.loaded;n({fileName:o,fileHash:r,uploadPercent:Math.floor(i/t*100)})}}})];case 1:return u.sent(),this.cvt(o,r,t.size,void 0),a(s),[2]}}))}))},e.prototype.cvt=function(e,t,o,r){return p(this,void 0,void 0,(function(){var i;return f(this,(function(n){switch(n.label){case 0:return[4,this.axiosInstance({method:"post",url:this.domains.cvt,timeout:3e4,data:d(d({},this.config),{file_name:e,file_hash:t,file_size:o,file_type:16,expect_file_type:16,export_high_quality_images:!1})})];case 1:return 0===(i=n.sent().data).ret.code&&r?[4,this.repeatQuery(e,t,o,i.task_id,r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.load=function(e){return p(this,void 0,void 0,(function(){var t,o;return f(this,(function(r){switch(r.label){case 0:return[4,this.axiosInstance({method:"post",url:this.domains.access,timeout:3e4,data:d(d({},this.config),{file_id:e})})];case 1:if(0===(t=r.sent().data).ret.code)return o=t.file_name.substr(t.file_name.lastIndexOf(".")+1).toLowerCase(),[2,t.original_file_urls[0]+"?."+o];throw{code:t.ret.code,msg:t.ret.message,message:t.ret.message}}}))}))},e}(),m=o(2),_={ModifyMod:"/eduv1/modify_mod",DestroyMod:"/eduv1/destroy_mod",CreateMod:"/eduv1/create_mod",GetMod:"/eduv1/get_mod",GetModList:"/eduv1/get_mod_list",GetPageGraphics:"/eduv1/get_page_graphics",ClearPageGraphics:"/eduv1/clear_page_graphics",DrawPageGraphics:"/eduv1/draw_page_graphics",Sync:"/eduv1/sync",GetRoomAuth:"/eduv1/get_room_auth",GetUserAuth:"/eduv1/get_user_auth"},y=(o(203),o(91),o(73),o(81),o(117),o(37),o(161),o(85),o(277),o(121),o(122),o(123),o(124),o(125),o(126),o(127),o(128),o(278),o(129),o(130),o(131),o(132),o(133),o(134),o(135),o(137),o(138),o(139),o(140),o(141),o(142),o(143),o(144),o(145),o(3)),v=o(6),b=o(0),w=y.a.calStandard.placeWidth,S=function(e,t,o){var r=e[t];e[t]=e[o],e[o]=r},I=function(e,t,o,r){var i=r.charCodeAt(t);e[t]=r.charCodeAt(o),e[o]=i},x=function(e){return btoa(String.fromCharCode.apply(null,e))},E=function(e){var t=unescape(encodeURIComponent(e)).split("").map((function(e){return e.charCodeAt(0)}));return new Uint8Array(t)},P=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},T=function(e){for(var t=e.split(","),o=new Uint8Array(Int32Array.from([+t[0],+t[1]]).buffer),r=0;r<o.length;r+=4)S(o,r,r+3),S(o,r+1,r+2);var i=E(t.slice(2).join(",")),n=new Uint8Array(o.length+i.length);return n.set(o),n.set(i,o.length),n},D=function(e){for(var t=atob(e),o=new Uint8Array(t.length),r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return P(o)},O=function(e,t){var o=e.type,r=e.action,i=e.is_end_draw,n=e.data;if("[object Uint8Array]"==Object.prototype.toString.call(n)&&(n=btoa(Array.prototype.map.call(n,(function(e){return String.fromCharCode(e)})).join(""))),o===b.f.Text)e.data=t?function(e){for(var t=atob(e),o=new Uint8Array(t.length),r=0;r<8;r+=4)I(o,r,r+3,t),I(o,r+1,r+2,t);for(;r<t.length;r++)o[r]=t.charCodeAt(r);var i=new Int32Array(o.slice(0,8).buffer);return i[0]+","+i[1]+","+P(o.slice(8))}(n):x(T(n));else if(o===b.f.Image||o===b.f.BgImage)e.data=t?JSON.parse(D(n)):x(E(JSON.stringify(n)));else if(t)if("[object Array]"==Object.prototype.toString.call(n))e.data=n;else{for(var a=atob(n||""),s=new Uint8Array(a.length),c=0;c<a.length;c+=4)I(s,c,c+3,a),I(s,c+1,c+2,a);e.data=Array.from(new Int32Array(s.buffer)),e.data=e.data.slice(o!==b.f.RealTime&&e.data.length%2?1:0)}else{var l=n.slice();(o!==b.f.Pencil||i||r!==b.a.Create&&r!==b.a.Append)&&l.unshift(l.length/2);for(s=new Uint8Array(Int32Array.from(l).buffer),c=0;c<s.length;c+=4)S(s,c,c+3),S(s,c+1,c+2);e.data=x(s)}},M=function(e,t){var o=e.type,r=e.data,i=e.action,n=e.is_end_draw;if(o===b.f.Text)e.data=t?function(e){for(var t=0;t<8;t+=4)S(e,t,t+3),S(e,t+1,t+2);var o=new Int32Array(e.slice(0,8).buffer);return o[0]+","+o[1]+","+P(e.slice(8))}(r):T(r);else if(o===b.f.Image||o===b.f.BgImage)e.data=t?JSON.parse(P(r)):E(JSON.stringify(r));else if(t){for(var a=r,s=0;s<a.length;s+=4)S(a,s,s+3),S(a,s+1,s+2);e.data=Array.from(new Int32Array(a.slice().buffer)),e.data=e.data.slice(o!==b.f.RealTime&&e.data.length%2?1:0)}else{var c=r.slice();(o!==b.f.Pencil||n||i!==b.a.Create&&i!==b.a.Append)&&c.unshift(c.length/2);for(a=new Uint8Array(Int32Array.from(c).buffer),s=0;s<a.length;s+=4)S(a,s,s+3),S(a,s+1,s+2);e.data=a}},A=function(e,t,o,r,i){var n=r?e*t/o:e*o/t;return r&&i?n:Math.round(n)},C=function(e,t,o){var r=e.type,i=e.px,n=e.py,a=e.x,s=e.y,c=Object(v.j)(e);if(i&&(e.px=A(i,t,w,o,!1)),n&&(e.py=A(n,t,w,o,!1)),e.x=A(a||0,t,w,o,!1),e.y=A(s||0,t,w,o,!1),r!==b.f.BgImage)if(r===b.f.Text){var l=e.data.split(",");l[0]=A(+l[0],t,w,o,c)+"",l[1]=A(+l[1],t,w,o,c)+"",e.data=l.join(",")}else if(r===b.f.Image){var u;if(o)(u=e.data).x=A(u.x,t,w,o,c),u.y=A(u.y,t,w,o,c),u.ex=A(u.ex,t,w,o,c),u.ey=A(u.ey,t,w,o,c),e.initX=u.x,e.initY=u.y,u.x+=e.x,u.y+=e.y,u.ex+=e.x,u.ey+=e.y;else(u=e.data).x=A(u.x,t,w,o,c),u.y=A(u.y,t,w,o,c),u.ex=A(u.ex,t,w,o,c),u.ey=A(u.ey,t,w,o,c),e.data=u}else e.data=e.data.map((function(e){return A(e,t,w,o,c)}))},L=o(7),k=function(){return(k=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},V=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},N=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},H=m.b.bind(null,"wb.s."),B=function(){function e(e,t){this.socket=e,this.module=t,this.docsService=new g}return e.prototype.updateRemoteImageGraphicData=function(e,t){return(e=JSON.parse(JSON.stringify(e))).forEach((function(e){var o=e.type,r=e.action,i=e.x,n=e.y;if(o==b.f.Image&&(!t&&(r==b.a.Update||r==b.a.Create)||t&&r==b.a.Move)){var a=e.data;a.x-=i,a.y-=n,a.ex-=i,a.ey-=n}})),e},e.prototype.posToPageNum=function(e,t,o,r,i,n,a){var s=o.cx,c=o.cy,l=0;return s&&c&&(r+=n,i+=a,l=(l=(l=e===b.o.Horizontal?r<=0?0:Math.floor(r/s):i<=0?0:Math.floor(i/c))>t-1?t-1:l)>99?99:l),l},e.prototype.mapPageNumList=function(e){for(var t=[],o=Math.min.apply(Math,e),r=Math.max.apply(Math,e),i=o;i<=r;i++)t.push(i);return t},e.prototype.judgeGraphicPage=function(e,t){var o=this,r=this.module.getMap(e),i=r.innerDirection,n=r.innerPageSize,a=r.innerPageCount,s=t.type,c=t.x,l=t.y,u=[];switch(s){case b.f.Text:var h=Object(v.q)(t.data),d=h.beginX,p=h.beginY,f=this.posToPageNum(i,a,n,Number(d),Number(p),c,l);u=this.mapPageNumList([f]);break;case b.f.Pencil:case b.f.Line:case b.f.Rect:case b.f.Ellipse:case b.f.Laser:var g=[];t.data.forEach((function(e,t,r){t%2||g.push(o.posToPageNum(i,a,n,r[t],r[t+1],c,l))})),u=this.mapPageNumList(g);break;case b.f.Image:var m=t.data,_=m.x,y=m.y,w=m.ex,S=m.ey,I=this.posToPageNum(i,a,n,_,y,0,0),x=this.posToPageNum(i,a,n,w,S,0,0);u=this.mapPageNumList([I,x]);break;case b.f.BgImage:u.push(0)}return u},e.prototype.checkProtoGraphic=function(e){var t=e.action,o=e.action_type,r=e.graphic_id,i=e.type,n=e.data,a=e.color,s=e.size,c=e.x,l=e.y,u=e.zorder,h=e.attributes,d=e.operate_id,p=e.is_end_draw,f={graphic_id:r,action:t,action_type:o,type:i,is_end_draw:!!p,layer:e.layer||0,zorder:u,creator_id:e.creator_id,operate_id:d};return t===b.a.Create||t===b.a.Append?(f.x=c,f.y=l,f.data=n,f.color=a,f.size=s,i!==b.f.Text&&i!==b.f.Pencil||(f.attributes=h)):t===b.a.Update?(f.x=c,f.y=l,f.data=n,i!==b.f.Image&&(f.color=a,f.size=s),i!==b.f.Text&&i!==b.f.Pencil||(f.attributes=h)):t===b.a.Move&&(f.x=c,f.y=l),i!==b.f.Pencil||p||t!==b.a.Create&&t!==b.a.Append||(f.type=b.f.RealTime),f},e.prototype.mapDrawPages=function(e,t){var o=this,r=this.module.getMap(e);if(!r)return[];var i=this.socket.isSendPB,n=r.width,a=[],s=[];t.forEach((function(t){var c=o.judgeGraphicPage(e,t);t.color=Object(v.s)(t.color,!1),C(t,n,!1),i?M(t,!1):O(t,!1);var l=!1,u=o.checkProtoGraphic(t);c.forEach((function(e){s.includes(e)||s.push(e);var o=r.graphicListSeqs[e],i=k({},u);l&&t.type===b.f.RealTime&&t.action===b.a.Append&&(i.data=""),a.push({page:e,graphic_list_seq:o,draw_list:[i]}),l=!0}))}));var c=[];return s.forEach((function(e){var t={page:e,draw_list:[]};a.forEach((function(o){o.page===e&&(t.draw_list=t.draw_list.concat(o.draw_list),t.graphic_list_seq=o.graphic_list_seq)})),c.push(t)})),c},e.prototype.handleClearRsp=function(e,t,o,r,i){var n=o.header,a=o.body,s=n.code,c=n.message;if(0===s){var l=a.pages,u=a.graphic_list_seqs,h={};l&&l.forEach((function(e,t){return h[e]=u[t]})),m.a.info(H("gra.update_seq"),JSON.stringify({whiteboardID:e,graphicListSeqs:h,body:a,actionMsg:"clear cb success"})),this.module.updateMapByGraphicListSeqs(a.mod_id,h),this.module.updateMap({whiteboardID:e,operateTimes:0}),this.module.clearGraphicMap(),r(e)}else{var d=this.module.getMap(e);if(d&&++d.operateTimes<5)this.clearViewHandle(e,t,r,i);else{var p=Object(L.b)(s,c);m.a.error(H("mod.clear_cb"),JSON.stringify(p)),i(p)}}},e.prototype.handleUpdateToRemoteRsp=function(e,t,o,r,i){var n=o.header,a=o.body,s=n.code,c=n.message;if(0===s){var l=a.pages,u=a.graphic_list_seqs,h={};l&&l.forEach((function(e,t){return h[e]=u[t]})),m.a.info(H("gra.update_seq"),JSON.stringify({whiteboardID:e,graphicListSeqs:h,actionMsg:"draw cb success"})),this.module.updateMapByGraphicListSeqs(a.mod_id,h),this.module.updateGraphicMap(e,t),r()}else{var d=Object(L.b)(s,c);m.a.error(H("gra.draw_cb"),JSON.stringify(d)),i(d)}},e.prototype.clearViewHandle=function(e,t,o,r){return V(this,void 0,void 0,(function(){var i;return N(this,(function(n){switch(n.label){case 0:return[4,this.socket.queueWSCmdHandler(_.ClearPageGraphics,{mod_id:e,layers:t})];case 1:return i=n.sent(),this.handleClearRsp(e,t,i,o,r),[2]}}))}))},e.prototype.updateToRemoteHandle=function(e,t,o,r){return V(this,void 0,void 0,(function(){var i,n,a,s,c,l,u;return N(this,(function(h){switch(h.label){case 0:return t=this.updateRemoteImageGraphicData(t),i=this.updateRemoteImageGraphicData(t,!0),(n={mod_id:e,draw_pages:this.mapDrawPages(e,JSON.parse(JSON.stringify(t)))}).draw_pages.length?[4,this.socket.checkSendLength(n)]:(r(Object(L.b)(b.i.ZegoWhiteboardViewErrorGraphicModifyFail)),[2]);case 1:return a=h.sent(),t.length>1&&a?(s=b.i.ZegoWhiteboardViewErrorGraphicNumLimit,c=Object(L.b)(s),r(c),m.a.error(H("gra.draw"),JSON.stringify(k(k({},c),{size:a}))),[2]):(l={mod_id:e,draw_pages:this.mapDrawPages(e,t)},[4,this.socket.queueWSCmdHandler(_.DrawPageGraphics,l)]);case 2:return u=h.sent(),this.handleUpdateToRemoteRsp(e,i,u,o,r),[2]}}))}))},e.prototype.clearView=function(e,t){var o=this;return new Promise((function(r,i){o.clearViewHandle(e,t,r,i)}))},e.prototype.uploadImage=function(e,t){if(!this.docsService.isConfiged()){var o=m.a.getConfig(),r=o.appid,i=o.userid,n=o.token,a=o.isTestEnv;this.docsService.setConfig({appID:r,userID:i,token:n,isTestEnv:a})}return this.docsService.uploadImage(e,t)},e.prototype.getGraphicIsEndDraw=function(e){try{var t=this.module.getGraphicItem(e),o=t.is_end_draw,r=1e3*t.server_timestamp-this.socket.getServerTimeOffset();return!!(o||(new Date).getTime()<r)}catch(e){return!0}},e.prototype.isAppendPathLimit=function(e,t){(t=JSON.parse(JSON.stringify(t))).action=b.a.Update,t.action_type=b.b.Single,t.is_end_draw=!0,t.data=t.oldData;var o=t.data.length;return this.socket.checkSendLength({mod_id:e,draw_pages:this.mapDrawPages(e,[t])}).then((function(e){return e&&m.a.warn(H("gra.draw_limit"),JSON.stringify({size:e,length:o})),!!e}))},e}(),j=(o(87),o(114),o(74),o(168),o(165),o(175),o(93),o(174),o(220),o(177),o(274),o(50),o(5)),z=o(92);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e[e.Initiative=1]="Initiative",e[e.Inner=2]="Inner"}(r||(r={})),function(e){e[e.InProgress=1]="InProgress",e[e.Pending=2]="Pending",e[e.Resolve=3]="Resolve",e[e.Reject=4]="Reject"}(i||(i={})),function(e){e[e.success=0]="success",e[e.error=1]="error"}(n||(n={})),function(e){e[e.SetMod=1]="SetMod",e[e.ClearPageGraphics=2]="ClearPageGraphics",e[e.DrawPageGraphics=3]="DrawPageGraphics",e[e.SetRoomAuth=4]="SetRoomAuth",e[e.SetUserAuth=5]="SetUserAuth"}(a||(a={})),function(e){e[e.Add=1]="Add",e[e.Removed=2]="Removed",e[e.Modify=3]="Modify"}(s||(s={})),function(e){e[e.Scroll=1]="Scroll",e[e.AppendH5Extra=2]="AppendH5Extra",e[e.Scale=3]="Scale",e[e.Other=4]="Other"}(c||(c={}));var R=function(){return(R=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},W=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},Z=m.b.bind(null,"wb.s."),G=function(){function e(e){this.modListSeq=0,this.modIdMapData={},this.zorderSeq=1,this.zorderStep=Object(v.f)(),this.modLimit=50,this.defaultModListSeq=0,this.marker="",this.defaultModType=1,this.defaultModSubtype=1,this.defaultModDeleteFlag=0,this.defaultHPercent=0,this.defaultVPercent=0,this.defaultModReserve=1,this.graphicLimit=30,this.graphicMap={},this.userAuthMap={roomSeq:0,userSeq:0,syncTaskId:0,model:Object.freeze({scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1})},this.socket=e}return e.prototype.updateModifyModTaskList=function(e){var t=e.status,o=e.push,r=e.setModAction,n=e.data,a=this.getMap(n.mod_id);if(t===i.InProgress)a.modifyModTaskList.splice(0,a.modifyModTaskList.length,e);else if(t===i.Pending)if(o)a.modifyModTaskList.push(e);else{a.modifyModTaskList.reverse();var s=a.modifyModTaskList.findIndex((function(e){return!e.push&&e.status===i.Pending}));if(-1!==s&&(s=a.modifyModTaskList.length-s-1,a.modifyModTaskList.reverse()),-1===s)a.modifyModTaskList.push(e);else{var l=a.modifyModTaskList[s];l.setModAction===c.AppendH5Extra?(c.Other,Object.assign(l.data,e.data)):l.setModAction===c.Scroll?r===c.Other||r===c.Scroll?Object.assign(l.data,e.data):a.modifyModTaskList.splice(s+1,0,e):l.setModAction===c.Scale?r===c.Scale?Object.assign(l.data,e.data):a.modifyModTaskList.splice(s+1,0,e):(Object.assign(l.data,e.data),l.setModAction=e.setModAction)}}m.a.warn(Z("mod.update_task_list"),JSON.stringify(a.modifyModTaskList))},e.prototype.getOldModInfoByModifyModOption=function(e){var t=this.getMap(e.mod_id),o={};return Object.keys(e).forEach((function(e){"mod_title"===e?o[e]=t.name:"mod_extra"===e?o[e]=t.modExtra:"mod_reserve"===e?o[e]=t.pptStep:"mod_horizontal_percent"===e?o[e]=t.horizontalPercent:"mod_vertical_percent"===e?o[e]=t.verticalPercent:"mod_scale"===e&&(o[e]=t.modScale)})),o},e.prototype.setModBefore=function(e,t){var o=t.mod_id,r=this.getModSendSwitch(o),n={setModAction:e,data:t,push:!1,status:r?i.InProgress:i.Pending};return this.updateModifyModTaskList(n),r},e.prototype.cachePushModifyModTaskHandle=function(e){var t,o=this;return e.forEach((function(e){var r=e.pushModSeq,i=e.data,n=i.mod_id;r>o.getMap(n).modSeq&&o.updateMap({modSeq:r,whiteboardID:n});var a=o.updateMapByModifyModOption(i,r,!0);a&&(t=t||{},Object.assign(t,a))})),t},e.prototype.setModRspAfter=function(e){var t=e.setModOption,o=e.sendResultType,r=e.setModAction,a=t.mod_id,s=this.getMap(a),l=e.errorData;if(o===n.success)m.a.warn(Z("mod.set_mod_cb"),"success");else{var u=this.getOldModInfoByModifyModOption(t);if(r===c.Scroll){var h=R(R({},l),{whiteboardID:a,horizontalPercent:u.mod_horizontal_percent,verticalPercent:u.mod_vertical_percent,step:u.mod_reserve});j.e.emit(j.c.Scroll,h),m.a.warn(Z("mod.set_mod_cb"),JSON.stringify(h))}else if(r===c.AppendH5Extra){3===(null==l?void 0:l.code)&&(l=Object(L.b)(z.a.ZegoWhiteboardViewErrorAnimationInfoLimit));var d=u.mod_extra.includes("H5_record");d&&(u.mod_extra=JSON.parse(u.mod_extra),u.mod_extra.H5_record.t=102,u.mod_extra=JSON.stringify(u.mod_extra));h=R(R({},l),{modExtra:u.mod_extra,whiteboardID:a,isH5:d});j.e.emit(j.c.AppendH5Extra,h),m.a.warn(Z("mod.set_mod_cb"),JSON.stringify(h))}else if(r===c.Scale){h=R(R({},l),{whiteboardID:a,mod_scale:u.mod_scale});j.e.emit(j.c.Scale,h),m.a.warn(Z("mod.set_mod_cb"),JSON.stringify(h))}}m.a.warn(Z("mod.set_mod_cb_tasks"),JSON.stringify(s.modifyModTaskList)),s.modifyModTaskList.splice(0,1);var p=s.modifyModTaskList.filter((function(e){return e.push})),f=this.cachePushModifyModTaskHandle(p);m.a.warn(Z("mod.set_mod_cb_push_map"),f?JSON.stringify(f):null),s.modifyModTaskList=s.modifyModTaskList.filter((function(e){return!e.push}));var g=s.modifyModTaskList[0];g&&(f?this.cacheCallback(f):(g.status=i.InProgress,this.setModHandle(g.setModAction,g.data)))},e.prototype.cacheCallback=function(e){var t=e.is_modify_mod_scale,o=e.is_modify_mod_extra,r=e.is_modify_mod_horizontal_percent,n=e.is_modify_mod_vertical_percent,a=e.is_modify_mod_reserve,s=e.mod_extra,l=e.mod_id,u=this.getMap(l),h=u.modifyModTaskList[0];if(h){var d=h.setModAction,p=!1;if(d===c.Scroll)if(r||n||a)p=!0;else{var f={code:1112,msg:"",whiteboardID:l,horizontalPercent:u.horizontalPercent,verticalPercent:u.verticalPercent,step:u.pptStep};j.e.emit(j.c.Scroll,f),m.a.warn(Z("mod.set_mod_cb_cache"),JSON.stringify(f)),u.modifyModTaskList.splice(0,1),this.cacheCallback(e)}else if(d===c.AppendH5Extra)if(o&&s){var g=u.modExtra.includes("H5_record");f={code:1112,msg:"",modExtra:u.modExtra,whiteboardID:l,isH5:g};j.e.emit(j.c.AppendH5Extra,f),m.a.warn(Z("mod.set_mod_cb_cache"),JSON.stringify(f)),u.modifyModTaskList.splice(0,1),this.cacheCallback(e)}else p=!0;else if(d===c.Scale)if(t){f={code:1112,msg:"",whiteboardID:l,mod_scale:u.modScale};j.e.emit(j.c.Scale,f),m.a.warn(Z("mod.set_mod_cb_cache"),JSON.stringify(f)),u.modifyModTaskList.splice(0,1),this.cacheCallback(e)}else p=!0;else p=!0;p&&(m.a.warn(Z("mod.set_mod_cb_cache"),"next set mod"),h.status=i.InProgress,this.setModHandle(h.setModAction,h.data))}},e.prototype.getModSendSwitch=function(e){var t=this.modIdMapData[e];return!t||!t.modifyModTaskList.some((function(e){return!e.push}))},e.prototype.transModInfo=function(e,t,o){var r={room_id:"",zorder:0},i={x:0,y:0,z:0,w:0,h:0,ar_w:1,ar_h:1},n={scale:1,ofs_x:0,ofs_y:0};if(e)try{var a=JSON.parse(e),s=a.file_info;s&&(a.file_info={fileID:s.file_id,fileName:s.file_name,fileType:+s.file_type}),r=a}catch(t){m.a.error(Z("mod.trans"),JSON.stringify({error:t.message,modContentStr:e}))}if(t)try{i=JSON.parse(t)}catch(e){m.a.error(Z("mod.trans"),JSON.stringify({error:e.message,modPosStr:t}))}if(o)try{(n=JSON.parse(o)).scale=Math.max(n.scale,1)}catch(e){}return{modContent:r,modPos:i,modScale:n}},e.prototype.checkModInfo=function(e){var t=this.getMap(e);return!!(t&&t.width&&t.height)&&t},e.prototype.deleteMap=function(e){delete this.modIdMapData[e]},e.prototype.getModPropSeq=function(e){return this.modIdMapData[e].modPropSeq},e.prototype.decodeH5Extra=function(e){return(e=e||"").includes("H5_")?e:D(e)},e.prototype.checkH5Extra=function(e,t,o){try{var r="",i=this.getH5Extra(e,!0);if(i){var n=JSON.parse(i);if(n.H5_target)if(t){var a=JSON.parse(t),s=n.H5_target,c=s.s,l=s.p,u=s.e,h=a.H5_target,d=h.s,p=h.p,f=h.e;if(d===c&&p===l)if(o)if(f.length<u.length)r=t;else if(f.length>u.length)a.H5_target.e=f.slice(u.length),r=JSON.stringify(a);else{var g=[];f.forEach((function(e,t){u.findIndex((function(t){return e.id===t.id}))!==t&&g.push(e)}));var m=f[f.length-1];r=g.length?(a.H5_target.e=g,JSON.stringify(a)):m.s?(a.H5_target.e=[m],JSON.stringify(a)):""}else{var _=u.findIndex((function(e){return e.s&&f[0].id===e.id}));-1!==_&&u.splice(_,1),n.H5_target.e=u.concat(f),r=JSON.stringify(n)}else r=t}else r="";else r=t}else r=t;return r}catch(e){return""}},e.prototype.updateMapByModifyModOption=function(e,t,o){var r,i=e.mod_id,n=e.mod_title,a=e.mod_horizontal_percent,s=e.mod_vertical_percent,c=e.mod_reserve,l=e.mod_scale,u=e.mod_content,h=e.is_modify_mod_horizontal_percent,d=e.is_modify_mod_vertical_percent,p=e.is_modify_mod_reserve,f=e.is_modify_mod_title,g=e.is_modify_mod_extra,_=e.is_modify_mod_scale,y=e.is_modify_mod_content,v=this.decodeH5Extra(e.mod_extra),b=this.getModPropSeq(i),w=b.mod_horizontal_percent,S=b.mod_vertical_percent,I=b.mod_reserve,x=b.mod_title,E=b.mod_extra,P=b.mod_scale,T=b.mod_content,D=this.getMap(i),O={isPushScroll:!1,horizontalPercent:D.horizontalPercent,verticalPercent:D.verticalPercent,pptStep:D.pptStep};if(h&&t>w){O.isPushScroll=!0,O.horizontalPercent=+a||0;var M={whiteboardID:i,horizontalPercent:O.horizontalPercent,modPropSeq:{mod_horizontal_percent:t}};m.a.info(Z("mod.update_h_percent"),JSON.stringify(M)),this.updateMap(M)}if(d&&t>S){O.isPushScroll=!0,O.verticalPercent=+s||0,O.pptStep=+c||1;var A={whiteboardID:i,verticalPercent:O.verticalPercent,pptStep:O.pptStep,modPropSeq:{mod_vertical_percent:t}};m.a.info(Z("mod.update_v_percent"),JSON.stringify(A)),this.updateMap(A)}if(p&&t>I){O.isPushScroll=!0,O.pptStep=+c||1;var C={whiteboardID:i,pptStep:O.pptStep,modPropSeq:{mod_reserve:t}};m.a.info(Z("mod.update_step"),JSON.stringify(C)),this.updateMap(C)}if(O.isPushScroll&&o&&(this.pushScrollHandle(i,O.horizontalPercent,O.verticalPercent,O.pptStep),this.updateMap({whiteboardID:i,modExtra:""}),r=e),f&&t>x){var L={whiteboardID:i,name:n,modPropSeq:{mod_title:t}};m.a.info(Z("mod.update_name"),JSON.stringify(L)),this.updateMap(L)}if(g&&t>E){var k={whiteboardID:i,modExtra:v,modPropSeq:{mod_extra:t}};if(o){var V=this.checkH5Extra(i,v,!0);V&&(this.pushExtraHandle(i,V),r=e)}m.a.info(Z("mod.update_h5extra"),JSON.stringify(k)),this.updateMap(k)}if(_&&t>P){var N=JSON.parse(l);k={whiteboardID:i,modScale:N,modPropSeq:{mod_scale:t}};o&&this.pushScaleHandle(i,N.scale,N.ofs_x,N.ofs_y),m.a.info(Z("mod.update_scale"),JSON.stringify(k)),this.updateMap(k)}if(y&&t>T){k={whiteboardID:i,zorder:JSON.parse(u).zorder,modPropSeq:{mod_content:t}};m.a.info(Z("mod.update_content"),JSON.stringify(k)),this.updateMap(k),o&&this.pushSwitchViewHandle()}return r},e.prototype.updateMapByMod=function(e){var t=this.transModInfo(e.mod_content,e.mod_pos,e.mod_scale),o=t.modContent,r=t.modPos,i=t.modScale;this.updateMap({whiteboardID:e.mod_id,name:e.mod_title,aspectWidth:r.ar_w,aspectHeight:r.ar_h,roomID:o.room_id,uniqueID:o.unique_id,zorder:o.zorder,fileInfo:Object.freeze(o.file_info),createTime:e.mod_create_time?+e.mod_create_time:0,horizontalPercent:e.mod_horizontal_percent||0,verticalPercent:e.mod_vertical_percent||0,pptStep:e.mod_reserve||1,modScale:i,modType:e.mod_type,modSubtype:e.mod_subtype,modSeq:e.mod_seq,modExtra:this.decodeH5Extra(e.mod_extra),outPageCount:o.whiteboard_page_count,outZorder:o.zorder,modPropSeq:{mod_title:e.mod_seq,mod_type:e.mod_seq,mod_subtype:e.mod_seq,mod_pos:e.mod_seq,mod_status:e.mod_seq,mod_content:e.mod_seq,mod_extra:e.mod_seq,mod_reserve:e.mod_seq,mod_delete_flag:e.mod_seq,mod_horizontal_percent:e.mod_seq,mod_vertical_percent:e.mod_seq,mod_scale:e.mod_seq}})},e.prototype.updateModListSeq=function(e){e&&(this.modListSeq=e)},e.prototype.splitPage=function(e,t,o){var r=this.getMap(e);if(r&&t&&o){var i=1,n=0,a=0;t>=o?(n=a=o,(i=Math.ceil(t/o))>100&&(n=Math.ceil(t/99),i=100),r.innerDirection=z.e.Horizontal):(a=n=t,(i=Math.ceil(o/t))>100&&(a=Math.ceil(o/99),i=100),r.innerDirection=z.e.Vertical),r.innerPageCount=i;for(var s=0;s<i;s++)r.graphicListSeqs[s]||(r.graphicListSeqs[s]=0),r.pullMarks[s]=!1;r.innerPageSize.cx=n,r.innerPageSize.cy=a,m.a.info(Z("mod.split_page"),JSON.stringify({whiteboardID:e,width:t,height:o,innerPageCx:n,innerPageCy:a,innerPageCount:i}))}},e.prototype.transGraphicList=function(e,t,o){var r=this;if(t&&t.length){var i=this.socket.isSendPB;t.forEach((function(t){e.some((function(e){return e.graphic_id===t.graphic_id}))||(t.zorder>r.zorderSeq&&(r.zorderSeq=t.zorder),i?M(t,!0):O(t,!0),r.setGraphicItem(t),C(t,o,!0),t.color=Object(v.s)(t.color,!0),e.push(t))}))}},e.prototype.pushScrollHandle=function(e,t,o,r){j.e.emit(j.c.PushScroll,e,t,o,r)},e.prototype.pushScaleHandle=function(e,t,o,r){j.e.emit(j.c.PushScale,e,t,o,r)},e.prototype.pushExtraHandle=function(e,t){j.e.emit(j.c.PushH5ExtraAppended,e,t)},e.prototype.pushSwitchViewHandle=function(){var e=this.getCurrentActivitedView(),t=e[0],o=e[1];j.e.emit(j.d.RemoteSwitchMod,t,o)},e.prototype.pushSetModHandle=function(e){var t=e.mod_list_seq,o=e.action_list;if(t>=this.modListSeq){this.updateModListSeq(t);var r=o[0],i=r.action;i===s.Removed?this.pushRemovedMod(r.mod_id):i===s.Add?this.pushAddMod(r):i===s.Modify&&this.pushModifyMod(r)}else m.a.warn(Z("mod.remote"),JSON.stringify({localModListSeq:this.modListSeq,remoteModListSeq:t,msg:"throw away"}))},e.prototype.pushClearPageGraphicsHandle=function(e){var t=e.action_seqs,o=e.pages,r=e.layers,i=e.mod_id;if(this.checkModInfo(i)){var n={};o&&o.forEach((function(e,o){return n[e]=t[o]})),m.a.info(Z("gra.update_seq"),JSON.stringify({whiteboardID:i,graphicListSeqs:n,layers:r,actionMsg:"remote clear"})),this.updateMapByGraphicListSeqs(i,n),this.updateMap({whiteboardID:i,operateTimes:0}),j.e.emit(j.c.PushClearPageGraphics,i,r)}},e.prototype.pushDrawPageGraphicsHandle=function(e){var t=this,o=e.page_graphics,r=e.mod_id,i=this.checkModInfo(r);if(i){m.a.info(Z("gra.remote_draw"),JSON.stringify({drawPages:o}));var n=i.width,a={},s=[],c=[];o.forEach((function(e){var o=e.del_graphic_id_list,r=e.graphic_list,l=e.action_seq,u=e.page;(!i.graphicListSeqs[u]||l>i.graphicListSeqs[u])&&(t.transGraphicList(s,r,n),o&&c.push.apply(c,o),a[u]=l)})),m.a.info(Z("gra.update_seq"),JSON.stringify({whiteboardID:r,graphicListSeqs:a,actionMsg:"remote_draw"})),this.updateMapByGraphicListSeqs(r,a),j.e.emit(j.c.PushDrawPageGraphics,r,s,c)}},e.prototype.pushAddMod=function(e){var t=e.mod_id;m.a.info(Z("mod.remote_add"),JSON.stringify({whiteboardID:t})),this.updateMapByMod(e),j.e.emit(j.c.PushAddMod,t,this.getMap(t).uniqueID)},e.prototype.pushRemovedMod=function(e){var t=this.getMap(e).uniqueID;this.deleteMap(e),j.e.emit(j.c.PushRemovedMod,e,t)},e.prototype.pushModifyMod=function(e){e.mod_horizontal_percent||(e.mod_horizontal_percent=0),e.mod_vertical_percent||(e.mod_vertical_percent=0);var t=e.mod_id,o=e.mod_seq,r=e.mod_title,n=e.mod_horizontal_percent,a=e.mod_vertical_percent,s=e.mod_reserve,c=e.mod_extra,l=e.mod_scale,u=e.mod_content,h=e.is_modify_mod_vertical_percent,d=e.is_modify_mod_horizontal_percent,p=e.is_modify_mod_reserve,f=e.is_modify_mod_title,g=e.is_modify_mod_extra,_=e.is_modify_mod_scale,y=e.is_modify_mod_content,v=this.getMap(t);if(v)if(this.getModSendSwitch(t)){if(m.a.info(Z("mod.remote_modify"),"immediate update"),o>v.modSeq){var b={whiteboardID:t,modSeq:o};this.updateMap(b)}this.updateMapByModifyModOption(e,o,!0)}else{m.a.info(Z("mod.remote_modify"),"cache");var w={mod_id:t};f&&Object.assign(w,{mod_title:r,is_modify_mod_title:f}),g&&Object.assign(w,{mod_extra:c,is_modify_mod_extra:g}),d&&Object.assign(w,{mod_horizontal_percent:n,is_modify_mod_horizontal_percent:d}),h&&Object.assign(w,{mod_vertical_percent:a,is_modify_mod_vertical_percent:h,mod_reserve:s,is_modify_mod_reserve:p}),p&&Object.assign(w,{mod_reserve:s,is_modify_mod_reserve:p}),_&&Object.assign(w,{mod_scale:l,is_modify_mod_scale:_}),y&&Object.assign(w,{mod_content:u,is_modify_mod_content:y}),this.updateModifyModTaskList({status:i.Pending,data:w,push:!0,pushModSeq:o})}},e.prototype.clearPullMarks=function(e){var t=this;m.a.info(Z("mod.clear_pull_mark"),"init pull mark");var o=e?[e]:Object.keys(this.modIdMapData);Object.values(o).forEach((function(e){var o=t.modIdMapData[e];o&&Object.keys(o.pullMarks).forEach((function(e){o.pullMarks[+e]=!1}))}))},e.prototype.createModInfo=function(e){var t={};if(e.fileInfo){var o=e.fileInfo,r=o.fileID,i=o.fileName,n=o.fileType;t.file_info={file_id:r,file_name:i,file_type:n}}e.pageCount&&(t.whiteboard_page_count=e.pageCount);var a=e.uniqueID;a&&(t.unique_id=a,t.zorder=Date.now()+this.socket.getServerTimeOffset());return{modContent:t,modPos:{x:0,y:0,z:0,w:0,h:0,ar_w:e.aspectWidth,ar_h:e.aspectHeight},modScale:{scale:1,ofs_x:0,ofs_y:0}}},e.prototype.compareHandle=function(e,t){var o=this;m.a.info(Z("mod.compare"),"compare local with server");var i=Object.keys(this.modIdMapData);t.forEach((function(t){var n=t.mod_id,a=t.mod_horizontal_percent,s=t.mod_vertical_percent,c=t.mod_reserve;if(n+="",a=a||0,s=s||0,c=c||1,Object.assign(t,{mod_horizontal_percent:a,mod_vertical_percent:s,mod_reserve:c}),-1===i.indexOf(n))e===r.Inner?o.pushAddMod(t):o.updateMapByMod(t);else{var l=o.getMap(n),u=l.horizontalPercent,h=l.verticalPercent,d=l.pptStep;o.updateMapByMod(t),u===a&&h===s&&c===d||o.pushScrollHandle(n,a,s,c)}})),i.forEach((function(i){-1===t.findIndex((function(e){return e.mod_id===i}))&&(e===r.Inner?o.pushRemovedMod(i):o.deleteMap(i))}))},e.prototype.handleGetModListDetailsRsp=function(e,t){var o=e.header,r=e.body,i=o.code,n=o.message;if(0===i){var a=r.mod_list_seq,s=r.mod_list;return a&&this.updateModListSeq(a),m.a.info(Z("mod.update_seq"),JSON.stringify({modListSeq:a,actionMsg:"get list cb success"})),(s=s||[]).sort((function(e,t){return+t.mod_create_time-+e.mod_create_time})),this.compareHandle(t,s),Promise.resolve(s)}var c=Object(L.b)(i,n);return m.a.error(Z("mod.get_list_cb"),JSON.stringify(c)),Promise.reject(c)},e.prototype.handleDestroyModRsp=function(e){var t=e.header,o=e.body,r=t.code,i=t.message;if(0===r){var n=o.mod_list_seq,a=o.mod_id;return this.updateModListSeq(n),m.a.info(Z("mod.update_seq"),JSON.stringify({modListSeq:n,actionMsg:"destroy cb success"})),this.deleteMap(a),Promise.resolve()}var s=Object(L.b)(r,i);return m.a.error(Z("mod.destroy_cb"),JSON.stringify(s)),Promise.reject(s)},e.prototype.handleCreateModRsp=function(e){return F(this,void 0,void 0,(function(){var t,o,r,i,n,a,s,c,l,u;return W(this,(function(h){switch(h.label){case 0:if(t=e.header,o=e.body,r=t.code,i=t.message,0!==r)return[3,5];n=o.mod_list_seq,a=o.mod_id,this.updateModListSeq(n),m.a.info(Z("mod.update_seq"),JSON.stringify({modListSeq:n,actionMsg:"create cb success"})),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.getModInfo([a])];case 2:return s=h.sent(),c=s[0],this.updateMapByMod(c),[2,c.mod_id];case 3:return l=h.sent(),[2,Promise.reject(l)];case 4:return[3,6];case 5:return u=Object(L.b)(3===r?z.a.ZegoWhiteboardViewErrorViewNameLimit:r,i),m.a.error(Z("mod.create_cb"),JSON.stringify(u)),[2,Promise.reject(u)];case 6:return[2]}}))}))},e.prototype.handleGetModInfoRsp=function(e){var t=e.header,o=e.body,r=t.code,i=t.message;if(0===r){var n=o.mod_list;return m.a.info(Z("mod.get_info_cb"),"success"),Promise.resolve(n||[])}var a=Object(L.b)(r,i);return m.a.error(Z("mod.get_info_cb"),JSON.stringify(a)),Promise.reject(a)},e.prototype.handleSetModRsp=function(e,t,o){var r=o.header,i=o.body,a=r.code,s=r.message;if(0===a){var c=i.mod_list_seq,l=i.mod_seq,u=i.mod_id;this.modListSeq=c,this.updateMap({whiteboardID:u,modSeq:l}),this.updateMapByModifyModOption(t,l,!1),this.setModRspAfter({setModAction:e,setModOption:t,sendResultType:n.success})}else this.setModRspAfter({setModAction:e,setModOption:t,sendResultType:n.error,errorData:3===a?{code:a,msg:s}:Object(L.b)(a,s)})},e.prototype.handleGetPageGraphicsListRsp=function(e,t){var o=this,r=t.header,i=t.body,n=r.code,a=r.message;if(0===n){var s=this.checkModInfo(e);if(!s)return;var c=s.width,l=i.pages,u=[],h=[],d={},p=[],f=[];l.forEach((function(t){var r=t.page,i=t.ret_graphic_list_seq,n=t.svr_graphic_list_seq,a=t.graphic_list,s=t.del_graphic_id_list;o.transGraphicList(p,a,c),s&&f.push.apply(f,s),d[r]=n,n!==i&&0!==i?(u.push(r),h.push(i)):o.getMap(e).pullMarks[r]=!0})),m.a.info(Z("gra.update_seq"),JSON.stringify({whiteboardID:e,graphicListSeqs:d,actionMsg:"get list cb success"})),this.updateMapByGraphicListSeqs(e,d),j.e.emit(j.c.GetPageGraphicsList,e,p,f),u.length&&(m.a.info(Z("gra.get_list_cb"),"increment get"),this.getPageGraphicsList(e,u,h))}else{var g=Object(L.b)(n,a);m.a.error(Z("gra.get_list_cb"),JSON.stringify(g))}},e.prototype.getModInfo=function(e){return F(this,void 0,void 0,(function(){var t;return W(this,(function(o){switch(o.label){case 0:return[4,this.socket.queueWSCmdHandler(_.GetMod,{mod_id_list:e})];case 1:return t=o.sent(),[2,this.handleGetModInfoRsp(t)]}}))}))},e.prototype.getModListDetails=function(e,t){return void 0===e&&(e=r.Initiative),void 0===t&&(t=this.defaultModListSeq),F(this,void 0,void 0,(function(){var o;return W(this,(function(r){switch(r.label){case 0:return[4,this.socket.queueWSCmdHandler(_.GetModList,{mod_list_seq:t,limit:this.modLimit,marker:this.marker,mod_type:this.defaultModType})];case 1:return o=r.sent(),[2,this.handleGetModListDetailsRsp(o,e)]}}))}))},e.prototype.setModHandle=function(e,t){return F(this,void 0,void 0,(function(){var o,r;return W(this,(function(i){switch(i.label){case 0:return o=t.mod_id,[4,this.socket.queueWSCmdHandler(_.ModifyMod,R({mod_seq:this.getMap(o).modSeq},t))];case 1:return r=i.sent(),this.handleSetModRsp(e,t,r),[2]}}))}))},e.prototype.setMod=function(e,t){this.setModBefore(e,t)&&this.setModHandle(e,t)},e.prototype.checkScroll=function(e,t,o,r){var i=this.getMap(e);if(i){var n=i.horizontalPercent,a=i.verticalPercent,s=i.pptStep,c=!1,l={mod_id:e};return t!==n&&(l.mod_horizontal_percent=t,l.is_modify_mod_horizontal_percent=!0,c=l),o===a&&r===s||(l.mod_vertical_percent=o,l.is_modify_mod_vertical_percent=o!==a,l.mod_reserve=r,l.is_modify_mod_reserve=!0,c=l),c}return!1},e.prototype.checkScale=function(e,t,o,r){return!!this.getMap(e)&&{mod_id:e,mod_scale:JSON.stringify({scale:t,ofs_x:o,ofs_y:r}),is_modify_mod_scale:!0}},e.prototype.checkSwitchView=function(e){var t=this.getMap(e);if(t){var o={unique_id:t.uniqueID,whiteboard_page_count:t.outPageCount,zorder:Date.now()+this.socket.getServerTimeOffset()};if(t.fileInfo){var r=t.fileInfo,i=r.fileID,n=r.fileName,a=r.fileType;o.file_info={file_id:i,file_name:n,file_type:a}}return{mod_id:e,mod_content:JSON.stringify(o),is_modify_mod_content:!0}}return!1},e.prototype.getCurrentPages=function(e,t,o){var r,i,n=this.getMap(e),a=n.width,s=n.height,c=n.innerPageSize,l=n.viewWidth,u=n.viewHeight;n.innerDirection===z.e.Horizontal?(r=Math.floor(a*t/c.cx),i=Math.floor((l+a*t)/c.cx)):(r=Math.floor(s*o/c.cy),i=Math.floor((u+s*o)/c.cy));var h=i-r+1;return{minPage:r=Math.max(0,r-h),maxPage:i=(i+=h)>99?99:Math.min(i,n.innerPageCount-1)}},e.prototype.initUserAuthMap=function(){this.userAuthMap.syncTaskId&&window.clearInterval(this.userAuthMap.syncTaskId),this.userAuthMap.roomSeq=0,this.userAuthMap.userSeq=0,this.userAuthMap.syncTaskId=0,this.userAuthMap.model=Object.freeze({scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1}),j.e.emit(j.c.PushAuthChange,{scale:1,scroll:1},{update:1,delete:1,move:1,clear:1,create:1})},e.prototype.getRemoteRoomUserAuth=function(e){return F(this,void 0,void 0,(function(){var t,o,r,i,n,a;return W(this,(function(s){switch(s.label){case 0:return t="room"==e?_.GetRoomAuth:_.GetUserAuth,[4,this.socket.queueWSCmdHandler(t,{})];case 1:return o=s.sent(),r=o.header,i=r.code,n=r.message,0===i?(m.a.info(Z("mod.get_"+e+"_auth_cb"),"success"),[2,o.body]):(a=Object(L.b)(i,n),m.a.error(Z("mod.get_"+e+"_auth_cb"),JSON.stringify(a)),[2,Promise.reject(a)])}}))}))},e.prototype.setUserAuthMap=function(e){if(e.auth_seq=e.auth_seq||0,!(e.auth_seq<=0)&&(e.id_name?this.userAuthMap.userSeq=e.auth_seq:this.userAuthMap.roomSeq=e.auth_seq,e.id_name||0==this.userAuthMap.userSeq)){var t=JSON.parse(JSON.stringify(this.userAuthMap.model)),o={scale:1,scroll:1,update:1,delete:1,move:1,clear:1,create:1},r=e.module_auth||[];o.scale=+r.includes(b.k.Scale),o.scroll=+r.includes(b.k.Scroll),r=e.graphic_auth||[],o.update=+r.includes(b.l.Update),o.delete=+r.includes(b.l.Delete),o.move=+r.includes(b.l.Move),o.clear=+r.includes(b.l.Clear),o.create=+r.includes(b.l.Create),this.userAuthMap.model=Object.freeze(o),this.onPushAuthChange(this.userAuthMap.model,t)}},e.prototype.onPushAuthChange=function(e,t){var o,r;e.scale==t.scale&&e.scroll==t.scroll||(o={scale:e.scale,scroll:e.scroll}),e.update==t.update&&e.delete==t.delete&&e.move==t.move&&e.clear==t.clear&&e.create==t.create||(r={update:e.update,delete:e.delete,move:e.move,clear:e.clear,create:e.create}),j.e.emit(j.c.PushAuthChange,o,r)},e.prototype.pushUserAuthHandle=function(e){var t=this,o=this.socket.getUserID(),r=this.userAuthMap.userSeq;e.user_auth.some((function(e){return e.id_name===o&&e.auth_seq>r&&(t.setUserAuthMap(e),!0)}))},e.prototype.syncRemoteSeq=function(){return F(this,void 0,void 0,(function(){var e,t,o,r,i,n,a=this;return W(this,(function(s){switch(s.label){case 0:return[4,this.socket.queueWSCmdHandler(_.Sync,{})];case 1:return 0===(e=s.sent()).header.code&&(t=e.body,o=t.sync_interval,r=t.room_auth_seq,i=t.user_auth_seq,n=t.mod_list_seq,this.userAuthMap.syncTaskId||(this.userAuthMap.syncTaskId=window.setInterval((function(){a.syncRemoteSeq()}),1e3*(o||30))),this.syncRoomUserAuth(r,i),this.syncModuleHandle(n)),[2]}}))}))},e.prototype.getPageGraphicsList=function(e,t,o){return F(this,void 0,void 0,(function(){var r,i,n;return W(this,(function(a){switch(a.label){case 0:return r=this.getMap(e),i=r.graphicListSeqs,!t.includes(0)&&t.unshift(0),o||(o=t.map((function(e){return r.pullMarks[e]&&i[e]||0}))),o.length<t.length&&o.unshift(i[0]||0),[4,this.socket.queueWSCmdHandler(_.GetPageGraphics,{mod_id:e,pages:t,graphic_list_seqs:o,limit:this.graphicLimit})];case 1:return n=a.sent(),this.handleGetPageGraphicsListRsp(e,n),[2]}}))}))},e.prototype.syncModuleHandle=function(e){m.a.info(Z("mod.get_list_sync"),JSON.stringify({localModListSeq:this.modListSeq,svrModListSeq:e})),e>this.modListSeq&&this.getModListDetails(r.Inner,this.modListSeq?this.modListSeq:this.defaultModListSeq)},e.prototype.syncRoomUserAuth=function(e,t){var o=this;m.a.info(Z("mod.sync_room_user_auth_cb"),JSON.stringify({localRoom:this.userAuthMap.roomSeq,serverRoom:e,localUser:this.userAuthMap.userSeq,serverUser:t})),t=t||0,(e=e||0)>this.userAuthMap.roomSeq&&(this.userAuthMap.roomSeq=e,this.getRemoteRoomUserAuth("room").then((function(e){return o.setUserAuthMap(e)}))),t>this.userAuthMap.userSeq&&(this.userAuthMap.userSeq=t,this.getRemoteRoomUserAuth("user").then((function(e){return o.setUserAuthMap(e)})))},e.prototype.checkLogin=function(){return"CONNECTED"===this.socket.getRoomState()||Promise.reject(Object(L.b)(z.a.ZegoWhiteboardViewErrorNoLoginRoom))},e.prototype.getModList=function(){return F(this,void 0,void 0,(function(){var e,t,o;return W(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),!0!==(e=this.checkLogin())?[2,e]:(m.a.info(Z("mod.get_list"),JSON.stringify({localModListSeq:this.modListSeq})),[4,this.getModListDetails(r.Initiative)]);case 1:return t=i.sent(),[2,Promise.resolve(t.map((function(e){return e.mod_id})))];case 2:return o=i.sent(),[2,Promise.reject(o)];case 3:return[2]}}))}))},e.prototype.destroyMod=function(e){return F(this,void 0,void 0,(function(){var t,o;return W(this,(function(r){switch(r.label){case 0:return!0!==(t=this.checkLogin())?[2,t]:[4,this.socket.queueWSCmdHandler(_.DestroyMod,{mod_id:e})];case 1:return o=r.sent(),[2,this.handleDestroyModRsp(o)]}}))}))},e.prototype.createMod=function(e,t){return F(this,void 0,void 0,(function(){var o,r,i,n,a,s,c;return W(this,(function(l){switch(l.label){case 0:return!0!==(o=this.checkLogin())?[2,o]:(r=this.createModInfo(e),i=r.modContent,n=r.modPos,a=r.modScale,s={mod_id:t||Object(v.d)(),mod_title:e.name,mod_type:this.defaultModType,mod_subtype:this.defaultModSubtype,mod_delete_flag:this.defaultModDeleteFlag,mod_content:JSON.stringify(i),mod_horizontal_percent:this.defaultHPercent,mod_vertical_percent:this.defaultVPercent,mod_reserve:this.defaultModReserve,mod_pos:JSON.stringify(n),mod_scale:JSON.stringify(a)},[4,this.socket.queueWSCmdHandler(_.CreateMod,s)]);case 1:return c=l.sent(),[2,this.handleCreateModRsp(c)]}}))}))},e.prototype.getUserAuth=function(){return this.userAuthMap.model},e.prototype.updateMapByGraphicListSeqs=function(e,t){var o=this.getMap(e).graphicListSeqs;Object.keys(t).forEach((function(e){o[+e]=t[+e]}))},e.prototype.setGraphicItem=function(e){var t=e.operate_id,o=e.data;this.graphicMap[e.graphic_id]={is_end_draw:!t||e.is_end_draw,server_timestamp:+e.server_timestamp||0,operate_id:t,type:e.type,pointData:{x:e.x||0,y:e.y||0,px:e.px||0,py:e.py||0,data:"object"==q(o)?JSON.parse(JSON.stringify(o)):o}}},e.prototype.getGraphicItem=function(e){return this.graphicMap[e]},e.prototype.clearGraphicMap=function(){this.graphicMap={}},e.prototype.updateGraphicMap=function(e,t){var o=this,r=this.getMap(e).width;t.forEach((function(e){C(e,r,!1),o.setGraphicItem(e)}))},e.prototype.reloadViewGraphics=function(e,t){var o=this,r=this.getMap(e).width;t.forEach((function(e){var t=o.getGraphicItem(e.graphic_id).pointData,i=t.x,n=t.y,a=t.px,s=t.py,c=t.data;e.x=i,e.y=n,e.px=a,e.py=s,e.data="object"==q(c)?JSON.parse(JSON.stringify(c)):c,C(e,r,!0)}))},e.prototype.updateMap=function(e){var t=this.getMap(e.whiteboardID);if(t){var o=e.modPropSeq;o&&Object.assign(t.modPropSeq||{},o),delete e.modPropSeq,Object.assign(t,e)}else this.modIdMapData[e.whiteboardID]=R({graphicListSeqs:{0:0},pullMarks:{0:!1},modSeq:0,width:0,height:0,viewWidth:0,viewHeight:0,innerPageCount:1,innerDirection:z.e.Horizontal,innerPageSize:{cx:0,cy:0},modType:this.defaultModType,modSubtype:this.defaultModSubtype,operateTimes:0,inProgress:!1,graphicSendSwitch:!0,modifyModTaskList:[],moveTaskList:[]},e)},e.prototype.getMap=function(e){return this.modIdMapData[e]},e.prototype.appendH5Extra=function(e,t){m.a.warn(Z("mod.append_extra_origin"),t);var o=this.checkH5Extra(e,t,!1);if(o){m.a.warn(Z("mod.append_extra_new"),o);var r,i={mod_id:e,mod_extra:o.includes("H5_record")?(r=o,x(E(r))):o,is_modify_mod_extra:!0};this.setMod(c.AppendH5Extra,i)}},e.prototype.scroll=function(e,t,o,r,i){m.a.warn(Z("mod.scroll_origin"),JSON.stringify({hPercent:t,vPercent:o,pptStep:r}));var n=this.checkScroll(e,t,o,r);if(n){if(n.mod_extra="",n.is_modify_mod_extra=!0,i){var a=this.getMap(e).modScale,s=a.scale,l=a.ofs_x,u=i.scaleFactor,h=i.scaleOffsetX,d=i.scaleOffsetY?{scale:u,ofs_x:h,ofs_y:0}:{scale:s,ofs_x:l,ofs_y:0};n.mod_scale=JSON.stringify(d),n.is_modify_mod_scale=!0}m.a.warn(Z("mod.scroll_new"),JSON.stringify(n)),this.setMod(c.Scroll,n)}},e.prototype.scale=function(e,t,o,r){m.a.warn(Z("mod.scale_origin"),JSON.stringify({scale:t,ofs_x:o,ofs_y:r}));var i=this.checkScale(e,t,o,r);i&&(m.a.warn(Z("mod.scale_new"),JSON.stringify(i)),this.setMod(c.Scale,i))},e.prototype.getAspectRatio=function(e){var t=this.getMap(e);return t.aspectWidth+":"+t.aspectHeight},e.prototype.getFileInfo=function(e){var t=this.getMap(e);return t&&t.fileInfo||null},e.prototype.getScrollPercent=function(e){var t=this.getMap(e);return{horizontalPercent:t.horizontalPercent,verticalPercent:t.verticalPercent,pptStep:t.pptStep,direction:t.innerDirection}},e.prototype.getScale=function(e){var t=this.getMap(e);return{scaleFactor:t.modScale.scale,scaleOffsetX:t.modScale.ofs_x,scaleOffsetY:t.modScale.ofs_y}},e.prototype.loadCurrentGraphics=function(e,t,o){for(var r=this.getMap(e),i=this.getCurrentPages(e,t,o),n=i.minPage,a=i.maxPage,s=[],c=n;c<=a;c++){!r.pullMarks[c]&&s.push(c)}m.a.info(Z("gra.load_by_percent"),JSON.stringify({horizontalPercent:t,verticalPercent:o,minPage:n,maxPage:a,pageNumList:s})),s.length&&this.getPageGraphicsList(e,s)},e.prototype.reload=function(){var e=this;this.syncRemoteSeq(),this.clearPullMarks(),this.getModListDetails(r.Inner),this.onRemotePush();try{Object.values(this.modIdMapData).forEach((function(t){e.loadCurrentGraphics(t.whiteboardID,t.horizontalPercent,t.verticalPercent)}))}catch(e){m.a.error(Z("reload_graphics"),"error")}m.a.info(Z("reload"),"reload whiteboard")},e.prototype.unload=function(){this.userAuthMap.syncTaskId&&window.clearInterval(this.userAuthMap.syncTaskId),m.a.info(Z("unload"),"unload whiteboard")},e.prototype.onRemotePush=function(){var e=this;this.socket.registerWbMessage((function(t){var o=t.sub_cmd,r=t.msg_body;switch(o){case 291101:e.pushSetModHandle(r);break;case 291203:e.pushDrawPageGraphicsHandle(r);break;case 291204:e.pushClearPageGraphicsHandle(r);break;case 291501:e.pushUserAuthHandle(r);break;case 291502:e.setUserAuthMap(r)}}))},e.prototype.getRemoteAuth=function(){var e=this;this.initUserAuthMap(),this.getRemoteRoomUserAuth("room").then((function(t){e.setUserAuthMap(t),e.syncRemoteSeq()})),this.getRemoteRoomUserAuth("user").then((function(t){e.setUserAuthMap(t)}))},e.prototype.getModName=function(e){var t=this.getMap(e);return(null==t?void 0:t.name)||""},e.prototype.getCreateTime=function(e){var t=this.getMap(e);return(null==t?void 0:t.createTime)||0},e.prototype.getRoomID=function(e){var t=this.getMap(e);return(null==t?void 0:t.roomID)||""},e.prototype.getUniqueID=function(e){var t=this.getMap(e);return(null==t?void 0:t.uniqueID)||""},e.prototype.getPageCount=function(e){var t=this.getMap(e);return(null==t?void 0:t.outPageCount)||1},e.prototype.setSize=function(e,t,o){var r=this.getMap(e);return!!(r&&t&&o)&&(r.width=t,r.height=o,m.a.info(Z("mod.set_view_size"),JSON.stringify({whiteboardID:e,width:t,height:o})),this.splitPage(e,t,o),!0)},e.prototype.setViewSize=function(e,t,o){var r=this.getMap(e);return!!(r&&t&&o)&&(m.a.info(Z("mod.set_viewpoart_size"),JSON.stringify({whiteboardID:e,viewWidth:t,viewHeight:o})),r.viewHeight=o,r.viewWidth=t,!0)},e.prototype.setRenderStatus=function(e,t){return void 0!==t&&(Object.values(this.modIdMapData).forEach((function(o){t?o.whiteboardID===e?o.renderStatus=1:o.renderStatus=0:o.whiteboardID===e&&(o.renderStatus=0)})),!0)},e.prototype.getH5Extra=function(e,t){var o=this.getMap(e),r=o?o.modExtra:"";if(m.a.info(Z("mod.get_h5extra"),JSON.stringify({whiteboardID:e,modExtra:r})),r&&!t){var i=JSON.parse(r);i.H5_record&&(i.H5_record.t=101,r=JSON.stringify(i))}return r},e.prototype.createZorder=function(){return this.zorderSeq+=this.zorderStep},e.prototype.switchView=function(e){m.a.warn(Z("mod.switch_view_origin"),e);var t=this.checkSwitchView(e);return t?(m.a.warn(Z("mod.switch_view_new"),JSON.stringify(t)),this.setModHandle(c.Other,t)):Promise.reject()},e.prototype.getCurrentActivitedView=function(){var e=0,t="";Object.values(this.modIdMapData).forEach((function(o){o.zorder&&o.zorder>e&&(e=o.zorder,t=o.whiteboardID)}));var o=t?[this.modIdMapData[t].uniqueID,t]:[];return m.a.info(Z("mod.switch_view_remote"),JSON.stringify(o)),o},e}(),U=(o(64),o(262)),J=o.n(U),X=o(21);const Y=X.Reader,Q=X.Writer,K=X.util,$=X.roots.default||(X.roots.default={});$.proto_access_pb=(()=>{const e={};return e.proto_req_header=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.seq=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.room_session_id="",e.prototype.biz_version="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(10).string(e.protocol),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(18).string(e.cmd),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(24).uint32(e.appid),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(32).uint32(e.seq),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(50).string(e.session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(58).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(66).string(e.room_session_id),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(74).string(e.biz_version),t},e}(),e.proto_biz_channel=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.channel="",e.prototype.cmd="",e.prototype.req_body=K.newBuffer([]),e.prototype.is_retry_req=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(10).string(e.channel),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(18).string(e.cmd),null!=e.req_body&&Object.hasOwnProperty.call(e,"req_body")&&t.uint32(26).bytes(e.req_body),null!=e.is_retry_req&&Object.hasOwnProperty.call(e,"is_retry_req")&&t.uint32(32).uint32(e.is_retry_req),t},e}(),e.proto_rsp_header=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.seq=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.room_session_id="",e.prototype.biz_version="",e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_access_pb.proto_rsp_header;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.protocol=e.string();break;case 2:r.cmd=e.string();break;case 3:r.appid=e.uint32();break;case 4:r.seq=e.uint32();break;case 5:r.user_id=e.string();break;case 6:r.session_id=e.string();break;case 7:r.room_id=e.string();break;case 8:r.room_session_id=e.string();break;case 9:r.biz_version=e.string();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_access_pb.proto_rsp_header)return e;let t=new $.proto_access_pb.proto_rsp_header;return null!=e.protocol&&(t.protocol=String(e.protocol)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.appid&&(t.appid=e.appid>>>0),null!=e.seq&&(t.seq=e.seq>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.session_id&&(t.session_id=String(e.session_id)),null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.room_session_id&&(t.room_session_id=String(e.room_session_id)),null!=e.biz_version&&(t.biz_version=String(e.biz_version)),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.protocol="",o.cmd="",o.appid=0,o.seq=0,o.user_id="",o.session_id="",o.room_id="",o.room_session_id="",o.biz_version=""),null!=e.protocol&&e.hasOwnProperty("protocol")&&(o.protocol=e.protocol),null!=e.cmd&&e.hasOwnProperty("cmd")&&(o.cmd=e.cmd),null!=e.appid&&e.hasOwnProperty("appid")&&(o.appid=e.appid),null!=e.seq&&e.hasOwnProperty("seq")&&(o.seq=e.seq),null!=e.user_id&&e.hasOwnProperty("user_id")&&(o.user_id=e.user_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(o.session_id=e.session_id),null!=e.room_id&&e.hasOwnProperty("room_id")&&(o.room_id=e.room_id),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&(o.room_session_id=e.room_session_id),null!=e.biz_version&&e.hasOwnProperty("biz_version")&&(o.biz_version=e.biz_version),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_biz_channel_rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.err_code=0,e.prototype.err_message="",e.prototype.channel="",e.prototype.cmd="",e.prototype.rsp_body=K.newBuffer([]),e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_access_pb.proto_biz_channel_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.err_code=e.int32();break;case 2:r.err_message=e.string();break;case 3:r.channel=e.string();break;case 4:r.cmd=e.string();break;case 5:r.rsp_body=e.bytes();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_access_pb.proto_biz_channel_rsp)return e;let t=new $.proto_access_pb.proto_biz_channel_rsp;return null!=e.err_code&&(t.err_code=0|e.err_code),null!=e.err_message&&(t.err_message=String(e.err_message)),null!=e.channel&&(t.channel=String(e.channel)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.rsp_body&&("string"==typeof e.rsp_body?K.base64.decode(e.rsp_body,t.rsp_body=K.newBuffer(K.base64.length(e.rsp_body)),0):e.rsp_body.length&&(t.rsp_body=e.rsp_body)),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.err_code=0,o.err_message="",o.channel="",o.cmd="",t.bytes===String?o.rsp_body="":(o.rsp_body=[],t.bytes!==Array&&(o.rsp_body=K.newBuffer(o.rsp_body)))),null!=e.err_code&&e.hasOwnProperty("err_code")&&(o.err_code=e.err_code),null!=e.err_message&&e.hasOwnProperty("err_message")&&(o.err_message=e.err_message),null!=e.channel&&e.hasOwnProperty("channel")&&(o.channel=e.channel),null!=e.cmd&&e.hasOwnProperty("cmd")&&(o.cmd=e.cmd),null!=e.rsp_body&&e.hasOwnProperty("rsp_body")&&(o.rsp_body=t.bytes===String?K.base64.encode(e.rsp_body,0,e.rsp_body.length):t.bytes===Array?Array.prototype.slice.call(e.rsp_body):e.rsp_body),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_push_header=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.protocol="",e.prototype.cmd="",e.prototype.appid=0,e.prototype.user_id="",e.prototype.session_id="",e.prototype.room_id="",e.prototype.push_seq=0,e.prototype.from_user_id="",e.prototype.qos_flag=0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_access_pb.proto_push_header;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.protocol=e.string();break;case 2:r.cmd=e.string();break;case 3:r.appid=e.uint32();break;case 4:r.user_id=e.string();break;case 5:r.session_id=e.string();break;case 6:r.room_id=e.string();break;case 7:r.push_seq=e.uint32();break;case 8:r.from_user_id=e.string();break;case 9:r.qos_flag=e.uint32();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_access_pb.proto_push_header)return e;let t=new $.proto_access_pb.proto_push_header;return null!=e.protocol&&(t.protocol=String(e.protocol)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.appid&&(t.appid=e.appid>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.session_id&&(t.session_id=String(e.session_id)),null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.push_seq&&(t.push_seq=e.push_seq>>>0),null!=e.from_user_id&&(t.from_user_id=String(e.from_user_id)),null!=e.qos_flag&&(t.qos_flag=e.qos_flag>>>0),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.protocol="",o.cmd="",o.appid=0,o.user_id="",o.session_id="",o.room_id="",o.push_seq=0,o.from_user_id="",o.qos_flag=0),null!=e.protocol&&e.hasOwnProperty("protocol")&&(o.protocol=e.protocol),null!=e.cmd&&e.hasOwnProperty("cmd")&&(o.cmd=e.cmd),null!=e.appid&&e.hasOwnProperty("appid")&&(o.appid=e.appid),null!=e.user_id&&e.hasOwnProperty("user_id")&&(o.user_id=e.user_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(o.session_id=e.session_id),null!=e.room_id&&e.hasOwnProperty("room_id")&&(o.room_id=e.room_id),null!=e.push_seq&&e.hasOwnProperty("push_seq")&&(o.push_seq=e.push_seq),null!=e.from_user_id&&e.hasOwnProperty("from_user_id")&&(o.from_user_id=e.from_user_id),null!=e.qos_flag&&e.hasOwnProperty("qos_flag")&&(o.qos_flag=e.qos_flag),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_push_biz_channel=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.channel="",e.prototype.cmd="",e.prototype.req_body=K.newBuffer([]),e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_access_pb.proto_push_biz_channel;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.channel=e.string();break;case 2:r.cmd=e.string();break;case 3:r.req_body=e.bytes();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_access_pb.proto_push_biz_channel)return e;let t=new $.proto_access_pb.proto_push_biz_channel;return null!=e.channel&&(t.channel=String(e.channel)),null!=e.cmd&&(t.cmd=String(e.cmd)),null!=e.req_body&&("string"==typeof e.req_body?K.base64.decode(e.req_body,t.req_body=K.newBuffer(K.base64.length(e.req_body)),0):e.req_body.length&&(t.req_body=e.req_body)),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.channel="",o.cmd="",t.bytes===String?o.req_body="":(o.req_body=[],t.bytes!==Array&&(o.req_body=K.newBuffer(o.req_body)))),null!=e.channel&&e.hasOwnProperty("channel")&&(o.channel=e.channel),null!=e.cmd&&e.hasOwnProperty("cmd")&&(o.cmd=e.cmd),null!=e.req_body&&e.hasOwnProperty("req_body")&&(o.req_body=t.bytes===String?K.base64.encode(e.req_body,0,e.req_body.length):t.bytes===Array?Array.prototype.slice.call(e.req_body):e.req_body),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_push_biz_hannel_req=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.sub_cmd=0,e.prototype.sub_seq=0,e.prototype.qos_flag=0,e.prototype.msg_id="",e.prototype.sender_id="",e.prototype.msg_body=K.newBuffer([]),e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_access_pb.proto_push_biz_hannel_req;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.sub_cmd=e.uint32();break;case 2:r.sub_seq=e.uint32();break;case 3:r.qos_flag=e.uint32();break;case 4:r.msg_id=e.string();break;case 5:r.sender_id=e.string();break;case 6:r.msg_body=e.bytes();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_access_pb.proto_push_biz_hannel_req)return e;let t=new $.proto_access_pb.proto_push_biz_hannel_req;return null!=e.sub_cmd&&(t.sub_cmd=e.sub_cmd>>>0),null!=e.sub_seq&&(t.sub_seq=e.sub_seq>>>0),null!=e.qos_flag&&(t.qos_flag=e.qos_flag>>>0),null!=e.msg_id&&(t.msg_id=String(e.msg_id)),null!=e.sender_id&&(t.sender_id=String(e.sender_id)),null!=e.msg_body&&("string"==typeof e.msg_body?K.base64.decode(e.msg_body,t.msg_body=K.newBuffer(K.base64.length(e.msg_body)),0):e.msg_body.length&&(t.msg_body=e.msg_body)),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.sub_cmd=0,o.sub_seq=0,o.qos_flag=0,o.msg_id="",o.sender_id="",t.bytes===String?o.msg_body="":(o.msg_body=[],t.bytes!==Array&&(o.msg_body=K.newBuffer(o.msg_body)))),null!=e.sub_cmd&&e.hasOwnProperty("sub_cmd")&&(o.sub_cmd=e.sub_cmd),null!=e.sub_seq&&e.hasOwnProperty("sub_seq")&&(o.sub_seq=e.sub_seq),null!=e.qos_flag&&e.hasOwnProperty("qos_flag")&&(o.qos_flag=e.qos_flag),null!=e.msg_id&&e.hasOwnProperty("msg_id")&&(o.msg_id=e.msg_id),null!=e.sender_id&&e.hasOwnProperty("sender_id")&&(o.sender_id=e.sender_id),null!=e.msg_body&&e.hasOwnProperty("msg_body")&&(o.msg_body=t.bytes===String?K.base64.encode(e.msg_body,0,e.msg_body.length):t.bytes===Array?Array.prototype.slice.call(e.msg_body):e.msg_body),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e})(),$.proto_biz_channel=(()=>{const e={};return e.req_header=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.sdk_version=0,e.prototype.id_name="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(8).uint32(e.sdk_version),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).string(e.id_name),t},e}(),e.req=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.req_header=null,e.prototype.body=K.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.req_header&&Object.hasOwnProperty.call(e,"req_header")&&$.proto_biz_channel.req_header.encode(e.req_header,t.uint32(10).fork()).ldelim(),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(18).bytes(e.body),t},e}(),e.rsp_header=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.code=0,e.prototype.seq=0,e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_biz_channel.rsp_header;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.code=e.int32();break;case 2:r.seq=e.uint32();break;case 3:r.timestamp=e.int64();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_biz_channel.rsp_header)return e;let t=new $.proto_biz_channel.rsp_header;return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=e.seq>>>0),null!=e.timestamp&&(K.Long?(t.timestamp=K.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults)if(o.code=0,o.seq=0,K.Long){let e=new K.Long(0,0,!1);o.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.timestamp=t.longs===String?"0":0;return null!=e.code&&e.hasOwnProperty("code")&&(o.code=e.code),null!=e.seq&&e.hasOwnProperty("seq")&&(o.seq=e.seq),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?K.Long.prototype.toString.call(e.timestamp):t.longs===Number?new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.header=null,e.prototype.body=K.newBuffer([]),e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_biz_channel.rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.header=$.proto_biz_channel.rsp_header.decode(e,e.uint32());break;case 2:r.body=e.bytes();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_biz_channel.rsp)return e;let t=new $.proto_biz_channel.rsp;if(null!=e.header){if("object"!=typeof e.header)throw TypeError(".proto_biz_channel.rsp.header: object expected");t.header=$.proto_biz_channel.rsp_header.fromObject(e.header)}return null!=e.body&&("string"==typeof e.body?K.base64.decode(e.body,t.body=K.newBuffer(K.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.header=null,t.bytes===String?o.body="":(o.body=[],t.bytes!==Array&&(o.body=K.newBuffer(o.body)))),null!=e.header&&e.hasOwnProperty("header")&&(o.header=$.proto_biz_channel.rsp_header.toObject(e.header,t)),null!=e.body&&e.hasOwnProperty("body")&&(o.body=t.bytes===String?K.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e})(),$.proto_edu_v1_web=(()=>{const e={};return e.proto_sync=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),t},e}(),e.proto_create_mod=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_delete_flag=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(18).string(e.mod_title),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(24).uint32(e.mod_type),null!=e.mod_subtype&&Object.hasOwnProperty.call(e,"mod_subtype")&&t.uint32(32).uint32(e.mod_subtype),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(42).string(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(48).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(58).string(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(66).string(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(72).uint32(e.mod_reserve),null!=e.mod_delete_flag&&Object.hasOwnProperty.call(e,"mod_delete_flag")&&t.uint32(80).int32(e.mod_delete_flag),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(93).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(101).float(e.mod_vertical_percent),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(106).string(e.mod_scale),t},e}(),e.proto_destroy_mod=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),t},e}(),e.proto_modify_mod=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_seq=0,e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.mod_seq&&Object.hasOwnProperty.call(e,"mod_seq")&&t.uint32(8).uint32(e.mod_seq),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(16).uint64(e.mod_id),null!=e.mod_title&&Object.hasOwnProperty.call(e,"mod_title")&&t.uint32(26).string(e.mod_title),null!=e.mod_pos&&Object.hasOwnProperty.call(e,"mod_pos")&&t.uint32(34).string(e.mod_pos),null!=e.mod_status&&Object.hasOwnProperty.call(e,"mod_status")&&t.uint32(40).uint64(e.mod_status),null!=e.mod_content&&Object.hasOwnProperty.call(e,"mod_content")&&t.uint32(50).string(e.mod_content),null!=e.mod_extra&&Object.hasOwnProperty.call(e,"mod_extra")&&t.uint32(58).string(e.mod_extra),null!=e.mod_reserve&&Object.hasOwnProperty.call(e,"mod_reserve")&&t.uint32(64).uint32(e.mod_reserve),null!=e.is_modify_mod_title&&Object.hasOwnProperty.call(e,"is_modify_mod_title")&&t.uint32(72).bool(e.is_modify_mod_title),null!=e.is_modify_mod_pos&&Object.hasOwnProperty.call(e,"is_modify_mod_pos")&&t.uint32(80).bool(e.is_modify_mod_pos),null!=e.is_modify_mod_status&&Object.hasOwnProperty.call(e,"is_modify_mod_status")&&t.uint32(88).bool(e.is_modify_mod_status),null!=e.is_modify_mod_content&&Object.hasOwnProperty.call(e,"is_modify_mod_content")&&t.uint32(96).bool(e.is_modify_mod_content),null!=e.is_modify_mod_extra&&Object.hasOwnProperty.call(e,"is_modify_mod_extra")&&t.uint32(104).bool(e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&Object.hasOwnProperty.call(e,"is_modify_mod_reserve")&&t.uint32(112).bool(e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&Object.hasOwnProperty.call(e,"mod_horizontal_percent")&&t.uint32(125).float(e.mod_horizontal_percent),null!=e.mod_vertical_percent&&Object.hasOwnProperty.call(e,"mod_vertical_percent")&&t.uint32(133).float(e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_horizontal_percent")&&t.uint32(136).bool(e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&Object.hasOwnProperty.call(e,"is_modify_mod_vertical_percent")&&t.uint32(144).bool(e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&Object.hasOwnProperty.call(e,"is_modify_mod_scale")&&t.uint32(152).bool(e.is_modify_mod_scale),null!=e.mod_scale&&Object.hasOwnProperty.call(e,"mod_scale")&&t.uint32(162).string(e.mod_scale),t},e}(),e.proto_get_mod=function(){function e(e){if(this.mod_id_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id_list=K.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Q.create()),null!=e.mod_id_list&&e.mod_id_list.length)for(let o=0;o<e.mod_id_list.length;++o)t.uint32(10).string(e.mod_id_list[o]);return t},e}(),e.proto_get_mod_list=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_list_seq=0,e.prototype.limit=0,e.prototype.marker="",e.prototype.mod_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.mod_list_seq&&Object.hasOwnProperty.call(e,"mod_list_seq")&&t.uint32(8).uint32(e.mod_list_seq),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).uint32(e.limit),null!=e.marker&&Object.hasOwnProperty.call(e,"marker")&&t.uint32(26).string(e.marker),null!=e.mod_type&&Object.hasOwnProperty.call(e,"mod_type")&&t.uint32(32).uint32(e.mod_type),t},e}(),e.proto_draw_page_graphics=function(){function e(e){if(this.draw_pages=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.draw_pages=K.emptyArray,e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Q.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.draw_pages&&e.draw_pages.length)for(let o=0;o<e.draw_pages.length;++o)$.proto_edu_v1_web.proto_draw_page.encode(e.draw_pages[o],t.uint32(18).fork()).ldelim();return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint64(e.timestamp),t},e}(),e.proto_draw_page=function(){function e(e){if(this.draw_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.page=0,e.prototype.graphic_list_seq=0,e.prototype.draw_list=K.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Q.create()),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(8).uint32(e.page),null!=e.graphic_list_seq&&Object.hasOwnProperty.call(e,"graphic_list_seq")&&t.uint32(16).uint32(e.graphic_list_seq),null!=e.draw_list&&e.draw_list.length)for(let o=0;o<e.draw_list.length;++o)$.proto_edu_v1_web.proto_draw.encode(e.draw_list[o],t.uint32(26).fork()).ldelim();return t},e}(),e.proto_draw=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.graphic_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.action=0,e.prototype.action_type=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.px=0,e.prototype.py=0,e.prototype.data=K.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.layer=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),null!=e.graphic_id&&Object.hasOwnProperty.call(e,"graphic_id")&&t.uint32(8).uint64(e.graphic_id),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(16).int32(e.action),null!=e.action_type&&Object.hasOwnProperty.call(e,"action_type")&&t.uint32(24).int32(e.action_type),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(32).int32(e.type),null!=e.zorder&&Object.hasOwnProperty.call(e,"zorder")&&t.uint32(40).int32(e.zorder),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(48).int32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(56).int32(e.y),null!=e.px&&Object.hasOwnProperty.call(e,"px")&&t.uint32(64).int32(e.px),null!=e.py&&Object.hasOwnProperty.call(e,"py")&&t.uint32(72).int32(e.py),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(82).bytes(e.data),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(88).int32(e.size),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(96).uint32(e.color),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(104).int32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(112).int32(e.height),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&t.uint32(122).string(e.attributes),null!=e.operate_id&&Object.hasOwnProperty.call(e,"operate_id")&&t.uint32(130).string(e.operate_id),null!=e.is_end_draw&&Object.hasOwnProperty.call(e,"is_end_draw")&&t.uint32(136).bool(e.is_end_draw),null!=e.layer&&Object.hasOwnProperty.call(e,"layer")&&t.uint32(144).uint32(e.layer),t},e}(),e.proto_clear_page_graphics=function(){function e(e){if(this.layers=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.layers=K.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Q.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(16).uint64(e.timestamp),null!=e.layers&&e.layers.length){t.uint32(26).fork();for(let o=0;o<e.layers.length;++o)t.uint32(e.layers[o]);t.ldelim()}return t},e}(),e.proto_get_page_graphics=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.pages=K.emptyArray,e.prototype.graphic_list_seqs=K.emptyArray,e.prototype.limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Q.create()),null!=e.mod_id&&Object.hasOwnProperty.call(e,"mod_id")&&t.uint32(8).uint64(e.mod_id),null!=e.pages&&e.pages.length){t.uint32(18).fork();for(let o=0;o<e.pages.length;++o)t.uint32(e.pages[o]);t.ldelim()}if(null!=e.graphic_list_seqs&&e.graphic_list_seqs.length){t.uint32(26).fork();for(let o=0;o<e.graphic_list_seqs.length;++o)t.uint32(e.graphic_list_seqs[o]);t.ldelim()}return null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(32).uint32(e.limit),t},e}(),e.proto_get_user_auth_req=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),t},e}(),e.proto_get_room_auth_req=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Q.create()),t},e}(),e.proto_mod=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=K.Long?K.Long.fromBits(0,0,!1):0,e.prototype.graphic_list_seq=0,e.prototype.sync_interval=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.mod_scale="",e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_mod;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:r.mod_seq=e.uint32();break;case 3:r.mod_title=e.string();break;case 4:r.mod_type=e.uint32();break;case 5:r.mod_subtype=e.uint32();break;case 6:r.mod_pos=e.string();break;case 7:r.mod_status=e.uint64();break;case 8:r.mod_content=e.string();break;case 9:r.mod_extra=e.string();break;case 10:r.mod_reserve=e.uint32();break;case 11:r.mod_create_time=e.int64();break;case 12:r.graphic_list_seq=e.uint32();break;case 13:r.sync_interval=e.uint32();break;case 14:r.mod_horizontal_percent=e.float();break;case 15:r.mod_vertical_percent=e.float();break;case 16:r.mod_scale=e.string();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_mod)return e;let t=new $.proto_edu_v1_web.proto_mod;return null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&(t.mod_title=String(e.mod_title)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_pos&&(t.mod_pos=String(e.mod_pos)),null!=e.mod_status&&(K.Long?(t.mod_status=K.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new K.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&(t.mod_content=String(e.mod_content)),null!=e.mod_extra&&(t.mod_extra=String(e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(K.Long?(t.mod_create_time=K.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.graphic_list_seq&&(t.graphic_list_seq=e.graphic_list_seq>>>0),null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.mod_scale&&(t.mod_scale=String(e.mod_scale)),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(o.mod_seq=0,o.mod_title="",o.mod_type=0,o.mod_subtype=0,o.mod_pos="",K.Long){let e=new K.Long(0,0,!0);o.mod_status=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_status=t.longs===String?"0":0;if(o.mod_content="",o.mod_extra="",o.mod_reserve=0,K.Long){let e=new K.Long(0,0,!1);o.mod_create_time=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_create_time=t.longs===String?"0":0;o.graphic_list_seq=0,o.sync_interval=0,o.mod_horizontal_percent=0,o.mod_vertical_percent=0,o.mod_scale=""}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(o.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(o.mod_title=e.mod_title),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(o.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(o.mod_subtype=e.mod_subtype),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(o.mod_pos=e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?o.mod_status=t.longs===String?String(e.mod_status):e.mod_status:o.mod_status=t.longs===String?K.Long.prototype.toString.call(e.mod_status):t.longs===Number?new K.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(o.mod_content=e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(o.mod_extra=e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(o.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?o.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:o.mod_create_time=t.longs===String?K.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.graphic_list_seq&&e.hasOwnProperty("graphic_list_seq")&&(o.graphic_list_seq=e.graphic_list_seq),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(o.sync_interval=e.sync_interval),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(o.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(o.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(o.mod_scale=e.mod_scale),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_graphic=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.graphic_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.data=K.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.server_timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.creator_id="",e.prototype.layer=0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_graphic;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.id_name=e.string();break;case 2:r.nick_name=e.string();break;case 3:r.graphic_id=e.uint64();break;case 4:r.action_seq=e.uint32();break;case 5:r.type=e.int32();break;case 7:r.zorder=e.int32();break;case 8:r.x=e.int32();break;case 9:r.y=e.int32();break;case 10:r.data=e.bytes();break;case 11:r.size=e.int32();break;case 12:r.color=e.uint32();break;case 13:r.timestamp=e.uint64();break;case 14:r.width=e.int32();break;case 15:r.height=e.int32();break;case 16:r.attributes=e.string();break;case 17:r.operate_id=e.string();break;case 18:r.is_end_draw=e.bool();break;case 19:r.server_timestamp=e.uint64();break;case 20:r.creator_id=e.string();break;case 21:r.layer=e.uint32();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_graphic)return e;let t=new $.proto_edu_v1_web.proto_graphic;return null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.graphic_id&&(K.Long?(t.graphic_id=K.Long.fromValue(e.graphic_id)).unsigned=!0:"string"==typeof e.graphic_id?t.graphic_id=parseInt(e.graphic_id,10):"number"==typeof e.graphic_id?t.graphic_id=e.graphic_id:"object"==typeof e.graphic_id&&(t.graphic_id=new K.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0))),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),null!=e.type&&(t.type=0|e.type),null!=e.zorder&&(t.zorder=0|e.zorder),null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.data&&("string"==typeof e.data?K.base64.decode(e.data,t.data=K.newBuffer(K.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.size&&(t.size=0|e.size),null!=e.color&&(t.color=e.color>>>0),null!=e.timestamp&&(K.Long?(t.timestamp=K.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),null!=e.width&&(t.width=0|e.width),null!=e.height&&(t.height=0|e.height),null!=e.attributes&&(t.attributes=String(e.attributes)),null!=e.operate_id&&(t.operate_id=String(e.operate_id)),null!=e.is_end_draw&&(t.is_end_draw=Boolean(e.is_end_draw)),null!=e.server_timestamp&&(K.Long?(t.server_timestamp=K.Long.fromValue(e.server_timestamp)).unsigned=!0:"string"==typeof e.server_timestamp?t.server_timestamp=parseInt(e.server_timestamp,10):"number"==typeof e.server_timestamp?t.server_timestamp=e.server_timestamp:"object"==typeof e.server_timestamp&&(t.server_timestamp=new K.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0))),null!=e.creator_id&&(t.creator_id=String(e.creator_id)),null!=e.layer&&(t.layer=e.layer>>>0),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(o.id_name="",o.nick_name="",K.Long){let e=new K.Long(0,0,!0);o.graphic_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.graphic_id=t.longs===String?"0":0;if(o.action_seq=0,o.type=0,o.zorder=0,o.x=0,o.y=0,t.bytes===String?o.data="":(o.data=[],t.bytes!==Array&&(o.data=K.newBuffer(o.data))),o.size=0,o.color=0,K.Long){let e=new K.Long(0,0,!0);o.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.timestamp=t.longs===String?"0":0;if(o.width=0,o.height=0,o.attributes="",o.operate_id="",o.is_end_draw=!1,K.Long){let e=new K.Long(0,0,!0);o.server_timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.server_timestamp=t.longs===String?"0":0;o.creator_id="",o.layer=0}return null!=e.id_name&&e.hasOwnProperty("id_name")&&(o.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(o.nick_name=e.nick_name),null!=e.graphic_id&&e.hasOwnProperty("graphic_id")&&("number"==typeof e.graphic_id?o.graphic_id=t.longs===String?String(e.graphic_id):e.graphic_id:o.graphic_id=t.longs===String?K.Long.prototype.toString.call(e.graphic_id):t.longs===Number?new K.LongBits(e.graphic_id.low>>>0,e.graphic_id.high>>>0).toNumber(!0):e.graphic_id),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(o.action_seq=e.action_seq),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.zorder&&e.hasOwnProperty("zorder")&&(o.zorder=e.zorder),null!=e.x&&e.hasOwnProperty("x")&&(o.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(o.y=e.y),null!=e.data&&e.hasOwnProperty("data")&&(o.data=t.bytes===String?K.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.size&&e.hasOwnProperty("size")&&(o.size=e.size),null!=e.color&&e.hasOwnProperty("color")&&(o.color=e.color),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?K.Long.prototype.toString.call(e.timestamp):t.longs===Number?new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),null!=e.width&&e.hasOwnProperty("width")&&(o.width=e.width),null!=e.height&&e.hasOwnProperty("height")&&(o.height=e.height),null!=e.attributes&&e.hasOwnProperty("attributes")&&(o.attributes=e.attributes),null!=e.operate_id&&e.hasOwnProperty("operate_id")&&(o.operate_id=e.operate_id),null!=e.is_end_draw&&e.hasOwnProperty("is_end_draw")&&(o.is_end_draw=e.is_end_draw),null!=e.server_timestamp&&e.hasOwnProperty("server_timestamp")&&("number"==typeof e.server_timestamp?o.server_timestamp=t.longs===String?String(e.server_timestamp):e.server_timestamp:o.server_timestamp=t.longs===String?K.Long.prototype.toString.call(e.server_timestamp):t.longs===Number?new K.LongBits(e.server_timestamp.low>>>0,e.server_timestamp.high>>>0).toNumber(!0):e.server_timestamp),null!=e.creator_id&&e.hasOwnProperty("creator_id")&&(o.creator_id=e.creator_id),null!=e.layer&&e.hasOwnProperty("layer")&&(o.layer=e.layer),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_sync_rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.sync_interval=0,e.prototype.room_extra_info_seq=0,e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.joinlive_seq=0,e.prototype.mod_list_seq=0,e.prototype.user_auth_seq=0,e.prototype.room_auth_seq=0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_sync_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.sync_interval=e.uint32();break;case 2:r.room_extra_info_seq=e.uint32();break;case 3:r.user_list_seq=e.uint32();break;case 4:r.user_extra_info_seq=e.uint32();break;case 5:r.joinlive_seq=e.uint32();break;case 6:r.mod_list_seq=e.uint32();break;case 7:r.user_auth_seq=e.uint32();break;case 8:r.room_auth_seq=e.uint32();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_sync_rsp)return e;let t=new $.proto_edu_v1_web.proto_sync_rsp;return null!=e.sync_interval&&(t.sync_interval=e.sync_interval>>>0),null!=e.room_extra_info_seq&&(t.room_extra_info_seq=e.room_extra_info_seq>>>0),null!=e.user_list_seq&&(t.user_list_seq=e.user_list_seq>>>0),null!=e.user_extra_info_seq&&(t.user_extra_info_seq=e.user_extra_info_seq>>>0),null!=e.joinlive_seq&&(t.joinlive_seq=e.joinlive_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.user_auth_seq&&(t.user_auth_seq=e.user_auth_seq>>>0),null!=e.room_auth_seq&&(t.room_auth_seq=e.room_auth_seq>>>0),t},e.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.sync_interval=0,o.room_extra_info_seq=0,o.user_list_seq=0,o.user_extra_info_seq=0,o.joinlive_seq=0,o.mod_list_seq=0,o.user_auth_seq=0,o.room_auth_seq=0),null!=e.sync_interval&&e.hasOwnProperty("sync_interval")&&(o.sync_interval=e.sync_interval),null!=e.room_extra_info_seq&&e.hasOwnProperty("room_extra_info_seq")&&(o.room_extra_info_seq=e.room_extra_info_seq),null!=e.user_list_seq&&e.hasOwnProperty("user_list_seq")&&(o.user_list_seq=e.user_list_seq),null!=e.user_extra_info_seq&&e.hasOwnProperty("user_extra_info_seq")&&(o.user_extra_info_seq=e.user_extra_info_seq),null!=e.joinlive_seq&&e.hasOwnProperty("joinlive_seq")&&(o.joinlive_seq=e.joinlive_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),null!=e.user_auth_seq&&e.hasOwnProperty("user_auth_seq")&&(o.user_auth_seq=e.user_auth_seq),null!=e.room_auth_seq&&e.hasOwnProperty("room_auth_seq")&&(o.room_auth_seq=e.room_auth_seq),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_create_mod_rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.prototype.mod_create_time=K.Long?K.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_create_mod_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:r.mod_seq=e.uint32();break;case 3:r.mod_list_seq=e.uint32();break;case 4:r.mod_create_time=e.int64();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_create_mod_rsp)return e;let t=new $.proto_edu_v1_web.proto_create_mod_rsp;return null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.mod_create_time&&(K.Long?(t.mod_create_time=K.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(o.mod_seq=0,o.mod_list_seq=0,K.Long){let e=new K.Long(0,0,!1);o.mod_create_time=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_create_time=t.longs===String?"0":0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(o.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?o.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:o.mod_create_time=t.longs===String?K.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_destroy_mod_rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_destroy_mod_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:r.mod_list_seq=e.uint32();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_destroy_mod_rsp)return e;let t=new $.proto_edu_v1_web.proto_destroy_mod_rsp;return null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;o.mod_list_seq=0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_modify_mod_rsp=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_modify_mod_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:r.mod_seq=e.uint32();break;case 3:r.mod_list_seq=e.uint32();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_modify_mod_rsp)return e;let t=new $.proto_edu_v1_web.proto_modify_mod_rsp;return null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;o.mod_seq=0,o.mod_list_seq=0}return null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(o.mod_seq=e.mod_seq),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_mod_rsp=function(){function e(e){if(this.mod_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_list=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_mod_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_list&&r.mod_list.length||(r.mod_list=[]),r.mod_list.push($.proto_edu_v1_web.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_mod_rsp)return e;let t=new $.proto_edu_v1_web.proto_get_mod_rsp;if(e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: array expected");t.mod_list=[];for(let o=0;o<e.mod_list.length;++o){if("object"!=typeof e.mod_list[o])throw TypeError(".proto_edu_v1_web.proto_get_mod_rsp.mod_list: object expected");t.mod_list[o]=$.proto_edu_v1_web.proto_mod.fromObject(e.mod_list[o])}}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.mod_list=[]),e.mod_list&&e.mod_list.length){o.mod_list=[];for(let r=0;r<e.mod_list.length;++r)o.mod_list[r]=$.proto_edu_v1_web.proto_mod.toObject(e.mod_list[r],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_mod_list_rsp=function(){function e(e){if(this.mod_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_list_seq=0,e.prototype.marker="",e.prototype.mod_type=0,e.prototype.mod_list=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_mod_list_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_list_seq=e.uint32();break;case 2:r.marker=e.string();break;case 3:r.mod_type=e.uint32();break;case 4:r.mod_list&&r.mod_list.length||(r.mod_list=[]),r.mod_list.push($.proto_edu_v1_web.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_mod_list_rsp)return e;let t=new $.proto_edu_v1_web.proto_get_mod_list_rsp;if(null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),null!=e.marker&&(t.marker=String(e.marker)),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),e.mod_list){if(!Array.isArray(e.mod_list))throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: array expected");t.mod_list=[];for(let o=0;o<e.mod_list.length;++o){if("object"!=typeof e.mod_list[o])throw TypeError(".proto_edu_v1_web.proto_get_mod_list_rsp.mod_list: object expected");t.mod_list[o]=$.proto_edu_v1_web.proto_mod.fromObject(e.mod_list[o])}}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.mod_list=[]),t.defaults&&(o.mod_list_seq=0,o.marker="",o.mod_type=0),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),null!=e.marker&&e.hasOwnProperty("marker")&&(o.marker=e.marker),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(o.mod_type=e.mod_type),e.mod_list&&e.mod_list.length){o.mod_list=[];for(let r=0;r<e.mod_list.length;++r)o.mod_list[r]=$.proto_edu_v1_web.proto_mod.toObject(e.mod_list[r],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_draw_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.pages=K.emptyArray,e.prototype.graphic_list_seqs=K.emptyArray,e.prototype.commit_time=K.Long?K.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_draw_page_graphics_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:if(r.pages&&r.pages.length||(r.pages=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.pages.push(e.uint32())}else r.pages.push(e.uint32());break;case 3:if(r.graphic_list_seqs&&r.graphic_list_seqs.length||(r.graphic_list_seqs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_list_seqs.push(e.uint32())}else r.graphic_list_seqs.push(e.uint32());break;case 4:r.commit_time=e.int64();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_draw_page_graphics_rsp)return e;let t=new $.proto_edu_v1_web.proto_draw_page_graphics_rsp;if(null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.pages: array expected");t.pages=[];for(let o=0;o<e.pages.length;++o)t.pages[o]=e.pages[o]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_v1_web.proto_draw_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(let o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return null!=e.commit_time&&(K.Long?(t.commit_time=K.Long.fromValue(e.commit_time)).unsigned=!1:"string"==typeof e.commit_time?t.commit_time=parseInt(e.commit_time,10):"number"==typeof e.commit_time?t.commit_time=e.commit_time:"object"==typeof e.commit_time&&(t.commit_time=new K.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.pages=[],o.graphic_list_seqs=[]),t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(K.Long){let e=new K.Long(0,0,!1);o.commit_time=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.commit_time=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){o.pages=[];for(let t=0;t<e.pages.length;++t)o.pages[t]=e.pages[t]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){o.graphic_list_seqs=[];for(let t=0;t<e.graphic_list_seqs.length;++t)o.graphic_list_seqs[t]=e.graphic_list_seqs[t]}return null!=e.commit_time&&e.hasOwnProperty("commit_time")&&("number"==typeof e.commit_time?o.commit_time=t.longs===String?String(e.commit_time):e.commit_time:o.commit_time=t.longs===String?K.Long.prototype.toString.call(e.commit_time):t.longs===Number?new K.LongBits(e.commit_time.low>>>0,e.commit_time.high>>>0).toNumber():e.commit_time),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_clear_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.pages=K.emptyArray,e.prototype.graphic_list_seqs=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_clear_page_graphics_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:if(r.pages&&r.pages.length||(r.pages=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.pages.push(e.uint32())}else r.pages.push(e.uint32());break;case 3:if(r.graphic_list_seqs&&r.graphic_list_seqs.length||(r.graphic_list_seqs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_list_seqs.push(e.uint32())}else r.graphic_list_seqs.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_clear_page_graphics_rsp)return e;let t=new $.proto_edu_v1_web.proto_clear_page_graphics_rsp;if(null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.pages: array expected");t.pages=[];for(let o=0;o<e.pages.length;++o)t.pages[o]=e.pages[o]>>>0}if(e.graphic_list_seqs){if(!Array.isArray(e.graphic_list_seqs))throw TypeError(".proto_edu_v1_web.proto_clear_page_graphics_rsp.graphic_list_seqs: array expected");t.graphic_list_seqs=[];for(let o=0;o<e.graphic_list_seqs.length;++o)t.graphic_list_seqs[o]=e.graphic_list_seqs[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.pages=[],o.graphic_list_seqs=[]),t.defaults)if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){o.pages=[];for(let t=0;t<e.pages.length;++t)o.pages[t]=e.pages[t]}if(e.graphic_list_seqs&&e.graphic_list_seqs.length){o.graphic_list_seqs=[];for(let t=0;t<e.graphic_list_seqs.length;++t)o.graphic_list_seqs[t]=e.graphic_list_seqs[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_page_graphics_rsp=function(){function e(e){if(this.pages=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.pages=K.emptyArray,e.prototype.operate_expire_time=K.Long?K.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_page_graphics_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.pages&&r.pages.length||(r.pages=[]),r.pages.push($.proto_edu_v1_web.proto_get_page_graphics_info.decode(e,e.uint32()));break;case 2:r.operate_expire_time=e.uint64();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_page_graphics_rsp)return e;let t=new $.proto_edu_v1_web.proto_get_page_graphics_rsp;if(e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: array expected");t.pages=[];for(let o=0;o<e.pages.length;++o){if("object"!=typeof e.pages[o])throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_rsp.pages: object expected");t.pages[o]=$.proto_edu_v1_web.proto_get_page_graphics_info.fromObject(e.pages[o])}}return null!=e.operate_expire_time&&(K.Long?(t.operate_expire_time=K.Long.fromValue(e.operate_expire_time)).unsigned=!0:"string"==typeof e.operate_expire_time?t.operate_expire_time=parseInt(e.operate_expire_time,10):"number"==typeof e.operate_expire_time?t.operate_expire_time=e.operate_expire_time:"object"==typeof e.operate_expire_time&&(t.operate_expire_time=new K.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.pages=[]),t.defaults)if(K.Long){let e=new K.Long(0,0,!0);o.operate_expire_time=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.operate_expire_time=t.longs===String?"0":0;if(e.pages&&e.pages.length){o.pages=[];for(let r=0;r<e.pages.length;++r)o.pages[r]=$.proto_edu_v1_web.proto_get_page_graphics_info.toObject(e.pages[r],t)}return null!=e.operate_expire_time&&e.hasOwnProperty("operate_expire_time")&&("number"==typeof e.operate_expire_time?o.operate_expire_time=t.longs===String?String(e.operate_expire_time):e.operate_expire_time:o.operate_expire_time=t.longs===String?K.Long.prototype.toString.call(e.operate_expire_time):t.longs===Number?new K.LongBits(e.operate_expire_time.low>>>0,e.operate_expire_time.high>>>0).toNumber(!0):e.operate_expire_time),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_page_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.page=0,e.prototype.ret_graphic_list_seq=0,e.prototype.svr_graphic_list_seq=0,e.prototype.graphic_list=K.emptyArray,e.prototype.del_graphic_id_list=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_page_graphics_info;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.page=e.uint32();break;case 2:r.ret_graphic_list_seq=e.uint32();break;case 3:r.svr_graphic_list_seq=e.uint32();break;case 4:r.graphic_list&&r.graphic_list.length||(r.graphic_list=[]),r.graphic_list.push($.proto_edu_v1_web.proto_graphic.decode(e,e.uint32()));break;case 5:if(r.del_graphic_id_list&&r.del_graphic_id_list.length||(r.del_graphic_id_list=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.del_graphic_id_list.push(e.uint64())}else r.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_page_graphics_info)return e;let t=new $.proto_edu_v1_web.proto_get_page_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.ret_graphic_list_seq&&(t.ret_graphic_list_seq=e.ret_graphic_list_seq>>>0),null!=e.svr_graphic_list_seq&&(t.svr_graphic_list_seq=e.svr_graphic_list_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: array expected");t.graphic_list=[];for(let o=0;o<e.graphic_list.length;++o){if("object"!=typeof e.graphic_list[o])throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.graphic_list: object expected");t.graphic_list[o]=$.proto_edu_v1_web.proto_graphic.fromObject(e.graphic_list[o])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_v1_web.proto_get_page_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(let o=0;o<e.del_graphic_id_list.length;++o)K.Long?(t.del_graphic_id_list[o]=K.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new K.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.graphic_list=[],o.del_graphic_id_list=[]),t.defaults&&(o.page=0,o.ret_graphic_list_seq=0,o.svr_graphic_list_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(o.page=e.page),null!=e.ret_graphic_list_seq&&e.hasOwnProperty("ret_graphic_list_seq")&&(o.ret_graphic_list_seq=e.ret_graphic_list_seq),null!=e.svr_graphic_list_seq&&e.hasOwnProperty("svr_graphic_list_seq")&&(o.svr_graphic_list_seq=e.svr_graphic_list_seq),e.graphic_list&&e.graphic_list.length){o.graphic_list=[];for(let r=0;r<e.graphic_list.length;++r)o.graphic_list[r]=$.proto_edu_v1_web.proto_graphic.toObject(e.graphic_list[r],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){o.del_graphic_id_list=[];for(let r=0;r<e.del_graphic_id_list.length;++r)"number"==typeof e.del_graphic_id_list[r]?o.del_graphic_id_list[r]=t.longs===String?String(e.del_graphic_id_list[r]):e.del_graphic_id_list[r]:o.del_graphic_id_list[r]=t.longs===String?K.Long.prototype.toString.call(e.del_graphic_id_list[r]):t.longs===Number?new K.LongBits(e.del_graphic_id_list[r].low>>>0,e.del_graphic_id_list[r].high>>>0).toNumber(!0):e.del_graphic_id_list[r]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_user_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=K.emptyArray,e.prototype.graphic_auth=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_user_auth_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.id_name=e.string();break;case 2:r.auth_seq=e.uint32();break;case 3:if(r.module_auth&&r.module_auth.length||(r.module_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.module_auth.push(e.uint32())}else r.module_auth.push(e.uint32());break;case 4:if(r.graphic_auth&&r.graphic_auth.length||(r.graphic_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_auth.push(e.uint32())}else r.graphic_auth.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_user_auth_rsp)return e;let t=new $.proto_edu_v1_web.proto_get_user_auth_rsp;if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.module_auth: array expected");t.module_auth=[];for(let o=0;o<e.module_auth.length;++o)t.module_auth[o]=e.module_auth[o]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.proto_get_user_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(let o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.module_auth=[],o.graphic_auth=[]),t.defaults&&(o.id_name="",o.auth_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(o.id_name=e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(o.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){o.module_auth=[];for(let t=0;t<e.module_auth.length;++t)o.module_auth[t]=e.module_auth[t]}if(e.graphic_auth&&e.graphic_auth.length){o.graphic_auth=[];for(let t=0;t<e.graphic_auth.length;++t)o.graphic_auth[t]=e.graphic_auth[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.proto_get_room_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.auth_seq=0,e.prototype.module_auth=K.emptyArray,e.prototype.graphic_auth=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.proto_get_room_auth_rsp;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.auth_seq=e.uint32();break;case 2:if(r.module_auth&&r.module_auth.length||(r.module_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.module_auth.push(e.uint32())}else r.module_auth.push(e.uint32());break;case 3:if(r.graphic_auth&&r.graphic_auth.length||(r.graphic_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_auth.push(e.uint32())}else r.graphic_auth.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.proto_get_room_auth_rsp)return e;let t=new $.proto_edu_v1_web.proto_get_room_auth_rsp;if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.module_auth: array expected");t.module_auth=[];for(let o=0;o<e.module_auth.length;++o)t.module_auth[o]=e.module_auth[o]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.proto_get_room_auth_rsp.graphic_auth: array expected");t.graphic_auth=[];for(let o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.module_auth=[],o.graphic_auth=[]),t.defaults&&(o.auth_seq=0),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(o.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){o.module_auth=[];for(let t=0;t<e.module_auth.length;++t)o.module_auth[t]=e.module_auth[t]}if(e.graphic_auth&&e.graphic_auth.length){o.graphic_auth=[];for(let t=0;t<e.graphic_auth.length;++t)o.graphic_auth[t]=e.graphic_auth[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_set_mod=function(){function e(e){if(this.action_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.room_id="",e.prototype.mod_list_seq=0,e.prototype.action_list=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_set_mod;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.room_id=e.string();break;case 2:r.mod_list_seq=e.uint32();break;case 3:r.action_list&&r.action_list.length||(r.action_list=[]),r.action_list.push($.proto_edu_v1_web.push_set_mod_action.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_set_mod)return e;let t=new $.proto_edu_v1_web.push_set_mod;if(null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.mod_list_seq&&(t.mod_list_seq=e.mod_list_seq>>>0),e.action_list){if(!Array.isArray(e.action_list))throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: array expected");t.action_list=[];for(let o=0;o<e.action_list.length;++o){if("object"!=typeof e.action_list[o])throw TypeError(".proto_edu_v1_web.push_set_mod.action_list: object expected");t.action_list[o]=$.proto_edu_v1_web.push_set_mod_action.fromObject(e.action_list[o])}}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.action_list=[]),t.defaults&&(o.room_id="",o.mod_list_seq=0),null!=e.room_id&&e.hasOwnProperty("room_id")&&(o.room_id=e.room_id),null!=e.mod_list_seq&&e.hasOwnProperty("mod_list_seq")&&(o.mod_list_seq=e.mod_list_seq),e.action_list&&e.action_list.length){o.action_list=[];for(let r=0;r<e.action_list.length;++r)o.action_list[r]=$.proto_edu_v1_web.push_set_mod_action.toObject(e.action_list[r],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_set_mod_action=function(){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.action=0,e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=K.Long?K.Long.fromBits(0,0,!1):0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.prototype.is_modify_mod_scale=!1,e.prototype.mod_scale="",e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_set_mod_action;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.action=e.uint32();break;case 2:r.mod_id=e.uint64();break;case 3:r.mod_type=e.uint32();break;case 4:r.mod_subtype=e.uint32();break;case 5:r.mod_seq=e.uint32();break;case 6:r.mod_title=e.string();break;case 7:r.mod_pos=e.string();break;case 8:r.mod_status=e.uint64();break;case 9:r.mod_content=e.string();break;case 10:r.mod_extra=e.string();break;case 11:r.mod_reserve=e.uint32();break;case 12:r.mod_create_time=e.int64();break;case 13:r.is_modify_mod_title=e.bool();break;case 14:r.is_modify_mod_pos=e.bool();break;case 15:r.is_modify_mod_status=e.bool();break;case 16:r.is_modify_mod_content=e.bool();break;case 17:r.is_modify_mod_extra=e.bool();break;case 18:r.is_modify_mod_reserve=e.bool();break;case 19:r.mod_horizontal_percent=e.float();break;case 20:r.mod_vertical_percent=e.float();break;case 21:r.is_modify_mod_horizontal_percent=e.bool();break;case 22:r.is_modify_mod_vertical_percent=e.bool();break;case 23:r.is_modify_mod_scale=e.bool();break;case 24:r.mod_scale=e.string();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_set_mod_action)return e;let t=new $.proto_edu_v1_web.push_set_mod_action;return null!=e.action&&(t.action=e.action>>>0),null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),null!=e.mod_type&&(t.mod_type=e.mod_type>>>0),null!=e.mod_subtype&&(t.mod_subtype=e.mod_subtype>>>0),null!=e.mod_seq&&(t.mod_seq=e.mod_seq>>>0),null!=e.mod_title&&(t.mod_title=String(e.mod_title)),null!=e.mod_pos&&(t.mod_pos=String(e.mod_pos)),null!=e.mod_status&&(K.Long?(t.mod_status=K.Long.fromValue(e.mod_status)).unsigned=!0:"string"==typeof e.mod_status?t.mod_status=parseInt(e.mod_status,10):"number"==typeof e.mod_status?t.mod_status=e.mod_status:"object"==typeof e.mod_status&&(t.mod_status=new K.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0))),null!=e.mod_content&&(t.mod_content=String(e.mod_content)),null!=e.mod_extra&&(t.mod_extra=String(e.mod_extra)),null!=e.mod_reserve&&(t.mod_reserve=e.mod_reserve>>>0),null!=e.mod_create_time&&(K.Long?(t.mod_create_time=K.Long.fromValue(e.mod_create_time)).unsigned=!1:"string"==typeof e.mod_create_time?t.mod_create_time=parseInt(e.mod_create_time,10):"number"==typeof e.mod_create_time?t.mod_create_time=e.mod_create_time:"object"==typeof e.mod_create_time&&(t.mod_create_time=new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber())),null!=e.is_modify_mod_title&&(t.is_modify_mod_title=Boolean(e.is_modify_mod_title)),null!=e.is_modify_mod_pos&&(t.is_modify_mod_pos=Boolean(e.is_modify_mod_pos)),null!=e.is_modify_mod_status&&(t.is_modify_mod_status=Boolean(e.is_modify_mod_status)),null!=e.is_modify_mod_content&&(t.is_modify_mod_content=Boolean(e.is_modify_mod_content)),null!=e.is_modify_mod_extra&&(t.is_modify_mod_extra=Boolean(e.is_modify_mod_extra)),null!=e.is_modify_mod_reserve&&(t.is_modify_mod_reserve=Boolean(e.is_modify_mod_reserve)),null!=e.mod_horizontal_percent&&(t.mod_horizontal_percent=Number(e.mod_horizontal_percent)),null!=e.mod_vertical_percent&&(t.mod_vertical_percent=Number(e.mod_vertical_percent)),null!=e.is_modify_mod_horizontal_percent&&(t.is_modify_mod_horizontal_percent=Boolean(e.is_modify_mod_horizontal_percent)),null!=e.is_modify_mod_vertical_percent&&(t.is_modify_mod_vertical_percent=Boolean(e.is_modify_mod_vertical_percent)),null!=e.is_modify_mod_scale&&(t.is_modify_mod_scale=Boolean(e.is_modify_mod_scale)),null!=e.mod_scale&&(t.mod_scale=String(e.mod_scale)),t},e.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(o.action=0,K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(o.mod_type=0,o.mod_subtype=0,o.mod_seq=0,o.mod_title="",o.mod_pos="",K.Long){let e=new K.Long(0,0,!0);o.mod_status=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_status=t.longs===String?"0":0;if(o.mod_content="",o.mod_extra="",o.mod_reserve=0,K.Long){let e=new K.Long(0,0,!1);o.mod_create_time=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_create_time=t.longs===String?"0":0;o.is_modify_mod_title=!1,o.is_modify_mod_pos=!1,o.is_modify_mod_status=!1,o.is_modify_mod_content=!1,o.is_modify_mod_extra=!1,o.is_modify_mod_reserve=!1,o.mod_horizontal_percent=0,o.mod_vertical_percent=0,o.is_modify_mod_horizontal_percent=!1,o.is_modify_mod_vertical_percent=!1,o.is_modify_mod_scale=!1,o.mod_scale=""}return null!=e.action&&e.hasOwnProperty("action")&&(o.action=e.action),null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),null!=e.mod_type&&e.hasOwnProperty("mod_type")&&(o.mod_type=e.mod_type),null!=e.mod_subtype&&e.hasOwnProperty("mod_subtype")&&(o.mod_subtype=e.mod_subtype),null!=e.mod_seq&&e.hasOwnProperty("mod_seq")&&(o.mod_seq=e.mod_seq),null!=e.mod_title&&e.hasOwnProperty("mod_title")&&(o.mod_title=e.mod_title),null!=e.mod_pos&&e.hasOwnProperty("mod_pos")&&(o.mod_pos=e.mod_pos),null!=e.mod_status&&e.hasOwnProperty("mod_status")&&("number"==typeof e.mod_status?o.mod_status=t.longs===String?String(e.mod_status):e.mod_status:o.mod_status=t.longs===String?K.Long.prototype.toString.call(e.mod_status):t.longs===Number?new K.LongBits(e.mod_status.low>>>0,e.mod_status.high>>>0).toNumber(!0):e.mod_status),null!=e.mod_content&&e.hasOwnProperty("mod_content")&&(o.mod_content=e.mod_content),null!=e.mod_extra&&e.hasOwnProperty("mod_extra")&&(o.mod_extra=e.mod_extra),null!=e.mod_reserve&&e.hasOwnProperty("mod_reserve")&&(o.mod_reserve=e.mod_reserve),null!=e.mod_create_time&&e.hasOwnProperty("mod_create_time")&&("number"==typeof e.mod_create_time?o.mod_create_time=t.longs===String?String(e.mod_create_time):e.mod_create_time:o.mod_create_time=t.longs===String?K.Long.prototype.toString.call(e.mod_create_time):t.longs===Number?new K.LongBits(e.mod_create_time.low>>>0,e.mod_create_time.high>>>0).toNumber():e.mod_create_time),null!=e.is_modify_mod_title&&e.hasOwnProperty("is_modify_mod_title")&&(o.is_modify_mod_title=e.is_modify_mod_title),null!=e.is_modify_mod_pos&&e.hasOwnProperty("is_modify_mod_pos")&&(o.is_modify_mod_pos=e.is_modify_mod_pos),null!=e.is_modify_mod_status&&e.hasOwnProperty("is_modify_mod_status")&&(o.is_modify_mod_status=e.is_modify_mod_status),null!=e.is_modify_mod_content&&e.hasOwnProperty("is_modify_mod_content")&&(o.is_modify_mod_content=e.is_modify_mod_content),null!=e.is_modify_mod_extra&&e.hasOwnProperty("is_modify_mod_extra")&&(o.is_modify_mod_extra=e.is_modify_mod_extra),null!=e.is_modify_mod_reserve&&e.hasOwnProperty("is_modify_mod_reserve")&&(o.is_modify_mod_reserve=e.is_modify_mod_reserve),null!=e.mod_horizontal_percent&&e.hasOwnProperty("mod_horizontal_percent")&&(o.mod_horizontal_percent=t.json&&!isFinite(e.mod_horizontal_percent)?String(e.mod_horizontal_percent):e.mod_horizontal_percent),null!=e.mod_vertical_percent&&e.hasOwnProperty("mod_vertical_percent")&&(o.mod_vertical_percent=t.json&&!isFinite(e.mod_vertical_percent)?String(e.mod_vertical_percent):e.mod_vertical_percent),null!=e.is_modify_mod_horizontal_percent&&e.hasOwnProperty("is_modify_mod_horizontal_percent")&&(o.is_modify_mod_horizontal_percent=e.is_modify_mod_horizontal_percent),null!=e.is_modify_mod_vertical_percent&&e.hasOwnProperty("is_modify_mod_vertical_percent")&&(o.is_modify_mod_vertical_percent=e.is_modify_mod_vertical_percent),null!=e.is_modify_mod_scale&&e.hasOwnProperty("is_modify_mod_scale")&&(o.is_modify_mod_scale=e.is_modify_mod_scale),null!=e.mod_scale&&e.hasOwnProperty("mod_scale")&&(o.mod_scale=e.mod_scale),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_draw_page_graphics=function(){function e(e){if(this.page_graphics=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.page_graphics=K.emptyArray,e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_draw_page_graphics;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:r.page_graphics&&r.page_graphics.length||(r.page_graphics=[]),r.page_graphics.push($.proto_edu_v1_web.push_draw_graphics_info.decode(e,e.uint32()));break;case 3:r.timestamp=e.uint64();break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_draw_page_graphics)return e;let t=new $.proto_edu_v1_web.push_draw_page_graphics;if(null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.page_graphics){if(!Array.isArray(e.page_graphics))throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: array expected");t.page_graphics=[];for(let o=0;o<e.page_graphics.length;++o){if("object"!=typeof e.page_graphics[o])throw TypeError(".proto_edu_v1_web.push_draw_page_graphics.page_graphics: object expected");t.page_graphics[o]=$.proto_edu_v1_web.push_draw_graphics_info.fromObject(e.page_graphics[o])}}return null!=e.timestamp&&(K.Long?(t.timestamp=K.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.page_graphics=[]),t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(K.Long){let e=new K.Long(0,0,!0);o.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.page_graphics&&e.page_graphics.length){o.page_graphics=[];for(let r=0;r<e.page_graphics.length;++r)o.page_graphics[r]=$.proto_edu_v1_web.push_draw_graphics_info.toObject(e.page_graphics[r],t)}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?K.Long.prototype.toString.call(e.timestamp):t.longs===Number?new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_draw_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.page=0,e.prototype.action_seq=0,e.prototype.graphic_list=K.emptyArray,e.prototype.del_graphic_id_list=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_draw_graphics_info;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.page=e.uint32();break;case 2:r.action_seq=e.uint32();break;case 3:r.graphic_list&&r.graphic_list.length||(r.graphic_list=[]),r.graphic_list.push($.proto_edu_v1_web.proto_graphic.decode(e,e.uint32()));break;case 4:if(r.del_graphic_id_list&&r.del_graphic_id_list.length||(r.del_graphic_id_list=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.del_graphic_id_list.push(e.uint64())}else r.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_draw_graphics_info)return e;let t=new $.proto_edu_v1_web.push_draw_graphics_info;if(null!=e.page&&(t.page=e.page>>>0),null!=e.action_seq&&(t.action_seq=e.action_seq>>>0),e.graphic_list){if(!Array.isArray(e.graphic_list))throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: array expected");t.graphic_list=[];for(let o=0;o<e.graphic_list.length;++o){if("object"!=typeof e.graphic_list[o])throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.graphic_list: object expected");t.graphic_list[o]=$.proto_edu_v1_web.proto_graphic.fromObject(e.graphic_list[o])}}if(e.del_graphic_id_list){if(!Array.isArray(e.del_graphic_id_list))throw TypeError(".proto_edu_v1_web.push_draw_graphics_info.del_graphic_id_list: array expected");t.del_graphic_id_list=[];for(let o=0;o<e.del_graphic_id_list.length;++o)K.Long?(t.del_graphic_id_list[o]=K.Long.fromValue(e.del_graphic_id_list[o])).unsigned=!0:"string"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=parseInt(e.del_graphic_id_list[o],10):"number"==typeof e.del_graphic_id_list[o]?t.del_graphic_id_list[o]=e.del_graphic_id_list[o]:"object"==typeof e.del_graphic_id_list[o]&&(t.del_graphic_id_list[o]=new K.LongBits(e.del_graphic_id_list[o].low>>>0,e.del_graphic_id_list[o].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.graphic_list=[],o.del_graphic_id_list=[]),t.defaults&&(o.page=0,o.action_seq=0),null!=e.page&&e.hasOwnProperty("page")&&(o.page=e.page),null!=e.action_seq&&e.hasOwnProperty("action_seq")&&(o.action_seq=e.action_seq),e.graphic_list&&e.graphic_list.length){o.graphic_list=[];for(let r=0;r<e.graphic_list.length;++r)o.graphic_list[r]=$.proto_edu_v1_web.proto_graphic.toObject(e.graphic_list[r],t)}if(e.del_graphic_id_list&&e.del_graphic_id_list.length){o.del_graphic_id_list=[];for(let r=0;r<e.del_graphic_id_list.length;++r)"number"==typeof e.del_graphic_id_list[r]?o.del_graphic_id_list[r]=t.longs===String?String(e.del_graphic_id_list[r]):e.del_graphic_id_list[r]:o.del_graphic_id_list[r]=t.longs===String?K.Long.prototype.toString.call(e.del_graphic_id_list[r]):t.longs===Number?new K.LongBits(e.del_graphic_id_list[r].low>>>0,e.del_graphic_id_list[r].high>>>0).toNumber(!0):e.del_graphic_id_list[r]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_clear_page_graphics=function(){function e(e){if(this.pages=[],this.action_seqs=[],this.layers=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mod_id=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.pages=K.emptyArray,e.prototype.action_seqs=K.emptyArray,e.prototype.id_name="",e.prototype.nick_name="",e.prototype.timestamp=K.Long?K.Long.fromBits(0,0,!0):0,e.prototype.layers=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_clear_page_graphics;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.mod_id=e.uint64();break;case 2:if(r.pages&&r.pages.length||(r.pages=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.pages.push(e.uint32())}else r.pages.push(e.uint32());break;case 3:if(r.action_seqs&&r.action_seqs.length||(r.action_seqs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.action_seqs.push(e.uint32())}else r.action_seqs.push(e.uint32());break;case 4:r.id_name=e.string();break;case 5:r.nick_name=e.string();break;case 6:r.timestamp=e.uint64();break;case 7:if(r.layers&&r.layers.length||(r.layers=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.layers.push(e.uint32())}else r.layers.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_clear_page_graphics)return e;let t=new $.proto_edu_v1_web.push_clear_page_graphics;if(null!=e.mod_id&&(K.Long?(t.mod_id=K.Long.fromValue(e.mod_id)).unsigned=!0:"string"==typeof e.mod_id?t.mod_id=parseInt(e.mod_id,10):"number"==typeof e.mod_id?t.mod_id=e.mod_id:"object"==typeof e.mod_id&&(t.mod_id=new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0))),e.pages){if(!Array.isArray(e.pages))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.pages: array expected");t.pages=[];for(let o=0;o<e.pages.length;++o)t.pages[o]=e.pages[o]>>>0}if(e.action_seqs){if(!Array.isArray(e.action_seqs))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.action_seqs: array expected");t.action_seqs=[];for(let o=0;o<e.action_seqs.length;++o)t.action_seqs[o]=e.action_seqs[o]>>>0}if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.nick_name&&(t.nick_name=String(e.nick_name)),null!=e.timestamp&&(K.Long?(t.timestamp=K.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),e.layers){if(!Array.isArray(e.layers))throw TypeError(".proto_edu_v1_web.push_clear_page_graphics.layers: array expected");t.layers=[];for(let o=0;o<e.layers.length;++o)t.layers[o]=e.layers[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.pages=[],o.action_seqs=[],o.layers=[]),t.defaults){if(K.Long){let e=new K.Long(0,0,!0);o.mod_id=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.mod_id=t.longs===String?"0":0;if(o.id_name="",o.nick_name="",K.Long){let e=new K.Long(0,0,!0);o.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else o.timestamp=t.longs===String?"0":0}if(null!=e.mod_id&&e.hasOwnProperty("mod_id")&&("number"==typeof e.mod_id?o.mod_id=t.longs===String?String(e.mod_id):e.mod_id:o.mod_id=t.longs===String?K.Long.prototype.toString.call(e.mod_id):t.longs===Number?new K.LongBits(e.mod_id.low>>>0,e.mod_id.high>>>0).toNumber(!0):e.mod_id),e.pages&&e.pages.length){o.pages=[];for(let t=0;t<e.pages.length;++t)o.pages[t]=e.pages[t]}if(e.action_seqs&&e.action_seqs.length){o.action_seqs=[];for(let t=0;t<e.action_seqs.length;++t)o.action_seqs[t]=e.action_seqs[t]}if(null!=e.id_name&&e.hasOwnProperty("id_name")&&(o.id_name=e.id_name),null!=e.nick_name&&e.hasOwnProperty("nick_name")&&(o.nick_name=e.nick_name),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?K.Long.prototype.toString.call(e.timestamp):t.longs===Number?new K.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),e.layers&&e.layers.length){o.layers=[];for(let t=0;t<e.layers.length;++t)o.layers[t]=e.layers[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_user_auth=function(){function e(e){if(this.user_auth=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.user_auth=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_user_auth;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.user_auth&&r.user_auth.length||(r.user_auth=[]),r.user_auth.push($.proto_edu_v1_web.push_user_auth_data.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_user_auth)return e;let t=new $.proto_edu_v1_web.push_user_auth;if(e.user_auth){if(!Array.isArray(e.user_auth))throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: array expected");t.user_auth=[];for(let o=0;o<e.user_auth.length;++o){if("object"!=typeof e.user_auth[o])throw TypeError(".proto_edu_v1_web.push_user_auth.user_auth: object expected");t.user_auth[o]=$.proto_edu_v1_web.push_user_auth_data.fromObject(e.user_auth[o])}}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.user_auth=[]),e.user_auth&&e.user_auth.length){o.user_auth=[];for(let r=0;r<e.user_auth.length;++r)o.user_auth[r]=$.proto_edu_v1_web.push_user_auth_data.toObject(e.user_auth[r],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_user_auth_data=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=K.emptyArray,e.prototype.graphic_auth=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_user_auth_data;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.id_name=e.string();break;case 2:r.auth_seq=e.uint32();break;case 3:if(r.module_auth&&r.module_auth.length||(r.module_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.module_auth.push(e.uint32())}else r.module_auth.push(e.uint32());break;case 4:if(r.graphic_auth&&r.graphic_auth.length||(r.graphic_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_auth.push(e.uint32())}else r.graphic_auth.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_user_auth_data)return e;let t=new $.proto_edu_v1_web.push_user_auth_data;if(null!=e.id_name&&(t.id_name=String(e.id_name)),null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.push_user_auth_data.module_auth: array expected");t.module_auth=[];for(let o=0;o<e.module_auth.length;++o)t.module_auth[o]=e.module_auth[o]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.push_user_auth_data.graphic_auth: array expected");t.graphic_auth=[];for(let o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.module_auth=[],o.graphic_auth=[]),t.defaults&&(o.id_name="",o.auth_seq=0),null!=e.id_name&&e.hasOwnProperty("id_name")&&(o.id_name=e.id_name),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(o.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){o.module_auth=[];for(let t=0;t<e.module_auth.length;++t)o.module_auth[t]=e.module_auth[t]}if(e.graphic_auth&&e.graphic_auth.length){o.graphic_auth=[];for(let t=0;t<e.graphic_auth.length;++t)o.graphic_auth[t]=e.graphic_auth[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e.push_room_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.auth_seq=0,e.prototype.module_auth=K.emptyArray,e.prototype.graphic_auth=K.emptyArray,e.decode=function(e,t){e instanceof Y||(e=Y.create(e));let o=void 0===t?e.len:e.pos+t,r=new $.proto_edu_v1_web.push_room_auth;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:r.auth_seq=e.uint32();break;case 2:if(r.module_auth&&r.module_auth.length||(r.module_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.module_auth.push(e.uint32())}else r.module_auth.push(e.uint32());break;case 3:if(r.graphic_auth&&r.graphic_auth.length||(r.graphic_auth=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.graphic_auth.push(e.uint32())}else r.graphic_auth.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.fromObject=function(e){if(e instanceof $.proto_edu_v1_web.push_room_auth)return e;let t=new $.proto_edu_v1_web.push_room_auth;if(null!=e.auth_seq&&(t.auth_seq=e.auth_seq>>>0),e.module_auth){if(!Array.isArray(e.module_auth))throw TypeError(".proto_edu_v1_web.push_room_auth.module_auth: array expected");t.module_auth=[];for(let o=0;o<e.module_auth.length;++o)t.module_auth[o]=e.module_auth[o]>>>0}if(e.graphic_auth){if(!Array.isArray(e.graphic_auth))throw TypeError(".proto_edu_v1_web.push_room_auth.graphic_auth: array expected");t.graphic_auth=[];for(let o=0;o<e.graphic_auth.length;++o)t.graphic_auth[o]=e.graphic_auth[o]>>>0}return t},e.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.module_auth=[],o.graphic_auth=[]),t.defaults&&(o.auth_seq=0),null!=e.auth_seq&&e.hasOwnProperty("auth_seq")&&(o.auth_seq=e.auth_seq),e.module_auth&&e.module_auth.length){o.module_auth=[];for(let t=0;t<e.module_auth.length;++t)o.module_auth[t]=e.module_auth[t]}if(e.graphic_auth&&e.graphic_auth.length){o.graphic_auth=[];for(let t=0;t<e.graphic_auth.length;++t)o.graphic_auth[t]=e.graphic_auth[t]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,X.util.toJSONOptions)},e}(),e})();var ee,te=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},re=function(){function e(){this.proto=$,this.protocol=new Uint8Array(["0".charCodeAt(0),"1".charCodeAt(0)]),this.cmdReqMap={"/eduv1/sync":"proto_sync","/eduv1/get_room_auth":"proto_get_room_auth_req","/eduv1/get_user_auth":"proto_get_user_auth_req","/eduv1/create_mod":"proto_create_mod","/eduv1/destroy_mod":"proto_destroy_mod","/eduv1/get_mod":"proto_get_mod","/eduv1/get_mod_list":"proto_get_mod_list","/eduv1/modify_mod":"proto_modify_mod","/eduv1/get_page_graphics":"proto_get_page_graphics","/eduv1/clear_page_graphics":"proto_clear_page_graphics","/eduv1/draw_page_graphics":"proto_draw_page_graphics"},this.cmdRspMap={"/eduv1/sync":"proto_sync_rsp","/eduv1/get_room_auth":"proto_get_room_auth_rsp","/eduv1/get_user_auth":"proto_get_user_auth_rsp","/eduv1/create_mod":"proto_create_mod_rsp","/eduv1/destroy_mod":"proto_destroy_mod_rsp","/eduv1/get_mod":"proto_get_mod_rsp","/eduv1/get_mod_list":"proto_get_mod_list_rsp","/eduv1/modify_mod":"proto_modify_mod_rsp","/eduv1/get_page_graphics":"proto_get_page_graphics_rsp","/eduv1/clear_page_graphics":"proto_clear_page_graphics_rsp","/eduv1/draw_page_graphics":"proto_draw_page_graphics_rsp"},this.cmdPushMap={291101:"push_set_mod",291203:"push_draw_page_graphics",291204:"push_clear_page_graphics",291501:"push_user_auth",291502:"push_room_auth"},this.cmdMsg={reqHeader:"proto_req_header",reqBody:"proto_biz_channel",reqBodyBody:"req",rspHeader:"proto_rsp_header",rspBody:"proto_biz_channel_rsp",rspBodyBody:"rsp",pushHeader:"proto_push_header",pushBody:"proto_push_biz_channel",pushBodyBody:"proto_push_biz_hannel_req"}}return e.prototype.encodeMsg=function(e,t,o){return te(this,void 0,void 0,(function(){var r,i,n,a,s,c,l;return oe(this,(function(u){switch(u.label){case 0:return this.formatEduBody(o.body),JSON.stringify(o),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqHeader,t)];case 1:return r=u.sent(),i=r.length,[4,this.encode(this.proto.proto_edu_v1_web,this.cmdReqMap[e],o.body)];case 2:return n=u.sent(),[4,this.encode(this.proto.proto_biz_channel,this.cmdMsg.reqBodyBody,{req_header:o.header,body:n})];case 3:return a=u.sent(),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqBody,{channel:"edu",cmd:e,req_body:a})];case 4:return s=u.sent(),c=s.length,(l=new Uint8Array(8+i+c)).set(this.protocol),l[2]=i>>8,l[3]=i-(l[2]<<8),l.set(new Uint8Array(Int32Array.from([c]).buffer).reverse(),4),l.set(r,8),l.set(s,8+i),[2,l]}}))}))},e.prototype.decodeMsg=function(e){return te(this,void 0,void 0,(function(){var t,o,r;return oe(this,(function(i){switch(i.label){case 0:t=new Uint8Array(e),o=(t[2]<<8)+t[3],i.label=1;case 1:return i.trys.push([1,4,,7]),[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.rspHeader,t.slice(8,8+o))];case 2:return r=i.sent(),[4,this.decodeRspMsg(t.slice(8+o),r.seq)];case 3:return[2,i.sent()];case 4:return i.sent(),[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushHeader,t.slice(8,8+o))];case 5:return i.sent(),[4,this.decodePushMsg(t.slice(8+o))];case 6:return[2,i.sent()];case 7:return[2]}}))}))},e.prototype.checkSendLength=function(e,t){return te(this,void 0,void 0,(function(){var o,r,i,n;return oe(this,(function(a){switch(a.label){case 0:return this.formatEduBody(t.body),[4,this.encode(this.proto.proto_edu_v1_web,this.cmdReqMap[e],t.body)];case 1:return o=a.sent(),[4,this.encode(this.proto.proto_biz_channel,this.cmdMsg.reqBodyBody,{req_header:t.header,body:o})];case 2:return r=a.sent(),[4,this.encode(this.proto.proto_access_pb,this.cmdMsg.reqBody,{channel:"edu",cmd:e,req_body:r})];case 3:return i=a.sent(),[2,(n=i.length)>5e3?n:0]}}))}))},e.prototype.createUnknownError=function(e,t){return{cmd:t,header:{seq:e,code:1,message:"unknown error"},body:{}}},e.prototype.formatEduBody=function(e){e.mod_id&&(e.mod_id=J.a.fromString(e.mod_id,!0)),e.draw_pages&&e.draw_pages.forEach((function(e){e.draw_list.forEach((function(e){var t=e.graphic_id;t&&"string"==typeof t&&(e.graphic_id=J.a.fromString(t,!0))}))}))},e.prototype.mergeModList=function(e){e&&e.forEach((function(t,o){e[o]=Object.assign({mod_seq:0,graphic_list_seq:0,sync_interval:0,mod_reserve:1,mod_horizontal_percent:0,mod_vertical_percent:0,mod_extra:"",mod_scale:JSON.stringify({scale:1,ofs_x:0,ofs_y:0})},t)}))},e.prototype.mergePageGraphics=function(e,t){e&&e.forEach((function(o,r){e[r]=o||0,t&&(t[r]=t[r]||0)}))},e.prototype.mergeGraphicList=function(e){e&&e.forEach((function(t,o){e[o]=Object.assign({action_seq:0,zorder:1,x:0,y:0,size:0,color:0,layer:0},t)}))},e.prototype.mergeRspBody=function(e,t){var o=this;switch(t){case"/eduv1/sync":return e=Object.assign({sync_interval:0,room_auth_seq:0,user_auth_seq:0,mod_list_seq:0},e);case"/eduv1/get_room_auth":case"/eduv1/get_user_auth":return e.auth_seq=e.auth_seq||0,e;case"/eduv1/create_mod":return e.mod_seq=e.mod_seq||0,e.mod_list_seq=e.mod_list_seq||0,e;case"/eduv1/destroy_mod":return e.mod_list_seq=e.mod_list_seq||0,e;case"/eduv1/get_mod":return this.mergeModList(e.mod_list),e;case"/eduv1/get_mod_list":return e.mod_list_seq=e.mod_list_seq||0,this.mergeModList(e.mod_list),e;case"/eduv1/modify_mod":return e.mod_seq=e.mod_seq||0,e.mod_list_seq=e.mod_list_seq||0,e;case"/eduv1/get_page_graphics":return e.pages&&e.pages.forEach((function(e){e.page=e.page||0,e.ret_graphic_list_seq=e.ret_graphic_list_seq||0,e.svr_graphic_list_seq=e.svr_graphic_list_seq||0,o.mergeGraphicList(e.graphic_list)})),e;case"/eduv1/clear_page_graphics":case"/eduv1/draw_page_graphics":return this.mergePageGraphics(e.pages,e.graphic_list_seqs),e}},e.prototype.mergePushBody=function(e,t){var o=this;switch(t){case 291101:return e.mod_list_seq=e.mod_list_seq||0,e.action_list&&e.action_list.forEach((function(e){e.is_modify_mod_extra&&(e.mod_extra=e.mod_extra||""),e.is_modify_mod_reserve&&(e.mod_reserve=e.mod_reserve||1),e.is_modify_mod_horizontal_percent&&(e.mod_horizontal_percent=e.mod_horizontal_percent||0),e.is_modify_mod_vertical_percent&&(e.mod_vertical_percent=e.mod_vertical_percent||0),e.is_modify_mod_scale&&(e.mod_scale=e.mod_scale||JSON.stringify({scale:1,ofs_x:0,ofs_y:0}))})),e;case 291203:return e.page_graphics&&e.page_graphics.forEach((function(e){e.page=e.page||0,e.action_seq=e.action_seq||0,o.mergeGraphicList(e.graphic_list)})),e;case 291204:return e.pages&&e.pages.forEach((function(t,o){e.pages[o]=t||0,e.action_seqs&&(e.action_seqs[o]=e.action_seqs[o]||0)})),e;case 291501:case 291502:return e.auth_seq=e.auth_seq||0,e}},e.prototype.encode=function(e,t,o){return te(this,void 0,void 0,(function(){var r;return oe(this,(function(i){return[2,(r=e[t]).encode(r.create(o)).finish()]}))}))},e.prototype.decode=function(e,t,o){return te(this,void 0,void 0,(function(){var r;return oe(this,(function(i){return[2,(r=e[t]).toObject(r.decode(o),{longs:String})]}))}))},e.prototype.decodeRspMsg=function(e,t){return te(this,void 0,void 0,(function(){var o,r,i,n;return oe(this,(function(a){switch(a.label){case 0:return[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.rspBody,e)];case 1:return o=a.sent(),r=o.cmd,o.rsp_body?[4,this.decode(this.proto.proto_biz_channel,this.cmdMsg.rspBodyBody,o.rsp_body)]:[3,9];case 2:if(i=a.sent(),o.rsp_body=i,o.rsp_body.cmd=r,o.rsp_body.header.code||(o.rsp_body.header.code=o.err_code?+String(o.err_code).replace(/^10+/g,""):0),!o.rsp_body.body)return[3,7];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.decode(this.proto.proto_edu_v1_web,this.cmdRspMap[r],o.rsp_body.body)];case 4:return n=a.sent(),o.rsp_body.body=this.mergeRspBody(n,r),[3,6];case 5:return a.sent(),[3,6];case 6:return[3,8];case 7:o.rsp_body.body={},a.label=8;case 8:return[3,10];case 9:o.rsp_body=this.createUnknownError(t,r),a.label=10;case 10:return[2,o.rsp_body]}}))}))},e.prototype.decodePushMsg=function(e){return te(this,void 0,void 0,(function(){var t,o,r,i;return oe(this,(function(n){switch(n.label){case 0:return[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushBody,e)];case 1:return(t=n.sent()).req_body?[4,this.decode(this.proto.proto_access_pb,this.cmdMsg.pushBodyBody,t.req_body)]:[3,9];case 2:if(o=n.sent(),t.req_body=o,r=this.cmdPushMap[t.req_body.sub_cmd],!t.req_body.msg_body)return[3,7];n.label=3;case 3:return n.trys.push([3,5,,6]),[4,this.decode(this.proto.proto_edu_v1_web,r,t.req_body.msg_body)];case 4:return i=n.sent(),t.req_body.msg_body=this.mergePushBody(i,t.req_body.sub_cmd),[3,6];case 5:return n.sent(),[3,6];case 6:return[3,8];case 7:t.req_body.msg_body={},n.label=8;case 8:return[3,10];case 9:t.req_body={msg_body:{},sub_cmd:0},n.label=10;case 10:return this.cmdPushMap[t.req_body.sub_cmd]||"",[2,t.req_body]}}))}))},e}(),ie=m.b.bind(null,"wb.s.");!function(e){e.Login="login",e.Reload="reload",e.Unload="unload"}(ee||(ee={}));var ne,ae=function(){function e(e){var t;this.roomState="DISCONNECTED",this.roomListenerList=((t={})[ee.Login]=[],t[ee.Reload]=[],t[ee.Unload]=[],t),this.pbReqCallbackMap={},this.isRegistedEvent=!1,this.isSendPB=!1,this.zegoWebRTC=e,this.webrtcVersion=e.getVersion(),this.init()}return e.prototype.init=function(){this.zegoWebRTC.setDebugVerbose&&this.zegoWebRTC.setDebugVerbose(!1),this.isSendPB&&(this.eduProtobuf=new re,this.zegoWebRTC.setProtoFormat("pb")),this.zegoWebRTC.setSdkLoginRelateService&&this.zegoWebRTC.setSdkLoginRelateService(["edusvr"]),this.bindRoomStateUpdate()},e.prototype.bindRoomStateUpdate=function(){var e=this,t=function(t,o){e.roomState=o,"CONNECTED"===o?e.actionRoomListener(ee.Reload):"DISCONNECTED"===o&&e.actionRoomListener(ee.Unload)};this.webrtcVersion<"2.0"?this.zegoWebRTC.bindListener("roomStateUpdate",t):this.zegoWebRTC._on("_roomStateUpdate",t)},e.prototype.getSocket=function(){var e;return this.zegoWebRTC.socketCenter||(null===(e=this.zegoWebRTC.modules)||void 0===e?void 0:e.service)},e.prototype.getState=function(){return this.zegoWebRTC.stateCenter},e.prototype.createJsonReqBody=function(e){return{header:{sdk_version:1,id_name:this.getUserID()},body:JSON.stringify(e)}},e.prototype.createPbReqBody=function(e){return{header:{sdk_version:1,id_name:this.getUserID()},body:e}},e.prototype.sendJsonMessage=function(e,t,o){var r=this;this.getSocket().sendMessage("biz_channel",{channel:"edu",cmd:e,req_body:JSON.stringify(this.createJsonReqBody(t))},(function(t,i,n){try{var a=void 0;a=r.webrtcVersion<"2.0"?r.rspSuccessHandle(n):r.rspSuccessHandle(t.body.rsp_body),m.a.info(ie("sk.rsp"),"cmd="+e+",body="+JSON.stringify(a)),o(a)}catch(e){}}),(function(t,i,n,a){try{var s=void 0;s=r.webrtcVersion<"2.0"?"[object Object]"===Object.prototype.toString.call(t)?{header:{code:t.code,message:t.msg}}:r.rspErrorHandle(n):r.rspErrorHandle(t.body.rsp_body),m.a.info(ie("sk.rsp"),"cmd="+e+",body="+JSON.stringify(s)),o(s)}catch(e){}}))},e.prototype.sendPbMessage=function(e,t,o){var r=this,i=this.zegoWebRTC.getHeader("biz_channel");this.eduProtobuf.encodeMsg(e,i,this.createPbReqBody(t)).then((function(e){r.pbReqCallbackMap[i.seq]=o,r.zegoWebRTC.sendPB(e)})).catch((function(e){m.a.error(ie("sk.req"),e)}))},e.prototype.handleJsonResponse=function(e,t){try{var o=JSON.parse(e.body.req_body);o.msg_body=JSON.parse(o.msg_body),m.a.info(ie("sk.push"),JSON.stringify(o)),t(o)}catch(e){}},e.prototype.handlePbResponse=function(e,t){var o=this;this.eduProtobuf.decodeMsg(e).then((function(e){var r;if(e.cmd&&e.header){m.a.info(ie("sk.rsp"),"cmd="+e.cmd+",body="+JSON.stringify(e));var i=null===(r=e.header)||void 0===r?void 0:r.seq;o.pbReqCallbackMap[i]&&o.pbReqCallbackMap[i](e)}else m.a.info(ie("sk.push"),JSON.stringify(e)),t(e)})).catch((function(e){m.a.error(ie("sk.rsp"),e)}))},e.prototype.rspSuccessHandle=function(e){var t=JSON.parse(e);return t.body=t.body?JSON.parse(t.body):{},t},e.prototype.rspErrorHandle=function(e){var t=JSON.parse(e).header;return{header:{code:t.code,message:t.message}}},e.prototype.actionRoomListener=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.roomListenerList[e]&&this.roomListenerList[e].forEach((function(e){e.apply(void 0,t)}))},e.prototype.loginRoom=function(e,t,o,r){var i,n=this;return m.a.initRoom({roomid:e,userid:o&&o.userID||"",token:t,logLevel:null===(i=this.zegoWebRTC.logger)||void 0===i?void 0:i.logLevel}),this.zegoWebRTC.loginRoom(e,t,o,r).then((function(e){return n.actionRoomListener(ee.Login),e}))},e.prototype.logoutRoom=function(e){this.actionRoomListener(ee.Unload),this.zegoWebRTC.logoutRoom(e)},e.prototype.checkSendLength=function(e){var t=_.DrawPageGraphics;if(this.isSendPB)return this.eduProtobuf.checkSendLength(t,this.createPbReqBody(e));var o=JSON.stringify({body:{channel:"edu",cmd:t,req_body:JSON.stringify(this.createJsonReqBody(e))}}).length;return Promise.resolve(o>4800?o:0)},e.prototype.registerWbMessage=function(e){var t=this;this.isSendPB&&(this.isRegistedEvent&&this.zegoWebRTC.off("_protobufResponse"),this.zegoWebRTC.on("_protobufResponse",(function(o){return t.handlePbResponse(o,e)})),this.isRegistedEvent=!0);var o=this.webrtcVersion<"2.0"?"registerRouter":"on";this.getSocket()[o]("push_biz_channel",(function(o){return t.handleJsonResponse(o,e)}))},e.prototype.queueWSCmdHandler=function(e,t){var o=this;return new Promise((function(r){m.a.info(ie("sk.req"),"cmd="+e+",body="+JSON.stringify(t)),o.isSendPB?o.sendPbMessage(e,t,r):o.sendJsonMessage(e,t,r)}))},e.prototype.getUserID=function(){return this.getState().idName},e.prototype.getRoomID=function(){return this.getState().roomid},e.prototype.getServerTimeOffset=function(){return this.getState().serverTimeOffset||0},e.prototype.getRoomState=function(){return this.roomState},e.prototype.on=function(e,t){return!!this.roomListenerList[e]&&("function"==typeof t&&(-1==this.roomListenerList[e].indexOf(t)&&this.roomListenerList[e].push(t),!0))},e.prototype.off=function(e,t){if(!this.roomListenerList[e])return!1;var o=this.roomListenerList[e];return t?o.splice(o.indexOf(t),1):this.roomListenerList[e]=[],!0},e}(),se=function(){function e(e){this.module=e}return e.prototype.actionListener=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];j.e.emit(e,t)},e.prototype.bindListener=function(e,t){j.e.on(e,t)},e.prototype.pushRemovedMod=function(e){this.module.pushRemovedMod(e)},e.prototype.pushAddMod=function(e){this.module.pushAddMod(e)},e.prototype.pushModifyMod=function(e){if(e){var t=e.mod_id,o=e.mod_seq,r=e.mod_title,n=e.mod_horizontal_percent,a=e.mod_vertical_percent,s=e.mod_reserve,c=e.mod_extra,l=e.mod_scale,u=e.is_modify_mod_vertical_percent,h=e.is_modify_mod_horizontal_percent,d=e.is_modify_mod_reserve,p=e.is_modify_mod_title,f=e.is_modify_mod_extra,g=e.is_modify_mod_scale;if(this.module.getMap(t))if(this.module.getModSendSwitch(t)){var m={whiteboardID:t,modSeq:o};this.module.updateMap(m),this.updateMapByModifyModOption(e,o,!0)}else{var _={mod_id:t};p&&Object.assign(_,{mod_title:r,is_modify_mod_title:p}),f&&Object.assign(_,{mod_extra:c,is_modify_mod_extra:f}),h&&Object.assign(_,{mod_horizontal_percent:n,is_modify_mod_horizontal_percent:h}),u&&Object.assign(_,{mod_vertical_percent:a,is_modify_mod_vertical_percent:u,mod_reserve:s,is_modify_mod_reserve:d}),d&&Object.assign(_,{mod_reserve:s,is_modify_mod_reserve:d}),g&&Object.assign(_,{mod_scale:l,is_modify_mod_scale:g}),this.module.updateModifyModTaskList({status:i.Pending,data:_,push:!0,pushModSeq:o})}}},e.prototype.updateMapByModifyModOption=function(e,t,o){var r,i=e.mod_id,n=e.mod_title,a=e.mod_horizontal_percent,s=e.mod_vertical_percent,c=e.mod_reserve,l=e.mod_scale,u=e.is_modify_mod_horizontal_percent,h=e.is_modify_mod_vertical_percent,d=e.is_modify_mod_reserve,p=e.is_modify_mod_title,f=e.is_modify_mod_extra,g=e.is_modify_mod_scale,m=this.module.decodeH5Extra(e.mod_extra),_=this.module.getMap(i),y={isPushScroll:!1,horizontalPercent:_.horizontalPercent,verticalPercent:_.verticalPercent,pptStep:_.pptStep};if(u){y.isPushScroll=!0,y.horizontalPercent=+a||0;var v={whiteboardID:i,horizontalPercent:y.horizontalPercent,modPropSeq:{mod_horizontal_percent:t}};this.module.updateMap(v)}if(h){y.isPushScroll=!0,y.verticalPercent=+s||0,y.pptStep=+c;var b={whiteboardID:i,verticalPercent:y.verticalPercent,pptStep:y.pptStep,modPropSeq:{mod_vertical_percent:t}};this.module.updateMap(b)}if(d){y.isPushScroll=!0,y.pptStep=+c;var w={whiteboardID:i,pptStep:y.pptStep,modPropSeq:{mod_reserve:t}};this.module.updateMap(w)}if(y.isPushScroll&&o&&(this.module.pushScrollHandle(i,y.horizontalPercent,y.verticalPercent,y.pptStep),this.module.updateMap({whiteboardID:i,modExtra:""}),r=e),p){var S={whiteboardID:i,name:n,modPropSeq:{mod_title:t}};this.module.updateMap(S)}if(f){var I={whiteboardID:i,modExtra:m,modPropSeq:{mod_extra:t}};if(o){var x=this.module.checkH5Extra(i,m,!0);x&&(this.module.pushExtraHandle(i,x),r=e)}this.module.updateMap(I)}if(g){var E=JSON.parse(l);I={whiteboardID:i,modScale:E,modPropSeq:{mod_scale:t}};o&&this.module.pushScaleHandle(i,E.scale,E.ofs_x,E.ofs_y),this.module.updateMap(I)}return r},e.prototype.parseGraphicsHandle=function(e){var t=this,o=e.page_graphics,r=e.mod_id,i=this.module.checkModInfo(r);if(i){var n=i.width,a={},s=[],c=[];return o.forEach((function(e){var o=e.del_graphic_id_list,r=e.graphic_list,i=e.action_seq,l=e.page;t.transGraphicList(c,r,n),o&&s.push.apply(s,o),a[l]=i})),{whiteboardID:r,graphicList:c=JSON.parse(JSON.stringify(c)),delGraphicIdList:s,graphicListSeqs:a}}},e.prototype.pushDrawPageGraphicsHandle=function(e){var t=e.whiteboardID,o=e.graphicListSeqs,r=e.graphicList,i=e.delGraphicIdList;this.module.updateMapByGraphicListSeqs(t,o),j.e.emit(j.c.PushDrawPageGraphics,t,r,i)},e.prototype.transGraphicList=function(e,t,o){var r=this;t&&t.length&&t.forEach((function(t){e.some((function(e){return e.graphic_id===t.graphic_id}))||(t.zorder>r.module.zorderSeq&&(r.module.zorderSeq=t.zorder),O(t,!0),r.module.setGraphicItem(t),C(t,o,!0),t.color=Object(v.s)(t.color,!0),e.push(t))}))},e.prototype.pushClearPageGraphicsHandle=function(e){this.module.pushClearPageGraphicsHandle(e)},e}(),ce=(ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}ne(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),le=function(e){function t(t){var o=e.call(this,"web")||this;return o.socket=new ae(t),o.module=new G(o.socket),o.graphic=new B(o.socket,o.module),o.init(),o}return ce(t,e),t.prototype.init=function(){var e=this;this.socket.on("login",(function(){e.isPlayback||(e.module.onRemotePush(),e.module.getRemoteAuth())})),this.socket.on("reload",(function(){e.isPlayback||e.module.reload()})),this.socket.on("unload",(function(){e.isPlayback||e.module.unload()}))},t.prototype.enablePlayback=function(){this.isPlayback=!0,this.socket.isSendPB=!1,this.execute=new se(this.module)},t.prototype.loginRoom=function(e,t,o,r){return this.socket.loginRoom(e,t,o,r)},t.prototype.logoutRoom=function(e){return this.socket.logoutRoom(e)},t.prototype.getGraphicIsEndDraw=function(e){return this.graphic.getGraphicIsEndDraw(e)},t.prototype.updateToRemoteHandle=function(e,t,o,r){this.isPlayback?null==o||o():this.graphic.updateToRemoteHandle(e,t,o,r)},t.prototype.getModName=function(e){return this.module.getModName(e)},t.prototype.getCreateTime=function(e){return this.module.getCreateTime(e)},t.prototype.getRoomID=function(e){return this.module.getRoomID(e)},t.prototype.getUniqueID=function(e){return this.module.getUniqueID(e)},t.prototype.getUserID=function(){return this.socket.getUserID()},t.prototype.getPageCount=function(e){return this.module.getPageCount(e)},t.prototype.setSize=function(e,t,o){return this.module.setSize(e,t,o)},t.prototype.setViewSize=function(e,t,o){return this.module.setViewSize(e,t,o)},t.prototype.undo=function(e){},t.prototype.redo=function(e){},t.prototype.createMod=function(e,t){return this.module.createMod(e,t)},t.prototype.clearView=function(e,t){return this.graphic.clearView(e,t)},t.prototype.scroll=function(e,t,o,r,i){this.isPlayback||this.module.scroll(e,t,o,r,i)},t.prototype.scale=function(e,t,o,r){this.isPlayback||this.module.scale(e,t,o,r)},t.prototype.loadCurrentGraphics=function(e,t,o){this.isPlayback||this.module.loadCurrentGraphics(e,t,o)},t.prototype.getScrollPercent=function(e){return this.module.getScrollPercent(e)},t.prototype.getScale=function(e){return this.module.getScale(e)},t.prototype.getAspectRatio=function(e){return this.module.getAspectRatio(e)},t.prototype.getFileInfo=function(e){return this.module.getFileInfo(e)},t.prototype.uploadImage=function(e,t){return this.graphic.uploadImage(e,t)},t.prototype.createZorder=function(){return this.module.createZorder()},t.prototype.destroyMod=function(e){return this.module.destroyMod(e)},t.prototype.getModList=function(){return this.module.getModList()},t.prototype.getH5Extra=function(e){return this.module.getH5Extra(e)},t.prototype.appendH5Extra=function(e,t){this.isPlayback||this.module.appendH5Extra(e,t)},t.prototype.getUserAuth=function(){return this.module.getUserAuth()},t.prototype.enableHandwriting=function(){},t.prototype.isAppendPathLimit=function(e,t){return this.graphic.isAppendPathLimit(e,t)},t.prototype.reloadViewGraphics=function(e,t){this.module.reloadViewGraphics(e,t)},t.prototype.switchView=function(e){return this.module.switchView(e)},t.prototype.getCurrentActivitedView=function(){return this.module.getCurrentActivitedView()},t}((function(e){this.isElectron=!1,this.isPlayback=!1,this.isElectron="electron"===e}))},function(e,t,o){"use strict";o.d(t,"a",(function(){return W}));o(65),o(69),o(70),o(87),o(38),o(74),o(31),o(175),o(59),o(86),o(177),o(32),o(274),o(40),o(45),o(39),o(60),o(80),o(290),o(263),o(203),o(49),o(73),o(165),o(88),o(176),o(35),o(220),o(37),o(50),o(64),o(85),o(221);var r=o(3),i=o(5),n=o(7),a=(o(222),o(292),o(204),o(114),o(91),o(168),o(81),o(93),o(174),o(48),o(275),o(6)),s=o(0),c=function(){return(c=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=function(){function e(e){var t=this;this.bindFlag=!1,this.authFlag=!0,this.laserInfo={hiddenX:-100,hiddenY:-100,initX:0,initY:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){if(!t.toolInstance.getUserAuth().create)return t.authFlag&&Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic),void(t.authFlag=!1);if(window.TouchEvent&&e instanceof TouchEvent&&e.preventDefault(),t.laserInfo.touchLeaveRect.right||(t.laserInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect()),t.toolInstance.isTouchLeaveWhenMove(e,t.laserInfo.touchLeaveRect))t.mouseleaveHandle();else{t.toolInstance.updateOffsetAndScrollHandle();var o=t.getMouseChangedPoint(e),r=t.addLaserHandle(void 0,o);r.x=o.clientX,r.y=o.clientY,r.is_end_draw=!0,r.operate_id=Object(a.d)(),t.drawGraphicsHandle(r,!0),t.toolInstance.updateToRemoteNewHandle([t.calLaserActualPlaceHandle(r)],s.a.Move)}}},this.mouseleaveHandle=function(){t.authFlag=!0,t.laserHiddenHandle()},this.wheelHandle=function(e){var o;e.preventDefault();var i=t.toolInstance.whiteboardID,n=r.a.reservedPrefix.whiteboard,a=null===(o=document.querySelector("#"+n+i))||void 0===o?void 0:o.parentNode,s=a.getBoundingClientRect(),c=s.width;s.height!==a.scrollHeight&&(a.scrollTop+=Number(e.deltaY.toFixed(7))),c!==a.scrollWidth&&(a.scrollLeft+=Number(e.deltaX.toFixed(7)))},this.toolInstance=e,this.laserContainerNode=this.addLaserConDomHandle(),this.updateZIndexHandle(-1)}return e.prototype.transLocationHandle=function(e){var t=e.clientX,o=e.clientY,r=this.toolInstance,i=r.offsetData,n=r.scrollData,a=i.offsetLeft,s=i.offsetTop,c=n.scrollTop,l=n.scrollLeft,u=this.toolInstance.conNode,h=u.scrollLeft,d=u.scrollTop;return{clientX:Math.round(t-a+l-h),clientY:Math.round(o-s+c-d)}},e.prototype.getMouseChangedPoint=function(e){var t;if(e instanceof MouseEvent){var o=e,r=o.clientX,i=o.clientY;t=this.transLocationHandle({clientX:r,clientY:i})}else{var n=e.changedTouches[0];r=n.clientX,i=n.clientY;t=this.transLocationHandle({clientX:r,clientY:i})}return t},e.prototype.laserHiddenHandle=function(e){var t=this.findLaserHandle(e);if(t){var o=this.laserInfo,r=o.hiddenX,i=o.hiddenY;Object.assign(t,{x:r,y:i,px:0,py:0}),this.toolInstance.moveGraphicsHandle(t.graphic_id,r,i),e||(t.is_end_draw=!0,t.operate_id=Object(a.d)(),this.toolInstance.updateToRemoteNewHandle([t],s.a.Move))}},e.prototype.addLaserHandle=function(e,t){var o=this.toolInstance.graphicList;if(!e){var i=this.findLaserHandle();if(i)return i;var n=this.laserInfo,l=n.initX,u=n.initY,h=n.hiddenX,d=n.hiddenY;e=c(c({graphic_id:Object(a.d)(),creator_id:this.toolInstance.getUserID()},r.a.basicState),{type:s.f.Laser,x:h,y:d,px:0,py:0,data:[l,u],zorder:this.toolInstance.serviceHandle.createZorder()})}return(e=e).operate_id=Object(a.d)(),e.is_end_draw=!0,o.push(e),this.drawGraphicsHandle(e,!0),this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(e)],s.a.Create),e},e.prototype.findLaserHandle=function(e){var t=this.toolInstance.getUserID();return this.toolInstance.graphicList.find((function(o){return e?o.graphic_id===e:o.type===s.f.Laser&&o.creator_id===t}))},e.prototype.addLaserConDomHandle=function(){var e=this.toolInstance.whiteboardID,t=""+r.a.reservedPrefix.laserContainer+e,o=this.toolInstance.userNode.querySelector("#"+t);return o||((o=document.createElement("div")).id=t,this.toolInstance.zoomNode.appendChild(o),this.updateLaserConSize(o),o)},e.prototype.updateZIndexHandle=function(e){this.laserContainerNode.style.zIndex=""+e,this.laserContainerNode.style.visibility=-1===e?"hidden":"visible"},e.prototype.drawGraphicsHandle=function(e,t){var o=this.toolInstance.getUserID(),i=e.graphic_id,n=e.data,a=e.creator_id,c=e.x,l=e.y;if(a===o&&!t){t=!0;var u=this.calLaserPlaceHandle(c,l),h=u.x,d=u.y;e.x=h,e.y=d,c=h,l=d}var p=r.a.reservedPrefix,f=""+p.graphics+i,g=""+p.laserCon+i,m=this.toolInstance.userNode.querySelector("#"+f);if(!m){m=document.createElement("div");var _=document.createElement("div");m.id=f,_.id=g,_.appendChild(m),t?this.laserContainerNode.appendChild(_):this.toolInstance.appendGraphicsDomHandle(_,s.f.Laser)}var y="transform:translate("+(c||0)+"px, "+(l||0)+"px)"+(t?";":"scale("+1/this.toolInstance.viewInfo.zoom+");")+"left:"+n[0]+"px;top:"+n[1]+"px;";m.parentNode.style.cssText=y},e.prototype.bindEventsHandle=function(){if(this.updateZIndexHandle("initial"),!this.bindFlag){this.bindFlag=!0;var e=r.a.mouseEvents;this.toolInstance.toolAddEL(this.laserContainerNode,e.move,this.mousemoveHandle),this.toolInstance.toolAddEL(this.laserContainerNode,e.leave,this.mouseleaveHandle),this.toolInstance.viewInfo.isScroll&&this.laserContainerNode.addEventListener("wheel",this.wheelHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1,this.updateZIndexHandle(-1);var e=r.a.mouseEvents;this.toolInstance.toolRmEl(this.laserContainerNode,e.move,this.mousemoveHandle),this.toolInstance.toolRmEl(this.laserContainerNode,e.leave,this.mouseleaveHandle),this.laserContainerNode.removeEventListener("wheel",this.wheelHandle)}},e.prototype.calLaserActualPlaceHandle=function(e){var t=(e=JSON.parse(JSON.stringify(e))).x,o=e.y,r=this.toolInstance.viewInfo,i=r.zoom,n=r.zoomTX,a=r.zoomTY,s=r.offsetPageX,c=r.offsetPageY,l=this.toolInstance.conNode,u=l.scrollLeft,h=l.scrollTop;return e.x=Math.round((t+8+u-n)/i+s),e.y=Math.round((o+8+h-a)/i+c),e},e.prototype.calLaserPlaceHandle=function(e,t){var o=this.toolInstance.viewInfo,r=o.zoom,i=o.zoomTX,n=o.zoomTY,a=o.offsetPageX,s=o.offsetPageY,c=this.toolInstance.conNode,l=c.scrollLeft,u=c.scrollTop;return{x:e=Math.round((e-a)*r+i-l),y:t=Math.round((t-s)*r+n-u)}},e.prototype.pushActualPlaceHandle=function(){var e=this.findLaserHandle();e&&(this.toolInstance.updateOffsetAndScrollHandle(),e.is_end_draw=!0,e.operate_id=Object(a.d)(),this.toolInstance.updateToRemoteNewHandle([this.calLaserActualPlaceHandle(e)],s.a.Move))},e.prototype.clearLaserHandle=function(e){var t;(t=e?this.toolInstance.graphicList.filter((function(t){return t.creator_id===e}))[0]:this.findLaserHandle())&&(t.is_end_draw=!0,t.operate_id=Object(a.d)(),this.toolInstance.deleteHandle(t.graphic_id),this.toolInstance.updateToRemoteNewHandle([t],s.a.Delete))},e.prototype.updateLaserConSize=function(e){var t,o="z-index:"+((e=e||this.laserContainerNode).style.zIndex||"initial")+";";if(this.toolInstance.viewInfo.isScroll){var i=this.toolInstance.whiteboardID,n=r.a.reservedPrefix.whiteboard,a=null===(t=document.querySelector("#"+n+i))||void 0===t?void 0:t.parentNode,s=a.getBoundingClientRect(),c=s.width,l=s.height;l!==a.scrollHeight&&(o+="width:"+(c-18)+"px;"),c!==a.scrollWidth&&(o+="height:"+(l-18)+"px;")}e.style.cssText=o},e}(),u=function(){return(u=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(){function e(e){var t=this;this.bindFlag=!1,this.tolerance=1,this.isIos11=navigator.userAgent.includes("iPhone")&&navigator.userAgent.includes("11_4_1"),this.upSwitch=!1,this.mouseInfo={moveCount:0,moveTaskId:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0},isHandWriting:!1,handWritingTimer:0,handWritingLastPoint:null,handWritingLastSize:null},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw)if(t.toolInstance.getUserAuth().create){if(t.toolInstance.downCommonHandle(e)){t.upSwitch=!0,r.a.svgPath.tops.length=0,r.a.svgPath.bottoms.length=0,t.mouseInfo.isHandWriting=JSON.parse(r.a.basicState.attributes).stroke;var o=t.mouseInfo.isHandWriting&&r.a.basicState.type==s.j.ZegoWhiteboardViewToolPen,i=t.toolInstance.getMouseStartPoint(e,o),c=i.clientX,l=i.clientY,h=t.toolInstance.whiteboardNode;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect();var d=r.a.basicExtraState.customImage.url,p=r.a.basicState.type===s.j.ZegoWhitebaordViewToolCustomImage&&d?s.f.Image:r.a.basicState.type,f=p===s.f.Image?{x:c,y:l,ex:0,ey:0,url:d,hash:""}:[c,l],g=Object(a.d)();t.toolInstance.updateMousePointsHandle(c,l),t.toolInstance.updateProtoGraphic(u(u({creator_id:t.toolInstance.getUserID(),graphic_id:g,operate_id:g,is_end_draw:!1},r.a.basicState),{type:p,x:0,y:0,px:0,py:0,data:f,zorder:t.toolInstance.serviceHandle.createZorder()})),p===s.j.ZegoWhiteboardViewToolPen&&(t.toolInstance.protoGraphic.oldData=[c,l]),t.realTimeStartHandle(),t.mouseInfo.moveCount=0,t.mouseInfo.moveTaskId=0,t.toolInstance.toolAddEL(h,r.a.mouseEvents.move,t.mousemoveHandle)}}else Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},this.mousemoveHandle=function(e){if(!(window.TouchEvent&&e instanceof TouchEvent)||t.toolInstance.downCommonHandle(e))if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{var o=t.toolInstance.protoGraphic;t.mouseInfo.isHandWriting?t.drawGraphicsHandWritingHandle(o,e):t.drawGraphicsPathHandle(o,e)}},this.mouseupHandle=function(){t.mouseInfo.handWritingTimer&&(clearTimeout(t.mouseInfo.handWritingTimer),t.mouseInfo.handWritingTimer=0);var e=t.toolInstance,o=e.protoGraphic,i=e.graphicList,c=e.whiteboardNode;if(o&&o.graphic_id&&t.upSwitch){t.toolInstance.toolRmEl(c,r.a.mouseEvents.move,t.mousemoveHandle),t.upSwitch=!1,t.mouseInfo.moveCount=0,t.mouseInfo.moveTaskId=0,t.drawGraphicsExceptionHandle(o);var l=o.graphic_id,h=o.type;if(t.toolInstance.updateBoxHandle(o)){if(h===s.f.Pencil){var d=t.toolInstance.getGraphicsHandle(l);if(!d)return;var p=o.oldData;if(o.data=p.slice(),t.mouseInfo.isHandWriting)t.drawGraphicsPencilSegment(o,s.e.Local);else Object(a.g)(d)[0].setAttribute("d",Object(a.l)(s.f.Pencil,o.data))}else if(h===s.f.Image){var f=(p=o.data).x,g=p.y,m=p.ex,_=p.ey,y=t.toolInstance.getUserAuth().create;if(f===m||g===_||!y){t.toolInstance.deleteHandle(o.graphic_id),t.toolInstance.initDrawHandle();var v=s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic;return void(!y&&Object(n.a)(v))}t.checkImageRect(p),o.initX=p.x,o.initY=p.y,o.oldData=u({},p)}o.is_end_draw=!0;var b=JSON.parse(JSON.stringify(o));t.toolInstance.setGraphicsDomZorder(b),i.push(b),t.realTimeEndHandle()}else h!==s.f.Image&&(o.is_end_draw=!0,t.realTimeEndHandle());t.toolInstance.initDrawHandle()}},this.toolInstance=e,this.tolerance=this.toolInstance.serviceHandle.isElectron?.3:1}return e.prototype.drawGraphicsExceptionHandle=function(e){var t=e.type,o=e.data;t!==s.f.Image&&o.length<4&&(o[2]=o[0]+1,o[3]=o[1]+1,this.drawGraphicsHandle(e,s.e.Local))},e.prototype.isMouseMoveWithNoKeydown=function(e,t){return t instanceof MouseEvent&&!t.buttons&&(this.toolInstance.toolRmEl(this.toolInstance.whiteboardNode,r.a.mouseEvents.move,this.mousemoveHandle),this.toolInstance.deleteHandle(e),this.toolInstance.initDrawHandle(),!0)},e.prototype.catchMouseMoveException=function(){var e=this;this.mouseInfo.moveTaskId||(this.mouseInfo.moveTaskId=window.setTimeout((function(){if(e.mouseInfo.moveCount<5){var t=e.toolInstance.userNode.querySelector("#zego-whiteboard-input");t||((t=document.createElement("input")).id="zego-whiteboard-input",t.tabIndex=-1,e.toolInstance.userNode.insertBefore(t,e.toolInstance.userNode.firstChild)),t.focus()}}),200)),this.mouseInfo.moveCount++},e.prototype.realTimeStartHandle=function(){var e=this.toolInstance.protoGraphic;e.type!==s.f.Image&&this.toolInstance.updateToRemoteNewHandle([e],s.a.Create)},e.prototype.realTimeDrawHandle=function(){var e=this.toolInstance.protoGraphic;e.type!==s.f.Image&&(e.type===s.f.Pencil?this.mouseInfo.isHandWriting?this.realTimeHandWrittingSend(e):this.readlTimeNormalSend(e):this.toolInstance.updateToRemoteNewHandle([e],s.a.Update))},e.prototype.realTimeEndHandle=function(){var e=this.toolInstance.protoGraphic,t=e.type===s.f.Image?s.a.Create:s.a.Update;this.toolInstance.updateToRemoteNewHandle([e],t)},e.prototype.appendPath=function(e,t){var o,r=this;if(t.length){var i=JSON.parse(JSON.stringify(e));i.data=t,(o=e.oldData).push.apply(o,t),this.toolInstance.serviceHandle.isAppendPathLimit(this.toolInstance.whiteboardID,e).then((function(o){o?(e.oldData.splice(i.oldData.length,t.length),r.mouseupHandle()):r.toolInstance.updateToRemoteNewHandle([i],s.a.Append)}))}},e.prototype.readlTimeNormalSend=function(e){var t=r.a.realTimeState.localDrawCount,o=e.data;if(o.length%t==2){var i=Object(a.p)(o.slice(o.length-t),this.tolerance);this.appendPath(e,i)}},e.prototype.realTimeHandWrittingSend=function(e){var t=e.data,o=t.slice(e.oldData.length,t.length);this.appendPath(e,o)},e.prototype.drawGraphicsHandWritingHandle=function(e,t){var o=this;this.mouseInfo.handWritingTimer||(this.mouseInfo.handWritingTimer=window.setTimeout((function(){o.drawGraphicsPathHandle(e,t),clearTimeout(o.mouseInfo.handWritingTimer),o.mouseInfo.handWritingTimer=0}),r.a.handWritingFactor.step))},e.prototype.drawGraphicsPathHandle=function(e,t){var o=this.mouseInfo.isHandWriting&&e.type==s.f.Pencil,r=this.toolInstance.getMouseChangedPoint(t,o);this.toolInstance.updateGraphicsDataHandle(r);var i=e.type===s.f.Image?s.n.ZegoWhiteboardViewImageCustom:void 0;this.realTimeDrawHandle(),this.drawGraphicsHandle(e,s.e.Local,i)},e.prototype.isHandWriting=function(e,t){return t==s.e.Local?this.mouseInfo.isHandWriting:!!e.attributes&&JSON.parse(e.attributes).stroke},e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.drawGraphicsHandle=function(e,t,o){switch(e.type){case s.f.Pencil:case s.f.RealTime:this.isHandWriting(e,t)?this.drawGraphicsPencilSegment(e,t):this.drawGraphicsPath(e,t);break;case s.f.Line:this.drawGraphicsLine(e,t);break;case s.f.Ellipse:this.drawGraphicsEllipse(e,t);break;case s.f.Rect:this.drawGraphicsRect(e,t);break;case s.f.Image:o===s.n.ZegoWhiteboardViewImageCustom?this.drawLocalCustomImage(e):this.drawReomteGraphicImage(e)}},e.prototype.updateGraphicsHandle=function(e){switch(e.type){case s.f.Pencil:this.isHandWriting(e,s.e.Remote)?this.drawGraphicsPencilSegment(e,s.e.Remote):this.drawGraphicsPath(e,s.e.Remote);break;case s.f.Line:this.drawGraphicsLine(e,s.e.Remote);break;case s.f.Ellipse:this.drawGraphicsEllipse(e,s.e.Remote);break;case s.f.Rect:this.drawGraphicsRect(e,s.e.Remote);break;case s.f.Image:this.updateGraphicsImage(e)}},e.prototype.drawGraphicsLine=function(e,t,o,i,n,c){void 0===o&&(o="none"),void 0===i&&(i=1),void 0===n&&(n="round"),void 0===c&&(c="round");var l=e.data,u=e.graphic_id,h=e.color,d=e.x,p=e.y,f=Object(a.l)(s.f.Line,l),g=f.x1,m=f.y1,_=f.x2,y=f.y2,v=""+r.a.reservedPrefix.graphicsSvg+u,b=""+r.a.reservedPrefix.graphics+u,w=Object(a.e)(v,b,"line",e.zorder);w[1]&&this.toolInstance.appendGraphicsDomHandle(w[1],s.f.Line),this.toolInstance.triggerAnimateHandle(w[0],t),Object(a.o)(w[0],[{attr:"fill",value:o},{attr:"opacity",value:i},{attr:"stroke",value:h},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:n},{attr:"stroke-linecap",value:c},{attr:"x1",value:g},{attr:"y1",value:m},{attr:"x2",value:_},{attr:"y2",value:y},{attr:"transform",value:"translate("+(d||0)+", "+(p||0)+")"}])},e.prototype.drawGraphicsRect=function(e,t,o,i,n,c){void 0===o&&(o="none"),void 0===i&&(i=1),void 0===n&&(n="round"),void 0===c&&(c="round");var l=e.data,u=e.graphic_id,h=e.color,d=e.x,p=e.y,f=Object(a.l)(s.f.Rect,l),g=f.width,m=f.height,_=f.x,y=f.y,v=""+r.a.reservedPrefix.graphicsSvg+u,b=""+r.a.reservedPrefix.graphics+u,w=Object(a.e)(v,b,"rect",e.zorder);w[1]&&this.toolInstance.appendGraphicsDomHandle(w[1],s.f.Rect),this.toolInstance.triggerAnimateHandle(w[0],t),Object(a.o)(w[0],[{attr:"fill",value:o},{attr:"opacity",value:i},{attr:"stroke",value:h},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:n},{attr:"stroke-linecap",value:c},{attr:"width",value:g},{attr:"height",value:m},{attr:"x",value:_},{attr:"y",value:y},{attr:"transform",value:"translate("+(d||0)+", "+(p||0)+")"}])},e.prototype.drawGraphicsPath=function(e,t,o,i,n){void 0===o&&(o="none"),void 0===i&&(i="round"),void 0===n&&(n="round");var c=t===s.e.Local?e.oldData:e.data;if(c&&c.length){var l=e.color,u=e.graphic_id,h=e.x,d=e.y,p=Object(a.l)(s.f.Pencil,c),f=""+r.a.reservedPrefix.graphicsSvg+u,g=""+r.a.reservedPrefix.graphics+u,m=Object(a.e)(f,g,"path",e.zorder);m[1]&&this.toolInstance.appendGraphicsDomHandle(m[1],s.f.Pencil),this.toolInstance.triggerAnimateHandle(m[0],t),Object(a.o)(m[0],[{attr:"fill",value:o},{attr:"d",value:p},{attr:"stroke",value:l},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:i},{attr:"stroke-linecap",value:n},{attr:"transform",value:"translate("+(h||0)+", "+(d||0)+")"}])}},e.prototype.drawGraphicsPencilSegment=function(e,t){var o=e.color,i=e.graphic_id,n=e.x,c=e.y,l=e.is_end_draw,u=this.toolInstance.viewInfo.viewWidth,h=Object(a.m)(e,this.getSize(e,t),u),d=""+r.a.reservedPrefix.graphicsSvg+i,p=""+r.a.reservedPrefix.graphics+i,f=Object(a.e)(d,p,"path",e.zorder);f[1]&&this.toolInstance.appendGraphicsDomHandle(f[1],s.f.Pencil),this.toolInstance.triggerAnimateHandle(f[0],t),(null==h?void 0:h.includes("M"))&&Object(a.o)(f[0],[{attr:"fill",value:o},{attr:"d",value:h},{attr:"stroke-width",value:0},{attr:"transform",value:"translate("+(n||0)+", "+(c||0)+")"}]),l&&(r.a.svgPath.tops.length=0,r.a.svgPath.bottoms.length=0)},e.prototype.drawGraphicsEllipse=function(e,t,o,i,n,c){void 0===o&&(o="none"),void 0===i&&(i=1),void 0===n&&(n="round"),void 0===c&&(c="round");var l=e.color,u=e.data,h=e.graphic_id,d=e.x,p=e.y,f=Object(a.l)(s.f.Ellipse,u),g=f.cx,m=f.cy,_=f.rx,y=f.ry,v=""+r.a.reservedPrefix.graphicsSvg+h,b=""+r.a.reservedPrefix.graphics+h,w=Object(a.e)(v,b,"ellipse",e.zorder);w[1]&&this.toolInstance.appendGraphicsDomHandle(w[1],s.f.Ellipse),this.toolInstance.triggerAnimateHandle(w[0],t),Object(a.o)(w[0],[{attr:"fill",value:o},{attr:"opacity",value:i},{attr:"stroke",value:l},{attr:"stroke-width",value:this.getSize(e,t)},{attr:"stroke-linejoin",value:n},{attr:"stroke-linecap",value:c},{attr:"cx",value:g},{attr:"cy",value:m},{attr:"rx",value:_},{attr:"ry",value:y},{attr:"transform",value:"translate("+(d||0)+", "+(p||0)+")"}])},e.prototype.drawLocalGraphicImage=function(e,t,o){var i=this;return new Promise((function(c,l){if(!i.toolInstance.getUserAuth().create)return l(Object(n.b)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic));var h=new Image;h.setAttribute("crossOrigin","anonymous"),h.onload=function(){var n=i.toolInstance.graphicList,l=i.getScaleRect(h.width,h.height),d=l.width,p=l.height,f={x:t,y:o,ex:t+d,ey:o+p,url:e,hash:""},g=Object(a.d)(),m=i.toolInstance.serviceHandle.createZorder(),_=""+r.a.reservedPrefix.graphicsSvg+g,y=""+r.a.reservedPrefix.graphics+g,v=Object(a.e)(_,y,"image",m);if(v[1]&&i.toolInstance.appendGraphicsDomHandle(v[1],s.f.Image),Object(a.o)(v[0],[{attr:"width",value:d},{attr:"height",value:p},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:e},{attr:"transform",value:"translate("+t+", "+o+")"}]),i.isIos11&&v[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.toolInstance.updateProtoGraphic(u(u({creator_id:i.toolInstance.getUserID(),graphic_id:g,operate_id:g,is_end_draw:!0},r.a.basicState),{type:s.f.Image,x:0,y:0,px:0,py:0,initX:t,initY:o,data:f,oldData:u({},f),zorder:m})),i.toolInstance.updateOffsetAndScrollHandle(),i.toolInstance.updateBoxHandle(i.toolInstance.protoGraphic)){var b=JSON.parse(JSON.stringify(i.toolInstance.protoGraphic));b.is_end_draw=!0,n.push(b),i.toolInstance.updateToRemoteNewHandle([b],s.a.Create)}i.toolInstance.initDrawHandle(),c(e)},h.onerror=l,h.src=e}))},e.prototype.drawLocalCustomImage=function(e){var t=e.graphic_id,o=r.a.basicExtraState.customImage,i=o.w,n=o.h,c=e.data,l=c.x,u=c.y,h=c.ex,d=c.ey,p=c.url,f=""+r.a.reservedPrefix.graphicsSvg+t,g=""+r.a.reservedPrefix.graphics+t,m=Object(a.e)(f,g,"image",e.zorder);m[1]&&this.toolInstance.appendGraphicsDomHandle(m[1],s.f.Image);var _=Number((Math.abs(h-l)/i).toFixed(7)),y=Number((Math.abs(d-u)/n).toFixed(7));Object(a.o)(m[0],[{attr:"width",value:i},{attr:"height",value:n},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:p},{attr:"transform",value:"translate("+Math.min(l,h)+", "+Math.min(u,d)+") scale("+_+", "+y+")"}]),this.isIos11&&m[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p)},e.prototype.drawReomteGraphicImage=function(e){var t=this,o=e.graphic_id,r=e.zorder,i=e.data;this.checkImageRect(i);var n=i.x,s=i.y,c=i.ex,l=i.ey,u=i.url;this.toolInstance.appendImageDomHandle(o,r);var h=new Image;h.setAttribute("crossOrigin","anonymous"),h.onload=function(){var r=t.toolInstance.getImageDomHandle(o),i=r[0],d=r[1];if(i&&d){var p=t.getScaleRect(h.width,h.height),f=p.width,g=p.height,m=Number(((c-n)/f).toFixed(7)),_=Number(((l-s)/g).toFixed(7));Object(a.o)(i,[{attr:"width",value:f},{attr:"height",value:g},{attr:"crossorigin",value:"anonymous"},{attr:"href",value:u},{attr:"transform",value:"translate("+n+", "+s+") scale("+m+", "+_+")"}]),t.isIos11&&i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);var y=t.toolInstance.getBoxInfoByGraphic(e);if(y){var v=y.x,b=y.y,w=y.width,S=y.height;d.style.cssText+="width:"+w+"px;height:"+S+"px;left:"+v+"px;top:"+b+"px;"}}},h.src=u},e.prototype.updateGraphicsImage=function(e){var t=e.graphic_id,o=e.data;this.checkImageRect(o);var i=o.x,n=o.y,s=o.ex,c=o.ey,l=""+r.a.reservedPrefix.graphicsSvg+t,u=""+r.a.reservedPrefix.graphics+t,h=Object(a.e)(l,u,"image",e.zorder)[0];if(h){var d=+h.getAttribute("width"),p=+h.getAttribute("height"),f=Number(((s-i)/d).toFixed(7)),g=Number(((c-n)/p).toFixed(7));h.setAttribute("transform","translate("+i+", "+n+") scale("+f+", "+g+")")}},e.prototype.checkImageRect=function(e){var t=e.x,o=e.y,r=e.ex,i=e.ey;t>r&&(e.x=r,e.ex=t),o>i&&(e.y=i,e.ey=o)},e.prototype.getScaleRect=function(e,t){var o=this.toolInstance.viewInfo,r=o.viewWidth,i=o.viewHeight;if(e>r||t>i){var n=Math.min(r/e,i/t);e=e*n|0,t=t*n|0}return{width:e,height:t}},e.prototype.getSize=function(e,t){return t===s.e.Local?r.a.basicExtraState.drawSize:Object(a.c)(e.size,e.type,this.toolInstance.viewInfo.viewWidth,!1)},e}(),d=(o(260),function(){return(d=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}),p=function(){function e(e){var t=this;this.bindFlag=!1,this.canCreate=!0,this.chInput=!1,this.allowTouchEnd=!0,this.mouseupHandle=function(e){e instanceof MouseEvent?t.upEventHandle(e):t.allowTouchEnd&&(t.upEventHandle(e),t.allowTouchEnd=!1)},this.upEventHandle=function(e){if(t.toolInstance.enableDraw)if(t.toolInstance.getUserAuth().create){if(t.toolInstance.downCommonHandle(e))if(t.canCreate){var o=t.toolInstance.getMouseChangedPoint(e),r=o.clientX,i=o.clientY;if(!t.checkAddHandle(r,i))return;t.addTextGraphics("",r,i)}else t.canCreate=!0}else Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},this.toolInstance=e}return e.prototype.updateContentHandle=function(e){var t=r.a.textareaHPadding,o=e.value,i=e.previousSibling,n=Number(i.style.maxWidth.split("px")[0])-2*t,a=i.parentNode,s=document.createElement("span");s.style.cssText="position: absolute; z-index: -100; font-size: inherit; font-family: inherit; visibility: hidden; display: inline-block;line-height: 1;",a.appendChild(s);for(var c="",l=0,u=0,h=o;u<h.length;u++){var d=h[u];if("\n"===d)c+="\n",l=0;else{var p=this.textSizeHandle(s,d).width;(l+=p)>n?(c+="\n"+d,l=p):c+=d}}a.removeChild(s),i.innerHTML=c,e.value=c},e.prototype.addTextareaDomHandle=function(e){var t=e.graphic_id,o=e.data,i=document.createElement("textarea"),n=""+r.a.reservedPrefix.graphics+t;i.setAttribute("id",n),i.setAttribute("tabindex","-1"),i.setAttribute("spellcheck","false"),i.setAttribute("maxlength",""+r.a.maxlength),navigator.userAgent.includes("iPhone")&&navigator.userAgent.includes("11_4_1")&&(i.style.padding="0 "+Math.max(r.a.textareaHPadding-3,0)+"px");var s=Object(a.q)(o).text;return i.value=s,i},e.prototype.addPreDomHandle=function(e){var t=e.size,o=e.data,i=e.type,n=Object(a.q)(o).text,s=document.createElement("pre");s.innerHTML=n;var c=Object(a.c)(t,i,this.toolInstance.viewInfo.viewWidth,!1),l=r.a.textareaHPadding,u=r.a.textareaVPadding;return l*=2,u*=2,s.style.cssText="min-height:"+(c*r.a.lineHeight+u)+"px;min-width:"+(c+l)+"px;",s},e.prototype.addTextareaConDomHandle=function(e){var t=e.size,o=e.color,i=e.data,n=e.graphic_id,s=e.type,c=e.attributes,l=e.zorder,u=JSON.parse(c||r.a.basicState.attributes),h=u.bold,d=u.italic,p=Object(a.c)(t,s,this.toolInstance.viewInfo.viewWidth,!1),f=Object(a.q)(i),g=f.beginX,m=f.beginY,_=document.createElement("div"),y=""+r.a.reservedPrefix.textareaCon+n;return _.setAttribute("id",y),l&&_.setAttribute("data-z",l+""),_.style.cssText="font-size:"+p+"px;font-style:"+(d?"italic":"normal")+";font-weight:"+(h?"bold":"normal")+";left:"+g+"px;top:"+m+"px;color:"+o+";caret-color:"+o+";",_},e.prototype.textSizeHandle=function(e,t){return" "===t&&(t=t.replace(/ /g,"&nbsp")),e.innerHTML=t,{width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}},e.prototype.checkValueHandle=function(e){var t=r.a.maxlength;return e.length>t&&(e=e.slice(0,t)),e},e.prototype.initHeightHandle=function(e){var t=e.previousSibling;e.scrollTop=0,e.style.height="initial",t.style.height="initial",t.style.maxHeight="initial"},e.prototype.updateHeightHandle=function(e){var t=r.a.textareaHPadding,o=r.a.lineHeight,i=this.toolInstance.viewInfo.zoom,n=e.previousSibling,a=n.style.height,s=Number(n.style.maxHeight.split("px")[0]),c=(Number(n.style.maxWidth.split("px")[0])+2*t)/i,l=e.parentNode.style.fontSize,u=Number(l.split("px")[0]);e.style.maxWidth=c+"px",e.style.height=u*o+"px";var h=e.scrollHeight+"px";e.scrollHeight*i>s&&(h=a),n.style.height=h,e.style.height=h},e.prototype.inputCallbackHandle=function(e){var t=e.target,o=t.previousSibling,r=this.checkValueHandle(t.value);t.value=r,o.innerHTML=r,this.updateHeightHandle(t),!this.chInput&&this.updateToRemoteHandle(e)},e.prototype.chInputCallbackHandle=function(e){this.chInput=!1,this.updateToRemoteHandle(e)},e.prototype.updateToRemoteHandle=function(e){var t=e.target,o=t.parentNode,i=this.toolInstance.graphicList,n=t.id.split(r.a.reservedPrefix.graphics)[1],c=t.value,l=this.toolInstance.getDataFromGraphicList(n,"data").data,u=Object(a.q)(l),h=u.beginX,d=u.beginY,p=i.findIndex((function(e){return e.graphic_id===n})),f=i[p];f&&("blur"===e.type?(f.is_end_draw=!0,c?(this.updateContentHandle(t),this.toolInstance.updateBoxHandle(f,"blur"),f.data=Object(a.a)(t.value,h,d),this.toolInstance.updateToRemoteNewHandle([f],s.a.Update)):(Object(a.n)(o),Object(a.n)(this.toolInstance.getBoxHandle(n)),i.splice(p,1),this.toolInstance.updateToRemoteNewHandle([f],s.a.Delete)),this.toolInstance.initDrawHandle()):this.toolInstance.getUserAuth().update||f.creator_id===this.toolInstance.getUserID()?(this.updateContentHandle(t),f.is_end_draw=!1,f.data=Object(a.a)(t.value,h,d),this.toolInstance.updateToRemoteNewHandle([f],s.a.Update)):t.blur())},e.prototype.bindTextareaInputEventHandle=function(e){var t=this;e.addEventListener("input",(function(e){t.inputCallbackHandle(e)})),e.addEventListener("compositionstart",(function(e){t.chInput=!0})),e.addEventListener("compositionend",(function(e){t.chInputCallbackHandle(e)})),e.addEventListener("keydown",(function(e){9===e.keyCode&&e.preventDefault()}))},e.prototype.bindTextareaFocusEvent=function(e,t){var o=this,i=t.data,n=Object(a.q)(i),s=n.beginX,c=n.beginY;e.addEventListener("focus",(function(e){var t=e.target;t.parentNode.style.borderColor="red";var i=t.id.split(r.a.reservedPrefix.graphics)[1];o.toolInstance.setDataToGraphicList(i,{oldData:Object(a.a)(t.value,s,c)})}))},e.prototype.bindTextareaBlurEvents=function(e){var t=this;e.addEventListener("blur",(function(e){var o=t.toolInstance.graphicsBoxConNode,i=e.target,n=i.parentNode,a=i.id.split(r.a.reservedPrefix.graphics)[1];t.initHeightHandle(i),t.updatePointerEvents(2,o.querySelector(t.toolInstance.getBoxSelHandle(a))),n.style.borderColor="transparent",t.canCreate=!1,t.updateToRemoteHandle(e),t.allowTouchEnd||(t.allowTouchEnd=!0)}))},e.prototype.updatePointerEvents=function(e,t){var o=this,i=this.toolInstance.graphicsBoxConNode;1===e?(Array.prototype.slice.call(Object(a.g)(i),0).forEach((function(e){var t=o.toolInstance.getGraphicsHandle(e.id.split(r.a.reservedPrefix.graphicsBox)[1]);t&&"DIV"===t.nodeName&&(e.style.pointerEvents="initial")})),i.style.pointerEvents="none",t&&(t.style.pointerEvents="none")):(i.style.pointerEvents="initial",t&&(t.style.pointerEvents="initial"))},e.prototype.checkAddHandle=function(e,t){var o=this.calMaxSizeHandle(e,t),i=o.maxWidth,n=o.maxHeight,c=this.toolInstance.viewInfo.viewWidth,l=r.a.textareaHPadding,u=r.a.basicState,h=r.a.lineHeight,d=r.a.textareaVPadding,p=Object(a.c)(u.fontSize,s.f.Text,c,!1);return 2*l+p+12<i&&2*d+p*h+12<n},e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,r.a.mouseEvents.up,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,r.a.mouseEvents.up,this.mouseupHandle)}},e.prototype.addTextGraphics=function(e,t,o){var i=this.toolInstance,n=i.protoGraphic,c=i.graphicList,l=Object(a.d)();this.toolInstance.updateProtoGraphic(d(d({creator_id:this.toolInstance.getUserID(),graphic_id:l,operate_id:l,is_end_draw:!!e,x:0,y:0,px:0,py:0,zorder:this.toolInstance.serviceHandle.createZorder(),data:Object(a.a)(e,t+"",o+"")},r.a.basicState),{size:r.a.basicState.fontSize}));var u=d({},n);c.push(u),this.drawGraphicsHandle(u,!e),this.toolInstance.setGraphicsDomZorder(u);var h=this.toolInstance.updateBoxHandle(u);!e&&this.updatePointerEvents(1,h),this.toolInstance.updateToRemoteNewHandle([u],s.a.Create)},e.prototype.drawGraphicsHandle=function(e,t){var o=e.x,i=e.y,n=this.addTextareaDomHandle(e),c=this.addPreDomHandle(e),l=this.addTextareaConDomHandle(e);l.appendChild(c),l.appendChild(n),l.style.transform="translate("+(o||0)+"px, "+(i||0)+"px)",this.toolInstance.appendGraphicsDomHandle(l,s.f.Text),this.bindTextareaInputEventHandle(n),this.bindTextareaFocusEvent(n,e);var u=r.a.mouseEvents;Object(a.b)(n,[u.down,u.move,u.up]),t&&(this.initMaxSizeHandle(n),n.focus(),this.updatePointerEvents(1,null)),this.bindTextareaBlurEvents(n)},e.prototype.updateGraphicsHandle=function(e){var t=e.graphic_id,o=e.data,i=e.size,n=e.color,s=e.x,c=e.y,l=e.type,u=e.attributes,h=JSON.parse(u||r.a.basicState.attributes),d=h.bold,p=h.italic,f=Object(a.c)(i,l,this.toolInstance.viewInfo.viewWidth,!1),g=Object(a.q)(o),m=g.beginX,_=g.beginY,y=g.text,v=this.toolInstance.getGraphicsHandle(t);if(v){var b=Object(a.g)(v),w=b[0],S=b[1];S.value=y,v.style.cssText="font-size: "+f+"px;font-style:"+(p?"italic":"normal")+";font-weight:"+(d?"bold":"normal")+";left: "+m+"px;top: "+_+"px;color: "+n+";transform: translate("+s+"px, "+c+"px);caret-color:"+n+";";var I=y.split("\n").length*f*r.a.lineHeight+2*r.a.textareaVPadding;w.innerHTML=y,w.style.height=I+"px",w.style.maxWidth="initial",w.style.maxHeight="initial",S.value=y,S.style.height=I+"px"}},e.prototype.focusHandle=function(e){this.toolInstance.setDataToGraphicList(e,{selected:!1});var t=this.toolInstance.getBoxHandle(e);t&&(t.style.borderColor="transparent"),this.updatePointerEvents(1,t);var o=this.toolInstance.getGraphicsHandle(e);if(o){var r=Object(a.g)(o)[1];this.initMaxSizeHandle(r),o.style.borderColor="red",r.style.height="100%",r.focus();var i=this.toolInstance.graphicList.filter((function(t){return t.graphic_id===e}))[0];i.operate_id=Object(a.d)(),i.is_end_draw=!1,this.toolInstance.updateToRemoteNewHandle([i],s.a.Update)}},e.prototype.backUpdateGraphicsHandle=function(e){var t=e.graphic_id,o=e.data,r=Object(a.q)(o).text,i=this.toolInstance.getGraphicsHandle(t);if(i){var n=Object(a.g)(i),s=n[0];n[1].value=r,s.innerHTML=r;var c=i.getBoundingClientRect(),l=c.width,u=c.height,h=this.toolInstance.getBoxHandle(t);h&&(h.style.cssText+="width:"+l+"px;height:"+u+"px;"),this.toolInstance.setDataToGraphicList(t,{data:o})}},e.prototype.initMaxSizeHandle=function(e){var t=e.getBoundingClientRect(),o=t.left,r=t.top,i=this.toolInstance.transLocationHandle({clientX:o,clientY:r}),n=i.clientX,a=i.clientY,s=this.calMaxSizeHandle(n,a),c=s.maxWidth,l=s.maxHeight,u=e.previousSibling;u.style.maxHeight=l+"px",u.style.maxWidth=c+"px"},e.prototype.calMaxSizeHandle=function(e,t){var o,i=this.toolInstance.viewInfo,n=i.isScroll,a=i.isOriginScroll,s=i.width,c=i.height,l=i.viewWidth,u=i.viewHeight,h=i.zoom,d=i.zoomTX,p=i.zoomTY,f=i.offsetPageX,g=i.offsetPageY,m=0;return n?(o=Math.floor(s-e),m=Math.floor(c-t),a&&(o-=r.a.scrollbarSize,m-=r.a.scrollbarSize)):(o=Math.floor(l-e*h+f*h-d),m=Math.floor(u-t*h+g*h-p)),{maxWidth:o-=2*r.a.boxBorderWidth*h,maxHeight:m-=2*r.a.boxBorderWidth*h}},e}(),f=function(){function e(e){var t=this;this.bindFlag=!1,this.mouseInfo={touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.boxRectMap={},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw){var o=t.toolInstance,i=o.whiteboardNode,n=o.graphicList;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect(),n.forEach((function(e){if(e.type!==s.f.Laser){var o=t.toolInstance.getBoxHandle(e.graphic_id);o&&(t.boxRectMap[e.graphic_id]=o.getBoundingClientRect())}})),t.mousemoveHandle(e),t.toolInstance.toolAddEL(i,r.a.mouseEvents.move,t.mousemoveHandle)}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){var o=e instanceof MouseEvent?e:e.changedTouches[0],r=o.clientX,i=o.clientY;if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{var n=0,a="";t.toolInstance.graphicList.forEach((function(e){var o=t.boxRectMap[e.graphic_id];if(o){var s=o.left,c=o.right,l=o.top,u=o.bottom;if(r>=s&&r<=c&&i>=l&&i<=u){var h=e.zorder||1;(!n||h>n)&&(n=h,a=e.graphic_id)}}})),t.toolInstance.graphicList.forEach((function(e){e.selected=!!a&&(e.graphic_id===a&&t.toolInstance.getGraphicIsEndDraw(e.graphic_id)),t.toolInstance.updateBoxBorder(e)}))}}},this.mouseupHandle=function(){t.boxRectMap={};var e=t.toolInstance.whiteboardNode;t.toolInstance.toolRmEl(e,r.a.mouseEvents.move,t.mousemoveHandle),t.toolInstance.deleteSelectedGraphics(s.c.EraserTool)},this.toolInstance=e}return e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e}(),g=(o(266),o(276),function(){function e(e){this.editBoxMap={w:0,h:0,tx:0,ty:0,x:0,y:0,mx:0,my:0,tx1:0,ty1:0,w0:0,h0:0,board:8,wdiff:9,tdiff:4,interrupt:!1,target:null,graphic:null,parent:document.createElement("div"),box:document.createElement("div"),img:document.createElementNS("http://www.w3.org/2000/svg","image")},this.toolInstance=e,this.setEditorBox()}return e.prototype.startEditTarget=function(e,t){this.endEditTarget();var o=e.target,i=o.className;if(i.includes("operation-point-desktop")){var n=this.editBoxMap.graphic;n&&((this.toolInstance.getUserAuth().update||n.creator_id===this.toolInstance.getUserID())&&(n.operate_id=Object(a.d)(),n.is_end_draw=!1,this.toolInstance.updateToRemoteNewHandle([n],s.a.Update)),Object.assign(n.oldData,n.data)),this.editBoxMap.target=o;var c=window.getComputedStyle(this.editBoxMap.parent),l=c.transform.match(/(-?\d+),\s?(-?\d+)\)$/)||[],u=this.toolInstance.getMouseChangedPoint(e),h=u.clientX,d=u.clientY;this.editBoxMap.w=+c.width.replace("px",""),this.editBoxMap.h=+c.height.replace("px",""),this.editBoxMap.tx=+l[1]||0,this.editBoxMap.ty=+l[2]||0,this.editBoxMap.x=h,this.editBoxMap.y=d;var p=i.substr(i.lastIndexOf(" ")+1);"L"==p?this.editBoxMap.mx=h+this.editBoxMap.w:"R"==p?this.editBoxMap.mx=h-this.editBoxMap.w:"T"==p?this.editBoxMap.my=d+this.editBoxMap.h:"B"==p?this.editBoxMap.my=d-this.editBoxMap.h:"LT"==p?(this.editBoxMap.mx=h+this.editBoxMap.w,this.editBoxMap.my=d+this.editBoxMap.h):"RB"==p?(this.editBoxMap.mx=h-this.editBoxMap.w,this.editBoxMap.my=d-this.editBoxMap.h):"LB"==p?(this.editBoxMap.mx=h+this.editBoxMap.w,this.editBoxMap.my=d-this.editBoxMap.h):"RT"==p&&(this.editBoxMap.mx=h-this.editBoxMap.w,this.editBoxMap.my=d+this.editBoxMap.h);var f=this.toolInstance,g=f.whiteboardNode,m=f.conNode;return this.toolInstance.toolAddEL(g,r.a.mouseEvents.move,t),m.style.cursor=i.replace(/.+cursor-(\w+).+/,"$1")+"-resize",!1}return!0},e.prototype.moveEditTarget=function(e){var t=this.editBoxMap,o=t.target,r=t.interrupt;if(!o)return!r;var i=o.className.substr(o.className.lastIndexOf(" ")+1),n=this.toolInstance.getMouseChangedPoint(e),a=n.clientX,s=n.clientY;return this["moveEditTarget"+i](a,s),!1},e.prototype.endEditTarget=function(){var e=this.editBoxMap,t=e.target,o=e.graphic;if(t&&o)if(this.toolInstance.getUserAuth().update||o.creator_id===this.toolInstance.getUserID()){var r=o.data,i=r.x,a=r.y;o.initX=i-o.x,o.initY=a-o.y,o.is_end_draw=!0,this.toolInstance.updateToRemoteNewHandle([o],s.a.Update)}else{Object.assign(o.data,o.oldData),this.initEditBox(o);var c=this.editBoxMap,l=c.w,u=c.h,h=c.tx1,d=c.ty1;this.updateSVGImageAttr(l,u,h,d,!0),Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)}this.editBoxMap.target=null,this.toolInstance.conNode.style.cursor="auto"},e.prototype.setEditorBox=function(){this.editBoxMap.parent=this.toolInstance.whiteboardNode.querySelector(".img-editor-box")},e.prototype.initEditBox=function(e){var t,o=e.graphic_id,r=null===(t=this.toolInstance.getGraphicsHandle(o))||void 0===t?void 0:t.children[0];if(r){var i=this.editBoxMap,n=i.parent,a=i.board,s=i.wdiff,c=i.tdiff,l=e.data,u=l.x,h=l.y,d=l.ex-u+s,p=l.ey-h+s;u-=c,h-=c,u|=0,h|=0,this.editBoxMap.tx1=u,this.editBoxMap.ty1=h,this.editBoxMap.graphic=e,this.editBoxMap.w0=+r.getAttribute("width"),this.editBoxMap.h0=+r.getAttribute("height"),this.editBoxMap.img=r,this.editBoxMap.box=this.toolInstance.getBoxHandle(o),n.style.cssText+="display:block;width:"+d+"px;height:"+p+"px;transform:translate("+u+"px,"+h+"px);",n.children[4].style.cssText+="left:"+(d/2-a)+"px;",n.children[6].style.cssText+="left:"+(d/2-a)+"px;",n.children[5].style.cssText+="top:"+(p/2-a)+"px;",n.children[7].style.cssText+="top:"+(p/2-a)+"px;"}},e.prototype.hideEditBox=function(e){this.editBoxMap.target=null,this.editBoxMap.graphic=null,this.editBoxMap.interrupt=!!e;var t=this.editBoxMap.parent;t&&(t.style.display="none")},e.prototype.hideEditBoxByList=function(e){var t,o=null===(t=this.editBoxMap.graphic)||void 0===t?void 0:t.graphic_id;e.some((function(e){return e.graphic_id===o}))&&this.hideEditBox()},e.prototype.hideEditBoxByIds=function(e){var t,o=null===(t=this.editBoxMap.graphic)||void 0===t?void 0:t.graphic_id;e.some((function(e){return e===o}))&&this.hideEditBox()},e.prototype.moveEditTargetL=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.mx,a=r.w,s=r.h,c=r.tx,l=r.ty,u=r.parent,h=r.board;if(e<=n){e=i-e;var d=0|(o?e-a:e+a),p=0|(o?c-e+a:c-e);u.style.cssText+="width:"+d+"px;transform:translate("+p+"px,"+l+"px);",u.children[4].style.cssText+="left:"+(d/2-h)+"px;",u.children[6].style.cssText+="left:"+(d/2-h)+"px;",this.editBoxMap.tx1=p,this.editBoxMap.ty1=l,this.updateSVGImageAttr(d,s,p,l)}else this.moveEditTargetR(e,0,!0)},e.prototype.moveEditTargetR=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.mx,a=r.w,s=r.h,c=r.tx1,l=r.ty1,u=r.parent,h=r.board;e>n?(e=0|(o?e-i-a:e-i+a),u.style.cssText+="width:"+e+"px;",u.children[4].style.cssText+="left:"+(e/2-h)+"px;",u.children[6].style.cssText+="left:"+(e/2-h)+"px;",this.updateSVGImageAttr(e,s,c,l)):this.moveEditTargetL(e,0,!0)},e.prototype.moveEditTargetT=function(e,t,o){var r=this.editBoxMap,i=r.y,n=r.my,a=r.w,s=r.h,c=r.tx,l=r.ty,u=r.parent,h=r.board;if(t<=n){t=i-t;var d=0|(o?t-s:t+s),p=0|(o?l-t+s:l-t);u.style.cssText+="height:"+d+"px;transform:translate("+c+"px,"+p+"px);",u.children[5].style.cssText+="top:"+(d/2-h)+"px;",u.children[7].style.cssText+="top:"+(d/2-h)+"px;",this.editBoxMap.tx1=c,this.editBoxMap.ty1=p,this.updateSVGImageAttr(a,d,c,p)}else this.moveEditTargetB(0,t,!0)},e.prototype.moveEditTargetB=function(e,t,o){var r=this.editBoxMap,i=r.y,n=r.my,a=r.w,s=r.h,c=r.tx1,l=r.ty1,u=r.parent,h=r.board;t>n?(t=0|(o?t-i-s:t-i+s),u.style.cssText+="height:"+t+"px;",u.children[5].style.cssText+="top:"+(t/2-h)+"px;",u.children[7].style.cssText+="top:"+(t/2-h)+"px;",this.updateSVGImageAttr(a,t,c,l)):this.moveEditTargetT(0,t,!0)},e.prototype.moveEditTargetLT=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.y,a=r.mx,s=r.my,c=r.w,l=r.h,u=r.tx,h=r.ty,d=r.parent,p=r.board;if(e>i-4&&t>n-4||e<i-4&&t<n-4)if(c<=l&&e<=a||l<c&&t<=s){var f=0,g=0,m=0,_=0;if(o?(e=Math.min(i-e-c,n-t-l),l<c?(g=e,f=Math.round(c*g/l),_=h-e,m=Math.round(u-c*e/l)):(f=e,g=Math.round(f*l/c),m=u-e,_=Math.round(h-l*e/c))):(t-=n,e=(e-=i)<0||t<0?Math.max(e,t):Math.min(e,t),l<c?(g=l-e,f=Math.round(c*g/l),_=h+e,m=Math.round(u+c*e/l)):(f=c-e,g=Math.round(f*l/c),m=u+e,_=Math.round(h+l*e/c))),f<0||g<0)return;f|=0,g|=0,m|=0,_|=0,d.style.cssText+="width:"+f+"px;height:"+g+"px;transform:translate("+m+"px,"+_+"px);",d.children[4].style.cssText+="left:"+(f/2-p)+"px;",d.children[6].style.cssText+="left:"+(f/2-p)+"px;",d.children[5].style.cssText+="top:"+(g/2-p)+"px;",d.children[7].style.cssText+="top:"+(g/2-p)+"px;",this.editBoxMap.tx1=m,this.editBoxMap.ty1=_,this.updateSVGImageAttr(f,g,m,_)}else this.moveEditTargetRB(e,t,!0)},e.prototype.moveEditTargetRB=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.y,a=r.mx,s=r.my,c=r.w,l=r.h,u=r.tx1,h=r.ty1,d=r.parent,p=r.board;if(e>i-4&&t>n-4||e<i-4&&t<n-4)if(c<=l&&e>=a||l<c&&t>=s){e-=i,t-=n;var f=0,g=0;if(o?l<c?(g=Math.min(e,t)-l,f=Math.round(c*g/l)):(f=Math.min(e,t)-c,g=Math.round(f*l/c)):(e=e<0||t<0?Math.max(e,t):Math.min(e,t),l<c?(g=e+l,f=Math.round(c*g/l)):(f=e+c,g=Math.round(f*l/c))),f<0||g<0)return;f|=0,g|=0,d.style.cssText+="width:"+f+"px;height:"+g+"px;",d.children[4].style.cssText+="left:"+(f/2-p)+"px;",d.children[6].style.cssText+="left:"+(f/2-p)+"px;",d.children[5].style.cssText+="top:"+(g/2-p)+"px;",d.children[7].style.cssText+="top:"+(g/2-p)+"px;",this.updateSVGImageAttr(f,g,u,h)}else this.moveEditTargetLT(e,t,!0)},e.prototype.moveEditTargetLB=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.y,a=r.mx,s=r.my,c=r.w,l=r.h,u=r.tx,h=r.ty,d=r.parent,p=r.board;if(e<i-4&&t>n-4||e>i-4&&t<n-4)if(c<=l&&e<a||l<c&&t>s){var f=0,g=0,m=0,_=h;o?(e=Math.min(i-e-c,t-n-l),e=Math.abs(e),l<c?(g=e,f=Math.round(c*g/l)):(f=e,g=Math.round(f*l/c)),m=u-f,_=h+l):(t-=n,e=(e-=i)<0||t>0?Math.min(-e,t):-Math.min(e,-t),l<c?(g=l+e,m=u+c-(f=Math.round(c*g/l))):(f=c+e,g=Math.round(f*l/c),m=u-e)),f|=0,g|=0,m|=0,_|=0,d.style.cssText+="width:"+f+"px;height:"+g+"px;transform:translate("+m+"px,"+_+"px);",d.children[4].style.cssText+="left:"+(f/2-p)+"px;",d.children[6].style.cssText+="left:"+(f/2-p)+"px;",d.children[5].style.cssText+="top:"+(g/2-p)+"px;",d.children[7].style.cssText+="top:"+(g/2-p)+"px;",this.editBoxMap.tx1=m,this.editBoxMap.ty1=_,this.updateSVGImageAttr(f,g,m,_)}else this.moveEditTargetRT(e,t,!0)},e.prototype.moveEditTargetRT=function(e,t,o){var r=this.editBoxMap,i=r.x,n=r.y,a=r.mx,s=r.my,c=r.w,l=r.h,u=r.tx,h=r.ty,d=r.parent,p=r.board;if(e>i-4&&t<n-4||e<i-4&&t>n-4)if(c<=l&&e>a||l<c&&t<s){var f=0,g=0,m=u,_=0;o?(e=Math.min(e-i-c,n-t-l),e=Math.abs(e),l<c?(g=e,f=Math.round(c*g/l)):(f=e,g=Math.round(f*l/c)),m=u+c,_=h-g):(t-=n,e=(e-=i)<0||t>0?-Math.min(-e,t):Math.min(e,-t),l<c?(g=l+e,f=Math.round(c*g/l),_=h-e):(f=c+e,_=h+l-(g=Math.round(f*l/c)))),f|=0,g|=0,m|=0,_|=0,d.style.cssText+="width:"+f+"px;height:"+g+"px;transform:translate("+m+"px,"+_+"px);",d.children[4].style.cssText+="left:"+(f/2-p)+"px;",d.children[6].style.cssText+="left:"+(f/2-p)+"px;",d.children[5].style.cssText+="top:"+(g/2-p)+"px;",d.children[7].style.cssText+="top:"+(g/2-p)+"px;",this.editBoxMap.tx1=m,this.editBoxMap.ty1=_,this.updateSVGImageAttr(f,g,m,_)}else this.moveEditTargetLB(e,t,!0)},e.prototype.updateSVGImageAttr=function(e,t,o,r,i){var n=this.editBoxMap,a=n.w0,s=n.h0,c=n.wdiff,l=n.tdiff,u=n.img,h=n.box,d=n.graphic;if(u&&h){e|=0,t|=0,o|=0,r|=0,h.style.cssText+="width:"+e+"px;height:"+t+"px;left:"+o+"px;top:"+r+"px;",e-=c,t-=c,o+=l,r+=l;var p=Number((e/a).toFixed(7)),f=Number((t/s).toFixed(7));if(u.setAttribute("transform","translate("+o+", "+r+") scale("+p+", "+f+")"),!i){var g=null==d?void 0:d.data;g.x=o,g.y=r,g.ex=o+e,g.ey=r+t}}},e}()),m=function(){return(m=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(){function e(e){var t=this;this.bindFlag=!1,this.authFlag=!0,this.noMoveUp=!0,this.isWillMove=!1,this.mouseInfo={moveCount:0,touchLeaveRect:{left:0,top:0,right:0,bottom:0}},this.moveSelectedGraphicIds="",this.userId="",this.selectBoxMap={l:0,t:0,r:0,b:0,box:document.createElement("div")},this.mousedownHandle=function(e){if(t.toolInstance.enableDraw&&t.toolInstance.downCommonHandle(e)&&t.imageTool.startEditTarget(e,t.mousemoveHandle)){t.setGraphicsBox(),t.authFlag=!0,t.imageTool.editBoxMap.interrupt=!1;var o=t.selectBoxMap,i=o.l,c=o.t,l=o.r,u=o.b,h=t.toolInstance.getMouseStartPoint(e),d=h.clientX,p=h.clientY,f=t.toolInstance.getUserAuth(),g=t.toolInstance,_=g.graphicList,y=g.whiteboardNode;t.mouseInfo.touchLeaveRect=t.toolInstance.getWhiteboardNodeRect();var v=t.getCoveredMaxZorderGraphic(e);if(v){var b=v.rect,w=b.left,S=b.top,I=b.right,x=b.bottom,E=t.toolInstance.transLocationHandle({clientX:w,clientY:S}),P=t.toolInstance.transLocationHandle({clientX:I,clientY:x});w=E.clientX,S=E.clientY,I=P.clientX,x=P.clientY;var T=v.graphic,D=T.graphic_id,O=T.selected,M=T.type,A=T.creator_id,C=f.update||A===t.userId;O||(_.forEach((function(e){e.selected=e.graphic_id===D})),M===s.f.Image?C?(t.imageTool.initEditBox(v.graphic),t.hideSelectBox(D)):(t.initSelectBox(w,S,I,x),Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)):(t.hideImageEditBox(),t.initSelectBox(w,S,I,x))),O&&M===s.f.Text&&1==_.filter((function(e){return e.selected})).length&&(C?(t.noMoveUp=D,setTimeout((function(){return t.hideSelectBox(D)}),50)):Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthUpdateGraphic)),t.isWillMove=!0}else{l>i&&i<=d&&d<=l&&c<=p&&p<=u?t.isWillMove=!0:t.hideSelectBox()}t.mouseInfo.moveCount=0,t.moveSelectedGraphicIds="",t.toolInstance.updateMousePointsHandle(d,p),t.isWillMove?_.forEach((function(e){e.selected&&(f.move||e.creator_id===t.userId)&&(e.px=e.x,e.py=e.y,e.is_end_draw=!1,e.operate_id=Object(a.d)())})):(t.toolInstance.updateProtoGraphic(m(m({graphic_id:Object(a.d)()},r.a.basicState),{x:0,y:0,px:0,py:0,data:[d,p]})),t.hideImageEditBox(),t.hideSelectBox()),t.toolInstance.toolAddEL(y,r.a.mouseEvents.move,t.mousemoveHandle)}},this.mousemoveHandle=function(e){if(t.toolInstance.enableDraw){if(e instanceof MouseEvent&&!e.buttons)return t.resetMouse();if(t.imageTool.moveEditTarget(e))if(t.toolInstance.isTouchLeaveWhenMove(e,t.mouseInfo.touchLeaveRect))t.mouseupHandle();else{t.mouseInfo.moveCount++,t.noMoveUp=!1;var o=t.toolInstance.getMouseChangedPoint(e);if(t.isWillMove)t.updateGraphicsOnMoving(o);else{t.toolInstance.updateGraphicsDataHandle(o);var r=t.toolInstance.protoGraphic;t.svgTool.drawGraphicsRect(r,s.e.Local,r.color,.3),t.mouseInfo.moveCount%10==0&&t.updateBoxBorderOnSelector()}}}},this.mouseupHandle=function(){if(!t.toolInstance.enableDraw||!0===t.noMoveUp)return t.imageTool.endEditTarget(),void t.resetMouse();if(t.isWillMove){var e=t.selectBoxMap,o=e.l,r=e.t,i=e.r,n=e.b;if(t.selectBoxMap.l=+t.selectBoxMap.box.style.left.replace("px",""),t.selectBoxMap.t=+t.selectBoxMap.box.style.top.replace("px",""),t.selectBoxMap.r=t.selectBoxMap.l+i-o,t.selectBoxMap.b=t.selectBoxMap.t+n-r,!t.noMoveUp){var a=t.toolInstance.graphicList.filter((function(e){return!!t.moveSelectedGraphicIds.includes(e.graphic_id)&&(e.is_end_draw=!0,!0)}));t.toolInstance.updateToRemoteNewHandle(a,s.a.Move)}}else t.setSelectBox(!0);!t.imageTool.editBoxMap.interrupt&&t.noMoveUp&&t.toolInstance.getGraphicIsEndDraw(t.noMoveUp)&&t.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolText).focusHandle(t.noMoveUp);t.resetMouse()},this.toolInstance=e,this.userId=e.getUserID(),this.svgTool=e.getInstanceHandle(s.j.ZegoWhiteboardViewToolLine),this.imageTool=new g(e),this.setGraphicsBox()}return e.prototype.setGraphicsBox=function(){this.selectBoxMap.box=this.toolInstance.whiteboardNode.querySelector(".graphics-box"),this.imageTool.setEditorBox()},e.prototype.initSelectBox=function(e,t,o,r){var i=this;this.selectBoxMap.l=e,this.selectBoxMap.t=t,this.selectBoxMap.r=o,this.selectBoxMap.b=r,o-=e,r-=t,this.toolInstance.graphicList.forEach((function(e){return i.toolInstance.updateBoxBorder(e)})),this.selectBoxMap.box.style.cssText+="left:"+e+"px;top:"+t+"px;width:"+o+"px;height:"+r+"px;display:block;"},e.prototype.hideSelectBox=function(e){var t=this;this.selectBoxMap.l=0,this.selectBoxMap.t=0,this.selectBoxMap.r=0,this.selectBoxMap.b=0,this.selectBoxMap.box.style.display="none",e?this.toolInstance.graphicList.forEach((function(e){!e.selected||e.type!==s.f.Image&&e.type!==s.f.Text?t.toolInstance.updateBoxBorder(e):t.toolInstance.updateBoxBorder(e,!0)})):this.toolInstance.graphicList.forEach((function(e){e.selected=!1,t.toolInstance.updateBoxBorder(e)}))},e.prototype.setSelectBox=function(e){var t,o=this;if("none"===(null===(t=this.imageTool.editBoxMap.parent)||void 0===t?void 0:t.style.display)){var r=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,n=0,a=0,c=0,l=0;if(this.toolInstance.graphicList.forEach((function(e){if(e.selected){var t=o.toolInstance.getBoxInfoByGraphic(e);if(t){l++,e.type===s.f.Image&&c++;var u=t.x,h=t.y,d=t.width,p=t.height;r=Math.min(r,u),i=Math.min(i,h),n=Math.max(n,u+d),a=Math.max(a,h+p)}}o.toolInstance.updateBoxBorder(e)})),n>0&&a>0){this.selectBoxMap.l=r,this.selectBoxMap.t=i,this.selectBoxMap.r=n,this.selectBoxMap.b=a;var u="left:"+r+"px;top:"+i+"px;width:"+(n-=r)+"px;height:"+(a-=i)+"px;display:block;";if(e&&1==c&&1==l){var h=this.toolInstance.graphicList.find((function(e){return e.selected&&e.type==s.f.Image}));h&&(h.creator_id==this.userId||this.toolInstance.getUserAuth().update)&&(u=u.replace("block","none"),this.toolInstance.updateBoxBorder(h,!0),this.imageTool.initEditBox(h))}this.selectBoxMap.box.style.cssText+=u}else this.selectBoxMap.l=0,this.selectBoxMap.t=0,this.selectBoxMap.r=0,this.selectBoxMap.b=0,this.selectBoxMap.box.style.display="none"}},e.prototype.resetMouse=function(){var e=this.toolInstance,t=e.protoGraphic,o=e.whiteboardNode;this.toolInstance.toolRmEl(o,r.a.mouseEvents.move,this.mousemoveHandle);var i=this.toolInstance.getGraphicsHandle(t.graphic_id);Object(a.n)(null==i?void 0:i.parentElement),this.toolInstance.initDrawHandle(),this.isWillMove=!1,this.noMoveUp=!0},e.prototype.getCanMovedGraphicList=function(){var e=this,t=0,o=0,r=[],i=!this.moveSelectedGraphicIds,a=this.toolInstance.getUserAuth().move,c=this.toolInstance.graphicList.filter((function(n){if(n.selected){if(t++,!i&&e.moveSelectedGraphicIds.includes(n.graphic_id))return o++,!0;if(i&&(a||n.creator_id===e.userId))return o++,r.push(n.graphic_id),!0}return e.authFlag&&e.toolInstance.updateBoxBorder(n,!0),!1}));return i&&(this.moveSelectedGraphicIds=r.join(",")),t!==o&&(Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthMoveGraphic),this.authFlag=!1),c},e.prototype.updateGraphicsOnMoving=function(e){var t=this,o=e.clientX,r=e.clientY,i=this.getCanMovedGraphicList();if(i.length){this.toolInstance.updateMousePointsHandle(o,r);var n=this.toolInstance.calMoveHandle(),a=n[0],c=n[1],l=this.imageTool.editBoxMap,u=l.tdiff,h=l.parent,d=l.graphic,p=null==d?void 0:d.graphic_id,f=1==i.length&&(i[0].creator_id==this.userId||!!this.toolInstance.getUserAuth().update);i.forEach((function(e){t.toolInstance.updateGraphicsOffsetHandle(e,a,c);var o=e.graphic_id,r=e.type;if(r===s.f.Image){var i=(e.initX||0)+e.x|0,n=(e.initY||0)+e.y|0,l=e.data,d=e.oldData;d.x=l.x,d.y=l.y,d.ex=l.ex,d.ey=l.ey,l.ex=i+l.ex-l.x,l.ey=n+l.ey-l.y,l.x=i,l.y=n,t.toolInstance.moveGraphicsHandle(o,i,n),p===o&&(i-=u,n-=u,t.imageTool.editBoxMap.tx1=i,t.imageTool.editBoxMap.ty1=n,h.style.cssText+="transform:translate("+i+"px,"+n+"px)"),t.toolInstance.updateBoxHandle(e,f)}else r!==s.f.Laser&&(t.toolInstance.moveGraphicsHandle(o,e.x,e.y),t.toolInstance.updateBoxHandle(e))}));var g=this.selectBoxMap,m=g.l,_=g.t,y=this.toolInstance.mousePoints,v=y.boxX,b=y.boxY;this.selectBoxMap.box.style.cssText+="left:"+(m+v)+"px;top:"+(_+b)+"px;",this.mouseInfo.moveCount%10==0&&this.toolInstance.updateToRemoteNewHandle(i,s.a.Move)}},e.prototype.updateBoxBorderOnSelector=function(){var e=this,t=this.toolInstance.graphicList,o=this.toolInstance.getGraphicsHandle(this.toolInstance.protoGraphic.graphic_id);if(o){var r=o.getBoundingClientRect(),i=r.left,n=r.right,a=r.top,c=r.bottom;t.forEach((function(t){if(t.type!==s.f.Laser){var o=e.toolInstance.getGraphicsHandle(t.graphic_id);if(o){var r=o.getBoundingClientRect(),l=r.left,u=r.top,h=r.right,d=r.bottom;l===h&&h++,u===d&&d++,t.selected=Math.max(i,l)<Math.min(n,h)&&Math.max(a,u)<Math.min(c,d)&&e.toolInstance.getGraphicIsEndDraw(t.graphic_id)}}})),this.setSelectBox()}},e.prototype.getCoveredMaxZorderGraphic=function(e){var t=this,o=e instanceof MouseEvent?e:e.changedTouches[0],r=o.clientX,i=o.clientY,n=0,a=null,c=null;return this.toolInstance.graphicList.forEach((function(e){if(e.type!==s.f.Laser&&t.toolInstance.getGraphicIsEndDraw(e.graphic_id)){var o=t.toolInstance.getBoxHandle(e.graphic_id);if(o){var l=o.getBoundingClientRect(),u=l.left,h=l.top,d=l.right,p=l.bottom;if(r>=u&&r<=d&&i>=h&&i<=p){var f=e.zorder||1;(!n||f>n)&&(n=f,a=e,c=l)}}}})),a&&c?{graphic:a,rect:c}:null},e.prototype.bindEventsHandle=function(){if(!this.bindFlag){this.bindFlag=!0;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolAddEL(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolAddEL(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.removeEventsHandle=function(){if(this.bindFlag){this.bindFlag=!1;var e=this.toolInstance.whiteboardNode;this.toolInstance.toolRmEl(e,r.a.mouseEvents.down,this.mousedownHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.up,this.mouseupHandle),this.toolInstance.toolRmEl(e,r.a.mouseEvents.leave,this.mouseupHandle)}},e.prototype.hideImageEditBox=function(){this.imageTool.hideEditBox()},e.prototype.hideImageEditBoxByList=function(e){this.imageTool.hideEditBoxByList(e)},e.prototype.hideImageEditBoxByIds=function(e){this.imageTool.hideEditBoxByIds(e)},e.prototype.updateSelectorBoxHandle=function(e,t){if(this.hideImageEditBoxByIds(t),this.hideImageEditBoxByList(e),"none"!=this.selectBoxMap.box.style.display){var o=e.map((function(e){return e.graphic_id}));o.push.apply(o,t),this.toolInstance.graphicList.forEach((function(e){o.includes(e.graphic_id)&&(e.selected=!1)})),this.setSelectBox(!0)}},e}(),y=o(2);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=function(){return(b=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},S=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},I=y.b.bind(null,"wb.v."),x=function(){function e(e,t){this.isRemote=!1,this.backgroundInfo={image:"",pos:"",mode:0},this.toolInstance=e,this.createContainer(t)}return e.prototype.createContainer=function(e){var t;this.graphicsBgConNode&&(this.graphicsBgConNode.innerHTML="");var o=this.toolInstance,i=o.whiteboardID,n=o.viewInfo,a=r.a.reservedPrefix,c=a.graphicsBgContainer,l=a.graphicsBgImageContainer,u=document.createElement("div");u.id=""+c+i;for(var h=0,d=n.pageCount||1;h<d;h++){var p=document.createElement("div");p.id=l+h+i,u.appendChild(p)}this.graphicsBgConNode=u,this.toolInstance.viewInfo.direction===s.o.Vertical&&(this.graphicsBgConNode.style.flexDirection="column"),null===(t=e.firstChild)||void 0===t||t.before(u)},e.prototype.drawBackgroundImage=function(e,t){var o=this,r="";switch(t){case s.m.ZegoWhiteboardViewImageFitModeLeft:r="left";break;case s.m.ZegoWhiteboardViewImageFitModeRight:r="right";break;case s.m.ZegoWhiteboardViewImageFitModeBottom:r="bottom";break;case s.m.ZegoWhiteboardViewImageFitModeTop:r="top";break;case s.m.ZegoWhiteboardViewImageFitModeCenter:r="center"}var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){for(var i=o.graphicsBgConNode.childNodes,n=0,a=i.length;n<a;n++){var s=i[n];s.style.backgroundImage="url("+e+")",s.style.backgroundPosition=r,s.style.backgroundRepeat="no-repeat",s.style.backgroundSize="contain"}o.backgroundInfo.image=e,o.backgroundInfo.pos=r,o.backgroundInfo.mode=t},i.src=e},e.prototype.clearBackgroundImageLocal=function(){var e=this,t=this.toolInstance.graphicList.filter((function(e){return e.type===s.f.BgImage}));this.backgroundInfo.image="",this.backgroundInfo.pos="",this.backgroundInfo.mode=0,t.map((function(t){e.toolInstance.deleteHandle(t.graphic_id)}));for(var o=this.graphicsBgConNode.childNodes,r=0,i=o.length;r<i;r++){o[r].style.backgroundImage="none"}},e.prototype.backgroundImageUpdateToRemote=function(e,t){if(this.isRemote)this.isRemote=!1;else{var o=t?s.a.Update:s.a.Create;this.toolInstance.updateToRemoteNewHandle([e],o)}},e.prototype.updateToLocal=function(e){return this.isRemote=e,this},e.prototype.setBackgroundColor=function(e){this.graphicsBgConNode.style.backgroundColor=e},e.prototype.setBackgroundImage=function(e,t,o){var r=this;if(!e||t>4){var i=Object(n.b)(s.i.ZegoWhiteboardViewErrorParamInvalid);return Promise.reject(i)}if(!this.toolInstance.enableDraw)return Promise.reject({});if(!this.toolInstance.getUserAuth().create){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic);return Promise.reject(i)}var a=!!this.backgroundInfo.image,c=this.toolInstance.graphicList.find((function(e){return e.type==s.f.BgImage}));if(a&&c&&!this.toolInstance.getUserAuth().update&&c.creator_id!==this.toolInstance.getUserID()){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorNoAuthUpdateGraphic);return Promise.reject(i)}if("string"==typeof e){var l=e;if(!l.startsWith("https://")){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl);return Promise.reject(i)}return new Promise((function(o,i){var a=!0,c=new XMLHttpRequest;c.open("HEAD",l,!0),c.onreadystatechange=function(){if(4==c.readyState){if(200!=c.status){a=!1;var o=404===c.status?s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl:s.i.ZegoWhiteboardViewErrorInvalidRsp;return i(Object(n.b)(o))}var u=(c.getResponseHeader("Content-Type")||"").replace("image/",""),h=+c.getResponseHeader("Content-Length");if(!"jpg,jpeg,png".includes(u)){var d=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return i(d)}if(h>10485760){d=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit);return i(d)}y.a.info(I("mod.setBackgroundImage"),JSON.stringify({params:{address:e}})),r.addBackgroundImageGraphic(l,t)}},c.onerror=function(){if(a){var e=404===c.status?s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl:s.i.ZegoWhiteboardViewErrorInvalidRsp;i(Object(n.b)(e))}},c.send(null)}))}if(this.toolInstance.serviceHandle.isElectron&&"object"==v(e)){if(!/(\.jpg|\.jpeg|\.png)$/.test((e=e).path)){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return Promise.reject(i)}return y.a.info(I("mod.setBackgroundImage"),JSON.stringify({params:{address:e.path}})),this.toolInstance.serviceHandle.uploadImage(e.path,o).then((function(e){return r.addBackgroundImageGraphic(e,t)}))}var u=(e=e).type.replace("image/","");if(!"jpg,jpeg,png".includes(u)){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return Promise.reject(i)}if(e.size>10485760){i=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit);return Promise.reject(i)}return y.a.info(I("mod.setBackgroundImage"),JSON.stringify({params:{address:e.name}})),this.toolInstance.serviceHandle.uploadImage(e,o).then((function(e){return r.addBackgroundImageGraphic(e,t)}))},e.prototype.remoteAddBackgroundImageGraphic=function(e){var t=this.toolInstance.graphicList,o=t.find((function(e){return e.type===s.f.BgImage}));o?(o=Object.assign(o,e),this.toolInstance.setDataToGraphicList(o.graphic_id,{data:o.data})):t.push(e);var r=e.data,i=r.url,n=r.fit_mode;this.drawBackgroundImage(i,n)},e.prototype.addBackgroundImageGraphic=function(e,t){var o=this.toolInstance.graphicList,i={x:0,y:0,ex:0,ey:0,url:e,fit_mode:t,hash:""},n=Object(a.d)(),c=o.find((function(e){return e.type===s.f.BgImage})),l=!!c;if(c){var u=c.data;c=b(b({},c),{data:i,oldData:u,operate_id:Object(a.d)()}),this.toolInstance.setDataToGraphicList(c.graphic_id,{data:i})}else{c=b(b({graphic_id:n,operate_id:n,creator_id:this.toolInstance.getUserID()},r.a.basicState),{type:s.f.BgImage,x:0,y:0,initX:0,initY:0,data:i,oldData:{},zorder:0,layer:1,is_end_draw:!0});var h=JSON.parse(JSON.stringify(c));o.push(h)}return this.drawBackgroundImage(e,t),this.backgroundImageUpdateToRemote(c,l),Promise.resolve(e)},e.prototype.clearBackgroundImage=function(){return w(this,void 0,void 0,(function(){var e;return S(this,(function(t){return this.isRemote?(this.clearBackgroundImageLocal(),this.isRemote=!1,[2]):this.toolInstance.enableDraw?(e=this.toolInstance.graphicList.find((function(e){return e.type==s.f.BgImage})),this.backgroundInfo.image&&e&&!this.toolInstance.getUserAuth().delete&&e.creator_id!==this.toolInstance.getUserID()?(Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthDeleteGraphic),[2]):(e&&(e.operate_id=Object(a.d)(),this.clearBackgroundImageLocal(),this.toolInstance.updateToRemoteNewHandle([e],s.a.Delete)),[2])):[2]}))}))},e}(),E=function(){return(E=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},P=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<o;t++)for(var n=arguments[t],a=0,s=n.length;a<s;a++,i++)r[i]=n[a];return r},T=y.b.bind(null,"wb.v."),D=function(){function e(e){this.mousePoints={sx:-1,sy:-1,ex:-1,ey:-1,boxX:0,boxY:0},this.graphicList=[],this.enableDraw=!0,this.graphicTaskList=[],this.undoList=[],this.clearUndoData=null,this.redoList=[],this.doTaskSeq=0,this.canDo=!0,this.isReloading=!1,this.graphicExtraMap={},this.instancesMap={};var t=e.whiteboardID,o=e.zoomNode,r=e.conNode,i=e.serviceHandle,n=e.graphicsConNode,a=e.graphicsBoxConNode,s=e.viewInfo,c=e.whiteboardNode;this.whiteboardID=t,this.conNode=r,this.zoomNode=o,this.userNode=o.parentNode,this.graphicsConNode=n,this.whiteboardNode=c,this.graphicsBoxConNode=a,this.serviceHandle=i,this.viewInfo=s,this.updateOffsetAndScrollHandle(),this.initDrawHandle()}return e.prototype.getTranslateXY=function(e){if(!e)return{x:0,y:0};var t=e.match(/translate\((-?\d*.?\d*)px(\,\s*(-?\d*.?\d*)px)?\)/);return{x:+t[1]||0,y:+t[3]||0}},e.prototype.clearRealTimeInterval=function(e){clearInterval(this.graphicExtraMap[e].realTimeId),delete this.graphicExtraMap[e]},e.prototype.realTimeHandle=function(e,t){var o,i,n=this,a=t.graphic_id,c=t.is_end_draw,l=t.operate_id,u=this.graphicList.find((function(e){return e.graphic_id==a&&e.operate_id==l}));if(u){var h=r.a.realTimeState,d=h.remoteDrawDelay,p=h.remoteDrawCount,f=h.remoteDrawEndDelay;c?c&&(null===(i=this.graphicExtraMap[a])||void 0===i?void 0:i.realTimeId)&&(this.clearRealTimeInterval(a),y.a.info(T("gra.remote_draw_realtime_end"),a)):this.graphicExtraMap[a]&&this.graphicExtraMap[a].realTimeId?(o=u.data).push.apply(o,t.data):(this.graphicExtraMap[a]=this.graphicExtraMap[a]||{},this.graphicExtraMap[a].realTimeIndex=0,this.graphicExtraMap[a].realTimeId=setInterval((function(t){var o,r=n.graphicList.find((function(e){return e.graphic_id===t}));if(r&&n.graphicExtraMap[t]){var i=r.data,a=n.graphicExtraMap[t].realTimeIndex>=i.length;a?a&&Date.now()-n.graphicExtraMap[t].realTimeLast>f&&(r.is_end_draw=!0,n.clearRealTimeInterval(t),y.a.info(T("gra.remote_draw_realtime_timeout"),t)):(n.graphicExtraMap[t].realTimeLast=Date.now(),(r=JSON.parse(JSON.stringify(r))).data=i.slice(0,n.graphicExtraMap[t].realTimeIndex+=p),e.drawGraphicsHandle(r,s.e.Remote))}else!r&&(null===(o=n.graphicExtraMap[t])||void 0===o?void 0:o.realTimeId)&&(n.clearRealTimeInterval(t),y.a.info(T("gra.remote_draw_realtime_deleted"),t))}),d,a))}},e.prototype.createHandle=function(e,t,o){var r=e.graphic_id;if(!this.graphicList.some((function(e){return e.graphic_id===r})))switch(this.graphicList.push(e),e.type){case s.f.Text:t.drawGraphicsHandle(e,!1);break;default:o.drawGraphicsHandle(e,s.e.UnReDo)}},e.prototype.moveHandle=function(e,t){var o=e.graphic_id,r=e.x,i=e.y,n=e.type;if(n===s.f.Image)this.assingImageGraphicData(e,s.a.Move),t.updateGraphicsImage(e);else{this.setDataToGraphicList(o,{x:r,y:i});var a=n===s.f.Laser?""+1/this.viewInfo.zoom:void 0;this.moveGraphicsHandle(o,r,i,a)}},e.prototype.updateHandle=function(e,t,o){switch(e.type){case s.f.Text:t.backUpdateGraphicsHandle(e);break;case s.f.Image:this.assingImageGraphicData(e,s.a.Update),o.updateGraphicsImage(e);break;case s.f.BgImage:this.background.remoteAddBackgroundImageGraphic(e)}},e.prototype.assingImageGraphicData=function(e,t){var o=e.graphic_id;this.graphicList.some((function(r){if(r.graphic_id===o){if(Object.assign(r.data,e.data),Object.assign(r.oldData,e.oldData),t===s.a.Move)r.x=e.x,r.y=e.y,r.px=e.px,r.py=e.py;else if(t===s.a.Update){var i=r.data,n=i.x,a=i.y;r.initX=n-r.x,r.initY=a-r.y}return!0}return!1}))},e.prototype.reverseGraphicByMove=function(e){if(e.x=[e.px||0,e.px=e.x][0],e.y=[e.py||0,e.py=e.y][0],e.type===s.f.Image){var t=e.data,o=t.ex-t.x,r=t.ey-t.y;t.x=e.x+(e.initX||0),t.y=e.y+(e.initY||0),t.ex=t.x+o,t.ey=t.y+r}},e.prototype.resetImageGraphicOrigin=function(e){var t=e.data,o=t.x,r=t.y;e.initX=o-e.x,e.initY=r-e.y},e.prototype.createUndoData=function(e){var t=this;if(!e.length)return[];var o=JSON.parse(JSON.stringify(e)),r=o[0],i=r.action,n=r.type,c=r.oldData,l=r.data;if(i===s.a.Create||i===s.a.Append||i===s.a.Update)switch(n){case s.f.Text:var u=Object(a.q)(c).text,h=Object(a.q)(l).text;if(!u&&!h)return[];u?(r.action=h?s.a.Update:s.a.Create,r.data=c,r.oldData=l):r.action=s.a.Delete;break;case s.f.Pencil:case s.f.Line:case s.f.Rect:case s.f.Ellipse:r.action=s.a.Delete;break;case s.f.Image:i===s.a.Create?r.action=s.a.Delete:(r.data=c,r.oldData=l,this.resetImageGraphicOrigin(r));case s.f.BgImage:i===s.a.Create?r.action=s.a.Delete:(r.data=c,r.oldData=l)}else i===s.a.Delete?o.forEach((function(e){e.action=s.a.Create,e.type===s.f.Image&&t.resetImageGraphicOrigin(e)})):i===s.a.Move&&o.forEach((function(e){return t.reverseGraphicByMove(e)}));return o.forEach((function(e){e.operate_id=Object(a.d)(),e.is_end_draw=!0})),o},e.prototype.reverseData=function(e){var t=this;e.length&&e.forEach((function(e){var o=e.action,r=e.data,i=e.oldData;switch(o){case s.a.Create:e.action=s.a.Delete;break;case s.a.Delete:e.action=s.a.Create;break;case s.a.Move:t.reverseGraphicByMove(e);break;case s.a.Update:e.data=i,e.oldData=r}e.operate_id=Object(a.d)(),e.is_end_draw=!0}))},e.prototype.createBackground=function(e,t){this.background||(this.background=new x(this,e)),t&&this.background.createContainer(e)},e.prototype.triggerAnimateHandle=function(e,t){t===s.e.Remote?e.classList.add("transition"):e.classList.remove("transition")},e.prototype.transLocationHandle=function(e,t){var o=e.clientX,r=e.clientY,i=this.offsetData,n=i.offsetLeft,a=i.offsetTop,s=this.scrollData,c=s.scrollLeft,l=s.scrollTop,u=this.viewInfo,h=u.zoom,d=u.zoomTX,p=u.zoomTY,f={clientX:(o-n+c-d)/h+u.offsetPageX,clientY:(r-a+l-p)/h+u.offsetPageY};return t||(f.clientX=Math.round(f.clientX),f.clientY=Math.round(f.clientY)),f},e.prototype.transLocationOrigin=function(e){var t=e.clientX,o=e.clientY,r=this.viewInfo,i=r.offsetPageX,n=r.offsetPageY,a=r.zoom,s=this.whiteboardNode.parentNode,c=s.scrollLeft,l=s.scrollTop;return{clientX:Math.round(t+c/a+i),clientY:Math.round(o+l/a+n)}},e.prototype.bindEventsHandle=function(e){this.initDrawHandle();var t=this.instancesMap[e];t&&t.bindEventsHandle()},e.prototype.removeEventsHandle=function(e){var t=this.instancesMap[e];t&&t.removeEventsHandle()},e.prototype.moveGraphicsHandle=function(e,t,o,r){var i=this.getGraphicsHandle(e);if(i)if("g"===i.tagName){var n=Object(a.g)(i)[0];r=(r=n.getAttribute("transform")||"")&&r.includes("scale(")?r.replace(/.*(scale\(\d+(.\d+)?,(\s*)?\d+(.\d+)?\)).*/," $1"):"",n.setAttribute("transform","translate("+(t||0)+", "+(o||0)+")"+r)}else{var s="translate("+(t||0)+"px, "+(o||0)+"px)",c=i.style.transform.match(/scale\((\d*.?\d*)\)/),l=c?c[1]:"";!r&&l?s=s+" scale("+l+")":r&&(s=s+" scale("+r+")"),i.style.transform=s}},e.prototype.getGraphicsHandle=function(e,t){void 0===t&&(t=this.userNode);var o=t.querySelector("#"+r.a.reservedPrefix.graphics+e);return o&&(o=o.parentNode),o},e.prototype.batchGetGraphicsHandle=function(e,t){return void 0===e&&(e=this.userNode),e.querySelectorAll("[id^="+t+"]")},e.prototype.getBoxSelHandle=function(e){return"#"+r.a.reservedPrefix.graphicsBox+e},e.prototype.updateOffsetAndScrollHandle=function(){this.offsetData=Object(a.h)(this.conNode),this.scrollData=Object(a.i)(this.conNode)},e.prototype.updateGraphicsOffsetHandle=function(e,t,o){var r=e.x,i=e.y;e.x=r+t,e.y=i+o},e.prototype.calMoveHandle=function(){var e=this.mousePoints,t=e.sx,o=e.sy,r=e.ex,i=e.ey;return-1!==t&&-1!==o?(this.mousePoints.boxX+=r-t,this.mousePoints.boxY+=i-o,[r-t,i-o]):[0,0]},e.prototype.updateMousePointsHandle=function(e,t){null==e||null==t?this.mousePoints={sx:-1,sy:-1,ex:-1,ey:-1,boxX:0,boxY:0}:(-1!==this.mousePoints.ex&&-1!==this.mousePoints.ey&&(this.mousePoints.sx=this.mousePoints.ex,this.mousePoints.sy=this.mousePoints.ey),this.mousePoints.ex=e,this.mousePoints.ey=t)},e.prototype.updateToRemoteNewHandle=function(e,t,o,r,i,n){if(void 0===o&&(o=!0),e.length){var c=Object(a.t)(e,t);if((!r||!r.isUndoAndRedo)&&(this.redoList.length=0),o){var l=this.graphicTaskList.length,u={taskStatus:l?s.h.Pending:s.h.InProgress,graphicList:c};!l&&this.graphicTaskList.push(u),this.syncUpdateToRemoteQueue(u)}else this.unSyncUpdateToRemoteQueue(c,r,i,n)}},e.prototype.unSyncUpdateToRemoteQueue=function(e,t,o,r){var n=this;this.serviceHandle.updateToRemoteHandle(this.whiteboardID,e,(function(){if(!t||!t.isUndoAndRedo){var r=n.createUndoData(e);n.undoList.push(r)}o&&o()}),(function(e){i.e.emit(i.b.Error,e),r&&r(e)}))},e.prototype.syncUpdateToRemoteQueue=function(e){var t=this;e.taskStatus===s.h.Pending?-1===this.graphicTaskList.findIndex((function(e){return e.taskStatus===s.h.Pending}))?this.graphicTaskList.push(e):this.mergegGraphicTaskList(e):this.serviceHandle.updateToRemoteHandle(this.whiteboardID,e.graphicList,(function(){t.graphicTaskCallbackHandle(s.g.success)}),(function(e){t.graphicTaskCallbackHandle(s.g.error,e)}))},e.prototype.filterUndoAndRedo=function(e){var t=this;return e.filter((function(e){var o=e.action,r=e.graphic_id,i=t.graphicList.some((function(e){return e.graphic_id===r}));return!i&&o===s.a.Create||i&&(o===s.a.Delete||o===s.a.Move||o===s.a.Update||o===s.a.Append)}))},e.prototype.undoClearPage=function(){this.clearUndoData&&this.updatePushLocalHandle(this.clearUndoData,[])},e.prototype.undoNewHandle=function(){var e=this;if((!this.graphicTaskList[0]||this.graphicTaskList[0].taskStatus!==s.h.InProgress)&&this.canDo){var t=this.undoList.length;if(t){var o=this.filterUndoAndRedo(this.undoList[t-1]);o.length?(this.canDo=!1,this.updateToRemoteNewHandle(o,void 0,!1,{isUndoAndRedo:!0},(function(){e.undoList.pop();var t=JSON.parse(JSON.stringify(o));e.updateLocalHandle(t),e.reverseData(t),e.redoList.push(t),e.canDo=!0}),(function(t){e.canDo=!0}))):this.undoList.pop()}}},e.prototype.redoNewHandle=function(){var e=this;if((!this.graphicTaskList[0]||this.graphicTaskList[0].taskStatus!==s.h.InProgress)&&this.canDo){var t=this.redoList.length;if(t){var o=this.filterUndoAndRedo(this.redoList[t-1]);o.length?(this.canDo=!1,this.updateToRemoteNewHandle(o,void 0,!1,{isUndoAndRedo:!0},(function(){e.redoList.pop();var t=JSON.parse(JSON.stringify(o));e.updateLocalHandle(t),e.reverseData(t),e.undoList.push(t),e.canDo=!0}),(function(t){e.canDo=!0}))):this.redoList.pop()}}},e.prototype.findLastTaskIndex=function(e,t){var o=this.graphicTaskList.slice(1);o.reverse();var r=o.findIndex((function(o){return o.graphicList[0][e]===t}));return-1!==r?o.length-r:-1},e.prototype.mergeMoveActionTaskList=function(e){var t=e.graphicList[0].operate_id,o=this.findLastTaskIndex("operate_id",t);-1===o?this.graphicTaskList.push(e):this.graphicTaskList.splice(o+1,1,e)},e.prototype.mergeOtherActionTaskList=function(e){switch(e.graphicList[0].type){case s.f.Text:this.mergeTextTaskList(e);break;case s.f.Pencil:this.mergePathTaskList(e);break;case s.f.Ellipse:case s.f.Rect:case s.f.Line:case s.f.Image:case s.f.BgImage:this.mergeOtherTaskList(e)}},e.prototype.mergeLaserTaskList=function(e){var t=e.graphicList[0],o=t.action,r=t.graphic_id;if(o===s.a.Move){var i=this.findLastTaskIndex("graphic_id",r);-1===i?this.graphicTaskList.push(e):this.graphicTaskList.splice(i,1,e)}else this.graphicTaskList.push(e)},e.prototype.mergeTextTaskList=function(e){var t=e.graphicList[0].operate_id;this.findLastTaskIndex("operate_id",t);this.graphicTaskList.push(e)},e.prototype.mergePathTaskList=function(e){var t=e.graphicList[0],o=t.operate_id,r=t.action,i=this.findLastTaskIndex("operate_id",o);if(-1===i)this.graphicTaskList.push(e);else{var n=this.graphicTaskList[i];n.graphicList[0].action===s.a.Create||r===s.a.Update?this.graphicTaskList.push(e):n.graphicList.forEach((function(t,o){t.data=t.data.concat(e.graphicList[o].data)}))}},e.prototype.mergeOtherTaskList=function(e){var t=e.graphicList[0].operate_id,o=this.findLastTaskIndex("operate_id",t);-1===o?this.graphicTaskList.push(e):this.graphicTaskList[o].graphicList[0].action===s.a.Create?this.graphicTaskList.push(e):this.graphicTaskList.splice(o,1,e)},e.prototype.mergegGraphicTaskList=function(e){var t=e.graphicList[0],o=t.action;t.type===s.f.Laser?this.mergeLaserTaskList(e):o===s.a.Move?this.mergeMoveActionTaskList(e):this.mergeOtherActionTaskList(e)},e.prototype.graphicTaskCallbackHandle=function(e,t){var o=this.graphicTaskList[0];if(o)if(o.taskStatus===s.h.InProgress){var r=o.graphicList[0],n=r.is_end_draw,a=r.type;if(n)if(e===s.g.success){if(a!==s.f.Laser&&a!==s.f.BgImage){var c=this.createUndoData(o.graphicList);this.undoList.push(c)}}else{if(a!==s.f.Laser){c=this.createUndoData(o.graphicList);this.updateLocalHandle(c)}i.e.emit(i.b.Error,t)}else e===s.g.error&&i.e.emit(i.b.Error,t);this.graphicTaskList.shift();var l=this.graphicTaskList[0];l&&(l.taskStatus=s.h.InProgress)&&this.syncUpdateToRemoteQueue(l)}else o.taskStatus=s.h.InProgress,this.syncUpdateToRemoteQueue(o)},e.prototype.updateLocalHandle=function(e){var t=this;y.a.info(T("gra.draw_local"),JSON.stringify(e)),this.updateOffsetAndScrollHandle();var o=this.getInstanceHandle(s.j.ZegoWhiteboardViewToolText),r=this.getInstanceHandle(s.j.ZegoWhiteboardViewToolLine),i=this.getInstanceHandle(s.j.ZegoWhiteboardViewToolSelector);i.hideImageEditBox(),i.hideSelectBox(),e.forEach((function(e){switch(e.action){case s.a.Delete:t.deleteHandle(e.graphic_id,e.type);break;case s.a.Create:e.type==s.f.BgImage||(t.createHandle(e,o,r),t.updateBoxHandle(e));break;case s.a.Move:t.moveHandle(e,r),t.updateBoxHandle(e);break;case s.a.Update:e.type==s.f.BgImage?t.updateHandle(e,o,r):(t.updateHandle(e,o,r),t.updateBoxHandle(e))}}))},e.prototype.updatePushLocalHandle=function(e,t){var o=this;y.a.info(T("gra.remote_draw"),JSON.stringify({graphicList:e,delGraphicList:t,actionMsg:"transValue"})),this.updateOffsetAndScrollHandle(),e.sort((function(e,t){return(e.zorder||0)-(t.zorder||0)})),t.forEach((function(e){return o.deleteHandle(e)}));var i=this.instancesMap[s.j.ZegoWhiteboardViewToolLaser],n=this.instancesMap[s.j.ZegoWhiteboardViewToolText],a=this.instancesMap[s.j.ZegoWhiteboardViewToolLine],c=this.instancesMap[s.j.ZegoWhiteboardViewToolSelector];c&&c.updateSelectorBoxHandle(e,t),e.forEach((function(e){var t=e.graphic_id,c=e.type,l=o.graphicList.some((function(o){return t===o.graphic_id&&(e.type!==s.f.RealTime&&(Object.assign(o,e),c===s.f.Image&&Object.assign(o.data,e.data)),!0)}));l||(c===s.f.Image&&(e.oldData=E({},e.data)),o.graphicList.push(e));var u="#"+r.a.reservedPrefix.graphicsBox+t;switch(l=l&&!!o.whiteboardNode.querySelector(u),c){case s.f.Laser:i.drawGraphicsHandle(e,!1);break;case s.f.Text:l?n.updateGraphicsHandle(e):n.drawGraphicsHandle(e,!1),o.updateBoxHandle(e);break;default:c===s.f.RealTime?o.realTimeHandle(a,e):(l?(c===s.f.Pencil&&e.is_end_draw&&o.graphicExtraMap[t]&&(o.clearRealTimeInterval(t),y.a.info(T("gra.remote_draw_realtime_end"),t)),a.updateGraphicsHandle(e)):a.drawGraphicsHandle(e,s.e.Remote),o.updateBoxHandle(e))}}))},e.prototype.deleteHandle=function(e,t){var o;if(t==s.f.BgImage)this.background.updateToLocal(!0).clearBackgroundImage();else{Object(a.n)(this.getBoxHandle(e));var r=this.getGraphicsHandle(e);Object(a.n)("g"===(null==r?void 0:r.tagName)?r.parentNode:r);var i=this.graphicList.findIndex((function(t){return t.graphic_id===e}));if(-1!==i){var n=null===(o=this.graphicExtraMap[e])||void 0===o?void 0:o.realTimeId;n&&clearInterval(n),this.graphicList.splice(i,1)}}},e.prototype.updateBoxHandle=function(e,t){if(e.type===s.f.Laser)return null;var o=this.getBoxInfoByGraphic(e);if(!o)return null;var i=o.x,n=o.y,a=o.width,c=o.height,l=e.type,u=e.graphic_id,h=e.selected,d=e.zorder,p=this.getBoxHandle(u);if(!p){(p=document.createElement("div")).setAttribute("id",""+r.a.reservedPrefix.graphicsBox+u),l===s.f.Text&&(p.style.pointerEvents="initial");var f=null;if(d)for(var g=this.graphicsBoxConNode.querySelectorAll("[data-z]"),m=0;m<g.length;m++)if(+(g[m].getAttribute("data-z")||"")>d){f=g[m];break}this.graphicsBoxConNode.insertBefore(p,f),d&&this.updateGraphicsDomIndex(d)}var _="width:"+a+"px;height:"+c+"px;border:"+(h&&!0!==t?r.a.selectedBorderCss:r.a.unSelectedBorderCss)+";";return"blur"!==t&&(_+="left:"+i+"px;top:"+n+"px;"),p.style.cssText+=_,d&&p.setAttribute("data-z",d+""),p},e.prototype.updateBoxBorder=function(e,t){if(e.type!==s.f.Laser){var o=this.getBoxHandle(e.graphic_id);o&&(o.style.border=e.selected&&!t?r.a.selectedBorderCss:r.a.unSelectedBorderCss)}},e.prototype.updateGraphicsDomIndex=function(e){var t=this,o=Array.from(this.graphicsBoxConNode.querySelectorAll('[data-z="'+e+'"]')).map((function(e){return e.id.replace(/\D/g,"")}));if(o.length>1){var r=Array.from(this.graphicsConNode.querySelectorAll('[data-z="'+e+'"]')),i=r.map((function(e){return e.id.replace(/\D/g,"")}));if(o.join()!==i.join()){var n=r[r.length-1].nextSibling;o.forEach((function(e){t.graphicsConNode.insertBefore(r[i.findIndex((function(t){return t===e}))],n)}))}}},e.prototype.getInstanceHandle=function(e){var t=this.instancesMap[e];if(!t){switch(e){case s.j.ZegoWhiteboardViewToolLaser:t=new l(this);break;case s.j.ZegoWhiteboardViewToolLine:t=new h(this);break;case s.j.ZegoWhiteboardViewToolText:t=new p(this);break;case s.j.ZegoWhiteboardViewToolEraser:t=new f(this);break;case s.j.ZegoWhiteboardViewToolSelector:t=new _(this)}this.instancesMap[e]=t}return t},e.prototype.getUserID=function(){return this.serviceHandle.getUserID()},e.prototype.getUserAuth=function(){return this.serviceHandle.getUserAuth()},e.prototype.getBoxHandle=function(e){var t=this.getBoxSelHandle(e);return this.userNode.querySelector(t)},e.prototype.setGraphicsDomZorder=function(e){var t=e.graphic_id,o=e.type,i=e.zorder,n=r.a.reservedPrefix,a=n.textareaCon,c=n.graphicsSvg,l=n.graphicsBox,u=o===s.f.Text?"#"+a+t:"#"+c+t,h=this.whiteboardNode.querySelector(u);h&&i&&h.setAttribute("data-z",i+""),u="#"+l+t,(h=this.whiteboardNode.querySelector(u))&&i&&h.setAttribute("data-z",i+"")},e.prototype.appendGraphicsDomHandle=function(e,t){if(s.f.Laser===t)this.graphicsConNode.appendChild(e);else{var o=+(e.getAttribute("data-z")||"");if(o)for(var i=this.graphicsConNode.querySelectorAll("[data-z]"),n=0;n<i.length;n++)if(+(i[n].getAttribute("data-z")||"")>o)return void this.graphicsConNode.insertBefore(e,i[n]);var a=this.graphicsConNode.querySelector("[id^="+r.a.reservedPrefix.laserCon+"]");this.graphicsConNode.insertBefore(e,a)}},e.prototype.getImageDomHandle=function(e){var t=r.a.reservedPrefix,o=t.graphics,i=t.graphicsBox;return[this.userNode.querySelector("#"+o+e),this.userNode.querySelector("#"+i+e)]},e.prototype.appendImageDomHandle=function(e,t){var o=r.a.reservedPrefix,i=o.graphicsSvg,n=o.graphics,a=o.laserCon,s=o.graphicsBox,c=document.createElementNS("http://www.w3.org/2000/svg","g"),l=document.createElementNS("http://www.w3.org/2000/svg","image");l.id=""+n+e,c.appendChild(l);var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.id=""+i+e,u.setAttribute("xmlns","http://www.w3.org/2000/svg"),u.setAttribute("version","1.1"),u.appendChild(c);var h=document.createElement("div");if(h.id=""+s+e,t){u.setAttribute("data-z",t+""),h.setAttribute("data-z",t+"");for(var d=this.graphicsConNode.querySelectorAll("[data-z]"),p=0;p<d.length;p++)if(+(d[p].getAttribute("data-z")||"")>t){this.graphicsConNode.insertBefore(u,d[p]);var f=this.graphicsBoxConNode.querySelectorAll("[data-z]")[p];return void this.graphicsBoxConNode.insertBefore(h,f)}}var g=this.graphicsConNode.querySelector("[id ^= "+a+"]");this.graphicsConNode.insertBefore(u,g),this.graphicsBoxConNode.appendChild(h)},e.prototype.resetImageBox=function(){var e=this;this.graphicList.forEach((function(t){if(t.type===s.f.Image){var o=e.getBoxHandle(t.graphic_id),r=t.y+(t.initY||0);o&&Math.abs(Number(o.style.top.replace("px",""))-r)>3&&e.updateBoxHandle(t)}}))},e.prototype.checkMultipointHandle=function(e){return e.touches.length>1},e.prototype.downCommonHandle=function(e){if(window.TouchEvent&&e instanceof TouchEvent){if(this.checkMultipointHandle(e))return!1;"touchstart"!==e.type&&e.preventDefault()}else if(e instanceof MouseEvent&&(e.button||"mouseup"!==e.type&&!e.buttons))return!1;return this.updateOffsetAndScrollHandle(),!0},e.prototype.updateProtoGraphic=function(e){if(e)Object.assign(this.protoGraphic,e);else{var t=r.a.basicState.type;this.protoGraphic=E(E({zorder:0,graphic_id:"",data:[],oldData:"",selected:!1,x:0,y:0,px:0,py:0},r.a.basicState),{type:t,operate_id:"",is_end_draw:!0})}},e.prototype.updateGraphicsDataHandle=function(e){var t=null;switch(this.protoGraphic.type){case s.f.Pencil:(t=this.protoGraphic.data)[t.length-2]===e.clientX&&t[t.length-1]===e.clientY||(t.push(e.clientX),t.push(e.clientY));break;case s.f.Image:(t=this.protoGraphic.data).ex=e.clientX,t.ey=e.clientY;break;default:(t=this.protoGraphic.data).splice(2,2,e.clientX,e.clientY)}},e.prototype.initDrawHandle=function(){this.updateProtoGraphic(),this.updateMousePointsHandle()},e.prototype.getBoxInfoByGraphic=function(e){var t=e.type,o=e.graphic_id,i=this.getGraphicsHandle(o);if(!i)return null;var n=Object(a.j)(e),c=t===s.f.Text||t===s.f.Image?0:e.size||r.a.basicState.size,l=this.viewInfo,u=l.zoom,h=l.offsetPageY,d=l.isScroll,p=r.a.boxBorderWidth,f=i.getBoundingClientRect(),g=f.left,m=f.top,_=f.width,y=f.height;!d&&m>h&&this.isReloading&&(m-=h);var v=this.transLocationHandle({clientX:g,clientY:m},n),b=v.clientX,w=v.clientY;return{x:g=Math.floor(b-p-c/2),y:m=Math.floor(w-p-c/2),width:_=Math.ceil(_/u+c+p),height:y=Math.ceil(y/u+c+p)}},e.prototype.getMouseStartPoint=function(e,t){var o;if(e instanceof MouseEvent){var r=e,i=r.clientX,n=r.clientY;o=this.transLocationHandle({clientX:i,clientY:n},t)}else{var a=e.touches[0];i=a.clientX,n=a.clientY;o=this.transLocationHandle({clientX:i,clientY:n},t)}return o},e.prototype.getMouseChangedPoint=function(e,t){var o;if(e instanceof MouseEvent){var r=e,i=r.clientX,n=r.clientY;o=this.transLocationHandle({clientX:i,clientY:n},t)}else{var a=e.changedTouches[0];i=a.clientX,n=a.clientY;o=this.transLocationHandle({clientX:i,clientY:n},t)}return o},e.prototype.getWhiteboardNodeRect=function(){var e=this.offsetData,t=e.offsetLeft,o=e.offsetTop,r=this.viewInfo,i=r.zoom,n=r.viewWidth,a=r.viewHeight;return i>1?{left:t,top:o,right:t+n,bottom:o+a}:this.whiteboardNode.getBoundingClientRect()},e.prototype.isTouchLeaveWhenMove=function(e,t){if(r.a.isTouch&&window.TouchEvent&&e instanceof TouchEvent){var o=e.changedTouches[0],i=o.clientX,n=o.clientY,a=t.left,s=t.right,c=t.top,l=t.bottom;return i<=a||i>=s||n<=c||n>=l}return!1},e.prototype.setDataToGraphicList=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var r=0,i=this.graphicList.length;r<i;r++){var n=this.graphicList[r];if(e===n.graphic_id){Object.assign.apply(Object,P([n],t));break}}},e.prototype.getDataFromGraphicList=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var r={},i=function(o,i){var a=n.graphicList[o];if(e===a.graphic_id)return t.forEach((function(e){r[e]=a[e]})),"break"},n=this,a=0,s=this.graphicList.length;a<s;a++){var c=i(a,s);if("break"===c)break}return r},e.prototype.filterExistingHandle=function(e){var t=this;return e.filter((function(e){var o=e.graphic_id;return e.action===s.a.Create||t.graphicList.some((function(e){return e.graphic_id===o}))}))},e.prototype.clearLocalHandle=function(){this.graphicTaskList.length=0;var e=r.a.basicState.type;if(e!==s.j.ZegoWhiteboardViewToolClick&&!e){var t=this.getInstanceHandle(e===s.j.ZegoWhiteboardViewToolPen||e===s.j.ZegoWhiteboardViewToolRect||e===s.j.ZegoWhiteboardViewToolEllipse||e===s.j.ZegoWhitebaordViewToolCustomImage?s.j.ZegoWhiteboardViewToolLine:e);t.removeEventsHandle(),t.bindEventsHandle()}this.clearUndoData=JSON.parse(JSON.stringify(this.graphicList)),this.undoList.length=0,this.redoList.length=0;var o=this.getInstanceHandle(s.j.ZegoWhiteboardViewToolLaser),i=o.findLaserHandle(),n=this.graphicList.find((function(e){return e.type===s.f.BgImage}));this.graphicList.length=0,n&&this.graphicList.push(n),this.graphicsConNode.innerHTML="",i&&o.addLaserHandle(i)},e.prototype.reverseZoomHandle=function(e){var t=this;if(e===s.j.ZegoWhiteboardViewToolLaser){var o=this.viewInfo.zoom;this.batchGetGraphicsHandle(this.graphicsConNode,r.a.reservedPrefix.laserCon).forEach((function(e){var r=e.style.transform,i=t.getTranslateXY(r),n=i.x,a=i.y;e.style.transform="translate("+n+"px, "+a+"px) scale("+1/o+")"}))}},e.prototype.getGraphicIsEndDraw=function(e){return this.serviceHandle.getGraphicIsEndDraw(e)},e.prototype.clearPage=function(e){this.enableDraw&&(this.updateGraphicPage(),this.graphicList.forEach((function(t){var o;t.selected=null===(o=t.page)||void 0===o?void 0:o.includes(e)})),this.deleteSelectedGraphics(s.c.ClearPage))},e.prototype.deleteSelectedGraphics=function(e){var t=this;if(this.enableDraw){var o=this.getUserID(),r=this.getUserAuth().delete,i=0,c=0,l=this.graphicList.filter((function(e){var n=!!e.selected&&e.type!==s.f.BgImage&&t.getGraphicIsEndDraw(e.graphic_id),a=r||o===e.creator_id;return n&&i++,n&&a&&c++,n&&a}));if(i!==c&&Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthDeleteGraphic),l.length){var u=this.getInstanceHandle(s.j.ZegoWhiteboardViewToolSelector);u.hideImageEditBox(),u.hideSelectBox(),l.forEach((function(e){e.is_end_draw=!0,e.operate_id=Object(a.d)(),t.deleteHandle(e.graphic_id)})),y.a.info(T("mod.deleteSelectedGraphics"),JSON.stringify({action:e,page:this.viewInfo.page,params:l.map((function(e){return e.graphic_id+","+e.page}))})),this.updateToRemoteNewHandle(l,s.a.Delete)}}},e.prototype.updateGraphicPage=function(){var e=this,t=this.graphicList.filter((function(t){return e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id))}));this.viewInfo.vpageAspecCache?t.forEach((function(t){var o=e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id)),r=o||{offsetTop:0,offsetHeight:0},i=r.offsetTop,n=r.offsetHeight,a=e.getPageByAspec(i,i+n);t.page=a||[e.viewInfo.page||1]})):!this.serviceHandle.getFileInfo(this.whiteboardID)&&this.conNode?t.forEach((function(t){var o=e.graphicsBoxConNode.querySelector(e.getBoxSelHandle(t.graphic_id)),r=[];if(1===e.viewInfo.direction){var i=o||{offsetLeft:0,offsetWidth:0},n=i.offsetLeft,a=i.offsetWidth;r=e.getPageByViewInfo(n,n+a,e.viewInfo.viewWidth)}else{var s=o||{offsetTop:0,offsetHeight:0},c=s.offsetTop,l=s.offsetHeight;r=e.getPageByViewInfo(c,c+l,e.viewInfo.viewHeight)}t.page=r||[e.viewInfo.page||1]})):this.graphicList.forEach((function(t){t.page=[e.viewInfo.page||1]}))},e.prototype.getPageByAspec=function(e,t){var o=this.viewInfo.vpageAspecCache;if(!o.hasOwnProperty("2"))return[1];for(var r=o.vs,i=o[r].h;i<=e&&o[r+1];)i+=o[r+1].h,r++;for(var n=r;i<=t&&o[n+1];)i+=o[n+1].h,n++;if(n===r)return[o[r].p];if(n-r>1){var a=new Array(n-r-1).fill(null);return a=a.map((function(e,t){return o[r+t+1].p})),P([o[r].p],a,[o[n].p])}return[o[r].p,o[n].p]},e.prototype.getPageByViewInfo=function(e,t,o){var r=Math.floor(e/o)+1,i=Math.floor(t/o)+1;if(i===r)return[r];if(i-r>1){var n=new Array(i-r-1).fill(null).map((function(e,t){return r+t+1}));return P([r],n,[i])}return[r,i]},e.prototype.toolAddEL=function(e,t,o){e.addEventListener(t,o);var i=r.a.mouseEvents[t];i&&e.addEventListener(i,o)},e.prototype.toolRmEl=function(e,t,o){e.removeEventListener(t,o);var i=r.a.mouseEvents[t];i&&e.removeEventListener(i,o)},e.prototype.updateOffsetPage=function(){var e=this.viewInfo,t=e.page,o=e.viewWidth,r=e.viewHeight,i=e.direction;e.isScroll||(i===s.o.Horizontal?this.viewInfo.offsetPageX=(t-1)*o:this.viewInfo.offsetPageY=(t-1)*r)},e}(),O=o(24),M=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},A=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},C=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<o;t++)for(var n=arguments[t],a=0,s=n.length;a<s;a++,i++)r[i]=n[a];return r},L=function(){function e(e,t){this.snapshotResult={image:""},this.canvasRatio=window.devicePixelRatio||1,this.toolInstance=e,this.backgroundInstance=t,this.file=this.toolInstance.serviceHandle.getFileInfo(this.toolInstance.whiteboardID),this.snapshotId=String(Date.now())}return e.prototype.snapshot=function(e){var t=this;return new Promise((function(o,r){return M(t,void 0,void 0,(function(){var t=this;return A(this,(function(r){return e&&(this.snapshotResult.userData=e),this.createCtx(),this.setWbBgColor(),this.setWbBgImage().then((function(){var e;if(t.file){var r={action:O.b.Snapshot,ctx:t.docsCtx,snapshotId:t.snapshotId};t.toolInstance.conNode.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:r}))}t.wbSnapshot();var i=null===(e=t.file)||void 0===e?void 0:e.fileType;i===s.d.PPTH5||i===s.d.CUSTOM_H5?t.snapshotResolve=o:(t.snapshotResult.image=t.mergeCanvas(),o(t.snapshotResult))})),[2]}))}))}))},e.prototype.getH5Snapshot=function(e){var t=this,o=this.toolInstance.viewInfo,r=o.viewWidth,i=o.viewHeight,n=new Image;n.src=e,n.onload=function(){t.docsCtx.drawImage(n,0,0,r,i),t.snapshotResult.image=t.mergeCanvas(),t.snapshotResolve(t.snapshotResult)}},e.prototype.mergeCanvas=function(){var e=this.toolInstance.viewInfo,t=e.viewWidth,o=e.viewHeight,r=document.createElement("canvas");r.width=t*this.canvasRatio,r.height=o*this.canvasRatio;var i=r.getContext("2d");return i.scale(this.canvasRatio,this.canvasRatio),i.drawImage(this.docsCanvas,0,0,t,o),i.drawImage(this.wbCanvas,0,0,t,o),r.toDataURL("image/png",1)},e.prototype.createCtx=function(){var e=this.toolInstance.viewInfo,t=e.viewWidth,o=e.viewHeight;this.wbCanvas=document.createElement("canvas"),this.wbCanvas.width=t*this.canvasRatio,this.wbCanvas.height=o*this.canvasRatio,this.wbCtx=this.wbCanvas.getContext("2d"),this.wbCtx.scale(this.canvasRatio,this.canvasRatio),this.docsCanvas=document.createElement("canvas"),this.docsCanvas.width=t*this.canvasRatio,this.docsCanvas.height=o*this.canvasRatio,this.docsCtx=this.docsCanvas.getContext("2d"),this.docsCtx.scale(this.canvasRatio,this.canvasRatio)},e.containImg=function(e,t,o,r,i,n,a){var s=e,c=t,l=o,u=r;return i>n?(u=n/i*l,i/n<=o/r&&(l=i/n*r)):i<=n&&(l=i/n*u),"top"==a?(c=0,s=e+(o-l)/2):"bottom"==a?(c=t+(r-u),s=e+(o-l)/2):"left"==a?(s=0,c=t+(r-u)/2):"right"==a?(s=e+(o-l),c=t+(r-u)/2):"center"==a&&(s=e+(o-l)/2,c=t+(r-u)/2),{dx:s,dy:c,dWidth:l,dHeight:u}},e.prototype.setWbBgColor=function(){var e=this.file?r.a.basicExtraState.defaultFileBgColor:r.a.basicState.bgColor;this.setBgColor(this.wbCtx,e)},e.prototype.setWbBgImage=function(){var t=this;return new Promise((function(o){var r=t.backgroundInstance.backgroundInfo,i=r.image,n=r.pos,a=t.toolInstance.viewInfo,s=a.viewWidth,c=a.height;if(i){var l=new Image;l.setAttribute("crossOrigin","Anonymous"),l.onload=function(){var r=e.containImg(0,0,s,c,l.width,l.height,n);t.wbCtx.drawImage(l,r.dx,r.dy,r.dWidth,r.dHeight),o()},l.src=i}else o()}))},e.prototype.setBgColor=function(e,t){var o=this.toolInstance.viewInfo,r=o.viewWidth,i=o.viewHeight;e.fillStyle=t,e.fillRect(0,0,r,i)},e.prototype.wbSnapshot=function(){var e=this.sortGraphics();if(e)for(var t=0,o=e;t<o.length;t++){var r=o[t],i=this.getCorrectData(r);switch(r.type){case s.f.Pencil:case s.f.Line:this.renderPencil(r,this.wbCtx,i);break;case s.f.Rect:this.renderRect(r,this.wbCtx,i);break;case s.f.Ellipse:this.renderEllipse(r,this.wbCtx,i);break;case s.f.Text:this.renderText(r,this.wbCtx,i);break;case s.f.Image:this.renderImage(r,this.wbCtx,i)}}},e.prototype.renderPencil=function(e,t,o){var r=Object(a.r)(o);this.setCtxStyle(e,t),t.beginPath(),t.moveTo(r.moveTo[0],r.moveTo[1]),r.path.forEach((function(e){t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])})),t.stroke()},e.prototype.renderRect=function(e,t,o){var r=o[0],i=o[1],n=o[2]-r,a=o[3]-i;this.setCtxStyle(e,t),t.beginPath(),t.strokeRect(r,i,n,a)},e.prototype.renderEllipse=function(e,t,o){var r=o[0],i=o[1],n=(o[2]-r)/2,a=(o[3]-i)/2,s=r+n,c=i+a,l=n>a?Math.abs(n):Math.abs(a);this.setCtxStyle(e,t),t.beginPath(),t.save(),t.translate(s,c),t.scale(n/l,a/l),t.arc(0,0,l,0,2*Math.PI),t.restore(),t.stroke()},e.prototype.renderText=function(e,t,o){this.setCtxStyle(e,t);var i=o.split(","),n=i[0],a=i[1],s=i[2],c=this.toolInstance.getGraphicsHandle(e.graphic_id),l=this.getComputedFs(c.querySelector("pre")||c,"fontSize"),u=this.getComputedLh(c.querySelector("pre")||c,"lineHeight",l),h=(u-1)/2,d=s.split("\n"),p=r.a.textareaHPadding,f=r.a.textareaConBorderWidth;d.forEach((function(e,o){var r=+n+p+f,i=+a+l*u*o+l*h*1+f;t.fillText(""+e,r,i)}))},e.prototype.getComputedStyle=function(e,t,o){var r=window.getComputedStyle(e)[t];return o?o(r):r},e.prototype.getComputedLh=function(e,t,o){return this.getComputedStyle(e,t,(function(e){var t=1.2;return e.includes("px")&&(t=+e.replace(/px/,"")/o),t}))},e.prototype.getComputedFs=function(e,t){return this.getComputedStyle(e,t,(function(e){var t=12;return e.includes("px")&&(t=+e.replace(/px/,"")),t}))},e.prototype.renderImage=function(e,t,o){var i=o[0],n=o[1],a=o[2]-i,s=o[3]-n,c=this.toolInstance.graphicsConNode.querySelector("#"+r.a.reservedPrefix.graphics+e.graphic_id);"image"===(null==c?void 0:c.nodeName)&&t.drawImage(c,i,n,a,s)},e.prototype.setCtxStyle=function(e,t){var o=this.toolInstance.viewInfo.viewWidth,r=Object(a.c)(e.size,s.f.Pencil,o,!1);if(t.strokeStyle=e.color,t.fillStyle=e.color,e.type!==s.f.Text)t.lineWidth=r,t.lineJoin="round",t.lineCap="round";else{var i=this.toolInstance.getGraphicsHandle(e.graphic_id),n=this.getComputedFs(i.querySelector("pre")||i,"fontSize")+"px",c="string"==typeof e.attributes?JSON.parse(e.attributes):{},l=c.bold?"bold":"",u=c.italic?"italic":"",h=window.getComputedStyle(i.querySelector("pre")||i).fontFamily.replace(/"/g,"");t.textBaseline="hanging",t.font=u+" "+l+" "+n+" "+h+" "}},e.prototype.sortGraphics=function(){var e=this;return JSON.parse(JSON.stringify(this.toolInstance.graphicList)).filter((function(t){return e.toolInstance.getGraphicsHandle(t.graphic_id)})).sort((function(e,t){return(e.zorder||0)-(t.zorder||0)}))},e.prototype.getCorrectData=function(e){var t=e.type,o=e.data;switch(t){case s.f.Image:var r=e.data;o=this.correctData([r.x,r.y,r.ex,r.ey]);break;case s.f.Pencil:case s.f.Line:case s.f.Rect:case s.f.Ellipse:var i=this.correctData(e.data);o=this.getTransData(e,i);break;case s.f.Text:var n=e.data.split(","),a=n[2],c=this.correctData([+n[0],+n[1]]),l=this.getTransData(e,C(c));o=C(l,[a]).join(",")}return o},e.prototype.correctData=function(e){var t,o=this.toolInstance.viewInfo,r=o.direction,i=o.page,n=o.viewWidth,a=o.viewHeight,c=o.isScroll,l=o.zoom;if(r===s.o.Center)return e;if(r===s.o.Horizontal&&i)t=e.map((function(e,t){return t%2==0&&(e-=(i-1)*n),e}));else if(r===s.o.Vertical&&i){var u=this.toolInstance.whiteboardNode.parentNode.scrollTop;t=e.map((function(e,t){return t%2==1&&(e-=c?u/l:(i-1)*a),e}))}return t},e.prototype.getTransData=function(e,t){var o=e.x,r=e.y;return t.map((function(e,t){return e+=t%2==0?o:r}))},e}(),k=o(34);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(){return(N=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},B=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},j=y.b.bind(null,"wb.v."),z=function(){function e(e,t){var o=this;this.operationModes=Object.freeze({none:!1,scroll:!0,draw:!0,scale:!0}),this.canDraw=!0,this.activited=!1,this.viewInfo={},this.scaleInfo={x:-1,y:-1,syncTimer:0},this.snapshotInstances={},this.handleDragStart=function(e){if(o.operationModes.scale&&o.toolInstance.getUserAuth().scale&&(o.viewInfo.zoomX=o.viewInfo.zoomY=0,o.viewInfo.zoom>1&&!o.canDraw&&o.parentDom)){var t=e instanceof MouseEvent?e:e.changedTouches[0],r=t.clientX,i=t.clientY;o.viewInfo.zoomX=r,o.viewInfo.zoomY=i}},this.handleDragEnd=function(e){o.handleDragMove(e,!0)},this.handleDragMove=function(e,t){if(o.operationModes.scale&&o.toolInstance.getUserAuth().scale&&o.viewInfo.zoom>1&&o.viewInfo.zoomX&&!o.canDraw){if(e instanceof MouseEvent&&!t&&e.buttons<1)return;"touchmove"===e.type&&e.preventDefault(),o.dragPage(e,!!t)}},this.preventDefaultDragEvent=function(e){e.preventDefault()},this.docsviewEventCallback=function(e){var t=e.detail,i=t.action;if(i!==O.b.H5Snapshot&&i!==O.b.DocsAspect&&y.a.info(j(O.a.Docs),JSON.stringify(t)),i===O.b.Page)o.handleDocsPageEvent(t);else if(i===O.b.Animation)o.serviceHandle.appendH5Extra(o.whiteboardID,t.data);else if(i===O.b.DocsAspect)o.viewInfo.vpageAspecCache=t.data;else if(i===O.b.H5Snapshot)o.getH5SnapshotResult(t);else if(i===O.b.ReloadView)o.reinitView();else if(i===O.b.WbError)Object(n.a)(t.data);else if(i===O.b.Step)r.a.basicState.type===s.j.ZegoWhiteboardViewToolSelector&&o.hideSelectBox();else if(i===O.b.SyncDrag){var a=t,c=a.x,l=a.y,u=a.notify;o.viewInfo.isScroll||(o.viewInfo.zoomTX=c,o.viewInfo.zoomTY=l),u&&o.emitScaleFactor(c,l)}},this.whiteboardID=e,this.serviceHandle=t}return e.prototype.setWhiteboardTransform=function(e,t,o){o||(this.viewInfo.zoomTX=e,this.viewInfo.zoomTY=t);var r=this.viewInfo,i=r.viewWidth,n=r.viewHeight,a=r.zoom,c=r.direction,l=this.viewInfo.page||1;c===s.o.Horizontal?e-=(l-1)*i*a:t-=(l-1)*n*a,this.whiteboardNode.style.cssText+="transform:translate("+e+"px,"+t+"px) scale("+a+");"},e.prototype.dragPage=function(e,t){var o=this.viewInfo,r=o.zoom,i=o.zoomTX,n=o.zoomTY,a=o.zoomX,s=o.zoomY,c=o.viewWidth,l=o.viewHeight,u=e instanceof MouseEvent?e:e.changedTouches[0],h=i+u.clientX-a,d=n+u.clientY-s,p=c*(1-r);h>0?h=0:h<p&&(h=p),p=l*(1-r),d>0?d=0:d<p&&(d=p),t&&(this.viewInfo.zoomX=0,this.viewInfo.zoomY=0,this.emitScaleFactor(h,d)),this.setWhiteboardTransform(h,d,!t)},e.prototype.initDragEvents=function(){this.viewInfo.hasOwnProperty("offsetPageX")||(this.viewInfo.offsetPageX=0,this.viewInfo.offsetPageY=0,this.viewInfo.zoom=1,this.viewInfo.zoomX=0,this.viewInfo.zoomY=0,this.viewInfo.zoomTX=0,this.viewInfo.zoomTY=0),this.parentDom&&!this.getFileInfo()&&(this.parentDom.addEventListener("mousedown",this.handleDragStart),this.parentDom.addEventListener("mousemove",this.handleDragMove),this.parentDom.addEventListener("mouseup",this.handleDragEnd),this.parentDom.addEventListener("mouseleave",this.handleDragEnd),this.parentDom.addEventListener("touchstart",this.handleDragStart),this.parentDom.addEventListener("touchmove",this.handleDragMove),this.parentDom.addEventListener("touchend",this.handleDragEnd),this.parentDom.addEventListener("touchcancel",this.handleDragEnd))},e.prototype.updateBindEvents=function(){this.toolInstance.removeEventsHandle(s.j.ZegoWhiteboardViewToolLaser),this.toolInstance.removeEventsHandle(s.j.ZegoWhiteboardViewToolLine),this.toolInstance.removeEventsHandle(s.j.ZegoWhiteboardViewToolText),this.toolInstance.removeEventsHandle(s.j.ZegoWhiteboardViewToolSelector),this.toolInstance.removeEventsHandle(s.j.ZegoWhiteboardViewToolEraser);var e=r.a.basicState.type;switch(e){case s.j.ZegoWhiteboardViewToolPen:case s.j.ZegoWhiteboardViewToolLine:case s.j.ZegoWhiteboardViewToolEllipse:case s.j.ZegoWhiteboardViewToolRect:case s.j.ZegoWhitebaordViewToolCustomImage:this.toolInstance.bindEventsHandle(s.j.ZegoWhiteboardViewToolLine);break;case s.j.ZegoWhiteboardViewToolLaser:case s.j.ZegoWhiteboardViewToolText:this.toolInstance.bindEventsHandle(e);break;case s.j.ZegoWhiteboardViewToolSelector:case s.j.ZegoWhiteboardViewToolEraser:this.toolInstance.getInstanceHandle(e),this.toolInstance.bindEventsHandle(e)}},e.prototype.initToolHandle=function(){this.toolInstance?(this.toolInstance.zoomNode=this.zoomNode,this.toolInstance.conNode=this.parentDom,this.toolInstance.graphicsConNode=this.graphicsConNode,this.toolInstance.whiteboardNode=this.whiteboardNode,this.toolInstance.graphicsBoxConNode=this.graphicsBoxConNode,this.penetrateEventHandle(r.a.basicState.type),this.getUniqueID()?this.setToolType(r.a.basicState.type):this.updateBindEvents()):(this.toolInstance=new D({whiteboardID:this.whiteboardID,zoomNode:this.zoomNode,conNode:this.parentDom,graphicsConNode:this.graphicsConNode,whiteboardNode:this.whiteboardNode,graphicsBoxConNode:this.graphicsBoxConNode,serviceHandle:this.serviceHandle,viewInfo:this.viewInfo}),this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLaser),this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLine),this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolText),this.setToolType(r.a.basicState.type))},e.prototype.updateStateSizeHandle=function(){var e=this.viewInfo.viewWidth,t=r.a.basicState,o=t.size,i=t.fontSize;r.a.basicExtraState.drawSize=Object(a.c)(o,s.f.Line,e,!1),r.a.basicExtraState.drawFontSize=Object(a.c)(i,s.f.Text,e,!1)},e.prototype.getDocsViewAspect=function(e,t,o,r){var i=e.firstChild;if(i){var n=t.fileType,a="0"==e.getAttribute("data-mode"),c=Number(e.getAttribute("data-page")),l=i.clientWidth,u=i.clientHeight;if(l&&u||(l=+i.style.width.replace("px",""),u=+i.style.height.replace("px","")),n===s.d.PPTH5||n===s.d.CUSTOM_H5){var h=e.previousElementSibling;h&&(h.style.zIndex="0")}var d=document.getElementById(this.viewInfo.root),p=d.clientWidth,f=d.clientHeight,g=a&&u>r;this.updateViewInfo({isScroll:a,isOriginScroll:g,direction:s.o.Vertical,pageCount:c,width:l,height:u,viewWidth:o,viewHeight:r,page:this.viewInfo.page||1,zoom:this.viewInfo.zoom||1,parentWidth:p,parentHeight:f})}return{x:0,y:0,width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight}},e.prototype.getWhiteboardAspect=function(e,t,o){var r=this.getAspectRatio().split(":").map((function(e){return+e})),i=r[0],n=r[1];if(o){var a=this.viewInfo.pageCount,c=this.getWhiteboardLayout(e,t,i/a,n),l={parentWidth:e,parentHeight:t,width:c.width*a,height:c.height,viewWidth:c.width,viewHeight:c.height};return this.updateViewInfo(l),c}var u=this.serviceHandle.getPageCount(this.whiteboardID),h={zoom:1,page:1,pageCount:u,direction:u>1?s.o.Horizontal:s.o.Center,parentWidth:e,parentHeight:t},d=this.getWhiteboardLayout(e,t,i/u,n);return h.width=d.width*u,h.height=d.height,h.viewWidth=d.width,h.viewHeight=d.height,this.updateViewInfo(h),d},e.prototype.getWhiteboardLayout=function(e,t,o,r){var i=e,n=r*i/o;return(n>t||Math.abs(n-t)<=1)&&(i=t*e/n|0,n=t),{x:(e-i)/2,y:(t-(n|=0))/2,width:i,height:n}},e.prototype.checkParentSize=function(e,t){if(e<=0||t<=0){var o=Object(n.b)(s.i.ZegoWhiteboardViewErrorViewParentNotExist);throw i.e.emit(i.b.Error,o),new Error("无法获取容器宽高")}},e.prototype.createModule=function(e){var t=this;e&&this.toolInstance&&this.stopLocalDrawHandle(this.serviceHandle.getScrollPercent(this.whiteboardID).verticalPercent);var o=this.getFileInfo(),i=document.getElementById(this.viewInfo.parent);o?this.viewInfo.root=i.parentNode.parentNode.id:(this.viewInfo.root=this.viewInfo.parent,i.style.cssText+="position:relative;display:inherit!important;");var n=i.clientWidth,c=i.clientHeight;this.checkParentSize(n,c);var l=e&&!o?{x:this.viewInfo.zoomTX/this.viewInfo.viewWidth,y:this.viewInfo.zoomTY/this.viewInfo.viewHeight}:{x:0,y:0},u=o?this.getDocsViewAspect(i,o,n,c):this.getWhiteboardAspect(n,c,e),h=u.x,d=u.y,p=r.a.reservedPrefix,f=p.whiteboardZoom,g=p.whiteboardCon,m=p.whiteboard,_=p.boxContainer,y=p.graphicsContainer,v=document.createDocumentFragment();[y,_].forEach((function(e){var o=document.createElement("div");o.id=""+e+t.whiteboardID,v.appendChild(o)}));var b=Object(a.g)(v);this.graphicsConNode=b[0],this.graphicsBoxConNode=b[1],this.createGraphicsBox();var w=this.viewInfo,S=w.width,I=w.height,x=w.viewWidth,E=w.viewHeight;if(this.whiteboardNode=document.createElement("div"),this.whiteboardNode.id=""+m+this.whiteboardID,this.whiteboardNode.style.cssText+="width:"+S+"px;height:"+I+"px;",this.whiteboardNode.appendChild(v),o)this.parentDom=i,this.zoomNode=i.parentNode,i.innerHTML="",i.appendChild(this.whiteboardNode),this.handleDocsviewEvent(i);else{var P="left:"+h+"px;top:"+d+"px;width:"+x+"px;height:"+E+"px;overflow:hidden;";if(this.parentDom=i.querySelector("#"+g+this.whiteboardID),e&&this.parentDom)this.parentDom.innerHTML="",this.parentDom.style.cssText+=P,this.parentDom.appendChild(this.whiteboardNode),this.setWhiteboardTransform(l.x*x|0,l.y*E|0);else{var T=document.createElement("div");T.id=""+f+this.whiteboardID,this.zoomNode=T;var D=document.createElement("div");D.id=""+g+this.whiteboardID,D.style.cssText=P,D.appendChild(this.whiteboardNode),T.appendChild(D),i.appendChild(T),this.parentDom=D}}r.a.basicState.type!==s.j.ZegoWhiteboardViewToolText&&(this.parentDom.style.userSelect="none"),this.parentDom.addEventListener("dragenter",this.preventDefaultDragEvent),this.serviceHandle.setViewSize(this.whiteboardID,x,E),this.serviceHandle.setSize(this.whiteboardID,S,I)},e.prototype.activitView=function(){var e;if(this.zoomNode){var t=(null===(e=this.getFileInfo())||void 0===e?void 0:e.fileID)||"";y.a.setExtraConfig({wbId:this.whiteboardID,fileID:t});var o=document.getElementById(this.viewInfo.root);if(o){var i=this.zoomNode.id;Array.from(Object(a.g)(o)).forEach((function(e){e.style.display=e.id===i?"block":"none"}))}var n=t?r.a.basicExtraState.defaultFileBgColor:r.a.basicState.bgColor;this.toolInstance.background.setBackgroundColor(n),this.setDragStyle(this.getToolType()||0)}},e.prototype.updateViewInfo=function(e){Object.assign(this.viewInfo,e)},e.prototype.isChangeStepInnerPage=function(e){var t,o=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if(o===s.d.PPTH5||o===s.d.CUSTOM_H5){var r=this.viewInfo,i=r.page,n=r.pageCount;return i===Math.min(Math.round(e*n)+1,n)}return!1},e.prototype.stopLocalDrawHandle=function(e){try{var t=r.a.basicState.type,o=s.j.ZegoWhiteboardViewToolLaser,i=s.j.ZegoWhiteboardViewToolSelector,n=s.j.ZegoWhiteboardViewToolText,a=this.isChangeStepInnerPage(e);switch(t){case o:var c=this.toolInstance.getInstanceHandle(o);!a&&c&&c.pushActualPlaceHandle();break;case i:var l=this.toolInstance.getInstanceHandle(i);if(!a&&l){var u=document.activeElement;u&&u.id&&this.whiteboardNode.querySelector("#"+u.id)&&"TEXTAREA"===u.tagName?u.blur():(this.toolInstance.updateOffsetAndScrollHandle(),l.mouseupHandle(),l.hideImageEditBox(),l.hideSelectBox())}break;case n:var h=document.activeElement;!a&&h&&h.id&&this.whiteboardNode.querySelector("#"+h.id)&&"TEXTAREA"===h.tagName&&h.blur();break;case s.j.ZegoWhiteboardViewToolPen:case s.j.ZegoWhiteboardViewToolRect:case s.j.ZegoWhiteboardViewToolLine:case s.j.ZegoWhiteboardViewToolEllipse:case s.j.ZegoWhitebaordViewToolCustomImage:var d=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLine);!a&&d&&(this.toolInstance.updateOffsetAndScrollHandle(),d.mouseupHandle())}this.toolInstance.resetImageBox()}catch(e){}},e.prototype.setClassNameHandle=function(e){var t,o=r.a.reservedPrefix,i=o.whiteboard,n=o.whiteboardCon,a=o.whiteboardZoom;null===(t=this.zoomNode.parentNode)||void 0===t||t.querySelectorAll("[id^="+i+"]").forEach((function(t){-1===t.id.indexOf(""+n)&&-1===t.id.indexOf(""+a)&&(t.className=s.j[e]||"")}))},e.prototype.penetrateEventHandle=function(e){var t,o=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if((o===s.d.PPTH5||o===s.d.CUSTOM_H5)&&this.parentDom){var r=this.operationModes.none||e!==s.j.ZegoWhiteboardViewToolClick?"initial":"none";this.parentDom.style.pointerEvents=r,this.graphicsBoxConNode.style.pointerEvents=r}},e.prototype.jumpPage=function(e,t){var o,r=this.viewInfo,i=r.viewWidth,n=r.viewHeight,a=r.pageCount,c=r.direction;a>=1&&(c===s.o.Horizontal?(o=Math.min(Math.round(e*a)+1,a))<=a&&(this.updateViewInfo({offsetPageX:(o-1)*i,page:o}),this.setWhiteboardTransform(this.viewInfo.zoomTX,this.viewInfo.zoomTY)):(o=Math.min(Math.round(t*a)+1,a))<=a&&(this.updateViewInfo({offsetPageY:(o-1)*n,page:o}),this.setWhiteboardTransform(this.viewInfo.zoomTX,this.viewInfo.zoomTY)));this.notifyScrollEvent(this.viewInfo.page,1,e,t)},e.prototype.handleDocsviewEvent=function(e){var t={action:O.b.WbInit,data:this.whiteboardID};e.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:t})),e.addEventListener(O.a.Docs,this.docsviewEventCallback)},e.prototype.handleDocsPageEvent=function(e){var t,o=e.page,i=e.pageCount,n=e.step,a=e.percent,s=e.notify,c=e.ofsX,l=this.viewInfo,u=l.isScroll,h=l.viewHeight,d=l.zoom;this.viewInfo.page=o,this.viewInfo.pageCount=i,u||(this.viewInfo.offsetPageY=(o-1)*h),s&&u&&"number"==typeof c&&(t={scaleFactor:d,scaleOffsetX:c,scaleOffsetY:+r.a.scaleModes.sync},this.scaleInfo.y=0),this.emitScroll(0,a,n,s,t),this.notifyScrollEvent(o,n,0,a)},e.prototype.getH5SnapshotResult=function(e){var t=e.dataUrl,o=e.snapshotId;this.snapshotInstances[o].getH5Snapshot(t)},e.prototype.hideSelectBox=function(){var e=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolSelector);e.hideImageEditBox(),e.hideSelectBox()},e.prototype.setDragStyle=function(e){if(this.parentDom){var t=this.toolInstance.getUserAuth(),o=t.scale,r=t.scroll,i=this.operationModes.scale&&!!o&&!e;this.parentDom.style.cursor=i?"move":"auto",this.parentDom.style.touchAction=i?"auto":"none";var n={action:O.b.WbDragTool,enable:this.operationModes.scroll&&!!r,remoteScroll:!!r,isDrag:i};this.parentDom.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:n}))}},e.prototype.addImageGraphic=function(e,t,o){var r=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLine),i=this.toolInstance.transLocationOrigin({clientX:t,clientY:o});return r.drawLocalGraphicImage(e,i.clientX,i.clientY)},e.prototype.initBackground=function(e){this.toolInstance.createBackground(this.whiteboardNode,e)},e.prototype.canReloadView=function(){var e=document.getElementById(this.viewInfo.parent);e.style.cssText+="position:relative;display:block!important;";var t=e.clientWidth,o=e.clientHeight;this.checkParentSize(t,o);var r=this.viewInfo,i=r.viewWidth,n=r.viewHeight,a=this.getWhiteboardAspect(t,o,!0),s=a.x,c=a.y,l=a.width,u=a.height;return!(Math.abs(i-l)<5&&Math.abs(n-u)<5)||(this.parentDom.style.cssText+="left:"+s+"px;top:"+c+"px;",y.a.info(j("reloadViewLayou"),JSON.stringify({w0:i,h0:n,w:l,h:u})),!1)},e.prototype.reinitView=function(){this.toolInstance.isReloading=!0,this.parentDom=null,this.init(this.viewInfo.parent,!0),this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLaser).updateLaserConSize(),this.toolInstance.isReloading=!1},e.prototype.updateLaser=function(){this.toolInstance.reverseZoomHandle(s.j.ZegoWhiteboardViewToolLaser);var e=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLaser);e.updateLaserConSize(),e.pushActualPlaceHandle()},e.prototype.remoteUpdateBackgroundImage=function(e){this.toolInstance.background.remoteAddBackgroundImageGraphic(e)},e.prototype.remoteClearBackgroundImage=function(){this.toolInstance.background.updateToLocal(!0).clearBackgroundImage()},e.prototype.createGraphicsBox=function(){this.graphicsBoxConNode.innerHTML='\n        <div class="img-editor-box">\n            <div class="operation-point-desktop left-top cursor-nwse LT"></div>\n            <div class="operation-point-desktop right-top cursor-nesw RT"></div>\n            <div class="operation-point-desktop left-bottom cursor-nesw LB"></div>\n            <div class="operation-point-desktop right-bottom cursor-nwse RB"></div>\n            <div class="operation-point-desktop top cursor-ns T"></div>\n            <div class="operation-point-desktop right cursor-ew R"></div>\n            <div class="operation-point-desktop bottom cursor-ns B"></div>\n            <div class="operation-point-desktop left cursor-ew L"></div>\n        </div>\n        <div class="graphics-box"></div>'},e.prototype.emitScroll=function(e,t,o,r,i){this.serviceHandle.loadCurrentGraphics(this.whiteboardID,e,t),r&&this.serviceHandle.scroll(this.whiteboardID,e,t,o,i)},e.prototype.notifyScrollEvent=function(e,t,o,r){i.e.emit(i.b.ViewScroll,{id:this.whiteboardID,horizontalPercent:o,verticalPercent:r,page:e,step:t});var n=this.getUniqueID();n&&i.e.emit(i.d.SubViewScrolled,n,e,t)},e.prototype.emitScaleFactor=function(e,t,o){if(!o){e=0|Math.abs(e),t=0|Math.abs(t);var i=this.viewInfo,n=i.zoom,a=i.width,s=i.height;e=e&&Number((e/a/n).toFixed(7)),t=t&&Number((t/s/n).toFixed(7)),this.scaleInfo.x=e,this.scaleInfo.y=t}r.a.scaleModes.sync&&this.serviceHandle.scale(this.whiteboardID,this.viewInfo.zoom,e,t)},e.prototype.scaleToHandle=function(e,t,o,r){var n=this;if(this.activited){if(this.scaleInfo.x=t,this.scaleInfo.y=o,this.viewInfo.zoom=e||1,this.getFileInfo()){this.scaleInfo.syncTimer&&clearTimeout(this.scaleInfo.syncTimer);var a=r?50:100;this.scaleInfo.syncTimer=window.setTimeout((function(){var i={action:O.b.WbScale,scale:e,x:t,y:o,notify:r};n.parentDom&&n.parentDom.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:i})),n.updateLaser()}),a)}else{var s=this.viewInfo,c=s.viewWidth,l=s.viewHeight,u=s.width,h=s.height,d=s.zoom,p=-t*u*d,f=-o*h*d;r&&(p=c*(1-e)*.5|0,f=l*(1-e)*.5|0,this.emitScaleFactor(p,f)),this.setWhiteboardTransform(p,f),this.updateLaser()}this.getUniqueID()&&i.e.emit(i.d.RemoteScaleChanged,this.viewInfo.zoom)}},e.prototype.init=function(e,t){this.viewInfo.parent=e;var o=document.getElementById(""+r.a.reservedPrefix.whiteboard+this.whiteboardID);this.parentDom&&o||this.createModule(!!t),this.initToolHandle(),this.initBackground(!!t||!o),this.updateStateSizeHandle(),this.initDragEvents(),this.activitView();var i=this.serviceHandle.getScrollPercent(this.whiteboardID),n=i.horizontalPercent,a=i.verticalPercent,s=i.pptStep;if(t){this.toolInstance.updateOffsetAndScrollHandle(),this.toolInstance.updateOffsetPage(),this.serviceHandle.isElectron?this.emitScroll(n,a,s,!1):(this.serviceHandle.reloadViewGraphics(this.whiteboardID,this.toolInstance.graphicList),this.updateRemoteToLocal(this.toolInstance.graphicList,[]));var c=this.scaleInfo,l=c.x,u=c.y;-1!==l&&-1!==u&&this.scaleToHandle(this.viewInfo.zoom,l,u,!1)}else{if(this.scrollToHandle(n,a,s,!1),r.a.scaleModes.response){var h=this.serviceHandle.getScale(this.whiteboardID),d=h.scaleFactor,p=h.scaleOffsetX,f=h.scaleOffsetY;this.scaleToHandle(d,p,f,!1)}this.playAnimation(this.serviceHandle.getH5Extra(this.whiteboardID),!1)}y.a.info(j("mod.init"),JSON.stringify({horizontalPercent:n,verticalPercent:a,step:s}));var g=this.zoomNode.parentNode,m=g.clientWidth,_=g.clientHeight;!t&&(Math.abs(m-this.viewInfo.parentWidth)>5||Math.abs(_-this.viewInfo.parentHeight)>5)&&this.reloadView()},e.prototype.getContentSize=function(){return{width:this.viewInfo.width,height:this.viewInfo.height}},e.prototype.getRootDomID=function(){return this.viewInfo.root},e.prototype.setActivited=function(e,t){e?this.activited=!0:this.viewInfo.root&&this.viewInfo.root!=t||(this.activited=!1)},e.prototype.getActivited=function(){return this.activited},e.prototype.scrollToHandle=function(e,t,o,r){if(this.activited)if(this.stopLocalDrawHandle(t),this.getFileInfo()){var i=this.serviceHandle.getScale(this.whiteboardID),n=i.scaleOffsetX,a=i.scaleOffsetY,s={action:O.b.Page,percent:t,step:o||1,ofsX:n,ofsY:a,notify:r};this.parentDom&&this.parentDom.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:s}))}else this.emitScroll(e,t,1,r),this.jumpPage(e,t)},e.prototype.syncScaleToHandle=function(){var e=this.scaleInfo,t=e.x,o=e.y;-1!==t&&-1!==o&&this.emitScaleFactor(t,o,!0)},e.prototype.clearLaserHandle=function(e){this.toolInstance&&this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolLaser).clearLaserHandle(e)},e.prototype.clearLocalHandle=function(e){e&&e.includes(1)?this.remoteClearBackgroundImage():(this.toolInstance.clearLocalHandle(),this.createGraphicsBox())},e.prototype.updateRemoteToLocal=function(e,t){var o=this.toolInstance.graphicList.some((function(e){return t.length&&t.includes(e.graphic_id)&&e.type==s.f.BgImage})),r=e.filter((function(e){return e.type==s.f.BgImage}));if(r.length){var i=r.pop();this.remoteUpdateBackgroundImage(i)}o&&this.remoteClearBackgroundImage(),e=e.filter((function(e){return e.type!==s.f.BgImage})),this.toolInstance.updatePushLocalHandle(e,t)},e.prototype.destroyDomHandle=function(){if(this.parentDom){y.a.info(j("mod.destroy_dom"),JSON.stringify({domID:this.parentDom.id}));var e={action:O.b.WbDestroy,data:this.whiteboardID};this.parentDom.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:e})),Object(a.n)(this.parentDom.parentElement),this.parentDom=null}},e.prototype.playAnimation=function(e,t){var o;if(this.activited){var r={action:O.b.Animation,data:e,notify:!t};null===(o=this.parentDom)||void 0===o||o.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:r}))}},e.prototype.onAuthChange=function(){this.activited&&this.setDragStyle(this.getToolType()||0)},e.prototype.clear=function(){var e=this;if(this.operationModes.draw)if(this.toolInstance.getUserAuth().clear){y.a.info(j("mod.clear"),JSON.stringify({whiteboardID:this.whiteboardID}));var t=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolSelector);t.hideImageEditBox(),t.hideSelectBox(),this.serviceHandle.clearView(this.whiteboardID,[0]).then((function(){e.clearLocalHandle(),y.a.info(j("mod.clear_cb"),"success")})).catch((function(e){var t=Object(n.a)(s.i.ZegoWhiteboardViewErrorClearFail);y.a.error(j("mod.clear_cb"),JSON.stringify(t))}))}else Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthClearGraphic)},e.prototype.scroll=function(e,t){return isNaN(+e)||isNaN(+t)?(Object(n.a)(s.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误: horizontalPercent、verticalPercent取值为0~1",!0),!1):!!this.operationModes.scroll&&(this.toolInstance.getUserAuth().scroll?(y.a.info(j("mod.scroll"),JSON.stringify({params:{horizontalPercent:e,verticalPercent:t}})),e<0&&(e=0),e>1&&(e=1),t<0&&(t=0),t>1&&(t=1),e=Number(e.toFixed(7)),t=Number(t.toFixed(7)),y.a.info(j("mod.scroll"),JSON.stringify({transParams:{horizontalPercent:e,verticalPercent:t}})),this.viewInfo.pageCount>1&&this.viewInfo.page>0&&(this.scrollToHandle(e,t,1,!0),!0)):(Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthScroll),!1))},e.prototype.getCurrentScrollPercent=function(){return N(N({},this.serviceHandle.getScrollPercent(this.whiteboardID)),{direction:this.viewInfo.direction})},e.prototype.getHorizontalPercent=function(){return this.getCurrentScrollPercent().horizontalPercent},e.prototype.getVerticalPercent=function(){return this.getCurrentScrollPercent().verticalPercent},e.prototype.undo=function(){this.operationModes.draw&&(this.serviceHandle.isElectron?this.serviceHandle.undo(this.whiteboardID):this.toolInstance.undoNewHandle())},e.prototype.redo=function(){this.operationModes.draw&&(this.serviceHandle.isElectron?this.serviceHandle.redo(this.whiteboardID):this.toolInstance.redoNewHandle())},e.prototype._undoClear=function(){this.toolInstance.undoClearPage()},e.prototype.getAspectRatio=function(){return this.serviceHandle.getAspectRatio(this.whiteboardID)},e.prototype.getFileInfo=function(){return this.serviceHandle.getFileInfo(this.whiteboardID)},e.prototype.getID=function(){return this.whiteboardID},e.prototype.getName=function(){return this.serviceHandle.getModName(this.whiteboardID)},e.prototype.getCreateTime=function(){return this.serviceHandle.getCreateTime(this.whiteboardID)},e.prototype.getRoomID=function(){return this.serviceHandle.getRoomID(this.whiteboardID)},e.prototype.getUniqueID=function(){return this.serviceHandle.getUniqueID(this.whiteboardID)},e.prototype.getCurrentPage=function(){return this.viewInfo.page||1},e.prototype.getPageCount=function(){return this.viewInfo.pageCount||1},e.prototype.setBackgroundImage=function(e,t,o){return this.toolInstance.background.setBackgroundImage(e,t,o)},e.prototype.clearBackgroundImage=function(){this.toolInstance.background.clearBackgroundImage()},e.prototype.setToolType=function(e){var t;if(e=e||0,!Object(k.o)(e)||this.operationModes.none)return!1;if(e===s.j.ZegoWhiteboardViewToolClick){var o=null===(t=this.getFileInfo())||void 0===t?void 0:t.fileType;if(o!==s.d.PPTH5&&o!==s.d.CUSTOM_H5)return!1}return r.a.basicState.type=e,!this.toolInstance||(this.parentDom.style.userSelect=e!==s.j.ZegoWhiteboardViewToolText?"none":"auto",this.canDraw=this.operationModes.draw&&!!e&&e!==s.j.ZegoWhiteboardViewToolClick,this.setClassNameHandle(e),this.setDragStyle(e),this.penetrateEventHandle(e),this.updateBindEvents(),this.hideSelectBox(),!0)},e.prototype.getToolType=function(){return Object(k.e)()},e.prototype.setBrushColor=function(e){return Object(k.j)(e)},e.prototype.getBrushColor=function(){return Object(k.b)()},e.prototype.setBrushSize=function(e){var t=Object(k.k)(e);return t&&this.updateStateSizeHandle(),t},e.prototype.getBrushSize=function(){return Object(k.c)()},e.prototype.setFontSize=function(e){var t=Object(k.n)(e);return t&&this.updateStateSizeHandle(),t},e.prototype.getFontSize=function(){return Object(k.d)()},e.prototype.setTextSize=function(e){return this.setFontSize(e)},e.prototype.getTextSize=function(){return this.getFontSize()},e.prototype.setFontBold=function(e){return Object(k.l)(e)},e.prototype.isFontBold=function(){return Object(k.f)()},e.prototype.setFontItalic=function(e){return Object(k.m)(e)},e.prototype.isFontItalic=function(){return Object(k.g)()},e.prototype.setBackgroundColor=function(e){return!(!Object(k.i)(e)||!this.toolInstance.enableDraw)&&(this.toolInstance.background.setBackgroundColor(e),!0)},e.prototype.getBackgroundColor=function(){return Object(k.a)()},e.prototype.setScaleFactor=function(e,t,o){var r=+e;(!r||r<1)&&(r=1),this.viewInfo.zoom!==r&&this.operationModes.scale&&this.getToolType()!==s.j.ZegoWhiteboardViewToolClick&&(this.toolInstance.getUserAuth().scale?(y.a.info(j("mod.setScaleFactor"),JSON.stringify({params:{zoom:r,x:t,y:o}})),this.scaleToHandle(r,t||0,o||0,!0)):Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthScale))},e.prototype.getScaleFactor=function(){return{scaleFactor:this.viewInfo.zoom,scaleOffsetX:0,scaleOffsetY:0}},e.prototype.getScaleOffsetX=function(){return this.getScaleFactor().scaleOffsetX},e.prototype.getScaleOffsetY=function(){return this.getScaleFactor().scaleOffsetY},e.prototype.clearCurrentPage=function(){this.toolInstance.clearPage(this.viewInfo.page||1)},e.prototype.deleteSelectedGraphics=function(){this.toolInstance.deleteSelectedGraphics(s.c.BatchSelete)},e.prototype.addText=function(e,t,o){if(this.operationModes.draw&&this.getToolType()===s.j.ZegoWhiteboardViewToolText)if(!e||!Object(a.k)(t)||!Object(a.k)(o)||t<0||o<0||t>this.viewInfo.viewWidth||o>this.viewInfo.viewHeight)Object(n.a)(s.i.ZegoWhiteboardViewErrorParamInvalid);else if(this.toolInstance.getUserAuth().create){var r=this.toolInstance.getInstanceHandle(s.j.ZegoWhiteboardViewToolText);this.toolInstance.updateOffsetAndScrollHandle();var i=this.toolInstance.transLocationOrigin({clientX:t,clientY:o});t=i.clientX,o=i.clientY,r.addTextGraphics(e,t,o),y.a.info(j("mod.addText"),JSON.stringify({params:{text:e,positionX:t,positionY:o}}))}else Object(n.a)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic)},e.prototype.addImage=function(e,t,o,i,c){var l=this,u=this.viewInfo.viewWidth,h=this.viewInfo.viewHeight,d=s.n.ZegoWhiteboardViewImageGraphic,p=s.n.ZegoWhiteboardViewImageCustom;if(!i||e!==d&&e!==p||!Object(a.k)(t)||!Object(a.k)(o)||e===d&&(t<0||o<0||t>u||o>h)||e===p&&"string"!=typeof i){var f=Object(n.b)(s.i.ZegoWhiteboardViewErrorParamInvalid);return Promise.reject(f)}if(!this.operationModes.draw)return Promise.reject({});if(!this.toolInstance.getUserAuth().create){f=Object(n.b)(s.i.ZegoWhiteboardViewErrorNoAuthCreateGraphic);return Promise.reject(f)}var g=e===d?10485760:512e3;if("string"==typeof i){var m=i;if(!m.startsWith("https://")){f=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl);return Promise.reject(f)}return new Promise((function(a,c){var u=!0,h=new XMLHttpRequest;h.open("HEAD",m,!0),h.onreadystatechange=function(){if(4==h.readyState){if(200!=h.status){u=!1;var d=404===h.status?s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl:s.i.ZegoWhiteboardViewErrorInvalidRsp;return c(Object(n.b)(d))}var f=(h.getResponseHeader("Content-Type")||"").replace("image/",""),_=+h.getResponseHeader("Content-Length");if(!"jpg,jpeg,png,svg+xml".includes(f)){var v=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return c(v)}if(_>g){v=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit);return c(v)}if(y.a.info(j("mod.addImage"),JSON.stringify({params:{type:e,positionX:t,positionY:o,address:i}})),e===p){r.a.basicExtraState.customImage.url=m;var b=new Image;b.setAttribute("crossOrigin","anonymous"),b.onload=function(){r.a.basicExtraState.customImage.w=b.width,r.a.basicExtraState.customImage.h=b.height},b.src=m,a(m)}else l.addImageGraphic(m,t,o).then(a)}},h.onerror=function(){if(u){var e=404===h.status?s.i.ZegoWhiteboardViewErrorGraphicIllegalUrl:s.i.ZegoWhiteboardViewErrorInvalidRsp;c(Object(n.b)(e))}},h.send(null)}))}if(this.serviceHandle.isElectron&&e===d&&"object"===V(i)){if(!/(\.jpg|\.jpeg|\.png|\.svg)$/.test((i=i).path)){f=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return Promise.reject(f)}return y.a.info(j("mod.addImage"),JSON.stringify({params:{type:e,positionX:t,positionY:o,address:i.path}})),this.serviceHandle.uploadImage(i.path,c).then((function(e){return l.addImageGraphic(e,t,o)}))}var _=(i=i).type.replace("image/","");if(!"jpg,jpeg,png,svg+xml".includes(_)){f=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageTypeNotSupport);return Promise.reject(f)}if(i.size>g){f=Object(n.b)(s.i.ZegoWhiteboardViewErrorGraphicImageSizeLimit);return Promise.reject(f)}return y.a.info(j("mod.addImage"),JSON.stringify({params:{type:e,positionX:t,positionY:o,address:i.name}})),this.serviceHandle.uploadImage(i,c).then((function(e){return l.addImageGraphic(e,t,o)}))},e.prototype.setWhiteboardOperationMode=function(e){if(e&&Object(a.k)(e)){var t=!!(e%2),o=!t&&[2,6,10,14].includes(e),i=!t&&[4,6,12,14].includes(e),c=!t&&[8,10,12,14].includes(e);this.operationModes=Object.freeze({none:t,scroll:o,draw:i,scale:c});var l=r.a.basicState.type;this.toolInstance&&(this.toolInstance.enableDraw=i),this.canDraw=i&&!!l&&l!==s.j.ZegoWhiteboardViewToolClick,this.setDragStyle(l),this.penetrateEventHandle(l),y.a.info(j("mod.setWhiteboardOperationMode"),JSON.stringify({params:e,result:this.operationModes}))}else Object(n.a)(s.i.ZegoWhiteboardViewErrorParamInvalid)},e.prototype.snapshot=function(e){return H(this,void 0,void 0,(function(){var t,o,r;return B(this,(function(i){switch(i.label){case 0:return t=null==e?void 0:e.userData,o=new L(this.toolInstance,this.toolInstance.background),this.snapshotInstances[o.snapshotId]=o,[4,o.snapshot(t)];case 1:return r=i.sent(),delete this.snapshotInstances[o.snapshotId],[2,r]}}))}))},e.prototype.reloadView=function(){if(this.getFileInfo()){var e={action:O.b.ReloadView,data:""};this.parentDom&&this.parentDom.dispatchEvent(new CustomEvent(O.a.Whiteboard,{detail:e}))}else this.canReloadView()&&this.reinitView()},e.prototype.getVisibleSize=function(){return{width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight}},e}(),q=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},R=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},F=y.b.bind(null,"wb.m."),W=function(){function e(e){this.modIdMapInstance={},this.fileInfoMap={},this.signallingDelay=0,this.serviceHandle=e,this.registerLoadfileListener(),this.registerPushCallbackHandle(),this.registerPullCallbackHandle()}return e.prototype.registerLoadfileListener=function(){var e=this;document.body.addEventListener("loadfile",(function(t){var o=t.detail.fileID;e.fileInfoMap[o]=t.detail,y.a.info(F("update_file_info"),JSON.stringify({fileID:o,detail:t.detail}))}))},e.prototype.registerPushCallbackHandle=function(){var e=this;i.e.on(i.c.PushClearPageGraphics,(function(t,o){e.signallingDelay?setTimeout((function(){e.clearGraphicsPushCallback(t,o)}),e.signallingDelay):e.clearGraphicsPushCallback(t,o)})),i.e.on(i.c.PushDrawPageGraphics,(function(t,o,r){e.signallingDelay?setTimeout((function(){e.drawGraphicsPushCallback(t,o,r)}),e.signallingDelay):e.drawGraphicsPushCallback(t,o,r)})),i.e.on(i.c.PushAddMod,(function(t,o){e.signallingDelay?setTimeout((function(){e.addModPushCallback(t,o)}),e.signallingDelay):e.addModPushCallback(t,o)})),i.e.on(i.c.PushRemovedMod,(function(t,o){e.signallingDelay?setTimeout((function(){e.removedModPushCallback(t,o)}),e.signallingDelay):e.removedModPushCallback(t,o)})),i.e.on(i.c.PushScroll,(function(t,o,r,i){e.signallingDelay?setTimeout((function(){e.scrollPushCallback(t,o,r,i)}),e.signallingDelay):e.scrollPushCallback(t,o,r,i)})),i.e.on(i.c.PushScale,(function(t,o,r,i){e.signallingDelay?setTimeout((function(){e.scalePushCallback(t,o,r,i)}),e.signallingDelay):e.scalePushCallback(t,o,r,i)})),i.e.on(i.c.PushH5ExtraAppended,(function(t,o){e.signallingDelay?setTimeout((function(){e.h5ExtraAppendedPushCallback(t,o)}),e.signallingDelay):e.h5ExtraAppendedPushCallback(t,o)})),i.e.on(i.c.PushAuthChange,(function(t,o){e.onPushAuthChange(t,o)}))},e.prototype.registerPullCallbackHandle=function(){var e=this;i.e.on(i.c.GetPageGraphicsList,(function(t,o,r){var i=e.getMapInstance(t);i&&i.updateRemoteToLocal(o,r)})),i.e.on(i.c.AppendH5Extra,(function(t){var o=t.whiteboardID,r=t.code,n=t.msg,a=t.modExtra,c=t.isH5;0!==r&&(r===s.i.ZegoWhiteboardViewErrorAnimationInfoLimit?i.e.emit(i.b.Error,{code:r,msg:n}):c?e.h5ExtraAppendedPushCallback(o,a):i.e.emit(i.b.Error,{code:r,msg:n}))})),i.e.on(i.c.Scroll,(function(t){var o=t.whiteboardID,r=t.code,i=t.horizontalPercent,n=t.verticalPercent,a=t.step;0!==r&&e.scrollPushCallback(o,i,n,a)})),i.e.on(i.c.Scale,(function(t){var o=t.whiteboardID,r=t.code,i=t.mod_scale;0!==r&&e.scalePushCallback(o,i.scale,i.ofs_x,i.ofs_y)}))},e.prototype.addModPushCallback=function(e,t){var o=this.getMapInstance(e);o||(y.a.info(F("mod.remote_add"),JSON.stringify({whiteboardID:e})),o=new z(e,this.serviceHandle),this.setMapInstance(o)),t&&i.e.emit(i.d.RemoteModAdd,o),i.e.emit(i.b.ViewAdd,o)},e.prototype.removedModPushCallback=function(e,t){var o=this.getMapInstance(e);o&&(y.a.info(F("mod.remote_removed"),JSON.stringify({whiteboardID:e})),o.destroyDomHandle(),o=null,this.deleteMapInstance(e),t&&i.e.emit(i.d.RemoteModRemoved,t,e),i.e.emit(i.b.ViewRemoved,e))},e.prototype.scrollPushCallback=function(e,t,o,r){var i=this.getMapInstance(e);i&&(y.a.warn(F("mod.remote_scroll"),"whiteboardID="+e+",hPercent="+t+",vPercent="+o+",step="+r),i.scrollToHandle(t,o,r,!1))},e.prototype.scalePushCallback=function(e,t,o,i){var n=this.getMapInstance(e);n&&(y.a.warn(F("mod.remote_scale"),"whiteboardID="+e+",scale="+t+",ofsX="+o+",ofsY="+i),r.a.scaleModes.response&&n.scaleToHandle(t,o,i,!1))},e.prototype.h5ExtraAppendedPushCallback=function(e,t){var o=this.getMapInstance(e);o&&(y.a.warn(F("mod.remote_extra"),"whiteboardID="+e+",modExtra="+t),o.playAnimation(t,!0))},e.prototype.clearGraphicsPushCallback=function(e,t){var o=this.getMapInstance(e);o&&o.clearLocalHandle(t)},e.prototype.drawGraphicsPushCallback=function(e,t,o){var r=this.getMapInstance(e);r&&r.updateRemoteToLocal(t,o)},e.prototype.onPushAuthChange=function(e,t){t&&(i.e.emit(i.b.WhiteboardGraphicAuthChange,t),i.e.emit(i.d.RemoteGraphicAuthChange,t)),e&&(i.e.emit(i.b.WhiteboardAuthChange,e),i.e.emit(i.d.RemoteAuthChange,e),e&&Object.values(this.modIdMapInstance).forEach((function(e){return e&&e.onAuthChange()})))},e.prototype.setFileInfo=function(e){var t;if(e.fileInfo){var o=e.fileInfo,r=o.fileID,i=o.fileName,n=this.fileInfoMap[r];(n=n&&n[i])&&(e.aspectWidth=n.width,e.aspectHeight=n.height,e.pageCount=n.pageCount,y.a.info(F("update_file_info"),JSON.stringify({fileID:r,detail:(t={fileID:r},t[i]=n,t)})))}},e.prototype.deleteMapInstance=function(e){delete this.modIdMapInstance[e]},e.prototype.getMapInstance=function(e){return this.modIdMapInstance[e]},e.prototype.setMapInstance=function(e){this.modIdMapInstance[e.getID()]=e},e.prototype.setActivitedView=function(e,t){this.serviceHandle.isPlayback?i.e.emit(i.c.AttachedView,[]):Object.values(this.modIdMapInstance).forEach((function(o){o.setActivited(o.getID()==e,t)}))},e.prototype.getActivitedViews=function(){return Object.values(this.modIdMapInstance).filter((function(e){return e.getActivited()}))},e.prototype.checkAttachingParent=function(e){return!!document.getElementById(e)},e.prototype.checkCreatingView=function(e){return!(!e||!e.name||isNaN(+e.aspectWidth)||!+e.aspectWidth||isNaN(+e.aspectHeight)||!+e.aspectHeight||isNaN(+e.pageCount)||!+e.pageCount)},e.prototype.setViewSize=function(e){var t=this.getMapInstance(e);if(t){var o=t.getContentSize(),r=o.width,i=o.height;this.serviceHandle.setSize(e,r,i)}},e.prototype.createErrorStr=function(e){return void 0!==e.code?JSON.stringify(e):""+e},e.prototype.loginRoom=function(e,t,o,r){return this.serviceHandle.loginRoom(e,t,o,r)},e.prototype.logoutRoom=function(e){return this.serviceHandle.logoutRoom(e)},e.prototype.getCurrentActivitedView=function(){return this.serviceHandle.getCurrentActivitedView()},e.prototype.setDeferredRenderingTime=function(e){this.signallingDelay=e||0},e.prototype.clear=function(e){Object.values(this.modIdMapInstance).forEach((function(t){t&&t.clearLaserHandle(e)})),y.a.info(F("clear"))},e.prototype.getViewList=function(){return q(this,void 0,void 0,(function(){var e,t,o=this;return R(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.serviceHandle.getModList()];case 1:return e=r.sent(),Object.keys(this.modIdMapInstance).forEach((function(t){-1===e.indexOf(t)&&o.deleteMapInstance(t)})),e.forEach((function(e){o.modIdMapInstance[e]||o.setMapInstance(new z(e,o.serviceHandle)),o.setViewSize(e)})),y.a.info(F("getViewList"),JSON.stringify(Object.keys(this.modIdMapInstance))),[2,Object.values(this.modIdMapInstance).sort((function(e,t){return o.serviceHandle.getCreateTime(t.getID())-o.serviceHandle.getCreateTime(e.getID())}))];case 2:return t=r.sent(),y.a.error(F("getViewList"),this.createErrorStr(t)),[2,Promise.reject(void 0!==t.code?t:Object(n.b)(s.i.ZegoWhiteboardViewErrorGetListFail))];case 3:return[2]}}))}))},e.prototype.createView=function(e,t){var o=this;return new Promise((function(r,i){return q(o,void 0,void 0,(function(){var o,a,c,l;return R(this,(function(u){switch(u.label){case 0:if(!this.checkCreatingView(e))return o=Object(n.b)(s.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误：roomID、name为字符串，aspectWidth、aspectHeight、pageCount为正整数",!0),y.a.error(F("createView"),JSON.stringify(o)),i(o),[2];this.setFileInfo(e),y.a.info(F("createView"),JSON.stringify(e)),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.serviceHandle.createMod(e,t)];case 2:return a=u.sent(),(c=this.getMapInstance(a))||(c=new z(a,this.serviceHandle),this.setMapInstance(c),y.a.info(F("createView"),"success")),r(c),[3,4];case 3:return l=u.sent(),y.a.error(F("createView"),this.createErrorStr(l)),i(void 0!==l.code?l:Object(n.b)(s.i.ZegoWhiteboardViewErrorViewCreateFail)),[3,4];case 4:return[2]}}))}))}))},e.prototype.destroyView=function(e){var t=this;return new Promise((function(o,r){return q(t,void 0,void 0,(function(){var t,i,a;return R(this,(function(c){switch(c.label){case 0:if(!e||!e.getID)return t=Object(n.b)(s.i.ZegoWhiteboardViewErrorViewNotExist),y.a.error(F("destroyView"),JSON.stringify({whiteboardView:e,errorData:t})),r(t),[2];c.label=1;case 1:return c.trys.push([1,3,,4]),i=e.getID(),[4,this.serviceHandle.destroyMod(i)];case 2:return c.sent(),this.deleteMapInstance(i),e.destroyDomHandle(),e=null,y.a.info(F("destroyView"),"success"),o(),[3,4];case 3:return a=c.sent(),y.a.error(F("destroyView"),this.createErrorStr(a)),r(void 0!==a.code?a:Object(n.b)(s.i.ZegoWhiteboardViewErrorDestroyFail)),[3,4];case 4:return[2]}}))}))}))},e.prototype.attachView=function(e,t){var o=this;return new Promise((function(r,i){if(!o.checkAttachingParent(t)){var a=Object(n.b)(s.i.ZegoWhiteboardViewErrorViewParentNotExist);return y.a.error(F("attachView"),JSON.stringify({parent:t,errorData:a})),void i(a)}if(!e||!e.getID){a=Object(n.b)(s.i.ZegoWhiteboardViewErrorViewNotExist);return y.a.error(F("attachView"),JSON.stringify({whiteboardView:e,errorData:a})),void i(a)}y.a.info(F("attachView"),JSON.stringify({whiteboardID:e.getID(),parent:t}));try{var c=e;o.setActivitedView(c.getID(),c.getRootDomID()),c.init(t),o.setMapInstance(c),y.a.info(F("attachView"),"success"),r()}catch(e){y.a.error(F("attachView"),o.createErrorStr(e)),i(Object(n.b)(s.i.ZegoWhiteboardViewErrorAttachFail))}}))},e.prototype.enableSyncScale=function(e){r.a.scaleModes.sync=!!e,e&&this.getActivitedViews().forEach((function(e){return e.syncScaleToHandle()}))},e.prototype.enableResponseScale=function(e){var t=this;r.a.scaleModes.response=!!e,e&&this.getActivitedViews().forEach((function(e){var o=t.serviceHandle.getScale(e.getID()),r=o.scaleFactor,i=o.scaleOffsetX,n=o.scaleOffsetY;e.scaleToHandle(r,i,n,!1)}))},e.prototype.enableHandwriting=function(e){if("boolean"==typeof e){var t=r.a.basicState.attributes,o=JSON.parse(t);o.stroke=!!e,r.a.basicState.attributes=JSON.stringify(o),this.serviceHandle.enableHandwriting(o.stroke)}else{var i=Object(n.b)(s.i.ZegoWhiteboardViewErrorParamInvalid,"参数错误",!0);y.a.error(F("enableHandwriting"),JSON.stringify(i))}},e.prototype.undoClearAction=function(){this.getActivitedViews().forEach((function(e){return e._undoClear()}))},e.prototype.switchView=function(e){return this.serviceHandle.switchView(e)},e.prototype.on=function(e,t){return y.a.info(F("on"),JSON.stringify({event:e})),i.e.on(e,t)},e.prototype.off=function(e,t){return y.a.info(F("off"),JSON.stringify({event:e})),i.e.off(e,t)},e}()},function(e,t,o){"use strict";o.d(t,"a",(function(){return y}));o(49),o(174),o(48),o(59),o(35),o(258),o(259),o(37),o(50),o(64),o(80);var r=o(229),i=(o(263),o(286),o(4)),n=function(){function e(){var e;this.isElectron=!1,this.store=((e={})[i.m.PptStepMode]=1,e[i.m.DisableH5ImageDrag]=!1,e[i.m.UnloadVideoSrc]=!1,e.multiDocsQueue=null,e.syncPPTH5Queue=null,e.syncQueueRuning=!1,e)}return e.prototype.setStore=function(e){return Object.assign(this.store,e),!0},e.prototype.getStore=function(){return this.store},e}(),a=(o(65),o(69),o(70),o(288),o(87),o(114),o(38),o(203),o(74),o(31),o(91),o(73),o(175),o(93),o(86),o(88),o(266),o(176),o(220),o(32),o(40),o(45),o(221),o(39),o(60),new Image);a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAN90lEQVR4Xu1dC3BcVRn+/7tJ82ybNu8mezZt6qAoLx2dmm42TZPY2g74Qh3EQZ6KOoMoA47gW1EHfOCgIg8RcQYVEWRgoG0SQjbbUhwc0aK0hdLee7N59f3MY3fvcQ6kJU33ce9/d3Pv9p4z02mb/N/5z/m+797de+55IMjiaQbQ072XnQdpAI+bQBpAGsDjDHi8+/IOIA3gcQY83n15B5AG8DgDHu++vANIA3icAY93X94BpAE8zsCs7quq+jAi1iNijHMeB4CY+CP+LX528ueIGJ/+2Zt/K4oSTyQSGwOBwOZ8YlTeAWaopapqEBEHiAI+yRj7KBHrGEwaYAb1mqZFAGAlRQ1FUaoaGxv3U7BOYqQBptkfHBy8wjCMP1DE4JzfEQgEvk7BOo2RBphWQNO0IQCoJwjCGWMKAecKiDQAAKiq+j1E/DZRkasZY78nYh2Hed4AmqYtAYAoUYlXGWPnErGugHneALqu/5Fz/lmKGoZhtDQ1Nb1AwboFk9EA3f0D303VWEQMcM5Vt3TGajsWlpcH6qorr7SKE/ETk7Ht6tDQXyjYbGIyadDV1ppSP9GOjAboCUf6AGBV0kZzeBkQLsxmh+ayLn99LZQUFZFS7tIHIZEwSNisgjJo0BkKptXYswZYUF4GdVWVJC0OHD4C+w4eImGzDpIGoFHa7G8An89HAu/co5FwOQFJA1intbJiIYg/lDKybz8cOXacAs0NRhrAGq8FPh8s8zdYA01HT8VisCc6TMLmDCQNYI3a+upKmF9WZg00Ha0Pj8L45CQJmzOQCwzgkm9DmSkuKylZ2FBbfVHmyDMjxicm9uojY/+lYHOK4VCR7kksp08BPMHbu9pbn89pB7NYua7rL3DOV1CqnDdvXm1dXd0YBZtLTHffwCr0oXhUT1qkAaZp0TRNDPhQx+x/xBi7LZdCUuuWBjDJnKZp4uqtNhk+MyzGGJtHwM0JRBrABM2apv0QAKhX8FWMsYdMpHEkRBogA+0jIyM1U1NToxR1EHGb3+8/n4KdK4w0QAamdV1/hHN+GUUQznlrIBAQ08RcW6QB0kgTjUZbEokEaZYu5/yxQCDwSdcqP90waYA0Cmma9iIAfIAiYiKRqF+6dOkIBTuXGM8aoK+vrzzm812qcLwIEM/nnG/1+XDblKJsWNvSckBV1SsQkTTJEwBc+9g321yeNEBv/5YWUIz7OId3n3G1IQyBAbecsyxwF+e8inA1TjLGigk4RyCeM8CmcPhKBZS0Azp23vYZhnFNU1PTg46oSUjqKQM829fXVOgreAUAU77N8fkUaPY3Eqh8E/IfxtgFVLATOE8ZoCccuQMAbk5HdH11FcwvK6Vq0cYYC1PBTuA8ZoDNGwD4mlREFxcVAauvJemAiI/5/X7XP/Z5+ktgTzhyGAAWpFKY1ddBcRF52L6BMSZWB+VV8dYdYCDyL+DJZyHbmeSJiD/x+/3fyCvlvTgQ1B2O3IMA1ycTqpk1gk8hLdEbZ4yRvzQ4bRqP3QEG1gLHZ2eTbuexDxGv9fv9v3NaSGp+TxlAkNQbjtzDZ9wFxFUvrn5iybvHPk9/CTzZebFcDRG/I/5fV10JC4iTPBFxld/v7yeaxxUwz90BTrIuhoPLyopuXlJTTd2W5XHG2CdcoaKNRnjWAIKz4eHh6lgsRpqoaRjGLU1NTXfa4N4VUE8bQCig6/oqznnKWbHpVDIMY31TU9MzrlCS2AjPG0DwpmnalwHgVxQO4/F407Jly/J2ibs0wLTqmqb9BgC+SDDBMcbYfALOFRBpgBkyaJomvtGHCMq8yBgjLRgh5MoqRBpgFp2apu0DAMrC/wcZY9dkVZ05qEwaYBbJu3fvrvP5fNQlvDcxxn4+B7plLYU0QBIqVVXtQMQeIstrGWMbzWB7BgbWcgNFrtXAjRpAfreiKE+uDgZ3mMFnI0YaIAWLqqregIi/pJCsKIq/sbFxMBV2UySyROF4G3D+pWQxnMPlXW3BRyi5rWKkAdIwpqrqvYj4eaukAsBhxlhFMlxPf+TTgHA7ADSnqxcBr+oIrcz5kjJpgAzqqqoaQUTLG0Bzzl8IBAItM6vvDoevQ1DuM2soBLiuIxR8wGw8JU4awARrqqoeRMSkV3Q6OOf8gUAgcJ2I6QlHxFV/q4l0p4Xk+uNAGsCEIjt27GgoKSlJ+ZmewQRffU3VLwaA1SZSpQgxPtYZCv2djk+NlAYwyWo0Gu1KJBKbTIafFjY4OgYnxico0FMY5Limo20lKX+6xNIAFmQZHBy80TCMX1iAnAp9Q49CPJGgQE9hEgk8b037yldsVTILLA1gkU1d1+/nnF9rEQYJw4BdGulT5LRUvkSspL293d7tZEaN0gBWlXzrFfIWzvkHrULHJyZBHyHtNXEqFefweldb8B1Wc6eKlwYgMqlpWto1BqmqPXz0GIzuP0DM+haMA/9TV6j1M7YqmQZLAxBZjEaj/kQiQdr0d+zAQTh05Cgx8zQM8abO1pW23zuctQbYuHFjma+o/FzuM/Z3tba+YY/t5Ghd19dyzs+YZm4m1+DIGJyYsPdRrihw+eqgvSHjs84A3eHIjQj8KgA8tTkTB/gnIL+vq7XV9CicGRFFjKZpNwHAT83Gz4zbpUchYfPJADl2dLStfI6SX2DOGgP0hMPnAvhuB+CpZ/kiPAsJ+HHnqiD1cMekPG/fufPV0uLid1oVIRtPBgiwl4OxqjMU+p/V/GeNAfq2bFmeiPPHAfh55kjI3shab//ANzniD6gLS7PxZIAAm2MFyiViaxtz/X87Ku/vAL29mwO80HgcAN9rpfO+RGxRe3u7rY2qu/sHrkbEU8vClgf8oGDGQ1TOaOaho8dgzOaTAQD8rTMUvNQKB3l/BwiHw/VToHQDJNnrJzMTE52hYEnmsOQR3eEtaxCMpwCg8GREYUEBLG0Up8hZL2P7D8KhozafDADu7AwFb7GSPW/vAE/19VWVFhRu5Tz9e/V0ZCDC9o7W4LusEPbmVdPffx6iT4gfmI21s8NINp4MQIHrO4PBe832KS8N8MzWrQvmTcVfBQDa5XY6Oxs6Q8EPmyVsQzhcX8CVJwHh/bMxZaUl0FBD2U8aIBsDRNPtiYEB6ztXBcWdMWPJOwP09fUVJ3yFYieORRl7ZzKAc/hrV1vwU5nCX3rppcKDJyaeRoAPJYtdzhpBIewxYBgcXtf0TOlN/x4RtxtgrDcz/pFXBnj00Ud9lXVLjnIA8md3KhYReC8Av7UjFPpHsphN4XCHD5QbOMAlyX5fs3gRVCygrQ8ZGtsLx06MmxbYTCDn8ExXW3B9pti8MkBPOMIzdcjm748iwq8NQ3mkq61lm6jruYGB9xkcxa4iKd8Ain2FxGMgpRw9fgKG94qlCNkvCHB3Ryh4Q7qa88YAPeGIeI1Wk32aUtYoxvnFEHLyU09nwJoa6mFe4amHAUtNfE3VgfMc+hr5jZ2trSlnN+eFAbr7I9sQ4T2WmJ2j4MUVC6GKeobg3v1w5PgcnCGIysWdrS1PJ6PE9QboDW/u4cA75khPS2kKCwtgaQPtQeT4+DhER/daymcjeA+AsT7ZcLGrDdA7sJl8WIMNskxD/XW1UFKcH4dHI2Dv5LHD69etW3fawYWuNUDPwOa7gPOvmFZjjgMXzi+H2srFpKxi2FcM/8514cDv7wq1nrbQxZUGyNSouSZudj47x8dm4+WPnf7PPqsxE9eOnBuYqVF2CMgGdklNFZSX0vaG3D04BLF4PBvNINUhDUCi7W1QeWkJLCEO9+47eAgOHD5iswX24NIANvgTw7zLGpeQhnsnp2KgDlG3HbDR6FlQaQAbXNZULoaK+eWkGtShEZicmiJhswmSBiCyWVpSDI21tIFIcdsXt383FGkAogpiooeY8GG1iC984oufW4o0AEEJO7uJZ2WSB6HNqSDSABbJLCkqAj/xGBmx+EMsAnFTkQawqIYQX5jAasnGlG+rOc3ESwOYYWk6ZtGC+VC9mDbxKBeTPCw0PWVo3hggG521U0fl4ormqkULSfvzTMXjG3er0Z/YyZ9LbFd76/Mn68806urIUHAuO2+2bk3TngAAy2cJcM5j8Xi8urm5Wawedn2RBkgikaqqX0DE31LU45x/LhAIPEzBOoGRBpjFuq7ryznn/wYAytueJxhjH3dCSGpORw0AAA9xzl211z6rr/1ISXHxhRRC9wyN3DU5OZkXt/6T/UNEsbjlylT9zel3AODwMmDygxwpAtjFiMOjxCFSlJKVTR8oie1iMmjgGQOISR7imZ8y3Cs2ehAjfnlZpAHeks3Owg7xmle87s3LIg0AkO+TPGwZz+sGEJM8xGteyqnhE5NToA2P2OLfcbDXDVC1qAIWL0x5onxaffThURifPG2WteN6Wm7AHBkgebs4VACCYzMl5peVLqqvrrrAMmniQICjx/TR/Qd2UbCuwmTQoDMUbE/XXuv7obik92Kl8YoVK8SxMBnX/iVp8k7G2Dku6YqjzchbA2ia9i0A+D6FPURc5/f7SfsDUvK5GZOXBohGoy3xeLwPEecRyL2XMSaWi8sCAHlpAF3Xn+acZ9w8YbbCnPNRRVGW+v3+7O7mkMdWyjsDaJr2NQD4GZHzyxhjfyZiz0pY3hngrFTBwU5JAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1NIAblDBwTZIAzhIvhtSSwO4QQUH2yAN4CD5bkgtDeAGFRxsgzSAg+S7IbU0gBtUcLAN0gAOku+G1P8HXF8j+YvhwMkAAAAASUVORK5CYII=";var s=o(5),c=o(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u,h=function(){return(h=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<o;t++)for(var n=arguments[t],a=0,s=n.length;a<s;a++,i++)r[i]=n[a];return r},p=c.b.bind(null,"docs.v."),f=function(){function e(e,t,o){var r=this;this.parent="",this.id="",this.wbId="",this.canvasArray=[],this.renderMode=i.j.PDF,this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.viewInfo={ticking:!1,percent:0,total:1,sheet:0,sheetName:"",parentWidth:0,parentHeight:0,width:0,height:0,viewWidth:0,viewHeight:0,rate:1,canvasMaxPage:5,scrollTop:0,scrollLeft:0,lastTime:0,lastTimeId:0,scrollTimeId:0,isParentScale:!1,fillPPT:!1,h5CDNUsedMap:{},imgInfo:{isSmall:!1,isScale:!1,width:0,height:0,min_w:640,min_h:400},firstInfo:{page:0,step:0,h5Extra:"",loadedFile:!1,scrollTop:0},maxSteps:{}},this.zoomInfo={zoom:1,x:0,y:0,tx:0,ty:0,isDrag:!1,enableScroll:!0,remoteScroll:!0,dragRectTop:0,dragRectBottom:0},this.ppth5Info={page:1,step:1,scene:0,targetPage:0,targetStep:0,lastStep:-1,goPage:0,goStep:0,notify:!0,loaded:!1,scale:1,goTimer:0,syncTimer:0,pageChangeTimer:0,p:"",loadRetryTimer:0},this.fileInfo={},this.vpageImgCache={},this.vpageAspecCache={},this.vpageDrawImgCache={},this.domEventListeners=null,this.loadFileCallback=function(){var e=r.getLoadFileModelForCallback();r.loadFileListener&&"function"==typeof r.loadFileListener?r.loadFileListener(e):s.e.emit(s.a.LoadFile,e),c.a.info(p("loadFileCallback"))},this.reloadViewCallback=function(){var e={action:i.d.ReloadView,data:r.getLoadFileModelForCallback()};if(r.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:e})),r.renderMode===i.j.PDF){var t=r.zoomInfo.zoom;r.getDocViewChild().style.cssText+="transform:scale("+t+");";var o=r.viewInfo.scrollLeft*t|0,n=r.viewInfo.scrollTop*t|0;r.docDom.scrollTo(o,n),r.renderDom.scrollTo(o,n),clearTimeout(r.viewInfo.scrollTimeId),r.viewInfo.scrollTimeId=window.setTimeout((function(){r.viewInfo.ticking=!1}),34)}else r.setDocsViewDomTransform(r.zoomInfo.tx,r.zoomInfo.ty);c.a.info(p("reloadViewCallback"))},this.handleWhiteboardEvent=function(e){var t=e&&e.detail,o=t.action;if(c.a.info(p(i.c.Whiteboard),JSON.stringify(t)),o===i.d.Page)r.handleWhiteboardPageEvent(t);else if(o===i.d.WbScale){var n=t,a=n.scale,s=n.x,l=n.y,u=n.notify;r.handleSetScaleFactor(a,s,l,u)}else o===i.d.WbDragTool?r.handleWhiteboardDragToolEvent(t):o===i.d.WbInit?(c.a.setExtraConfig({wbId:t.data}),r.handleWhiteboardInitEvent(t)):o===i.d.Animation?r.handleWhiteboardAnimationEvent(t):o===i.d.WbDestroy?r.unloadFile():o===i.d.Snapshot?r.docsSnapshot(t):o===i.d.ReloadView&&r.reloadView()},this.handleIframeMessage=function(e){var t=e.data;if(t&&"zegodocsview"===t.source){var o=t.action,i=t.res,n=t.hash;if(!n||n==="#"+r.id)if("syncDOMEvent"!==o&&"getH5SnapshotResult"!==o&&c.a.info(p("h5_iframe"),JSON.stringify(t)),"syncCurrentPage"===o)r.syncCurrentPage(i);else if("syncCurrentStep"===o&&r.ppth5Info.loaded)r.syncCurrentStep(i);else if("syncCurrentPageStep"===o)r.syncCurrentPageStep(i);else if("syncCurrentElement"===o)r.syncCurrentElement(i);else if("syncDOMEvent"===o&&r.domEventListeners){var a=r.domEventListeners[i.type];a&&a(i)}else"syncCurrentError"===o?r.syncCurrentError(i):"onload"===o?r.initIframe():"didLoadFinish"===o?r.ppth5Info.loadRetryTimer&&clearTimeout(r.ppth5Info.loadRetryTimer):"getAllPageStepCount"===o?r.viewInfo.maxSteps=Object.freeze(JSON.parse(i)):"getH5SnapshotResult"===o&&r.getH5SnapshotResult(i)}},this.handleScrollEvent=function(e){r.zoomInfo.enableScroll&&!r.viewInfo.ticking&&(requestAnimationFrame((function(){r.ppth5Info.notify=!0;var t=r.zoomInfo,o=t.zoom,i=t.dragRectTop,n=t.dragRectBottom,a=e.target,s=Math.ceil(a.scrollTop),c=Math.ceil(a.scrollLeft),l=Math.ceil(s/o),u=Math.ceil(c/o),h=Math.ceil(s-r.viewInfo.percent*r.viewInfo.height*o);u!==r.viewInfo.scrollLeft?(r.viewInfo.scrollLeft=u,r.renderDom.scrollLeft=c,r.postSyncDragMessage(c,h)):l!==r.viewInfo.scrollTop&&(r.renderDom.scrollTop=s,1==o||s<i||s>n?(r.updateCurViewMax(s,o),r.onScrollCallback(c,s)):r.postSyncDragMessage(c,h),r.viewInfo.scrollTop=l),r.viewInfo.ticking=!1})),r.viewInfo.ticking=!0)},this.handleDragStart=function(e){r.zoomInfo.x=r.zoomInfo.y=0;var t=r.zoomInfo,o=t.isDrag,n=t.enableScroll,a=t.zoom;if(o){if(!n&&1===a)return;var s=e instanceof MouseEvent?e:e.changedTouches[0],c=s.clientX,l=s.clientY;if(r.renderMode===i.j.PDF){var u=r.docDom.getBoundingClientRect(),h=u.bottom;if(c>u.right-15||l>h-15)return;r.zoomInfo.tx=r.docDom.scrollLeft,r.zoomInfo.ty=r.docDom.scrollTop}(a>1||r.viewInfo.height>r.viewInfo.viewHeight)&&(r.zoomInfo.x=c,r.zoomInfo.y=l)}},this.handleDragMove=function(e,t){if(r.zoomInfo.isDrag&&r.zoomInfo.x){if(e instanceof MouseEvent&&!t&&e.buttons<1)return;"touchmove"===e.type&&e.preventDefault(),r.ppth5Info.notify=!0,r.renderMode===i.j.PDF?r.dragPDF(e,!!t):r.dragPPT(e,!!t)}},this.handleDragEnd=function(e){r.handleDragMove(e,!0)},this.serviceHandle=e,this.id=t,this.setSheet(o),this.serviceHandle.registerEventHandler(this.id,i.b.Load,(function(e){r.viewInfo.firstInfo.loadedFile=!0,r.tranlateFileAspec(e),Object.assign(r.fileInfo,e),r.checkRenderType(),r.loadCurrentSheet(!0)}))}return e.prototype.unload=function(){this.canvasArray.length=0,this.docDom=null,this.renderDom=null,this.iframeDom=null,this.loadingDom=null,this.canvasArray=null,this.fileInfo=null,this.vpageImgCache=null,this.vpageDrawImgCache=null,this.domEventListeners=null,this.loadFileListener=null,this.serviceHandle.removeEventHandler(this.id)},e.prototype.setParentWidthHeight=function(){var e=document.getElementById(this.parent);e.style.cssText+="position:relative;display:inherit!important;";var t=e.clientWidth,o=e.clientHeight;if(t<=0||o<=0)throw s.e.emit(s.b.Error,Object(i.q)(i.n.ZegoDocsViewErrorSizeInvalid)),new Error("无法获取容器宽高");this.viewInfo.parentWidth=t,this.viewInfo.parentHeight=o},e.prototype.setDocsViewDomOverflow=function(){var e=this.zoomInfo,t=e.zoom,o=e.enableScroll;if(t>1){var r=this.renderMode===i.j.PDF&&o?"auto":"hidden";this.docDom.style.overflowX=r,this.docDom.style.overflowY=r,this.renderDom&&(this.renderDom.style.overflowX=r,this.renderDom.style.overflowY=r)}else{var n=this.viewInfo,a=n.height,s=n.viewHeight;r=this.renderMode===i.j.PDF&&o&&a>s?" auto":"hidden";this.docDom.style.overflowX="hidden",this.docDom.style.overflowY=r,this.renderDom&&(this.renderDom.style.overflowX="hidden",this.renderDom.style.overflowY=r)}},e.prototype.setDocsViewDomTransform=function(e,t){var o=function(e,t,o){return"transform:translate("+e+"px,"+t+"px) scale("+o+");"},r=this.zoomInfo.zoom,i=t-(this.ppth5Info.page-1)*this.viewInfo.viewHeight*r,n=this.renderDom.firstChild;n.style.cssText+=o(e,t,r),(n=this.getDocViewChild()).style.cssText+=o(e,i,r)},e.prototype.getCanvasSplit=function(e){var t=this.viewInfo,o=t.canvasMaxPage,r=t.total,i=(e-1)/o|0;return{index:i,start:i*o+1,end:Math.min(i*o+o,r)}},e.prototype.getCanvasHeight=function(e){var t=this.viewInfo,o=t.sheet,r=t.total,n=t.height,a=t.viewHeight,s=t.canvasMaxPage,c=this.vpageAspecCache[o],l=c.h[e]||0;if(l)return l;if(this.getFileType()===i.o.ZegoDocsViewFileTypeIMG)return l=n,c.h[e]=l,l;if(this.renderMode===i.j.PPT)return l=a,c.h[e]=l,l;for(var u=e?c.p[e*s]+1:c.vs,h=c.p[Math.min((e+1)*s,r)],d=u;d<=h;d++)l+=c[d].h;return l=Math.round(l),c.h[e]=l,l},e.prototype.getImgErrorAspec=function(e,t,o){var r=128*i.i;return[(e-r)/2,o+=(t-r)/2,r,r]},e.prototype.clearImgError=function(e,t,o,r){e.clearRect.apply(e,this.getImgErrorAspec(t,o,r))},e.prototype.drawImgError=function(e,t,o,r,i){e.drawImage.apply(e,d([a],this.getImgErrorAspec(t,o,r))),c.a.info(p("draw_error"),JSON.stringify({p:this.ppth5Info.page,vpage:i}))},e.prototype.drawDividingLine=function(e,t,o,r,n,a,s){e.lineWidth=i.i,e.beginPath(),s?(e.moveTo(o,0),e.lineTo(o,a)):(e.moveTo(0,r),e.lineTo(n,r)),e.stroke()},e.prototype.getCurrentCDNHost=function(e){return/^https?:\/\//.test(e)&&e.indexOf(".zego.im")>0?e.substr(0,e.indexOf(".zego.im")+8):""},e.prototype.changeDecryptImageCDNHost=function(e,t,o,r){var i=this,n=this.getCurrentCDNHost(o),a=this.getCDNHostList();if(n&&a.length){t[n]=1;var s=(a.findIndex((function(e){return e===n}))+1)%a.length;if(!t[a[s]]){var l=o.replace(n,a[s]);return this.serviceHandle.decryptImage(l).then((function(t){return e.src=t})).catch((function(){return i.changeDecryptImageCDNHost(e,t,l,r)})),void c.a.info(p("draw_img_cdn"),JSON.stringify({src:l,action:"DecryptImage"}))}}var u={src:o,action:"DecryptImageLoadError",usedMap:t};this.postErrorMessage(u),c.a.info(p("draw_img_error"),JSON.stringify(u)),r()},e.prototype.changeImageCDNHost=function(e,t,o,r){var n=this.getCurrentCDNHost(e.src),a=this.getCDNHostList();if(n&&a.length){t[n]=1;var s=(a.findIndex((function(e){return e===n}))+1)%a.length;if(!t[a[s]])return e.src=e.src.replace(n,a[s])+(r?"?p="+r:""),c.a.info(p("draw_"+o+"_cdn"),JSON.stringify({src:e.src,page:r})),!0}var l={src:e.src,page:r,action:"ImageLoadError",code:i.n.ZegoDocsViewErrorNetworkTimeout};return this.postErrorMessage(l),c.a.warn(p("draw_"+o+"_error"),JSON.stringify(l)),!1},e.prototype.changeH5CDNHost=function(){var e=this,t=this.viewInfo.h5CDNUsedMap,o=this.iframeDom.src,r=this.getCurrentCDNHost(o),n=this.getCDNHostList();if(r&&n.length){t[r]=(t[r]||0)+1;var a=(n.findIndex((function(e){return e===r}))+1)%n.length,s=n[a];if(a>0&&!t[s])return this.iframeDom.src=o.replace(r,s),this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return e.changeH5CDNHost()}),i.h),void c.a.info(p("draw_h5_cdn"),JSON.stringify({src:this.iframeDom.src}));if(0==a&&1==t[s]){for(var l=1;l<n.length;l++)t[n[l]]=0;if(1==n.length){this.renderDom.removeChild(this.iframeDom);var u=this.vpageAspecCache[0][1],h=u.w,d=u.h;this.createIFrame(i.a.iframe+this.id,h,d),this.iframeDom.src=o,this.renderDom.appendChild(this.iframeDom)}else this.iframeDom.src=o.replace(r,s);return this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return e.changeH5CDNHost()}),i.h),void c.a.info(p("draw_h5_cdn_retry"),JSON.stringify({src:this.iframeDom.src}))}}this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer);var f={src:o,action:"H5LoadError",code:i.n.ZegoDocsViewErrorNetworkTimeout};this.postErrorMessage(f),c.a.warn(p("draw_h5_error"),JSON.stringify(f))},e.prototype.drawPPT=function(e,t,o,r,n){var a=this;return new Promise((function(s,l){t*=i.i,o*=i.i;var u={},h=n.getContext("2d"),d=new Image;d.setAttribute("crossOrigin","anonymous"),d.onload=a.delayDraw((function(){h.clearRect(0,0,t,o),h.fillStyle="white",h.fillRect(0,0,t,o),h.drawImage(d,0,0,t,o),c.a.info(p("draw_ppt"),JSON.stringify({p:a.ppth5Info.page,vpage:e,w:t,h:o})),s()})),d.onerror=function(r){a.changeImageCDNHost(d,u,"ppt",e)||(h.clearRect(0,0,t,o),a.drawImgError(h,t,o,0,e),l(r))},d.src=/^https?:\/\//.test(r)?r+"?p="+e:"data:image/png;base64,"+r}))},e.prototype.drawPDF=function(e,t,o,r,n,a,s){var c=this;if(this.vpageDrawImgCache[t])return Promise.resolve();var l=this.getCanvasSplit(e),u=l.index,h=l.start,d=l.end;if(e<h||e>d)return Promise.resolve();o*=i.i,r*=i.i,n*=i.i,a*=i.i;var p=this.vpageAspecCache[this.viewInfo.sheet],f=this.canvasArray[u].getContext("2d");return t-=p.vs-1,new Promise((function(i,l){var u={},h=new Image;h.setAttribute("crossOrigin","anonymous"),h.onload=c.delayDraw((function(){c.clearImgError(f,n,a,r),f.fillStyle="white",p.o?(f.fillRect(o,0,n,a),f.drawImage(h,o,0,n,a)):(f.fillRect(0,r,n,a),f.drawImage(h,0,r,n,a)),c.vpageDrawImgCache[t]=1,t>1&&t===p.p[e-1]+1&&c.drawDividingLine(f,e,o,r,n,a,p.o),i()})),h.onerror=function(i){c.changeImageCDNHost(h,u,"pdf",t)||(c.drawImgError(f,n,a,r,t),c.vpageDrawImgCache[t]=0,t>1&&t===p.p[e-1]+1&&c.drawDividingLine(f,e,o,r,n,a,p.o),l(i))},h.src=/^https?:\/\//.test(s)?s+"?p="+t:"data:image/png;base64,"+s}))},e.prototype.drawImg=function(e,t){var o=this;return new Promise((function(r,n){var a={},s=o.viewInfo,l=s.parentWidth,u=s.parentHeight,h=s.viewWidth,d=s.viewHeight,f=s.rate,g=o.vpageAspecCache[0][1],m=t.getContext("2d"),_=new Image;if(_.setAttribute("crossOrigin","anonymous"),_.onload=function(){var e=o.viewInfo.imgInfo,n=e.min_w,a=e.min_h,s=_.width,y=_.height,v=y/s,b=s<=n&&y<=a,w=s<=1440&&v<=2.2&&v>=614/1280;if(o.viewInfo.imgInfo.isSmall=b,o.viewInfo.imgInfo.isScale=w,o.viewInfo.imgInfo.width=s,o.viewInfo.imgInfo.height=y,o.clearImgError(m,h*i.i,d*i.i,0),b||w){var S=b?Math.min(n,l)/s:l/s,I=b?Math.min(a,u)/y:u/y,x=Math.min(S,I),E=(l-(T=s*x|0))/2,P=(u-(D=y*x|0))/2;Object.assign(g,{x:E,y:P,w:T,h:D}),o.viewInfo.height=g.h,o.updateDocsViewLayout(E,P,T,D),o.setCanvasWidthHeight(t,T,D),m.fillStyle="white",m.fillRect(0,0,t.width,t.height),m.drawImage(_,0,0,t.width,t.height),c.a.info(p("draw_img_scale"),JSON.stringify({width:s,height:y,draw_w:T,draw_h:D,rate:x}))}else{var T=s*f|0,D=y*f|0;P=Math.max((u-D)/2,0);Object.assign(g,{x:0,y:P,w:l,h:D}),o.viewInfo.height=g.h,o.updateDocsViewLayout(0,P,l,Math.min(u,D)),o.setCanvasWidthHeight(t,l,D),m.fillStyle="white",m.fillRect(0,0,t.width,t.height),m.drawImage(_,0,0,t.width,t.height),c.a.info(p("draw_img_full"),JSON.stringify({width:s,height:y,draw_w:T,draw_h:D,rate:f}))}var O=o.getFile();O.max_width=g.w,O.total_height=g.h,r()},/^https?:\/\//.test(e)){var y=function(){o.setCanvasWidthHeight(t,l,u),o.drawImgError(m,t.width,t.height,0,1),n()};o.serviceHandle.decryptImage(e).then((function(e){return _.src=e})).catch((function(){return o.changeDecryptImageCDNHost(_,a,e,y)}))}else _.onerror=function(){o.changeImageCDNHost(_,a,"img")||(o.setCanvasWidthHeight(t,l,u),o.drawImgError(m,t.width,t.height,0,1),n())},_.src="file://"+e}))},e.prototype.createDocsView=function(){var e=i.a.doc+this.id;if(!document.getElementById(e)){this.canvasArray=[],this.vpageDrawImgCache={};var t=document.createElement("div");t.id=i.a.render+this.id,this.renderDom=t,(t=document.createElement("div")).id=e,t.setAttribute("data-page",this.viewInfo.total+""),t.setAttribute("data-mode",this.renderMode+""),t.addEventListener(i.c.Whiteboard,this.handleWhiteboardEvent),this.docDom=t;var o=document.createElement("div");o.id=i.a.zoom+this.id,o.appendChild(this.renderDom),this.createImageLoading(o),o.appendChild(this.docDom),document.getElementById(this.parent).appendChild(o),t.addEventListener("scroll",this.handleScrollEvent),t.addEventListener("mousedown",this.handleDragStart),t.addEventListener("mousemove",this.handleDragMove),t.addEventListener("mouseup",this.handleDragEnd),t.addEventListener("mouseleave",this.handleDragEnd),t.addEventListener("touchstart",this.handleDragStart),t.addEventListener("touchmove",this.handleDragMove),t.addEventListener("touchend",this.handleDragEnd),t.addEventListener("touchcancel",this.handleDragEnd)}},e.prototype.createImageLoading=function(e){if(this.renderMode===i.j.PDF||this.renderMode===i.j.PPT){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.setAttribute("viewBox","0 0 1024 1024"),t.setAttribute("width","48"),t.setAttribute("height","48"),t.setAttribute("class","loading"),t.innerHTML='<path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="#cdcdcd"></path>',this.loadingDom=t,e.appendChild(this.loadingDom)}},e.prototype.showImageLoading=function(e){this.loadingDom.style.display=e?"block":"none"},e.prototype.hideOtherDocsView=function(){var e=document.getElementById(this.parent);if(e){var t=i.a.zoom+this.serviceHandle.getStore()[this.parent+"_activited"];Array.from(e.children||e.childNodes).forEach((function(e){e.style.display=e.id==t?"block":"none"}))}},e.prototype.updateDocsViewLayout=function(e,t,o,r){e|=0,t|=0,o|=0,r|=0,this.viewInfo.width=o,this.viewInfo.viewWidth=o,this.viewInfo.viewHeight=r;var i="width:"+o+"px;height:"+r+"px;";this.docDom.style.cssText+=i,this.renderDom.style.cssText+=i,this.docDom.parentElement.style.cssText=i+"left:"+e+"px;top:"+t+"px;",c.a.info(p("layout"),JSON.stringify({x:e,y:t,w:o,h:r,h0:this.viewInfo.height}))},e.prototype.setCanvasWidthHeight=function(e,t,o){e.style.cssText+="width:"+t+"px;height:"+o+"px;",e.width=t*i.i,e.height=o*i.i},e.prototype.createCanvas=function(){if(this.canvasArray.length)return!1;var e=document.createElement("canvas");e.setAttribute("data-i","0"),this.canvasArray.push(e);var t=this.viewInfo,o=t.parentWidth,r=t.parentHeight,n=t.height,a=t.sheet,s=t.canvasMaxPage,l=t.fillPPT,u=this.getFileType();if(u===i.o.ZegoDocsViewFileTypeIMG)return this.updateDocsViewLayout(0,0,o,r),!0;var h=this.vpageAspecCache[0][1],d=h.x,f=h.y,g=h.w,m=h.h;if(this.renderMode===i.j.PPT)this.setCanvasWidthHeight(e,g,m),this.updateDocsViewLayout(d,f,g,m);else{var _=l?g:o;this.setCanvasWidthHeight(e,_,this.getCanvasHeight(0));var y=this.getPageCount();if(y>s){y=Math.ceil(y/s);for(var v=0,b=this.vpageAspecCache[a],w=0;w<y;w++)v+=this.getCanvasHeight(w);if(v=n-v,Math.abs(v)>10&&y>2){var S=v>0?1:-1;v*=S;var I=Math.ceil(y>v?y/v:1);S=1==I?Math.round(S*v/y):S;var x="diff="+v+",step="+I+",count="+y+",equal="+this.getFile().isEqualAspec;c.a.info(p("pdf_diff_canvas"),x);for(w=1;w<=y;)b.h[w]+=S,w+=I}for(w=1;w<y;w++){var E=document.createElement("canvas");E.setAttribute("data-i",w+"");var P=l?g:o;this.setCanvasWidthHeight(E,P,this.getCanvasHeight(w)),this.canvasArray.push(E)}}if(u===i.o.ZegoDocsViewFileTypeELS&&this.getDocViewChild())this.resetVisibleSize();else if(l)this.updateDocsViewLayout(d,f,g,m);else{var T=Math.max((r-n)/2,0),D=Math.min(r,n);this.updateDocsViewLayout(0,T,o,D)}}return!0},e.prototype.renderCanvas=function(){var e=this.zoomInfo.zoom,t=this.viewInfo,o=t.width,r=t.height,n=this.getDocViewChild(),a=!!n,s="width:"+o+"px;height:"+r+"px;"+(e>1?"transform:scale("+e+");":"");if(n||(n=document.createElement("div"),this.docDom.appendChild(n)),n.style.cssText=s,a){if(this.getFileType()==i.o.ZegoDocsViewFileTypeELS){var c=document.createDocumentFragment();this.canvasArray.forEach((function(e){return c.appendChild(e)})),(n=this.renderDom.firstChild).style.cssText=s,n.innerHTML="",n.appendChild(c)}}else if(this.renderMode===i.j.PPT)this.renderDom.appendChild(this.canvasArray[0]);else{var l=document.createDocumentFragment();(n=document.createElement("div")).style.cssText=s,this.canvasArray.forEach((function(e){return n.appendChild(e)})),l.appendChild(n),this.renderDom.appendChild(l)}this.setDocsViewDomOverflow(),this.viewInfo.firstInfo.scrollTop>0&&this.handleScroll(this.viewInfo.firstInfo.scrollTop),this.viewInfo.firstInfo.scrollTop=-1},e.prototype.drawCanvas=function(e,t){var o=this,r=this.renderMode===i.j.PPT;r&&(e=e.filter((function(e){return e.virtual_page_number===o.ppth5Info.page}))),this.createDocsView(),this.showImageLoading(!0);for(var n=this.createCanvas(),a=this.canvasArray[0],s=0,l=0,u={id:this.id},h=[],d=this.vpageAspecCache[this.viewInfo.sheet],f=0;f<e.length;++f){var g=e[f],m=g.image_data,_=g.image_path,y=g.virtual_page_number;if(m)if(r){var v=d[y],b=v.w,w=v.h,S=this.drawPPT(y,b,w,m,a);h.push(S)}else{var I=d[y],x=I.p;b=I.w,w=I.h,S=this.drawPDF(x,y,l,s,b,w,m);h.push(S),s+=w,l+=b,u[y]=this.vpageDrawImgCache[y]}else if(_){S=this.drawImg(_,a);h.push(S)}}this.canvasArray.length>1&&c.a.info(p("draw_cache"),JSON.stringify(u));var E=function(){o.docDom&&n&&o.renderCanvas(),o.hideOtherDocsView(),t&&t(),o.showImageLoading(!1)};Promise.all(h).then(E,E)},e.prototype.drawHtml=function(e,t){var o=this;this.createDocsView();var r=i.a.iframe+this.id;if(!document.getElementById(r)){var n=this.vpageAspecCache[0][1],a=n.x,s=n.y,c=n.w,l=n.h,u=this.getFile().page_list[0].width;(this.isTouch||c-u>4)&&(this.ppth5Info.scale=Number((c/u).toFixed(4))),this.createIFrame(r,c,l),this.iframeDom.src=e[0].image_data+"#"+this.id,this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.ppth5Info.loadRetryTimer=window.setTimeout((function(){return o.changeH5CDNHost()}),i.h);var h="width:"+c+"px;height:"+this.viewInfo.height+"px;",d=document.createElement("div");d.style.cssText=h,this.docDom.appendChild(d),this.renderDom.style.zIndex="1",this.renderDom.appendChild(this.iframeDom),this.updateDocsViewLayout(a,s,c,l),this.setDocsViewDomOverflow(),window.addEventListener("message",this.handleIframeMessage)}this.hideOtherDocsView(),t&&t()},e.prototype.createIFrame=function(e,t,o){var r=document.createElement("iframe");r.id=e,r.allow="autoplay",r.width=t+"",r.height=o+"",this.iframeDom=r},e.prototype.execDraw=function(e,t){var o=this,r=e,n=e;if(this.renderMode===i.j.PDF){var a=this.getCanvasSplit(e);r=a.start,n=a.end}var s=this.getAllVirtualInPageRange(r-1,n-1);this.startGetImageByVirtualPageList(s,(function(e){o.renderMode===i.j.H5_PPT||o.renderMode===i.j.H5_CUSTOM?o.drawHtml(e,t):o.drawCanvas(e,t)}))},e.prototype.execScrollFileAndDraw=function(e,t,o){var r=this;if(this.canvasArray.length>1){var n=Date.now(),a=n-this.viewInfo.lastTime;if(this.viewInfo.lastTime=n,a<i.g)return this.viewInfo.lastTimeId&&clearTimeout(this.viewInfo.lastTimeId),void(this.viewInfo.lastTimeId=window.setTimeout((function(){o?o.forEach((function(e){return r.execDraw(e,t)})):r.execDraw(r.ppth5Info.page,t);var i={p:r.ppth5Info.page,page:e,zoom:r.zoomInfo.zoom,pages:o};c.a.info(p("draw_scrolled"),JSON.stringify(i))}),i.g))}this.execDraw(e,t)},e.prototype.onScrollCallback=function(e,t){var o=this.viewInfo,r=o.total,i=o.width,n=o.height,a=o.viewHeight,s=o.scrollTop;if(n>a){var c=this.zoomInfo.zoom,l=this.getPageByScrollTop(t),u=Number((t/n/c).toFixed(7));this.ppth5Info.page=l,this.triggerOnScrollEventListener(t,l,u);var h=e&&Number((e/i/c).toFixed(7));if(this.postPageChangeMessage(h),this.ppth5Info.page!==l){if(this.execScrollFileAndDraw(l),this.viewInfo.isParentScale)(d=document.getElementById(this.parent))&&this.drawPDFBlank(d.clientHeight,t/c)}else if(l>1&&l<r)if(this.viewInfo.isParentScale){var d;(d=document.getElementById(this.parent))&&this.drawPDFBlank(d.clientHeight,t/c)}else{var p=t>s*c?1:-1;this.getCanvasSplit(l).index!==this.getCanvasSplit(l+p).index&&this.execScrollFileAndDraw(l+p)}}else this.postSyncDragMessage(e,t)},e.prototype.getLoadFileModelForAPI=function(e){var t={parent:this.parent,fileID:e.file_id,fileName:e.file_list[0].file_name,fileType:e.file_type,fileUrls:e.file_urls,pageCount:e.file_list[0].page_count,width:e.width,height:e.height};return e.file_hash?t.fileHash=e.file_hash:t.seq=e.seq,e.file_type===i.o.ZegoDocsViewFileTypeELS&&(t.name=e.file_list[0].name,t.sheets=e.file_list.map((function(e){return e.file_name}))),t},e.prototype.getLoadFileModelForCallback=function(){var e,t=this.viewInfo,o=t.width,r=t.height,n=this.getFile(),a=this.getFileType(),s={parent:this.parent,fileID:this.fileInfo.file_id,fileName:n.file_name,fileType:a,pageCount:n.page_count,width:o,height:r};this.fileInfo.file_hash?s.fileHash=this.fileInfo.file_hash:s.seq=this.fileInfo.seq,this.parent&&(s.viewID=i.a.doc+this.id);var c=((e={fileID:s.fileID})[s.fileName]={width:o,height:r,pageCount:s.pageCount},e);return a===i.o.ZegoDocsViewFileTypeELS&&(s.name=n.name,s.sheets=this.fileInfo.file_list.map((function(e){return c[e.file_name]={width:e.max_width,height:e.total_height,pageCount:e.page_count},e.file_name}))),document.body.dispatchEvent(new CustomEvent("loadfile",{detail:c})),s},e.prototype.loadCurrentSheet=function(e,t){var o=this.getFile();if(o){var r=this.getFileType();this.viewInfo.width=o.max_width,this.viewInfo.height=o.total_height,this.viewInfo.total=o.page_count,this.viewInfo.rate=o.rate,r===i.o.ZegoDocsViewFileTypePPT?this.renderMode=i.j.PPT:r===i.o.ZegoDocsViewFileTypeDynamicPPTH5?this.renderMode=i.j.H5_PPT:r===i.o.ZegoDocsViewFileTypeCustomH5&&(this.renderMode=i.j.H5_CUSTOM),r===i.o.ZegoDocsViewFileTypeELS&&t&&(this.docDom.scrollTop=0,this.renderDom.scrollTop=0,this.canvasArray.length=0),this.execScrollFileAndDraw(this.ppth5Info.page,e?this.loadFileCallback:void 0)}},e.prototype.resetDocsViewLayout=function(e,t){var o=this.viewInfo,r=o.parentWidth,i=o.parentHeight,n=o.viewWidth,a=o.viewHeight;if(Math.abs(e-n)<5&&Math.abs(t-a)<5){var s=(r-e)/2,l=(i-t)/2;return this.docDom.parentElement.style.cssText+="left:"+s+"px;top:"+l+"px;",c.a.info(p("reloadViewLayou"),JSON.stringify({w0:n,h0:a,w:e,h:t})),!1}return!0},e.prototype.canReloadView=function(){var e=this.viewInfo.viewWidth;this.setParentWidthHeight();var t=this.viewInfo,o=t.parentWidth,r=t.parentHeight,n=t.height,a=t.viewHeight;if(this.renderMode===i.j.PPT||this.renderMode===i.j.H5_PPT||this.renderMode===i.j.H5_CUSTOM||this.viewInfo.fillPPT){var s=this.fileInfo.file_list[0].page_list[0],l=s.width;return((w=s.height*(b=o)/l)>r||Math.abs(w-r)<=1)&&(b=r*o/w|0,w=r),w|=0,this.resetDocsViewLayout(b,w)}if(this.getFileType()===i.o.ZegoDocsViewFileTypeIMG){var u=this.viewInfo.imgInfo,h=u.isSmall,d=u.isScale,f=(l=u.width,u.height),g=u.min_w,m=u.min_h;if(h||d){var _=h?Math.min(g,o)/l:o/l,y=h?Math.min(m,r)/f:r/f,v=Math.min(_,y),b=l*v|0,w=f*v|0;return this.resetDocsViewLayout(b,w)}}if(Math.abs(o-e)<5){var S=Math.max((r-n)/2,0),I=Math.min(r,n);return this.updateDocsViewLayout(0,S,o,I),c.a.info(p("reloadViewLayou"),JSON.stringify({w0:e,h0:a,w:o,h:I})),!1}return!0},e.prototype.checkPPT2PDF=function(e,t){if(e===i.o.ZegoDocsViewFileTypePDF){var o=t.page_list[0],r=o.width,n=o.height,a=Number((n/r).toFixed(3));if(a<=1&&a>=614/1280)return t.page_list.map((function(e){return Number((e.height/e.width).toFixed(3))})).every((function(e){return e===a}))}return!1},e.prototype.calculateFileAspec=function(e,t){var o=e.page_list[0],r=o.width,i=o.height,n=r,a=i,s=r,c=i;if(!t){n=0,a=0,s=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER;for(var l=0,u=e.page_list;l<u.length;l++){var h=u[l];h.width>n&&(n=h.width),h.width<s&&(s=h.width),h.height>a&&(a=h.height),h.height<c&&(c=h.height)}}return e.origin_max_width=n,e.max_width=n,e.min_width=s,e.max_height=a,e.min_height=c,e},e.prototype.checkRenderType=function(){8==this.fileInfo.expect_file_type&&this.postErrorMessage(i.n.ZegoDocsViewErrorUnsupportRenderType)},e.prototype.calculateFileAspecWithNoParent=function(e){for(var t=e.file_type,o=this.viewInfo.sheetName,r=function(r){var a=e.file_list[r];if(t===i.o.ZegoDocsViewFileTypeELS?(a.page_count=a.page_list.length,a.file_name===o&&(n.viewInfo.sheet=r)):a.page_count||(a.page_count=a.page_list.length),t===i.o.ZegoDocsViewFileTypePPT||t===i.o.ZegoDocsViewFileTypeDynamicPPTH5||t===i.o.ZegoDocsViewFileTypeCustomH5){var s=a.page_list[0],c=s.width,l=s.height;a.max_width=c,a.total_height=l*a.page_count}else{var u=n.checkPPT2PDF(t,a);if(n.viewInfo.fillPPT=u,u){var h=a.page_list[0];c=h.width,l=h.height;a.max_width=c,a.total_height=l*a.page_count}else{var d=n.calculateFileAspec(a,u),p=d.max_width,f=d.min_width,g=d.max_height,m=d.min_height,_=Math.abs(p-f)<5&&Math.abs(g-m)<5,y=0;_?y=a.page_count*g:a.page_list.forEach((function(e){y+=e.height*p/e.width})),a.max_width=p,a.total_height=Math.round(y)}}},n=this,a=0;a<e.file_list.length;++a)r(a)},e.prototype.tranlateFileAspec=function(e){this.setParentWidthHeight();for(var t=e.file_type,o=this.viewInfo,r=o.sheetName,n=o.parentWidth,a=o.parentHeight,s=function(o){var s={vs:1,p:{0:0},h:{}};c.vpageAspecCache[o]=s;var l=e.file_list[o];if(t===i.o.ZegoDocsViewFileTypeELS?(l.page_count=l.page_list.length,l.file_name===r&&(c.viewInfo.sheet=o)):l.page_count||(l.page_count=l.page_list.length),t===i.o.ZegoDocsViewFileTypePPT||t===i.o.ZegoDocsViewFileTypeDynamicPPTH5||t===i.o.ZegoDocsViewFileTypeCustomH5){var u=l.page_list[0],d=u.width;((_=u.height*(m=n)/d)>a||Math.abs(_-a)<=1)&&(m=a*n/_|0,_=a),l.max_width=m,l.total_height=_*l.page_count|0,l.rate=n/d;for(var p={p:1,x:(n-m)/2,y:(a-(_|=0))/2,w:m,h:_},f=1;f<=l.page_count;++f)s[f]=h(h({},p),{p:f}),s.p[f]=1}else{s.vs=l.page_list[0].virtual_page_list[0].virtual_page_number,s.o=!1;var g=c.checkPPT2PDF(t,l);if(c.viewInfo.fillPPT=g,g){var m,_,y=l.page_list[0];d=y.width;((_=y.height*(m=n)/d)>a||Math.abs(_-a)<=1)&&(m=a*n/_|0,_=a),l.isEqualAspec=!0,l.max_width=m,l.total_height=_*l.page_count|0,l.rate=n/d;var v={p:1,x:(n-m)/2,y:(a-(_|=0))/2,w:m,h:_},b=s.vs-1;l.page_list.forEach((function(e,t){b+=e.virtual_page_list.length,s.p[t+1]=b;for(var o=0,r=e.virtual_page_list;o<r.length;o++){var i=r[o];s[i.virtual_page_number]=h(h({},v),{p:t+1})}}))}else{var w=c.calculateFileAspec(l,g),S=w.max_width,I=w.min_width,x=w.max_height,E=w.min_height;l.rate=n/S;var P=Math.abs(S-I)<5&&Math.abs(x-E)<5,T=P?l.page_count*x*n/I:0,D=s.vs-1;l.page_list.forEach((function(e,t){var o=e.virtual_page_list.length;D+=o,s.p[t+1]=D;var r={p:t+1,x:0,y:0,w:n};P?r.h=Number((T/l.page_count/o).toFixed(4)):(r.h=Number((e.height*n/S/o).toFixed(4)),T+=e.height*n/S);for(var i=0,a=e.virtual_page_list;i<a.length;i++){var c=a[i];s[c.virtual_page_number]=r}})),l.isEqualAspec=P,l.max_width=n,l.total_height=Math.round(T)}var O=Math.floor(16e3*l.page_count/(i.i*l.total_height))||1;c.viewInfo.canvasMaxPage=O}},c=this,l=0;l<e.file_list.length;++l)s(l)},e.prototype.handleScroll=function(e,t,o){var r=this;if(this.docDom){var n=this.zoomInfo,a=n.zoom,s=n.enableScroll,c=this.viewInfo,l=c.height,u=c.total,h=this.ppth5Info.page,d=this.renderMode===i.j.PDF;if(d&&(s&&(this.viewInfo.ticking=!0,clearTimeout(this.viewInfo.scrollTimeId),this.viewInfo.scrollTimeId=window.setTimeout((function(){return r.viewInfo.ticking=!1}),34)),this.docDom.scrollTop=e,this.renderDom.scrollTop=e,this.viewInfo.scrollTop=Math.ceil(e/a)),this.renderMode===i.j.PDF||this.renderMode===i.j.PPT){if(this.viewInfo.isParentScale){this.execScrollFileAndDraw(h);var p=document.getElementById(this.parent);p&&this.drawPDFBlank(p.clientHeight,this.viewInfo.scrollTop)}else this.execScrollFileAndDraw(h);t="number"==typeof t?t:Number((d?e/l/a:(h-1)/u).toFixed(7)),this.triggerOnScrollEventListener(e,h,t),this.postPageChangeMessage(o)}}},e.prototype.getScrollTopByPage=function(e){var t=this.zoomInfo.zoom;if(this.viewInfo.total<=1||e<=1)return this.updateCurViewMax(0,t),0;if(this.renderMode!==i.j.PDF)return(e-1)*this.viewInfo.viewHeight*t+2;for(var o=this.vpageAspecCache[this.viewInfo.sheet],r=o.p[e-1],n=0,a=o.vs;a<=r;a++)n+=o[a].h;return n*=t,this.updateCurViewMax(n,t),n},e.prototype.getPageByScrollTop=function(e){var t=this.viewInfo,o=t.sheet,r=t.viewHeight,n=t.total,a=this.zoomInfo.zoom,s=this.getFileType(),c=Math.ceil(.5*r);if(s===i.o.ZegoDocsViewFileTypeIMG)return 1;if(this.renderMode!==i.j.PDF)return Math.round(e/a/r)+1;for(var l=this.vpageAspecCache[o],u=-c,h=l.vs;u<=e&&l[h];)u+=l[h].h*a,h++;return Math.min(n,Math.max(1,l[h-1].p))},e.prototype.getDocViewChild=function(){return this.docDom.firstChild},e.prototype.postWhiteboardMessage=function(e,t){if(this.wbId){var o={action:e,data:t};this.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:o}))}},e.prototype.postSyncDragMessage=function(e,t,o){if(o||this.renderMode===i.j.PDF||(this.zoomInfo.tx=e,this.zoomInfo.ty=t),this.wbId){var r={action:i.d.SyncDrag,x:e,y:t,scale:this.zoomInfo.zoom,notify:this.ppth5Info.notify};this.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:r}))}},e.prototype.postPageChangeMessage=function(e){if(this.wbId){var t={action:i.d.Page,page:this.ppth5Info.page,step:this.ppth5Info.step,pageCount:this.viewInfo.total,ofsX:e,percent:this.viewInfo.percent,notify:this.ppth5Info.notify};this.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:t})),this.renderMode!==i.j.PDF&&this.setDocsViewDomTransform(this.zoomInfo.tx,this.zoomInfo.ty)}},e.prototype.postStepChangeMessage=function(){var e={parent:this.parent,page:this.ppth5Info.page,step:this.ppth5Info.step,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name,notify:this.ppth5Info.notify};this.ppth5Info.scene&&(e.scene=this.ppth5Info.scene),s.e.emit(s.a.StepChange,e),this.triggerH5OnScrollEventListener(),this.postPageChangeMessage(),this.ppth5Info.scene=0},e.prototype.postErrorMessage=function(e){if(e="object"===l(e)?e:Object(i.q)(e),String(e.code).startsWith("3"))this.postWhiteboardMessage(i.d.WbError,e.code);else{var t=h({parent:this.parent,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name},e);s.e.emit(s.b.Error,t)}},e.prototype.triggerOnScrollEventListener=function(e,t,o){this.viewInfo.percent=o;var r=this.getFile(),i={parent:this.parent,percent:o,page:t,y:e,fileID:this.fileInfo.file_id,fileType:this.getFileType(),fileName:r.file_name,name:r.name||""};s.e.emit(s.a.Scroll,i)},e.prototype.triggerH5OnScrollEventListener=function(){var e=this.ppth5Info.page,t=(e-1)*this.viewInfo.viewHeight,o=Number(((e-1)/this.viewInfo.total).toFixed(7));this.triggerOnScrollEventListener(t,e,o)},e.prototype.postMessage2iframe=function(e,t){var o=this.iframeDom;o&&o.contentWindow&&o.contentWindow.postMessage({source:"zegodocsview",action:e,args:t||[]},"*")},e.prototype.handleWhiteboardPageEvent=function(e){var t=e.percent,o=e.step,r=e.notify,n=e.ofsX,a=e.ofsY;this.ppth5Info.notify=r;var s=0,l=1;r?(l=Math.min(Math.round(t*this.viewInfo.total)+1,this.viewInfo.total),s=this.getScrollTopByPage(l)):(s=Math.floor((t+a)*this.viewInfo.height*this.zoomInfo.zoom),l=this.getPageByScrollTop(s));var u={oldpage:this.ppth5Info.page,oldstep:this.ppth5Info.step,page:l,step:o};if(c.a.info(p(i.c.Whiteboard+"_page"),JSON.stringify(u)),this.renderMode===i.j.H5_PPT||this.renderMode===i.j.H5_CUSTOM)this.syncWhiteboardPPTH5Queue(l,o);else{this.ppth5Info.page=l;var h=r&&this.renderMode===i.j.PDF?n:void 0;this.handleScroll(s,t,h)}},e.prototype.handleWhiteboardDragToolEvent=function(e){var t=e.enable,o=this.zoomInfo.enableScroll;this.zoomInfo.enableScroll=t,this.zoomInfo.remoteScroll=e.remoteScroll,this.zoomInfo.isDrag=e.isDrag,o!==t&&(this.setDocsViewDomOverflow(),this.postMessage2iframe(i.f.SetCustomizedConfig,[i.e.PptOperationAuth,JSON.stringify({scroll:+t})]))},e.prototype.handleWhiteboardInitEvent=function(e){var t=this;this.wbId=e.data,setTimeout((function(){var e={action:i.d.DocsAspect,data:JSON.parse(JSON.stringify(t.vpageAspecCache[t.viewInfo.sheet]))};t.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:e}))}))},e.prototype.handleWhiteboardAnimationEvent=function(e){this.ppth5Info.notify=!1,e.notify?(this.viewInfo.firstInfo.page=this.ppth5Info.page,this.viewInfo.firstInfo.step=this.ppth5Info.step,this.viewInfo.firstInfo.h5Extra=e.data):this.playAnimation(e.data)},e.prototype.tryInitPageStep=function(e,t){var o=this;if(this.ppth5Info.goPage&&this.ppth5Info.goStep){if(this.ppth5Info.goTimer&&clearTimeout(this.ppth5Info.goTimer),this.ppth5Info.goPage===e&&this.ppth5Info.goStep===t)return void(this.ppth5Info.goPage=this.ppth5Info.goStep=0);this.ppth5Info.goTimer=window.setTimeout((function(){var r=o.ppth5Info,i=r.goPage,n=r.goStep;i&&n&&(o.execGotoPage(i,n,!1),c.a.info(p("h5_init_timeout"),JSON.stringify({id:o.id,page:e,step:t,h5:o.ppth5Info})))}),2e3)}},e.prototype.syncCurrentPageStep=function(e){var t=!1;if(!this.ppth5Info.loaded){c.a.info(p("h5_init_page"),JSON.stringify({id:this.id,h5:this.ppth5Info})),this.ppth5Info.loaded=!0;var o=this.ppth5Info,r=o.targetPage,i=o.targetStep;r&&i&&(this.ppth5Info.page=r,this.ppth5Info.step=i,this.gotoPage(!1),t=!0)}!t&&Object.assign(this.ppth5Info,e),this.ppth5Info.page===this.ppth5Info.targetPage&&this.ppth5Info.step===this.ppth5Info.targetStep&&(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0),t||(this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue())},e.prototype.syncCurrentPage=function(e){var t=this;if(this.ppth5Info.loaded){"boolean"==typeof e.notify&&(this.ppth5Info.notify=e.notify);var o=+e.page+1,r=(e.step||0)+1;this.ppth5Info.pageChangeTimer&&clearTimeout(this.ppth5Info.pageChangeTimer),this.ppth5Info.pageChangeTimer=window.setTimeout((function(e){t.ppth5Info.page=e[0],t.ppth5Info.step=e[1],t.ppth5Info.scene=e[2],t.postStepChangeMessage()}),2e3,[o,r,e.scene]),this.tryInitPageStep(o,r)}else{c.a.info(p("h5_init_page"),JSON.stringify({id:this.id,h5:this.ppth5Info})),this.ppth5Info.loaded=!0;var i=this.ppth5Info,n=i.targetPage,a=i.targetStep;n>1?(this.ppth5Info.goPage=n,this.ppth5Info.goStep=a,this.ppth5Info.page=n,this.gotoPage(!1)):a<=1&&(this.postStepChangeMessage(),this.firstNeedPlayAnimation())}},e.prototype.syncCurrentStep=function(e){this.ppth5Info.pageChangeTimer&&clearTimeout(this.ppth5Info.pageChangeTimer);var t=e.page+1,o=+e.step+1,r=this.ppth5Info.lastStep;if(this.ppth5Info.lastStep=t===this.ppth5Info.page?o:-1,0!=o&&(0!=r||1!=o)&&("boolean"==typeof e.notify&&(this.ppth5Info.notify=e.notify),c.a.info(p("h5_step"),JSON.stringify({id:this.id,page:t,step:o,notify:e.notify,h5:this.ppth5Info})),o===this.ppth5Info.step&&t===this.ppth5Info.page||(this.ppth5Info.page=t,this.ppth5Info.step=o,this.tryInitPageStep(t,o),this.ppth5Info.targetPage||this.ppth5Info.targetStep||(c.a.info(p("h5_queue_done"),JSON.stringify({id:this.id,page:t,step:o,action:"step"})),this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue(),this.execMultiDocsQueue())),this.ppth5Info.page===this.ppth5Info.targetPage)){var i="h5step:"+t+","+o+"-"+this.ppth5Info.page+","+this.ppth5Info.targetStep+")";this.ppth5Info.targetStep<o?this.previousStep(this.ppth5Info.notify,i):this.ppth5Info.targetStep>o?this.nextStep(this.ppth5Info.notify,i):(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0,this.ppth5Info.goPage=0,this.ppth5Info.goStep=0,c.a.info(p("h5_queue_done"),JSON.stringify({id:this.id,page:t,step:o,action:"page"})),this.firstNeedPlayAnimation(),this.postStepChangeMessage(),this.execSyncPPTH5Queue(),this.execMultiDocsQueue())}},e.prototype.syncCurrentElement=function(e){var t={parent:this.parent,page:this.ppth5Info.page,step:this.ppth5Info.step,fileID:this.getFileID(),fileType:this.getFileType(),fileName:this.getFile().file_name,data:e};if(s.e.emit(s.a.PlayAnimation,t),this.wbId){var o={action:i.d.Animation,data:e,notify:!0};this.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:o}))}},e.prototype.syncCurrentError=function(e){e.code===i.n.ZegoDocsViewErrorNetworkTimeout?(this.ppth5Info.loadRetryTimer&&clearTimeout(this.ppth5Info.loadRetryTimer),this.changeH5CDNHost()):this.postErrorMessage(e)},e.prototype.initIframe=function(){var e=this;this.postMessage2iframe(i.f.InitPlatform,[4]),this.postMessage2iframe(i.f.GetAllPageStepCount),this.renderMode===i.j.H5_PPT&&this.postMessage2iframe(i.f.SetCustomizedConfig,[i.e.Scale,this.ppth5Info.scale]),this.domEventListeners&&this.postMessage2iframe(i.f.SetCustomizedConfig,[i.e.SyncDOMEvent]),this.postMessage2iframe(i.f.SetCustomizedConfig,[i.e.PptOperationAuth,JSON.stringify({scroll:+this.zoomInfo.enableScroll})]);var t=this.serviceHandle.getStore();[i.m.UnloadVideoSrc,i.m.PptStepMode,i.m.DisableH5ImageDrag].forEach((function(o){return e.postMessage2iframe(i.f.SetCustomizedConfig,[o,t[o]])}))},e.prototype.dragPDF=function(e,t){var o=this.zoomInfo,r=o.tx,n=o.ty,a=o.zoom,s=o.enableScroll,c=o.remoteScroll,l=o.dragRectTop,u=o.dragRectBottom,h=this.viewInfo,d=h.width,p=h.height,f=h.viewHeight,g=h.percent,m=e instanceof MouseEvent?e:e.changedTouches[0],_=m.clientX,y=m.clientY,v=r+this.zoomInfo.x-_,b=n+this.zoomInfo.y-y,w=d*(a-1);w=Math.floor(w),v<0?v=0:v>w&&(v=w);var S=s?0:Math.ceil(g*p*a);if(w=s?p*a-f:S+(a-1)*f,w=Math.floor(w),b<S?b=S:b>w&&(b=w),s&&(this.viewInfo.scrollLeft=Math.ceil(v/a),this.viewInfo.scrollTop=Math.ceil(b/a)),this.viewInfo.ticking=!0,this.docDom.scrollTo(v,b),this.renderDom.scrollTo(v,b),t)if(this.zoomInfo.x=0,this.zoomInfo.y=0,this.viewInfo.ticking=!1,a>1&&b>=l&&b<=u)this.postSyncDragMessage(v,b-g*p*a);else{if(!s)return!c&&this.postWhiteboardMessage(i.d.WbError,i.p.ZegoWhiteboardViewErrorNoAuthScroll),this.viewInfo.ticking=!0,this.docDom.scrollTo(r,n),this.renderDom.scrollTo(r,n),void(this.viewInfo.ticking=!1);this.updateCurViewMax(b,a),this.onScrollCallback(v,b)}},e.prototype.dragPPT=function(e,t){var o=this.zoomInfo,r=o.tx,i=o.ty,n=o.zoom,a=this.viewInfo,s=a.viewWidth,c=a.viewHeight,l=e instanceof MouseEvent?e:e.changedTouches[0],u=l.clientX,h=l.clientY,d=r+u-this.zoomInfo.x,p=i+h-this.zoomInfo.y,f=s*(1-n);d>0?d=0:d<f&&(d=f),f=c*(1-n),p>0?p=0:p<f&&(p=f),t&&(this.zoomInfo.x=0,this.zoomInfo.y=0,this.postSyncDragMessage(d,p,!t)),this.setDocsViewDomTransform(d,p)},e.prototype.handleSetScaleFactor=function(e,t,o,r){var n=this;this.ppth5Info.notify=r,this.zoomInfo.zoom=e;var a=this.viewInfo,s=a.viewWidth,c=a.viewHeight,l=a.width,u=a.height,h=a.scrollTop,d=a.percent;if(this.setDocsViewDomOverflow(),this.renderMode===i.j.PDF){var p=this.getDocViewChild();p.style.cssText+="transform:scale("+e+");",(p=this.renderDom.firstChild).style.cssText+="transform:scale("+e+");";var f=t*l*e,g=(o+d)*u*e;r&&(f=s*(e-1)*.5,g=(g=h)*e+c*(e-1)*.5),f=Math.round(f),g=Math.round(g),this.viewInfo.ticking=!0,this.docDom.scrollTo(f,g),this.renderDom.scrollTo(f,g),this.postSyncDragMessage(f,g-d*u*e),this.updateCurViewMax(Math.ceil(d*u*e),e),clearTimeout(this.viewInfo.scrollTimeId),this.viewInfo.scrollTimeId=window.setTimeout((function(){n.viewInfo.ticking=!1}),34)}else{f=Math.round(r?s*(1-e)*.5:-t*l*e),g=Math.round(r?c*(1-e)*.5:-o*u*e);this.setDocsViewDomTransform(f,g),this.postSyncDragMessage(f,g)}this.wbId||(this.zoomInfo.isDrag=e>1,this.docDom.style.cursor=e>1?"move":"auto"),this.renderMode!==i.j.PDF&&this.renderMode!==i.j.PPT||this.loadCurrentSheet()},e.prototype.updateCurViewMax=function(e,t){t>1?(this.zoomInfo.dragRectTop=e-2,this.zoomInfo.dragRectBottom=Math.ceil(e+this.viewInfo.viewHeight*(t-1))):(this.zoomInfo.dragRectTop=0,this.zoomInfo.dragRectBottom=0)},e.prototype.drawPDFBlank=function(e,t){var o=this;if(!(this.canvasArray.length<2)){for(var r=t,i=0,n=0;n<r;)n+=this.getCanvasHeight(i++);var a=i>0?i-1:0;for(r+=e,i=0,n=0;n<r;){var s=this.getCanvasHeight(i++);if(n+=s,0===s)break}for(var l=this.viewInfo,u=l.canvasMaxPage,h=l.isParentScale,d=i>0?i-1:0,f=[];a<=d;a++)f.push(a*u+1);if(h)this.execScrollFileAndDraw(f[0],void 0,f);else{f.forEach((function(e){return o.execDraw(e,void 0)}));var g={id:this.id,pages:f};c.a.info(p("draw_scrolled"),JSON.stringify(g))}}},e.prototype.firstNeedPlayAnimation=function(){var e=this.viewInfo.firstInfo,t=e.page,o=e.step,r=e.h5Extra;t&&r&&t==this.ppth5Info.page&&o==this.ppth5Info.step&&(this.playAnimation(r),this.viewInfo.firstInfo.page=0,this.viewInfo.firstInfo.step=0)},e.prototype.getAllVirtualInPageRange=function(e,t){var o=this.getFile().page_list,r=[];e<0&&(e=0),t>=o.length&&(t=o.length-1);for(var i=e;i<=t;++i)for(var n=0,a=o[i].virtual_page_list;n<a.length;n++){var s=a[n];r.push(s.virtual_page_number)}return r},e.prototype.startGetImageByVirtualPageList=function(e,t){for(var o=[],r=this.vpageImgCache[this.viewInfo.sheet],i=0;i<e.length;){var n=r&&r[e[i]];n?(o.push(n),e.splice(i,1)):i++}this.getImageByVirtualPageList(o,e,t)},e.prototype.sortVirtualPageListRule=function(e,t){return e.virtual_page_number-t.virtual_page_number},e.prototype.getImageByVirtualPageList=function(e,t,o){var r=this;if(t.length<=0)return e.sort(this.sortVirtualPageListRule),void o(e);this.serviceHandle.registerEventHandler(this.id,i.b.GetPageImage,(function(i){for(var n=i.virtual_page_number,a=0;a<t.length;++a)if(t[a]==n){t.splice(a,1);break}var s=r.vpageImgCache[r.viewInfo.sheet]||{};s[n]=i,r.vpageImgCache[r.viewInfo.sheet]=s;var c=!1;for(a=0;a<e.length;++a)e[a].virtual_page_number==n&&(e[a]=i,c=!0);c||e.push(i),r.getImageByVirtualPageList(e,t,o)}));var n=this.viewInfo,a=n.sheet,s=n.rate;this.serviceHandle.getPageImage(this.id,{sheet:a,rate:s*i.i*1.5,virtual_page_number:t[0],virtual_start:this.vpageAspecCache[a].vs-1,res:this.fileInfo})},e.prototype.getFile=function(){return this.fileInfo.file_list[this.viewInfo.sheet]},e.prototype.execGotoPage=function(e,t,o){e!==this.ppth5Info.page?(this.ppth5Info.page=e,this.ppth5Info.step=this.renderMode===i.j.H5_CUSTOM?t:1,this.gotoPage(o)):t<this.ppth5Info.step?this.previousStep(this.ppth5Info.notify,"execGotoPage("+e+","+t+","+this.ppth5Info.step+")"):t>this.ppth5Info.step?this.nextStep(this.ppth5Info.notify,"execGotoPage("+e+","+t+","+this.ppth5Info.step+")"):t!==this.ppth5Info.step||1===this.ppth5Info.targetPage&&1===this.ppth5Info.targetStep||(this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0)},e.prototype.runGotoPageQueue=function(e,t,o,r){var n=this;this.ppth5Info.targetPage=e,this.ppth5Info.targetStep=t,this.execGotoPage(e,t,o);var a=this.ppth5Info.loaded?i.l:i.k;this.ppth5Info.syncTimer&&clearTimeout(this.ppth5Info.syncTimer),this.ppth5Info.syncTimer=window.setTimeout((function(){return n[r](!0)}),a)},e.prototype.syncWhiteboardPPTH5Queue=function(e,t){var o=this,r=this.ppth5Info,i=r.page,n=r.step,a=r.loaded,s=r.notify;if(e!=i||t!=n){var l={page:e,step:t,notify:s,loaded:a,id:this.id},u=this.serviceHandle.getStore();u.syncPPTH5Queue=u.syncPPTH5Queue&&u.syncPPTH5Queue.length?u.syncPPTH5Queue.filter((function(e){return e.id===o.id})):[];var h=u.syncPPTH5Queue[u.syncPPTH5Queue.length-1];if(!h||h.page===e&&h.step===t)h||(u.syncPPTH5Queue=[l],c.a.info(p("h5_wbqueue_init"),JSON.stringify({task:l})),this.runGotoPageQueue(l.page,l.step,l.notify,"execSyncPPTH5Queue"));else{var d={page:i,step:n,task:l,queue:u.syncPPTH5Queue.map((function(e){return e.page+"-"+e.step})).join()};u.syncPPTH5Queue.push(l),c.a.info(p("h5_wbqueue_push"),JSON.stringify(d))}}},e.prototype.execSyncPPTH5Queue=function(e){var t=this.serviceHandle.getStore(),o=t.syncPPTH5Queue,r=e&&t.syncQueueRuning;if(r&&this.execQueueTimeout(o),t.syncQueueRuning=!1,o&&o.length){t.syncQueueRuning=!0;var i=o.shift();r&&!o[0]||(i=o[0]),i&&(c.a.info(p("h5_wbqueue_pop"),JSON.stringify({timeout:e,task:i,store:t})),this.runGotoPageQueue(i.page,i.step,i.notify,"execSyncPPTH5Queue"))}},e.prototype.execMultiDocsQueue=function(e){var t=this,o=this.serviceHandle.getStore(),r=o.multiDocsQueue;if(e&&o.syncQueueRuning&&this.execQueueTimeout(r),o.syncQueueRuning=!1,r&&r.length){o.syncQueueRuning=!0;var i=[],n=r.shift();i.push(n);for(var a=0;a<r.length;a++){var s=r[a];s&&s.id!==n.id&&s.p!==n.p&&(n=s,i.push(n),r.splice(a,1))}c.a.info(p("h5_mdqueue_pop"),JSON.stringify({timeout:e,tasks:i,store:o})),i.forEach((function(e){t.serviceHandle.execViewFuction("runGotoPageQueue",e.id,d(e.args,["execMultiDocsQueue"]))}))}},e.prototype.execQueueTimeout=function(e){if(e&&e.length){for(var t=[],o=0;o<e.length-1;o++)e[o]&&!e[o].loaded&&(t.push(e[o]),e.splice(o,1));var r={id:this.id,loaded:this.ppth5Info.loaded,queue:e,tasks:t};c.a.info(p("h5_queue_timeout"),JSON.stringify(r))}this.ppth5Info.loaded=!0,this.ppth5Info.targetPage=0,this.ppth5Info.targetStep=0,this.postStepChangeMessage(),this.postMessage2iframe(i.f.HideLoadingStyle)},e.prototype.gotoPage=function(e){this.ppth5Info.notify=e,this.renderMode===i.j.H5_PPT?(c.a.info(p("gotoPage"),JSON.stringify({id:this.id,notify:e,page:this.ppth5Info.page})),this.postMessage2iframe(i.f.GotoPage,[this.ppth5Info.page-1,e])):this.renderMode===i.j.H5_CUSTOM?this.postMessage2iframe(i.f.GotoPage,[this.ppth5Info.page,this.ppth5Info.step,e]):this.handleScroll(this.getScrollTopByPage(this.ppth5Info.page))},e.prototype.checkParamsPage=function(e){var t=this.getPageCount();return e<1?e=1:e>t?e=t:e|=0,e},e.prototype.delayDraw=function(e){var t=this;return function(o){t.isAppleDevice()?setTimeout(e.bind(t,o)):e(o)}},e.prototype.isAppleDevice=function(){var e=navigator.userAgent,t=e.includes("Mac"),o=!e.includes("Chrome")&&e.includes("Safari");return this.isTouch?t:o},e.prototype.getCDNHostList=function(){return this.fileInfo.cdn_hosts||[]},e.prototype.docsSnapshot=function(e){var t=e.ctx,o=e.snapshotId;this.renderMode===i.j.H5_PPT||this.renderMode===i.j.H5_CUSTOM?this.postMessage2iframe(i.f.SnapshotForH5,[o]):this.snapshotForStatic(t)},e.prototype.getH5SnapshotResult=function(e){var t=h(h({},e),{action:i.d.H5Snapshot});this.docDom.dispatchEvent(new CustomEvent(i.c.Docs,{detail:t}))},e.prototype.snapshotForStatic=function(e){var t=this.viewInfo,o=t.width,r=t.height,n=t.viewWidth,a=t.viewHeight,s=t.scrollTop,c=t.sheet,l=Math.min(o,n),u=Math.min(r,a),h=this.getCanvasInds(a,s);e.clearRect(0,0,n,a);for(var d=0,p=0;p<=h[0];)d+=this.getCanvasHeight(p++);var f=(s-d+this.vpageAspecCache[c].h[h[0]])*i.i,g=l*i.i,m=u*i.i;if(e.drawImage(this.canvasArray[h[0]],0,f,g,m,0,0,l,u),2===h.length){var _=d-s,y=(u-_)*i.i;e.drawImage(this.canvasArray[h[1]],0,0,g,y,0,_,l,u-_)}},e.prototype.getCanvasInds=function(e,t){if(this.canvasArray.length<2)return[0];for(var o=0,r=0;r<t;)r+=this.getCanvasHeight(o++);var i=o>0?o-1:0,n=t+e;for(o=0,r=0;r<n;){var a=this.getCanvasHeight(o++);if(r+=a,0===a)break}var s=o>0?o-1:0;return i===s?[i]:[i,s]},e.prototype.setSheet=function(e){"string"==typeof e?this.viewInfo.sheetName=e:"number"==typeof e&&(this.viewInfo.sheet=e)},e.prototype.resetVisibleSize=function(){if(this.docDom&&this.renderMode===i.j.PDF){var e=document.getElementById(this.parent),t=e.clientWidth,o=e.clientHeight,r="width:"+t+"px;height:"+o+"px;",n=this.docDom.parentElement;this.docDom.style.cssText+=r+"overflow: hidden auto;",this.renderDom.style.cssText+=r+"overflow: hidden auto;",n.style.cssText+=r+"top:"+Math.max(0,(o-this.viewInfo.height)/2)+"px;",this.drawPDFBlank(o,this.viewInfo.scrollTop),this.viewInfo.isParentScale=!0}},e.prototype.addDOMEventListener=function(e,t){this.domEventListeners||(this.domEventListeners={}),this.domEventListeners[e]=t},e.prototype.enableDOMEvent=function(e){var t=this.docDom&&this.docDom.parentElement;t&&this.renderMode===i.j.H5_PPT&&(t.style.cssText+="pointer-events:"+(e?"initial":"none")+";")},e.prototype.setParent=function(e){this.parent=e,this.ppth5Info.p=e},e.prototype.mergeRemoteFileInfo=function(e){this.parent?this.tranlateFileAspec(e):this.calculateFileAspecWithNoParent(e);var t=e.file_list[this.viewInfo.sheet],o=t.max_width,r=t.total_height;return this.viewInfo.width=o,this.viewInfo.height=r,Object.assign(this.fileInfo,e),Promise.resolve(this.getLoadFileModelForCallback())},e.prototype.getExcelSheetNameList=function(){return this.fileInfo.file_type===i.o.ZegoDocsViewFileTypeELS?this.fileInfo.file_list.map((function(e){return e.file_name})):[]},e.prototype.loadFile=function(e,t,o){var r,i=this;return this.loadFileListener=o,this.serviceHandle.setStore(((r={})[this.parent+"_activited"]=this.id,r)),this.viewInfo.ticking=!1,this.fileInfo.file_id===e&&this.viewInfo.firstInfo.loadedFile?(setTimeout((function(){i.hideOtherDocsView(),i.loadFileCallback()})),Promise.resolve(this.getLoadFileModelForAPI(this.fileInfo))):(c.a.setExtraConfig({fileID:e}),this.serviceHandle.load(this.id,{fileID:e,authKey:t},!0).then((function(e){return i.getLoadFileModelForAPI(e)})))},e.prototype.unloadFile=function(){var e,t,o=null===(e=this.docDom)||void 0===e?void 0:e.parentElement;o&&(null===(t=o.parentElement)||void 0===t||t.removeChild(o),c.a.info(p("unloadFile"))),this.serviceHandle.execViewFuction("unloadFile",this.id,[])},e.prototype.getContentSize=function(){return{width:this.viewInfo.width,height:this.viewInfo.height}},e.prototype.getVisibleSize=function(){return{width:this.viewInfo.viewWidth,height:this.viewInfo.viewHeight}},e.prototype.getFileID=function(){return this.fileInfo.file_id},e.prototype.getFileType=function(){return this.fileInfo.file_type},e.prototype.getCurrentPage=function(){return this.ppth5Info.page},e.prototype.getCurrentStep=function(){return this.ppth5Info.step},e.prototype.getPageCount=function(){return this.viewInfo.total},e.prototype.getPPTNotes=function(e){return e=this.checkParamsPage(e),this.fileInfo.notes[e-1]||""},e.prototype.getThumbnailUrlList=function(){return this.fileInfo.thumbnails},e.prototype.getVerticalPercent=function(){return this.viewInfo.percent},e.prototype.scrollTo=function(e,t){this.ppth5Info.notify=void 0===t||!!t;var o=Math.ceil(this.viewInfo.height*e*this.zoomInfo.zoom),r=this.getPageByScrollTop(o);this.ppth5Info.page=r,this.handleScroll(o),-1!==this.viewInfo.firstInfo.scrollTop&&(this.viewInfo.firstInfo.scrollTop=o),c.a.info(p("scrollTo"),JSON.stringify({id:this.id,params:e,page:r,top:o}))},e.prototype.flipPage=function(e,t,o){e=this.checkParamsPage(e),t="number"==typeof t?Math.max(1,0|t):1,o=void 0===o||!!o,this.ppth5Info.notify=o;var r=this.renderMode===i.j.H5_PPT||this.renderMode===i.j.H5_CUSTOM,n=r&&this.viewInfo.maxSteps[e-1];if(n&&t>n)c.a.info(p("flipPage"),JSON.stringify({actionMsg:"error step",params:{page:e,step:t,maxStep:n}}));else if(r&&this.wbId)this.syncWhiteboardPPTH5Queue(e,t);else{r&&(this.ppth5Info.targetPage=e,this.ppth5Info.targetStep=t);var a=this.ppth5Info.loaded,s=this.serviceHandle.getStore();if(r&&(a||!a&&(e>1||t>1))){if(s.multiDocsQueue&&s.syncQueueRuning){for(var l=!0,u=this.id,h=s.multiDocsQueue.length-1;h>=0;h--){var d=s.multiDocsQueue[h];if(d.id==u&&d.args.page==e&&d.args.step==t){l=!1;break}}if(l){var f={p:this.parent,id:this.id,loaded:a,args:[e,t,o]};return s.multiDocsQueue.push(f),void c.a.info(p("h5_mdqueue_push"),JSON.stringify({task:f}))}}s.syncQueueRuning=!0,s.multiDocsQueue=s.multiDocsQueue||[]}s.multiDocsQueue?this.runGotoPageQueue(e,t,o,"execMultiDocsQueue"):(-1!==this.viewInfo.firstInfo.scrollTop&&(this.viewInfo.firstInfo.scrollTop=this.getScrollTopByPage(e)),this.execGotoPage(e,t,o)),c.a.info(p("flipPage"),JSON.stringify({id:this.id,params:{page:e,step:t}}))}},e.prototype.previousStep=function(e,t){var o=this.ppth5Info,r=o.page,n=o.step;1===r&&1===n||(e=void 0===e||!!e,this.zoomInfo.enableScroll||!e||1!==n?(this.ppth5Info.notify=e,this.postMessage2iframe(i.f.PreviousStep,[e]),e&&this.postWhiteboardMessage(i.d.Step,""),c.a.info(p("previousStep"),JSON.stringify({id:this.id,notify:e,action:t}))):!this.zoomInfo.remoteScroll&&this.postWhiteboardMessage(i.d.WbError,i.p.ZegoWhiteboardViewErrorNoAuthScroll))},e.prototype.nextStep=function(e,t){var o=this.ppth5Info,r=o.page,n=o.step;e=void 0===e||!!e,this.zoomInfo.enableScroll||!e||n!==this.viewInfo.maxSteps[r-1]?(this.ppth5Info.notify=e,this.postMessage2iframe(i.f.NextStep,[e]),e&&this.postWhiteboardMessage(i.d.Step,""),c.a.info(p("nextStep"),JSON.stringify({id:this.id,notify:e,action:t}))):!this.zoomInfo.remoteScroll&&this.postWhiteboardMessage(i.d.WbError,i.p.ZegoWhiteboardViewErrorNoAuthScroll)},e.prototype.switchSheet=function(e){this.getFileType()===i.o.ZegoDocsViewFileTypeELS&&this.viewInfo.sheet!==e&&e>=0&&e<this.fileInfo.file_list.length&&(this.viewInfo.sheet=e,this.vpageDrawImgCache={},this.loadCurrentSheet(!1,!0),c.a.info(p("switchSheet"),JSON.stringify({id:this.id,params:e})))},e.prototype.setScaleFactor=function(e,t,o){var r=e;(!r||r<1)&&(r=1),this.zoomInfo.zoom!==r&&(this.renderMode!==i.j.H5_PPT&&this.renderMode!==i.j.H5_CUSTOM||this.iframeDom)&&(this.renderMode!==i.j.PDF&&this.renderMode!==i.j.PPT||this.canvasArray[0])&&(c.a.info(p("setScaleFactor"),JSON.stringify({zoom:r,x:t,y:o})),this.handleSetScaleFactor(r,t||0,o||0,!0))},e.prototype.getScaleFactor=function(){return{scaleFactor:this.zoomInfo.zoom,scaleOffsetX:0,scaleOffsetY:0}},e.prototype.playAnimation=function(e){this.postMessage2iframe(i.f.TriggerElementsClick,[e]),c.a.info(p("playAnimation"),e)},e.prototype.stopPlay=function(e){this.postMessage2iframe(i.f.StopPlay,[e]),c.a.info(p("stopPlay"),e)},e.prototype.setVolume=function(e){this.postMessage2iframe(i.f.SetVolume,[e]),c.a.info(p("setVolume"),e)},e.prototype.reloadView=function(){if(this.canReloadView()){var e=this.viewInfo.scrollLeft/this.viewInfo.width,t=this.viewInfo.scrollTop/this.viewInfo.height,o=this.zoomInfo.tx/this.viewInfo.viewWidth,r=this.zoomInfo.ty/this.viewInfo.viewHeight;this.tranlateFileAspec(this.fileInfo);var n=this.getFile();if(this.viewInfo.width=n.max_width,this.viewInfo.height=n.total_height,this.viewInfo.total=n.page_count,this.viewInfo.rate=n.rate,this.ppth5Info.notify=!1,this.renderMode===i.j.H5_PPT||this.renderMode===i.j.H5_CUSTOM){var a=this.vpageAspecCache[0][1],s=a.x,c=a.y,l=a.w,u=a.h;this.iframeDom.width=l,this.iframeDom.height=u,this.postSyncDragMessage(o*l|0,r*u|0),this.updateDocsViewLayout(s,c,l,u),this.setDocsViewDomOverflow(),this.getDocViewChild().style.cssText+="width:"+this.viewInfo.width+"px;height:"+this.viewInfo.height+"px;",this.reloadViewCallback();var h=this.getFile().page_list[0].width;this.ppth5Info.scale=Number((l/h).toFixed(4)),this.renderMode===i.j.H5_PPT&&this.postMessage2iframe(i.f.SetCustomizedConfig,[i.e.Scale,this.ppth5Info.scale])}else{if(this.canvasArray=[],this.vpageDrawImgCache={},this.docDom.innerHTML="",this.renderDom.innerHTML="",this.renderMode===i.j.PDF)this.viewInfo.ticking=!0,this.viewInfo.scrollLeft=e*this.viewInfo.width,this.viewInfo.scrollTop=t*this.viewInfo.height;else{var d=this.vpageAspecCache[0][1];l=d.w,u=d.h;this.postSyncDragMessage(o*l|0,r*u|0)}this.execScrollFileAndDraw(this.ppth5Info.page,this.reloadViewCallback)}}},e}(),g=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=function(){return(m=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=c.b.bind(null,"docs.s."),y=function(e){function t(t){var o=e.call(this)||this;return o.listeners={},o.docsviews={},o.zegoDocs=new r.a(t),o}return g(t,e),t.prototype.setTestEnv=function(e){this.zegoDocs.setTestEnv(e),c.a.info(_("setTestEnv"),JSON.stringify({params:e}))},t.prototype.setConfig=function(e,t){var o,r;return r=["set_alpha_env","dynamicPPT_HD","dynamicPPT_AutomaticPage",i.m.Domain,i.m.ThumbnailMode].includes(e)?this.zegoDocs.setConfig(e,t):this.setStore(((o={})[e]=t,o)),c.a.info(_("setConfig"),JSON.stringify({params:{key:e,value:t},result:r})),r},t.prototype.getConfig=function(e){var t;return t=e===i.m.Domain||e===i.m.ThumbnailMode?this.zegoDocs.getConfig(e):this.getStore()[e],c.a.info(_("getConfig"),JSON.stringify({params:e,result:t})),t},t.prototype.execViewFuction=function(e,t,o){if("unloadFile"===e)return this.docsviews[t]=null,void delete this.docsviews[t];var r=this.docsviews[t];r&&r[e].apply(r,o)},t.prototype.registerEventHandler=function(e,t,o){this.listeners[t]=this.listeners[t]||{},this.listeners[t][e]=o},t.prototype.removeEventHandler=function(e){for(var t in this.listeners)this.listeners[t][e]=null},t.prototype.load=function(e,t,o){var r=this;return this.zegoDocs.loadFile(t.fileID).then(this.resolveLoad.bind(this,e,t.fileID,o)).catch((function(){return r.zegoDocs.loadFile(t.fileID).then(r.resolveLoad.bind(r,e,t.fileID,o)).catch((function(e){throw e=e||{code:i.n.ZegoDocsViewErrorNetworkTimeout,message:"网络超时"},s.e.emit(s.b.Error,m(m({},t),e)),c.a.error(_("load_error"),JSON.stringify({params:t,result:e})),e}))}))},t.prototype.cacheFile=function(e){return this.zegoDocs.cacheFile(e)},t.prototype.getPageImage=function(e,t){var o=this.listeners[i.b.GetPageImage][e];o&&o(this.transImage(t))},t.prototype.decryptImage=function(e){return this.zegoDocs.decryptImage(e)},t.prototype.on=function(e,t){return s.e.on(e,t)},t.prototype.off=function(e,t){return s.e.off(e,t)},t.prototype.getVersion=function(){return this.zegoDocs.getVersion()},t.prototype.createView=function(e,t){var o={ID:e=(e||Date.now()+Math.floor(1e3*Math.random()))+"",sheet:t},r=_("createView"),n=this.docsviews[e];if(n)return c.a.info(r,JSON.stringify({actionMsg:"find in cache",params:o})),n;var a=document.getElementById(i.a.wb+e);if(a=a&&a.parentElement){var s=a.id.replace(i.a.doc,"");if(n=this.docsviews[s])return this.docsviews[e]=n,o.wbID=s,c.a.info(r,JSON.stringify({actionMsg:"find in cache on whiteboard",params:o})),n}return n=new f(this,e,t||0),this.docsviews[e]=n,c.a.info(r,JSON.stringify({params:o})),n},t.prototype.setDocsViewParent=function(e,t){e.setParent(t)},t.prototype.getDocsViewFileInfo=function(e,t){return this.zegoDocs.loadFile(t).then((function(t){return e.mergeRemoteFileInfo(t)}))},t.prototype.uploadFile=function(e,t,o,r){var i=r&&"function"==typeof r?r:function(e){s.e.emit(s.a.Upload,Object.assign(e,o))};return this.zegoDocs.uploadFile({file:e,renderType:t,onProgress:i})},t.prototype.cancelUploadFile=function(e){return this.zegoDocs.cancelUploadFile({fileHash:e})},t.prototype.uploadH5File=function(e,t,o){return this.zegoDocs.uploadH5File(e,t,o)},t.prototype.resolveLoad=function(e,t,o,r){if(o&&r.file_type!==i.o.ZegoDocsViewFileTypeAudio&&r.file_type!==i.o.ZegoDocsViewFileTypeVideo){var n=this.listeners[i.b.Load][e];n&&setTimeout((function(){return n(r)}))}var a=m(m({},r),{preload:void 0,notes:void 0,thumbnails:void 0,file_list:void 0,file_urls:void 0});return c.a.info(_("loadFile"),JSON.stringify({params:t,result:a})),r},t.prototype.transImage=function(e){var t=e.virtual_page_number,o=e.virtual_start,r=e.res,n=e.sheet,a=r.file_type===i.o.ZegoDocsViewFileTypeIMG,s=r.file_list[n].page_list[t-o-1].src;return{error_code:0,file_id:r.file_id,image_data:a?"":s,image_path:a?s:"",virtual_page_number:t}},t}(n)},,function(e,t,o){var r=o(264),i=o(287);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};r(i,n);e.exports=i.locals||{}},function(e,t,o){(t=o(265)(!1)).push([e.i,"[id^='zego-docsview-zoom'],\n[id^='zego-docsview-render'],\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-con'],\n[id^='zego-docsview-con'] > div {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n/* [id^='zego-docsview-con'], */\n[id^='zego-docsview-con'] > div,\n[id^='zego-docsview-render'] > div,\n[id^='zego-docsview-iframe'] {\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-render'] {\n  text-align: initial;\n}\n\n[id^='zego-docsview-render'] iframe {\n  border: none;\n}\n[id^='zego-docsview-render'] canvas {\n  display: block;\n  transform-origin: 0 0;\n}\n\n[id^='zego-docsview-zoom'] svg.loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -24px;\n  display: none;\n  animation: loading 2s infinite linear;\n  -webkit-animation: loading 2s infinite linear;\n  -moz-animation: loading 2s infinite linear;\n  -o-animation: loading 2s infinite linear;\n}\n@keyframes loading {\n  from {\n    transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes loading {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@-moz-keyframes loading {\n  from {\n    -moz-transform: rotate(0deg);\n  }\n  to {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-o-keyframes loading {\n  from {\n    -o-transform: rotate(0deg);\n  }\n  to {\n    -o-transform: rotate(360deg);\n  }\n}\n",""]),e.exports=t},function(e,t,o){"use strict";var r=o(8),i=o(20).every,n=o(57),a=o(30),s=n("every"),c=a("every");r({target:"Array",proto:!0,forced:!s||!c},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){var r=o(18),i=o(76),n=o(28),a=o(89).f,s=function(e){return function(t){for(var o,s=n(t),c=i(s),l=c.length,u=0,h=[];l>u;)o=c[u++],r&&!a.call(s,o)||h.push(e?[o,s[o]]:s[o]);return h}};e.exports={entries:s(!0),values:s(!1)}},function(e,t,o){var r=o(264),i=o(291);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};r(i,n);e.exports=i.locals||{}},function(e,t,o){(t=o(265)(!1)).push([e.i,"#zego-whiteboard-input {\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    padding: 0px;\n    border: none;\n}\n\n[id^='zego-whiteboard-zoom'] {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n[id^='zego-whiteboard-con'],\n[id^='zego-whiteboard-con'] > div {\n    transform-origin: 0 0;\n}\n\n[id^='zego-whiteboard'] {\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    position: absolute;\n}\n[id^='zego-whiteboard'] *,\n[id^='zego-whiteboard'] ::after,\n[id^='zego-whiteboard'] ::before {\n    box-sizing: border-box !important;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bg-container'] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-bgImage-container'] {\n    flex: 1;\n}\n[id^='zego-whiteboard'] [id^='zego-graphics-container'] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    overflow: hidden;\n}\n\n[id^='zego-graphics-container'] [id^='zego-laser'] {\n    transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n    -moz-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Firefox 4 */\n    -webkit-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Safari 和 Chrome */\n    -o-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear; /* Opera */\n    -ms-transition: transform 0.2s linear, left 0.2s linear, right 0.2s linear;\n    margin-left: -8px;\n    margin-top: -8px;\n}\n\n/* [id^='zego-graphics-container'] path.transition {\n    transition: transform 0.2s linear;\n    -moz-transition: transform 0.2s linear;\n    -webkit-transition: transform 0.2s linear;\n    -o-transition: transform 0.2s linear;\n    -ms-transition: transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] line.transition {\n    transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -moz-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -o-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n    -ms-transition: x1 0.2s linear, y1 0.2s linear, x2 0.2s linear, y2 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] rect.transition {\n    transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -moz-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -webkit-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -o-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n    -ms-transition: x 0.2s linear, y 0.2s linear, width 0.2s linear, height 0.2s linear, transform 0.2s linear;\n}\n\n[id^='zego-graphics-container'] ellipse.transition {\n    transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -moz-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -webkit-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -o-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n    -ms-transition: cx 0.2s linear, cy 0.2s linear, rx 0.2s linear, ry 0.2s linear, transform 0.2s linear;\n} */\n\n[id^='zego-whiteboard'] [id^='zego-box-container'] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    overflow: hidden;\n}\n[id^='zego-whiteboard'] svg {\n    transform-origin: 0px 0px 0px;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n    left: 0;\n    right: 0;\n    pointer-events: none;\n}\n[id^='zego-whiteboard'] textarea {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    border: none;\n    outline: none;\n    background: transparent;\n    resize: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    padding: 0 6px;\n    line-height: 1.5;\n    font-family: inherit;\n    font-size: inherit;\n    box-sizing: border-box;\n    color: inherit;\n    font-style: inherit;\n    font-weight: inherit;\n    white-space: pre-wrap;\n    word-break: break-all;\n    overflow: hidden;\n}\n[id^='zego-whiteboard'] pre {\n    display: block;\n    visibility: hidden;\n    margin: 0px 0px;\n    font-family: inherit;\n    font-size: inherit;\n    color: inherit;\n    font-style: inherit;\n    font-weight: inherit;\n    line-height: 1.5;\n    padding: 0 6px;\n}\n[id^='zego-graphics-box'] {\n    position: absolute;\n}\n[id^='zego-textarea'] {\n    position: absolute;\n    border: 1px dashed transparent;\n    overflow: hidden;\n}\n[id^='zego-other-container'] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    cursor: none;\n    overflow: hidden;\n}\n[id^='zego-other-container'] div {\n    box-sizing: border-box;\n}\n[id^='zego-laser'] {\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    background: rgba(255, 78, 51, 1);\n    border: 2px solid rgba(255, 144, 128, 1);\n    box-shadow: 0px 0px 8px 0px rgba(254, 94, 70, 0.7);\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n[id^='zego-box-container'] .img-editor-box,\n[id^='zego-box-container'] .graphics-box {\n    display: none;\n    position: absolute;\n    overflow: visible;\n    margin: 0;\n    padding: 0;\n    z-index: 2;\n    border: 2px solid #b0b3b8;\n    box-shadow: 0 0 1px 0 #ffffff, inset 0 0 1px 0 #ffffff;\n    transform-origin: 0px 0px 0px;\n    transition: border 0.3s;\n    -moz-transition: border 0.3s; /* Firefox 4 */\n    -webkit-transition: border 0.3s; /* Safari 和 Chrome */\n    -o-transition: border 0.3s; /* Opera */\n}\n\n[id^='zego-box-container'] .operation-point-desktop {\n    width: 12px;\n    height: 12px;\n    position: absolute;\n    background-color: #ffffff;\n    border: 2px solid #b0b3b8;\n}\n[id^='zego-box-container'] .operation-point-desktop:active,\n[id^='zego-box-container'] .operation-point-desktop:hover {\n    transform: scale(1.5);\n    border: 2px solid #eb98c7;\n}\n\n[id^='zego-box-container'] .operation-point-desktop.left-top {\n    left: -6px;\n    top: -6px;\n    cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-top {\n    right: -6px;\n    top: -6px;\n    cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left-bottom {\n    left: -6px;\n    bottom: -6px;\n    cursor: nesw-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right-bottom {\n    right: -6px;\n    bottom: -6px;\n    cursor: nwse-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.top {\n    top: -6px;\n    cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.right {\n    right: -6px;\n    cursor: ew-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.bottom {\n    bottom: -6px;\n    cursor: ns-resize;\n}\n[id^='zego-box-container'] .operation-point-desktop.left {\n    left: -6px;\n    cursor: ew-resize;\n}\n",""]),e.exports=t},function(e,t,o){var r=o(8),i=o(111),n=o(90);r({target:"Array",proto:!0},{fill:i}),n("fill")},function(e,t,o){var r=o(8),i=o(294);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,o){var r=o(9),i=o(218).trim,n=o(219),a=r.parseFloat,s=1/a(n+"-0")!=-1/0;e.exports=s?function(e){var t=i(String(e)),o=a(t);return 0===o&&"-"==t.charAt(0)?-0:o}:a},function(e,t,o){var r=o(8),i=o(296);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,o){var r=o(9),i=o(218).trim,n=o(219),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(n+"08")||22!==a(n+"0x16");e.exports=c?function(e,t){var o=i(String(e));return a(o,t>>>0||(s.test(o)?16:10))}:a},function(e,t,o){"use strict";var r=o(8),i=o(217).start;r({target:"String",proto:!0,forced:o(298)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,o){var r=o(82);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(e,t,o){var r=o(29),i=/"/g;e.exports=function(e,t,o,n){var a=String(r(e)),s="<"+t;return""!==o&&(s+=" "+o+'="'+String(n).replace(i,"&quot;")+'"'),s+">"+a+"</"+t+">"}},function(e,t,o){var r=o(10);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t,o){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=o(279),r.BufferWriter=o(310),r.Reader=o(280),r.BufferReader=o(311),r.util=o(146),r.rpc=o(312),r.roots=o(314),r.configure=i,i()},function(e,t,o){"use strict";e.exports=function(e,t){var o=new Array(arguments.length-1),r=0,i=2,n=!0;for(;i<arguments.length;)o[r++]=arguments[i++];return new Promise((function(i,a){o[r]=function(e){if(n)if(n=!1,e)a(e);else{for(var t=new Array(arguments.length-1),o=0;o<t.length;)t[o++]=arguments[o];i.apply(null,t)}};try{e.apply(t||null,o)}catch(e){n&&(n=!1,a(e))}}))}},function(e,t,o){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var o=0;--t%4>1&&"="===e.charAt(t);)++o;return Math.ceil(3*e.length)/4-o};for(var i=new Array(64),n=new Array(123),a=0;a<64;)n[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,o){for(var r,n=null,a=[],s=0,c=0;t<o;){var l=e[t++];switch(c){case 0:a[s++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:a[s++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:a[s++]=i[r|l>>6],a[s++]=i[63&l],c=0}s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[r],a[s++]=61,1===c&&(a[s++]=61)),n?(s&&n.push(String.fromCharCode.apply(String,a.slice(0,s))),n.join("")):String.fromCharCode.apply(String,a.slice(0,s))};r.decode=function(e,t,o){for(var r,i=o,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=n[c]))throw Error("invalid encoding");switch(a){case 0:r=c,a=1;break;case 1:t[o++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[o++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[o++]=(3&r)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return o-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,o){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,o){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:o||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var o=this._listeners[e],r=0;r<o.length;)o[r].fn===t?o.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var o=[],r=1;r<arguments.length;)o.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,o)}return this}},function(e,t,o){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),r=128===o[3];function i(e,r,i){t[0]=e,r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3]}function n(e,r,i){t[0]=e,r[i]=o[3],r[i+1]=o[2],r[i+2]=o[1],r[i+3]=o[0]}function a(e,r){return o[0]=e[r],o[1]=e[r+1],o[2]=e[r+2],o[3]=e[r+3],t[0]}function s(e,r){return o[3]=e[r],o[2]=e[r+1],o[1]=e[r+2],o[0]=e[r+3],t[0]}e.writeFloatLE=r?i:n,e.writeFloatBE=r?n:i,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,o,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,o,r);else if(isNaN(t))e(2143289344,o,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,o,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,o,r);else{var n=Math.floor(Math.log(t)/Math.LN2);e((i<<31|n+127<<23|8388607&Math.round(t*Math.pow(2,-n)*8388608))>>>0,o,r)}}function o(e,t,o){var r=e(t,o),i=2*(r>>31)+1,n=r>>>23&255,a=8388607&r;return 255===n?a?NaN:i*(1/0):0===n?1401298464324817e-60*i*a:i*Math.pow(2,n-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,a),e.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),r=128===o[7];function i(e,r,i){t[0]=e,r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],r[i+4]=o[4],r[i+5]=o[5],r[i+6]=o[6],r[i+7]=o[7]}function n(e,r,i){t[0]=e,r[i]=o[7],r[i+1]=o[6],r[i+2]=o[5],r[i+3]=o[4],r[i+4]=o[3],r[i+5]=o[2],r[i+6]=o[1],r[i+7]=o[0]}function a(e,r){return o[0]=e[r],o[1]=e[r+1],o[2]=e[r+2],o[3]=e[r+3],o[4]=e[r+4],o[5]=e[r+5],o[6]=e[r+6],o[7]=e[r+7],t[0]}function s(e,r){return o[7]=e[r],o[6]=e[r+1],o[5]=e[r+2],o[4]=e[r+3],o[3]=e[r+4],o[2]=e[r+5],o[1]=e[r+6],o[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:n,e.writeDoubleBE=r?n:i,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,o,r,i,n){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,i,n+t),e(1/r>0?0:2147483648,i,n+o);else if(isNaN(r))e(0,i,n+t),e(2146959360,i,n+o);else if(r>17976931348623157e292)e(0,i,n+t),e((a<<31|2146435072)>>>0,i,n+o);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,n+t),e((a<<31|s/4294967296)>>>0,i,n+o);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,n+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,n+o)}}}function o(e,t,o,r,i){var n=e(r,i+t),a=e(r,i+o),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+n;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,a,0,4),e.readDoubleBE=o.bind(null,s,4,0)}(),e}function i(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}function n(e,t,o){t[o]=e>>>24,t[o+1]=e>>>16&255,t[o+2]=e>>>8&255,t[o+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,o){"use strict";var r=t;r.length=function(e){for(var t=0,o=0,r=0;r<e.length;++r)(o=e.charCodeAt(r))<128?t+=1:o<2048?t+=2:55296==(64512&o)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,o){if(o-t<1)return"";for(var r,i=null,n=[],a=0;t<o;)(r=e[t++])<128?n[a++]=r:r>191&&r<224?n[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[a++]=55296+(r>>10),n[a++]=56320+(1023&r)):n[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,n)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,n.slice(0,a))),i.join("")):String.fromCharCode.apply(String,n.slice(0,a))},r.write=function(e,t,o){for(var r,i,n=o,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[o++]=r:r<2048?(t[o++]=r>>6|192,t[o++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[o++]=r>>18|240,t[o++]=r>>12&63|128,t[o++]=r>>6&63|128,t[o++]=63&r|128):(t[o++]=r>>12|224,t[o++]=r>>6&63|128,t[o++]=63&r|128);return o-n}},function(e,t,o){"use strict";e.exports=function(e,t,o){var r=o||8192,i=r>>>1,n=null,a=r;return function(o){if(o<1||o>i)return e(o);a+o>r&&(n=e(r),a=0);var s=t.call(n,a,a+=o);return 7&a&&(a=1+(7|a)),s}}},function(e,t,o){"use strict";e.exports=i;var r=o(146);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=i.zero=new i(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return n;var t=e<0;t&&(e=-e);var o=e>>>0,r=(e-o)/4294967296>>>0;return t&&(r=~r>>>0,o=~o>>>0,++o>4294967295&&(o=0,++r>4294967295&&(r=0))),new i(o,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):n},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,o=~this.hi>>>0;return t||(o=o+1>>>0),-(t+4294967296*o)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?n:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:o<128?9:10}},function(e,t,o){"use strict";e.exports=n;var r=o(279);(n.prototype=Object.create(r.prototype)).constructor=n;var i=o(146);function n(){r.call(this)}function a(e,t,o){e.length<40?i.utf8.write(e,t,o):t.utf8Write?t.utf8Write(e,o):t.write(e,o)}n._configure=function(){n.alloc=i._Buffer_allocUnsafe,n.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,o){t.set(e,o)}:function(e,t,o){if(e.copy)e.copy(t,o,0,e.length);else for(var r=0;r<e.length;)t[o++]=e[r++]}},n.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},n._configure()},function(e,t,o){"use strict";e.exports=n;var r=o(280);(n.prototype=Object.create(r.prototype)).constructor=n;var i=o(146);function n(e){r.call(this,e)}n._configure=function(){i.Buffer&&(n.prototype._slice=i.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()},function(e,t,o){"use strict";t.Service=o(313)},function(e,t,o){"use strict";e.exports=i;var r=o(146);function i(e,t,o){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(o)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,o,i,n,a){if(!n)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,o,i,n);if(s.rpcImpl)try{return s.rpcImpl(t,o[s.requestDelimited?"encodeDelimited":"encode"](n).finish(),(function(e,o){if(e)return s.emit("error",e,t),a(e);if(null!==o){if(!(o instanceof i))try{o=i[s.responseDelimited?"decodeDelimited":"decode"](o)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",o,t),a(null,o)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,o){"use strict";e.exports={}},function(e,t){var o={utf8:{stringToBytes:function(e){return o.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(o.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t},bytesToString:function(e){for(var t=[],o=0;o<e.length;o++)t.push(String.fromCharCode(e[o]));return t.join("")}}};e.exports=o},,function(e,t,o){var r,i,n,a,s;r=o(325),i=o(315).utf8,n=o(326),a=o(315).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):i.stringToBytes(e):n(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var o=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,h=-1732584194,d=271733878,p=0;p<o.length;p++)o[p]=16711935&(o[p]<<8|o[p]>>>24)|4278255360&(o[p]<<24|o[p]>>>8);o[c>>>5]|=128<<c%32,o[14+(c+64>>>9<<4)]=c;var f=s._ff,g=s._gg,m=s._hh,_=s._ii;for(p=0;p<o.length;p+=16){var y=l,v=u,b=h,w=d;l=f(l,u,h,d,o[p+0],7,-680876936),d=f(d,l,u,h,o[p+1],12,-389564586),h=f(h,d,l,u,o[p+2],17,606105819),u=f(u,h,d,l,o[p+3],22,-1044525330),l=f(l,u,h,d,o[p+4],7,-176418897),d=f(d,l,u,h,o[p+5],12,1200080426),h=f(h,d,l,u,o[p+6],17,-1473231341),u=f(u,h,d,l,o[p+7],22,-45705983),l=f(l,u,h,d,o[p+8],7,1770035416),d=f(d,l,u,h,o[p+9],12,-1958414417),h=f(h,d,l,u,o[p+10],17,-42063),u=f(u,h,d,l,o[p+11],22,-1990404162),l=f(l,u,h,d,o[p+12],7,1804603682),d=f(d,l,u,h,o[p+13],12,-40341101),h=f(h,d,l,u,o[p+14],17,-1502002290),l=g(l,u=f(u,h,d,l,o[p+15],22,1236535329),h,d,o[p+1],5,-165796510),d=g(d,l,u,h,o[p+6],9,-1069501632),h=g(h,d,l,u,o[p+11],14,643717713),u=g(u,h,d,l,o[p+0],20,-373897302),l=g(l,u,h,d,o[p+5],5,-701558691),d=g(d,l,u,h,o[p+10],9,38016083),h=g(h,d,l,u,o[p+15],14,-660478335),u=g(u,h,d,l,o[p+4],20,-405537848),l=g(l,u,h,d,o[p+9],5,568446438),d=g(d,l,u,h,o[p+14],9,-1019803690),h=g(h,d,l,u,o[p+3],14,-187363961),u=g(u,h,d,l,o[p+8],20,1163531501),l=g(l,u,h,d,o[p+13],5,-1444681467),d=g(d,l,u,h,o[p+2],9,-51403784),h=g(h,d,l,u,o[p+7],14,1735328473),l=m(l,u=g(u,h,d,l,o[p+12],20,-1926607734),h,d,o[p+5],4,-378558),d=m(d,l,u,h,o[p+8],11,-2022574463),h=m(h,d,l,u,o[p+11],16,1839030562),u=m(u,h,d,l,o[p+14],23,-35309556),l=m(l,u,h,d,o[p+1],4,-1530992060),d=m(d,l,u,h,o[p+4],11,1272893353),h=m(h,d,l,u,o[p+7],16,-155497632),u=m(u,h,d,l,o[p+10],23,-1094730640),l=m(l,u,h,d,o[p+13],4,681279174),d=m(d,l,u,h,o[p+0],11,-358537222),h=m(h,d,l,u,o[p+3],16,-722521979),u=m(u,h,d,l,o[p+6],23,76029189),l=m(l,u,h,d,o[p+9],4,-640364487),d=m(d,l,u,h,o[p+12],11,-421815835),h=m(h,d,l,u,o[p+15],16,530742520),l=_(l,u=m(u,h,d,l,o[p+2],23,-995338651),h,d,o[p+0],6,-198630844),d=_(d,l,u,h,o[p+7],10,1126891415),h=_(h,d,l,u,o[p+14],15,-1416354905),u=_(u,h,d,l,o[p+5],21,-57434055),l=_(l,u,h,d,o[p+12],6,1700485571),d=_(d,l,u,h,o[p+3],10,-1894986606),h=_(h,d,l,u,o[p+10],15,-1051523),u=_(u,h,d,l,o[p+1],21,-2054922799),l=_(l,u,h,d,o[p+8],6,1873313359),d=_(d,l,u,h,o[p+15],10,-30611744),h=_(h,d,l,u,o[p+6],15,-1560198380),u=_(u,h,d,l,o[p+13],21,1309151649),l=_(l,u,h,d,o[p+4],6,-145523070),d=_(d,l,u,h,o[p+11],10,-1120210379),h=_(h,d,l,u,o[p+2],15,718787259),u=_(u,h,d,l,o[p+9],21,-343485551),l=l+y>>>0,u=u+v>>>0,h=h+b>>>0,d=d+w>>>0}return r.endian([l,u,h,d])})._ff=function(e,t,o,r,i,n,a){var s=e+(t&o|~t&r)+(i>>>0)+a;return(s<<n|s>>>32-n)+t},s._gg=function(e,t,o,r,i,n,a){var s=e+(t&r|o&~r)+(i>>>0)+a;return(s<<n|s>>>32-n)+t},s._hh=function(e,t,o,r,i,n,a){var s=e+(t^o^r)+(i>>>0)+a;return(s<<n|s>>>32-n)+t},s._ii=function(e,t,o,r,i,n,a){var s=e+(o^(t|~r))+(i>>>0)+a;return(s<<n|s>>>32-n)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var o=r.wordsToBytes(s(e,t));return t&&t.asBytes?o:t&&t.asString?a.bytesToString(o):r.bytesToHex(o)}},,,,,,,function(e,t,o){"use strict";var r=o(8),i=o(136).left,n=o(57),a=o(30),s=o(109),c=o(113),l=n("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!u||!c&&s>79&&s<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t){var o,r;o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],o=0,r=0;o<e.length;o++,r+=8)t[r>>>5]|=e[o]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],o=0;o<32*e.length;o+=8)t.push(e[o>>>5]>>>24-o%32&255);return t},bytesToHex:function(e){for(var t=[],o=0;o<e.length;o++)t.push((e[o]>>>4).toString(16)),t.push((15&e[o]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substr(o,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],n=0;n<4;n++)8*r+6*n<=8*e.length?t.push(o.charAt(i>>>6*(3-n)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((o.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|o.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(o(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,o){"use strict";o.r(t),o.d(t,"ZegoSuperBoardManager",(function(){return O}));o(65),o(69),o(70),o(204),o(114),o(38),o(31),o(73),o(324),o(168),o(93),o(59),o(86),o(35),o(177),o(32),o(40),o(45),o(221),o(39),o(60);var r,i,n=o(283),a=o(282),s=o(284),c=o(2),l=o(5),u=o(34),h=o(1),d=(o(48),o(317)),p=o.n(d),f=o(6);!function(e){e[e.ZegoSuperboardSuccess=0]="ZegoSuperboardSuccess",e[e.ZegoSuperboardErrorInternal=5000001]="ZegoSuperboardErrorInternal",e[e.ZegoSuperboardisUseBoardView=5000002]="ZegoSuperboardisUseBoardView"}(r||(r={}));var g=((i={})[r.ZegoSuperboardErrorInternal]="内部错误",i[r.ZegoSuperboardisUseBoardView]="未开启使用 SuperBoardView",i),m={1:r.ZegoSuperboardisUseBoardView},_=function(){return p()("webSuperboard"+((new Date).getTime()+Math.round(1e3*Math.random())))},y=function(){return Object(f.d)()},v=function(e,t,o){return{code:e=m[e]||e,message:t=g[e]&&o&&t?t:g[e]||t||g[r.ZegoSuperboardErrorInternal]}},b=function(e){if(new Blob([e]).size<=128)return e;for(var t=e.length/2|0,o=t,r=t+1;o>0&&r<e.length;){var i=e.substr(0,o)+"..."+e.substr(r);if(new Blob([i]).size<=128)return i;o--,r++}return e},w=function(){function e(){if(this.parentDomID="",this.isUseBoardView=!0,this.curSubView=null,e.instance)return e.instance;e.instance=this}return e.getInstance=function(){return this.instance||(this.instance=new e)},e.prototype.setParentDomID=function(e){return this.parentDomID=e,this},e.prototype.getParentDomID=function(){return this.parentDomID},e.prototype.enableUseBoardView=function(e){this.isUseBoardView=e},e.prototype.setCurrentSuperBoardSubView=function(e,t){return this.isUseBoardView?(this.curSubView=e,this.curSubView&&this.curSubView.switchWhiteboardView(t)):this.curSubView=null,this},e.prototype.getCurrentSuperBoardSubView=function(){return this.curSubView},e.prototype.switchSuperBoardSubView=function(e,t){return new Promise((function(o,r){l.e.emit(l.d.SyncSwitchMod,e,t,o,r)}))},e}(),S=(o(220),o(4)),I=function(){function e(e,t){this.curDocsView=null,this.whiteboardViews=e,this.docsViews=t;var o=e.findIndex((function(e){return!!e}));this.switchWhiteboardView(o);var r=this.curWhiteboardView.getFileInfo();this.model=Object.freeze({uniqueID:this.curWhiteboardView.getUniqueID(),name:this.curWhiteboardView.getName(),createTime:this.curWhiteboardView.getCreateTime(),fileID:r?r.fileID:"",fileType:r?r.fileType:0})}return e.prototype.getWhiteboardViewList=function(){return this.whiteboardViews},e.prototype.getCurrentWhiteboardView=function(){return this.curWhiteboardView},e.prototype.findWhiteboardView=function(e){return this.whiteboardViews[e]||this.whiteboardViews[0]},e.prototype.switchWhiteboardView=function(e){this.curWhiteboardView=this.whiteboardViews[e],this.curDocsView=this.docsViews[e]},e.prototype.insertView=function(e,t,o){this.whiteboardViews[e]=t,this.docsViews[e]=o},e.prototype.getModel=function(){return this.model},e.prototype.getPageCount=function(){return this.curWhiteboardView.getPageCount()},e.prototype.getCurrentPage=function(){return this.curWhiteboardView.getCurrentPage()},e.prototype.getCurrentStep=function(){return this.curDocsView?this.curDocsView.getCurrentStep():1},e.prototype.getVisibleSize=function(){return this.curWhiteboardView.getVisibleSize()},e.prototype.flipToPage=function(e){var t=(e-1)/this.getPageCount();return this.model.fileID?this.curWhiteboardView.scroll(0,t):this.curWhiteboardView.scroll(t,0)},e.prototype.flipToPrePage=function(){var e=this.getCurrentPage();return e>1&&this.flipToPage(e-1)},e.prototype.flipToNextPage=function(){var e=this.getCurrentPage();return e<this.getPageCount()&&this.flipToPage(e+1)},e.prototype.preStep=function(){this.curDocsView&&this.curDocsView.previousStep()},e.prototype.nextStep=function(){this.curDocsView&&this.curDocsView.nextStep()},e.prototype.addText=function(e,t,o){this.curWhiteboardView.addText(e,t,o)},e.prototype.addImage=function(e,t,o,r,i){return this.curWhiteboardView.addImage(e,t,o,r,i)},e.prototype.setBackgroundImage=function(e,t,o){return this.curWhiteboardView.setBackgroundImage(e,t,o)},e.prototype.clearBackgroundImage=function(){this.curWhiteboardView.clearBackgroundImage()},e.prototype.clearAllPage=function(){this.curWhiteboardView.clear()},e.prototype.clearCurrentPage=function(){this.curWhiteboardView.clearCurrentPage()},e.prototype.clearSelected=function(){this.curWhiteboardView.deleteSelectedGraphics()},e.prototype.undo=function(){this.curWhiteboardView.undo()},e.prototype.redo=function(){this.curWhiteboardView.redo()},e.prototype.setScaleFactor=function(e,t,o){this.curWhiteboardView.setScaleFactor(e,t,o)},e.prototype.getScaleFactor=function(){return this.curWhiteboardView.getScaleFactor()},e.prototype.setOperationMode=function(e){this.curWhiteboardView.setWhiteboardOperationMode(e)},e.prototype.snapshot=function(e){return this.curWhiteboardView.snapshot(e)},e.prototype.reloadView=function(){this.curWhiteboardView.reloadView()},e.prototype.getCurrentSheetName=function(){return this.model.fileID&&this.model.fileType===S.o.ZegoDocsViewFileTypeELS?this.curWhiteboardView.getFileInfo().fileName:""},e.prototype.getExcelSheetNameList=function(){return this.curDocsView?this.curDocsView.getExcelSheetNameList():[]},e.prototype.getThumbnailUrlList=function(){return this.curDocsView?this.curDocsView.getThumbnailUrlList():[]},e.prototype.getPPTNotes=function(e){return this.curDocsView?this.curDocsView.getPPTNotes(e):""},e.prototype.stopPlayPPTVideo=function(e){this.curDocsView&&this.curDocsView.stopPlay(e)},e}(),x=function(){return(x=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},E=function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},P=function(e,t){var o,r,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){a.label=n[1];break}if(6===n[0]&&a.label<i[1]){a.label=i[1],i=n;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(n);break}i[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},T=c.b.bind(null,"sb.m."),D=function(){function e(){this.subViews=[],this.isUseBoardView=!0,this.isLoginAttached=!1,this.viewAddTaskList=[],this.viewAddTaskIndex=0,this.viewAddTaskPending=!1}return e.prototype.init=function(e,t){var o=this;e&&e.getVersion&&t&&t.parentDomID&&t.appID&&t.token||Promise.reject(new Error("参数错误，初始化失败"));var r=x({userID:"",isTestEnv:!1},t),i=e.getVersion()<"2.0"?e.zegoWebRTC:e.zegoWebRTM;return this.zegoDocsService=new s.a(r),this.zegoWhiteboard=new n.a(new a.a(i)),this.getSuperBoardView().setParentDomID(t.parentDomID),l.e.on(l.d.SyncSwitchMod,this.onSyncSwitchViewEvent.bind(this)),l.e.on(l.d.RemoteSwitchMod,(function(e,t){if(o.viewAddTaskList.length){o.viewAddTaskHandle((function(){return E(o,void 0,void 0,(function(){return P(this,(function(o){switch(o.label){case 0:return[4,this.onRemoteSwitchViewEvent(e,t)];case 1:return o.sent(),[2]}}))}))}))}else o.onRemoteSwitchViewEvent(e,t)})),l.e.on(l.d.RemoteModAdd,(function(e){o.viewAddTaskHandle((function(){return E(o,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,this.onRemoteModAddEvent(e)];case 1:return t.sent(),[2]}}))}))}))})),l.e.on(l.d.RemoteModRemoved,this.onRemoteModRemovedEvent.bind(this)),e.on("roomStateUpdate",(function(e,t){"DISCONNECTED"===t&&o.logoutRoom()})),Promise.resolve(!0)},e.prototype.viewAddTaskHandle=function(e){return E(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:if(this.viewAddTaskList.push(e),this.viewAddTaskPending&&this.viewAddTaskList.length)return[2];t.label=1;case 1:return this.viewAddTaskIndex<=this.viewAddTaskList.length?(this.viewAddTaskPending=!0,this.viewAddTaskList[this.viewAddTaskIndex]?[4,this.viewAddTaskList[this.viewAddTaskIndex]()]:[3,3]):[3,5];case 2:t.sent(),t.label=3;case 3:this.viewAddTaskIndex++,t.label=4;case 4:return[3,1];case 5:return this.viewAddTaskList.length=0,this.viewAddTaskIndex=0,this.viewAddTaskPending=!1,[2]}}))}))},e.prototype.setCustomizedConfig=function(e,t){return c.a.info(T("setCustomizedConfig"),JSON.stringify({key:e,value:t})),this.zegoDocsService.setConfig(e,t)},e.prototype.getCustomizedConfig=function(e){return this.zegoDocsService.getConfig(e)},e.prototype.on=function(e,t){var o;return"error"==e&&t&&(o=function(e){var o=e.code;String(o).startsWith("5")||(e=v(o)),1e3!==e.code&&1001!==e.code&&t(e)}),l.e.on(e,o||t)},e.prototype.off=function(e,t){return l.e.off(e,t)},e.prototype.getVersion=function(){return"2.0.0"},e.prototype.getSuperBoardView=function(){var e=w.getInstance();return e.enableUseBoardView(this.isUseBoardView),e},e.prototype.enableSuperBoardView=function(){this.isUseBoardView=!1},e.prototype.getSuperBoardSubView=function(e){return this.isUseBoardView?null:this.subViews.find((function(t){return t.getModel().uniqueID===e}))||null},e.prototype.attachSuperBoardSubView=function(e,t){var o=this;if(this.isUseBoardView)return Promise.reject(new Error("仅限于不使用 ZegoSuperBoardView 的场景"));var r=e;if(!r||!r.getCurrentWhiteboardView())return Promise.reject(new Error("白板不存在"));var i=r.getCurrentWhiteboardView(),n=i.getRootDomID();if(n&&n!==t)return Promise.reject(new Error("不允许挂载到多个容器"));var a=r.getModel().fileID;return a?new Promise((function(e,r){var n,s=null===(n=i.getFileInfo())||void 0===n?void 0:n.fileName,c=o.zegoDocsService.createView(i.getID(),s);o.zegoDocsService.setDocsViewParent(c,t),c.loadFile(a,"",(function(t){o.zegoWhiteboard.attachView(i,t.viewID).then(e,r)})).catch(r)})):this.zegoWhiteboard.attachView(i,t)},e.prototype.loginRoom=function(e,t,o,r){return E(this,void 0,void 0,(function(){var i,n,a,s,u,h;return P(this,(function(d){switch(d.label){case 0:return c.a.info(T("loginRoom"),JSON.stringify({roomID:e,token:t,user:o,config:r})),[4,this.zegoWhiteboard.loginRoom(e,t,o,r)];case 1:i=d.sent(),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.querySuperBoardSubViewModelList()];case 3:return d.sent(),this.subViews.length&&this.isUseBoardView?(n=this.zegoWhiteboard.getCurrentActivitedView(),a=n[0],s=n[1],(u=this.subViews.find((function(e){return e.getModel().uniqueID==a})))?(h=u.getWhiteboardViewList().findIndex((function(e){return e.getID()==s})),this.getSuperBoardView().setCurrentSuperBoardSubView(u,h),this.isLoginAttached=!0,l.e.emit(l.d.RemoteSubViewAdd,a),[3,5]):(this.isLoginAttached=!0,[2,i])):(this.isLoginAttached=!0,[2,i]);case 4:return d.sent(),[3,5];case 5:return[2,i]}}))}))},e.prototype.logoutRoom=function(e){c.a.info(T("logoutRoom"),e),this.subViews=[],this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),l.e.removeAllListeners(),this.zegoWhiteboard.logoutRoom(e)},e.prototype.createWhiteboardView=function(e){return E(this,void 0,void 0,(function(){var t,o,r;return P(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t={uniqueID:_(),name:b(e.name),aspectWidth:e.perPageWidth*e.pageCount,aspectHeight:e.perPageHeight,pageCount:e.pageCount},c.a.info(T("createWhiteboardView"),JSON.stringify({model:t})),[4,this.zegoWhiteboard.createView(t)];case 1:return o=i.sent(),r=new I([o],[]),this.isUseBoardView?[4,this.zegoWhiteboard.attachView(o,this.getSuperBoardView().getParentDomID())]:[3,3];case 2:i.sent(),this.zegoWhiteboard.switchView(o.getID()),this.getSuperBoardView().setCurrentSuperBoardSubView(r,0),i.label=3;case 3:return this.subViews.push(r),[2,r.getModel()];case 4:throw i.sent();case 5:return[2]}}))}))},e.prototype.createFileView=function(e){var t=this;return new Promise((function(o,r){var i=e.fileID,n=t.getSuperBoardView().getParentDomID(),a=_(),s=y(),c=t.zegoDocsService.createView(s),l=function(e){return E(t,void 0,void 0,(function(){var t,l,u,d,p,f,g,m,_,y,v;return P(this,(function(b){switch(b.label){case 0:if(e.fileType!==h.c.ZegoDocsViewFileTypeELS)return[3,9];b.label=1;case 1:b.trys.push([1,7,,8]),t=e.sheets,l=[],u=[],d=t.length-1,b.label=2;case 2:return d>0?[4,this.createExcelRestFileView(n,a,i,t[d])]:[3,5];case 3:p=b.sent(),f=p[0],g=p[1],l.push(f),u.push(g),b.label=4;case 4:return d--,[3,2];case 5:return[4,this.createAndAttachFileView(a,s,e)];case 6:return _=b.sent(),l.push(_),u.push(c),l.reverse(),u.reverse(),y=new I(l,u),this.subViews.push(y),this.isUseBoardView&&(this.getSuperBoardView().setCurrentSuperBoardSubView(y,0),this.zegoWhiteboard.switchView(s)),o(y.getModel()),[3,8];case 7:return m=b.sent(),r(m),[3,8];case 8:return[3,12];case 9:return b.trys.push([9,11,,12]),[4,this.createAndAttachFileView(a,s,e)];case 10:return _=b.sent(),y=new I([_],[c]),this.subViews.push(y),this.isUseBoardView&&(this.getSuperBoardView().setCurrentSuperBoardSubView(y,0),this.zegoWhiteboard.switchView(s)),o(y.getModel()),[3,12];case 11:return v=b.sent(),r(v),[3,12];case 12:return[2]}}))}))};t.isUseBoardView?(t.zegoDocsService.setDocsViewParent(c,n),c.loadFile(i,"",l).catch(r)):t.zegoDocsService.getDocsViewFileInfo(c,i).then(l).catch(r)}))},e.prototype.destroySuperBoardSubView=function(e){var t=this;c.a.info(T("destroySuperBoardSubView"),JSON.stringify({uniqueID:e}));var o=e,r=this.subViews.findIndex((function(t){return t.getModel().uniqueID==e}));if(-1!=r){var i=this.subViews.splice(r,1)[0].getWhiteboardViewList().map((function(e){return t.zegoWhiteboard.destroyView(e)}));return Promise.all(i).then((function(){return E(t,void 0,void 0,(function(){var e,t,r,i,n;return P(this,(function(a){switch(a.label){case 0:return 0===this.subViews.length?[3,3]:(e=this.zegoWhiteboard.getCurrentActivitedView(),t=e[0],r=e[1],(i=this.subViews.find((function(e){return e.getModel().uniqueID==t})))?(n=i.getWhiteboardViewList().findIndex((function(e){return e.getID()==r})),o!==t?[4,this.onSyncSwitchViewEvent(t,n)]:[3,2]):[2]);case 1:a.sent(),a.label=2;case 2:return[3,4];case 3:this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),a.label=4;case 4:return[2]}}))}))})).catch((function(e){}))}return Promise.reject(new Error("白板不存在"))},e.prototype.querySuperBoardSubViewModelList=function(){return E(this,void 0,void 0,(function(){var e,t,o,r,i,n;return P(this,(function(a){switch(a.label){case 0:return this.subViews.length?[2,Promise.resolve(this.subViews.map((function(e){return e.getModel()})))]:[4,this.zegoWhiteboard.getViewList()];case 1:e=a.sent(),t={},e.forEach((function(e){var o=e,r=o.getUniqueID();t[r]?t[r].push(o):t[r]=[o]})),o=Object.keys(t),r=function(e){var r,n,a,s;return P(this,(function(c){switch(c.label){case 0:return r=o[e],i.subViews.find((function(e){return e.getModel().uniqueID===r}))?[3,2]:(n=t[r],[4,i.generateDocsViews(n,null===(c=n[0].getFileInfo())||void 0===c?void 0:c.fileID)]);case 1:a=c.sent(),s=new I(n,a),i.subViews.push(s),c.label=2;case 2:return[2]}}))},i=this,n=0,a.label=2;case 2:return n<o.length?[5,r(n)]:[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[2,Promise.resolve(this.subViews.map((function(e){return e.getModel()})))]}}))}))},e.prototype.clearCache=function(){return this.zegoWhiteboard.clear()},e.prototype.setDeferredRenderingTime=function(e){c.a.info(T("setDeferredRenderingTime"),JSON.stringify({delay:e})),this.zegoWhiteboard.setDeferredRenderingTime(e)},e.prototype.enableSyncScale=function(e){c.a.info(T("enableSyncScale"),JSON.stringify({enable:e})),this.zegoWhiteboard.enableSyncScale(e)},e.prototype.enableResponseScale=function(e){c.a.info(T("enableResponseScale"),JSON.stringify({enable:e})),this.zegoWhiteboard.enableResponseScale(e)},e.prototype.enableHandwriting=function(e){c.a.info(T("enableHandwriting"),JSON.stringify({enable:e})),this.zegoWhiteboard.enableHandwriting(e)},e.prototype.setToolType=function(e){var t;return this.zegoWhiteboard.getActivitedViews().forEach((function(o,r){0===r?t=o.setToolType(e):o.setToolType(e)})),t},e.prototype.getToolType=function(){return Object(u.e)()},e.prototype.setFontBold=function(e){Object(u.l)(e)},e.prototype.isFontBold=function(){return Object(u.f)()},e.prototype.setFontItalic=function(e){Object(u.m)(e)},e.prototype.isFontItalic=function(){return Object(u.g)()},e.prototype.setFontSize=function(e){Object(u.n)(e)&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setFontSize(e)}))},e.prototype.getFontSize=function(){return Object(u.d)()},e.prototype.setBrushSize=function(e){Object(u.k)(e)&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setBrushSize(e)}))},e.prototype.getBrushSize=function(){return Object(u.c)()},e.prototype.setBrushColor=function(e){Object(u.j)(e)},e.prototype.getBrushColor=function(){return Object(u.b)()},e.prototype.setBackgroundColor=function(e){Object(u.i)(e)&&this.zegoWhiteboard.getActivitedViews().forEach((function(t){return t.setBackgroundColor(e)}))},e.prototype.isHandwritingEnabled=function(){return Object(u.h)()},e.prototype.getBackgroundColor=function(){return Object(u.a)()},e.prototype.uploadFile=function(e,t,o){return this.zegoDocsService.uploadFile(e,t,{},o)},e.prototype.cancelUploadFile=function(e){return this.zegoDocsService.cancelUploadFile(e)},e.prototype.uploadH5File=function(e,t,o){return this.zegoDocsService.uploadH5File(e,t,o)},e.prototype.cacheFile=function(e){return this.zegoDocsService.cacheFile(e)},e.prototype.createAndAttachFileView=function(e,t,o){return E(this,void 0,void 0,(function(){var r,i;return P(this,(function(n){switch(n.label){case 0:return r={uniqueID:e,name:b(o.name||o.fileName),aspectWidth:o.width,aspectHeight:o.height,pageCount:o.pageCount,fileInfo:{fileID:o.fileID,fileName:o.fileName,fileType:o.fileType}},c.a.info(T("createAndAttachFileView"),JSON.stringify({model:r,whiteboardID:t})),[4,this.zegoWhiteboard.createView(r,t)];case 1:return i=n.sent(),this.isUseBoardView?[4,this.zegoWhiteboard.attachView(i,o.viewID)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2,i]}}))}))},e.prototype.createExcelRestFileView=function(e,t,o,r){var i=this;return new Promise((function(n){var a=y(),s=i.zegoDocsService.createView(a,r);i.isUseBoardView&&i.zegoDocsService.setDocsViewParent(s,e),i.zegoDocsService.getDocsViewFileInfo(s,o).then((function(e){return E(i,void 0,void 0,(function(){var o,i;return P(this,(function(l){switch(l.label){case 0:return o={uniqueID:t,name:b(e.name),aspectWidth:e.width,aspectHeight:e.height,pageCount:e.pageCount,fileInfo:{fileID:e.fileID,fileName:r,fileType:e.fileType}},c.a.info(T("createExcelRestFileView"),JSON.stringify({model:o,whiteboardID:a})),[4,this.zegoWhiteboard.createView(o,a)];case 1:return i=l.sent(),n([i,s]),[2]}}))}))}))}))},e.prototype.stopVideo=function(){var e=this.getSuperBoardView().getCurrentSuperBoardSubView();e&&((e.getModel().fileID&&e.getModel().fileType===h.c.ZegoDocsViewFileTypeCustomH5||e.getModel().fileType===h.c.ZegoDocsViewFileTypeDynamicPPTH5)&&e.stopPlayPPTVideo(0))},e.prototype.generateDocsViews=function(e,t){var o=this;if(t){var r=e.map((function(e,r){var i=o.zegoDocsService.createView(e.getID(),r);return o.zegoDocsService.getDocsViewFileInfo(i,t).then((function(){return i}))}));return Promise.all(r)}return Promise.resolve([])},e.prototype.emitRemoteSubViewAddEvent=function(e,t,o){return E(this,void 0,void 0,(function(){var r;return P(this,(function(i){return(r=this.subViews.find((function(t){return t.getModel().uniqueID===e})))||(r=new I([t],o?[o]:[]),this.subViews.push(r)),this.isUseBoardView&&this.getSuperBoardView().setCurrentSuperBoardSubView(r,0),l.e.emit(l.d.RemoteSubViewAdd,e),[2]}))}))},e.prototype.onSyncSwitchViewEvent=function(e,t,o,r){return E(this,void 0,void 0,(function(){var i,n,a,s,c,l,u,h=this;return P(this,(function(d){switch(d.label){case 0:if(!this.isUseBoardView)return[2,r&&r(!1)];if(this.stopVideo(),!(i=this.subViews.find((function(t){return t.getModel().uniqueID==e}))))return[3,8];d.label=1;case 1:return d.trys.push([1,6,,7]),t=+t||0,n=i.findWhiteboardView(t),a=n.getID(),[4,this.zegoWhiteboard.switchView(a)];case 2:return d.sent(),s=this.getSuperBoardView().getParentDomID(),(c=i.getModel().fileID)?(l=this.zegoDocsService.createView(a,t),this.zegoDocsService.setDocsViewParent(l,s),this.getSuperBoardView().setCurrentSuperBoardSubView(i,t),l.loadFile(c,"",(function(e){return E(h,void 0,void 0,(function(){var t;return P(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.zegoWhiteboard.attachView(n,e.viewID)];case 1:return i.sent(),o&&o(!0),[3,3];case 2:return t=i.sent(),r&&r(t),[3,3];case 3:return[2]}}))}))})),[3,5]):[3,3];case 3:return this.getSuperBoardView().setCurrentSuperBoardSubView(i,0),[4,this.zegoWhiteboard.attachView(n,s)];case 4:d.sent(),o&&o(!0),d.label=5;case 5:return[3,7];case 6:return u=d.sent(),r&&r(u),[3,7];case 7:return[3,9];case 8:r&&r(new Error("白板不存在")),d.label=9;case 9:return[2]}}))}))},e.prototype.onRemoteSwitchViewEvent=function(e,t){return E(this,void 0,void 0,(function(){return P(this,(function(o){return this.isUseBoardView?this.lastSwitchUniqueID===e&&this.lastSwitchWhiteboardID===t?[2,Promise.resolve()]:(this.switchView(e,t,"onRemoteSwitchViewEvent"),[2]):[2,Promise.resolve()]}))}))},e.prototype.switchView=function(e,t,o){return E(this,void 0,void 0,(function(){var o,r,i,n,a,s,c=this;return P(this,(function(u){switch(u.label){case 0:return this.stopVideo(),(o=this.subViews.find((function(t){return t.getModel().uniqueID==e})))?(r=o.getWhiteboardViewList().findIndex((function(e){return e.getID()==t})),i=o.findWhiteboardView(r),n=this.getSuperBoardView().getParentDomID(),(a=o.getModel().fileID)?(s=this.zegoDocsService.createView(t,r),this.zegoDocsService.setDocsViewParent(s,n),s.loadFile(a,"",(function(t){return E(c,void 0,void 0,(function(){var n;return P(this,(function(a){switch(a.label){case 0:return[4,this.zegoWhiteboard.attachView(i,t.viewID)];case 1:return a.sent(),n=this.getSuperBoardView().getCurrentSuperBoardSubView(),this.getSuperBoardView().setCurrentSuperBoardSubView(o,r),(null==n?void 0:n.getModel().uniqueID)==e?l.e.emit(l.d.RemoteSubViewExcelSwitched,e,r):l.e.emit(l.d.RemoteSubViewSwitched,e),[2]}}))}))})),[3,3]):[3,1]):[3,4];case 1:return[4,this.zegoWhiteboard.attachView(i,n)];case 2:u.sent(),this.getSuperBoardView().setCurrentSuperBoardSubView(o,0),l.e.emit(l.d.RemoteSubViewSwitched,e),u.label=3;case 3:this.lastSwitchUniqueID=e,this.lastSwitchWhiteboardID=t,u.label=4;case 4:return[2]}}))}))},e.prototype.onRemoteModAddEvent=function(e){return E(this,void 0,void 0,(function(){var t,o,r,i,n,a,s,c,u,d,p,f,g,m,_;return P(this,(function(y){switch(y.label){case 0:return this.isLoginAttached?(t=this.getSuperBoardView().getParentDomID(),o=e.getUniqueID(),r=e.getID(),i=e.getFileInfo(),(n=this.subViews.find((function(e){return e.getModel().uniqueID===o})))?i?(s=i.fileID,a=i.fileName,i.fileType!==h.c.ZegoDocsViewFileTypeELS?[3,5]:(d=n.getExcelSheetNameList(),p=d.findIndex((function(e){return e===a})),_=this.zegoDocsService.createView(r,a),this.isUseBoardView&&this.zegoDocsService.setDocsViewParent(_,t),n.getWhiteboardViewList().reduce((function(e,t){return t?++e:e}),0)+1<d.length?[4,this.zegoDocsService.getDocsViewFileInfo(_,s)]:[3,2])):[3,7]:[3,9]):[2];case 1:return y.sent(),n.insertView(p,e,_),[3,4];case 2:return[4,this.zegoDocsService.getDocsViewFileInfo(_,s)];case 3:y.sent(),n.insertView(p,e,_),n.switchWhiteboardView(p),l.e.emit(l.d.RemoteSubViewAdd,o),y.label=4;case 4:return[3,6];case 5:l.e.emit(l.d.RemoteSubViewAdd,o),y.label=6;case 6:return[3,8];case 7:l.e.emit(l.d.RemoteSubViewAdd,o),y.label=8;case 8:return[3,15];case 9:return i?(s=i.fileID,c=i.fileName,i.fileType!==h.c.ZegoDocsViewFileTypeELS?[3,11]:(_=this.zegoDocsService.createView(r,c),this.isUseBoardView&&this.zegoDocsService.setDocsViewParent(_,t),[4,this.zegoDocsService.getDocsViewFileInfo(_,s)])):[3,14];case 10:return u=y.sent(),d=u.sheets,p=d.findIndex((function(e){return e===c})),(f=this.subViews.find((function(e){return e.getModel().uniqueID===o})))||(m=[],(g=[])[p]=e,m[p]=_,f=new I(g,m),this.subViews.push(f),f.switchWhiteboardView(p)),[3,13];case 11:return _=this.zegoDocsService.createView(r),[4,this.zegoDocsService.getDocsViewFileInfo(_,s)];case 12:y.sent(),this.emitRemoteSubViewAddEvent(o,e,_),y.label=13;case 13:return[3,15];case 14:this.emitRemoteSubViewAddEvent(o,e),y.label=15;case 15:return[2]}}))}))},e.prototype.onRemoteModRemovedEvent=function(e,t){var o=this.subViews.findIndex((function(t){return t.getModel().uniqueID===e}));if(-1==o)l.e.emit(l.d.RemoteSubViewRemoved,e);else{var r=this.subViews[o],i=r.getModel(),n=i.fileType;if(i.fileID&&n==h.c.ZegoDocsViewFileTypeELS){var a=r.getWhiteboardViewList(),s=a.findIndex((function(e){return e.getID()==t}));if(a.splice(s,1),0!==a.reduce((function(e,t){return t?++e:e}),0))return}this.subViews.splice(o,1),this.isUseBoardView&&0===this.subViews.length&&this.getSuperBoardView().setCurrentSuperBoardSubView(null,0),l.e.emit(l.d.RemoteSubViewRemoved,e)}},e}(),O=function(){function e(){if(e.instance)return e.instance;this.zegoSuperBoardService=new D,e.instance=this}return e.getInstance=function(){return this.instance||(this.instance=new e)},e.prototype.init=function(e,t){return this.zegoSuperBoardService.init(e,t)},e.prototype.setCustomizedConfig=function(e,t){return this.zegoSuperBoardService.setCustomizedConfig(e,t)},e.prototype.getCustomizedConfig=function(e){return this.zegoSuperBoardService.getCustomizedConfig(e)},e.prototype.on=function(e,t){return this.zegoSuperBoardService.on(e,t)},e.prototype.off=function(e,t){return this.zegoSuperBoardService.off(e,t)},e.prototype.getVersion=function(){return this.zegoSuperBoardService.getVersion()},e.prototype.getSuperBoardView=function(){return this.zegoSuperBoardService.getSuperBoardView()},e.prototype.enableSuperBoardView=function(){this.zegoSuperBoardService.enableSuperBoardView()},e.prototype.getSuperBoardSubView=function(e){return this.zegoSuperBoardService.getSuperBoardSubView(e)},e.prototype.attachSuperBoardSubView=function(e,t){return this.zegoSuperBoardService.attachSuperBoardSubView(e,t)},e.prototype.loginRoom=function(e,t,o,r){return this.zegoSuperBoardService.loginRoom(e,t,o,r)},e.prototype.logoutRoom=function(e){this.zegoSuperBoardService.logoutRoom(e)},e.prototype.createWhiteboardView=function(e){return this.zegoSuperBoardService.createWhiteboardView(e)},e.prototype.createFileView=function(e){return this.zegoSuperBoardService.createFileView(e)},e.prototype.destroySuperBoardSubView=function(e){return this.zegoSuperBoardService.destroySuperBoardSubView(e)},e.prototype.querySuperBoardSubViewList=function(){return this.zegoSuperBoardService.querySuperBoardSubViewModelList()},e.prototype.clearCache=function(){return this.zegoSuperBoardService.clearCache()},e.prototype.setDeferredRenderingTime=function(e){this.zegoSuperBoardService.setDeferredRenderingTime(e)},e.prototype.enableSyncScale=function(e){this.zegoSuperBoardService.enableSyncScale(e)},e.prototype.enableResponseScale=function(e){this.zegoSuperBoardService.enableResponseScale(e)},e.prototype.enableHandwriting=function(e){this.zegoSuperBoardService.enableHandwriting(e)},e.prototype.setToolType=function(e){return this.zegoSuperBoardService.setToolType(e)},e.prototype.getToolType=function(){return this.zegoSuperBoardService.getToolType()},e.prototype.setFontBold=function(e){this.zegoSuperBoardService.setFontBold(e)},e.prototype.isFontBold=function(){return this.zegoSuperBoardService.isFontBold()},e.prototype.setFontItalic=function(e){this.zegoSuperBoardService.setFontItalic(e)},e.prototype.isFontItalic=function(){return this.zegoSuperBoardService.isFontItalic()},e.prototype.setFontSize=function(e){this.zegoSuperBoardService.setFontSize(e)},e.prototype.getFontSize=function(){return this.zegoSuperBoardService.getFontSize()},e.prototype.setBrushSize=function(e){this.zegoSuperBoardService.setBrushSize(e)},e.prototype.getBrushSize=function(){return this.zegoSuperBoardService.getBrushSize()},e.prototype.setBrushColor=function(e){this.zegoSuperBoardService.setBrushColor(e)},e.prototype.getBrushColor=function(){return this.zegoSuperBoardService.getBrushColor()},e.prototype.setBackgroundColor=function(e){this.zegoSuperBoardService.setBackgroundColor(e)},e.prototype.getBackgroundColor=function(){return this.zegoSuperBoardService.getBackgroundColor()},e.prototype.isHandwritingEnabled=function(){return this.zegoSuperBoardService.isHandwritingEnabled()},e.prototype.uploadFile=function(e,t,o){return this.zegoSuperBoardService.uploadFile(e,t,o)},e.prototype.cancelUploadFile=function(e){return this.zegoSuperBoardService.cancelUploadFile(e)},e.prototype.uploadH5File=function(e,t,o){return this.zegoSuperBoardService.uploadH5File(e,t,o)},e.prototype.cacheFile=function(e){return this.zegoSuperBoardService.cacheFile(e)},e}()}])}));